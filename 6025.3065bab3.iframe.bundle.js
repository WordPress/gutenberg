"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[6025],{"./packages/a11y/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function addContainer(ariaLive="polite"){const container=document.createElement("div");container.id=`a11y-speak-${ariaLive}`,container.className="a11y-speak-region",container.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),container.setAttribute("aria-live",ariaLive),container.setAttribute("aria-relevant","additions text"),container.setAttribute("aria-atomic","true");const{body}=document;return body&&body.appendChild(container),container}__webpack_require__.d(__webpack_exports__,{L:()=>speak});var build_module=__webpack_require__("./packages/i18n/build-module/index.js");let previousMessage="";function speak(message,ariaLive){!function clear(){const regions=document.getElementsByClassName("a11y-speak-region"),introText=document.getElementById("a11y-speak-intro-text");for(let i=0;i<regions.length;i++)regions[i].textContent="";introText&&introText.setAttribute("hidden","hidden")}(),message=function filterMessage(message){return message=message.replace(/<[^<>]+>/g," "),previousMessage===message&&(message+="Â "),previousMessage=message,message}(message);const introText=document.getElementById("a11y-speak-intro-text"),containerAssertive=document.getElementById("a11y-speak-assertive"),containerPolite=document.getElementById("a11y-speak-polite");containerAssertive&&"assertive"===ariaLive?containerAssertive.textContent=message:containerPolite&&(containerPolite.textContent=message),introText&&introText.removeAttribute("hidden")}!function domReady(callback){"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",callback):callback())}((function setup(){const introText=document.getElementById("a11y-speak-intro-text"),containerAssertive=document.getElementById("a11y-speak-assertive"),containerPolite=document.getElementById("a11y-speak-polite");null===introText&&function addIntroText(){const introText=document.createElement("p");introText.id="a11y-speak-intro-text",introText.className="a11y-speak-intro-text",introText.textContent=(0,build_module.__)("Notifications"),introText.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),introText.setAttribute("hidden","hidden");const{body}=document;return body&&body.appendChild(introText),introText}(),null===containerAssertive&&addContainer("assertive"),null===containerPolite&&addContainer("polite")}))},"./packages/autop/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>autop,r:()=>removep});const htmlSplitRegex=new RegExp("(<((?=!--|!\\[CDATA\\[)((?=!-)!(?:-(?!->)[^\\-]*)*(?:--\x3e)?|!\\[CDATA\\[[^\\]]*(?:](?!]>)[^\\]]*)*?(?:]]>)?)|[^>]*>?))");function replaceInHtmlTags(haystack,replacePairs){const textArr=function htmlSplit(input){const parts=[];let match,workingInput=input;for(;match=workingInput.match(htmlSplitRegex);){const index=match.index;parts.push(workingInput.slice(0,index)),parts.push(match[0]),workingInput=workingInput.slice(index+match[0].length)}return workingInput.length&&parts.push(workingInput),parts}(haystack);let changed=!1;const needles=Object.keys(replacePairs);for(let i=1;i<textArr.length;i+=2)for(let j=0;j<needles.length;j++){const needle=needles[j];if(-1!==textArr[i].indexOf(needle)){textArr[i]=textArr[i].replace(new RegExp(needle,"g"),replacePairs[needle]),changed=!0;break}}return changed&&(haystack=textArr.join("")),haystack}function autop(text,br=!0){const preTags=[];if(""===text.trim())return"";if(-1!==(text+="\n").indexOf("<pre")){const textParts=text.split("</pre>"),lastText=textParts.pop();text="";for(let i=0;i<textParts.length;i++){const textPart=textParts[i],start=textPart.indexOf("<pre");if(-1===start){text+=textPart;continue}const name="<pre wp-pre-tag-"+i+"></pre>";preTags.push([name,textPart.substr(start)+"</pre>"]),text+=textPart.substr(0,start)+name}text+=lastText}const allBlocks="(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)";-1!==(text=replaceInHtmlTags(text=(text=(text=(text=text.replace(/<br\s*\/?>\s*<br\s*\/?>/g,"\n\n")).replace(new RegExp("(<"+allBlocks+"[\\s/>])","g"),"\n\n$1")).replace(new RegExp("(</"+allBlocks+">)","g"),"$1\n\n")).replace(/\r\n|\r/g,"\n"),{"\n":" \x3c!-- wpnl --\x3e "})).indexOf("<option")&&(text=(text=text.replace(/\s*<option/g,"<option")).replace(/<\/option>\s*/g,"</option>")),-1!==text.indexOf("</object>")&&(text=(text=(text=text.replace(/(<object[^>]*>)\s*/g,"$1")).replace(/\s*<\/object>/g,"</object>")).replace(/\s*(<\/?(?:param|embed)[^>]*>)\s*/g,"$1")),-1===text.indexOf("<source")&&-1===text.indexOf("<track")||(text=(text=(text=text.replace(/([<\[](?:audio|video)[^>\]]*[>\]])\s*/g,"$1")).replace(/\s*([<\[]\/(?:audio|video)[>\]])/g,"$1")).replace(/\s*(<(?:source|track)[^>]*>)\s*/g,"$1")),-1!==text.indexOf("<figcaption")&&(text=(text=text.replace(/\s*(<figcaption[^>]*>)/,"$1")).replace(/<\/figcaption>\s*/,"</figcaption>"));const texts=(text=text.replace(/\n\n+/g,"\n\n")).split(/\n\s*\n/).filter(Boolean);return text="",texts.forEach((textPiece=>{text+="<p>"+textPiece.replace(/^\n*|\n*$/g,"")+"</p>\n"})),text=(text=(text=(text=(text=(text=(text=(text=text.replace(/<p>\s*<\/p>/g,"")).replace(/<p>([^<]+)<\/(div|address|form)>/g,"<p>$1</p></$2>")).replace(new RegExp("<p>\\s*(</?"+allBlocks+"[^>]*>)\\s*</p>","g"),"$1")).replace(/<p>(<li.+?)<\/p>/g,"$1")).replace(/<p><blockquote([^>]*)>/gi,"<blockquote$1><p>")).replace(/<\/blockquote><\/p>/g,"</p></blockquote>")).replace(new RegExp("<p>\\s*(</?"+allBlocks+"[^>]*>)","g"),"$1")).replace(new RegExp("(</?"+allBlocks+"[^>]*>)\\s*</p>","g"),"$1"),br&&(text=(text=(text=(text=text.replace(/<(script|style).*?<\/\\1>/g,(match=>match[0].replace(/\n/g,"<WPPreserveNewline />")))).replace(/<br>|<br\/>/g,"<br />")).replace(/(<br \/>)?\s*\n/g,((a,b)=>b?a:"<br />\n"))).replace(/<WPPreserveNewline \/>/g,"\n")),text=(text=(text=text.replace(new RegExp("(</?"+allBlocks+"[^>]*>)\\s*<br />","g"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)/g,"$1")).replace(/\n<\/p>$/g,"</p>"),preTags.forEach((preTag=>{const[name,original]=preTag;text=text.replace(name,original)})),-1!==text.indexOf("\x3c!-- wpnl --\x3e")&&(text=text.replace(/\s?<!-- wpnl -->\s?/g,"\n")),text}function removep(html){const blocklist="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure",blocklist1=blocklist+"|div|p",blocklist2=blocklist+"|pre",preserve=[];let preserveLinebreaks=!1,preserveBr=!1;return html?(-1===html.indexOf("<script")&&-1===html.indexOf("<style")||(html=html.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,(match=>(preserve.push(match),"<wp-preserve>")))),-1!==html.indexOf("<pre")&&(preserveLinebreaks=!0,html=html.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,(a=>(a=(a=a.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/\r?\n/g,"<wp-line-break>")))),-1!==html.indexOf("[caption")&&(preserveBr=!0,html=html.replace(/\[caption[\s\S]+?\[\/caption\]/g,(a=>a.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")))),-1!==(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=html.replace(new RegExp("\\s*</("+blocklist1+")>\\s*","g"),"</$1>\n")).replace(new RegExp("\\s*<((?:"+blocklist1+")(?: [^>]*)?)>","g"),"\n<$1>")).replace(/(<p [^>]+>[\s\S]*?)<\/p>/g,"$1</p#>")).replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n")).replace(/\s*<p>/gi,"")).replace(/\s*<\/p>\s*/gi,"\n\n")).replace(/\n[\s\u00a0]+\n/g,"\n\n")).replace(/(\s*)<br ?\/?>\s*/gi,((_,space)=>space&&-1!==space.indexOf("\n")?"\n\n":"\n"))).replace(/\s*<div/g,"\n<div")).replace(/<\/div>\s*/g,"</div>\n")).replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n")).replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption")).replace(new RegExp("\\s*<((?:"+blocklist2+")(?: [^>]*)?)\\s*>","g"),"\n<$1>")).replace(new RegExp("\\s*</("+blocklist2+")>\\s*","g"),"</$1>\n")).replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>")).indexOf("<option")&&(html=(html=html.replace(/\s*<option/g,"\n<option")).replace(/\s*<\/select>/g,"\n</select>")),-1!==html.indexOf("<hr")&&(html=html.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!==html.indexOf("<object")&&(html=html.replace(/<object[\s\S]+?<\/object>/g,(a=>a.replace(/[\r\n]+/g,"")))),html=(html=(html=(html=html.replace(/<\/p#>/g,"</p>\n")).replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1")).replace(/^\s+/,"")).replace(/[\s\u00a0]+$/,""),preserveLinebreaks&&(html=html.replace(/<wp-line-break>/g,"\n")),preserveBr&&(html=html.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),preserve.length&&(html=html.replace(/<wp-preserve>/g,(()=>preserve.shift()))),html):""}},"./packages/blob/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H8:()=>isBlobURL,SH:()=>getBlobByURL,WN:()=>downloadBlob,bW:()=>createBlobURL,hK:()=>revokeBlobURL,sK:()=>getBlobTypeByURL});const cache={};function createBlobURL(file){const url=window.URL.createObjectURL(file);return cache[url]=file,url}function getBlobByURL(url){return cache[url]}function getBlobTypeByURL(url){return getBlobByURL(url)?.type.split("/")[0]}function revokeBlobURL(url){cache[url]&&window.URL.revokeObjectURL(url),delete cache[url]}function isBlobURL(url){return!(!url||!url.indexOf)&&0===url.indexOf("blob:")}function downloadBlob(filename,content,contentType=""){if(!filename||!content)return;const file=new window.Blob([content],{type:contentType}),url=window.URL.createObjectURL(file),anchorElement=document.createElement("a");anchorElement.href=url,anchorElement.download=filename,anchorElement.style.display="none",document.body.appendChild(anchorElement),anchorElement.click(),document.body.removeChild(anchorElement),window.URL.revokeObjectURL(url)}},"./packages/block-serialization-default-parser/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{let document,offset,output,stack;__webpack_require__.d(__webpack_exports__,{q:()=>parse});const tokenizer=/<!--\s+(\/)?wp:([a-z][a-z0-9_-]*\/)?([a-z][a-z0-9_-]*)\s+({(?:(?=([^}]+|}+(?=})|(?!}\s+\/?-->)[^])*)\5|[^]*?)}\s+)?(\/)?-->/g;function Block(blockName,attrs,innerBlocks,innerHTML,innerContent){return{blockName,attrs,innerBlocks,innerHTML,innerContent}}function Freeform(innerHTML){return Block(null,{},[],innerHTML,[innerHTML])}const parse=doc=>{document=doc,offset=0,output=[],stack=[],tokenizer.lastIndex=0;do{}while(proceed());return output};function proceed(){const stackDepth=stack.length,next=function nextToken(){const matches=tokenizer.exec(document);if(null===matches)return["no-more-tokens","",null,0,0];const startedAt=matches.index,[match,closerMatch,namespaceMatch,nameMatch,attrsMatch,,voidMatch]=matches,length=match.length,isCloser=!!closerMatch,isVoid=!!voidMatch,name=(namespaceMatch||"core/")+nameMatch,hasAttrs=!!attrsMatch,attrs=hasAttrs?function parseJSON(input){try{return JSON.parse(input)}catch(e){return null}}(attrsMatch):{};if(isVoid)return["void-block",name,attrs,startedAt,length];if(isCloser)return["block-closer",name,null,startedAt,length];return["block-opener",name,attrs,startedAt,length]}(),[tokenType,blockName,attrs,startOffset,tokenLength]=next,leadingHtmlStart=startOffset>offset?offset:null;switch(tokenType){case"no-more-tokens":if(0===stackDepth)return addFreeform(),!1;if(1===stackDepth)return addBlockFromStack(),!1;for(;0<stack.length;)addBlockFromStack();return!1;case"void-block":return 0===stackDepth?(null!==leadingHtmlStart&&output.push(Freeform(document.substr(leadingHtmlStart,startOffset-leadingHtmlStart))),output.push(Block(blockName,attrs,[],"",[])),offset=startOffset+tokenLength,!0):(addInnerBlock(Block(blockName,attrs,[],"",[]),startOffset,tokenLength),offset=startOffset+tokenLength,!0);case"block-opener":return stack.push(function Frame(block,tokenStart,tokenLength,prevOffset,leadingHtmlStart){return{block,tokenStart,tokenLength,prevOffset:prevOffset||tokenStart+tokenLength,leadingHtmlStart}}(Block(blockName,attrs,[],"",[]),startOffset,tokenLength,startOffset+tokenLength,leadingHtmlStart)),offset=startOffset+tokenLength,!0;case"block-closer":if(0===stackDepth)return addFreeform(),!1;if(1===stackDepth)return addBlockFromStack(startOffset),offset=startOffset+tokenLength,!0;const stackTop=stack.pop(),html=document.substr(stackTop.prevOffset,startOffset-stackTop.prevOffset);return stackTop.block.innerHTML+=html,stackTop.block.innerContent.push(html),stackTop.prevOffset=startOffset+tokenLength,addInnerBlock(stackTop.block,stackTop.tokenStart,stackTop.tokenLength,startOffset+tokenLength),offset=startOffset+tokenLength,!0;default:return addFreeform(),!1}}function addFreeform(rawLength){const length=rawLength||document.length-offset;0!==length&&output.push(Freeform(document.substr(offset,length)))}function addInnerBlock(block,tokenStart,tokenLength,lastOffset){const parent=stack[stack.length-1];parent.block.innerBlocks.push(block);const html=document.substr(parent.prevOffset,tokenStart-parent.prevOffset);html&&(parent.block.innerHTML+=html,parent.block.innerContent.push(html)),parent.block.innerContent.push(null),parent.prevOffset=lastOffset||tokenStart+tokenLength}function addBlockFromStack(endOffset){const{block,leadingHtmlStart,prevOffset,tokenStart}=stack.pop(),html=endOffset?document.substr(prevOffset,endOffset-prevOffset):document.substr(prevOffset);html&&(block.innerHTML+=html,block.innerContent.push(html)),null!==leadingHtmlStart&&output.push(Freeform(document.substr(leadingHtmlStart,tokenStart-leadingHtmlStart))),output.push(block)}},"./packages/blocks/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{dB:()=>__EXPERIMENTAL_ELEMENTS,G8:()=>__EXPERIMENTAL_PATHS_WITH_OVERRIDE,RY:()=>__EXPERIMENTAL_STYLE_PROPERTY,Eb:()=>__experimentalCloneSanitizedBlock,Y0:()=>getBlockLabel,qH:()=>__experimentalSanitizeBlockAttributes,cV:()=>getBlockProps,v9:()=>getInnerBlocksProps,RM:()=>__unstableSerializeAndClean,Y_:()=>children,JB:()=>cloneBlock,Wv:()=>createBlock,to:()=>createBlocksFromInnerBlocksTemplate,V6:()=>doBlocksMatchTemplate,wG:()=>findTransform,Ph:()=>getBlockAttributes,oA:()=>getBlockAttributesNamesByRole,Xm:()=>getBlockBindingsSource,WW:()=>getBlockBindingsSources,F8:()=>getBlockInnerHTML,KW:()=>getBlockDefaultClassName,KL:()=>getBlockFromExample,HK:()=>getBlockMenuDefaultClassName,bI:()=>getBlockSupport,XD:()=>getBlockTransforms,E7:()=>getBlockType,li:()=>getBlockTypes,oO:()=>getBlockVariations,bW:()=>categories_getCategories,K$:()=>getDefaultBlockName,dZ:()=>getFreeformContentHandlerName,uK:()=>getGroupingBlockName,Fk:()=>getPossibleBlockTransformations,Z9:()=>getSaveContent,GD:()=>getSaveElement,Lq:()=>getUnregisteredTypeHandlerName,pN:()=>hasBlockSupport,tk:()=>isReusableBlock,gc:()=>isTemplatePart,C5:()=>isUnmodifiedBlock,Xw:()=>isUnmodifiedDefaultBlock,qg:()=>parse,b6:()=>parseWithAttributeSchema,Gk:()=>pasteHandler,jb:()=>privateApis,lh:()=>rawHandler,ss:()=>registerBlockBindingsSource,xU:()=>registerBlockType,lK:()=>serializer_serialize,Kx:()=>serializeRawBlock,uz:()=>setDefaultBlockName,pd:()=>setFreeformContentHandlerName,qK:()=>setGroupingBlockName,lD:()=>setUnregisteredTypeHandlerName,M_:()=>store,bh:()=>switchToBlockType,Nk:()=>synchronizeBlocksWithTemplate,YV:()=>validateBlock});var private_selectors_namespaceObject={};__webpack_require__.r(private_selectors_namespaceObject),__webpack_require__.d(private_selectors_namespaceObject,{getAllBlockBindingsSources:()=>getAllBlockBindingsSources,getBlockBindingsSource:()=>private_selectors_getBlockBindingsSource,getBootstrappedBlockType:()=>getBootstrappedBlockType,getSupportedStyles:()=>getSupportedStyles,getUnprocessedBlockTypes:()=>getUnprocessedBlockTypes,hasContentRoleAttribute:()=>hasContentRoleAttribute});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{__experimentalHasContentRoleAttribute:()=>__experimentalHasContentRoleAttribute,getActiveBlockVariation:()=>getActiveBlockVariation,getBlockStyles:()=>getBlockStyles,getBlockSupport:()=>selectors_getBlockSupport,getBlockType:()=>selectors_getBlockType,getBlockTypes:()=>selectors_getBlockTypes,getBlockVariations:()=>selectors_getBlockVariations,getCategories:()=>getCategories,getChildBlockNames:()=>selectors_getChildBlockNames,getCollections:()=>getCollections,getDefaultBlockName:()=>selectors_getDefaultBlockName,getDefaultBlockVariation:()=>getDefaultBlockVariation,getFreeformFallbackBlockName:()=>getFreeformFallbackBlockName,getGroupingBlockName:()=>selectors_getGroupingBlockName,getUnregisteredFallbackBlockName:()=>getUnregisteredFallbackBlockName,hasBlockSupport:()=>selectors_hasBlockSupport,hasChildBlocks:()=>selectors_hasChildBlocks,hasChildBlocksWithInserterSupport:()=>selectors_hasChildBlocksWithInserterSupport,isMatchingSearchTerm:()=>isMatchingSearchTerm});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{__experimentalReapplyBlockFilters:()=>__experimentalReapplyBlockFilters,addBlockCollection:()=>addBlockCollection,addBlockStyles:()=>addBlockStyles,addBlockTypes:()=>addBlockTypes,addBlockVariations:()=>addBlockVariations,reapplyBlockTypeFilters:()=>reapplyBlockTypeFilters,removeBlockCollection:()=>removeBlockCollection,removeBlockStyles:()=>removeBlockStyles,removeBlockTypes:()=>removeBlockTypes,removeBlockVariations:()=>removeBlockVariations,setCategories:()=>setCategories,setDefaultBlockName:()=>actions_setDefaultBlockName,setFreeformFallbackBlockName:()=>setFreeformFallbackBlockName,setGroupingBlockName:()=>actions_setGroupingBlockName,setUnregisteredFallbackBlockName:()=>setUnregisteredFallbackBlockName,updateCategory:()=>updateCategory});var private_actions_namespaceObject={};__webpack_require__.r(private_actions_namespaceObject),__webpack_require__.d(private_actions_namespaceObject,{addBlockBindingsSource:()=>addBlockBindingsSource,addBootstrappedBlockType:()=>addBootstrappedBlockType,addUnprocessedBlockType:()=>addUnprocessedBlockType,removeBlockBindingsSource:()=>removeBlockBindingsSource});var redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),build_module=__webpack_require__("./packages/data/build-module/index.js"),dist_es2015=__webpack_require__("./node_modules/camel-case/dist.es2015/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),colord=__webpack_require__("./node_modules/colord/index.mjs"),names=__webpack_require__("./node_modules/colord/plugins/names.mjs"),a11y=__webpack_require__("./node_modules/colord/plugins/a11y.mjs"),react=__webpack_require__("./node_modules/react/index.js"),strip_html=__webpack_require__("./packages/dom/build-module/dom/strip-html.js"),rich_text_build_module=__webpack_require__("./packages/rich-text/build-module/index.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js");const DEPRECATED_ENTRY_KEYS=["attributes","supports","save","migrate","isEligible","apiVersion"],__EXPERIMENTAL_STYLE_PROPERTY={"--wp--style--color--link":{value:["color","link"],support:["color","link"]},aspectRatio:{value:["dimensions","aspectRatio"],support:["dimensions","aspectRatio"],useEngine:!0},background:{value:["color","gradient"],support:["color","gradients"],useEngine:!0},backgroundColor:{value:["color","background"],support:["color","background"],requiresOptOut:!0,useEngine:!0},backgroundImage:{value:["background","backgroundImage"],support:["background","backgroundImage"],useEngine:!0},backgroundRepeat:{value:["background","backgroundRepeat"],support:["background","backgroundRepeat"],useEngine:!0},backgroundSize:{value:["background","backgroundSize"],support:["background","backgroundSize"],useEngine:!0},backgroundPosition:{value:["background","backgroundPosition"],support:["background","backgroundPosition"],useEngine:!0},borderColor:{value:["border","color"],support:["__experimentalBorder","color"],useEngine:!0},borderRadius:{value:["border","radius"],support:["__experimentalBorder","radius"],properties:{borderTopLeftRadius:"topLeft",borderTopRightRadius:"topRight",borderBottomLeftRadius:"bottomLeft",borderBottomRightRadius:"bottomRight"},useEngine:!0},borderStyle:{value:["border","style"],support:["__experimentalBorder","style"],useEngine:!0},borderWidth:{value:["border","width"],support:["__experimentalBorder","width"],useEngine:!0},borderTopColor:{value:["border","top","color"],support:["__experimentalBorder","color"],useEngine:!0},borderTopStyle:{value:["border","top","style"],support:["__experimentalBorder","style"],useEngine:!0},borderTopWidth:{value:["border","top","width"],support:["__experimentalBorder","width"],useEngine:!0},borderRightColor:{value:["border","right","color"],support:["__experimentalBorder","color"],useEngine:!0},borderRightStyle:{value:["border","right","style"],support:["__experimentalBorder","style"],useEngine:!0},borderRightWidth:{value:["border","right","width"],support:["__experimentalBorder","width"],useEngine:!0},borderBottomColor:{value:["border","bottom","color"],support:["__experimentalBorder","color"],useEngine:!0},borderBottomStyle:{value:["border","bottom","style"],support:["__experimentalBorder","style"],useEngine:!0},borderBottomWidth:{value:["border","bottom","width"],support:["__experimentalBorder","width"],useEngine:!0},borderLeftColor:{value:["border","left","color"],support:["__experimentalBorder","color"],useEngine:!0},borderLeftStyle:{value:["border","left","style"],support:["__experimentalBorder","style"],useEngine:!0},borderLeftWidth:{value:["border","left","width"],support:["__experimentalBorder","width"],useEngine:!0},color:{value:["color","text"],support:["color","text"],requiresOptOut:!0,useEngine:!0},columnCount:{value:["typography","textColumns"],support:["typography","textColumns"],useEngine:!0},filter:{value:["filter","duotone"],support:["filter","duotone"]},linkColor:{value:["elements","link","color","text"],support:["color","link"]},captionColor:{value:["elements","caption","color","text"],support:["color","caption"]},buttonColor:{value:["elements","button","color","text"],support:["color","button"]},buttonBackgroundColor:{value:["elements","button","color","background"],support:["color","button"]},headingColor:{value:["elements","heading","color","text"],support:["color","heading"]},headingBackgroundColor:{value:["elements","heading","color","background"],support:["color","heading"]},fontFamily:{value:["typography","fontFamily"],support:["typography","__experimentalFontFamily"],useEngine:!0},fontSize:{value:["typography","fontSize"],support:["typography","fontSize"],useEngine:!0},fontStyle:{value:["typography","fontStyle"],support:["typography","__experimentalFontStyle"],useEngine:!0},fontWeight:{value:["typography","fontWeight"],support:["typography","__experimentalFontWeight"],useEngine:!0},lineHeight:{value:["typography","lineHeight"],support:["typography","lineHeight"],useEngine:!0},margin:{value:["spacing","margin"],support:["spacing","margin"],properties:{marginTop:"top",marginRight:"right",marginBottom:"bottom",marginLeft:"left"},useEngine:!0},minHeight:{value:["dimensions","minHeight"],support:["dimensions","minHeight"],useEngine:!0},padding:{value:["spacing","padding"],support:["spacing","padding"],properties:{paddingTop:"top",paddingRight:"right",paddingBottom:"bottom",paddingLeft:"left"},useEngine:!0},textAlign:{value:["typography","textAlign"],support:["typography","textAlign"],useEngine:!1},textDecoration:{value:["typography","textDecoration"],support:["typography","__experimentalTextDecoration"],useEngine:!0},textTransform:{value:["typography","textTransform"],support:["typography","__experimentalTextTransform"],useEngine:!0},letterSpacing:{value:["typography","letterSpacing"],support:["typography","__experimentalLetterSpacing"],useEngine:!0},writingMode:{value:["typography","writingMode"],support:["typography","__experimentalWritingMode"],useEngine:!0},"--wp--style--root--padding":{value:["spacing","padding"],support:["spacing","padding"],properties:{"--wp--style--root--padding-top":"top","--wp--style--root--padding-right":"right","--wp--style--root--padding-bottom":"bottom","--wp--style--root--padding-left":"left"},rootOnly:!0}},__EXPERIMENTAL_ELEMENTS={link:"a:where(:not(.wp-element-button))",heading:"h1, h2, h3, h4, h5, h6",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",button:".wp-element-button, .wp-block-button__link",caption:".wp-element-caption, .wp-block-audio figcaption, .wp-block-embed figcaption, .wp-block-gallery figcaption, .wp-block-image figcaption, .wp-block-table figcaption, .wp-block-video figcaption",cite:"cite"},__EXPERIMENTAL_PATHS_WITH_OVERRIDE={"color.duotone":!0,"color.gradients":!0,"color.palette":!0,"dimensions.aspectRatios":!0,"typography.fontSizes":!0,"spacing.spacingSizes":!0};var build_module_select=__webpack_require__("./packages/data/build-module/select.js"),build_module_dispatch=__webpack_require__("./packages/data/build-module/dispatch.js"),warning_build_module=__webpack_require__("./packages/warning/build-module/index.js"),implementation=__webpack_require__("./packages/private-apis/build-module/implementation.js");const{lock,unlock:lock_unlock_unlock}=(0,implementation.yf)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/blocks"),i18nBlockSchema={title:"block title",description:"block description",keywords:["block keyword"],styles:[{label:"block style label"}],variations:[{title:"block variation title",description:"block variation description",keywords:["block variation keyword"]}]};function isObject(object){return null!==object&&"object"==typeof object}function getBlockSettingsFromMetadata({textdomain,...metadata}){const allowedFields=["apiVersion","title","category","parent","ancestor","icon","description","keywords","attributes","providesContext","usesContext","selectors","supports","styles","example","variations","blockHooks","allowedBlocks"],settings=Object.fromEntries(Object.entries(metadata).filter((([key])=>allowedFields.includes(key))));return textdomain&&Object.keys(i18nBlockSchema).forEach((key=>{settings[key]&&(settings[key]=translateBlockSettingUsingI18nSchema(i18nBlockSchema[key],settings[key],textdomain))})),settings}function registerBlockType(blockNameOrMetadata,settings){const name=isObject(blockNameOrMetadata)?blockNameOrMetadata.name:blockNameOrMetadata;if("string"!=typeof name)return void(!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block names must be strings."));if(!/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(name))return void(!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-block"));if((0,build_module_select.L)(store).getBlockType(name))return void(!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)('Block "'+name+'" is already registered.'));const{addBootstrappedBlockType,addUnprocessedBlockType}=lock_unlock_unlock((0,build_module_dispatch.J)(store));if(isObject(blockNameOrMetadata)){addBootstrappedBlockType(name,getBlockSettingsFromMetadata(blockNameOrMetadata))}return addUnprocessedBlockType(name,settings),(0,build_module_select.L)(store).getBlockType(name)}function translateBlockSettingUsingI18nSchema(i18nSchema,settingValue,textdomain){return"string"==typeof i18nSchema&&"string"==typeof settingValue?(0,i18n_build_module._x)(settingValue,i18nSchema,textdomain):Array.isArray(i18nSchema)&&i18nSchema.length&&Array.isArray(settingValue)?settingValue.map((value=>translateBlockSettingUsingI18nSchema(i18nSchema[0],value,textdomain))):isObject(i18nSchema)&&Object.entries(i18nSchema).length&&isObject(settingValue)?Object.keys(settingValue).reduce(((accumulator,key)=>i18nSchema[key]?(accumulator[key]=translateBlockSettingUsingI18nSchema(i18nSchema[key],settingValue[key],textdomain),accumulator):(accumulator[key]=settingValue[key],accumulator)),{}):settingValue}function setFreeformContentHandlerName(blockName){(0,build_module_dispatch.J)(store).setFreeformFallbackBlockName(blockName)}function getFreeformContentHandlerName(){return(0,build_module_select.L)(store).getFreeformFallbackBlockName()}function getGroupingBlockName(){return(0,build_module_select.L)(store).getGroupingBlockName()}function setUnregisteredTypeHandlerName(blockName){(0,build_module_dispatch.J)(store).setUnregisteredFallbackBlockName(blockName)}function getUnregisteredTypeHandlerName(){return(0,build_module_select.L)(store).getUnregisteredFallbackBlockName()}function setDefaultBlockName(name){(0,build_module_dispatch.J)(store).setDefaultBlockName(name)}function setGroupingBlockName(name){(0,build_module_dispatch.J)(store).setGroupingBlockName(name)}function getDefaultBlockName(){return(0,build_module_select.L)(store).getDefaultBlockName()}function getBlockType(name){return(0,build_module_select.L)(store)?.getBlockType(name)}function getBlockTypes(){return(0,build_module_select.L)(store).getBlockTypes()}function getBlockSupport(nameOrType,feature,defaultSupports){return(0,build_module_select.L)(store).getBlockSupport(nameOrType,feature,defaultSupports)}function hasBlockSupport(nameOrType,feature,defaultSupports){return(0,build_module_select.L)(store).hasBlockSupport(nameOrType,feature,defaultSupports)}function isReusableBlock(blockOrType){return"core/block"===blockOrType?.name}function isTemplatePart(blockOrType){return"core/template-part"===blockOrType?.name}const getBlockVariations=(blockName,scope)=>(0,build_module_select.L)(store).getBlockVariations(blockName,scope),registerBlockBindingsSource=source=>{const{name,label,usesContext,getValues,setValues,canUserEditValue,getFieldsList}=source,existingSource=lock_unlock_unlock((0,build_module_select.L)(store)).getBlockBindingsSource(name),serverProps=["label","usesContext"];for(const prop in existingSource)if(!serverProps.includes(prop)&&existingSource[prop])return void(!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)('Block bindings source "'+name+'" is already registered.'));if(name)if("string"==typeof name)if(/[A-Z]+/.test(name))!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source name must not contain uppercase characters.");else if(/^[a-z0-9/-]+$/.test(name))if(/^[a-z0-9-]+\/[a-z0-9-]+$/.test(name))if(label||existingSource?.label)if(label&&"string"!=typeof label)!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source label must be a string.");else if(label&&existingSource?.label&&label!==existingSource?.label&&!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)('Block bindings "'+name+'" source label was overriden.'),!usesContext||Array.isArray(usesContext))if(getValues&&"function"!=typeof getValues)!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source getValues must be a function.");else if(setValues&&"function"!=typeof setValues)!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source setValues must be a function.");else if(canUserEditValue&&"function"!=typeof canUserEditValue)!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source canUserEditValue must be a function.");else{if(!getFieldsList||"function"==typeof getFieldsList)return lock_unlock_unlock((0,build_module_dispatch.J)(store)).addBlockBindingsSource(source);!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source getFieldsList must be a function.")}else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source usesContext must be an array.");else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source must contain a label.");else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source name must contain a namespace and valid characters. Example: my-plugin/my-custom-source.");else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source name must contain only valid characters: lowercase characters, hyphens, or digits. Example: my-plugin/my-custom-source.");else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source name must be a string.");else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block bindings source must contain a name.")};function getBlockBindingsSource(name){return lock_unlock_unlock((0,build_module_select.L)(store)).getBlockBindingsSource(name)}function getBlockBindingsSources(){return lock_unlock_unlock((0,build_module_select.L)(store)).getAllBlockBindingsSources()}(0,colord.X$)([names.A,a11y.A]);const ICON_COLORS=["#191e23","#f8f9f9"];function isUnmodifiedAttribute(attributeDefinition,value){return attributeDefinition.hasOwnProperty("default")?value===attributeDefinition.default:"rich-text"===attributeDefinition.type?!value?.length:void 0===value}function isUnmodifiedBlock(block){var _getBlockType$attribu;return Object.entries(null!==(_getBlockType$attribu=getBlockType(block.name)?.attributes)&&void 0!==_getBlockType$attribu?_getBlockType$attribu:{}).every((([key,definition])=>isUnmodifiedAttribute(definition,block.attributes[key])))}function isUnmodifiedDefaultBlock(block){return block.name===getDefaultBlockName()&&isUnmodifiedBlock(block)}function isValidIcon(icon){return!!icon&&("string"==typeof icon||(0,react.isValidElement)(icon)||"function"==typeof icon||icon instanceof react.Component)}function utils_normalizeBlockType(blockTypeOrName){return"string"==typeof blockTypeOrName?getBlockType(blockTypeOrName):blockTypeOrName}function getBlockLabel(blockType,attributes,context="visual"){const{__experimentalLabel:getLabel,title}=blockType,label=getLabel&&getLabel(attributes,{context});return label?label.toPlainText?label.toPlainText():(0,strip_html.A)(label):title}function getDefault(attributeSchema){return void 0!==attributeSchema.default?attributeSchema.default:"rich-text"===attributeSchema.type?new rich_text_build_module.EF:void 0}function __experimentalSanitizeBlockAttributes(name,attributes){const blockType=getBlockType(name);if(void 0===blockType)throw new Error(`Block type '${name}' is not registered.`);return Object.entries(blockType.attributes).reduce(((accumulator,[key,schema])=>{const value=attributes[key];if(void 0!==value)"rich-text"===schema.type?value instanceof rich_text_build_module.EF?accumulator[key]=value:"string"==typeof value&&(accumulator[key]=rich_text_build_module.EF.fromHTMLString(value)):"string"===schema.type&&value instanceof rich_text_build_module.EF?accumulator[key]=value.toHTMLString():accumulator[key]=value;else{const _default=getDefault(schema);void 0!==_default&&(accumulator[key]=_default)}return-1!==["node","children"].indexOf(schema.source)&&("string"==typeof accumulator[key]?accumulator[key]=[accumulator[key]]:Array.isArray(accumulator[key])||(accumulator[key]=[])),accumulator}),{})}function getBlockAttributesNamesByRole(name,role){const attributes=getBlockType(name)?.attributes;if(!attributes)return[];const attributesNames=Object.keys(attributes);return role?attributesNames.filter((attributeName=>{const attribute=attributes[attributeName];return attribute?.role===role||attribute?.__experimentalRole===role&&((0,deprecated_build_module.A)("__experimentalRole attribute",{since:"6.7",version:"6.8",alternative:"role attribute",hint:`Check the block.json of the ${name} block.`}),!0)})):attributesNames}function omit(object,keys){return Object.fromEntries(Object.entries(object).filter((([key])=>!keys.includes(key))))}const DEFAULT_CATEGORIES=[{slug:"text",title:(0,i18n_build_module.__)("Text")},{slug:"media",title:(0,i18n_build_module.__)("Media")},{slug:"design",title:(0,i18n_build_module.__)("Design")},{slug:"widgets",title:(0,i18n_build_module.__)("Widgets")},{slug:"theme",title:(0,i18n_build_module.__)("Theme")},{slug:"embed",title:(0,i18n_build_module.__)("Embeds")},{slug:"reusable",title:(0,i18n_build_module.__)("Reusable blocks")}];function keyBlockTypesByName(types){return types.reduce(((newBlockTypes,block)=>({...newBlockTypes,[block.name]:block})),{})}function getUniqueItemsByName(items){return items.reduce(((acc,currentItem)=>(acc.some((item=>item.name===currentItem.name))||acc.push(currentItem),acc)),[])}function createBlockNameSetterReducer(setActionType){return(state=null,action)=>{switch(action.type){case"REMOVE_BLOCK_TYPES":return-1!==action.names.indexOf(state)?null:state;case setActionType:return action.name||null}return state}}const defaultBlockName=createBlockNameSetterReducer("SET_DEFAULT_BLOCK_NAME"),freeformFallbackBlockName=createBlockNameSetterReducer("SET_FREEFORM_FALLBACK_BLOCK_NAME"),unregisteredFallbackBlockName=createBlockNameSetterReducer("SET_UNREGISTERED_FALLBACK_BLOCK_NAME"),groupingBlockName=createBlockNameSetterReducer("SET_GROUPING_BLOCK_NAME");function getMergedUsesContext(existingUsesContext=[],newUsesContext=[]){const mergedArrays=Array.from(new Set(existingUsesContext.concat(newUsesContext)));return mergedArrays.length>0?mergedArrays:void 0}const reducer=(0,build_module.HY)({bootstrappedBlockTypes:function bootstrappedBlockTypes(state={},action){switch(action.type){case"ADD_BOOTSTRAPPED_BLOCK_TYPE":const{name,blockType}=action,serverDefinition=state[name];let newDefinition;return serverDefinition?(void 0===serverDefinition.blockHooks&&blockType.blockHooks&&(newDefinition={...serverDefinition,...newDefinition,blockHooks:blockType.blockHooks}),void 0===serverDefinition.allowedBlocks&&blockType.allowedBlocks&&(newDefinition={...serverDefinition,...newDefinition,allowedBlocks:blockType.allowedBlocks})):(newDefinition=Object.fromEntries(Object.entries(blockType).filter((([,value])=>null!=value)).map((([key,value])=>[(0,dist_es2015.xQ)(key),value]))),newDefinition.name=name),newDefinition?{...state,[name]:newDefinition}:state;case"REMOVE_BLOCK_TYPES":return omit(state,action.names)}return state},unprocessedBlockTypes:function unprocessedBlockTypes(state={},action){switch(action.type){case"ADD_UNPROCESSED_BLOCK_TYPE":return{...state,[action.name]:action.blockType};case"REMOVE_BLOCK_TYPES":return omit(state,action.names)}return state},blockTypes:function blockTypes(state={},action){switch(action.type){case"ADD_BLOCK_TYPES":return{...state,...keyBlockTypesByName(action.blockTypes)};case"REMOVE_BLOCK_TYPES":return omit(state,action.names)}return state},blockStyles:function blockStyles(state={},action){var _state$action$blockNa;switch(action.type){case"ADD_BLOCK_TYPES":return{...state,...Object.fromEntries(Object.entries(keyBlockTypesByName(action.blockTypes)).map((([name,blockType])=>{var _blockType$styles,_state$blockType$name;return[name,getUniqueItemsByName([...(null!==(_blockType$styles=blockType.styles)&&void 0!==_blockType$styles?_blockType$styles:[]).map((style=>({...style,source:"block"}))),...(null!==(_state$blockType$name=state[blockType.name])&&void 0!==_state$blockType$name?_state$blockType$name:[]).filter((({source})=>"block"!==source))])]})))};case"ADD_BLOCK_STYLES":const updatedStyles={};return action.blockNames.forEach((blockName=>{var _state$blockName;updatedStyles[blockName]=getUniqueItemsByName([...null!==(_state$blockName=state[blockName])&&void 0!==_state$blockName?_state$blockName:[],...action.styles])})),{...state,...updatedStyles};case"REMOVE_BLOCK_STYLES":return{...state,[action.blockName]:(null!==(_state$action$blockNa=state[action.blockName])&&void 0!==_state$action$blockNa?_state$action$blockNa:[]).filter((style=>-1===action.styleNames.indexOf(style.name)))}}return state},blockVariations:function blockVariations(state={},action){var _state$action$blockNa2,_state$action$blockNa3;switch(action.type){case"ADD_BLOCK_TYPES":return{...state,...Object.fromEntries(Object.entries(keyBlockTypesByName(action.blockTypes)).map((([name,blockType])=>{var _blockType$variations,_state$blockType$name2;return[name,getUniqueItemsByName([...(null!==(_blockType$variations=blockType.variations)&&void 0!==_blockType$variations?_blockType$variations:[]).map((variation=>({...variation,source:"block"}))),...(null!==(_state$blockType$name2=state[blockType.name])&&void 0!==_state$blockType$name2?_state$blockType$name2:[]).filter((({source})=>"block"!==source))])]})))};case"ADD_BLOCK_VARIATIONS":return{...state,[action.blockName]:getUniqueItemsByName([...null!==(_state$action$blockNa2=state[action.blockName])&&void 0!==_state$action$blockNa2?_state$action$blockNa2:[],...action.variations])};case"REMOVE_BLOCK_VARIATIONS":return{...state,[action.blockName]:(null!==(_state$action$blockNa3=state[action.blockName])&&void 0!==_state$action$blockNa3?_state$action$blockNa3:[]).filter((variation=>-1===action.variationNames.indexOf(variation.name)))}}return state},defaultBlockName,freeformFallbackBlockName,unregisteredFallbackBlockName,groupingBlockName,categories:function categories(state=DEFAULT_CATEGORIES,action){switch(action.type){case"SET_CATEGORIES":const uniqueCategories=new Map;return(action.categories||[]).forEach((category=>{uniqueCategories.set(category.slug,category)})),[...uniqueCategories.values()];case"UPDATE_CATEGORY":if(!action.category||!Object.keys(action.category).length)return state;if(state.find((({slug})=>slug===action.slug)))return state.map((category=>category.slug===action.slug?{...category,...action.category}:category))}return state},collections:function collections(state={},action){switch(action.type){case"ADD_BLOCK_COLLECTION":return{...state,[action.namespace]:{title:action.title,icon:action.icon}};case"REMOVE_BLOCK_COLLECTION":return omit(state,action.namespace)}return state},blockBindingsSources:function blockBindingsSources(state={},action){switch(action.type){case"ADD_BLOCK_BINDINGS_SOURCE":let getFieldsList;return(globalThis.IS_GUTENBERG_PLUGIN||"core/post-meta"===action.name)&&(getFieldsList=action.getFieldsList),{...state,[action.name]:{label:action.label||state[action.name]?.label,usesContext:getMergedUsesContext(state[action.name]?.usesContext,action.usesContext),getValues:action.getValues,setValues:action.setValues,canUserEditValue:action.setValues&&action.canUserEditValue,getFieldsList}};case"REMOVE_BLOCK_BINDINGS_SOURCE":return omit(state,action.name)}return state}});var remove_accents=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents_default=__webpack_require__.n(remove_accents),rememo=__webpack_require__("./node_modules/rememo/rememo.js");const getValueFromObjectPath=(object,path,defaultValue)=>{var _value;const normalizedPath=Array.isArray(path)?path:path.split(".");let value=object;return normalizedPath.forEach((fieldName=>{value=value?.[fieldName]})),null!==(_value=value)&&void 0!==_value?_value:defaultValue};function utils_isObject(candidate){return"object"==typeof candidate&&candidate.constructor===Object&&null!==candidate}function matchesAttributes(blockAttributes,variationAttributes){return utils_isObject(blockAttributes)&&utils_isObject(variationAttributes)?Object.entries(variationAttributes).every((([key,value])=>matchesAttributes(blockAttributes?.[key],value))):blockAttributes===variationAttributes}const ROOT_BLOCK_SUPPORTS=["background","backgroundColor","color","linkColor","captionColor","buttonColor","headingColor","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","padding","contentSize","wideSize","blockGap","textDecoration","textTransform","letterSpacing"];function filterElementBlockSupports(blockSupports,name,element){return blockSupports.filter((support=>("fontSize"!==support||"heading"!==element)&&(!("textDecoration"===support&&!name&&"link"!==element)&&(!("textTransform"===support&&!name&&!["heading","h1","h2","h3","h4","h5","h6"].includes(element)&&"button"!==element&&"caption"!==element&&"text"!==element)&&(!("letterSpacing"===support&&!name&&!["heading","h1","h2","h3","h4","h5","h6"].includes(element)&&"button"!==element&&"caption"!==element&&"text"!==element)&&!("textColumns"===support&&!name))))))}const getSupportedStyles=(0,rememo.A)(((state,name,element)=>{if(!name)return filterElementBlockSupports(ROOT_BLOCK_SUPPORTS,name,element);const blockType=selectors_getBlockType(state,name);if(!blockType)return[];const supportKeys=[];return blockType?.supports?.spacing?.blockGap&&supportKeys.push("blockGap"),blockType?.supports?.shadow&&supportKeys.push("shadow"),Object.keys(__EXPERIMENTAL_STYLE_PROPERTY).forEach((styleName=>{__EXPERIMENTAL_STYLE_PROPERTY[styleName].support&&(__EXPERIMENTAL_STYLE_PROPERTY[styleName].requiresOptOut&&__EXPERIMENTAL_STYLE_PROPERTY[styleName].support[0]in blockType.supports&&!1!==getValueFromObjectPath(blockType.supports,__EXPERIMENTAL_STYLE_PROPERTY[styleName].support)||getValueFromObjectPath(blockType.supports,__EXPERIMENTAL_STYLE_PROPERTY[styleName].support,!1))&&supportKeys.push(styleName)})),filterElementBlockSupports(supportKeys,name,element)}),((state,name)=>[state.blockTypes[name]]));function getBootstrappedBlockType(state,name){return state.bootstrappedBlockTypes[name]}function getUnprocessedBlockTypes(state){return state.unprocessedBlockTypes}function getAllBlockBindingsSources(state){return state.blockBindingsSources}function private_selectors_getBlockBindingsSource(state,sourceName){return state.blockBindingsSources[sourceName]}const hasContentRoleAttribute=(state,blockTypeName)=>{const blockType=selectors_getBlockType(state,blockTypeName);return!!blockType&&Object.values(blockType.attributes).some((({role,__experimentalRole})=>"content"===role||"content"===__experimentalRole&&((0,deprecated_build_module.A)("__experimentalRole attribute",{since:"6.7",version:"6.8",alternative:"role attribute",hint:`Check the block.json of the ${blockTypeName} block.`}),!0)))},getNormalizedBlockType=(state,nameOrType)=>"string"==typeof nameOrType?selectors_getBlockType(state,nameOrType):nameOrType,selectors_getBlockTypes=(0,rememo.A)((state=>Object.values(state.blockTypes)),(state=>[state.blockTypes]));function selectors_getBlockType(state,name){return state.blockTypes[name]}function getBlockStyles(state,name){return state.blockStyles[name]}const selectors_getBlockVariations=(0,rememo.A)(((state,blockName,scope)=>{const variations=state.blockVariations[blockName];return variations&&scope?variations.filter((variation=>(variation.scope||["block","inserter"]).includes(scope))):variations}),((state,blockName)=>[state.blockVariations[blockName]]));function getActiveBlockVariation(state,blockName,attributes,scope){const variations=selectors_getBlockVariations(state,blockName,scope);if(!variations)return variations;const blockType=selectors_getBlockType(state,blockName),attributeKeys=Object.keys(blockType?.attributes||{});let match,maxMatchedAttributes=0;for(const variation of variations)if(Array.isArray(variation.isActive)){const definedAttributes=variation.isActive.filter((attribute=>{const topLevelAttribute=attribute.split(".")[0];return attributeKeys.includes(topLevelAttribute)})),definedAttributesLength=definedAttributes.length;if(0===definedAttributesLength)continue;definedAttributes.every((attribute=>{const variationAttributeValue=getValueFromObjectPath(variation.attributes,attribute);if(void 0===variationAttributeValue)return!1;let blockAttributeValue=getValueFromObjectPath(attributes,attribute);return blockAttributeValue instanceof rich_text_build_module.EF&&(blockAttributeValue=blockAttributeValue.toHTMLString()),matchesAttributes(blockAttributeValue,variationAttributeValue)}))&&definedAttributesLength>maxMatchedAttributes&&(match=variation,maxMatchedAttributes=definedAttributesLength)}else if(variation.isActive?.(attributes,variation.attributes))return match||variation;return match}function getDefaultBlockVariation(state,blockName,scope){const variations=selectors_getBlockVariations(state,blockName,scope);return[...variations].reverse().find((({isDefault})=>!!isDefault))||variations[0]}function getCategories(state){return state.categories}function getCollections(state){return state.collections}function selectors_getDefaultBlockName(state){return state.defaultBlockName}function getFreeformFallbackBlockName(state){return state.freeformFallbackBlockName}function getUnregisteredFallbackBlockName(state){return state.unregisteredFallbackBlockName}function selectors_getGroupingBlockName(state){return state.groupingBlockName}const selectors_getChildBlockNames=(0,rememo.A)(((state,blockName)=>selectors_getBlockTypes(state).filter((blockType=>blockType.parent?.includes(blockName))).map((({name})=>name))),(state=>[state.blockTypes])),selectors_getBlockSupport=(state,nameOrType,feature,defaultSupports)=>{const blockType=getNormalizedBlockType(state,nameOrType);return blockType?.supports?getValueFromObjectPath(blockType.supports,feature,defaultSupports):defaultSupports};function selectors_hasBlockSupport(state,nameOrType,feature,defaultSupports){return!!selectors_getBlockSupport(state,nameOrType,feature,defaultSupports)}function getNormalizedSearchTerm(term){return remove_accents_default()(null!=term?term:"").toLowerCase().trim()}function isMatchingSearchTerm(state,nameOrType,searchTerm=""){const blockType=getNormalizedBlockType(state,nameOrType),normalizedSearchTerm=getNormalizedSearchTerm(searchTerm),isSearchMatch=candidate=>getNormalizedSearchTerm(candidate).includes(normalizedSearchTerm);return isSearchMatch(blockType.title)||blockType.keywords?.some(isSearchMatch)||isSearchMatch(blockType.category)||"string"==typeof blockType.description&&isSearchMatch(blockType.description)}const selectors_hasChildBlocks=(state,blockName)=>selectors_getChildBlockNames(state,blockName).length>0,selectors_hasChildBlocksWithInserterSupport=(state,blockName)=>selectors_getChildBlockNames(state,blockName).some((childBlockName=>selectors_hasBlockSupport(state,childBlockName,"inserter",!0))),__experimentalHasContentRoleAttribute=(...args)=>((0,deprecated_build_module.A)("__experimentalHasContentRoleAttribute",{since:"6.7",version:"6.8",hint:"This is a private selector."}),hasContentRoleAttribute(...args));var is_plain_object=__webpack_require__("./node_modules/is-plain-object/dist/is-plain-object.mjs"),react_is=__webpack_require__("./packages/blocks/node_modules/react-is/index.js"),hooks_build_module=__webpack_require__("./packages/hooks/build-module/index.js");const LEGACY_CATEGORY_MAPPING={common:"text",formatting:"text",layout:"design"};function mergeBlockVariations(bootstrappedVariations=[],clientVariations=[]){const result=[...bootstrappedVariations];return clientVariations.forEach((clientVariation=>{const index=result.findIndex((bootstrappedVariation=>bootstrappedVariation.name===clientVariation.name));-1!==index?result[index]={...result[index],...clientVariation}:result.push(clientVariation)})),result}const processBlockType=(name,blockSettings)=>({select})=>{const bootstrappedBlockType=select.getBootstrappedBlockType(name),blockType={name,icon:"block-default",keywords:[],attributes:{},providesContext:{},usesContext:[],selectors:{},supports:{},styles:[],blockHooks:{},save:()=>null,...bootstrappedBlockType,...blockSettings,variations:mergeBlockVariations(Array.isArray(bootstrappedBlockType?.variations)?bootstrappedBlockType.variations:[],Array.isArray(blockSettings?.variations)?blockSettings.variations:[])},settings=(0,hooks_build_module.W5)("blocks.registerBlockType",blockType,name,null);if(settings.description&&"string"!=typeof settings.description&&(0,deprecated_build_module.A)("Declaring non-string block descriptions",{since:"6.2"}),settings.deprecated&&(settings.deprecated=settings.deprecated.map((deprecation=>Object.fromEntries(Object.entries((0,hooks_build_module.W5)("blocks.registerBlockType",{...omit(blockType,DEPRECATED_ENTRY_KEYS),...deprecation},blockType.name,deprecation)).filter((([key])=>DEPRECATED_ENTRY_KEYS.includes(key))))))),(0,is_plain_object.Q)(settings))if("function"==typeof settings.save)if(!("edit"in settings)||(0,react_is.isValidElementType)(settings.edit))if(LEGACY_CATEGORY_MAPPING.hasOwnProperty(settings.category)&&(settings.category=LEGACY_CATEGORY_MAPPING[settings.category]),"category"in settings&&!select.getCategories().some((({slug})=>slug===settings.category))&&(!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)('The block "'+name+'" is registered with an invalid category "'+settings.category+'".'),delete settings.category),"title"in settings&&""!==settings.title)if("string"==typeof settings.title)if(settings.icon=function normalizeIconObject(icon){if(isValidIcon(icon=icon||"block-default"))return{src:icon};if("background"in icon){const colordBgColor=(0,colord.Mj)(icon.background),getColorContrast=iconColor=>colordBgColor.contrast(iconColor),maxContrast=Math.max(...ICON_COLORS.map(getColorContrast));return{...icon,foreground:icon.foreground?icon.foreground:ICON_COLORS.find((iconColor=>getColorContrast(iconColor)===maxContrast)),shadowColor:colordBgColor.alpha(.3).toRgbString()}}return icon}(settings.icon),isValidIcon(settings.icon.src))if(("string"==typeof settings?.parent||settings?.parent instanceof String)&&(settings.parent=[settings.parent],!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Parent must be undefined or an array of strings (block types), but it is a string.")),Array.isArray(settings?.parent)||void 0===settings?.parent){if(1!==settings?.parent?.length||name!==settings.parent[0])return settings;!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)('Block "'+name+'" cannot be a parent of itself. Please remove the block name from the parent list.')}else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Parent must be undefined or an array of block types, but it is ",settings.parent);else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("The icon passed is invalid. The icon should be a string, an element, a function, or an object following the specifications documented in https://developer.wordpress.org/block-editor/developers/block-api/block-registration/#icon-optional");else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block titles must be strings.");else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)('The block "'+name+'" must have a title.');else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)('The "edit" property must be a valid component.');else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)('The "save" property must be a valid function.');else!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("Block settings must be a valid object.")};function addBlockTypes(blockTypes){return{type:"ADD_BLOCK_TYPES",blockTypes:Array.isArray(blockTypes)?blockTypes:[blockTypes]}}function reapplyBlockTypeFilters(){return({dispatch,select})=>{const processedBlockTypes=[];for(const[name,settings]of Object.entries(select.getUnprocessedBlockTypes())){const result=dispatch(processBlockType(name,settings));result&&processedBlockTypes.push(result)}processedBlockTypes.length&&dispatch.addBlockTypes(processedBlockTypes)}}function __experimentalReapplyBlockFilters(){return(0,deprecated_build_module.A)('wp.data.dispatch( "core/blocks" ).__experimentalReapplyBlockFilters',{since:"6.4",alternative:"reapplyBlockFilters"}),reapplyBlockTypeFilters()}function removeBlockTypes(names){return{type:"REMOVE_BLOCK_TYPES",names:Array.isArray(names)?names:[names]}}function addBlockStyles(blockNames,styles){return{type:"ADD_BLOCK_STYLES",styles:Array.isArray(styles)?styles:[styles],blockNames:Array.isArray(blockNames)?blockNames:[blockNames]}}function removeBlockStyles(blockName,styleNames){return{type:"REMOVE_BLOCK_STYLES",styleNames:Array.isArray(styleNames)?styleNames:[styleNames],blockName}}function addBlockVariations(blockName,variations){return{type:"ADD_BLOCK_VARIATIONS",variations:Array.isArray(variations)?variations:[variations],blockName}}function removeBlockVariations(blockName,variationNames){return{type:"REMOVE_BLOCK_VARIATIONS",variationNames:Array.isArray(variationNames)?variationNames:[variationNames],blockName}}function actions_setDefaultBlockName(name){return{type:"SET_DEFAULT_BLOCK_NAME",name}}function setFreeformFallbackBlockName(name){return{type:"SET_FREEFORM_FALLBACK_BLOCK_NAME",name}}function setUnregisteredFallbackBlockName(name){return{type:"SET_UNREGISTERED_FALLBACK_BLOCK_NAME",name}}function actions_setGroupingBlockName(name){return{type:"SET_GROUPING_BLOCK_NAME",name}}function setCategories(categories){return{type:"SET_CATEGORIES",categories}}function updateCategory(slug,category){return{type:"UPDATE_CATEGORY",slug,category}}function addBlockCollection(namespace,title,icon){return{type:"ADD_BLOCK_COLLECTION",namespace,title,icon}}function removeBlockCollection(namespace){return{type:"REMOVE_BLOCK_COLLECTION",namespace}}function addBootstrappedBlockType(name,blockType){return{type:"ADD_BOOTSTRAPPED_BLOCK_TYPE",name,blockType}}function addUnprocessedBlockType(name,blockType){return({dispatch})=>{dispatch({type:"ADD_UNPROCESSED_BLOCK_TYPE",name,blockType});const processedBlockType=dispatch(processBlockType(name,blockType));processedBlockType&&dispatch.addBlockTypes(processedBlockType)}}function addBlockBindingsSource(source){return{type:"ADD_BLOCK_BINDINGS_SOURCE",name:source.name,label:source.label,usesContext:source.usesContext,getValues:source.getValues,setValues:source.setValues,canUserEditValue:source.canUserEditValue,getFieldsList:source.getFieldsList}}function removeBlockBindingsSource(name){return{type:"REMOVE_BLOCK_BINDINGS_SOURCE",name}}const store=(0,redux_store.A)("core/blocks",{reducer,selectors:selectors_namespaceObject,actions:actions_namespaceObject});(0,build_module.kz)(store),lock_unlock_unlock(store).registerPrivateSelectors(private_selectors_namespaceObject),lock_unlock_unlock(store).registerPrivateActions(private_actions_namespaceObject);var v4=__webpack_require__("./packages/blocks/node_modules/uuid/dist/esm-browser/v4.js");function createBlock(name,attributes={},innerBlocks=[]){const sanitizedAttributes=__experimentalSanitizeBlockAttributes(name,attributes);return{clientId:(0,v4.A)(),name,isValid:!0,attributes:sanitizedAttributes,innerBlocks}}function createBlocksFromInnerBlocksTemplate(innerBlocksOrTemplate=[]){return innerBlocksOrTemplate.map((innerBlock=>{const innerBlockTemplate=Array.isArray(innerBlock)?innerBlock:[innerBlock.name,innerBlock.attributes,innerBlock.innerBlocks],[name,attributes,innerBlocks=[]]=innerBlockTemplate;return createBlock(name,attributes,createBlocksFromInnerBlocksTemplate(innerBlocks))}))}function __experimentalCloneSanitizedBlock(block,mergeAttributes={},newInnerBlocks){const clientId=(0,v4.A)(),sanitizedAttributes=__experimentalSanitizeBlockAttributes(block.name,{...block.attributes,...mergeAttributes});return{...block,clientId,attributes:sanitizedAttributes,innerBlocks:newInnerBlocks||block.innerBlocks.map((innerBlock=>__experimentalCloneSanitizedBlock(innerBlock)))}}function cloneBlock(block,mergeAttributes={},newInnerBlocks){const clientId=(0,v4.A)();return{...block,clientId,attributes:{...block.attributes,...mergeAttributes},innerBlocks:newInnerBlocks||block.innerBlocks.map((innerBlock=>cloneBlock(innerBlock)))}}const isPossibleTransformForSource=(transform,direction,blocks)=>{if(!blocks.length)return!1;const isMultiBlock=blocks.length>1,firstBlockName=blocks[0].name;if(!(isWildcardBlockTransform(transform)||!isMultiBlock||transform.isMultiBlock))return!1;if(!isWildcardBlockTransform(transform)&&!blocks.every((block=>block.name===firstBlockName)))return!1;if(!("block"===transform.type))return!1;const sourceBlock=blocks[0];return!("from"===direction&&-1===transform.blocks.indexOf(sourceBlock.name)&&!isWildcardBlockTransform(transform))&&(!(!isMultiBlock&&"from"===direction&&isContainerGroupBlock(sourceBlock.name)&&isContainerGroupBlock(transform.blockName))&&!!maybeCheckTransformIsMatch(transform,blocks))},getBlockTypesForPossibleFromTransforms=blocks=>{if(!blocks.length)return[];return getBlockTypes().filter((blockType=>!!findTransform(getBlockTransforms("from",blockType.name),(transform=>isPossibleTransformForSource(transform,"from",blocks)))))},getBlockTypesForPossibleToTransforms=blocks=>{if(!blocks.length)return[];const blockType=getBlockType(blocks[0].name);return(blockType?getBlockTransforms("to",blockType.name):[]).filter((transform=>transform&&isPossibleTransformForSource(transform,"to",blocks))).map((transformation=>transformation.blocks)).flat().map(getBlockType)},isWildcardBlockTransform=t=>t&&"block"===t.type&&Array.isArray(t.blocks)&&t.blocks.includes("*"),isContainerGroupBlock=name=>name===getGroupingBlockName();function getPossibleBlockTransformations(blocks){if(!blocks.length)return[];const blockTypesForFromTransforms=getBlockTypesForPossibleFromTransforms(blocks),blockTypesForToTransforms=getBlockTypesForPossibleToTransforms(blocks);return[...new Set([...blockTypesForFromTransforms,...blockTypesForToTransforms])]}function findTransform(transforms,predicate){const hooks=(0,hooks_build_module.FF)();for(let i=0;i<transforms.length;i++){const candidate=transforms[i];predicate(candidate)&&hooks.addFilter("transform","transform/"+i.toString(),(result=>result||candidate),candidate.priority)}return hooks.applyFilters("transform",null)}function getBlockTransforms(direction,blockTypeOrName){if(void 0===blockTypeOrName)return getBlockTypes().map((({name})=>getBlockTransforms(direction,name))).flat();const blockType=utils_normalizeBlockType(blockTypeOrName),{name:blockName,transforms}=blockType||{};if(!transforms||!Array.isArray(transforms[direction]))return[];const usingMobileTransformations=transforms.supportedMobileTransforms&&Array.isArray(transforms.supportedMobileTransforms);return(usingMobileTransformations?transforms[direction].filter((t=>"raw"===t.type||("prefix"===t.type||!(!t.blocks||!t.blocks.length)&&(!!isWildcardBlockTransform(t)||t.blocks.every((transformBlockName=>transforms.supportedMobileTransforms.includes(transformBlockName))))))):transforms[direction]).map((transform=>({...transform,blockName,usingMobileTransformations})))}function maybeCheckTransformIsMatch(transform,blocks){if("function"!=typeof transform.isMatch)return!0;const sourceBlock=blocks[0],attributes=transform.isMultiBlock?blocks.map((block=>block.attributes)):sourceBlock.attributes,block=transform.isMultiBlock?blocks:sourceBlock;return transform.isMatch(attributes,block)}function switchToBlockType(blocks,name){const blocksArray=Array.isArray(blocks)?blocks:[blocks],isMultiBlock=blocksArray.length>1,firstBlock=blocksArray[0],sourceName=firstBlock.name,transformationsFrom=getBlockTransforms("from",name),transformation=findTransform(getBlockTransforms("to",sourceName),(t=>"block"===t.type&&(isWildcardBlockTransform(t)||-1!==t.blocks.indexOf(name))&&(!isMultiBlock||t.isMultiBlock)&&maybeCheckTransformIsMatch(t,blocksArray)))||findTransform(transformationsFrom,(t=>"block"===t.type&&(isWildcardBlockTransform(t)||-1!==t.blocks.indexOf(sourceName))&&(!isMultiBlock||t.isMultiBlock)&&maybeCheckTransformIsMatch(t,blocksArray)));if(!transformation)return null;let transformationResults;if(transformationResults=transformation.isMultiBlock?"__experimentalConvert"in transformation?transformation.__experimentalConvert(blocksArray):transformation.transform(blocksArray.map((currentBlock=>currentBlock.attributes)),blocksArray.map((currentBlock=>currentBlock.innerBlocks))):"__experimentalConvert"in transformation?transformation.__experimentalConvert(firstBlock):transformation.transform(firstBlock.attributes,firstBlock.innerBlocks),null===transformationResults||"object"!=typeof transformationResults)return null;if(transformationResults=Array.isArray(transformationResults)?transformationResults:[transformationResults],transformationResults.some((result=>!getBlockType(result.name))))return null;if(!transformationResults.some((result=>result.name===name)))return null;return transformationResults.map(((result,index,results)=>(0,hooks_build_module.W5)("blocks.switchToBlockType.transformedBlock",result,blocks,index,results)))}const getBlockFromExample=(name,example)=>{try{var _example$innerBlocks;return createBlock(name,example.attributes,(null!==(_example$innerBlocks=example.innerBlocks)&&void 0!==_example$innerBlocks?_example$innerBlocks:[]).map((innerBlock=>getBlockFromExample(innerBlock.name,innerBlock))))}catch{return createBlock("core/missing",{originalName:name,originalContent:"",originalUndelimitedContent:""})}};var block_serialization_default_parser_build_module=__webpack_require__("./packages/block-serialization-default-parser/build-module/index.js"),autop_build_module=__webpack_require__("./packages/autop/build-module/index.js"),raw_html=__webpack_require__("./packages/element/build-module/raw-html.js"),serialize=__webpack_require__("./packages/element/build-module/serialize.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js");function serializeRawBlock(rawBlock,options={}){const{isCommentDelimited=!0}=options,{blockName,attrs={},innerBlocks=[],innerContent=[]}=rawBlock;let childIndex=0;const content=innerContent.map((item=>null!==item?item:serializeRawBlock(innerBlocks[childIndex++],options))).join("\n").replace(/\n+/g,"\n").trim();return isCommentDelimited?getCommentDelimitedContent(blockName,attrs,content):content}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function getBlockDefaultClassName(blockName){const className="wp-block-"+blockName.replace(/\//,"-").replace(/^core-/,"");return(0,hooks_build_module.W5)("blocks.getBlockDefaultClassName",className,blockName)}function getBlockMenuDefaultClassName(blockName){const className="editor-block-list-item-"+blockName.replace(/\//,"-").replace(/^core-/,"");return(0,hooks_build_module.W5)("blocks.getBlockMenuDefaultClassName",className,blockName)}const blockPropsProvider={},innerBlocksPropsProvider={};function getBlockProps(props={}){const{blockType,attributes}=blockPropsProvider;return getBlockProps.skipFilters?props:(0,hooks_build_module.W5)("blocks.getSaveContent.extraProps",{...props},blockType,attributes)}function getInnerBlocksProps(props={}){const{innerBlocks}=innerBlocksPropsProvider;if(!Array.isArray(innerBlocks))return{...props,children:innerBlocks};const html=serializer_serialize(innerBlocks,{isInnerBlocks:!0}),children=(0,jsx_runtime.jsx)(raw_html.A,{children:html});return{...props,children}}function getSaveElement(blockTypeOrName,attributes,innerBlocks=[]){const blockType=utils_normalizeBlockType(blockTypeOrName);if(!blockType?.save)return null;let{save}=blockType;if(save.prototype instanceof react.Component){const instance=new save({attributes});save=instance.render.bind(instance)}blockPropsProvider.blockType=blockType,blockPropsProvider.attributes=attributes,innerBlocksPropsProvider.innerBlocks=innerBlocks;let element=save({attributes,innerBlocks});if(null!==element&&"object"==typeof element&&(0,hooks_build_module.FC)("blocks.getSaveContent.extraProps")&&!(blockType.apiVersion>1)){const props=(0,hooks_build_module.W5)("blocks.getSaveContent.extraProps",{...element.props},blockType,attributes);(0,is_shallow_equal_build_module.Ay)(props,element.props)||(element=(0,react.cloneElement)(element,props))}return(0,hooks_build_module.W5)("blocks.getSaveElement",element,blockType,attributes)}function getSaveContent(blockTypeOrName,attributes,innerBlocks){const blockType=utils_normalizeBlockType(blockTypeOrName);return(0,serialize.Ay)(getSaveElement(blockType,attributes,innerBlocks))}function getBlockInnerHTML(block){let saveContent=block.originalContent;if(block.isValid||block.innerBlocks.length)try{saveContent=getSaveContent(block.name,block.attributes,block.innerBlocks)}catch(error){}return saveContent}function getCommentDelimitedContent(rawBlockName,attributes,content){const serializedAttributes=attributes&&Object.entries(attributes).length?function serializeAttributes(attributes){return JSON.stringify(attributes).replace(/--/g,"\\u002d\\u002d").replace(/</g,"\\u003c").replace(/>/g,"\\u003e").replace(/&/g,"\\u0026").replace(/\\"/g,"\\u0022")}(attributes)+" ":"",blockName=rawBlockName?.startsWith("core/")?rawBlockName.slice(5):rawBlockName;return content?`\x3c!-- wp:${blockName} ${serializedAttributes}--\x3e\n`+content+`\n\x3c!-- /wp:${blockName} --\x3e`:`\x3c!-- wp:${blockName} ${serializedAttributes}/--\x3e`}function serializeBlock(block,{isInnerBlocks=!1}={}){if(!block.isValid&&block.__unstableBlockSource)return serializeRawBlock(block.__unstableBlockSource);const blockName=block.name,saveContent=getBlockInnerHTML(block);if(blockName===getUnregisteredTypeHandlerName()||!isInnerBlocks&&blockName===getFreeformContentHandlerName())return saveContent;const blockType=getBlockType(blockName);if(!blockType)return saveContent;const saveAttributes=function getCommentAttributes(blockType,attributes){var _blockType$attributes;return Object.entries(null!==(_blockType$attributes=blockType.attributes)&&void 0!==_blockType$attributes?_blockType$attributes:{}).reduce(((accumulator,[key,attributeSchema])=>{const value=attributes[key];return void 0===value||void 0!==attributeSchema.source||"local"===attributeSchema.role?accumulator:"local"===attributeSchema.__experimentalRole?((0,deprecated_build_module.A)("__experimentalRole attribute",{since:"6.7",version:"6.8",alternative:"role attribute",hint:`Check the block.json of the ${blockType?.name} block.`}),accumulator):("default"in attributeSchema&&JSON.stringify(attributeSchema.default)===JSON.stringify(value)||(accumulator[key]=value),accumulator)}),{})}(blockType,block.attributes);return getCommentDelimitedContent(blockName,saveAttributes,saveContent)}function __unstableSerializeAndClean(blocks){1===blocks.length&&isUnmodifiedDefaultBlock(blocks[0])&&(blocks=[]);let content=serializer_serialize(blocks);return 1===blocks.length&&blocks[0].name===getFreeformContentHandlerName()&&"core/freeform"===blocks[0].name&&(content=(0,autop_build_module.r)(content)),content}function serializer_serialize(blocks,options){return(Array.isArray(blocks)?blocks:[blocks]).map((block=>serializeBlock(block,options))).join("\n\n")}var es6=__webpack_require__("./node_modules/simple-html-tokenizer/dist/es6/index.js"),fast_deep_equal_es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(fast_deep_equal_es6),html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js");function createLogger(){function createLogHandler(logger){return(message,...args)=>logger("Block validation: "+message,...args)}return{error:createLogHandler(console.error),warning:createLogHandler(console.warn),getItems:()=>[]}}const REGEXP_WHITESPACE=/[\t\n\r\v\f ]+/g,REGEXP_ONLY_WHITESPACE=/^[\t\n\r\v\f ]*$/,REGEXP_STYLE_URL_TYPE=/^url\s*\(['"\s]*(.*?)['"\s]*\)$/,BOOLEAN_ATTRIBUTES=["allowfullscreen","allowpaymentrequest","allowusermedia","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","typemustmatch"],MEANINGFUL_ATTRIBUTES=[...BOOLEAN_ATTRIBUTES,"autocapitalize","autocomplete","charset","contenteditable","crossorigin","decoding","dir","draggable","enctype","formenctype","formmethod","http-equiv","inputmode","kind","method","preload","scope","shape","spellcheck","translate","type","wrap"],TEXT_NORMALIZATIONS=[x=>x,function getTextWithCollapsedWhitespace(text){return getTextPiecesSplitOnWhitespace(text).join(" ")}],REGEXP_NAMED_CHARACTER_REFERENCE=/^[\da-z]+$/i,REGEXP_DECIMAL_CHARACTER_REFERENCE=/^#\d+$/,REGEXP_HEXADECIMAL_CHARACTER_REFERENCE=/^#x[\da-f]+$/i;class DecodeEntityParser{parse(entity){if(function isValidCharacterReference(text){return REGEXP_NAMED_CHARACTER_REFERENCE.test(text)||REGEXP_DECIMAL_CHARACTER_REFERENCE.test(text)||REGEXP_HEXADECIMAL_CHARACTER_REFERENCE.test(text)}(entity))return(0,html_entities_build_module.S)("&"+entity+";")}}function getTextPiecesSplitOnWhitespace(text){return text.trim().split(REGEXP_WHITESPACE)}function getMeaningfulAttributePairs(token){return token.attributes.filter((pair=>{const[key,value]=pair;return value||0===key.indexOf("data-")||MEANINGFUL_ATTRIBUTES.includes(key)}))}function isEquivalentTextTokens(actual,expected,logger=createLogger()){let actualChars=actual.chars,expectedChars=expected.chars;for(let i=0;i<TEXT_NORMALIZATIONS.length;i++){const normalize=TEXT_NORMALIZATIONS[i];if(actualChars=normalize(actualChars),expectedChars=normalize(expectedChars),actualChars===expectedChars)return!0}return logger.warning("Expected text `%s`, saw `%s`.",expected.chars,actual.chars),!1}function getNormalizedLength(value){return 0===parseFloat(value)?"0":0===value.indexOf(".")?"0"+value:value}function getNormalizedStyleValue(value){return getTextPiecesSplitOnWhitespace(value).map(getNormalizedLength).join(" ").replace(REGEXP_STYLE_URL_TYPE,"url($1)")}function getStyleProperties(text){const pairs=text.replace(/;?\s*$/,"").split(";").map((style=>{const[key,...valueParts]=style.split(":"),value=valueParts.join(":");return[key.trim(),getNormalizedStyleValue(value.trim())]}));return Object.fromEntries(pairs)}const isEqualAttributesOfName={class:(actual,expected)=>{const[actualPieces,expectedPieces]=[actual,expected].map(getTextPiecesSplitOnWhitespace),actualDiff=actualPieces.filter((c=>!expectedPieces.includes(c))),expectedDiff=expectedPieces.filter((c=>!actualPieces.includes(c)));return 0===actualDiff.length&&0===expectedDiff.length},style:(actual,expected)=>es6_default()(...[actual,expected].map(getStyleProperties)),...Object.fromEntries(BOOLEAN_ATTRIBUTES.map((attribute=>[attribute,()=>!0])))};const isEqualTokensOfType={StartTag:(actual,expected,logger=createLogger())=>actual.tagName!==expected.tagName&&actual.tagName.toLowerCase()!==expected.tagName.toLowerCase()?(logger.warning("Expected tag name `%s`, instead saw `%s`.",expected.tagName,actual.tagName),!1):function isEqualTagAttributePairs(actual,expected,logger=createLogger()){if(actual.length!==expected.length)return logger.warning("Expected attributes %o, instead saw %o.",expected,actual),!1;const expectedAttributes={};for(let i=0;i<expected.length;i++)expectedAttributes[expected[i][0].toLowerCase()]=expected[i][1];for(let i=0;i<actual.length;i++){const[name,actualValue]=actual[i],nameLower=name.toLowerCase();if(!expectedAttributes.hasOwnProperty(nameLower))return logger.warning("Encountered unexpected attribute `%s`.",name),!1;const expectedValue=expectedAttributes[nameLower],isEqualAttributes=isEqualAttributesOfName[nameLower];if(isEqualAttributes){if(!isEqualAttributes(actualValue,expectedValue))return logger.warning("Expected attribute `%s` of value `%s`, saw `%s`.",name,expectedValue,actualValue),!1}else if(actualValue!==expectedValue)return logger.warning("Expected attribute `%s` of value `%s`, saw `%s`.",name,expectedValue,actualValue),!1}return!0}(...[actual,expected].map(getMeaningfulAttributePairs),logger),Chars:isEquivalentTextTokens,Comment:isEquivalentTextTokens};function getNextNonWhitespaceToken(tokens){let token;for(;token=tokens.shift();){if("Chars"!==token.type)return token;if(!REGEXP_ONLY_WHITESPACE.test(token.chars))return token}}function isClosedByToken(currentToken,nextToken){return!!currentToken.selfClosing&&!(!nextToken||nextToken.tagName!==currentToken.tagName||"EndTag"!==nextToken.type)}function isEquivalentHTML(actual,expected,logger=createLogger()){if(actual===expected)return!0;const[actualTokens,expectedTokens]=[actual,expected].map((html=>function getHTMLTokens(html,logger=createLogger()){try{return new es6._F(new DecodeEntityParser).tokenize(html)}catch(e){logger.warning("Malformed HTML detected: %s",html)}return null}(html,logger)));if(!actualTokens||!expectedTokens)return!1;let actualToken,expectedToken;for(;actualToken=getNextNonWhitespaceToken(actualTokens);){if(expectedToken=getNextNonWhitespaceToken(expectedTokens),!expectedToken)return logger.warning("Expected end of content, instead saw %o.",actualToken),!1;if(actualToken.type!==expectedToken.type)return logger.warning("Expected token of type `%s` (%o), instead saw `%s` (%o).",expectedToken.type,expectedToken,actualToken.type,actualToken),!1;const isEqualTokens=isEqualTokensOfType[actualToken.type];if(isEqualTokens&&!isEqualTokens(actualToken,expectedToken,logger))return!1;isClosedByToken(actualToken,expectedTokens[0])?getNextNonWhitespaceToken(expectedTokens):isClosedByToken(expectedToken,actualTokens[0])&&getNextNonWhitespaceToken(actualTokens)}return!(expectedToken=getNextNonWhitespaceToken(expectedTokens))||(logger.warning("Expected %o, instead saw end of content.",expectedToken),!1)}function validateBlock(block,blockTypeOrName=block.name){if(block.name===getFreeformContentHandlerName()||block.name===getUnregisteredTypeHandlerName())return[!0,[]];const logger=function createQueuedLogger(){const queue=[],logger=createLogger();return{error(...args){queue.push({log:logger.error,args})},warning(...args){queue.push({log:logger.warning,args})},getItems:()=>queue}}(),blockType=utils_normalizeBlockType(blockTypeOrName);let generatedBlockContent;try{generatedBlockContent=getSaveContent(blockType,block.attributes)}catch(error){return logger.error("Block validation failed because an error occurred while generating block content:\n\n%s",error.toString()),[!1,logger.getItems()]}const isValid=isEquivalentHTML(block.originalContent,generatedBlockContent,logger);return isValid||logger.error("Block validation failed for `%s` (%o).\n\nContent generated by `save` function:\n\n%s\n\nContent retrieved from post body:\n\n%s",blockType.name,blockType,generatedBlockContent,block.originalContent),[isValid,logger.getItems()]}function convertLegacyBlockNameAndAttributes(name,attributes){const newAttributes={...attributes};if("core/cover-image"===name&&(name="core/cover"),"core/text"!==name&&"core/cover-text"!==name||(name="core/paragraph"),name&&0===name.indexOf("core/social-link-")&&(newAttributes.service=name.substring(17),name="core/social-link"),name&&0===name.indexOf("core-embed/")){const providerSlug=name.substring(11),deprecated={speaker:"speaker-deck",polldaddy:"crowdsignal"};newAttributes.providerNameSlug=providerSlug in deprecated?deprecated[providerSlug]:providerSlug,["amazon-kindle","wordpress"].includes(providerSlug)||(newAttributes.responsive=!0),name="core/embed"}if("core/post-comment-author"===name&&(name="core/comment-author-name"),"core/post-comment-content"===name&&(name="core/comment-content"),"core/post-comment-date"===name&&(name="core/comment-date"),"core/comments-query-loop"===name){name="core/comments";const{className=""}=newAttributes;className.includes("wp-block-comments-query-loop")||(newAttributes.className=["wp-block-comments-query-loop",className].join(" "))}if("core/post-comments"===name&&(name="core/comments",newAttributes.legacy=!0),"grid"===attributes.layout?.type&&"string"==typeof attributes.layout?.columnCount&&(newAttributes.layout={...newAttributes.layout,columnCount:parseInt(attributes.layout.columnCount,10)}),"string"==typeof attributes.style?.layout?.columnSpan){const columnSpanNumber=parseInt(attributes.style.layout.columnSpan,10);newAttributes.style={...newAttributes.style,layout:{...newAttributes.style.layout,columnSpan:isNaN(columnSpanNumber)?void 0:columnSpanNumber}}}if("string"==typeof attributes.style?.layout?.rowSpan){const rowSpanNumber=parseInt(attributes.style.layout.rowSpan,10);newAttributes.style={...newAttributes.style,layout:{...newAttributes.style.layout,rowSpan:isNaN(rowSpanNumber)?void 0:rowSpanNumber}}}if(globalThis.IS_GUTENBERG_PLUGIN&&newAttributes.metadata?.bindings&&("core/paragraph"===name||"core/heading"===name||"core/image"===name||"core/button"===name)&&"core/pattern-overrides"!==newAttributes.metadata.bindings.__default?.source){let hasPatternOverrides=!1;["content","url","title","id","alt","text","linkTarget"].forEach((binding=>{"core/pattern-overrides"===newAttributes.metadata.bindings[binding]?.source&&(hasPatternOverrides=!0,newAttributes.metadata={...newAttributes.metadata,bindings:{...newAttributes.metadata.bindings}},delete newAttributes.metadata.bindings[binding])})),hasPatternOverrides&&(newAttributes.metadata.bindings.__default={source:"core/pattern-overrides"})}return[name,newAttributes]}var es=__webpack_require__("./node_modules/hpq/es/index.js"),dist=__webpack_require__("./node_modules/memize/dist/index.js");function getNamedNodeMapAsObject(nodeMap){const result={};for(let i=0;i<nodeMap.length;i++){const{name,value}=nodeMap[i];result[name]=value}return result}function fromDOM(domNode){if((0,deprecated_build_module.A)("wp.blocks.node.fromDOM",{since:"6.1",version:"6.3",alternative:"wp.richText.create",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),domNode.nodeType===domNode.TEXT_NODE)return domNode.nodeValue;if(domNode.nodeType!==domNode.ELEMENT_NODE)throw new TypeError("A block node can only be created from a node of type text or element.");return{type:domNode.nodeName.toLowerCase(),props:{...getNamedNodeMapAsObject(domNode.attributes),children:children_fromDOM(domNode.childNodes)}}}function matcher(selector){return(0,deprecated_build_module.A)("wp.blocks.node.matcher",{since:"6.1",version:"6.3",alternative:"html source",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),domNode=>{let match=domNode;selector&&(match=domNode.querySelector(selector));try{return fromDOM(match)}catch(error){return null}}}function children_fromDOM(domNodes){(0,deprecated_build_module.A)("wp.blocks.children.fromDOM",{since:"6.1",version:"6.3",alternative:"wp.richText.create",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"});const result=[];for(let i=0;i<domNodes.length;i++)try{result.push(fromDOM(domNodes[i]))}catch(error){}return result}function children_toHTML(children){(0,deprecated_build_module.A)("wp.blocks.children.toHTML",{since:"6.1",version:"6.3",alternative:"wp.richText.toHTMLString",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"});const element=children;return(0,serialize.Ay)(element)}function children_matcher(selector){return(0,deprecated_build_module.A)("wp.blocks.children.matcher",{since:"6.1",version:"6.3",alternative:"html source",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),domNode=>{let match=domNode;return selector&&(match=domNode.querySelector(selector)),match?children_fromDOM(match.childNodes):[]}}const children={concat:function concat(...blockNodes){(0,deprecated_build_module.A)("wp.blocks.children.concat",{since:"6.1",version:"6.3",alternative:"wp.richText.concat",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"});const result=[];for(let i=0;i<blockNodes.length;i++){const blockNode=Array.isArray(blockNodes[i])?blockNodes[i]:[blockNodes[i]];for(let j=0;j<blockNode.length;j++){const child=blockNode[j];"string"==typeof child&&"string"==typeof result[result.length-1]?result[result.length-1]+=child:result.push(child)}}return result},getChildrenArray:function getChildrenArray(children){return(0,deprecated_build_module.A)("wp.blocks.children.getChildrenArray",{since:"6.1",version:"6.3",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),children},fromDOM:children_fromDOM,toHTML:children_toHTML,matcher:children_matcher};function isOfTypes(value,types){return types.some((type=>function isOfType(value,type){switch(type){case"rich-text":return value instanceof rich_text_build_module.EF;case"string":return"string"==typeof value;case"boolean":return"boolean"==typeof value;case"object":return!!value&&value.constructor===Object;case"null":return null===value;case"array":return Array.isArray(value);case"integer":case"number":return"number"==typeof value}return!0}(value,type)))}function getBlockAttribute(attributeKey,attributeSchema,innerDOM,commentAttributes,innerHTML){let value;switch(attributeSchema.source){case void 0:value=commentAttributes?commentAttributes[attributeKey]:void 0;break;case"raw":value=innerHTML;break;case"attribute":case"property":case"html":case"text":case"rich-text":case"children":case"node":case"query":case"tag":value=parseWithAttributeSchema(innerDOM,attributeSchema)}return function isValidByType(value,type){return void 0===type||isOfTypes(value,Array.isArray(type)?type:[type])}(value,attributeSchema.type)&&function isValidByEnum(value,enumSet){return!Array.isArray(enumSet)||enumSet.includes(value)}(value,attributeSchema.enum)||(value=void 0),void 0===value&&(value=getDefault(attributeSchema)),value}const matcherFromSource=(0,dist.A)((sourceConfig=>{switch(sourceConfig.source){case"attribute":{let matcher=(0,es.CF)(sourceConfig.selector,sourceConfig.attribute);return"boolean"===sourceConfig.type&&(matcher=(matcher=>value=>void 0!==matcher(value))(matcher)),matcher}case"html":return function html(selector,multilineTag){return domNode=>{let match=domNode;if(selector&&(match=domNode.querySelector(selector)),!match)return"";if(multilineTag){let value="";const length=match.children.length;for(let index=0;index<length;index++){const child=match.children[index];child.nodeName.toLowerCase()===multilineTag&&(value+=child.outerHTML)}return value}return match.innerHTML}}(sourceConfig.selector,sourceConfig.multiline);case"text":return(0,es.Qq)(sourceConfig.selector);case"rich-text":return selector=sourceConfig.selector,preserveWhiteSpace=sourceConfig.__unstablePreserveWhiteSpace,el=>{const target=selector?el.querySelector(selector):el;return target?rich_text_build_module.EF.fromHTMLElement(target,{preserveWhiteSpace}):rich_text_build_module.EF.empty()};case"children":return children_matcher(sourceConfig.selector);case"node":return matcher(sourceConfig.selector);case"query":const subMatchers=Object.fromEntries(Object.entries(sourceConfig.query).map((([key,subSourceConfig])=>[key,matcherFromSource(subSourceConfig)])));return(0,es.P)(sourceConfig.selector,subMatchers);case"tag":{const matcher=(0,es._w)(sourceConfig.selector,"nodeName");return domNode=>matcher(domNode)?.toLowerCase()}default:console.error(`Unknown source type "${sourceConfig.source}"`)}var selector,preserveWhiteSpace}));function parseHtml(innerHTML){return(0,es.qg)(innerHTML,(h=>h))}function parseWithAttributeSchema(innerHTML,attributeSchema){return matcherFromSource(attributeSchema)(parseHtml(innerHTML))}function getBlockAttributes(blockTypeOrName,innerHTML,attributes={}){var _blockType$attributes;const doc=parseHtml(innerHTML),blockType=utils_normalizeBlockType(blockTypeOrName),blockAttributes=Object.fromEntries(Object.entries(null!==(_blockType$attributes=blockType.attributes)&&void 0!==_blockType$attributes?_blockType$attributes:{}).map((([key,schema])=>[key,getBlockAttribute(key,schema,doc,attributes,innerHTML)])));return(0,hooks_build_module.W5)("blocks.getBlockAttributes",blockAttributes,blockType,innerHTML,attributes)}const CLASS_ATTR_SCHEMA={type:"string",source:"attribute",selector:"[data-custom-class-name] > *",attribute:"class"};function getHTMLRootElementClasses(innerHTML){const parsed=parseWithAttributeSchema(`<div data-custom-class-name>${innerHTML}</div>`,CLASS_ATTR_SCHEMA);return parsed?parsed.trim().split(/\s+/):[]}function applyBuiltInValidationFixes(block,blockType){const updatedBlockAttributes=function fixCustomClassname(blockAttributes,blockType,innerHTML){if(!hasBlockSupport(blockType,"customClassName",!0))return blockAttributes;const modifiedBlockAttributes={...blockAttributes},{className:omittedClassName,...attributesSansClassName}=modifiedBlockAttributes,serialized=getSaveContent(blockType,attributesSansClassName),defaultClasses=getHTMLRootElementClasses(serialized),customClasses=getHTMLRootElementClasses(innerHTML).filter((className=>!defaultClasses.includes(className)));return customClasses.length?modifiedBlockAttributes.className=customClasses.join(" "):serialized&&delete modifiedBlockAttributes.className,modifiedBlockAttributes}(block.attributes,blockType,block.originalContent);return{...block,attributes:updatedBlockAttributes}}function stubFalse(){return!1}function parseRawBlock(rawBlock,options){let normalizedBlock=function normalizeRawBlock(rawBlock,options){const fallbackBlockName=getFreeformContentHandlerName(),rawBlockName=rawBlock.blockName||getFreeformContentHandlerName(),rawAttributes=rawBlock.attrs||{},rawInnerBlocks=rawBlock.innerBlocks||[];let rawInnerHTML=rawBlock.innerHTML.trim();return rawBlockName!==fallbackBlockName||"core/freeform"!==rawBlockName||options?.__unstableSkipAutop||(rawInnerHTML=(0,autop_build_module.A)(rawInnerHTML).trim()),{...rawBlock,blockName:rawBlockName,attrs:rawAttributes,innerHTML:rawInnerHTML,innerBlocks:rawInnerBlocks}}(rawBlock,options);normalizedBlock=function convertLegacyBlocks(rawBlock){const[correctName,correctedAttributes]=convertLegacyBlockNameAndAttributes(rawBlock.blockName,rawBlock.attrs);return{...rawBlock,blockName:correctName,attrs:correctedAttributes}}(normalizedBlock);let blockType=getBlockType(normalizedBlock.blockName);blockType||(normalizedBlock=function createMissingBlockType(rawBlock){const unregisteredFallbackBlock=getUnregisteredTypeHandlerName()||getFreeformContentHandlerName(),originalUndelimitedContent=serializeRawBlock(rawBlock,{isCommentDelimited:!1}),originalContent=serializeRawBlock(rawBlock,{isCommentDelimited:!0});return{blockName:unregisteredFallbackBlock,attrs:{originalName:rawBlock.blockName,originalContent,originalUndelimitedContent},innerHTML:rawBlock.blockName?originalContent:rawBlock.innerHTML,innerBlocks:rawBlock.innerBlocks,innerContent:rawBlock.innerContent}}(normalizedBlock),blockType=getBlockType(normalizedBlock.blockName));const isFallbackBlock=normalizedBlock.blockName===getFreeformContentHandlerName()||normalizedBlock.blockName===getUnregisteredTypeHandlerName();if(!blockType||!normalizedBlock.innerHTML&&isFallbackBlock)return;const parsedInnerBlocks=normalizedBlock.innerBlocks.map((innerBlock=>parseRawBlock(innerBlock,options))).filter((innerBlock=>!!innerBlock)),parsedBlock=createBlock(normalizedBlock.blockName,getBlockAttributes(blockType,normalizedBlock.innerHTML,normalizedBlock.attrs),parsedInnerBlocks);parsedBlock.originalContent=normalizedBlock.innerHTML;const validatedBlock=function applyBlockValidation(unvalidatedBlock,blockType){const[isValid]=validateBlock(unvalidatedBlock,blockType);if(isValid)return{...unvalidatedBlock,isValid,validationIssues:[]};const fixedBlock=applyBuiltInValidationFixes(unvalidatedBlock,blockType),[isFixedValid,validationIssues]=validateBlock(fixedBlock,blockType);return{...fixedBlock,isValid:isFixedValid,validationIssues}}(parsedBlock,blockType),{validationIssues}=validatedBlock,updatedBlock=function applyBlockDeprecatedVersions(block,rawBlock,blockType){const parsedAttributes=rawBlock.attrs,{deprecated:deprecatedDefinitions}=blockType;if(!deprecatedDefinitions||!deprecatedDefinitions.length)return block;for(let i=0;i<deprecatedDefinitions.length;i++){const{isEligible=stubFalse}=deprecatedDefinitions[i];if(block.isValid&&!isEligible(parsedAttributes,block.innerBlocks,{blockNode:rawBlock,block}))continue;const deprecatedBlockType=Object.assign(omit(blockType,DEPRECATED_ENTRY_KEYS),deprecatedDefinitions[i]);let migratedBlock={...block,attributes:getBlockAttributes(deprecatedBlockType,block.originalContent,parsedAttributes)},[isValid]=validateBlock(migratedBlock,deprecatedBlockType);if(isValid||(migratedBlock=applyBuiltInValidationFixes(migratedBlock,deprecatedBlockType),[isValid]=validateBlock(migratedBlock,deprecatedBlockType)),!isValid)continue;let migratedInnerBlocks=migratedBlock.innerBlocks,migratedAttributes=migratedBlock.attributes;const{migrate}=deprecatedBlockType;if(migrate){let migrated=migrate(migratedAttributes,block.innerBlocks);Array.isArray(migrated)||(migrated=[migrated]),[migratedAttributes=parsedAttributes,migratedInnerBlocks=block.innerBlocks]=migrated}block={...block,attributes:migratedAttributes,innerBlocks:migratedInnerBlocks,isValid:!0,validationIssues:[]}}return block}(validatedBlock,normalizedBlock,blockType);return updatedBlock.isValid||(updatedBlock.__unstableBlockSource=rawBlock),validatedBlock.isValid||!updatedBlock.isValid||options?.__unstableSkipMigrationLogs?validatedBlock.isValid||updatedBlock.isValid||validationIssues.forEach((({log,args})=>log(...args))):(console.groupCollapsed("Updated Block: %s",blockType.name),console.info("Block successfully updated for `%s` (%o).\n\nNew content generated by `save` function:\n\n%s\n\nContent retrieved from post body:\n\n%s",blockType.name,blockType,getSaveContent(blockType,updatedBlock.attributes),updatedBlock.originalContent),console.groupEnd()),updatedBlock}function parse(content,options){return(0,block_serialization_default_parser_build_module.q)(content).reduce(((accumulator,rawBlock)=>{const block=parseRawBlock(rawBlock,options);return block&&accumulator.push(block),accumulator}),[])}var platform=__webpack_require__("./packages/element/build-module/platform.js");function getRawTransforms(){return getBlockTransforms("from").filter((({type})=>"raw"===type)).map((transform=>transform.isMatch?transform:{...transform,isMatch:node=>transform.selector&&node.matches(transform.selector)}))}function htmlToBlocks(html,handler){const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=html,Array.from(doc.body.children).flatMap((node=>{const rawTransform=findTransform(getRawTransforms(),(({isMatch})=>isMatch(node)));if(!rawTransform)return platform.A.isNative?parse(`\x3c!-- wp:html --\x3e${node.outerHTML}\x3c!-- /wp:html --\x3e`):createBlock("core/html",getBlockAttributes("core/html",node.outerHTML));const{transform,blockName}=rawTransform;if(transform){const block=transform(node,handler);return node.hasAttribute("class")&&(block.attributes.className=node.getAttribute("class")),block}return createBlock(blockName,getBlockAttributes(blockName,node.outerHTML))}))}function isEmpty(element){switch(element.nodeType){case element.TEXT_NODE:return/^[ \f\n\r\t\v\u00a0]*$/.test(element.nodeValue||"");case element.ELEMENT_NODE:return!element.hasAttributes()&&(!element.hasChildNodes()||Array.from(element.childNodes).every(isEmpty));default:return!0}}const textContentSchema={strong:{},em:{},s:{},del:{},ins:{},a:{attributes:["href","target","rel","id"]},code:{},abbr:{attributes:["title"]},sub:{},sup:{},br:{},small:{},q:{attributes:["cite"]},dfn:{attributes:["title"]},data:{attributes:["value"]},time:{attributes:["datetime"]},var:{},samp:{},kbd:{},i:{},b:{},u:{},mark:{},ruby:{},rt:{},rp:{},bdi:{attributes:["dir"]},bdo:{attributes:["dir"]},wbr:{},"#text":{}},excludedElements=["#text","br"];Object.keys(textContentSchema).filter((element=>!excludedElements.includes(element))).forEach((tag=>{const{[tag]:removedTag,...restSchema}=textContentSchema;textContentSchema[tag].children=restSchema}));const phrasingContentSchema={...textContentSchema,audio:{attributes:["src","preload","autoplay","mediagroup","loop","muted"]},canvas:{attributes:["width","height"]},embed:{attributes:["src","type","width","height"]},img:{attributes:["alt","src","srcset","usemap","ismap","width","height"]},object:{attributes:["data","type","name","usemap","form","width","height"]},video:{attributes:["src","poster","preload","playsinline","autoplay","mediagroup","loop","muted","controls","width","height"]}};function phrasing_content_getPhrasingContentSchema(context){if("paste"!==context)return phrasingContentSchema;const{u,abbr,data,time,wbr,bdi,bdo,...remainingContentSchema}={...phrasingContentSchema,ins:{children:phrasingContentSchema.ins.children},del:{children:phrasingContentSchema.del.children}};return remainingContentSchema}function isPhrasingContent(node){const tag=node.nodeName.toLowerCase();return phrasing_content_getPhrasingContentSchema().hasOwnProperty(tag)||"span"===tag}function isTextContent(node){const tag=node.nodeName.toLowerCase();return textContentSchema.hasOwnProperty(tag)||"span"===tag}function normaliseBlocks(HTML,options={}){const decuDoc=document.implementation.createHTMLDocument(""),accuDoc=document.implementation.createHTMLDocument(""),decu=decuDoc.body,accu=accuDoc.body;for(decu.innerHTML=HTML;decu.firstChild;){const node=decu.firstChild;node.nodeType===node.TEXT_NODE?isEmpty(node)?decu.removeChild(node):(accu.lastChild&&"P"===accu.lastChild.nodeName||accu.appendChild(accuDoc.createElement("P")),accu.lastChild.appendChild(node)):node.nodeType===node.ELEMENT_NODE?"BR"===node.nodeName?(node.nextSibling&&"BR"===node.nextSibling.nodeName&&(accu.appendChild(accuDoc.createElement("P")),decu.removeChild(node.nextSibling)),accu.lastChild&&"P"===accu.lastChild.nodeName&&accu.lastChild.hasChildNodes()?accu.lastChild.appendChild(node):decu.removeChild(node)):"P"===node.nodeName?isEmpty(node)&&!options.raw?decu.removeChild(node):accu.appendChild(node):isPhrasingContent(node)?(accu.lastChild&&"P"===accu.lastChild.nodeName||accu.appendChild(accuDoc.createElement("P")),accu.lastChild.appendChild(node)):accu.appendChild(node):decu.removeChild(node)}return accu.innerHTML}var assert_is_defined=__webpack_require__("./packages/dom/build-module/utils/assert-is-defined.js");function insertAfter(newNode,referenceNode){(0,assert_is_defined.e)(referenceNode.parentNode,"referenceNode.parentNode"),referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling)}var remove=__webpack_require__("./packages/dom/build-module/dom/remove.js");function specialCommentConverter(node,doc){if(node.nodeType!==node.COMMENT_NODE)return;if("nextpage"!==node.nodeValue&&0!==node.nodeValue.indexOf("more"))return;const block=function special_comment_converter_createBlock(commentNode,doc){if("nextpage"===commentNode.nodeValue)return function createNextpage(doc){const node=doc.createElement("wp-block");return node.dataset.block="core/nextpage",node}(doc);const customText=commentNode.nodeValue.slice(4).trim();let sibling=commentNode,noTeaser=!1;for(;sibling=sibling.nextSibling;)if(sibling.nodeType===sibling.COMMENT_NODE&&"noteaser"===sibling.nodeValue){noTeaser=!0,(0,remove.A)(sibling);break}return function createMore(customText,noTeaser,doc){const node=doc.createElement("wp-block");node.dataset.block="core/more",customText&&(node.dataset.customText=customText);noTeaser&&(node.dataset.noTeaser="");return node}(customText,noTeaser,doc)}(node,doc);if(node.parentNode&&"P"===node.parentNode.nodeName){const childNodes=Array.from(node.parentNode.childNodes),nodeIndex=childNodes.indexOf(node),wrapperNode=node.parentNode.parentNode||doc.body,paragraphBuilder=(acc,child)=>(acc||(acc=doc.createElement("p")),acc.appendChild(child),acc);[childNodes.slice(0,nodeIndex).reduce(paragraphBuilder,null),block,childNodes.slice(nodeIndex+1).reduce(paragraphBuilder,null)].forEach((element=>element&&wrapperNode.insertBefore(element,node.parentNode))),(0,remove.A)(node.parentNode)}else!function replace(processedNode,newNode){(0,assert_is_defined.e)(processedNode.parentNode,"processedNode.parentNode"),insertAfter(newNode,processedNode.parentNode),(0,remove.A)(processedNode)}(node,block)}function unwrap(node){const parent=node.parentNode;for((0,assert_is_defined.e)(parent,"node.parentNode");node.firstChild;)parent.insertBefore(node.firstChild,node);parent.removeChild(node)}function isList(node){return"OL"===node.nodeName||"UL"===node.nodeName}function listReducer(node){if(!isList(node))return;const list=node,prevElement=node.previousElementSibling;if(prevElement&&prevElement.nodeName===node.nodeName&&1===list.children.length){for(;list.firstChild;)prevElement.appendChild(list.firstChild);list.parentNode.removeChild(list)}const parentElement=node.parentNode;if(parentElement&&"LI"===parentElement.nodeName&&1===parentElement.children.length&&!/\S/.test(function shallowTextContent(element){return Array.from(element.childNodes).map((({nodeValue=""})=>nodeValue)).join("")}(parentElement))){const parentListItem=parentElement,prevListItem=parentListItem.previousElementSibling,parentList=parentListItem.parentNode;prevListItem&&(prevListItem.appendChild(list),parentList.removeChild(parentListItem))}if(parentElement&&isList(parentElement)){const prevListItem=node.previousElementSibling;prevListItem?prevListItem.appendChild(node):unwrap(node)}}function blockquoteNormaliser(options){return node=>{"BLOCKQUOTE"===node.nodeName&&(node.innerHTML=normaliseBlocks(node.innerHTML,options))}}function wrapFigureContent(element,beforeElement=element){const figure=element.ownerDocument.createElement("figure");beforeElement.parentNode.insertBefore(figure,beforeElement),figure.appendChild(element)}function figureContentReducer(node,doc,schema){if(!function isFigureContent(node,schema){var _schema$figure$childr;const tag=node.nodeName.toLowerCase();return"figcaption"!==tag&&!isTextContent(node)&&tag in(null!==(_schema$figure$childr=schema?.figure?.children)&&void 0!==_schema$figure$childr?_schema$figure$childr:{})}(node,schema))return;let nodeToInsert=node;const parentNode=node.parentNode;(function canHaveAnchor(node,schema){var _schema$figure$childr2;return node.nodeName.toLowerCase()in(null!==(_schema$figure$childr2=schema?.figure?.children?.a?.children)&&void 0!==_schema$figure$childr2?_schema$figure$childr2:{})})(node,schema)&&"A"===parentNode.nodeName&&1===parentNode.childNodes.length&&(nodeToInsert=node.parentNode);const wrapper=nodeToInsert.closest("p,div");wrapper?node.classList?(node.classList.contains("alignright")||node.classList.contains("alignleft")||node.classList.contains("aligncenter")||!wrapper.textContent.trim())&&wrapFigureContent(nodeToInsert,wrapper):wrapFigureContent(nodeToInsert,wrapper):wrapFigureContent(nodeToInsert)}function next(tag,text,index=0){const re=regexp(tag);re.lastIndex=index;const match=re.exec(text);if(!match)return;if("["===match[1]&&"]"===match[7])return next(tag,text,re.lastIndex);const result={index:match.index,content:match[0],shortcode:fromMatch(match)};return match[1]&&(result.content=result.content.slice(1),result.index++),match[7]&&(result.content=result.content.slice(0,-1)),result}function regexp(tag){return new RegExp("\\[(\\[?)("+tag+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)","g")}const attrs=(0,dist.A)((text=>{const named={},numeric=[],pattern=/([\w-]+)\s*=\s*"([^"]*)"(?:\s|$)|([\w-]+)\s*=\s*'([^']*)'(?:\s|$)|([\w-]+)\s*=\s*([^\s'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|'([^']*)'(?:\s|$)|(\S+)(?:\s|$)/g;let match;for(text=text.replace(/[\u00a0\u200b]/g," ");match=pattern.exec(text);)match[1]?named[match[1].toLowerCase()]=match[2]:match[3]?named[match[3].toLowerCase()]=match[4]:match[5]?named[match[5].toLowerCase()]=match[6]:match[7]?numeric.push(match[7]):match[8]?numeric.push(match[8]):match[9]&&numeric.push(match[9]);return{named,numeric}}));function fromMatch(match){let type;return type=match[4]?"self-closing":match[6]?"closed":"single",new shortcode({tag:match[2],attrs:match[3],type,content:match[5]})}const shortcode=Object.assign((function(options){const{tag,attrs:attributes,type,content}=options||{};if(Object.assign(this,{tag,type,content}),this.attrs={named:{},numeric:[]},!attributes)return;const attributeTypes=["named","numeric"];"string"==typeof attributes?this.attrs=attrs(attributes):attributes.length===attributeTypes.length&&attributeTypes.every(((t,key)=>t===attributes[key]))?this.attrs=attributes:Object.entries(attributes).forEach((([key,value])=>{this.set(key,value)}))}),{next,replace:function build_module_replace(tag,text,callback){return text.replace(regexp(tag),(function(match,left,$3,attrs,slash,content,closing,right){if("["===left&&"]"===right)return match;const result=callback(fromMatch(arguments));return result||""===result?left+result+right:match}))},string:function string(options){return new shortcode(options).string()},regexp,attrs,fromMatch});Object.assign(shortcode.prototype,{get(attr){return this.attrs["number"==typeof attr?"numeric":"named"][attr]},set(attr,value){return this.attrs["number"==typeof attr?"numeric":"named"][attr]=value,this},string(){let text="["+this.tag;return this.attrs.numeric.forEach((value=>{/\s/.test(value)?text+=' "'+value+'"':text+=" "+value})),Object.entries(this.attrs.named).forEach((([name,value])=>{text+=" "+name+'="'+value+'"'})),"single"===this.type?text+"]":"self-closing"===this.type?text+" /]":(text+="]",this.content&&(text+=this.content),text+"[/"+this.tag+"]")}});const castArray=maybeArray=>Array.isArray(maybeArray)?maybeArray:[maybeArray],beforeLineRegexp=/(\n|<p>)\s*$/,afterLineRegexp=/^\s*(\n|<\/p>)/;const shortcode_converter=function segmentHTMLToShortcodeBlock(HTML,lastIndex=0,excludedBlockNames=[]){const transformation=findTransform(getBlockTransforms("from"),(transform=>-1===excludedBlockNames.indexOf(transform.blockName)&&"shortcode"===transform.type&&castArray(transform.tag).some((tag=>regexp(tag).test(HTML)))));if(!transformation)return[HTML];const transformTag=castArray(transformation.tag).find((tag=>regexp(tag).test(HTML)));let match;const previousIndex=lastIndex;if(match=next(transformTag,HTML,lastIndex)){lastIndex=match.index+match.content.length;const beforeHTML=HTML.substr(0,match.index),afterHTML=HTML.substr(lastIndex);if(!(match.shortcode.content?.includes("<")||beforeLineRegexp.test(beforeHTML)&&afterLineRegexp.test(afterHTML)))return segmentHTMLToShortcodeBlock(HTML,lastIndex);if(transformation.isMatch&&!transformation.isMatch(match.shortcode.attrs))return segmentHTMLToShortcodeBlock(HTML,previousIndex,[...excludedBlockNames,transformation.blockName]);let blocks=[];if("function"==typeof transformation.transform)blocks=[].concat(transformation.transform(match.shortcode.attrs,match)),blocks=blocks.map((block=>(block.originalContent=match.shortcode.content,applyBuiltInValidationFixes(block,getBlockType(block.name)))));else{const attributes=Object.fromEntries(Object.entries(transformation.attributes).filter((([,schema])=>schema.shortcode)).map((([key,schema])=>[key,schema.shortcode(match.shortcode.attrs,match)]))),blockType=getBlockType(transformation.blockName);if(!blockType)return[HTML];const transformationBlockType={...blockType,attributes:transformation.attributes};let block=createBlock(transformation.blockName,getBlockAttributes(transformationBlockType,match.shortcode.content,attributes));block.originalContent=match.shortcode.content,block=applyBuiltInValidationFixes(block,transformationBlockType),blocks=[block]}return[...segmentHTMLToShortcodeBlock(beforeHTML.replace(beforeLineRegexp,"")),...blocks,...segmentHTMLToShortcodeBlock(afterHTML.replace(afterLineRegexp,""))]}return[HTML]};function getBlockContentSchema(context){return function getBlockContentSchemaFromTransforms(transforms,context){const schemaArgs={phrasingContentSchema:phrasing_content_getPhrasingContentSchema(context),isPaste:"paste"===context};function mergeTagNameSchemaProperties(objValue,srcValue,key){switch(key){case"children":return"*"===objValue||"*"===srcValue?"*":{...objValue,...srcValue};case"attributes":case"require":return[...objValue||[],...srcValue||[]];case"isMatch":if(!objValue||!srcValue)return;return(...args)=>objValue(...args)||srcValue(...args)}}function mergeTagNameSchemas(a,b){for(const key in b)a[key]=a[key]?mergeTagNameSchemaProperties(a[key],b[key],key):{...b[key]};return a}return transforms.map((({isMatch,blockName,schema})=>{const hasAnchorSupport=hasBlockSupport(blockName,"anchor");return schema="function"==typeof schema?schema(schemaArgs):schema,hasAnchorSupport||isMatch?schema?Object.fromEntries(Object.entries(schema).map((([key,value])=>{let attributes=value.attributes||[];return hasAnchorSupport&&(attributes=[...attributes,"id"]),[key,{...value,attributes,isMatch:isMatch||void 0}]}))):{}:schema})).reduce((function mergeSchemas(a,b){for(const key in b)a[key]=a[key]?mergeTagNameSchemas(a[key],b[key]):{...b[key]};return a}),{})}(getRawTransforms(),context)}function deepFilterNodeList(nodeList,filters,doc,schema){Array.from(nodeList).forEach((node=>{deepFilterNodeList(node.childNodes,filters,doc,schema),filters.forEach((item=>{doc.contains(node)&&item(node,doc,schema)}))}))}function deepFilterHTML(HTML,filters=[],schema){const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=HTML,deepFilterNodeList(doc.body.childNodes,filters,doc,schema),doc.body.innerHTML}function getSibling(node,which){const sibling=node[`${which}Sibling`];if(sibling&&isPhrasingContent(sibling))return sibling;const{parentNode}=node;return parentNode&&isPhrasingContent(parentNode)?getSibling(parentNode,which):void 0}function rawHandler({HTML=""}){if(-1!==HTML.indexOf("\x3c!-- wp:")){const parseResult=parse(HTML);if(!(1===parseResult.length&&"core/freeform"===parseResult[0].name))return parseResult}const pieces=shortcode_converter(HTML),blockContentSchema=getBlockContentSchema();return pieces.map((piece=>{if("string"!=typeof piece)return piece;return htmlToBlocks(piece=normaliseBlocks(piece=deepFilterHTML(piece,[listReducer,specialCommentConverter,figureContentReducer,blockquoteNormaliser({raw:!0})],blockContentSchema),{raw:!0}),rawHandler)})).flat().filter(Boolean)}const noop=()=>{};function cleanNodeList(nodeList,doc,schema,inline){Array.from(nodeList).forEach((node=>{const tag=node.nodeName.toLowerCase();if(!schema.hasOwnProperty(tag)||schema[tag].isMatch&&!schema[tag].isMatch?.(node))cleanNodeList(node.childNodes,doc,schema,inline),inline&&!isPhrasingContent(node)&&node.nextElementSibling&&insertAfter(doc.createElement("br"),node),unwrap(node);else if(function isElement(node){return!!node&&node.nodeType===node.ELEMENT_NODE}(node)){const{attributes=[],classes=[],children,require=[],allowEmpty}=schema[tag];if(children&&!allowEmpty&&isEmpty(node))return void(0,remove.A)(node);if(node.hasAttributes()&&(Array.from(node.attributes).forEach((({name})=>{"class"===name||attributes.includes(name)||node.removeAttribute(name)})),node.classList&&node.classList.length)){const mattchers=classes.map((item=>"string"==typeof item?className=>className===item:item instanceof RegExp?className=>item.test(className):noop));Array.from(node.classList).forEach((name=>{mattchers.some((isMatch=>isMatch(name)))||node.classList.remove(name)})),node.classList.length||node.removeAttribute("class")}if(node.hasChildNodes()){if("*"===children)return;if(children)require.length&&!node.querySelector(require.join(","))?(cleanNodeList(node.childNodes,doc,schema,inline),unwrap(node)):node.parentNode&&"BODY"===node.parentNode.nodeName&&isPhrasingContent(node)?(cleanNodeList(node.childNodes,doc,schema,inline),Array.from(node.childNodes).some((child=>!isPhrasingContent(child)))&&unwrap(node)):cleanNodeList(node.childNodes,doc,children,inline);else for(;node.firstChild;)(0,remove.A)(node.firstChild)}}}))}function removeInvalidHTML(HTML,schema,inline){const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=HTML,cleanNodeList(doc.body.childNodes,doc,schema,inline),doc.body.innerHTML}function commentRemover(node){node.nodeType===node.COMMENT_NODE&&(0,remove.A)(node)}function deepCheck(nodes,contextTag){return nodes.every((node=>function isInline(node,contextTag){if(isTextContent(node))return!0;if(!contextTag)return!1;const tag=node.nodeName.toLowerCase();return[["ul","li","ol"],["h1","h2","h3","h4","h5","h6"]].some((tagGroup=>0===[tag,contextTag].filter((t=>!tagGroup.includes(t))).length))}(node,contextTag)&&deepCheck(Array.from(node.children),contextTag)))}function isDoubleBR(node){return"BR"===node.nodeName&&node.previousSibling&&"BR"===node.previousSibling.nodeName}function wrap(newNode,referenceNode){(0,assert_is_defined.e)(referenceNode.parentNode,"referenceNode.parentNode"),referenceNode.parentNode.insertBefore(newNode,referenceNode),newNode.appendChild(referenceNode)}function replaceTag(node,tagName){const newNode=node.ownerDocument.createElement(tagName);for(;node.firstChild;)newNode.appendChild(node.firstChild);return(0,assert_is_defined.e)(node.parentNode,"node.parentNode"),node.parentNode.replaceChild(newNode,node),newNode}function phrasingContentReducer(node,doc){if("SPAN"===node.nodeName&&node.style){const{fontWeight,fontStyle,textDecorationLine,textDecoration,verticalAlign}=node.style;"bold"!==fontWeight&&"700"!==fontWeight||wrap(doc.createElement("strong"),node),"italic"===fontStyle&&wrap(doc.createElement("em"),node),("line-through"===textDecorationLine||textDecoration.includes("line-through"))&&wrap(doc.createElement("s"),node),"super"===verticalAlign?wrap(doc.createElement("sup"),node):"sub"===verticalAlign&&wrap(doc.createElement("sub"),node)}else"B"===node.nodeName?node=replaceTag(node,"strong"):"I"===node.nodeName?node=replaceTag(node,"em"):"A"===node.nodeName&&(node.target&&"_blank"===node.target.toLowerCase()?node.rel="noreferrer noopener":(node.removeAttribute("target"),node.removeAttribute("rel")),node.name&&!node.id&&(node.id=node.name),node.id&&!node.ownerDocument.querySelector(`[href="#${node.id}"]`)&&node.removeAttribute("id"))}function headRemover(node){"SCRIPT"!==node.nodeName&&"NOSCRIPT"!==node.nodeName&&"TEMPLATE"!==node.nodeName&&"STYLE"!==node.nodeName||node.parentNode.removeChild(node)}function msListIgnore(node){if(node.nodeType!==node.ELEMENT_NODE)return;const style=node.getAttribute("style");if(!style||!style.includes("mso-list"))return;"ignore"===style.split(";").reduce(((acc,rule)=>{const[key,value]=rule.split(":");return key&&value&&(acc[key.trim().toLowerCase()]=value.trim().toLowerCase()),acc}),{})["mso-list"]&&node.remove()}function ms_list_converter_isList(node){return"OL"===node.nodeName||"UL"===node.nodeName}function msListConverter(node,doc){if("P"!==node.nodeName)return;const style=node.getAttribute("style");if(!style||!style.includes("mso-list"))return;const prevNode=node.previousElementSibling;if(!prevNode||!ms_list_converter_isList(prevNode)){const type=node.textContent.trim().slice(0,1),isNumeric=/[1iIaA]/.test(type),newListNode=doc.createElement(isNumeric?"ol":"ul");isNumeric&&newListNode.setAttribute("type",type),node.parentNode.insertBefore(newListNode,node)}const listNode=node.previousElementSibling,listType=listNode.nodeName,listItem=doc.createElement("li");let receivingNode=listNode;listItem.innerHTML=deepFilterHTML(node.innerHTML,[msListIgnore]);const matches=/mso-list\s*:[^;]+level([0-9]+)/i.exec(style);let level=matches&&parseInt(matches[1],10)-1||0;for(;level--;)receivingNode=receivingNode.lastChild||receivingNode,ms_list_converter_isList(receivingNode)&&(receivingNode=receivingNode.lastChild||receivingNode);ms_list_converter_isList(receivingNode)||(receivingNode=receivingNode.appendChild(doc.createElement(listType))),receivingNode.appendChild(listItem),node.parentNode.removeChild(node)}var blob_build_module=__webpack_require__("./packages/blob/build-module/index.js");function imageCorrector(node){if("IMG"===node.nodeName){if(0===node.src.indexOf("file:")&&(node.src=""),0===node.src.indexOf("data:")){const[properties,data]=node.src.split(","),[type]=properties.slice(5).split(";");if(!data||!type)return void(node.src="");let decoded;try{decoded=atob(data)}catch(e){return void(node.src="")}const uint8Array=new Uint8Array(decoded.length);for(let i=0;i<uint8Array.length;i++)uint8Array[i]=decoded.charCodeAt(i);const name=type.replace("/","."),file=new window.File([uint8Array],name,{type});node.src=(0,blob_build_module.bW)(file)}1!==node.height&&1!==node.width||node.parentNode.removeChild(node)}}function divNormaliser(node){"DIV"===node.nodeName&&(node.innerHTML=normaliseBlocks(node.innerHTML))}var showdown=__webpack_require__("./node_modules/showdown/dist/showdown.js");const converter=new(__webpack_require__.n(showdown)().Converter)({noHeaderId:!0,tables:!0,literalMidWordUnderscores:!0,omitExtraWLInCodeBlocks:!0,simpleLineBreaks:!0,strikethrough:!0});function iframeRemover(node){if("IFRAME"===node.nodeName){const text=node.ownerDocument.createTextNode(node.src);node.parentNode.replaceChild(text,node)}}function googleDocsUIdRemover(node){node.id&&0===node.id.indexOf("docs-internal-guid-")&&("B"===node.tagName?unwrap(node):node.removeAttribute("id"))}function htmlFormattingRemover(node){if(node.nodeType!==node.TEXT_NODE)return;let parent=node;for(;parent=parent.parentNode;)if(parent.nodeType===parent.ELEMENT_NODE&&"PRE"===parent.nodeName)return;let newData=node.data.replace(/[ \r\n\t]+/g," ");if(" "===newData[0]){const previousSibling=getSibling(node,"previous");previousSibling&&"BR"!==previousSibling.nodeName&&" "!==previousSibling.textContent.slice(-1)||(newData=newData.slice(1))}if(" "===newData[newData.length-1]){const nextSibling=getSibling(node,"next");(!nextSibling||"BR"===nextSibling.nodeName||nextSibling.nodeType===nextSibling.TEXT_NODE&&function isFormattingSpace(character){return" "===character||"\r"===character||"\n"===character||"\t"===character}(nextSibling.textContent[0]))&&(newData=newData.slice(0,-1))}newData?node.data=newData:node.parentNode.removeChild(node)}function brRemover(node){"BR"===node.nodeName&&(getSibling(node,"next")||node.parentNode.removeChild(node))}function emptyParagraphRemover(node){"P"===node.nodeName&&(node.hasChildNodes()||node.parentNode.removeChild(node))}function slackParagraphCorrector(node){if("SPAN"!==node.nodeName)return;if("paragraph-break"!==node.getAttribute("data-stringify-type"))return;const{parentNode}=node;parentNode.insertBefore(node.ownerDocument.createElement("br"),node),parentNode.insertBefore(node.ownerDocument.createElement("br"),node),parentNode.removeChild(node)}const log=(...args)=>window?.console?.log?.(...args);function filterInlineHTML(HTML){return HTML=deepFilterHTML(HTML,[headRemover,googleDocsUIdRemover,msListIgnore,phrasingContentReducer,commentRemover]),HTML=deepFilterHTML(HTML=removeInvalidHTML(HTML,phrasing_content_getPhrasingContentSchema("paste"),{inline:!0}),[htmlFormattingRemover,brRemover]),log("Processed inline HTML:\n\n",HTML),HTML}function pasteHandler({HTML="",plainText="",mode="AUTO",tagName}){if(HTML=(HTML=(HTML=HTML.replace(/<meta[^>]+>/g,"")).replace(/^\s*<html[^>]*>\s*<body[^>]*>(?:\s*<!--\s*StartFragment\s*-->)?/i,"")).replace(/(?:<!--\s*EndFragment\s*-->\s*)?<\/body>\s*<\/html>\s*$/i,""),"INLINE"!==mode){const content=HTML||plainText;if(-1!==content.indexOf("\x3c!-- wp:")){const parseResult=parse(content);if(!(1===parseResult.length&&"core/freeform"===parseResult[0].name))return parseResult}}String.prototype.normalize&&(HTML=HTML.normalize()),HTML=deepFilterHTML(HTML,[slackParagraphCorrector]);const isPlainText=plainText&&(!HTML||function isPlain(HTML){return!/<(?!br[ />])/i.test(HTML)}(HTML));isPlainText&&(HTML=plainText,/^\s+$/.test(plainText)||(HTML=function markdownConverter(text){return converter.makeHtml(function slackMarkdownVariantCorrector(text){return text.replace(/((?:^|\n)```)([^\n`]+)(```(?:$|\n))/,((match,p1,p2,p3)=>`${p1}\n${p2}\n${p3}`))}(function bulletsToAsterisks(text){return text.replace(/(^|\n)â¢( +)/g,"$1*$2")}(text)))}(HTML)));const pieces=shortcode_converter(HTML),hasShortcodes=pieces.length>1;if(isPlainText&&!hasShortcodes&&"AUTO"===mode&&-1===plainText.indexOf("\n")&&0!==plainText.indexOf("<p>")&&0===HTML.indexOf("<p>")&&(mode="INLINE"),"INLINE"===mode)return filterInlineHTML(HTML);if("AUTO"===mode&&!hasShortcodes&&function isInlineContent(HTML,contextTag){const doc=document.implementation.createHTMLDocument("");doc.body.innerHTML=HTML;const nodes=Array.from(doc.body.children);return!nodes.some(isDoubleBR)&&deepCheck(nodes,contextTag)}(HTML,tagName))return filterInlineHTML(HTML);const phrasingContentSchema=phrasing_content_getPhrasingContentSchema("paste"),blockContentSchema=getBlockContentSchema("paste"),blocks=pieces.map((piece=>{if("string"!=typeof piece)return piece;const filters=[googleDocsUIdRemover,msListConverter,headRemover,listReducer,imageCorrector,phrasingContentReducer,specialCommentConverter,commentRemover,iframeRemover,figureContentReducer,blockquoteNormaliser(),divNormaliser],schema={...blockContentSchema,...phrasingContentSchema};return piece=deepFilterHTML(piece,filters,blockContentSchema),piece=deepFilterHTML(piece=normaliseBlocks(piece=removeInvalidHTML(piece,schema)),[htmlFormattingRemover,brRemover,emptyParagraphRemover],blockContentSchema),log("Processed HTML piece:\n\n",piece),htmlToBlocks(piece,pasteHandler)})).flat().filter(Boolean);if("AUTO"===mode&&1===blocks.length&&hasBlockSupport(blocks[0].name,"__unstablePasteTextInline",!1)){const trimRegex=/^[\n]+|[\n]+$/g,trimmedPlainText=plainText.replace(trimRegex,"");if(""!==trimmedPlainText&&-1===trimmedPlainText.indexOf("\n"))return removeInvalidHTML(getBlockInnerHTML(blocks[0]),phrasingContentSchema).replace(trimRegex,"")}return blocks}function categories_getCategories(){return(0,build_module_select.L)(store).getCategories()}function doBlocksMatchTemplate(blocks=[],template=[]){return blocks.length===template.length&&template.every((([name,,innerBlocksTemplate],index)=>{const block=blocks[index];return name===block.name&&doBlocksMatchTemplate(block.innerBlocks,innerBlocksTemplate)}))}const isHTMLAttribute=attributeDefinition=>"html"===attributeDefinition?.source,isQueryAttribute=attributeDefinition=>"query"===attributeDefinition?.source;function normalizeAttributes(schema,values){return values?Object.fromEntries(Object.entries(values).map((([key,value])=>[key,normalizeAttribute(schema[key],value)]))):{}}function normalizeAttribute(definition,value){return isHTMLAttribute(definition)&&Array.isArray(value)?(0,serialize.Ay)(value):isQueryAttribute(definition)&&value?value.map((subValues=>normalizeAttributes(definition.query,subValues))):value}function synchronizeBlocksWithTemplate(blocks=[],template){return template?template.map((([name,attributes,innerBlocksTemplate],index)=>{var _blockType$attributes;const block=blocks[index];if(block&&block.name===name){const innerBlocks=synchronizeBlocksWithTemplate(block.innerBlocks,innerBlocksTemplate);return{...block,innerBlocks}}const blockType=getBlockType(name),normalizedAttributes=normalizeAttributes(null!==(_blockType$attributes=blockType?.attributes)&&void 0!==_blockType$attributes?_blockType$attributes:{},attributes);let[blockName,blockAttributes]=convertLegacyBlockNameAndAttributes(name,normalizedAttributes);return void 0===getBlockType(blockName)&&(blockAttributes={originalName:name,originalContent:"",originalUndelimitedContent:""},blockName="core/missing"),createBlock(blockName,blockAttributes,synchronizeBlocksWithTemplate([],innerBlocksTemplate))})):blocks}const privateApis={};lock(privateApis,{isUnmodifiedBlockContent:function isUnmodifiedBlockContent(block){const contentAttributes=getBlockAttributesNamesByRole(block.name,"content");return 0===contentAttributes.length?isUnmodifiedBlock(block):contentAttributes.every((key=>{const definition=getBlockType(block.name)?.attributes[key];return isUnmodifiedAttribute(definition,block.attributes[key])}))}})},"./packages/data/build-module/components/async-mode-provider/context.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,ob:()=>Context});const Context=(0,__webpack_require__("./node_modules/react/index.js").createContext)(!1),{Consumer,Provider}=Context,__WEBPACK_DEFAULT_EXPORT__=Provider},"./packages/data/build-module/components/use-select/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useSelect});var build_module=__webpack_require__("./packages/priority-queue/build-module/index.js"),react=__webpack_require__("./node_modules/react/index.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),context=__webpack_require__("./packages/data/build-module/components/async-mode-provider/context.js");const renderQueue=(0,build_module.y)();function Store(registry,suspense){const select=suspense?registry.suspendSelect:registry.select,queueContext={};let lastMapSelect,lastMapResult,lastIsAsync,subscriber,lastMapResultValid=!1;const storeStatesOnMount=new Map;function getStoreState(name){var _registry$stores$name;return null!==(_registry$stores$name=registry.stores[name]?.store?.getState?.())&&void 0!==_registry$stores$name?_registry$stores$name:{}}return(mapSelect,isAsync)=>{function updateValue(){if(lastMapResultValid&&mapSelect===lastMapSelect)return lastMapResult;const listeningStores={current:null},mapResult=registry.__unstableMarkListeningStores((()=>mapSelect(select,registry)),listeningStores);if(subscriber)subscriber.updateStores(listeningStores.current);else{for(const name of listeningStores.current)storeStatesOnMount.set(name,getStoreState(name));subscriber=(stores=>{const activeStores=[...stores],activeSubscriptions=new Set;return{subscribe:function subscribe(listener){if(lastMapResultValid)for(const name of activeStores)storeStatesOnMount.get(name)!==getStoreState(name)&&(lastMapResultValid=!1);storeStatesOnMount.clear();const onStoreChange=()=>{lastMapResultValid=!1,listener()},onChange=()=>{lastIsAsync?renderQueue.add(queueContext,onStoreChange):onStoreChange()},unsubs=[];function subscribeStore(storeName){unsubs.push(registry.subscribe(onChange,storeName))}for(const storeName of activeStores)subscribeStore(storeName);return activeSubscriptions.add(subscribeStore),()=>{activeSubscriptions.delete(subscribeStore);for(const unsub of unsubs.values())unsub?.();renderQueue.cancel(queueContext)}},updateStores:function updateStores(newStores){for(const newStore of newStores)if(!activeStores.includes(newStore)){activeStores.push(newStore);for(const subscription of activeSubscriptions)subscription(newStore)}}}})(listeningStores.current)}(0,is_shallow_equal_build_module.Ay)(lastMapResult,mapResult)||(lastMapResult=mapResult),lastMapSelect=mapSelect,lastMapResultValid=!0}return lastIsAsync&&!isAsync&&(lastMapResultValid=!1,renderQueue.cancel(queueContext)),updateValue(),lastIsAsync=isAsync,{subscribe:subscriber.subscribe,getValue:function getValue(){return updateValue(),lastMapResult}}}}function useMappingSelect(suspense,mapSelect,deps){const registry=(0,use_registry.A)(),isAsync=function useAsyncMode(){return(0,react.useContext)(context.ob)}(),store=(0,react.useMemo)((()=>Store(registry,suspense)),[registry,suspense]),selector=(0,react.useCallback)(mapSelect,deps),{subscribe,getValue}=store(selector,isAsync),result=(0,react.useSyncExternalStore)(subscribe,getValue,getValue);return(0,react.useDebugValue)(result),result}function useSelect(mapSelect,deps){const staticSelectMode="function"!=typeof mapSelect,staticSelectModeRef=(0,react.useRef)(staticSelectMode);if(staticSelectMode!==staticSelectModeRef.current){const prevMode=staticSelectModeRef.current?"static":"mapping";throw new Error(`Switching useSelect from ${prevMode} to ${staticSelectMode?"static":"mapping"} is not allowed`)}return staticSelectMode?function useStaticSelect(storeName){return(0,use_registry.A)().select(storeName)}(mapSelect):useMappingSelect(!1,mapSelect,deps)}},"./packages/data/build-module/dispatch.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>dispatch});var _default_registry__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/data/build-module/default-registry.js");function dispatch(storeNameOrDescriptor){return _default_registry__WEBPACK_IMPORTED_MODULE_0__.A.dispatch(storeNameOrDescriptor)}},"./packages/data/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HY:()=>combineReducers,dH:()=>resolveSelect,kz:()=>register,ti:()=>registerStore});var _default_registry__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/data/build-module/default-registry.js");const combineReducers=__webpack_require__("./packages/data/build-module/redux-store/combine-reducers.js").H,resolveSelect=_default_registry__WEBPACK_IMPORTED_MODULE_1__.A.resolveSelect,registerStore=(_default_registry__WEBPACK_IMPORTED_MODULE_1__.A.suspendSelect,_default_registry__WEBPACK_IMPORTED_MODULE_1__.A.subscribe,_default_registry__WEBPACK_IMPORTED_MODULE_1__.A.registerGenericStore,_default_registry__WEBPACK_IMPORTED_MODULE_1__.A.registerStore),register=(_default_registry__WEBPACK_IMPORTED_MODULE_1__.A.use,_default_registry__WEBPACK_IMPORTED_MODULE_1__.A.register)},"./packages/data/build-module/select.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>select});var _default_registry__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/data/build-module/default-registry.js");function select(storeNameOrDescriptor){return _default_registry__WEBPACK_IMPORTED_MODULE_0__.A.select(storeNameOrDescriptor)}},"./packages/dom/build-module/dom/remove.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>remove});var _utils_assert_is_defined__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/dom/build-module/utils/assert-is-defined.js");function remove(node){(0,_utils_assert_is_defined__WEBPACK_IMPORTED_MODULE_0__.e)(node.parentNode,"node.parentNode"),node.parentNode.removeChild(node)}},"./packages/dom/build-module/dom/safe-html.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>safeHTML});var _remove__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/dom/build-module/dom/remove.js");function safeHTML(html){const{body}=document.implementation.createHTMLDocument("");body.innerHTML=html;const elements=body.getElementsByTagName("*");let elementIndex=elements.length;for(;elementIndex--;){const element=elements[elementIndex];if("SCRIPT"===element.tagName)(0,_remove__WEBPACK_IMPORTED_MODULE_0__.A)(element);else{let attributeIndex=element.attributes.length;for(;attributeIndex--;){const{name:key}=element.attributes[attributeIndex];key.startsWith("on")&&element.removeAttribute(key)}}}return body.innerHTML}},"./packages/dom/build-module/dom/strip-html.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>stripHTML});var _safe_html__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/dom/build-module/dom/safe-html.js");function stripHTML(html){html=(0,_safe_html__WEBPACK_IMPORTED_MODULE_0__.A)(html);const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=html,doc.body.textContent||""}},"./packages/element/build-module/platform.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={OS:"web",select:spec=>"web"in spec?spec.web:spec.default,isWeb:!0}},"./packages/html-entities/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{let _decodeTextArea;function decodeEntities(html){if("string"!=typeof html||-1===html.indexOf("&"))return html;void 0===_decodeTextArea&&(_decodeTextArea=document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument("").createElement("textarea"):document.createElement("textarea")),_decodeTextArea.innerHTML=html;const decoded=_decodeTextArea.textContent;return _decodeTextArea.innerHTML="",decoded}__webpack_require__.d(__webpack_exports__,{S:()=>decodeEntities})},"./packages/icons/build-module/library/symbol.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z"})})},"./packages/notices/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>store});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{createErrorNotice:()=>createErrorNotice,createInfoNotice:()=>createInfoNotice,createNotice:()=>createNotice,createSuccessNotice:()=>createSuccessNotice,createWarningNotice:()=>createWarningNotice,removeAllNotices:()=>removeAllNotices,removeNotice:()=>removeNotice,removeNotices:()=>removeNotices});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{getNotices:()=>getNotices});var redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),build_module=__webpack_require__("./packages/data/build-module/index.js");const on_sub_key=actionProperty=>reducer=>(state={},action)=>{const key=action[actionProperty];if(void 0===key)return state;const nextKeyState=reducer(state[key],action);return nextKeyState===state[key]?state:{...state,[key]:nextKeyState}},reducer=on_sub_key("context")(((state=[],action)=>{switch(action.type){case"CREATE_NOTICE":return[...state.filter((({id})=>id!==action.notice.id)),action.notice];case"REMOVE_NOTICE":return state.filter((({id})=>id!==action.id));case"REMOVE_NOTICES":return state.filter((({id})=>!action.ids.includes(id)));case"REMOVE_ALL_NOTICES":return state.filter((({type})=>type!==action.noticeType))}return state})),DEFAULT_CONTEXT="global",DEFAULT_STATUS="info";let uniqueId=0;function createNotice(status=DEFAULT_STATUS,content,options={}){const{speak=!0,isDismissible=!0,context=DEFAULT_CONTEXT,id=`${context}${++uniqueId}`,actions=[],type="default",__unstableHTML,icon=null,explicitDismiss=!1,onDismiss}=options;return{type:"CREATE_NOTICE",context,notice:{id,status,content:content=String(content),spokenMessage:speak?content:null,__unstableHTML,isDismissible,actions,type,icon,explicitDismiss,onDismiss}}}function createSuccessNotice(content,options){return createNotice("success",content,options)}function createInfoNotice(content,options){return createNotice("info",content,options)}function createErrorNotice(content,options){return createNotice("error",content,options)}function createWarningNotice(content,options){return createNotice("warning",content,options)}function removeNotice(id,context=DEFAULT_CONTEXT){return{type:"REMOVE_NOTICE",id,context}}function removeAllNotices(noticeType="default",context=DEFAULT_CONTEXT){return{type:"REMOVE_ALL_NOTICES",noticeType,context}}function removeNotices(ids,context=DEFAULT_CONTEXT){return{type:"REMOVE_NOTICES",ids,context}}const DEFAULT_NOTICES=[];function getNotices(state,context=DEFAULT_CONTEXT){return state[context]||DEFAULT_NOTICES}const store=(0,redux_store.A)("core/notices",{reducer,actions:actions_namespaceObject,selectors:selectors_namespaceObject});(0,build_module.kz)(store)},"./packages/preferences/build-module/store/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>store});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{set:()=>set,setDefaults:()=>setDefaults,setPersistenceLayer:()=>setPersistenceLayer,toggle:()=>toggle});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{get:()=>get});var redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),build_module=__webpack_require__("./packages/data/build-module/index.js");const preferences=function withPersistenceLayer(reducer){let persistenceLayer;return(state,action)=>{if("SET_PERSISTENCE_LAYER"===action.type){const{persistenceLayer:persistence,persistedData}=action;return persistenceLayer=persistence,persistedData}const nextState=reducer(state,action);return"SET_PREFERENCE_VALUE"===action.type&&persistenceLayer?.set(nextState),nextState}}(((state={},action)=>{if("SET_PREFERENCE_VALUE"===action.type){const{scope,name,value}=action;return{...state,[scope]:{...state[scope],[name]:value}}}return state})),reducer=(0,build_module.HY)({defaults:function defaults(state={},action){if("SET_PREFERENCE_DEFAULTS"===action.type){const{scope,defaults:values}=action;return{...state,[scope]:{...state[scope],...values}}}return state},preferences});function toggle(scope,name){return function({select,dispatch}){const currentValue=select.get(scope,name);dispatch.set(scope,name,!currentValue)}}function set(scope,name,value){return{type:"SET_PREFERENCE_VALUE",scope,name,value}}function setDefaults(scope,defaults){return{type:"SET_PREFERENCE_DEFAULTS",scope,defaults}}async function setPersistenceLayer(persistenceLayer){const persistedData=await persistenceLayer.get();return{type:"SET_PERSISTENCE_LAYER",persistenceLayer,persistedData}}var deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js");const get=(originalGet=(state,scope,name)=>{const value=state.preferences[scope]?.[name];return void 0!==value?value:state.defaults[scope]?.[name]},(state,scope,name)=>["allowRightClickOverrides","distractionFree","editorMode","fixedToolbar","focusMode","hiddenBlockTypes","inactivePanels","keepCaretInsideBlock","mostUsedBlocks","openPanels","showBlockBreadcrumbs","showIconLabels","showListViewByDefault","isPublishSidebarEnabled","isComplementaryAreaVisible","pinnedItems"].includes(name)&&["core/edit-post","core/edit-site"].includes(scope)?((0,deprecated_build_module.A)(`wp.data.select( 'core/preferences' ).get( '${scope}', '${name}' )`,{since:"6.5",alternative:`wp.data.select( 'core/preferences' ).get( 'core', '${name}' )`}),originalGet(state,"core",name)):originalGet(state,scope,name));var originalGet;const store=(0,redux_store.A)("core/preferences",{reducer,actions:actions_namespaceObject,selectors:selectors_namespaceObject});(0,build_module.kz)(store)},"./packages/priority-queue/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>createQueue});__webpack_require__("./node_modules/requestidlecallback/index.js");const request_idle_callback=function createRequestIdleCallback(){return"undefined"==typeof window?callback=>{setTimeout((()=>callback(Date.now())),0)}:window.requestIdleCallback}(),createQueue=()=>{const waitingList=new Map;let isRunning=!1;const runWaitingList=deadline=>{for(const[nextElement,callback]of waitingList)if(waitingList.delete(nextElement),callback(),"number"==typeof deadline||deadline.timeRemaining()<=0)break;0!==waitingList.size?request_idle_callback(runWaitingList):isRunning=!1};return{add:(element,item)=>{waitingList.set(element,item),isRunning||(isRunning=!0,request_idle_callback(runWaitingList))},flush:element=>{const callback=waitingList.get(element);return void 0!==callback&&(waitingList.delete(element),callback(),!0)},cancel:element=>waitingList.delete(element),reset:()=>{waitingList.clear(),isRunning=!1}}}},"./packages/rich-text/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EF:()=>RichTextData,Ng:()=>createElement,lL:()=>useRichText,Wc:()=>applyFormat,xW:()=>concat,vt:()=>create,SX:()=>getActiveFormat,o_:()=>getActiveObject,rf:()=>getTextContent,Yr:()=>insert,PE:()=>insertObject,kW:()=>isCollapsed,Im:()=>isEmpty,fj:()=>join,DE:()=>registerFormatType,TF:()=>remove_remove,k2:()=>removeFormat,HC:()=>replace_replace,di:()=>slice,lD:()=>split,M_:()=>store,Ky:()=>toHTMLString,Kt:()=>toggleFormat,d6:()=>useAnchor});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{getFormatType:()=>getFormatType,getFormatTypeForBareElement:()=>getFormatTypeForBareElement,getFormatTypeForClassName:()=>getFormatTypeForClassName,getFormatTypes:()=>getFormatTypes});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{addFormatTypes:()=>addFormatTypes,removeFormatTypes:()=>removeFormatTypes});var redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),build_module=__webpack_require__("./packages/data/build-module/index.js");const reducer=(0,build_module.HY)({formatTypes:function formatTypes(state={},action){switch(action.type){case"ADD_FORMAT_TYPES":return{...state,...action.formatTypes.reduce(((newFormatTypes,type)=>({...newFormatTypes,[type.name]:type})),{})};case"REMOVE_FORMAT_TYPES":return Object.fromEntries(Object.entries(state).filter((([key])=>!action.names.includes(key))))}return state}});const getFormatTypes=(0,__webpack_require__("./node_modules/rememo/rememo.js").A)((state=>Object.values(state.formatTypes)),(state=>[state.formatTypes]));function getFormatType(state,name){return state.formatTypes[name]}function getFormatTypeForBareElement(state,bareElementTagName){const formatTypes=getFormatTypes(state);return formatTypes.find((({className,tagName})=>null===className&&bareElementTagName===tagName))||formatTypes.find((({className,tagName})=>null===className&&"*"===tagName))}function getFormatTypeForClassName(state,elementClassName){return getFormatTypes(state).find((({className})=>null!==className&&` ${elementClassName} `.indexOf(` ${className} `)>=0))}function addFormatTypes(formatTypes){return{type:"ADD_FORMAT_TYPES",formatTypes:Array.isArray(formatTypes)?formatTypes:[formatTypes]}}function removeFormatTypes(names){return{type:"REMOVE_FORMAT_TYPES",names:Array.isArray(names)?names:[names]}}const store=(0,redux_store.A)("core/rich-text",{reducer,selectors:selectors_namespaceObject,actions:actions_namespaceObject});function isFormatEqual(format1,format2){if(format1===format2)return!0;if(!format1||!format2)return!1;if(format1.type!==format2.type)return!1;const attributes1=format1.attributes,attributes2=format2.attributes;if(attributes1===attributes2)return!0;if(!attributes1||!attributes2)return!1;const keys1=Object.keys(attributes1),keys2=Object.keys(attributes2);if(keys1.length!==keys2.length)return!1;const length=keys1.length;for(let i=0;i<length;i++){const name=keys1[i];if(attributes1[name]!==attributes2[name])return!1}return!0}function normaliseFormats(value){const newFormats=value.formats.slice();return newFormats.forEach(((formatsAtIndex,index)=>{const formatsAtPreviousIndex=newFormats[index-1];if(formatsAtPreviousIndex){const newFormatsAtIndex=formatsAtIndex.slice();newFormatsAtIndex.forEach(((format,formatIndex)=>{const previousFormat=formatsAtPreviousIndex[formatIndex];isFormatEqual(format,previousFormat)&&(newFormatsAtIndex[formatIndex]=previousFormat)})),newFormats[index]=newFormatsAtIndex}})),{...value,formats:newFormats}}function replace(array,index,value){return(array=array.slice())[index]=value,array}function applyFormat(value,format,startIndex=value.start,endIndex=value.end){const{formats,activeFormats}=value,newFormats=formats.slice();if(startIndex===endIndex){const startFormat=newFormats[startIndex]?.find((({type})=>type===format.type));if(startFormat){const index=newFormats[startIndex].indexOf(startFormat);for(;newFormats[startIndex]&&newFormats[startIndex][index]===startFormat;)newFormats[startIndex]=replace(newFormats[startIndex],index,format),startIndex--;for(endIndex++;newFormats[endIndex]&&newFormats[endIndex][index]===startFormat;)newFormats[endIndex]=replace(newFormats[endIndex],index,format),endIndex++}}else{let position=1/0;for(let index=startIndex;index<endIndex;index++)if(newFormats[index]){newFormats[index]=newFormats[index].filter((({type})=>type!==format.type));const length=newFormats[index].length;length<position&&(position=length)}else newFormats[index]=[],position=0;for(let index=startIndex;index<endIndex;index++)newFormats[index].splice(position,0,format)}return normaliseFormats({...value,formats:newFormats,activeFormats:[...activeFormats?.filter((({type})=>type!==format.type))||[],format]})}(0,build_module.kz)(store);var build_module_select=__webpack_require__("./packages/data/build-module/select.js");function createElement({implementation},html){return createElement.body||(createElement.body=implementation.createHTMLDocument("").body),createElement.body.innerHTML=html,createElement.body}const OBJECT_REPLACEMENT_CHARACTER="ï¿¼",ZWNBSP="\ufeff";var escape_html_build_module=__webpack_require__("./packages/escape-html/build-module/index.js");function getActiveFormats(value,EMPTY_ACTIVE_FORMATS=[]){const{formats,start,end,activeFormats}=value;if(void 0===start)return EMPTY_ACTIVE_FORMATS;if(start===end){if(activeFormats)return activeFormats;const formatsBefore=formats[start-1]||EMPTY_ACTIVE_FORMATS,formatsAfter=formats[start]||EMPTY_ACTIVE_FORMATS;return formatsBefore.length<formatsAfter.length?formatsBefore:formatsAfter}if(!formats[start])return EMPTY_ACTIVE_FORMATS;const selectedFormats=formats.slice(start,end),_activeFormats=[...selectedFormats[0]];let i=selectedFormats.length;for(;i--;){const formatsAtIndex=selectedFormats[i];if(!formatsAtIndex)return EMPTY_ACTIVE_FORMATS;let ii=_activeFormats.length;for(;ii--;){const format=_activeFormats[ii];formatsAtIndex.find((_format=>isFormatEqual(format,_format)))||_activeFormats.splice(ii,1)}if(0===_activeFormats.length)return EMPTY_ACTIVE_FORMATS}return _activeFormats||EMPTY_ACTIVE_FORMATS}function get_format_type_getFormatType(name){return(0,build_module_select.L)(store).getFormatType(name)}function restoreOnAttributes(attributes,isEditableTree){if(isEditableTree)return attributes;const newAttributes={};for(const key in attributes){let newKey=key;key.startsWith("data-disable-rich-text-")&&(newKey=key.slice(23)),newAttributes[newKey]=attributes[key]}return newAttributes}function fromFormat({type,tagName,attributes,unregisteredAttributes,object,boundaryClass,isEditableTree}){const formatType=get_format_type_getFormatType(type);let elementAttributes={};if(boundaryClass&&isEditableTree&&(elementAttributes["data-rich-text-format-boundary"]="true"),!formatType)return attributes&&(elementAttributes={...attributes,...elementAttributes}),{type,attributes:restoreOnAttributes(elementAttributes,isEditableTree),object};elementAttributes={...unregisteredAttributes,...elementAttributes};for(const name in attributes){const key=!!formatType.attributes&&formatType.attributes[name];key?elementAttributes[key]=attributes[name]:elementAttributes[name]=attributes[name]}return formatType.className&&(elementAttributes.class?elementAttributes.class=`${formatType.className} ${elementAttributes.class}`:elementAttributes.class=formatType.className),isEditableTree&&!1===formatType.contentEditable&&(elementAttributes.contenteditable="false"),{type:tagName||formatType.tagName,object:formatType.object,attributes:restoreOnAttributes(elementAttributes,isEditableTree)}}function isEqualUntil(a,b,index){do{if(a[index]!==b[index])return!1}while(index--);return!0}function toTree({value,preserveWhiteSpace,createEmpty,append,getLastChild,getParent,isText,getText,remove,appendText,onStartIndex,onEndIndex,isEditableTree,placeholder}){const{formats,replacements,text,start,end}=value,formatsLength=formats.length+1,tree=createEmpty(),activeFormats=getActiveFormats(value),deepestActiveFormat=activeFormats[activeFormats.length-1];let lastCharacterFormats,lastCharacter;append(tree,"");for(let i=0;i<formatsLength;i++){const character=text.charAt(i),shouldInsertPadding=isEditableTree&&(!lastCharacter||"\n"===lastCharacter),characterFormats=formats[i];let pointer=getLastChild(tree);if(characterFormats&&characterFormats.forEach(((format,formatIndex)=>{if(pointer&&lastCharacterFormats&&isEqualUntil(characterFormats,lastCharacterFormats,formatIndex))return void(pointer=getLastChild(pointer));const{type,tagName,attributes,unregisteredAttributes}=format,boundaryClass=isEditableTree&&format===deepestActiveFormat,parent=getParent(pointer),newNode=append(parent,fromFormat({type,tagName,attributes,unregisteredAttributes,boundaryClass,isEditableTree}));isText(pointer)&&0===getText(pointer).length&&remove(pointer),pointer=append(newNode,"")})),0===i&&(onStartIndex&&0===start&&onStartIndex(tree,pointer),onEndIndex&&0===end&&onEndIndex(tree,pointer)),character===OBJECT_REPLACEMENT_CHARACTER){const replacement=replacements[i];if(!replacement)continue;const{type,attributes,innerHTML}=replacement,formatType=get_format_type_getFormatType(type);isEditableTree||"script"!==type?!1===formatType?.contentEditable?(pointer=append(getParent(pointer),fromFormat({...replacement,isEditableTree,boundaryClass:start===i&&end===i+1})),innerHTML&&append(pointer,{html:innerHTML})):pointer=append(getParent(pointer),fromFormat({...replacement,object:!0,isEditableTree})):(pointer=append(getParent(pointer),fromFormat({type:"script",isEditableTree})),append(pointer,{html:decodeURIComponent(attributes["data-rich-text-script"])})),pointer=append(getParent(pointer),"")}else preserveWhiteSpace||"\n"!==character?isText(pointer)?appendText(pointer,character):pointer=append(getParent(pointer),character):(pointer=append(getParent(pointer),{type:"br",attributes:isEditableTree?{"data-rich-text-line-break":"true"}:void 0,object:!0}),pointer=append(getParent(pointer),""));onStartIndex&&start===i+1&&onStartIndex(tree,pointer),onEndIndex&&end===i+1&&onEndIndex(tree,pointer),shouldInsertPadding&&i===text.length&&(append(getParent(pointer),ZWNBSP),placeholder&&0===text.length&&append(getParent(pointer),{type:"span",attributes:{"data-rich-text-placeholder":placeholder,style:"pointer-events:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;"}})),lastCharacterFormats=characterFormats,lastCharacter=character}return tree}function toHTMLString({value,preserveWhiteSpace}){return createChildrenHTML(toTree({value,preserveWhiteSpace,createEmpty,append,getLastChild,getParent,isText,getText,remove,appendText}).children)}function createEmpty(){return{}}function getLastChild({children}){return children&&children[children.length-1]}function append(parent,object){return"string"==typeof object&&(object={text:object}),object.parent=parent,parent.children=parent.children||[],parent.children.push(object),object}function appendText(object,text){object.text+=text}function getParent({parent}){return parent}function isText({text}){return"string"==typeof text}function getText({text}){return text}function remove(object){const index=object.parent.children.indexOf(object);return-1!==index&&object.parent.children.splice(index,1),object}function createChildrenHTML(children=[]){return children.map((child=>void 0!==child.html?child.html:void 0===child.text?function createElementHTML({type,attributes,object,children}){let attributeString="";for(const key in attributes)(0,escape_html_build_module.i8)(key)&&(attributeString+=` ${key}="${(0,escape_html_build_module.Gj)(attributes[key])}"`);return object?`<${type}${attributeString}>`:`<${type}${attributeString}>${createChildrenHTML(children)}</${type}>`}(child):(0,escape_html_build_module.jG)(child.text))).join("")}function getTextContent({text}){return text.replace(OBJECT_REPLACEMENT_CHARACTER,"")}function toFormat({tagName,attributes}){let formatType;if(attributes&&attributes.class&&(formatType=(0,build_module_select.L)(store).getFormatTypeForClassName(attributes.class),formatType&&(attributes.class=` ${attributes.class} `.replace(` ${formatType.className} `," ").trim(),attributes.class||delete attributes.class)),formatType||(formatType=(0,build_module_select.L)(store).getFormatTypeForBareElement(tagName)),!formatType)return attributes?{type:tagName,attributes}:{type:tagName};if(formatType.__experimentalCreatePrepareEditableTree&&!formatType.__experimentalCreateOnChangeEditableValue)return null;if(!attributes)return{formatType,type:formatType.name,tagName};const registeredAttributes={},unregisteredAttributes={},_attributes={...attributes};for(const key in formatType.attributes){const name=formatType.attributes[key];registeredAttributes[key]=_attributes[name],delete _attributes[name],void 0===registeredAttributes[key]&&delete registeredAttributes[key]}for(const name in _attributes)unregisteredAttributes[name]=attributes[name];return!1===formatType.contentEditable&&delete unregisteredAttributes.contenteditable,{formatType,type:formatType.name,tagName,attributes:registeredAttributes,unregisteredAttributes}}class RichTextData{#value;static empty(){return new RichTextData}static fromPlainText(text){return new RichTextData(create({text}))}static fromHTMLString(html){return new RichTextData(create({html}))}static fromHTMLElement(htmlElement,options={}){const{preserveWhiteSpace=!1}=options,element=preserveWhiteSpace?htmlElement:collapseWhiteSpace(htmlElement),richTextData=new RichTextData(create({element}));return Object.defineProperty(richTextData,"originalHTML",{value:htmlElement.innerHTML}),richTextData}constructor(init={formats:[],replacements:[],text:""}){this.#value=init}toPlainText(){return getTextContent(this.#value)}toHTMLString({preserveWhiteSpace}={}){return this.originalHTML||toHTMLString({value:this.#value,preserveWhiteSpace})}valueOf(){return this.toHTMLString()}toString(){return this.toHTMLString()}toJSON(){return this.toHTMLString()}get length(){return this.text.length}get formats(){return this.#value.formats}get replacements(){return this.#value.replacements}get text(){return this.#value.text}}for(const name of Object.getOwnPropertyNames(String.prototype))RichTextData.prototype.hasOwnProperty(name)||Object.defineProperty(RichTextData.prototype,name,{value(...args){return this.toHTMLString()[name](...args)}});function create({element,text,html,range,__unstableIsEditableTree:isEditableTree}={}){return html instanceof RichTextData?{text:html.text,formats:html.formats,replacements:html.replacements}:"string"==typeof text&&text.length>0?{formats:Array(text.length),replacements:Array(text.length),text}:("string"==typeof html&&html.length>0&&(element=createElement(document,html)),"object"!=typeof element?{formats:[],replacements:[],text:""}:createFromElement({element,range,isEditableTree}))}function accumulateSelection(accumulator,node,range,value){if(!range)return;const{parentNode}=node,{startContainer,startOffset,endContainer,endOffset}=range,currentLength=accumulator.text.length;void 0!==value.start?accumulator.start=currentLength+value.start:node===startContainer&&node.nodeType===node.TEXT_NODE?accumulator.start=currentLength+startOffset:parentNode===startContainer&&node===startContainer.childNodes[startOffset]?accumulator.start=currentLength:parentNode===startContainer&&node===startContainer.childNodes[startOffset-1]?accumulator.start=currentLength+value.text.length:node===startContainer&&(accumulator.start=currentLength),void 0!==value.end?accumulator.end=currentLength+value.end:node===endContainer&&node.nodeType===node.TEXT_NODE?accumulator.end=currentLength+endOffset:parentNode===endContainer&&node===endContainer.childNodes[endOffset-1]?accumulator.end=currentLength+value.text.length:parentNode===endContainer&&node===endContainer.childNodes[endOffset]?accumulator.end=currentLength:node===endContainer&&(accumulator.end=currentLength+endOffset)}function filterRange(node,range,filter){if(!range)return;const{startContainer,endContainer}=range;let{startOffset,endOffset}=range;return node===startContainer&&(startOffset=filter(node.nodeValue.slice(0,startOffset)).length),node===endContainer&&(endOffset=filter(node.nodeValue.slice(0,endOffset)).length),{startContainer,startOffset,endContainer,endOffset}}function collapseWhiteSpace(element,isRoot=!0){const clone=element.cloneNode(!0);return clone.normalize(),Array.from(clone.childNodes).forEach(((node,i,nodes)=>{if(node.nodeType===node.TEXT_NODE){let newNodeValue=node.nodeValue;/[\n\t\r\f]/.test(newNodeValue)&&(newNodeValue=newNodeValue.replace(/[\n\t\r\f]+/g," ")),-1!==newNodeValue.indexOf("  ")&&(newNodeValue=newNodeValue.replace(/ {2,}/g," ")),0===i&&newNodeValue.startsWith(" ")?newNodeValue=newNodeValue.slice(1):isRoot&&i===nodes.length-1&&newNodeValue.endsWith(" ")&&(newNodeValue=newNodeValue.slice(0,-1)),node.nodeValue=newNodeValue}else node.nodeType===node.ELEMENT_NODE&&collapseWhiteSpace(node,!1)})),clone}const CARRIAGE_RETURN="\r";function removeReservedCharacters(string){return string.replace(new RegExp(`[${ZWNBSP}${OBJECT_REPLACEMENT_CHARACTER}${CARRIAGE_RETURN}]`,"gu"),"")}function createFromElement({element,range,isEditableTree}){const accumulator={formats:[],replacements:[],text:""};if(!element)return accumulator;if(!element.hasChildNodes())return accumulateSelection(accumulator,element,range,{formats:[],replacements:[],text:""}),accumulator;const length=element.childNodes.length;for(let index=0;index<length;index++){const node=element.childNodes[index],tagName=node.nodeName.toLowerCase();if(node.nodeType===node.TEXT_NODE){const text=removeReservedCharacters(node.nodeValue);accumulateSelection(accumulator,node,range=filterRange(node,range,removeReservedCharacters),{text}),accumulator.formats.length+=text.length,accumulator.replacements.length+=text.length,accumulator.text+=text;continue}if(node.nodeType!==node.ELEMENT_NODE)continue;if(isEditableTree&&"br"===tagName&&!node.getAttribute("data-rich-text-line-break")){accumulateSelection(accumulator,node,range,{formats:[],replacements:[],text:""});continue}if("script"===tagName){const value={formats:[,],replacements:[{type:tagName,attributes:{"data-rich-text-script":node.getAttribute("data-rich-text-script")||encodeURIComponent(node.innerHTML)}}],text:OBJECT_REPLACEMENT_CHARACTER};accumulateSelection(accumulator,node,range,value),mergePair(accumulator,value);continue}if("br"===tagName){accumulateSelection(accumulator,node,range,{formats:[],replacements:[],text:""}),mergePair(accumulator,create({text:"\n"}));continue}const format=toFormat({tagName,attributes:getAttributes({element:node})});if(!1===format?.formatType?.contentEditable){delete format.formatType,accumulateSelection(accumulator,node,range,{formats:[],replacements:[],text:""}),mergePair(accumulator,{formats:[,],replacements:[{...format,innerHTML:node.innerHTML}],text:OBJECT_REPLACEMENT_CHARACTER});continue}format&&delete format.formatType;const value=createFromElement({element:node,range,isEditableTree});if(accumulateSelection(accumulator,node,range,value),!format||node.getAttribute("data-rich-text-placeholder"))mergePair(accumulator,value);else if(0===value.text.length)format.attributes&&mergePair(accumulator,{formats:[,],replacements:[format],text:OBJECT_REPLACEMENT_CHARACTER});else{function mergeFormats(formats){if(mergeFormats.formats===formats)return mergeFormats.newFormats;const newFormats=formats?[format,...formats]:[format];return mergeFormats.formats=formats,mergeFormats.newFormats=newFormats,newFormats}mergeFormats.newFormats=[format],mergePair(accumulator,{...value,formats:Array.from(value.formats,mergeFormats)})}}return accumulator}function getAttributes({element}){if(!element.hasAttributes())return;const length=element.attributes.length;let accumulator;for(let i=0;i<length;i++){const{name,value}=element.attributes[i];if(0===name.indexOf("data-rich-text-"))continue;accumulator=accumulator||{},accumulator[/^on/i.test(name)?"data-disable-rich-text-"+name:name]=value}return accumulator}function mergePair(a,b){return a.formats=a.formats.concat(b.formats),a.replacements=a.replacements.concat(b.replacements),a.text+=b.text,a}function concat(...values){return normaliseFormats(values.reduce(mergePair,create()))}function getActiveFormat(value,formatType){return getActiveFormats(value).find((({type})=>type===formatType))}function getActiveObject({start,end,replacements,text}){if(start+1===end&&text[start]===OBJECT_REPLACEMENT_CHARACTER)return replacements[start]}function isCollapsed({start,end}){if(void 0!==start&&void 0!==end)return start===end}function isEmpty({text}){return 0===text.length}function join(values,separator=""){return"string"==typeof separator&&(separator=create({text:separator})),normaliseFormats(values.reduce(((accumlator,{formats,replacements,text})=>({formats:accumlator.formats.concat(separator.formats,formats),replacements:accumlator.replacements.concat(separator.replacements,replacements),text:accumlator.text+separator.text+text}))))}var dispatch=__webpack_require__("./packages/data/build-module/dispatch.js");function registerFormatType(name,settings){if("string"==typeof(settings={name,...settings}).name)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(settings.name))if((0,build_module_select.L)(store).getFormatType(settings.name))window.console.error('Format "'+settings.name+'" is already registered.');else if("string"==typeof settings.tagName&&""!==settings.tagName)if("string"==typeof settings.className&&""!==settings.className||null===settings.className)if(/^[_a-zA-Z]+[a-zA-Z0-9_-]*$/.test(settings.className)){if(null===settings.className){const formatTypeForBareElement=(0,build_module_select.L)(store).getFormatTypeForBareElement(settings.tagName);if(formatTypeForBareElement&&"core/unknown"!==formatTypeForBareElement.name)return void window.console.error(`Format "${formatTypeForBareElement.name}" is already registered to handle bare tag name "${settings.tagName}".`)}else{const formatTypeForClassName=(0,build_module_select.L)(store).getFormatTypeForClassName(settings.className);if(formatTypeForClassName)return void window.console.error(`Format "${formatTypeForClassName.name}" is already registered to handle class name "${settings.className}".`)}if("title"in settings&&""!==settings.title)if("keywords"in settings&&settings.keywords.length>3)window.console.error('The format "'+settings.name+'" can have a maximum of 3 keywords.');else{if("string"==typeof settings.title)return(0,dispatch.J)(store).addFormatTypes(settings),settings;window.console.error("Format titles must be strings.")}else window.console.error('The format "'+settings.name+'" must have a title.')}else window.console.error("A class name must begin with a letter, followed by any number of hyphens, underscores, letters, or numbers.");else window.console.error("Format class names must be a string, or null to handle bare elements.");else window.console.error("Format tag names must be a string.");else window.console.error("Format names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-format");else window.console.error("Format names must be strings.")}function removeFormat(value,formatType,startIndex=value.start,endIndex=value.end){const{formats,activeFormats}=value,newFormats=formats.slice();if(startIndex===endIndex){const format=newFormats[startIndex]?.find((({type})=>type===formatType));if(format){for(;newFormats[startIndex]?.find((newFormat=>newFormat===format));)filterFormats(newFormats,startIndex,formatType),startIndex--;for(endIndex++;newFormats[endIndex]?.find((newFormat=>newFormat===format));)filterFormats(newFormats,endIndex,formatType),endIndex++}}else for(let i=startIndex;i<endIndex;i++)newFormats[i]&&filterFormats(newFormats,i,formatType);return normaliseFormats({...value,formats:newFormats,activeFormats:activeFormats?.filter((({type})=>type!==formatType))||[]})}function filterFormats(formats,index,formatType){const newFormats=formats[index].filter((({type})=>type!==formatType));newFormats.length?formats[index]=newFormats:delete formats[index]}function insert(value,valueToInsert,startIndex=value.start,endIndex=value.end){const{formats,replacements,text}=value;"string"==typeof valueToInsert&&(valueToInsert=create({text:valueToInsert}));const index=startIndex+valueToInsert.text.length;return normaliseFormats({formats:formats.slice(0,startIndex).concat(valueToInsert.formats,formats.slice(endIndex)),replacements:replacements.slice(0,startIndex).concat(valueToInsert.replacements,replacements.slice(endIndex)),text:text.slice(0,startIndex)+valueToInsert.text+text.slice(endIndex),start:index,end:index})}function remove_remove(value,startIndex,endIndex){return insert(value,create(),startIndex,endIndex)}function replace_replace({formats,replacements,text,start,end},pattern,replacement){return text=text.replace(pattern,((match,...rest)=>{const offset=rest[rest.length-2];let newFormats,newReplacements,newText=replacement;return"function"==typeof newText&&(newText=replacement(match,...rest)),"object"==typeof newText?(newFormats=newText.formats,newReplacements=newText.replacements,newText=newText.text):(newFormats=Array(newText.length),newReplacements=Array(newText.length),formats[offset]&&(newFormats=newFormats.fill(formats[offset]))),formats=formats.slice(0,offset).concat(newFormats,formats.slice(offset+match.length)),replacements=replacements.slice(0,offset).concat(newReplacements,replacements.slice(offset+match.length)),start&&(start=end=offset+newText.length),newText})),normaliseFormats({formats,replacements,text,start,end})}function insertObject(value,formatToInsert,startIndex,endIndex){return insert(value,{formats:[,],replacements:[formatToInsert],text:OBJECT_REPLACEMENT_CHARACTER},startIndex,endIndex)}function slice(value,startIndex=value.start,endIndex=value.end){const{formats,replacements,text}=value;return void 0===startIndex||void 0===endIndex?{...value}:{formats:formats.slice(startIndex,endIndex),replacements:replacements.slice(startIndex,endIndex),text:text.slice(startIndex,endIndex)}}function split({formats,replacements,text,start,end},string){if("string"!=typeof string)return function splitAtSelection({formats,replacements,text,start,end},startIndex=start,endIndex=end){if(void 0===start||void 0===end)return;const before={formats:formats.slice(0,startIndex),replacements:replacements.slice(0,startIndex),text:text.slice(0,startIndex)},after={formats:formats.slice(endIndex),replacements:replacements.slice(endIndex),text:text.slice(endIndex),start:0,end:0};return[before,after]}(...arguments);let nextStart=0;return text.split(string).map((substring=>{const startIndex=nextStart,value={formats:formats.slice(startIndex,startIndex+substring.length),replacements:replacements.slice(startIndex,startIndex+substring.length),text:substring};return nextStart+=string.length+substring.length,void 0!==start&&void 0!==end&&(start>=startIndex&&start<nextStart?value.start=start-startIndex:start<startIndex&&end>startIndex&&(value.start=0),end>=startIndex&&end<nextStart?value.end=end-startIndex:start<nextStart&&end>nextStart&&(value.end=substring.length)),value}))}var a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js");function toggleFormat(value,format){return getActiveFormat(value,format.type)?(format.title&&(0,a11y_build_module.L)((0,i18n_build_module.nv)((0,i18n_build_module.__)("%s removed."),format.title),"assertive"),removeFormat(value,format.type)):(format.title&&(0,a11y_build_module.L)((0,i18n_build_module.nv)((0,i18n_build_module.__)("%s applied."),format.title),"assertive"),applyFormat(value,format))}var use_previous=__webpack_require__("./packages/compose/build-module/hooks/use-previous/index.js"),react=__webpack_require__("./node_modules/react/index.js");function getAnchor(editableContentElement,tagName,className){if(!editableContentElement)return;const{ownerDocument}=editableContentElement,{defaultView}=ownerDocument,selection=defaultView.getSelection();if(!selection)return;if(!selection.rangeCount)return;const range=selection.getRangeAt(0);if(!range||!range.startContainer)return;const formatElement=function getFormatElement(range,editableContentElement,tagName,className){let element=range.startContainer;if(element.nodeType===element.TEXT_NODE&&range.startOffset===element.length&&element.nextSibling)for(element=element.nextSibling;element.firstChild;)element=element.firstChild;if(element.nodeType!==element.ELEMENT_NODE&&(element=element.parentElement),!element)return;if(element===editableContentElement)return;if(!editableContentElement.contains(element))return;const selector=tagName+(className?"."+className:"");for(;element!==editableContentElement;){if(element.matches(selector))return element;element=element.parentElement}}(range,editableContentElement,tagName,className);return formatElement||function createVirtualAnchorElement(range,editableContentElement){return{contextElement:editableContentElement,getBoundingClientRect:()=>editableContentElement.contains(range.startContainer)?range.getBoundingClientRect():editableContentElement.getBoundingClientRect()}}(range,editableContentElement)}function useAnchor({editableContentElement,settings={}}){const{tagName,className,isActive}=settings,[anchor,setAnchor]=(0,react.useState)((()=>getAnchor(editableContentElement,tagName,className))),wasActive=(0,use_previous.A)(isActive);return(0,react.useLayoutEffect)((()=>{if(!editableContentElement)return;function callback(){setAnchor(getAnchor(editableContentElement,tagName,className))}function attach(){ownerDocument.addEventListener("selectionchange",callback)}function detach(){ownerDocument.removeEventListener("selectionchange",callback)}const{ownerDocument}=editableContentElement;return(editableContentElement===ownerDocument.activeElement||!wasActive&&isActive||wasActive&&!isActive)&&(setAnchor(getAnchor(editableContentElement,tagName,className)),attach()),editableContentElement.addEventListener("focusin",attach),editableContentElement.addEventListener("focusout",detach),()=>{detach(),editableContentElement.removeEventListener("focusin",attach),editableContentElement.removeEventListener("focusout",detach)}}),[editableContentElement,tagName,className,isActive,wasActive]),anchor}var use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),use_ref_effect=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js");function isRangeEqual(a,b){return a===b||a&&b&&a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}function createPathToNode(node,rootNode,path){const parentNode=node.parentNode;let i=0;for(;node=node.previousSibling;)i++;return path=[i,...path],parentNode!==rootNode&&(path=createPathToNode(parentNode,rootNode,path)),path}function getNodeByPath(node,path){for(path=[...path];node&&path.length>1;)node=node.childNodes[path.shift()];return{node,offset:path[0]}}function to_dom_append(element,child){if(void 0!==child.html)return element.innerHTML+=child.html;"string"==typeof child&&(child=element.ownerDocument.createTextNode(child));const{type,attributes}=child;if(type){child=element.ownerDocument.createElement(type);for(const key in attributes)child.setAttribute(key,attributes[key])}return element.appendChild(child)}function to_dom_appendText(node,text){node.appendData(text)}function to_dom_getLastChild({lastChild}){return lastChild}function to_dom_getParent({parentNode}){return parentNode}function to_dom_isText(node){return node.nodeType===node.TEXT_NODE}function to_dom_getText({nodeValue}){return nodeValue}function to_dom_remove(node){return node.parentNode.removeChild(node)}function apply({value,current,prepareEditableTree,__unstableDomOnly,placeholder}){const{body,selection}=function toDom({value,prepareEditableTree,isEditableTree=!0,placeholder,doc=document}){let startPath=[],endPath=[];return prepareEditableTree&&(value={...value,formats:prepareEditableTree(value)}),{body:toTree({value,createEmpty:()=>createElement(doc,""),append:to_dom_append,getLastChild:to_dom_getLastChild,getParent:to_dom_getParent,isText:to_dom_isText,getText:to_dom_getText,remove:to_dom_remove,appendText:to_dom_appendText,onStartIndex(body,pointer){startPath=createPathToNode(pointer,body,[pointer.nodeValue.length])},onEndIndex(body,pointer){endPath=createPathToNode(pointer,body,[pointer.nodeValue.length])},isEditableTree,placeholder}),selection:{startPath,endPath}}}({value,prepareEditableTree,placeholder,doc:current.ownerDocument});applyValue(body,current),void 0===value.start||__unstableDomOnly||function applySelection({startPath,endPath},current){const{node:startContainer,offset:startOffset}=getNodeByPath(current,startPath),{node:endContainer,offset:endOffset}=getNodeByPath(current,endPath),{ownerDocument}=current,{defaultView}=ownerDocument,selection=defaultView.getSelection(),range=ownerDocument.createRange();range.setStart(startContainer,startOffset),range.setEnd(endContainer,endOffset);const{activeElement}=ownerDocument;if(selection.rangeCount>0){if(isRangeEqual(range,selection.getRangeAt(0)))return;selection.removeAllRanges()}selection.addRange(range),activeElement!==ownerDocument.activeElement&&activeElement instanceof defaultView.HTMLElement&&activeElement.focus()}(selection,current)}function applyValue(future,current){let futureChild,i=0;for(;futureChild=future.firstChild;){const currentChild=current.childNodes[i];if(currentChild)if(currentChild.isEqualNode(futureChild))future.removeChild(futureChild);else if(currentChild.nodeName!==futureChild.nodeName||currentChild.nodeType===currentChild.TEXT_NODE&&currentChild.data!==futureChild.data)current.replaceChild(futureChild,currentChild);else{const currentAttributes=currentChild.attributes,futureAttributes=futureChild.attributes;if(currentAttributes){let ii=currentAttributes.length;for(;ii--;){const{name}=currentAttributes[ii];futureChild.getAttribute(name)||currentChild.removeAttribute(name)}}if(futureAttributes)for(let ii=0;ii<futureAttributes.length;ii++){const{name,value}=futureAttributes[ii];currentChild.getAttribute(name)!==value&&currentChild.setAttribute(name,value)}applyValue(futureChild,currentChild),future.removeChild(futureChild)}else current.appendChild(futureChild);i++}for(;current.childNodes[i];)current.removeChild(current.childNodes[i])}const whiteSpace="pre-wrap",minWidth="1px";function useBoundaryStyle({record}){const ref=(0,react.useRef)(),{activeFormats=[],replacements,start}=record.current,activeReplacement=replacements[start];return(0,react.useEffect)((()=>{if(!(activeFormats&&activeFormats.length||activeReplacement))return;const element=ref.current.querySelector("*[data-rich-text-format-boundary]");if(!element)return;const{ownerDocument}=element,{defaultView}=ownerDocument,style=`.rich-text:focus *[data-rich-text-format-boundary] {${`background-color: ${defaultView.getComputedStyle(element).color.replace(")",", 0.2)").replace("rgb","rgba")}`}}`;let globalStyle=ownerDocument.getElementById("rich-text-boundary-style");globalStyle||(globalStyle=ownerDocument.createElement("style"),globalStyle.id="rich-text-boundary-style",ownerDocument.head.appendChild(globalStyle)),globalStyle.innerHTML!==style&&(globalStyle.innerHTML=style)}),[activeFormats,activeReplacement]),ref}var keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js");const EMPTY_ACTIVE_FORMATS=[];const INSERTION_INPUT_TYPES_TO_IGNORE=new Set(["insertParagraph","insertOrderedList","insertUnorderedList","insertHorizontalRule","insertLink"]),input_and_selection_EMPTY_ACTIVE_FORMATS=[];const allEventListeners=[props=>element=>{function onCopy(event){const{record}=props.current,{ownerDocument}=element;if(isCollapsed(record.current)||!element.contains(ownerDocument.activeElement))return;const selectedRecord=slice(record.current),plainText=getTextContent(selectedRecord),html=toHTMLString({value:selectedRecord});event.clipboardData.setData("text/plain",plainText),event.clipboardData.setData("text/html",html),event.clipboardData.setData("rich-text","true"),event.preventDefault(),"cut"===event.type&&ownerDocument.execCommand("delete")}const{defaultView}=element.ownerDocument;return defaultView.addEventListener("copy",onCopy),defaultView.addEventListener("cut",onCopy),()=>{defaultView.removeEventListener("copy",onCopy),defaultView.removeEventListener("cut",onCopy)}},()=>element=>{function onClick(event){const{target}=event;if(target===element||target.textContent&&target.isContentEditable)return;const{ownerDocument}=target,{defaultView}=ownerDocument,selection=defaultView.getSelection();if(selection.containsNode(target))return;const range=ownerDocument.createRange(),nodeToSelect=target.isContentEditable?target:target.closest("[contenteditable]");range.selectNode(nodeToSelect),selection.removeAllRanges(),selection.addRange(range),event.preventDefault()}function onFocusIn(event){event.relatedTarget&&!element.contains(event.relatedTarget)&&"A"===event.relatedTarget.tagName&&onClick(event)}return element.addEventListener("click",onClick),element.addEventListener("focusin",onFocusIn),()=>{element.removeEventListener("click",onClick),element.removeEventListener("focusin",onFocusIn)}},props=>element=>{function onKeyDown(event){const{keyCode,shiftKey,altKey,metaKey,ctrlKey}=event;if(shiftKey||altKey||metaKey||ctrlKey||keyCode!==keycodes_build_module.M3&&keyCode!==keycodes_build_module.NS)return;const{record,applyRecord,forceRender}=props.current,{text,formats,start,end,activeFormats:currentActiveFormats=[]}=record.current,collapsed=isCollapsed(record.current),{ownerDocument}=element,{defaultView}=ownerDocument,{direction}=defaultView.getComputedStyle(element),reverseKey="rtl"===direction?keycodes_build_module.NS:keycodes_build_module.M3,isReverse=event.keyCode===reverseKey;if(collapsed&&0===currentActiveFormats.length){if(0===start&&isReverse)return;if(end===text.length&&!isReverse)return}if(!collapsed)return;const formatsBefore=formats[start-1]||EMPTY_ACTIVE_FORMATS,formatsAfter=formats[start]||EMPTY_ACTIVE_FORMATS,destination=isReverse?formatsBefore:formatsAfter,isIncreasing=currentActiveFormats.every(((format,index)=>format===destination[index]));let newActiveFormatsLength=currentActiveFormats.length;if(isIncreasing?newActiveFormatsLength<destination.length&&newActiveFormatsLength++:newActiveFormatsLength--,newActiveFormatsLength===currentActiveFormats.length)return void(record.current._newActiveFormats=destination);event.preventDefault();const newActiveFormats=(isIncreasing?destination:isReverse?formatsAfter:formatsBefore).slice(0,newActiveFormatsLength),newValue={...record.current,activeFormats:newActiveFormats};record.current=newValue,applyRecord(newValue),forceRender()}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}},props=>element=>{function onKeyDown(event){const{keyCode}=event,{createRecord,handleChange}=props.current;if(event.defaultPrevented)return;if(keyCode!==keycodes_build_module.SJ&&keyCode!==keycodes_build_module.G_)return;const currentValue=createRecord(),{start,end,text}=currentValue;0===start&&0!==end&&end===text.length&&(handleChange(remove_remove(currentValue)),event.preventDefault())}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}},props=>element=>{const{ownerDocument}=element,{defaultView}=ownerDocument;let isComposing=!1;function onInput(event){if(isComposing)return;let inputType;event&&(inputType=event.inputType);const{record,applyRecord,createRecord,handleChange}=props.current;if(inputType&&(0===inputType.indexOf("format")||INSERTION_INPUT_TYPES_TO_IGNORE.has(inputType)))return void applyRecord(record.current);const currentValue=createRecord(),{start,activeFormats:oldActiveFormats=[]}=record.current,change=function updateFormats({value,start,end,formats}){const min=Math.min(start,end),max=Math.max(start,end),formatsBefore=value.formats[min-1]||[],formatsAfter=value.formats[max]||[];for(value.activeFormats=formats.map(((format,index)=>{if(formatsBefore[index]){if(isFormatEqual(format,formatsBefore[index]))return formatsBefore[index]}else if(formatsAfter[index]&&isFormatEqual(format,formatsAfter[index]))return formatsAfter[index];return format}));--end>=start;)value.activeFormats.length>0?value.formats[end]=value.activeFormats:delete value.formats[end];return value}({value:currentValue,start,end:currentValue.start,formats:oldActiveFormats});handleChange(change)}function handleSelectionChange(){const{record,applyRecord,createRecord,onSelectionChange}=props.current;if("true"!==element.contentEditable)return;if(ownerDocument.activeElement!==element)return void ownerDocument.removeEventListener("selectionchange",handleSelectionChange);if(isComposing)return;const{start,end,text}=createRecord(),oldRecord=record.current;if(text!==oldRecord.text)return void onInput();if(start===oldRecord.start&&end===oldRecord.end)return void(0===oldRecord.text.length&&0===start&&function fixPlaceholderSelection(defaultView){const selection=defaultView.getSelection(),{anchorNode,anchorOffset}=selection;if(anchorNode.nodeType!==anchorNode.ELEMENT_NODE)return;const targetNode=anchorNode.childNodes[anchorOffset];targetNode&&targetNode.nodeType===targetNode.ELEMENT_NODE&&targetNode.hasAttribute("data-rich-text-placeholder")&&selection.collapseToStart()}(defaultView));const newValue={...oldRecord,start,end,activeFormats:oldRecord._newActiveFormats,_newActiveFormats:void 0},newActiveFormats=getActiveFormats(newValue,input_and_selection_EMPTY_ACTIVE_FORMATS);newValue.activeFormats=newActiveFormats,record.current=newValue,applyRecord(newValue,{domOnly:!0}),onSelectionChange(start,end)}function onCompositionStart(){isComposing=!0,ownerDocument.removeEventListener("selectionchange",handleSelectionChange),element.querySelector("[data-rich-text-placeholder]")?.remove()}function onCompositionEnd(){isComposing=!1,onInput({inputType:"insertText"}),ownerDocument.addEventListener("selectionchange",handleSelectionChange)}function onFocus(){const{record,isSelected,onSelectionChange,applyRecord}=props.current;if(!element.parentElement.closest('[contenteditable="true"]')){if(isSelected)applyRecord(record.current,{domOnly:!0});else{const index=void 0;record.current={...record.current,start:index,end:index,activeFormats:input_and_selection_EMPTY_ACTIVE_FORMATS}}onSelectionChange(record.current.start,record.current.end),window.queueMicrotask(handleSelectionChange),ownerDocument.addEventListener("selectionchange",handleSelectionChange)}}return element.addEventListener("input",onInput),element.addEventListener("compositionstart",onCompositionStart),element.addEventListener("compositionend",onCompositionEnd),element.addEventListener("focus",onFocus),()=>{element.removeEventListener("input",onInput),element.removeEventListener("compositionstart",onCompositionStart),element.removeEventListener("compositionend",onCompositionEnd),element.removeEventListener("focus",onFocus)}},()=>element=>{const{ownerDocument}=element,{defaultView}=ownerDocument,selection=defaultView?.getSelection();let range;function getRange(){return selection.rangeCount?selection.getRangeAt(0):null}function onDown(event){const type="keydown"===event.type?"keyup":"pointerup";function onCancel(){ownerDocument.removeEventListener(type,onUp),ownerDocument.removeEventListener("selectionchange",onCancel),ownerDocument.removeEventListener("input",onCancel)}function onUp(){onCancel(),isRangeEqual(range,getRange())||ownerDocument.dispatchEvent(new Event("selectionchange"))}ownerDocument.addEventListener(type,onUp),ownerDocument.addEventListener("selectionchange",onCancel),ownerDocument.addEventListener("input",onCancel),range=getRange()}return element.addEventListener("pointerdown",onDown),element.addEventListener("keydown",onDown),()=>{element.removeEventListener("pointerdown",onDown),element.removeEventListener("keydown",onDown)}}];function useEventListeners(props){const propsRef=(0,react.useRef)(props);propsRef.current=props;const refEffects=(0,react.useMemo)((()=>allEventListeners.map((refEffect=>refEffect(propsRef)))),[propsRef]);return(0,use_ref_effect.A)((element=>{const cleanups=refEffects.map((effect=>effect(element)));return()=>{cleanups.forEach((cleanup=>cleanup()))}}),[refEffects])}function useRichText({value="",selectionStart,selectionEnd,placeholder,onSelectionChange,preserveWhiteSpace,onChange,__unstableDisableFormats:disableFormats,__unstableIsSelected:isSelected,__unstableDependencies=[],__unstableAfterParse,__unstableBeforeSerialize,__unstableAddInvisibleFormats}){const registry=(0,use_registry.A)(),[,forceRender]=(0,react.useReducer)((()=>({}))),ref=(0,react.useRef)();function applyRecord(newRecord,{domOnly}={}){apply({value:newRecord,current:ref.current,prepareEditableTree:__unstableAddInvisibleFormats,__unstableDomOnly:domOnly,placeholder})}const _valueRef=(0,react.useRef)(value),recordRef=(0,react.useRef)();function setRecordFromProps(){_valueRef.current=value,recordRef.current=value,value instanceof RichTextData||(recordRef.current=value?RichTextData.fromHTMLString(value,{preserveWhiteSpace}):RichTextData.empty()),recordRef.current={text:recordRef.current.text,formats:recordRef.current.formats,replacements:recordRef.current.replacements},disableFormats&&(recordRef.current.formats=Array(value.length),recordRef.current.replacements=Array(value.length)),__unstableAfterParse&&(recordRef.current.formats=__unstableAfterParse(recordRef.current)),recordRef.current.start=selectionStart,recordRef.current.end=selectionEnd}const hadSelectionUpdateRef=(0,react.useRef)(!1);function handleChange(newRecord){if(recordRef.current=newRecord,applyRecord(newRecord),disableFormats)_valueRef.current=newRecord.text;else{const newFormats=__unstableBeforeSerialize?__unstableBeforeSerialize(newRecord):newRecord.formats;newRecord={...newRecord,formats:newFormats},_valueRef.current="string"==typeof value?toHTMLString({value:newRecord,preserveWhiteSpace}):new RichTextData(newRecord)}const{start,end,formats,text}=recordRef.current;registry.batch((()=>{onSelectionChange(start,end),onChange(_valueRef.current,{__unstableFormats:formats,__unstableText:text})})),forceRender()}function applyFromProps(){setRecordFromProps(),applyRecord(recordRef.current)}recordRef.current?selectionStart===recordRef.current.start&&selectionEnd===recordRef.current.end||(hadSelectionUpdateRef.current=isSelected,recordRef.current={...recordRef.current,start:selectionStart,end:selectionEnd,activeFormats:void 0}):(hadSelectionUpdateRef.current=isSelected,setRecordFromProps());const didMountRef=(0,react.useRef)(!1);(0,react.useLayoutEffect)((()=>{didMountRef.current&&value!==_valueRef.current&&(applyFromProps(),forceRender())}),[value]),(0,react.useLayoutEffect)((()=>{hadSelectionUpdateRef.current&&(ref.current.ownerDocument.activeElement!==ref.current&&ref.current.focus(),applyRecord(recordRef.current),hadSelectionUpdateRef.current=!1)}),[hadSelectionUpdateRef.current]);const mergedRefs=(0,use_merge_refs.A)([ref,(0,react.useCallback)((element=>{element&&(element.style.whiteSpace=whiteSpace,element.style.minWidth=minWidth)}),[]),useBoundaryStyle({record:recordRef}),useEventListeners({record:recordRef,handleChange,applyRecord,createRecord:function createRecord(){const{ownerDocument:{defaultView}}=ref.current,selection=defaultView.getSelection(),range=selection.rangeCount>0?selection.getRangeAt(0):null;return create({element:ref.current,range,__unstableIsEditableTree:!0})},isSelected,onSelectionChange,forceRender}),(0,use_ref_effect.A)((()=>{applyFromProps(),didMountRef.current=!0}),[placeholder,...__unstableDependencies])]);return{value:recordRef.current,getValue:()=>recordRef.current,onChange:handleChange,ref:mergedRefs}}}}]);