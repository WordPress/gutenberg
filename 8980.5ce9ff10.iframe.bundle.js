"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[8980],{"./packages/block-editor/src/components/inserter/block-patterns-tab/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AP:()=>myPatternsCategory,KG:()=>INSERTER_PATTERN_TYPES,XL:()=>INSERTER_SYNC_TYPES,fo:()=>allPatternsCategory,o:()=>isPatternFiltered});var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js");const INSERTER_PATTERN_TYPES={user:"user",theme:"theme",directory:"directory"},INSERTER_SYNC_TYPES={full:"fully",unsynced:"unsynced"},allPatternsCategory={name:"allPatterns",label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__._x)("All","patterns")},myPatternsCategory={name:"myPatterns",label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("My patterns")};function isPatternFiltered(pattern,sourceFilter,syncFilter){const isUserPattern=pattern.name.startsWith("core/block"),isDirectoryPattern="core"===pattern.source||pattern.source?.startsWith("pattern-directory");return!(sourceFilter!==INSERTER_PATTERN_TYPES.theme||!isUserPattern&&!isDirectoryPattern)||(!(sourceFilter!==INSERTER_PATTERN_TYPES.directory||!isUserPattern&&isDirectoryPattern)||(sourceFilter===INSERTER_PATTERN_TYPES.user&&pattern.type!==INSERTER_PATTERN_TYPES.user||(syncFilter===INSERTER_SYNC_TYPES.full&&""!==pattern.syncStatus||!(syncFilter!==INSERTER_SYNC_TYPES.unsynced||"unsynced"===pattern.syncStatus||!isUserPattern))))}},"./packages/block-editor/src/lock-unlock.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>unlock});var _wordpress_private_apis__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/private-apis/build-module/implementation.js");const{lock,unlock}=(0,_wordpress_private_apis__WEBPACK_IMPORTED_MODULE_0__.yf)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/block-editor")},"./packages/block-editor/src/store/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>STORE_NAME});const STORE_NAME="core/block-editor"},"./packages/block-editor/src/store/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>store_store,i:()=>storeConfig});var private_actions_namespaceObject={};__webpack_require__.r(private_actions_namespaceObject),__webpack_require__.d(private_actions_namespaceObject,{__experimentalUpdateSettings:()=>__experimentalUpdateSettings,clearBlockRemovalPrompt:()=>clearBlockRemovalPrompt,deleteStyleOverride:()=>deleteStyleOverride,ensureDefaultBlock:()=>ensureDefaultBlock,expandBlock:()=>expandBlock,hideBlockInterface:()=>hideBlockInterface,modifyContentLockBlock:()=>modifyContentLockBlock,privateRemoveBlocks:()=>privateRemoveBlocks,resetZoomLevel:()=>resetZoomLevel,setBlockRemovalRules:()=>setBlockRemovalRules,setInsertionPoint:()=>setInsertionPoint,setLastFocus:()=>setLastFocus,setOpenedBlockSettingsMenu:()=>setOpenedBlockSettingsMenu,setStyleOverride:()=>setStyleOverride,setZoomLevel:()=>setZoomLevel,showBlockInterface:()=>showBlockInterface,startDragging:()=>startDragging,stopDragging:()=>stopDragging,stopEditingAsBlocks:()=>stopEditingAsBlocks});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{__unstableDeleteSelection:()=>__unstableDeleteSelection,__unstableExpandSelection:()=>__unstableExpandSelection,__unstableMarkAutomaticChange:()=>__unstableMarkAutomaticChange,__unstableMarkLastChangeAsPersistent:()=>__unstableMarkLastChangeAsPersistent,__unstableMarkNextChangeAsNotPersistent:()=>__unstableMarkNextChangeAsNotPersistent,__unstableSaveReusableBlock:()=>__unstableSaveReusableBlock,__unstableSetEditorMode:()=>__unstableSetEditorMode,__unstableSetTemporarilyEditingAsBlocks:()=>__unstableSetTemporarilyEditingAsBlocks,__unstableSplitSelection:()=>__unstableSplitSelection,clearSelectedBlock:()=>clearSelectedBlock,duplicateBlocks:()=>duplicateBlocks,enterFormattedText:()=>enterFormattedText,exitFormattedText:()=>exitFormattedText,flashBlock:()=>flashBlock,hideInsertionPoint:()=>hideInsertionPoint,hoverBlock:()=>hoverBlock,insertAfterBlock:()=>insertAfterBlock,insertBeforeBlock:()=>insertBeforeBlock,insertBlock:()=>insertBlock,insertBlocks:()=>insertBlocks,insertDefaultBlock:()=>insertDefaultBlock,mergeBlocks:()=>mergeBlocks,moveBlockToPosition:()=>moveBlockToPosition,moveBlocksDown:()=>moveBlocksDown,moveBlocksToPosition:()=>moveBlocksToPosition,moveBlocksUp:()=>moveBlocksUp,multiSelect:()=>multiSelect,receiveBlocks:()=>receiveBlocks,registerInserterMediaCategory:()=>registerInserterMediaCategory,removeBlock:()=>removeBlock,removeBlocks:()=>removeBlocks,replaceBlock:()=>replaceBlock,replaceBlocks:()=>replaceBlocks,replaceInnerBlocks:()=>replaceInnerBlocks,resetBlocks:()=>resetBlocks,resetSelection:()=>resetSelection,selectBlock:()=>selectBlock,selectNextBlock:()=>selectNextBlock,selectPreviousBlock:()=>selectPreviousBlock,selectionChange:()=>selectionChange,setBlockEditingMode:()=>setBlockEditingMode,setBlockMovingClientId:()=>setBlockMovingClientId,setBlockVisibility:()=>setBlockVisibility,setHasControlledInnerBlocks:()=>setHasControlledInnerBlocks,setNavigationMode:()=>setNavigationMode,setTemplateValidity:()=>setTemplateValidity,showInsertionPoint:()=>showInsertionPoint,startDraggingBlocks:()=>startDraggingBlocks,startMultiSelect:()=>startMultiSelect,startTyping:()=>startTyping,stopDraggingBlocks:()=>stopDraggingBlocks,stopMultiSelect:()=>stopMultiSelect,stopTyping:()=>stopTyping,synchronizeTemplate:()=>synchronizeTemplate,toggleBlockHighlight:()=>toggleBlockHighlight,toggleBlockMode:()=>toggleBlockMode,toggleSelection:()=>toggleSelection,unsetBlockEditingMode:()=>unsetBlockEditingMode,updateBlock:()=>updateBlock,updateBlockAttributes:()=>updateBlockAttributes,updateBlockListSettings:()=>updateBlockListSettings,updateSettings:()=>updateSettings,validateBlocksToTemplate:()=>validateBlocksToTemplate});var redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),build_module=__webpack_require__("./packages/data/build-module/index.js"),es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6),pipe=__webpack_require__("./packages/compose/build-module/higher-order/pipe.js"),build_module_select=__webpack_require__("./packages/data/build-module/select.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js");const PREFERENCES_DEFAULTS={insertUsage:{}},SETTINGS_DEFAULTS={alignWide:!1,supportsLayout:!0,colors:[{name:(0,i18n_build_module.__)("Black"),slug:"black",color:"#000000"},{name:(0,i18n_build_module.__)("Cyan bluish gray"),slug:"cyan-bluish-gray",color:"#abb8c3"},{name:(0,i18n_build_module.__)("White"),slug:"white",color:"#ffffff"},{name:(0,i18n_build_module.__)("Pale pink"),slug:"pale-pink",color:"#f78da7"},{name:(0,i18n_build_module.__)("Vivid red"),slug:"vivid-red",color:"#cf2e2e"},{name:(0,i18n_build_module.__)("Luminous vivid orange"),slug:"luminous-vivid-orange",color:"#ff6900"},{name:(0,i18n_build_module.__)("Luminous vivid amber"),slug:"luminous-vivid-amber",color:"#fcb900"},{name:(0,i18n_build_module.__)("Light green cyan"),slug:"light-green-cyan",color:"#7bdcb5"},{name:(0,i18n_build_module.__)("Vivid green cyan"),slug:"vivid-green-cyan",color:"#00d084"},{name:(0,i18n_build_module.__)("Pale cyan blue"),slug:"pale-cyan-blue",color:"#8ed1fc"},{name:(0,i18n_build_module.__)("Vivid cyan blue"),slug:"vivid-cyan-blue",color:"#0693e3"},{name:(0,i18n_build_module.__)("Vivid purple"),slug:"vivid-purple",color:"#9b51e0"}],fontSizes:[{name:(0,i18n_build_module._x)("Small","font size name"),size:13,slug:"small"},{name:(0,i18n_build_module._x)("Normal","font size name"),size:16,slug:"normal"},{name:(0,i18n_build_module._x)("Medium","font size name"),size:20,slug:"medium"},{name:(0,i18n_build_module._x)("Large","font size name"),size:36,slug:"large"},{name:(0,i18n_build_module._x)("Huge","font size name"),size:42,slug:"huge"}],imageDefaultSize:"large",imageSizes:[{slug:"thumbnail",name:(0,i18n_build_module.__)("Thumbnail")},{slug:"medium",name:(0,i18n_build_module.__)("Medium")},{slug:"large",name:(0,i18n_build_module.__)("Large")},{slug:"full",name:(0,i18n_build_module.__)("Full Size")}],imageEditing:!0,maxWidth:580,allowedBlockTypes:!0,maxUploadFileSize:0,allowedMimeTypes:null,canLockBlocks:!0,enableOpenverseMediaCategory:!0,clearBlockSelection:!0,__experimentalCanUserUseUnfilteredHTML:!1,__experimentalBlockDirectory:!1,__mobileEnablePageTemplates:!1,__experimentalBlockPatterns:[],__experimentalBlockPatternCategories:[],isPreviewMode:!1,blockInspectorAnimation:{animationParent:"core/navigation","core/navigation":{enterDirection:"leftToRight"},"core/navigation-submenu":{enterDirection:"rightToLeft"},"core/navigation-link":{enterDirection:"rightToLeft"},"core/search":{enterDirection:"rightToLeft"},"core/social-links":{enterDirection:"rightToLeft"},"core/page-list":{enterDirection:"rightToLeft"},"core/spacer":{enterDirection:"rightToLeft"},"core/home-link":{enterDirection:"rightToLeft"},"core/site-title":{enterDirection:"rightToLeft"},"core/site-logo":{enterDirection:"rightToLeft"}},generateAnchors:!1,gradients:[{name:(0,i18n_build_module.__)("Vivid cyan blue to vivid purple"),gradient:"linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)",slug:"vivid-cyan-blue-to-vivid-purple"},{name:(0,i18n_build_module.__)("Light green cyan to vivid green cyan"),gradient:"linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)",slug:"light-green-cyan-to-vivid-green-cyan"},{name:(0,i18n_build_module.__)("Luminous vivid amber to luminous vivid orange"),gradient:"linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)",slug:"luminous-vivid-amber-to-luminous-vivid-orange"},{name:(0,i18n_build_module.__)("Luminous vivid orange to vivid red"),gradient:"linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%)",slug:"luminous-vivid-orange-to-vivid-red"},{name:(0,i18n_build_module.__)("Very light gray to cyan bluish gray"),gradient:"linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%)",slug:"very-light-gray-to-cyan-bluish-gray"},{name:(0,i18n_build_module.__)("Cool to warm spectrum"),gradient:"linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%)",slug:"cool-to-warm-spectrum"},{name:(0,i18n_build_module.__)("Blush light purple"),gradient:"linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%)",slug:"blush-light-purple"},{name:(0,i18n_build_module.__)("Blush bordeaux"),gradient:"linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%)",slug:"blush-bordeaux"},{name:(0,i18n_build_module.__)("Luminous dusk"),gradient:"linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%)",slug:"luminous-dusk"},{name:(0,i18n_build_module.__)("Pale ocean"),gradient:"linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%)",slug:"pale-ocean"},{name:(0,i18n_build_module.__)("Electric grass"),gradient:"linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%)",slug:"electric-grass"},{name:(0,i18n_build_module.__)("Midnight"),gradient:"linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%)",slug:"midnight"}],__unstableResolvedAssets:{styles:[],scripts:[]}};function insertAt(array,elements,index){return[...array.slice(0,index),...Array.isArray(elements)?elements:[elements],...array.slice(index)]}function moveTo(array,from,to,count=1){const withoutMovedElements=[...array];return withoutMovedElements.splice(from,count),insertAt(withoutMovedElements,array.slice(from,from+count),to)}const identity=x=>x;function mapBlockOrder(blocks,rootClientId=""){const result=new Map,current=[];return result.set(rootClientId,current),blocks.forEach((block=>{const{clientId,innerBlocks}=block;current.push(clientId),mapBlockOrder(innerBlocks,clientId).forEach(((order,subClientId)=>{result.set(subClientId,order)}))})),result}function mapBlockParents(blocks,rootClientId=""){const result=[],stack=[[rootClientId,blocks]];for(;stack.length;){const[parent,currentBlocks]=stack.shift();currentBlocks.forEach((({innerBlocks,...block})=>{result.push([block.clientId,parent]),innerBlocks?.length&&stack.push([block.clientId,innerBlocks])}))}return result}function flattenBlocks(blocks,transform=identity){const result=[],stack=[...blocks];for(;stack.length;){const{innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),result.push([block.clientId,transform(block)])}return result}function getFlattenedBlocksWithoutAttributes(blocks){return flattenBlocks(blocks,(block=>{const{attributes,...restBlock}=block;return restBlock}))}function getFlattenedBlockAttributes(blocks){return flattenBlocks(blocks,(block=>block.attributes))}function isUpdatingSameBlockAttribute(action,lastAction){return"UPDATE_BLOCK_ATTRIBUTES"===action.type&&void 0!==lastAction&&"UPDATE_BLOCK_ATTRIBUTES"===lastAction.type&&es6_default()(action.clientIds,lastAction.clientIds)&&function hasSameKeys(a,b){return es6_default()(Object.keys(a),Object.keys(b))}(action.attributes,lastAction.attributes)}function updateBlockTreeForBlocks(state,blocks){const treeToUpdate=state.tree,stack=[...blocks],flattenedBlocks=[...blocks];for(;stack.length;){const block=stack.shift();stack.push(...block.innerBlocks),flattenedBlocks.push(...block.innerBlocks)}for(const block of flattenedBlocks)treeToUpdate.set(block.clientId,{});for(const block of flattenedBlocks)treeToUpdate.set(block.clientId,Object.assign(treeToUpdate.get(block.clientId),{...state.byClientId.get(block.clientId),attributes:state.attributes.get(block.clientId),innerBlocks:block.innerBlocks.map((subBlock=>treeToUpdate.get(subBlock.clientId)))}))}function updateParentInnerBlocksInTree(state,updatedClientIds,updateChildrenOfUpdatedClientIds=!1){const treeToUpdate=state.tree,uncontrolledParents=new Set([]),controlledParents=new Set;for(const clientId of updatedClientIds){let current=updateChildrenOfUpdatedClientIds?clientId:state.parents.get(clientId);do{if(state.controlledInnerBlocks[current]){controlledParents.add(current);break}uncontrolledParents.add(current),current=state.parents.get(current)}while(void 0!==current)}for(const clientId of uncontrolledParents)treeToUpdate.set(clientId,{...treeToUpdate.get(clientId)});for(const clientId of uncontrolledParents)treeToUpdate.get(clientId).innerBlocks=(state.order.get(clientId)||[]).map((subClientId=>treeToUpdate.get(subClientId)));for(const clientId of controlledParents)treeToUpdate.set("controlled||"+clientId,{innerBlocks:(state.order.get(clientId)||[]).map((subClientId=>treeToUpdate.get(subClientId)))})}const blocks=(0,pipe.h)(build_module.HY,(reducer=>(state,action)=>{if(state&&"SAVE_REUSABLE_BLOCK_SUCCESS"===action.type){const{id,updatedId}=action;if(id===updatedId)return state;(state={...state}).attributes=new Map(state.attributes),state.attributes.forEach(((attributes,clientId)=>{const{name}=state.byClientId.get(clientId);"core/block"===name&&attributes.ref===id&&state.attributes.set(clientId,{...attributes,ref:updatedId})}))}return reducer(state,action)}),(reducer=>(state={},action)=>{const newState=reducer(state,action);if(newState===state)return state;switch(newState.tree=state.tree?state.tree:new Map,action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":newState.tree=new Map(newState.tree),updateBlockTreeForBlocks(newState,action.blocks),updateParentInnerBlocksInTree(newState,action.rootClientId?[action.rootClientId]:[""],!0);break;case"UPDATE_BLOCK":newState.tree=new Map(newState.tree),newState.tree.set(action.clientId,{...newState.tree.get(action.clientId),...newState.byClientId.get(action.clientId),attributes:newState.attributes.get(action.clientId)}),updateParentInnerBlocksInTree(newState,[action.clientId],!1);break;case"SYNC_DERIVED_BLOCK_ATTRIBUTES":case"UPDATE_BLOCK_ATTRIBUTES":newState.tree=new Map(newState.tree),action.clientIds.forEach((clientId=>{newState.tree.set(clientId,{...newState.tree.get(clientId),attributes:newState.attributes.get(clientId)})})),updateParentInnerBlocksInTree(newState,action.clientIds,!1);break;case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const inserterClientIds=function getFlattenedClientIds(blocks){const result={},stack=[...blocks];for(;stack.length;){const{innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),result[block.clientId]=!0}return result}(action.blocks);newState.tree=new Map(newState.tree),action.replacedClientIds.forEach((clientId=>{newState.tree.delete(clientId),inserterClientIds[clientId]||newState.tree.delete("controlled||"+clientId)})),updateBlockTreeForBlocks(newState,action.blocks),updateParentInnerBlocksInTree(newState,action.blocks.map((b=>b.clientId)),!1);const parentsOfRemovedBlocks=[];for(const clientId of action.clientIds){const parentId=state.parents.get(clientId);void 0===parentId||""!==parentId&&!newState.byClientId.get(parentId)||parentsOfRemovedBlocks.push(parentId)}updateParentInnerBlocksInTree(newState,parentsOfRemovedBlocks,!0);break}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":const parentsOfRemovedBlocks=[];for(const clientId of action.clientIds){const parentId=state.parents.get(clientId);void 0===parentId||""!==parentId&&!newState.byClientId.get(parentId)||parentsOfRemovedBlocks.push(parentId)}newState.tree=new Map(newState.tree),action.removedClientIds.forEach((clientId=>{newState.tree.delete(clientId),newState.tree.delete("controlled||"+clientId)})),updateParentInnerBlocksInTree(newState,parentsOfRemovedBlocks,!0);break;case"MOVE_BLOCKS_TO_POSITION":{const updatedBlockUids=[];action.fromRootClientId?updatedBlockUids.push(action.fromRootClientId):updatedBlockUids.push(""),action.toRootClientId&&updatedBlockUids.push(action.toRootClientId),newState.tree=new Map(newState.tree),updateParentInnerBlocksInTree(newState,updatedBlockUids,!0);break}case"MOVE_BLOCKS_UP":case"MOVE_BLOCKS_DOWN":{const updatedBlockUids=[action.rootClientId?action.rootClientId:""];newState.tree=new Map(newState.tree),updateParentInnerBlocksInTree(newState,updatedBlockUids,!0);break}case"SAVE_REUSABLE_BLOCK_SUCCESS":{const updatedBlockUids=[];newState.attributes.forEach(((attributes,clientId)=>{"core/block"===newState.byClientId.get(clientId).name&&attributes.ref===action.updatedId&&updatedBlockUids.push(clientId)})),newState.tree=new Map(newState.tree),updatedBlockUids.forEach((clientId=>{newState.tree.set(clientId,{...newState.byClientId.get(clientId),attributes:newState.attributes.get(clientId),innerBlocks:newState.tree.get(clientId).innerBlocks})})),updateParentInnerBlocksInTree(newState,updatedBlockUids,!1)}}return newState}),(reducer=>(state,action)=>{const getAllChildren=clientIds=>{let result=clientIds;for(let i=0;i<result.length;i++)!state.order.get(result[i])||action.keepControlledInnerBlocks&&action.keepControlledInnerBlocks[result[i]]||(result===clientIds&&(result=[...result]),result.push(...state.order.get(result[i])));return result};if(state)switch(action.type){case"REMOVE_BLOCKS":action={...action,type:"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN",removedClientIds:getAllChildren(action.clientIds)};break;case"REPLACE_BLOCKS":action={...action,type:"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN",replacedClientIds:getAllChildren(action.clientIds)}}return reducer(state,action)}),(reducer=>(state,action)=>{if("REPLACE_INNER_BLOCKS"!==action.type)return reducer(state,action);const nestedControllers={};if(Object.keys(state.controlledInnerBlocks).length){const stack=[...action.blocks];for(;stack.length;){const{innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),state.controlledInnerBlocks[block.clientId]&&(nestedControllers[block.clientId]=!0)}}let stateAfterBlocksRemoval=state;state.order.get(action.rootClientId)&&(stateAfterBlocksRemoval=reducer(stateAfterBlocksRemoval,{type:"REMOVE_BLOCKS",keepControlledInnerBlocks:nestedControllers,clientIds:state.order.get(action.rootClientId)}));let stateAfterInsert=stateAfterBlocksRemoval;if(action.blocks.length){stateAfterInsert=reducer(stateAfterInsert,{...action,type:"INSERT_BLOCKS",index:0});const stateAfterInsertOrder=new Map(stateAfterInsert.order);Object.keys(nestedControllers).forEach((key=>{state.order.get(key)&&stateAfterInsertOrder.set(key,state.order.get(key))})),stateAfterInsert.order=stateAfterInsertOrder,stateAfterInsert.tree=new Map(stateAfterInsert.tree),Object.keys(nestedControllers).forEach((_key=>{const key=`controlled||${_key}`;state.tree.has(key)&&stateAfterInsert.tree.set(key,state.tree.get(key))}))}return stateAfterInsert}),(reducer=>(state,action)=>{if("RESET_BLOCKS"===action.type){const newState={...state,byClientId:new Map(getFlattenedBlocksWithoutAttributes(action.blocks)),attributes:new Map(getFlattenedBlockAttributes(action.blocks)),order:mapBlockOrder(action.blocks),parents:new Map(mapBlockParents(action.blocks)),controlledInnerBlocks:{}};return newState.tree=new Map(state?.tree),updateBlockTreeForBlocks(newState,action.blocks),newState.tree.set("",{innerBlocks:action.blocks.map((subBlock=>newState.tree.get(subBlock.clientId)))}),newState}return reducer(state,action)}),(function withPersistentBlockChange(reducer){let lastAction,explicitPersistent,markNextChangeAsNotPersistent=!1;return(state,action)=>{let nextIsPersistentChange,nextState=reducer(state,action);var _state$isPersistentCh;"SET_EXPLICIT_PERSISTENT"===action.type&&(explicitPersistent=action.isPersistentChange,nextIsPersistentChange=null===(_state$isPersistentCh=state.isPersistentChange)||void 0===_state$isPersistentCh||_state$isPersistentCh);if(void 0!==explicitPersistent)return nextIsPersistentChange=explicitPersistent,nextIsPersistentChange===nextState.isPersistentChange?nextState:{...nextState,isPersistentChange:nextIsPersistentChange};const isExplicitPersistentChange="MARK_LAST_CHANGE_AS_PERSISTENT"===action.type||markNextChangeAsNotPersistent;var _state$isPersistentCh2;return state!==nextState||isExplicitPersistentChange?(nextState={...nextState,isPersistentChange:isExplicitPersistentChange?!markNextChangeAsNotPersistent:!isUpdatingSameBlockAttribute(action,lastAction)},lastAction=action,markNextChangeAsNotPersistent="MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"===action.type,nextState):(markNextChangeAsNotPersistent="MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"===action.type,nextIsPersistentChange=null===(_state$isPersistentCh2=state?.isPersistentChange)||void 0===_state$isPersistentCh2||_state$isPersistentCh2,state.isPersistentChange===nextIsPersistentChange?state:{...nextState,isPersistentChange:nextIsPersistentChange})}}),(function withIgnoredBlockChange(reducer){const IGNORED_ACTION_TYPES=new Set(["RECEIVE_BLOCKS"]);return(state,action)=>{const nextState=reducer(state,action);return nextState!==state&&(nextState.isIgnoredChange=IGNORED_ACTION_TYPES.has(action.type)),nextState}}),(reducer=>(state,action)=>{if("SET_HAS_CONTROLLED_INNER_BLOCKS"===action.type){const tempState=reducer(state,{type:"REPLACE_INNER_BLOCKS",rootClientId:action.clientId,blocks:[]});return reducer(tempState,action)}return reducer(state,action)}))({byClientId(state=new Map,action){switch(action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":{const newState=new Map(state);return getFlattenedBlocksWithoutAttributes(action.blocks).forEach((([key,value])=>{newState.set(key,value)})),newState}case"UPDATE_BLOCK":{if(!state.has(action.clientId))return state;const{attributes,...changes}=action.updates;if(0===Object.values(changes).length)return state;const newState=new Map(state);return newState.set(action.clientId,{...state.get(action.clientId),...changes}),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{if(!action.blocks)return state;const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),getFlattenedBlocksWithoutAttributes(action.blocks).forEach((([key,value])=>{newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},attributes(state=new Map,action){switch(action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":{const newState=new Map(state);return getFlattenedBlockAttributes(action.blocks).forEach((([key,value])=>{newState.set(key,value)})),newState}case"UPDATE_BLOCK":{if(!state.get(action.clientId)||!action.updates.attributes)return state;const newState=new Map(state);return newState.set(action.clientId,{...state.get(action.clientId),...action.updates.attributes}),newState}case"SYNC_DERIVED_BLOCK_ATTRIBUTES":case"UPDATE_BLOCK_ATTRIBUTES":{if(action.clientIds.every((id=>!state.get(id))))return state;let hasChange=!1;const newState=new Map(state);for(const clientId of action.clientIds){var _action$attributes;const updatedAttributeEntries=Object.entries(action.uniqueByBlock?action.attributes[clientId]:null!==(_action$attributes=action.attributes)&&void 0!==_action$attributes?_action$attributes:{});if(0===updatedAttributeEntries.length)continue;let hasUpdatedAttributes=!1;const existingAttributes=state.get(clientId),newAttributes={};updatedAttributeEntries.forEach((([key,value])=>{existingAttributes[key]!==value&&(hasUpdatedAttributes=!0,newAttributes[key]=value)})),hasChange=hasChange||hasUpdatedAttributes,hasUpdatedAttributes&&newState.set(clientId,{...existingAttributes,...newAttributes})}return hasChange?newState:state}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{if(!action.blocks)return state;const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),getFlattenedBlockAttributes(action.blocks).forEach((([key,value])=>{newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},order(state=new Map,action){switch(action.type){case"RECEIVE_BLOCKS":{var _state$get;const blockOrder=mapBlockOrder(action.blocks),newState=new Map(state);return blockOrder.forEach(((order,clientId)=>{""!==clientId&&newState.set(clientId,order)})),newState.set("",(null!==(_state$get=state.get(""))&&void 0!==_state$get?_state$get:[]).concat(blockOrder[""])),newState}case"INSERT_BLOCKS":{const{rootClientId=""}=action,subState=state.get(rootClientId)||[],mappedBlocks=mapBlockOrder(action.blocks,rootClientId),{index=subState.length}=action,newState=new Map(state);return mappedBlocks.forEach(((order,clientId)=>{newState.set(clientId,order)})),newState.set(rootClientId,insertAt(subState,mappedBlocks.get(rootClientId),index)),newState}case"MOVE_BLOCKS_TO_POSITION":{var _state$get$filter;const{fromRootClientId="",toRootClientId="",clientIds}=action,{index=state.get(toRootClientId).length}=action;if(fromRootClientId===toRootClientId){const fromIndex=state.get(toRootClientId).indexOf(clientIds[0]),newState=new Map(state);return newState.set(toRootClientId,moveTo(state.get(toRootClientId),fromIndex,index,clientIds.length)),newState}const newState=new Map(state);return newState.set(fromRootClientId,null!==(_state$get$filter=state.get(fromRootClientId)?.filter((id=>!clientIds.includes(id))))&&void 0!==_state$get$filter?_state$get$filter:[]),newState.set(toRootClientId,insertAt(state.get(toRootClientId),clientIds,index)),newState}case"MOVE_BLOCKS_UP":{const{clientIds,rootClientId=""}=action,firstClientId=clientIds[0],subState=state.get(rootClientId);if(!subState.length||firstClientId===subState[0])return state;const firstIndex=subState.indexOf(firstClientId),newState=new Map(state);return newState.set(rootClientId,moveTo(subState,firstIndex,firstIndex-1,clientIds.length)),newState}case"MOVE_BLOCKS_DOWN":{const{clientIds,rootClientId=""}=action,firstClientId=clientIds[0],lastClientId=clientIds[clientIds.length-1],subState=state.get(rootClientId);if(!subState.length||lastClientId===subState[subState.length-1])return state;const firstIndex=subState.indexOf(firstClientId),newState=new Map(state);return newState.set(rootClientId,moveTo(subState,firstIndex,firstIndex+1,clientIds.length)),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const{clientIds}=action;if(!action.blocks)return state;const mappedBlocks=mapBlockOrder(action.blocks),newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),mappedBlocks.forEach(((order,clientId)=>{""!==clientId&&newState.set(clientId,order)})),newState.forEach(((order,clientId)=>{const newSubOrder=Object.values(order).reduce(((result,subClientId)=>subClientId===clientIds[0]?[...result,...mappedBlocks.get("")]:(-1===clientIds.indexOf(subClientId)&&result.push(subClientId),result)),[]);newState.set(clientId,newSubOrder)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState.forEach(((order,clientId)=>{var _order$filter;const newSubOrder=null!==(_order$filter=order?.filter((id=>!action.removedClientIds.includes(id))))&&void 0!==_order$filter?_order$filter:[];newSubOrder.length!==order.length&&newState.set(clientId,newSubOrder)})),newState}}return state},parents(state=new Map,action){switch(action.type){case"RECEIVE_BLOCKS":{const newState=new Map(state);return mapBlockParents(action.blocks).forEach((([key,value])=>{newState.set(key,value)})),newState}case"INSERT_BLOCKS":{const newState=new Map(state);return mapBlockParents(action.blocks,action.rootClientId||"").forEach((([key,value])=>{newState.set(key,value)})),newState}case"MOVE_BLOCKS_TO_POSITION":{const newState=new Map(state);return action.clientIds.forEach((id=>{newState.set(id,action.toRootClientId||"")})),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),mapBlockParents(action.blocks,state.get(action.clientIds[0])).forEach((([key,value])=>{newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},controlledInnerBlocks:(state={},{type,clientId,hasControlledInnerBlocks})=>"SET_HAS_CONTROLLED_INNER_BLOCKS"===type?{...state,[clientId]:hasControlledInnerBlocks}:state});function selectionHelper(state={},action){switch(action.type){case"CLEAR_SELECTED_BLOCK":return state.clientId?{}:state;case"SELECT_BLOCK":return action.clientId===state.clientId?state:{clientId:action.clientId};case"REPLACE_INNER_BLOCKS":case"INSERT_BLOCKS":return action.updateSelection&&action.blocks.length?{clientId:action.blocks[0].clientId}:state;case"REMOVE_BLOCKS":return action.clientIds&&action.clientIds.length&&-1!==action.clientIds.indexOf(state.clientId)?{}:state;case"REPLACE_BLOCKS":{if(-1===action.clientIds.indexOf(state.clientId))return state;const blockToSelect=action.blocks[action.indexToSelect]||action.blocks[action.blocks.length-1];return blockToSelect?blockToSelect.clientId===state.clientId?state:{clientId:blockToSelect.clientId}:{}}}return state}const reducer=function withAutomaticChangeReset(reducer){return(state,action)=>{const nextState=reducer(state,action);return state?(nextState.automaticChangeStatus=state.automaticChangeStatus,"MARK_AUTOMATIC_CHANGE"===action.type?{...nextState,automaticChangeStatus:"pending"}:"MARK_AUTOMATIC_CHANGE_FINAL"===action.type&&"pending"===state.automaticChangeStatus?{...nextState,automaticChangeStatus:"final"}:nextState.blocks===state.blocks&&nextState.selection===state.selection||"final"!==nextState.automaticChangeStatus&&nextState.selection!==state.selection?nextState:{...nextState,automaticChangeStatus:void 0}):nextState}}((0,build_module.HY)({blocks,isDragging:function isDragging(state=!1,action){switch(action.type){case"START_DRAGGING":return!0;case"STOP_DRAGGING":return!1}return state},isTyping:function isTyping(state=!1,action){switch(action.type){case"START_TYPING":return!0;case"STOP_TYPING":return!1}return state},isBlockInterfaceHidden:function isBlockInterfaceHidden(state=!1,action){switch(action.type){case"HIDE_BLOCK_INTERFACE":return!0;case"SHOW_BLOCK_INTERFACE":return!1}return state},draggedBlocks:function draggedBlocks(state=[],action){switch(action.type){case"START_DRAGGING_BLOCKS":return action.clientIds;case"STOP_DRAGGING_BLOCKS":return[]}return state},selection:function selection(state={},action){switch(action.type){case"SELECTION_CHANGE":return action.clientId?{selectionStart:{clientId:action.clientId,attributeKey:action.attributeKey,offset:action.startOffset},selectionEnd:{clientId:action.clientId,attributeKey:action.attributeKey,offset:action.endOffset}}:{selectionStart:action.start||state.selectionStart,selectionEnd:action.end||state.selectionEnd};case"RESET_SELECTION":const{selectionStart,selectionEnd}=action;return{selectionStart,selectionEnd};case"MULTI_SELECT":const{start,end}=action;return start===state.selectionStart?.clientId&&end===state.selectionEnd?.clientId?state:{selectionStart:{clientId:start},selectionEnd:{clientId:end}};case"RESET_BLOCKS":const startClientId=state?.selectionStart?.clientId,endClientId=state?.selectionEnd?.clientId;if(!startClientId&&!endClientId)return state;if(!action.blocks.some((block=>block.clientId===startClientId)))return{selectionStart:{},selectionEnd:{}};if(!action.blocks.some((block=>block.clientId===endClientId)))return{...state,selectionEnd:state.selectionStart}}const selectionStart=selectionHelper(state.selectionStart,action),selectionEnd=selectionHelper(state.selectionEnd,action);return selectionStart===state.selectionStart&&selectionEnd===state.selectionEnd?state:{selectionStart,selectionEnd}},isMultiSelecting:function isMultiSelecting(state=!1,action){switch(action.type){case"START_MULTI_SELECT":return!0;case"STOP_MULTI_SELECT":return!1}return state},isSelectionEnabled:function isSelectionEnabled(state=!0,action){return"TOGGLE_SELECTION"===action.type?action.isSelectionEnabled:state},initialPosition:function initialPosition(state=null,action){return"REPLACE_BLOCKS"===action.type&&void 0!==action.initialPosition||["MULTI_SELECT","SELECT_BLOCK","RESET_SELECTION","INSERT_BLOCKS","REPLACE_INNER_BLOCKS"].includes(action.type)?action.initialPosition:state},blocksMode:function blocksMode(state={},action){if("TOGGLE_BLOCK_MODE"===action.type){const{clientId}=action;return{...state,[clientId]:state[clientId]&&"html"===state[clientId]?"visual":"html"}}return state},blockListSettings:(state={},action)=>{switch(action.type){case"REPLACE_BLOCKS":case"REMOVE_BLOCKS":return Object.fromEntries(Object.entries(state).filter((([id])=>!action.clientIds.includes(id))));case"UPDATE_BLOCK_LIST_SETTINGS":{const updates="string"==typeof action.clientId?{[action.clientId]:action.settings}:action.clientId;for(const clientId in updates)updates[clientId]?es6_default()(state[clientId],updates[clientId])&&delete updates[clientId]:state[clientId]||delete updates[clientId];if(0===Object.keys(updates).length)return state;const merged={...state,...updates};for(const clientId in updates)updates[clientId]||delete merged[clientId];return merged}}return state},insertionPoint:function insertionPoint(state=null,action){switch(action.type){case"SET_INSERTION_POINT":return action.value;case"SELECT_BLOCK":return null}return state},insertionCue:function insertionCue(state=null,action){switch(action.type){case"SHOW_INSERTION_POINT":{const{rootClientId,index,__unstableWithInserter,operation,nearestSide}=action,nextState={rootClientId,index,__unstableWithInserter,operation,nearestSide};return es6_default()(state,nextState)?state:nextState}case"HIDE_INSERTION_POINT":return null}return state},template:function template(state={isValid:!0},action){return"SET_TEMPLATE_VALIDITY"===action.type?{...state,isValid:action.isValid}:state},settings:function settings(state=SETTINGS_DEFAULTS,action){if("UPDATE_SETTINGS"===action.type){const updatedSettings=action.reset?{...SETTINGS_DEFAULTS,...action.settings}:{...state,...action.settings};return Object.defineProperty(updatedSettings,"__unstableIsPreviewMode",{get(){return(0,deprecated_build_module.A)("__unstableIsPreviewMode",{since:"6.8",alternative:"isPreviewMode"}),this.isPreviewMode}}),updatedSettings}return state},preferences:function preferences(state=PREFERENCES_DEFAULTS,action){switch(action.type){case"INSERT_BLOCKS":case"REPLACE_BLOCKS":{const nextInsertUsage=action.blocks.reduce(((prevUsage,block)=>{const{attributes,name:blockName}=block;let id=blockName;const match=(0,build_module_select.L)(blocks_build_module.M_).getActiveBlockVariation(blockName,attributes);return match?.name&&(id+="/"+match.name),"core/block"===blockName&&(id+="/"+attributes.ref),{...prevUsage,[id]:{time:action.time,count:prevUsage[id]?prevUsage[id].count+1:1}}}),state.insertUsage);return{...state,insertUsage:nextInsertUsage}}}return state},lastBlockAttributesChange:function lastBlockAttributesChange(state=null,action){switch(action.type){case"UPDATE_BLOCK":if(!action.updates.attributes)break;return{[action.clientId]:action.updates.attributes};case"UPDATE_BLOCK_ATTRIBUTES":return action.clientIds.reduce(((accumulator,id)=>({...accumulator,[id]:action.uniqueByBlock?action.attributes[id]:action.attributes})),{})}return state},lastFocus:function lastFocus(state=!1,action){return"LAST_FOCUS"===action.type?action.lastFocus:state},expandedBlock:function expandedBlock(state=null,action){switch(action.type){case"SET_BLOCK_EXPANDED_IN_LIST_VIEW":return action.clientId;case"SELECT_BLOCK":if(action.clientId!==state)return null}return state},highlightedBlock:function highlightedBlock(state,action){switch(action.type){case"TOGGLE_BLOCK_HIGHLIGHT":const{clientId,isHighlighted}=action;return isHighlighted?clientId:state===clientId?null:state;case"SELECT_BLOCK":if(action.clientId!==state)return null}return state},lastBlockInserted:function lastBlockInserted(state={},action){switch(action.type){case"INSERT_BLOCKS":case"REPLACE_BLOCKS":if(!action.blocks.length)return state;const clientIds=action.blocks.map((block=>block.clientId)),source=action.meta?.source;return{clientIds,source};case"RESET_BLOCKS":return{}}return state},temporarilyEditingAsBlocks:function temporarilyEditingAsBlocks(state="",action){return"SET_TEMPORARILY_EDITING_AS_BLOCKS"===action.type?action.temporarilyEditingAsBlocks:state},temporarilyEditingFocusModeRevert:function temporarilyEditingFocusModeRevert(state="",action){return"SET_TEMPORARILY_EDITING_AS_BLOCKS"===action.type?action.focusModeToRevert:state},blockVisibility:function blockVisibility(state={},action){return"SET_BLOCK_VISIBILITY"===action.type?{...state,...action.updates}:state},blockEditingModes:function blockEditingModes(state=new Map,action){switch(action.type){case"SET_BLOCK_EDITING_MODE":return new Map(state).set(action.clientId,action.mode);case"UNSET_BLOCK_EDITING_MODE":{const newState=new Map(state);return newState.delete(action.clientId),newState}case"RESET_BLOCKS":return state.has("")?(new Map).set("",state.get("")):state}return state},styleOverrides:function styleOverrides(state=new Map,action){switch(action.type){case"SET_STYLE_OVERRIDE":return new Map(state).set(action.id,action.style);case"DELETE_STYLE_OVERRIDE":{const newState=new Map(state);return newState.delete(action.id),newState}}return state},removalPromptData:function removalPromptData(state=!1,action){switch(action.type){case"DISPLAY_BLOCK_REMOVAL_PROMPT":const{clientIds,selectPrevious,message}=action;return{clientIds,selectPrevious,message};case"CLEAR_BLOCK_REMOVAL_PROMPT":return!1}return state},blockRemovalRules:function blockRemovalRules(state=!1,action){return"SET_BLOCK_REMOVAL_RULES"===action.type?action.rules:state},openedBlockSettingsMenu:function openedBlockSettingsMenu(state=null,action){var _action$clientId;return"SET_OPENED_BLOCK_SETTINGS_MENU"===action.type?null!==(_action$clientId=action?.clientId)&&void 0!==_action$clientId?_action$clientId:null:state},registeredInserterMediaCategories:function registeredInserterMediaCategories(state=[],action){return"REGISTER_INSERTER_MEDIA_CATEGORY"===action.type?[...state,action.category]:state},hoveredBlockClientId:function hoveredBlockClientId(state=!1,action){return"HOVER_BLOCK"===action.type?action.clientId:state},zoomLevel:function zoomLevel(state=100,action){switch(action.type){case"SET_ZOOM_LEVEL":return action.zoom;case"RESET_ZOOM_LEVEL":return 100}return state}}));var selectors=__webpack_require__("./packages/block-editor/src/store/selectors.js"),platform=__webpack_require__("./packages/element/build-module/platform.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),lock_unlock=__webpack_require__("./packages/block-editor/src/lock-unlock.js");const privateSettings=["inserterMediaCategories","blockInspectorAnimation"];function __experimentalUpdateSettings(settings,{stripExperimentalSettings=!1,reset=!1}={}){let incomingSettings=settings;Object.hasOwn(incomingSettings,"__unstableIsPreviewMode")&&((0,deprecated_build_module.A)("__unstableIsPreviewMode argument in wp.data.dispatch('core/block-editor').updateSettings",{since:"6.8",alternative:"isPreviewMode"}),incomingSettings={...incomingSettings},incomingSettings.isPreviewMode=incomingSettings.__unstableIsPreviewMode,delete incomingSettings.__unstableIsPreviewMode);let cleanSettings=incomingSettings;if(stripExperimentalSettings&&"web"===platform.A.OS){cleanSettings={};for(const key in incomingSettings)privateSettings.includes(key)||(cleanSettings[key]=incomingSettings[key])}return{type:"UPDATE_SETTINGS",settings:cleanSettings,reset}}function hideBlockInterface(){return{type:"HIDE_BLOCK_INTERFACE"}}function showBlockInterface(){return{type:"SHOW_BLOCK_INTERFACE"}}const privateRemoveBlocks=(clientIds,selectPrevious=!0,forceRemove=!1)=>({select,dispatch,registry})=>{if(!clientIds||!clientIds.length)return;var maybeArray;maybeArray=clientIds,clientIds=Array.isArray(maybeArray)?maybeArray:[maybeArray];if(!select.canRemoveBlocks(clientIds))return;const rules=!forceRemove&&select.getBlockRemovalRules();if(rules){function flattenBlocks(blocks){const result=[],stack=[...blocks];for(;stack.length;){const{innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),result.push(block)}return result}const flattenedBlocks=flattenBlocks(clientIds.map(select.getBlock));let message;for(const rule of rules)if(message=rule.callback(flattenedBlocks),message)return void dispatch(displayBlockRemovalPrompt(clientIds,selectPrevious,message))}selectPrevious&&dispatch.selectPreviousBlock(clientIds[0],selectPrevious),registry.batch((()=>{dispatch({type:"REMOVE_BLOCKS",clientIds}),dispatch(ensureDefaultBlock())}))},ensureDefaultBlock=()=>({select,dispatch})=>{if(select.getBlockCount()>0)return;const{__unstableHasCustomAppender}=select.getSettings();__unstableHasCustomAppender||dispatch.insertDefaultBlock()};function displayBlockRemovalPrompt(clientIds,selectPrevious,message){return{type:"DISPLAY_BLOCK_REMOVAL_PROMPT",clientIds,selectPrevious,message}}function clearBlockRemovalPrompt(){return{type:"CLEAR_BLOCK_REMOVAL_PROMPT"}}function setBlockRemovalRules(rules=!1){return{type:"SET_BLOCK_REMOVAL_RULES",rules}}function setOpenedBlockSettingsMenu(clientId){return{type:"SET_OPENED_BLOCK_SETTINGS_MENU",clientId}}function setStyleOverride(id,style){return{type:"SET_STYLE_OVERRIDE",id,style}}function deleteStyleOverride(id){return{type:"DELETE_STYLE_OVERRIDE",id}}function setLastFocus(lastFocus=null){return{type:"LAST_FOCUS",lastFocus}}function stopEditingAsBlocks(clientId){return({select,dispatch,registry})=>{const focusModeToRevert=(0,lock_unlock.T)(registry.select(store_store)).getTemporarilyEditingFocusModeToRevert();dispatch.__unstableMarkNextChangeAsNotPersistent(),dispatch.updateBlockAttributes(clientId,{templateLock:"contentOnly"}),dispatch.updateBlockListSettings(clientId,{...select.getBlockListSettings(clientId),templateLock:"contentOnly"}),dispatch.updateSettings({focusMode:focusModeToRevert}),dispatch.__unstableSetTemporarilyEditingAsBlocks()}}function startDragging(){return{type:"START_DRAGGING"}}function stopDragging(){return{type:"STOP_DRAGGING"}}function expandBlock(clientId){return{type:"SET_BLOCK_EXPANDED_IN_LIST_VIEW",clientId}}function setInsertionPoint(value){return{type:"SET_INSERTION_POINT",value}}const modifyContentLockBlock=clientId=>({select,dispatch})=>{dispatch.selectBlock(clientId),dispatch.__unstableMarkNextChangeAsNotPersistent(),dispatch.updateBlockAttributes(clientId,{templateLock:void 0}),dispatch.updateBlockListSettings(clientId,{...select.getBlockListSettings(clientId),templateLock:!1});const focusModeToRevert=select.getSettings().focusMode;dispatch.updateSettings({focusMode:!0}),dispatch.__unstableSetTemporarilyEditingAsBlocks(clientId,focusModeToRevert)},setZoomLevel=(zoom=100)=>({select,dispatch})=>{if(100!==zoom){const firstSelectedClientId=select.getBlockSelectionStart(),sectionRootClientId=select.getSectionRootClientId();if(firstSelectedClientId){let sectionClientId;if(sectionRootClientId){const sectionClientIds=select.getBlockOrder(sectionRootClientId);sectionClientId=sectionClientIds?.includes(firstSelectedClientId)?firstSelectedClientId:select.getBlockParents(firstSelectedClientId).find((parent=>sectionClientIds.includes(parent)))}else sectionClientId=select.getBlockHierarchyRootClientId(firstSelectedClientId);sectionClientId?dispatch.selectBlock(sectionClientId):dispatch.clearSelectedBlock(),(0,a11y_build_module.L)((0,i18n_build_module.__)("You are currently in zoom-out mode."))}}dispatch({type:"SET_ZOOM_LEVEL",zoom})};function resetZoomLevel(){return{type:"RESET_ZOOM_LEVEL"}}var private_selectors=__webpack_require__("./packages/block-editor/src/store/private-selectors.js"),notices_build_module=__webpack_require__("./packages/notices/build-module/index.js"),rich_text_build_module=__webpack_require__("./packages/rich-text/build-module/index.js"),store=__webpack_require__("./packages/preferences/build-module/store/index.js");function retrieveSelectedAttribute(blockAttributes){if(blockAttributes)return Object.keys(blockAttributes).find((name=>{const value=blockAttributes[name];return("string"==typeof value||value instanceof rich_text_build_module.EF)&&-1!==value.toString().indexOf("Â†")}))}function findRichTextAttributeKey(blockType){for(const[key,value]of Object.entries(blockType.attributes))if("rich-text"===value.source||"html"===value.source)return key}const actions_castArray=maybeArray=>Array.isArray(maybeArray)?maybeArray:[maybeArray],resetBlocks=blocks=>({dispatch})=>{dispatch({type:"RESET_BLOCKS",blocks}),dispatch(validateBlocksToTemplate(blocks))},validateBlocksToTemplate=blocks=>({select,dispatch})=>{const template=select.getTemplate(),templateLock=select.getTemplateLock(),isBlocksValidToTemplate=!template||"all"!==templateLock||(0,blocks_build_module.V6)(blocks,template);if(isBlocksValidToTemplate!==select.isValidTemplate())return dispatch.setTemplateValidity(isBlocksValidToTemplate),isBlocksValidToTemplate};function resetSelection(selectionStart,selectionEnd,initialPosition){return{type:"RESET_SELECTION",selectionStart,selectionEnd,initialPosition}}function receiveBlocks(blocks){return(0,deprecated_build_module.A)('wp.data.dispatch( "core/block-editor" ).receiveBlocks',{since:"5.9",alternative:"resetBlocks or insertBlocks"}),{type:"RECEIVE_BLOCKS",blocks}}function updateBlockAttributes(clientIds,attributes,uniqueByBlock=!1){return{type:"UPDATE_BLOCK_ATTRIBUTES",clientIds:actions_castArray(clientIds),attributes,uniqueByBlock}}function updateBlock(clientId,updates){return{type:"UPDATE_BLOCK",clientId,updates}}function selectBlock(clientId,initialPosition=0){return{type:"SELECT_BLOCK",initialPosition,clientId}}function hoverBlock(clientId){return{type:"HOVER_BLOCK",clientId}}const selectPreviousBlock=(clientId,fallbackToParent=!1)=>({select,dispatch})=>{const previousBlockClientId=select.getPreviousBlockClientId(clientId);if(previousBlockClientId)dispatch.selectBlock(previousBlockClientId,-1);else if(fallbackToParent){const firstParentClientId=select.getBlockRootClientId(clientId);firstParentClientId&&dispatch.selectBlock(firstParentClientId,-1)}},selectNextBlock=clientId=>({select,dispatch})=>{const nextBlockClientId=select.getNextBlockClientId(clientId);nextBlockClientId&&dispatch.selectBlock(nextBlockClientId)};function startMultiSelect(){return{type:"START_MULTI_SELECT"}}function stopMultiSelect(){return{type:"STOP_MULTI_SELECT"}}const multiSelect=(start,end,__experimentalInitialPosition=0)=>({select,dispatch})=>{if(select.getBlockRootClientId(start)!==select.getBlockRootClientId(end))return;dispatch({type:"MULTI_SELECT",start,end,initialPosition:__experimentalInitialPosition});const blockCount=select.getSelectedBlockCount();(0,a11y_build_module.L)((0,i18n_build_module.nv)((0,i18n_build_module._n)("%s block selected.","%s blocks selected.",blockCount),blockCount),"assertive")};function clearSelectedBlock(){return{type:"CLEAR_SELECTED_BLOCK"}}function toggleSelection(isSelectionEnabled=!0){return{type:"TOGGLE_SELECTION",isSelectionEnabled}}const replaceBlocks=(clientIds,blocks,indexToSelect,initialPosition=0,meta)=>({select,dispatch,registry})=>{clientIds=actions_castArray(clientIds),blocks=actions_castArray(blocks);const rootClientId=select.getBlockRootClientId(clientIds[0]);for(let index=0;index<blocks.length;index++){const block=blocks[index];if(!select.canInsertBlockType(block.name,rootClientId))return}registry.batch((()=>{dispatch({type:"REPLACE_BLOCKS",clientIds,blocks,time:Date.now(),indexToSelect,initialPosition,meta}),dispatch.ensureDefaultBlock()}))};function replaceBlock(clientId,block){return replaceBlocks(clientId,block)}const createOnMove=type=>(clientIds,rootClientId)=>({select,dispatch})=>{select.canMoveBlocks(clientIds)&&dispatch({type,clientIds:actions_castArray(clientIds),rootClientId})},moveBlocksDown=createOnMove("MOVE_BLOCKS_DOWN"),moveBlocksUp=createOnMove("MOVE_BLOCKS_UP"),moveBlocksToPosition=(clientIds,fromRootClientId="",toRootClientId="",index)=>({select,dispatch})=>{if(select.canMoveBlocks(clientIds)){if(fromRootClientId!==toRootClientId){if(!select.canRemoveBlocks(clientIds))return;if(!select.canInsertBlocks(clientIds,toRootClientId))return}dispatch({type:"MOVE_BLOCKS_TO_POSITION",fromRootClientId,toRootClientId,clientIds,index})}};function moveBlockToPosition(clientId,fromRootClientId="",toRootClientId="",index){return moveBlocksToPosition([clientId],fromRootClientId,toRootClientId,index)}function insertBlock(block,index,rootClientId,updateSelection,meta){return insertBlocks([block],index,rootClientId,updateSelection,0,meta)}const insertBlocks=(blocks,index,rootClientId,updateSelection=!0,initialPosition=0,meta)=>({select,dispatch})=>{null!==initialPosition&&"object"==typeof initialPosition&&(meta=initialPosition,initialPosition=0,(0,deprecated_build_module.A)("meta argument in wp.data.dispatch('core/block-editor')",{since:"5.8",hint:"The meta argument is now the 6th argument of the function"})),blocks=actions_castArray(blocks);const allowedBlocks=[];for(const block of blocks){select.canInsertBlockType(block.name,rootClientId)&&allowedBlocks.push(block)}allowedBlocks.length&&dispatch({type:"INSERT_BLOCKS",blocks:allowedBlocks,index,rootClientId,time:Date.now(),updateSelection,initialPosition:updateSelection?initialPosition:null,meta})};function showInsertionPoint(rootClientId,index,__unstableOptions={}){const{__unstableWithInserter,operation,nearestSide}=__unstableOptions;return{type:"SHOW_INSERTION_POINT",rootClientId,index,__unstableWithInserter,operation,nearestSide}}const hideInsertionPoint=()=>({select,dispatch})=>{select.isBlockInsertionPointVisible()&&dispatch({type:"HIDE_INSERTION_POINT"})};function setTemplateValidity(isValid){return{type:"SET_TEMPLATE_VALIDITY",isValid}}const synchronizeTemplate=()=>({select,dispatch})=>{dispatch({type:"SYNCHRONIZE_TEMPLATE"});const blocks=select.getBlocks(),template=select.getTemplate(),updatedBlockList=(0,blocks_build_module.Nk)(blocks,template);dispatch.resetBlocks(updatedBlockList)},__unstableDeleteSelection=isForward=>({registry,select,dispatch})=>{const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd();if(selectionAnchor.clientId===selectionFocus.clientId)return;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return!1;const anchorRootClientId=select.getBlockRootClientId(selectionAnchor.clientId);if(anchorRootClientId!==select.getBlockRootClientId(selectionFocus.clientId))return;const blockOrder=select.getBlockOrder(anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const targetSelection=isForward?selectionEnd:selectionStart,targetBlock=select.getBlock(targetSelection.clientId),targetBlockType=(0,blocks_build_module.E7)(targetBlock.name);if(!targetBlockType.merge)return;const selectionA=selectionStart,selectionB=selectionEnd,blockA=select.getBlock(selectionA.clientId),blockB=select.getBlock(selectionB.clientId),htmlA=blockA.attributes[selectionA.attributeKey],htmlB=blockB.attributes[selectionB.attributeKey];let valueA=(0,rich_text_build_module.vt)({html:htmlA}),valueB=(0,rich_text_build_module.vt)({html:htmlB});valueA=(0,rich_text_build_module.TF)(valueA,selectionA.offset,valueA.text.length),valueB=(0,rich_text_build_module.Yr)(valueB,"Â†",0,selectionB.offset);const cloneA=(0,blocks_build_module.JB)(blockA,{[selectionA.attributeKey]:(0,rich_text_build_module.Ky)({value:valueA})}),cloneB=(0,blocks_build_module.JB)(blockB,{[selectionB.attributeKey]:(0,rich_text_build_module.Ky)({value:valueB})}),followingBlock=isForward?cloneA:cloneB,blocksWithTheSameType=blockA.name===blockB.name?[followingBlock]:(0,blocks_build_module.bh)(followingBlock,targetBlockType.name);if(!blocksWithTheSameType||!blocksWithTheSameType.length)return;let updatedAttributes;if(isForward){const blockToMerge=blocksWithTheSameType.pop();updatedAttributes=targetBlockType.merge(blockToMerge.attributes,cloneB.attributes)}else{const blockToMerge=blocksWithTheSameType.shift();updatedAttributes=targetBlockType.merge(cloneA.attributes,blockToMerge.attributes)}const newAttributeKey=retrieveSelectedAttribute(updatedAttributes),convertedHtml=updatedAttributes[newAttributeKey],convertedValue=(0,rich_text_build_module.vt)({html:convertedHtml}),newOffset=convertedValue.text.indexOf("Â†"),newValue=(0,rich_text_build_module.TF)(convertedValue,newOffset,newOffset+1),newHtml=(0,rich_text_build_module.Ky)({value:newValue});updatedAttributes[newAttributeKey]=newHtml;const selectedBlockClientIds=select.getSelectedBlockClientIds(),replacement=[...isForward?blocksWithTheSameType:[],{...targetBlock,attributes:{...targetBlock.attributes,...updatedAttributes}},...isForward?[]:blocksWithTheSameType];registry.batch((()=>{dispatch.selectionChange(targetBlock.clientId,newAttributeKey,newOffset,newOffset),dispatch.replaceBlocks(selectedBlockClientIds,replacement,0,select.getSelectedBlocksInitialCaretPosition())}))},__unstableSplitSelection=(blocks=[])=>({registry,select,dispatch})=>{const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd(),anchorRootClientId=select.getBlockRootClientId(selectionAnchor.clientId),focusRootClientId=select.getBlockRootClientId(selectionFocus.clientId);if(anchorRootClientId!==focusRootClientId)return;const blockOrder=select.getBlockOrder(anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const selectionA=selectionStart,selectionB=selectionEnd,blockA=select.getBlock(selectionA.clientId),blockB=select.getBlock(selectionB.clientId),blockAType=(0,blocks_build_module.E7)(blockA.name),blockBType=(0,blocks_build_module.E7)(blockB.name),attributeKeyA="string"==typeof selectionA.attributeKey?selectionA.attributeKey:findRichTextAttributeKey(blockAType),attributeKeyB="string"==typeof selectionB.attributeKey?selectionB.attributeKey:findRichTextAttributeKey(blockBType),blockAttributes=select.getBlockAttributes(selectionA.clientId),bindings=blockAttributes?.metadata?.bindings;if(bindings?.[attributeKeyA]){if(blocks.length){const{createWarningNotice}=registry.dispatch(notices_build_module.M);return void createWarningNotice((0,i18n_build_module.__)("Blocks can't be inserted into other blocks with bindings"),{type:"snackbar"})}return void dispatch.insertAfterBlock(selectionA.clientId)}if(!attributeKeyA||!attributeKeyB||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return;if(selectionA.clientId===selectionB.clientId&&attributeKeyA===attributeKeyB&&selectionA.offset===selectionB.offset)if(blocks.length){if((0,blocks_build_module.Xw)(blockA))return void dispatch.replaceBlocks([selectionA.clientId],blocks,blocks.length-1,-1)}else if(!select.getBlockOrder(selectionA.clientId).length){function createEmpty(){const defaultBlockName=(0,blocks_build_module.K$)();return select.canInsertBlockType(defaultBlockName,anchorRootClientId)?(0,blocks_build_module.Wv)(defaultBlockName):(0,blocks_build_module.Wv)(select.getBlockName(selectionA.clientId))}const length=blockAttributes[attributeKeyA].length;if(0===selectionA.offset&&length)return void dispatch.insertBlocks([createEmpty()],select.getBlockIndex(selectionA.clientId),anchorRootClientId,!1);if(selectionA.offset===length)return void dispatch.insertBlocks([createEmpty()],select.getBlockIndex(selectionA.clientId)+1,anchorRootClientId)}const htmlA=blockA.attributes[attributeKeyA],htmlB=blockB.attributes[attributeKeyB];let valueA=(0,rich_text_build_module.vt)({html:htmlA}),valueB=(0,rich_text_build_module.vt)({html:htmlB});valueA=(0,rich_text_build_module.TF)(valueA,selectionA.offset,valueA.text.length),valueB=(0,rich_text_build_module.TF)(valueB,0,selectionB.offset);let head={...blockA,innerBlocks:blockA.clientId===blockB.clientId?[]:blockA.innerBlocks,attributes:{...blockA.attributes,[attributeKeyA]:(0,rich_text_build_module.Ky)({value:valueA})}},tail={...blockB,clientId:blockA.clientId===blockB.clientId?(0,blocks_build_module.Wv)(blockB.name).clientId:blockB.clientId,attributes:{...blockB.attributes,[attributeKeyB]:(0,rich_text_build_module.Ky)({value:valueB})}};const defaultBlockName=(0,blocks_build_module.K$)();if(blockA.clientId===blockB.clientId&&defaultBlockName&&tail.name!==defaultBlockName&&select.canInsertBlockType(defaultBlockName,anchorRootClientId)){const switched=(0,blocks_build_module.bh)(tail,defaultBlockName);1===switched?.length&&(tail=switched[0])}if(!blocks.length)return void dispatch.replaceBlocks(select.getSelectedBlockClientIds(),[head,tail]);let selection;const output=[],clonedBlocks=[...blocks],firstBlock=clonedBlocks.shift(),headType=(0,blocks_build_module.E7)(head.name),firstBlocks=headType.merge&&firstBlock.name===headType.name?[firstBlock]:(0,blocks_build_module.bh)(firstBlock,headType.name);if(firstBlocks?.length){const first=firstBlocks.shift();head={...head,attributes:{...head.attributes,...headType.merge(head.attributes,first.attributes)}},output.push(head),selection={clientId:head.clientId,attributeKey:attributeKeyA,offset:(0,rich_text_build_module.vt)({html:head.attributes[attributeKeyA]}).text.length},clonedBlocks.unshift(...firstBlocks)}else(0,blocks_build_module.C5)(head)||output.push(head),output.push(firstBlock);const lastBlock=clonedBlocks.pop(),tailType=(0,blocks_build_module.E7)(tail.name);if(clonedBlocks.length&&output.push(...clonedBlocks),lastBlock){const lastBlocks=tailType.merge&&tailType.name===lastBlock.name?[lastBlock]:(0,blocks_build_module.bh)(lastBlock,tailType.name);if(lastBlocks?.length){const last=lastBlocks.pop();output.push({...tail,attributes:{...tail.attributes,...tailType.merge(last.attributes,tail.attributes)}}),output.push(...lastBlocks),selection={clientId:tail.clientId,attributeKey:attributeKeyB,offset:(0,rich_text_build_module.vt)({html:last.attributes[attributeKeyB]}).text.length}}else output.push(lastBlock),(0,blocks_build_module.C5)(tail)||output.push(tail)}else(0,blocks_build_module.C5)(tail)||output.push(tail);registry.batch((()=>{dispatch.replaceBlocks(select.getSelectedBlockClientIds(),output,output.length-1,0),selection&&dispatch.selectionChange(selection.clientId,selection.attributeKey,selection.offset,selection.offset)}))},__unstableExpandSelection=()=>({select,dispatch})=>{const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd();dispatch.selectionChange({start:{clientId:selectionAnchor.clientId},end:{clientId:selectionFocus.clientId}})},mergeBlocks=(firstBlockClientId,secondBlockClientId)=>({registry,select,dispatch})=>{const clientIdA=firstBlockClientId,clientIdB=secondBlockClientId,blockA=select.getBlock(clientIdA),blockAType=(0,blocks_build_module.E7)(blockA.name);if(!blockAType)return;const blockB=select.getBlock(clientIdB);if(!blockAType.merge&&(0,blocks_build_module.bI)(blockA.name,"__experimentalOnMerge")){const blocksWithTheSameType=(0,blocks_build_module.bh)(blockB,blockAType.name);if(1!==blocksWithTheSameType?.length)return void dispatch.selectBlock(blockA.clientId);const[blockWithSameType]=blocksWithTheSameType;return blockWithSameType.innerBlocks.length<1?void dispatch.selectBlock(blockA.clientId):void registry.batch((()=>{dispatch.insertBlocks(blockWithSameType.innerBlocks,void 0,clientIdA),dispatch.removeBlock(clientIdB),dispatch.selectBlock(blockWithSameType.innerBlocks[0].clientId);const nextBlockClientId=select.getNextBlockClientId(clientIdA);if(nextBlockClientId&&select.getBlockName(clientIdA)===select.getBlockName(nextBlockClientId)){const rootAttributes=select.getBlockAttributes(clientIdA),previousRootAttributes=select.getBlockAttributes(nextBlockClientId);Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key]))&&(dispatch.moveBlocksToPosition(select.getBlockOrder(nextBlockClientId),nextBlockClientId,clientIdA),dispatch.removeBlock(nextBlockClientId,!1))}}))}if((0,blocks_build_module.Xw)(blockA))return void dispatch.removeBlock(clientIdA,select.isBlockSelected(clientIdA));if((0,blocks_build_module.Xw)(blockB))return void dispatch.removeBlock(clientIdB,select.isBlockSelected(clientIdB));if(!blockAType.merge)return void dispatch.selectBlock(blockA.clientId);const blockBType=(0,blocks_build_module.E7)(blockB.name),{clientId,attributeKey,offset}=select.getSelectionStart(),attributeDefinition=(clientId===clientIdA?blockAType:blockBType).attributes[attributeKey],canRestoreTextSelection=(clientId===clientIdA||clientId===clientIdB)&&void 0!==attributeKey&&void 0!==offset&&!!attributeDefinition;attributeDefinition||("number"==typeof attributeKey?window.console.error("RichText needs an identifier prop that is the block attribute key of the attribute it controls. Its type is expected to be a string, but was "+typeof attributeKey):window.console.error("The RichText identifier prop does not match any attributes defined by the block."));const cloneA=(0,blocks_build_module.JB)(blockA),cloneB=(0,blocks_build_module.JB)(blockB);if(canRestoreTextSelection){const selectedBlock=clientId===clientIdA?cloneA:cloneB,html=selectedBlock.attributes[attributeKey],value=(0,rich_text_build_module.Yr)((0,rich_text_build_module.vt)({html}),"Â†",offset,offset);selectedBlock.attributes[attributeKey]=(0,rich_text_build_module.Ky)({value})}const blocksWithTheSameType=blockA.name===blockB.name?[cloneB]:(0,blocks_build_module.bh)(cloneB,blockA.name);if(!blocksWithTheSameType||!blocksWithTheSameType.length)return;const updatedAttributes=blockAType.merge(cloneA.attributes,blocksWithTheSameType[0].attributes);if(canRestoreTextSelection){const newAttributeKey=retrieveSelectedAttribute(updatedAttributes),convertedHtml=updatedAttributes[newAttributeKey],convertedValue=(0,rich_text_build_module.vt)({html:convertedHtml}),newOffset=convertedValue.text.indexOf("Â†"),newValue=(0,rich_text_build_module.TF)(convertedValue,newOffset,newOffset+1),newHtml=(0,rich_text_build_module.Ky)({value:newValue});updatedAttributes[newAttributeKey]=newHtml,dispatch.selectionChange(blockA.clientId,newAttributeKey,newOffset,newOffset)}dispatch.replaceBlocks([blockA.clientId,blockB.clientId],[{...blockA,attributes:{...blockA.attributes,...updatedAttributes}},...blocksWithTheSameType.slice(1)],0)},removeBlocks=(clientIds,selectPrevious=!0)=>privateRemoveBlocks(clientIds,selectPrevious);function removeBlock(clientId,selectPrevious){return removeBlocks([clientId],selectPrevious)}function replaceInnerBlocks(rootClientId,blocks,updateSelection=!1,initialPosition=0){return{type:"REPLACE_INNER_BLOCKS",rootClientId,blocks,updateSelection,initialPosition:updateSelection?initialPosition:null,time:Date.now()}}function toggleBlockMode(clientId){return{type:"TOGGLE_BLOCK_MODE",clientId}}function startTyping(){return{type:"START_TYPING"}}function stopTyping(){return{type:"STOP_TYPING"}}function startDraggingBlocks(clientIds=[]){return{type:"START_DRAGGING_BLOCKS",clientIds}}function stopDraggingBlocks(){return{type:"STOP_DRAGGING_BLOCKS"}}function enterFormattedText(){return(0,deprecated_build_module.A)('wp.data.dispatch( "core/block-editor" ).enterFormattedText',{since:"6.1",version:"6.3"}),{type:"DO_NOTHING"}}function exitFormattedText(){return(0,deprecated_build_module.A)('wp.data.dispatch( "core/block-editor" ).exitFormattedText',{since:"6.1",version:"6.3"}),{type:"DO_NOTHING"}}function selectionChange(clientId,attributeKey,startOffset,endOffset){return"string"==typeof clientId?{type:"SELECTION_CHANGE",clientId,attributeKey,startOffset,endOffset}:{type:"SELECTION_CHANGE",...clientId}}const insertDefaultBlock=(attributes,rootClientId,index)=>({dispatch})=>{const defaultBlockName=(0,blocks_build_module.K$)();if(!defaultBlockName)return;const block=(0,blocks_build_module.Wv)(defaultBlockName,attributes);return dispatch.insertBlock(block,index,rootClientId)};function updateBlockListSettings(clientId,settings){return{type:"UPDATE_BLOCK_LIST_SETTINGS",clientId,settings}}function updateSettings(settings){return __experimentalUpdateSettings(settings,{stripExperimentalSettings:!0})}function __unstableSaveReusableBlock(id,updatedId){return{type:"SAVE_REUSABLE_BLOCK_SUCCESS",id,updatedId}}function __unstableMarkLastChangeAsPersistent(){return{type:"MARK_LAST_CHANGE_AS_PERSISTENT"}}function __unstableMarkNextChangeAsNotPersistent(){return{type:"MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"}}const __unstableMarkAutomaticChange=()=>({dispatch})=>{dispatch({type:"MARK_AUTOMATIC_CHANGE"});const{requestIdleCallback=cb=>setTimeout(cb,100)}=window;requestIdleCallback((()=>{dispatch({type:"MARK_AUTOMATIC_CHANGE_FINAL"})}))},setNavigationMode=(isNavigationMode=!0)=>({dispatch})=>{dispatch.__unstableSetEditorMode(isNavigationMode?"navigation":"edit")},__unstableSetEditorMode=mode=>({registry})=>{registry.dispatch(store.M).set("core","editorTool",mode),"navigation"===mode?(0,a11y_build_module.L)((0,i18n_build_module.__)("You are currently in Write mode.")):"edit"===mode&&(0,a11y_build_module.L)((0,i18n_build_module.__)("You are currently in Design mode."))};function setBlockMovingClientId(){return(0,deprecated_build_module.A)('wp.data.dispatch( "core/block-editor" ).setBlockMovingClientId',{since:"6.7",hint:"Block moving mode feature has been removed"}),{type:"DO_NOTHING"}}const duplicateBlocks=(clientIds,updateSelection=!0)=>({select,dispatch})=>{if(!clientIds||!clientIds.length)return;const blocks=select.getBlocksByClientId(clientIds);if(blocks.some((block=>!block)))return;if(blocks.map((block=>block.name)).some((blockName=>!(0,blocks_build_module.pN)(blockName,"multiple",!0))))return;const rootClientId=select.getBlockRootClientId(clientIds[0]),clientIdsArray=actions_castArray(clientIds),lastSelectedIndex=select.getBlockIndex(clientIdsArray[clientIdsArray.length-1]),clonedBlocks=blocks.map((block=>(0,blocks_build_module.Eb)(block)));return dispatch.insertBlocks(clonedBlocks,lastSelectedIndex+1,rootClientId,updateSelection),clonedBlocks.length>1&&updateSelection&&dispatch.multiSelect(clonedBlocks[0].clientId,clonedBlocks[clonedBlocks.length-1].clientId),clonedBlocks.map((block=>block.clientId))},insertBeforeBlock=clientId=>({select,dispatch})=>{if(!clientId)return;const rootClientId=select.getBlockRootClientId(clientId);if(select.getTemplateLock(rootClientId))return;const blockIndex=select.getBlockIndex(clientId),directInsertBlock=rootClientId?select.getDirectInsertBlock(rootClientId):null;if(!directInsertBlock)return dispatch.insertDefaultBlock({},rootClientId,blockIndex);const copiedAttributes={};if(directInsertBlock.attributesToCopy){const attributes=select.getBlockAttributes(clientId);directInsertBlock.attributesToCopy.forEach((key=>{attributes[key]&&(copiedAttributes[key]=attributes[key])}))}const block=(0,blocks_build_module.Wv)(directInsertBlock.name,{...directInsertBlock.attributes,...copiedAttributes});return dispatch.insertBlock(block,blockIndex,rootClientId)},insertAfterBlock=clientId=>({select,dispatch})=>{if(!clientId)return;const rootClientId=select.getBlockRootClientId(clientId);if(select.getTemplateLock(rootClientId))return;const blockIndex=select.getBlockIndex(clientId),directInsertBlock=rootClientId?select.getDirectInsertBlock(rootClientId):null;if(!directInsertBlock)return dispatch.insertDefaultBlock({},rootClientId,blockIndex+1);const copiedAttributes={};if(directInsertBlock.attributesToCopy){const attributes=select.getBlockAttributes(clientId);directInsertBlock.attributesToCopy.forEach((key=>{attributes[key]&&(copiedAttributes[key]=attributes[key])}))}const block=(0,blocks_build_module.Wv)(directInsertBlock.name,{...directInsertBlock.attributes,...copiedAttributes});return dispatch.insertBlock(block,blockIndex+1,rootClientId)};function toggleBlockHighlight(clientId,isHighlighted){return{type:"TOGGLE_BLOCK_HIGHLIGHT",clientId,isHighlighted}}const flashBlock=clientId=>async({dispatch})=>{dispatch(toggleBlockHighlight(clientId,!0)),await new Promise((resolve=>setTimeout(resolve,150))),dispatch(toggleBlockHighlight(clientId,!1))};function setHasControlledInnerBlocks(clientId,hasControlledInnerBlocks){return{type:"SET_HAS_CONTROLLED_INNER_BLOCKS",hasControlledInnerBlocks,clientId}}function setBlockVisibility(updates){return{type:"SET_BLOCK_VISIBILITY",updates}}function __unstableSetTemporarilyEditingAsBlocks(temporarilyEditingAsBlocks,focusModeToRevert){return{type:"SET_TEMPORARILY_EDITING_AS_BLOCKS",temporarilyEditingAsBlocks,focusModeToRevert}}const registerInserterMediaCategory=category=>({select,dispatch})=>{if(!category||"object"!=typeof category)return void console.error("Category should be an `InserterMediaCategory` object.");if(!category.name)return void console.error("Category should have a `name` that should be unique among all media categories.");if(!category.labels?.name)return void console.error("Category should have a `labels.name`.");if(!["image","audio","video"].includes(category.mediaType))return void console.error("Category should have `mediaType` property that is one of `image|audio|video`.");if(!category.fetch||"function"!=typeof category.fetch)return void console.error("Category should have a `fetch` function defined with the following signature `(InserterMediaRequest) => Promise<InserterMediaItem[]>`.");const registeredInserterMediaCategories=select.getRegisteredInserterMediaCategories();registeredInserterMediaCategories.some((({name})=>name===category.name))?console.error(`A category is already registered with the same name: "${category.name}".`):registeredInserterMediaCategories.some((({labels:{name}={}})=>name===category.labels?.name))?console.error(`A category is already registered with the same labels.name: "${category.labels.name}".`):dispatch({type:"REGISTER_INSERTER_MEDIA_CATEGORY",category:{...category,isExternalResource:!0}})};function setBlockEditingMode(clientId="",mode){return{type:"SET_BLOCK_EDITING_MODE",clientId,mode}}function unsetBlockEditingMode(clientId=""){return{type:"UNSET_BLOCK_EDITING_MODE",clientId}}var constants=__webpack_require__("./packages/block-editor/src/store/constants.js");const storeConfig={reducer,selectors,actions:actions_namespaceObject},store_store=(0,redux_store.A)(constants.E,{...storeConfig,persist:["preferences"]}),registeredStore=(0,build_module.ti)(constants.E,{...storeConfig,persist:["preferences"]});(0,lock_unlock.T)(registeredStore).registerPrivateActions(private_actions_namespaceObject),(0,lock_unlock.T)(registeredStore).registerPrivateSelectors(private_selectors),(0,lock_unlock.T)(store_store).registerPrivateActions(private_actions_namespaceObject),(0,lock_unlock.T)(store_store).registerPrivateSelectors(private_selectors)},"./packages/block-editor/src/store/private-keys.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{WO:()=>selectBlockPatternsKey,dq:()=>reusableBlocksSelectKey,v7:()=>sectionRootClientIdKey});Symbol("globalStylesDataKey"),Symbol("globalStylesLinks");const selectBlockPatternsKey=Symbol("selectBlockPatternsKey"),reusableBlocksSelectKey=Symbol("reusableBlocksSelect"),sectionRootClientIdKey=Symbol("sectionRootClientIdKey")},"./packages/block-editor/src/store/private-selectors.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{getAllPatterns:()=>getAllPatterns,getBlockRemovalRules:()=>getBlockRemovalRules,getBlockSettings:()=>getBlockSettings,getBlockStyles:()=>getBlockStyles,getBlockWithoutAttributes:()=>getBlockWithoutAttributes,getClosestAllowedInsertionPoint:()=>getClosestAllowedInsertionPoint,getClosestAllowedInsertionPointForPattern:()=>getClosestAllowedInsertionPointForPattern,getContentLockingParent:()=>getContentLockingParent,getEnabledBlockParents:()=>getEnabledBlockParents,getEnabledClientIdsTree:()=>getEnabledClientIdsTree,getExpandedBlock:()=>getExpandedBlock,getInserterMediaCategories:()=>getInserterMediaCategories,getInsertionPoint:()=>getInsertionPoint,getLastFocus:()=>getLastFocus,getLastInsertedBlocksClientIds:()=>getLastInsertedBlocksClientIds,getOpenedBlockSettingsMenu:()=>getOpenedBlockSettingsMenu,getParentSectionBlock:()=>getParentSectionBlock,getPatternBySlug:()=>getPatternBySlug,getRegisteredInserterMediaCategories:()=>getRegisteredInserterMediaCategories,getRemovalPromptData:()=>getRemovalPromptData,getReusableBlocks:()=>getReusableBlocks,getSectionRootClientId:()=>getSectionRootClientId,getStyleOverrides:()=>getStyleOverrides,getTemporarilyEditingAsBlocks:()=>getTemporarilyEditingAsBlocks,getTemporarilyEditingFocusModeToRevert:()=>getTemporarilyEditingFocusModeToRevert,getZoomLevel:()=>getZoomLevel,hasAllowedPatterns:()=>hasAllowedPatterns,isBlockInterfaceHidden:()=>isBlockInterfaceHidden,isBlockSubtreeDisabled:()=>isBlockSubtreeDisabled,isDragging:()=>isDragging,isResolvingPatterns:()=>isResolvingPatterns,isSectionBlock:()=>isSectionBlock,isZoomOut:()=>isZoomOut});var rememo=__webpack_require__("./node_modules/rememo/rememo.js"),factory=__webpack_require__("./packages/data/build-module/factory.js"),selectors=__webpack_require__("./packages/block-editor/src/store/selectors.js"),utils=__webpack_require__("./packages/block-editor/src/store/utils.js"),block_patterns_tab_utils=__webpack_require__("./packages/block-editor/src/components/inserter/block-patterns-tab/utils.js"),constants=__webpack_require__("./packages/block-editor/src/store/constants.js"),lock_unlock=__webpack_require__("./packages/block-editor/src/lock-unlock.js"),private_keys=__webpack_require__("./packages/block-editor/src/store/private-keys.js"),build_module=__webpack_require__("./packages/blocks/build-module/index.js"),hooks_build_module=__webpack_require__("./packages/hooks/build-module/index.js");const getValueFromObjectPath=(object,path,defaultValue)=>{var _value;const arrayPath=Array.isArray(path)?path:path.split(".");let value=object;return arrayPath.forEach((fieldName=>{value=value?.[fieldName]})),null!==(_value=value)&&void 0!==_value?_value:defaultValue};const blockedPaths=["color","border","dimensions","typography","spacing"],deprecatedFlags={"color.palette":settings=>settings.colors,"color.gradients":settings=>settings.gradients,"color.custom":settings=>void 0===settings.disableCustomColors?void 0:!settings.disableCustomColors,"color.customGradient":settings=>void 0===settings.disableCustomGradients?void 0:!settings.disableCustomGradients,"typography.fontSizes":settings=>settings.fontSizes,"typography.customFontSize":settings=>void 0===settings.disableCustomFontSizes?void 0:!settings.disableCustomFontSizes,"typography.lineHeight":settings=>settings.enableCustomLineHeight,"spacing.units":settings=>{if(void 0!==settings.enableCustomUnits)return!0===settings.enableCustomUnits?["px","em","rem","vh","vw","%"]:settings.enableCustomUnits},"spacing.padding":settings=>settings.enableCustomSpacing},prefixedFlags={"border.customColor":"border.color","border.customStyle":"border.style","border.customWidth":"border.width","typography.customFontStyle":"typography.fontStyle","typography.customFontWeight":"typography.fontWeight","typography.customLetterSpacing":"typography.letterSpacing","typography.customTextDecorations":"typography.textDecoration","typography.customTextTransforms":"typography.textTransform","border.customRadius":"border.radius","spacing.customMargin":"spacing.margin","spacing.customPadding":"spacing.padding","typography.customLineHeight":"typography.lineHeight"},removeCustomPrefixes=path=>prefixedFlags[path]||path;function getBlockSettings(state,clientId,...paths){const blockName=(0,selectors.getBlockName)(state,clientId),candidates=[];if(clientId){let id=clientId;do{const name=(0,selectors.getBlockName)(state,id);(0,build_module.pN)(name,"__experimentalSettings",!1)&&candidates.push(id)}while(id=state.blocks.parents.get(id))}return paths.map((path=>{if(blockedPaths.includes(path))return void console.warn("Top level useSetting paths are disabled. Please use a subpath to query the information needed.");let result=(0,hooks_build_module.W5)("blockEditor.useSetting.before",void 0,path,clientId,blockName);if(void 0!==result)return result;const normalizedPath=removeCustomPrefixes(path);for(const candidateClientId of candidates){var _getValueFromObjectPa;const candidateAtts=(0,selectors.getBlockAttributes)(state,candidateClientId);if(result=null!==(_getValueFromObjectPa=getValueFromObjectPath(candidateAtts.settings?.blocks?.[blockName],normalizedPath))&&void 0!==_getValueFromObjectPa?_getValueFromObjectPa:getValueFromObjectPath(candidateAtts.settings,normalizedPath),void 0!==result)break}const settings=(0,selectors.getSettings)(state);var _ref,_result$custom;if(void 0===result&&blockName&&(result=getValueFromObjectPath(settings.__experimentalFeatures?.blocks?.[blockName],normalizedPath)),void 0===result&&(result=getValueFromObjectPath(settings.__experimentalFeatures,normalizedPath)),void 0!==result)return build_module.G8[normalizedPath]?null!==(_ref=null!==(_result$custom=result.custom)&&void 0!==_result$custom?_result$custom:result.theme)&&void 0!==_ref?_ref:result.default:result;const deprecatedSettingsValue=deprecatedFlags[normalizedPath]?.(settings);return void 0!==deprecatedSettingsValue?deprecatedSettingsValue:"typography.dropCap"===normalizedPath||void 0}))}function isBlockInterfaceHidden(state){return state.isBlockInterfaceHidden}function getLastInsertedBlocksClientIds(state){return state?.lastBlockInserted?.clientIds}function getBlockWithoutAttributes(state,clientId){return state.blocks.byClientId.get(clientId)}const isBlockSubtreeDisabled=(state,clientId)=>{const isChildSubtreeDisabled=childClientId=>"disabled"===(0,selectors.getBlockEditingMode)(state,childClientId)&&(0,selectors.getBlockOrder)(state,childClientId).every(isChildSubtreeDisabled);return(0,selectors.getBlockOrder)(state,clientId).every(isChildSubtreeDisabled)};const getEnabledClientIdsTree=(0,rememo.A)((function getEnabledClientIdsTreeUnmemoized(state,rootClientId){const blockOrder=(0,selectors.getBlockOrder)(state,rootClientId),result=[];for(const clientId of blockOrder){const innerBlocks=getEnabledClientIdsTreeUnmemoized(state,clientId);"disabled"!==(0,selectors.getBlockEditingMode)(state,clientId)?result.push({clientId,innerBlocks}):result.push(...innerBlocks)}return result}),(state=>[state.blocks.order,state.blockEditingModes,state.settings.templateLock,state.blockListSettings,state.editorMode,state.zoomLevel,getSectionRootClientId(state)])),getEnabledBlockParents=(0,rememo.A)(((state,clientId,ascending=!1)=>(0,selectors.getBlockParents)(state,clientId,ascending).filter((parent=>"disabled"!==(0,selectors.getBlockEditingMode)(state,parent)))),(state=>[state.blocks.parents,state.blockEditingModes,state.settings.templateLock,state.blockListSettings]));function getRemovalPromptData(state){return state.removalPromptData}function getBlockRemovalRules(state){return state.blockRemovalRules}function getOpenedBlockSettingsMenu(state){return state.openedBlockSettingsMenu}const getStyleOverrides=(0,rememo.A)((state=>{const clientIdMap=(0,selectors.getClientIdsWithDescendants)(state).reduce(((acc,clientId,index)=>(acc[clientId]=index,acc)),{});return[...state.styleOverrides].sort(((overrideA,overrideB)=>{var _clientIdMap$clientId,_clientIdMap$clientId2;const[,{clientId:clientIdA}]=overrideA,[,{clientId:clientIdB}]=overrideB;return(null!==(_clientIdMap$clientId=clientIdMap[clientIdA])&&void 0!==_clientIdMap$clientId?_clientIdMap$clientId:-1)-(null!==(_clientIdMap$clientId2=clientIdMap[clientIdB])&&void 0!==_clientIdMap$clientId2?_clientIdMap$clientId2:-1)}))}),(state=>[state.blocks.order,state.styleOverrides]));function getRegisteredInserterMediaCategories(state){return state.registeredInserterMediaCategories}const getInserterMediaCategories=(0,rememo.A)((state=>{const{settings:{inserterMediaCategories,allowedMimeTypes,enableOpenverseMediaCategory},registeredInserterMediaCategories}=state;if(!inserterMediaCategories&&!registeredInserterMediaCategories.length||!allowedMimeTypes)return;const coreInserterMediaCategoriesNames=inserterMediaCategories?.map((({name})=>name))||[];return[...inserterMediaCategories||[],...(registeredInserterMediaCategories||[]).filter((({name})=>!coreInserterMediaCategoriesNames.includes(name)))].filter((category=>!(!enableOpenverseMediaCategory&&"openverse"===category.name)&&Object.values(allowedMimeTypes).some((mimeType=>mimeType.startsWith(`${category.mediaType}/`)))))}),(state=>[state.settings.inserterMediaCategories,state.settings.allowedMimeTypes,state.settings.enableOpenverseMediaCategory,state.registeredInserterMediaCategories])),hasAllowedPatterns=(0,factory.N)((select=>(0,rememo.A)(((state,rootClientId=null)=>{const{getAllPatterns}=(0,lock_unlock.T)(select(constants.E)),patterns=getAllPatterns(),{allowedBlockTypes}=(0,selectors.getSettings)(state);return patterns.some((pattern=>{const{inserter=!0}=pattern;if(!inserter)return!1;const grammar=(0,utils.Yb)(pattern);return(0,utils.S0)(grammar,allowedBlockTypes)&&grammar.every((({name:blockName})=>(0,selectors.canInsertBlockType)(state,blockName,rootClientId)))}))}),((state,rootClientId)=>[...(0,utils.pk)(select)(state),...(0,utils.LK)(state,rootClientId)]))));function mapUserPattern(userPattern,__experimentalUserPatternCategories=[]){return{name:`core/block/${userPattern.id}`,id:userPattern.id,type:block_patterns_tab_utils.KG.user,title:userPattern.title.raw,categories:userPattern.wp_pattern_category.map((catId=>{const category=__experimentalUserPatternCategories.find((({id})=>id===catId));return category?category.slug:catId})),content:userPattern.content.raw,syncStatus:userPattern.wp_pattern_sync_status}}const getPatternBySlug=(0,factory.N)((select=>(0,rememo.A)(((state,patternName)=>{var _state$settings$__exp,_state$settings$selec;if(patternName?.startsWith("core/block/")){const _id=parseInt(patternName.slice(11),10),block=(0,lock_unlock.T)(select(constants.E)).getReusableBlocks().find((({id})=>id===_id));return block?mapUserPattern(block,state.settings.__experimentalUserPatternCategories):null}return[...null!==(_state$settings$__exp=state.settings.__experimentalBlockPatterns)&&void 0!==_state$settings$__exp?_state$settings$__exp:[],...null!==(_state$settings$selec=state.settings[private_keys.WO]?.(select))&&void 0!==_state$settings$selec?_state$settings$selec:[]].find((({name})=>name===patternName))}),((state,patternName)=>patternName?.startsWith("core/block/")?[(0,lock_unlock.T)(select(constants.E)).getReusableBlocks(),state.settings.__experimentalReusableBlocks]:[state.settings.__experimentalBlockPatterns,state.settings[private_keys.WO]?.(select)])))),getAllPatterns=(0,factory.N)((select=>(0,rememo.A)((state=>{var _state$settings$__exp2,_state$settings$selec2;return[...(0,lock_unlock.T)(select(constants.E)).getReusableBlocks().map((userPattern=>mapUserPattern(userPattern,state.settings.__experimentalUserPatternCategories))),...null!==(_state$settings$__exp2=state.settings.__experimentalBlockPatterns)&&void 0!==_state$settings$__exp2?_state$settings$__exp2:[],...null!==(_state$settings$selec2=state.settings[private_keys.WO]?.(select))&&void 0!==_state$settings$selec2?_state$settings$selec2:[]].filter(((x,index,arr)=>index===arr.findIndex((y=>x.name===y.name))))}),(0,utils.pk)(select)))),isResolvingPatterns=(0,factory.N)((select=>(0,rememo.A)((state=>{const blockPatternsSelect=state.settings[private_keys.WO],reusableBlocksSelect=state.settings[private_keys.dq];return!!blockPatternsSelect&&void 0===blockPatternsSelect(select)||!!reusableBlocksSelect&&void 0===reusableBlocksSelect(select)}),(0,utils.pk)(select)))),EMPTY_ARRAY=[],getReusableBlocks=(0,factory.N)((select=>state=>{var _ref;const reusableBlocksSelect=state.settings[private_keys.dq];return null!==(_ref=reusableBlocksSelect?reusableBlocksSelect(select):state.settings.__experimentalReusableBlocks)&&void 0!==_ref?_ref:EMPTY_ARRAY}));function getLastFocus(state){return state.lastFocus}function isDragging(state){return state.isDragging}function getExpandedBlock(state){return state.expandedBlock}const getContentLockingParent=(state,clientId)=>{let result,current=clientId;for(;!result&&(current=state.blocks.parents.get(current));)"contentOnly"===(0,selectors.getTemplateLock)(state,current)&&(result=current);return result},getParentSectionBlock=(state,clientId)=>{let result,current=clientId;for(;!result&&(current=state.blocks.parents.get(current));)isSectionBlock(state,current)&&(result=current);return result};function isSectionBlock(state,clientId){const sectionRootClientId=getSectionRootClientId(state),sectionClientIds=(0,selectors.getBlockOrder)(state,sectionRootClientId);return"core/block"===(0,selectors.getBlockName)(state,clientId)||"contentOnly"===(0,selectors.getTemplateLock)(state,clientId)||(0,selectors.isNavigationMode)(state)&&sectionClientIds.includes(clientId)}function getTemporarilyEditingAsBlocks(state){return state.temporarilyEditingAsBlocks}function getTemporarilyEditingFocusModeToRevert(state){return state.temporarilyEditingFocusModeRevert}const getBlockStyles=(0,rememo.A)(((state,clientIds)=>clientIds.reduce(((styles,clientId)=>(styles[clientId]=state.blocks.attributes.get(clientId)?.style,styles)),{})),((state,clientIds)=>[...clientIds.map((clientId=>state.blocks.attributes.get(clientId)?.style))]));function getSectionRootClientId(state){return state.settings?.[private_keys.v7]}function isZoomOut(state){return"auto-scaled"===state.zoomLevel||state.zoomLevel<100}function getZoomLevel(state){return state.zoomLevel}function getClosestAllowedInsertionPoint(state,name,clientId=""){const blockNames=Array.isArray(name)?name:[name],areBlockNamesAllowedInClientId=id=>blockNames.every((currentName=>(0,selectors.canInsertBlockType)(state,currentName,id)));if(!clientId){if(areBlockNamesAllowedInClientId(clientId))return clientId;const sectionRootClientId=getSectionRootClientId(state);return sectionRootClientId&&areBlockNamesAllowedInClientId(sectionRootClientId)?sectionRootClientId:null}let current=clientId;for(;null!==current&&!areBlockNamesAllowedInClientId(current);){current=(0,selectors.getBlockRootClientId)(state,current)}return current}function getClosestAllowedInsertionPointForPattern(state,pattern,clientId){const{allowedBlockTypes}=(0,selectors.getSettings)(state);if(!(0,utils.S0)((0,utils.Yb)(pattern),allowedBlockTypes))return null;return getClosestAllowedInsertionPoint(state,(0,utils.Yb)(pattern).map((({blockName:name})=>name)),clientId)}function getInsertionPoint(state){return state.insertionPoint}},"./packages/block-editor/src/store/selectors.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__experimentalGetActiveBlockIdByBlockNames:()=>__experimentalGetActiveBlockIdByBlockNames,__experimentalGetAllowedBlocks:()=>__experimentalGetAllowedBlocks,__experimentalGetAllowedPatterns:()=>__experimentalGetAllowedPatterns,__experimentalGetBlockListSettingsForBlocks:()=>__experimentalGetBlockListSettingsForBlocks,__experimentalGetDirectInsertBlock:()=>__experimentalGetDirectInsertBlock,__experimentalGetGlobalBlocksByName:()=>__experimentalGetGlobalBlocksByName,__experimentalGetLastBlockAttributeChanges:()=>__experimentalGetLastBlockAttributeChanges,__experimentalGetParsedPattern:()=>__experimentalGetParsedPattern,__experimentalGetPatternTransformItems:()=>__experimentalGetPatternTransformItems,__experimentalGetPatternsByBlockTypes:()=>__experimentalGetPatternsByBlockTypes,__experimentalGetReusableBlockTitle:()=>__experimentalGetReusableBlockTitle,__unstableGetBlockWithoutInnerBlocks:()=>__unstableGetBlockWithoutInnerBlocks,__unstableGetClientIdWithClientIdsTree:()=>__unstableGetClientIdWithClientIdsTree,__unstableGetClientIdsTree:()=>__unstableGetClientIdsTree,__unstableGetContentLockingParent:()=>__unstableGetContentLockingParent,__unstableGetEditorMode:()=>__unstableGetEditorMode,__unstableGetSelectedBlocksWithPartialSelection:()=>__unstableGetSelectedBlocksWithPartialSelection,__unstableGetTemporarilyEditingAsBlocks:()=>__unstableGetTemporarilyEditingAsBlocks,__unstableGetTemporarilyEditingFocusModeToRevert:()=>__unstableGetTemporarilyEditingFocusModeToRevert,__unstableGetVisibleBlocks:()=>__unstableGetVisibleBlocks,__unstableHasActiveBlockOverlayActive:()=>__unstableHasActiveBlockOverlayActive,__unstableIsFullySelected:()=>__unstableIsFullySelected,__unstableIsLastBlockChangeIgnored:()=>__unstableIsLastBlockChangeIgnored,__unstableIsSelectionCollapsed:()=>__unstableIsSelectionCollapsed,__unstableIsSelectionMergeable:()=>__unstableIsSelectionMergeable,__unstableIsWithinBlockOverlay:()=>__unstableIsWithinBlockOverlay,__unstableSelectionHasUnmergeableBlock:()=>__unstableSelectionHasUnmergeableBlock,areInnerBlocksControlled:()=>areInnerBlocksControlled,canEditBlock:()=>canEditBlock,canInsertBlockType:()=>canInsertBlockType,canInsertBlocks:()=>canInsertBlocks,canLockBlockType:()=>canLockBlockType,canMoveBlock:()=>canMoveBlock,canMoveBlocks:()=>canMoveBlocks,canRemoveBlock:()=>canRemoveBlock,canRemoveBlocks:()=>canRemoveBlocks,didAutomaticChange:()=>didAutomaticChange,getAdjacentBlockClientId:()=>getAdjacentBlockClientId,getAllowedBlocks:()=>getAllowedBlocks,getBlock:()=>getBlock,getBlockAttributes:()=>getBlockAttributes,getBlockCount:()=>getBlockCount,getBlockEditingMode:()=>getBlockEditingMode,getBlockHierarchyRootClientId:()=>getBlockHierarchyRootClientId,getBlockIndex:()=>getBlockIndex,getBlockInsertionPoint:()=>getBlockInsertionPoint,getBlockListSettings:()=>getBlockListSettings,getBlockMode:()=>getBlockMode,getBlockName:()=>getBlockName,getBlockNamesByClientId:()=>getBlockNamesByClientId,getBlockOrder:()=>getBlockOrder,getBlockParents:()=>getBlockParents,getBlockParentsByBlockName:()=>getBlockParentsByBlockName,getBlockRootClientId:()=>getBlockRootClientId,getBlockSelectionEnd:()=>getBlockSelectionEnd,getBlockSelectionStart:()=>getBlockSelectionStart,getBlockTransformItems:()=>getBlockTransformItems,getBlocks:()=>getBlocks,getBlocksByClientId:()=>getBlocksByClientId,getBlocksByName:()=>getBlocksByName,getClientIdsOfDescendants:()=>getClientIdsOfDescendants,getClientIdsWithDescendants:()=>getClientIdsWithDescendants,getDirectInsertBlock:()=>getDirectInsertBlock,getDraggedBlockClientIds:()=>getDraggedBlockClientIds,getFirstMultiSelectedBlockClientId:()=>getFirstMultiSelectedBlockClientId,getGlobalBlockCount:()=>getGlobalBlockCount,getHoveredBlockClientId:()=>getHoveredBlockClientId,getInserterItems:()=>getInserterItems,getLastMultiSelectedBlockClientId:()=>getLastMultiSelectedBlockClientId,getLowestCommonAncestorWithSelectedBlock:()=>getLowestCommonAncestorWithSelectedBlock,getMultiSelectedBlockClientIds:()=>getMultiSelectedBlockClientIds,getMultiSelectedBlocks:()=>getMultiSelectedBlocks,getMultiSelectedBlocksEndClientId:()=>getMultiSelectedBlocksEndClientId,getMultiSelectedBlocksStartClientId:()=>getMultiSelectedBlocksStartClientId,getNextBlockClientId:()=>getNextBlockClientId,getPatternsByBlockTypes:()=>getPatternsByBlockTypes,getPreviousBlockClientId:()=>getPreviousBlockClientId,getSelectedBlock:()=>getSelectedBlock,getSelectedBlockClientId:()=>getSelectedBlockClientId,getSelectedBlockClientIds:()=>getSelectedBlockClientIds,getSelectedBlockCount:()=>getSelectedBlockCount,getSelectedBlocksInitialCaretPosition:()=>getSelectedBlocksInitialCaretPosition,getSelectionEnd:()=>getSelectionEnd,getSelectionStart:()=>getSelectionStart,getSettings:()=>getSettings,getTemplate:()=>getTemplate,getTemplateLock:()=>getTemplateLock,hasBlockMovingClientId:()=>hasBlockMovingClientId,hasDraggedInnerBlock:()=>hasDraggedInnerBlock,hasInserterItems:()=>hasInserterItems,hasMultiSelection:()=>hasMultiSelection,hasSelectedBlock:()=>hasSelectedBlock,hasSelectedInnerBlock:()=>hasSelectedInnerBlock,isAncestorBeingDragged:()=>isAncestorBeingDragged,isAncestorMultiSelected:()=>isAncestorMultiSelected,isBlockBeingDragged:()=>isBlockBeingDragged,isBlockHighlighted:()=>isBlockHighlighted,isBlockInsertionPointVisible:()=>isBlockInsertionPointVisible,isBlockMultiSelected:()=>isBlockMultiSelected,isBlockSelected:()=>isBlockSelected,isBlockValid:()=>isBlockValid,isBlockVisible:()=>isBlockVisible,isBlockWithinSelection:()=>isBlockWithinSelection,isCaretWithinFormattedText:()=>isCaretWithinFormattedText,isDraggingBlocks:()=>isDraggingBlocks,isFirstMultiSelectedBlock:()=>isFirstMultiSelectedBlock,isGroupable:()=>isGroupable,isLastBlockChangePersistent:()=>isLastBlockChangePersistent,isMultiSelecting:()=>isMultiSelecting,isNavigationMode:()=>isNavigationMode,isSelectionEnabled:()=>isSelectionEnabled,isTyping:()=>isTyping,isUngroupable:()=>isUngroupable,isValidTemplate:()=>isValidTemplate,wasBlockJustInserted:()=>wasBlockJustInserted});var _wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/element/build-module/platform.js"),_wordpress_hooks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/hooks/build-module/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/icons/build-module/library/symbol.js"),_wordpress_rich_text__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/rich-text/build-module/index.js"),_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/deprecated/build-module/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rememo/rememo.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/data/build-module/factory.js"),_wordpress_preferences__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/preferences/build-module/store/index.js"),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/store/utils.js"),_utils_sorting__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/block-editor/src/utils/sorting.js"),_constants__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/block-editor/src/store/constants.js"),_lock_unlock__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/block-editor/src/lock-unlock.js"),_private_selectors__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/block-editor/src/store/private-selectors.js");const EMPTY_ARRAY=[],EMPTY_SET=new Set,DEFAULT_INSERTER_OPTIONS={[_utils__WEBPACK_IMPORTED_MODULE_3__.s4]:!0};function getBlockName(state,clientId){const block=state.blocks.byClientId.get(clientId);if("web"!==_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.A.OS&&"core/social-link"===block?.name){const attributes=state.blocks.attributes.get(clientId),{service}=null!=attributes?attributes:{};return service?`core/social-link-${service}`:"core/social-link"}return block?block.name:null}function isBlockValid(state,clientId){const block=state.blocks.byClientId.get(clientId);return!!block&&block.isValid}function getBlockAttributes(state,clientId){return state.blocks.byClientId.get(clientId)?state.blocks.attributes.get(clientId):null}function getBlock(state,clientId){return state.blocks.byClientId.has(clientId)?state.blocks.tree.get(clientId):null}const __unstableGetBlockWithoutInnerBlocks=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,clientId)=>{const block=state.blocks.byClientId.get(clientId);return block?{...block,attributes:getBlockAttributes(state,clientId)}:null}),((state,clientId)=>[state.blocks.byClientId.get(clientId),state.blocks.attributes.get(clientId)]));function getBlocks(state,rootClientId){const treeKey=rootClientId&&areInnerBlocksControlled(state,rootClientId)?"controlled||"+rootClientId:rootClientId||"";return state.blocks.tree.get(treeKey)?.innerBlocks||EMPTY_ARRAY}const __unstableGetClientIdWithClientIdsTree=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,clientId)=>((0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)("wp.data.select( 'core/block-editor' ).__unstableGetClientIdWithClientIdsTree",{since:"6.3",version:"6.5"}),{clientId,innerBlocks:__unstableGetClientIdsTree(state,clientId)})),(state=>[state.blocks.order])),__unstableGetClientIdsTree=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,rootClientId="")=>((0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)("wp.data.select( 'core/block-editor' ).__unstableGetClientIdsTree",{since:"6.3",version:"6.5"}),getBlockOrder(state,rootClientId).map((clientId=>__unstableGetClientIdWithClientIdsTree(state,clientId))))),(state=>[state.blocks.order])),getClientIdsOfDescendants=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,rootIds)=>{rootIds=Array.isArray(rootIds)?[...rootIds]:[rootIds];const ids=[];for(const rootId of rootIds){const order=state.blocks.order.get(rootId);order&&ids.push(...order)}let index=0;for(;index<ids.length;){const id=ids[index],order=state.blocks.order.get(id);order&&ids.splice(index+1,0,...order),index++}return ids}),(state=>[state.blocks.order])),getClientIdsWithDescendants=state=>getClientIdsOfDescendants(state,""),getGlobalBlockCount=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,blockName)=>{const clientIds=getClientIdsWithDescendants(state);if(!blockName)return clientIds.length;let count=0;for(const clientId of clientIds){state.blocks.byClientId.get(clientId).name===blockName&&count++}return count}),(state=>[state.blocks.order,state.blocks.byClientId])),getBlocksByName=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,blockName)=>{if(!blockName)return EMPTY_ARRAY;const blockNames=Array.isArray(blockName)?blockName:[blockName],foundBlocks=getClientIdsWithDescendants(state).filter((clientId=>{const block=state.blocks.byClientId.get(clientId);return blockNames.includes(block.name)}));return foundBlocks.length>0?foundBlocks:EMPTY_ARRAY}),(state=>[state.blocks.order,state.blocks.byClientId]));function __experimentalGetGlobalBlocksByName(state,blockName){return(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)("wp.data.select( 'core/block-editor' ).__experimentalGetGlobalBlocksByName",{since:"6.5",alternative:"wp.data.select( 'core/block-editor' ).getBlocksByName"}),getBlocksByName(state,blockName)}const getBlocksByClientId=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,clientIds)=>(Array.isArray(clientIds)?clientIds:[clientIds]).map((clientId=>getBlock(state,clientId)))),((state,clientIds)=>(Array.isArray(clientIds)?clientIds:[clientIds]).map((clientId=>state.blocks.tree.get(clientId))))),getBlockNamesByClientId=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,clientIds)=>getBlocksByClientId(state,clientIds).filter(Boolean).map((block=>block.name))),((state,clientIds)=>getBlocksByClientId(state,clientIds)));function getBlockCount(state,rootClientId){return getBlockOrder(state,rootClientId).length}function getSelectionStart(state){return state.selection.selectionStart}function getSelectionEnd(state){return state.selection.selectionEnd}function getBlockSelectionStart(state){return state.selection.selectionStart.clientId}function getBlockSelectionEnd(state){return state.selection.selectionEnd.clientId}function getSelectedBlockCount(state){const multiSelectedBlockCount=getMultiSelectedBlockClientIds(state).length;return multiSelectedBlockCount||(state.selection.selectionStart.clientId?1:0)}function hasSelectedBlock(state){const{selectionStart,selectionEnd}=state.selection;return!!selectionStart.clientId&&selectionStart.clientId===selectionEnd.clientId}function getSelectedBlockClientId(state){const{selectionStart,selectionEnd}=state.selection,{clientId}=selectionStart;return clientId&&clientId===selectionEnd.clientId?clientId:null}function getSelectedBlock(state){const clientId=getSelectedBlockClientId(state);return clientId?getBlock(state,clientId):null}function getBlockRootClientId(state,clientId){var _state$blocks$parents;return null!==(_state$blocks$parents=state.blocks.parents.get(clientId))&&void 0!==_state$blocks$parents?_state$blocks$parents:null}const getBlockParents=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,clientId,ascending=!1)=>{const parents=[];let current=clientId;for(;current=state.blocks.parents.get(current);)parents.push(current);return parents.length?ascending?parents:parents.reverse():EMPTY_ARRAY}),(state=>[state.blocks.parents])),getBlockParentsByBlockName=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,clientId,blockName,ascending=!1)=>{const parents=getBlockParents(state,clientId,ascending),hasName=Array.isArray(blockName)?name=>blockName.includes(name):name=>blockName===name;return parents.filter((id=>hasName(getBlockName(state,id))))}),(state=>[state.blocks.parents]));function getBlockHierarchyRootClientId(state,clientId){let parent,current=clientId;do{parent=current,current=state.blocks.parents.get(current)}while(current);return parent}function getLowestCommonAncestorWithSelectedBlock(state,clientId){const selectedId=getSelectedBlockClientId(state),clientParents=[...getBlockParents(state,clientId),clientId],selectedParents=[...getBlockParents(state,selectedId),selectedId];let lowestCommonAncestor;const maxDepth=Math.min(clientParents.length,selectedParents.length);for(let index=0;index<maxDepth&&clientParents[index]===selectedParents[index];index++)lowestCommonAncestor=clientParents[index];return lowestCommonAncestor}function getAdjacentBlockClientId(state,startClientId,modifier=1){if(void 0===startClientId&&(startClientId=getSelectedBlockClientId(state)),void 0===startClientId&&(startClientId=modifier<0?getFirstMultiSelectedBlockClientId(state):getLastMultiSelectedBlockClientId(state)),!startClientId)return null;const rootClientId=getBlockRootClientId(state,startClientId);if(null===rootClientId)return null;const{order}=state.blocks,orderSet=order.get(rootClientId),nextIndex=orderSet.indexOf(startClientId)+1*modifier;return nextIndex<0||nextIndex===orderSet.length?null:orderSet[nextIndex]}function getPreviousBlockClientId(state,startClientId){return getAdjacentBlockClientId(state,startClientId,-1)}function getNextBlockClientId(state,startClientId){return getAdjacentBlockClientId(state,startClientId,1)}function getSelectedBlocksInitialCaretPosition(state){return state.initialPosition}const getSelectedBlockClientIds=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)((state=>{const{selectionStart,selectionEnd}=state.selection;if(!selectionStart.clientId||!selectionEnd.clientId)return EMPTY_ARRAY;if(selectionStart.clientId===selectionEnd.clientId)return[selectionStart.clientId];const rootClientId=getBlockRootClientId(state,selectionStart.clientId);if(null===rootClientId)return EMPTY_ARRAY;const blockOrder=getBlockOrder(state,rootClientId),startIndex=blockOrder.indexOf(selectionStart.clientId),endIndex=blockOrder.indexOf(selectionEnd.clientId);return startIndex>endIndex?blockOrder.slice(endIndex,startIndex+1):blockOrder.slice(startIndex,endIndex+1)}),(state=>[state.blocks.order,state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId]));function getMultiSelectedBlockClientIds(state){const{selectionStart,selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?EMPTY_ARRAY:getSelectedBlockClientIds(state)}const getMultiSelectedBlocks=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)((state=>{const multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(state);return multiSelectedBlockClientIds.length?multiSelectedBlockClientIds.map((clientId=>getBlock(state,clientId))):EMPTY_ARRAY}),(state=>[...getSelectedBlockClientIds.getDependants(state),state.blocks.byClientId,state.blocks.order,state.blocks.attributes]));function getFirstMultiSelectedBlockClientId(state){return getMultiSelectedBlockClientIds(state)[0]||null}function getLastMultiSelectedBlockClientId(state){const selectedClientIds=getMultiSelectedBlockClientIds(state);return selectedClientIds[selectedClientIds.length-1]||null}function isFirstMultiSelectedBlock(state,clientId){return getFirstMultiSelectedBlockClientId(state)===clientId}function isBlockMultiSelected(state,clientId){return-1!==getMultiSelectedBlockClientIds(state).indexOf(clientId)}const isAncestorMultiSelected=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,clientId)=>{let ancestorClientId=clientId,isMultiSelected=!1;for(;ancestorClientId&&!isMultiSelected;)ancestorClientId=getBlockRootClientId(state,ancestorClientId),isMultiSelected=isBlockMultiSelected(state,ancestorClientId);return isMultiSelected}),(state=>[state.blocks.order,state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId]));function getMultiSelectedBlocksStartClientId(state){const{selectionStart,selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?null:selectionStart.clientId||null}function getMultiSelectedBlocksEndClientId(state){const{selectionStart,selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?null:selectionEnd.clientId||null}function __unstableIsFullySelected(state){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);return!selectionAnchor.attributeKey&&!selectionFocus.attributeKey&&void 0===selectionAnchor.offset&&void 0===selectionFocus.offset}function __unstableIsSelectionCollapsed(state){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);return!!selectionAnchor&&!!selectionFocus&&selectionAnchor.clientId===selectionFocus.clientId&&selectionAnchor.attributeKey===selectionFocus.attributeKey&&selectionAnchor.offset===selectionFocus.offset}function __unstableSelectionHasUnmergeableBlock(state){return getSelectedBlockClientIds(state).some((clientId=>{const blockName=getBlockName(state,clientId);return!(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.E7)(blockName).merge}))}function __unstableIsSelectionMergeable(state,isForward){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);if(selectionAnchor.clientId===selectionFocus.clientId)return!1;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return!1;const anchorRootClientId=getBlockRootClientId(state,selectionAnchor.clientId);if(anchorRootClientId!==getBlockRootClientId(state,selectionFocus.clientId))return!1;const blockOrder=getBlockOrder(state,anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const targetBlockClientId=isForward?selectionEnd.clientId:selectionStart.clientId,blockToMergeClientId=isForward?selectionStart.clientId:selectionEnd.clientId,targetBlockName=getBlockName(state,targetBlockClientId);if(!(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.E7)(targetBlockName).merge)return!1;const blockToMerge=getBlock(state,blockToMergeClientId);if(blockToMerge.name===targetBlockName)return!0;const blocksToMerge=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.bh)(blockToMerge,targetBlockName);return blocksToMerge&&blocksToMerge.length}const __unstableGetSelectedBlocksWithPartialSelection=state=>{const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);if(selectionAnchor.clientId===selectionFocus.clientId)return EMPTY_ARRAY;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return EMPTY_ARRAY;const anchorRootClientId=getBlockRootClientId(state,selectionAnchor.clientId);if(anchorRootClientId!==getBlockRootClientId(state,selectionFocus.clientId))return EMPTY_ARRAY;const blockOrder=getBlockOrder(state,anchorRootClientId),anchorIndex=blockOrder.indexOf(selectionAnchor.clientId),focusIndex=blockOrder.indexOf(selectionFocus.clientId),[selectionStart,selectionEnd]=anchorIndex>focusIndex?[selectionFocus,selectionAnchor]:[selectionAnchor,selectionFocus],blockA=getBlock(state,selectionStart.clientId),blockB=getBlock(state,selectionEnd.clientId),htmlA=blockA.attributes[selectionStart.attributeKey],htmlB=blockB.attributes[selectionEnd.attributeKey];let valueA=(0,_wordpress_rich_text__WEBPACK_IMPORTED_MODULE_2__.vt)({html:htmlA}),valueB=(0,_wordpress_rich_text__WEBPACK_IMPORTED_MODULE_2__.vt)({html:htmlB});return valueA=(0,_wordpress_rich_text__WEBPACK_IMPORTED_MODULE_2__.TF)(valueA,0,selectionStart.offset),valueB=(0,_wordpress_rich_text__WEBPACK_IMPORTED_MODULE_2__.TF)(valueB,selectionEnd.offset,valueB.text.length),[{...blockA,attributes:{...blockA.attributes,[selectionStart.attributeKey]:(0,_wordpress_rich_text__WEBPACK_IMPORTED_MODULE_2__.Ky)({value:valueA})}},{...blockB,attributes:{...blockB.attributes,[selectionEnd.attributeKey]:(0,_wordpress_rich_text__WEBPACK_IMPORTED_MODULE_2__.Ky)({value:valueB})}}]};function getBlockOrder(state,rootClientId){return state.blocks.order.get(rootClientId||"")||EMPTY_ARRAY}function getBlockIndex(state,clientId){return getBlockOrder(state,getBlockRootClientId(state,clientId)).indexOf(clientId)}function isBlockSelected(state,clientId){const{selectionStart,selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId&&selectionStart.clientId===clientId}function hasSelectedInnerBlock(state,clientId,deep=!1){const selectedBlockClientIds=getSelectedBlockClientIds(state);return!!selectedBlockClientIds.length&&(deep?selectedBlockClientIds.some((id=>getBlockParents(state,id,!0).includes(clientId))):selectedBlockClientIds.some((id=>getBlockRootClientId(state,id)===clientId)))}function hasDraggedInnerBlock(state,clientId,deep=!1){return getBlockOrder(state,clientId).some((innerClientId=>isBlockBeingDragged(state,innerClientId)||deep&&hasDraggedInnerBlock(state,innerClientId,deep)))}function isBlockWithinSelection(state,clientId){if(!clientId)return!1;const clientIds=getMultiSelectedBlockClientIds(state),index=clientIds.indexOf(clientId);return index>-1&&index<clientIds.length-1}function hasMultiSelection(state){const{selectionStart,selectionEnd}=state.selection;return selectionStart.clientId!==selectionEnd.clientId}function isMultiSelecting(state){return state.isMultiSelecting}function isSelectionEnabled(state){return state.isSelectionEnabled}function getBlockMode(state,clientId){return state.blocksMode[clientId]||"visual"}function isTyping(state){return state.isTyping}function isDraggingBlocks(state){return!!state.draggedBlocks.length}function getDraggedBlockClientIds(state){return state.draggedBlocks}function isBlockBeingDragged(state,clientId){return state.draggedBlocks.includes(clientId)}function isAncestorBeingDragged(state,clientId){if(!isDraggingBlocks(state))return!1;return getBlockParents(state,clientId).some((parentClientId=>isBlockBeingDragged(state,parentClientId)))}function isCaretWithinFormattedText(){return(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)('wp.data.select( "core/block-editor" ).isCaretWithinFormattedText',{since:"6.1",version:"6.3"}),!1}const getBlockInsertionPoint=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)((state=>{let rootClientId,index;const{insertionCue,selection:{selectionEnd}}=state;if(null!==insertionCue)return insertionCue;const{clientId}=selectionEnd;return clientId?(rootClientId=getBlockRootClientId(state,clientId)||void 0,index=getBlockIndex(state,selectionEnd.clientId)+1):index=getBlockOrder(state).length,{rootClientId,index}}),(state=>[state.insertionCue,state.selection.selectionEnd.clientId,state.blocks.parents,state.blocks.order]));function isBlockInsertionPointVisible(state){return null!==state.insertionCue}function isValidTemplate(state){return state.template.isValid}function getTemplate(state){return state.settings.template}function getTemplateLock(state,rootClientId){var _getBlockListSettings,_state$settings$templ;return rootClientId?null!==(_getBlockListSettings=getBlockListSettings(state,rootClientId)?.templateLock)&&void 0!==_getBlockListSettings&&_getBlockListSettings:null!==(_state$settings$templ=state.settings.templateLock)&&void 0!==_state$settings$templ&&_state$settings$templ}const isBlockVisibleInTheInserter=(state,blockNameOrType,checkedBlocks=new Set)=>{let blockType,blockName;if(blockNameOrType&&"object"==typeof blockNameOrType?(blockType=blockNameOrType,blockName=blockNameOrType.name):(blockType=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.E7)(blockNameOrType),blockName=blockNameOrType),!blockType)return!1;const{allowedBlockTypes}=getSettings(state);return!!(0,_utils__WEBPACK_IMPORTED_MODULE_3__.yO)(allowedBlockTypes,blockName,!0)&&(!checkedBlocks.has(blockName)&&(checkedBlocks.add(blockName),!Array.isArray(blockType.parent)||blockType.parent.some((name=>blockName!==name&&isBlockVisibleInTheInserter(state,name,checkedBlocks)||"core/post-content"===name))))},canInsertBlockTypeUnmemoized=(state,blockName,rootClientId=null)=>{if(!isBlockVisibleInTheInserter(state,blockName))return!1;let blockType;blockName&&"object"==typeof blockName?(blockType=blockName,blockName=blockType.name):blockType=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.E7)(blockName);if(!!getTemplateLock(state,rootClientId))return!1;if(!!(0,_private_selectors__WEBPACK_IMPORTED_MODULE_7__.isSectionBlock)(state,rootClientId))return!1;if("disabled"===getBlockEditingMode(state,null!=rootClientId?rootClientId:""))return!1;const parentBlockListSettings=getBlockListSettings(state,rootClientId);if(rootClientId&&void 0===parentBlockListSettings)return!1;const parentName=getBlockName(state,rootClientId),parentBlockType=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.E7)(parentName),parentAllowedChildBlocks=parentBlockType?.allowedBlocks;let hasParentAllowedBlock=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.yO)(parentAllowedChildBlocks,blockName);if(!1!==hasParentAllowedBlock){const parentAllowedBlocks=parentBlockListSettings?.allowedBlocks,hasParentListAllowedBlock=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.yO)(parentAllowedBlocks,blockName);null!==hasParentListAllowedBlock&&(hasParentAllowedBlock=hasParentListAllowedBlock)}const blockAllowedParentBlocks=blockType.parent,hasBlockAllowedParent=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.yO)(blockAllowedParentBlocks,parentName);let hasBlockAllowedAncestor=!0;const blockAllowedAncestorBlocks=blockType.ancestor;if(blockAllowedAncestorBlocks){hasBlockAllowedAncestor=[rootClientId,...getBlockParents(state,rootClientId)].some((ancestorClientId=>(0,_utils__WEBPACK_IMPORTED_MODULE_3__.yO)(blockAllowedAncestorBlocks,getBlockName(state,ancestorClientId))))}const canInsert=hasBlockAllowedAncestor&&(null===hasParentAllowedBlock&&null===hasBlockAllowedParent||!0===hasParentAllowedBlock||!0===hasBlockAllowedParent);return canInsert?(0,_wordpress_hooks__WEBPACK_IMPORTED_MODULE_1__.W5)("blockEditor.__unstableCanInsertBlockType",canInsert,blockType,rootClientId,{getBlock:getBlock.bind(null,state),getBlockParentsByBlockName:getBlockParentsByBlockName.bind(null,state)}):canInsert},canInsertBlockType=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(canInsertBlockTypeUnmemoized,((state,blockName,rootClientId)=>(0,_utils__WEBPACK_IMPORTED_MODULE_3__.LK)(state,rootClientId)));function canInsertBlocks(state,clientIds,rootClientId=null){return clientIds.every((id=>canInsertBlockType(state,getBlockName(state,id),rootClientId)))}function canRemoveBlock(state,clientId){const attributes=getBlockAttributes(state,clientId);if(null===attributes)return!0;if(void 0!==attributes.lock?.remove)return!attributes.lock.remove;const rootClientId=getBlockRootClientId(state,clientId);if(getTemplateLock(state,rootClientId))return!1;return!!!(0,_private_selectors__WEBPACK_IMPORTED_MODULE_7__.getParentSectionBlock)(state,clientId)&&"disabled"!==getBlockEditingMode(state,rootClientId)}function canRemoveBlocks(state,clientIds){return clientIds.every((clientId=>canRemoveBlock(state,clientId)))}function canMoveBlock(state,clientId){const attributes=getBlockAttributes(state,clientId);if(null===attributes)return!0;if(void 0!==attributes.lock?.move)return!attributes.lock.move;const rootClientId=getBlockRootClientId(state,clientId);return"all"!==getTemplateLock(state,rootClientId)&&"disabled"!==getBlockEditingMode(state,rootClientId)}function canMoveBlocks(state,clientIds){return clientIds.every((clientId=>canMoveBlock(state,clientId)))}function canEditBlock(state,clientId){const attributes=getBlockAttributes(state,clientId);if(null===attributes)return!0;const{lock}=attributes;return!lock?.edit}function canLockBlockType(state,nameOrType){return!!(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.pN)(nameOrType,"lock",!0)&&!!state.settings?.canLockBlocks}function getInsertUsage(state,id){var _state$preferences$in;return null!==(_state$preferences$in=state.preferences.insertUsage?.[id])&&void 0!==_state$preferences$in?_state$preferences$in:null}const canIncludeBlockTypeInInserter=(state,blockType,rootClientId)=>!!(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.pN)(blockType,"inserter",!0)&&canInsertBlockTypeUnmemoized(state,blockType.name,rootClientId),calculateFrecency=(time,count)=>{if(!time)return count;const duration=Date.now()-time;switch(!0){case duration<36e5:return 4*count;case duration<864e5:return 2*count;case duration<6048e5:return count/2;default:return count/4}},buildBlockTypeItem=(state,{buildScope="inserter"})=>blockType=>{const id=blockType.name;let isDisabled=!1;(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.pN)(blockType.name,"multiple",!0)||(isDisabled=getBlocksByClientId(state,getClientIdsWithDescendants(state)).some((({name})=>name===blockType.name)));const{time,count=0}=getInsertUsage(state,id)||{},blockItemBase={id,name:blockType.name,title:blockType.title,icon:blockType.icon,isDisabled,frecency:calculateFrecency(time,count)};if("transform"===buildScope)return blockItemBase;const inserterVariations=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.oO)(blockType.name,"inserter");return{...blockItemBase,initialAttributes:{},description:blockType.description,category:blockType.category,keywords:blockType.keywords,parent:blockType.parent,variations:inserterVariations,example:blockType.example,utility:1}},getInserterItems=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,rootClientId=null,options=DEFAULT_INSERTER_OPTIONS)=>{const syncedPatternInserterItems=canInsertBlockTypeUnmemoized(state,"core/block",rootClientId)?(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_constants__WEBPACK_IMPORTED_MODULE_11__.E)).getReusableBlocks().map((reusableBlock=>{const icon=reusableBlock.wp_pattern_sync_status?_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__.A:{src:_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__.A,foreground:"var(--wp-block-synced-color)"},id=`core/block/${reusableBlock.id}`,{time,count=0}=getInsertUsage(state,id)||{},frecency=calculateFrecency(time,count);return{id,name:"core/block",initialAttributes:{ref:reusableBlock.id},title:reusableBlock.title?.raw,icon,category:"reusable",keywords:["reusable"],isDisabled:!1,utility:1,frecency,content:reusableBlock.content?.raw,syncStatus:reusableBlock.wp_pattern_sync_status}})):[],buildBlockTypeInserterItem=buildBlockTypeItem(state,{buildScope:"inserter"});let blockTypeInserterItems=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.li)().filter((blockType=>(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.pN)(blockType,"inserter",!0))).map(buildBlockTypeInserterItem);blockTypeInserterItems=!1!==options[_utils__WEBPACK_IMPORTED_MODULE_3__.s4]?blockTypeInserterItems.filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId))):blockTypeInserterItems.filter((blockType=>isBlockVisibleInTheInserter(state,blockType))).map((blockType=>({...blockType,isAllowedInCurrentRoot:canIncludeBlockTypeInInserter(state,blockType,rootClientId)})));const items=blockTypeInserterItems.reduce(((accumulator,item)=>{const{variations=[]}=item;if(variations.some((({isDefault})=>isDefault))||accumulator.push(item),variations.length){const variationMapper=((state,item)=>variation=>{const variationId=`${item.id}/${variation.name}`,{time,count=0}=getInsertUsage(state,variationId)||{};return{...item,id:variationId,icon:variation.icon||item.icon,title:variation.title||item.title,description:variation.description||item.description,category:variation.category||item.category,example:variation.hasOwnProperty("example")?variation.example:item.example,initialAttributes:{...item.initialAttributes,...variation.attributes},innerBlocks:variation.innerBlocks,keywords:variation.keywords||item.keywords,frecency:calculateFrecency(time,count)}})(state,item);accumulator.push(...variations.map(variationMapper))}return accumulator}),[]),{core:coreItems,noncore:nonCoreItems}=items.reduce(((blocks,block)=>{const{core,noncore}=blocks;return(block.name.startsWith("core/")?core:noncore).push(block),blocks}),{core:[],noncore:[]});return[...[...coreItems,...nonCoreItems],...syncedPatternInserterItems]}),((state,rootClientId)=>[(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.li)(),(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_constants__WEBPACK_IMPORTED_MODULE_11__.E)).getReusableBlocks(),state.blocks.order,state.preferences.insertUsage,...(0,_utils__WEBPACK_IMPORTED_MODULE_3__.LK)(state,rootClientId)])))),getBlockTransformItems=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,blocks,rootClientId=null)=>{const normalizedBlocks=Array.isArray(blocks)?blocks:[blocks],buildBlockTypeTransformItem=buildBlockTypeItem(state,{buildScope:"transform"}),blockTypeTransformItems=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.li)().filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId))).map(buildBlockTypeTransformItem),itemsByName=Object.fromEntries(Object.entries(blockTypeTransformItems).map((([,value])=>[value.name,value]))),possibleTransforms=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Fk)(normalizedBlocks).reduce(((accumulator,block)=>(itemsByName[block?.name]&&accumulator.push(itemsByName[block.name]),accumulator)),[]);return(0,_utils_sorting__WEBPACK_IMPORTED_MODULE_12__.M)(possibleTransforms,(block=>itemsByName[block.name].frecency),"desc")}),((state,blocks,rootClientId)=>[(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.li)(),state.preferences.insertUsage,...(0,_utils__WEBPACK_IMPORTED_MODULE_3__.LK)(state,rootClientId)])),hasInserterItems=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(state,rootClientId=null)=>{if((0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.li)().some((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId))))return!0;return canInsertBlockTypeUnmemoized(state,"core/block",rootClientId)&&(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_constants__WEBPACK_IMPORTED_MODULE_11__.E)).getReusableBlocks().length>0})),getAllowedBlocks=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,rootClientId=null)=>{if(!rootClientId)return;const blockTypes=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.li)().filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId)));return canInsertBlockTypeUnmemoized(state,"core/block",rootClientId)&&(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_constants__WEBPACK_IMPORTED_MODULE_11__.E)).getReusableBlocks().length>0&&blockTypes.push("core/block"),blockTypes}),((state,rootClientId)=>[(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.li)(),(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_constants__WEBPACK_IMPORTED_MODULE_11__.E)).getReusableBlocks(),...(0,_utils__WEBPACK_IMPORTED_MODULE_3__.LK)(state,rootClientId)])))),__experimentalGetAllowedBlocks=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,rootClientId=null)=>((0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)('wp.data.select( "core/block-editor" ).__experimentalGetAllowedBlocks',{alternative:'wp.data.select( "core/block-editor" ).getAllowedBlocks',since:"6.2",version:"6.4"}),getAllowedBlocks(state,rootClientId))),((state,rootClientId)=>getAllowedBlocks.getDependants(state,rootClientId)));function getDirectInsertBlock(state,rootClientId=null){var _state$blockListSetti;if(!rootClientId)return;const{defaultBlock,directInsert}=null!==(_state$blockListSetti=state.blockListSettings[rootClientId])&&void 0!==_state$blockListSetti?_state$blockListSetti:{};return defaultBlock&&directInsert?defaultBlock:void 0}function __experimentalGetDirectInsertBlock(state,rootClientId=null){return(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)('wp.data.select( "core/block-editor" ).__experimentalGetDirectInsertBlock',{alternative:'wp.data.select( "core/block-editor" ).getDirectInsertBlock',since:"6.3",version:"6.4"}),getDirectInsertBlock(state,rootClientId)}const __experimentalGetParsedPattern=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(state,patternName)=>{const pattern=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_constants__WEBPACK_IMPORTED_MODULE_11__.E)).getPatternBySlug(patternName);return pattern?(0,_utils__WEBPACK_IMPORTED_MODULE_3__.mU)(pattern):null})),getAllowedPatternsDependants=select=>(state,rootClientId)=>[...(0,_utils__WEBPACK_IMPORTED_MODULE_3__.pk)(select)(state),...(0,_utils__WEBPACK_IMPORTED_MODULE_3__.LK)(state,rootClientId)],patternsWithParsedBlocks=new WeakMap;function enhancePatternWithParsedBlocks(pattern){let enhancedPattern=patternsWithParsedBlocks.get(pattern);return enhancedPattern||(enhancedPattern={...pattern,get blocks(){return(0,_utils__WEBPACK_IMPORTED_MODULE_3__.mU)(pattern).blocks}},patternsWithParsedBlocks.set(pattern,enhancedPattern)),enhancedPattern}const __experimentalGetAllowedPatterns=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,rootClientId=null,options=DEFAULT_INSERTER_OPTIONS)=>{const{getAllPatterns}=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_constants__WEBPACK_IMPORTED_MODULE_11__.E)),patterns=getAllPatterns(),{allowedBlockTypes}=getSettings(state);return patterns.filter((({inserter=!0})=>!!inserter)).map(enhancePatternWithParsedBlocks).filter((pattern=>(0,_utils__WEBPACK_IMPORTED_MODULE_3__.S0)((0,_utils__WEBPACK_IMPORTED_MODULE_3__.Yb)(pattern),allowedBlockTypes))).filter((pattern=>(0,_utils__WEBPACK_IMPORTED_MODULE_3__.Yb)(pattern).every((({blockName:name})=>!1!==options[_utils__WEBPACK_IMPORTED_MODULE_3__.s4]?canInsertBlockType(state,name,rootClientId):isBlockVisibleInTheInserter(state,name)))))}),getAllowedPatternsDependants(select)))),getPatternsByBlockTypes=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,blockNames,rootClientId=null)=>{if(!blockNames)return EMPTY_ARRAY;const patterns=select(_constants__WEBPACK_IMPORTED_MODULE_11__.E).__experimentalGetAllowedPatterns(rootClientId),normalizedBlockNames=Array.isArray(blockNames)?blockNames:[blockNames],filteredPatterns=patterns.filter((pattern=>pattern?.blockTypes?.some?.((blockName=>normalizedBlockNames.includes(blockName)))));return 0===filteredPatterns.length?EMPTY_ARRAY:filteredPatterns}),((state,blockNames,rootClientId)=>getAllowedPatternsDependants(select)(state,rootClientId))))),__experimentalGetPatternsByBlockTypes=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>((0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)('wp.data.select( "core/block-editor" ).__experimentalGetPatternsByBlockTypes',{alternative:'wp.data.select( "core/block-editor" ).getPatternsByBlockTypes',since:"6.2",version:"6.4"}),select(_constants__WEBPACK_IMPORTED_MODULE_11__.E).getPatternsByBlockTypes))),__experimentalGetPatternTransformItems=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,blocks,rootClientId=null)=>{if(!blocks)return EMPTY_ARRAY;if(blocks.some((({clientId,innerBlocks})=>innerBlocks.length||areInnerBlocksControlled(state,clientId))))return EMPTY_ARRAY;const selectedBlockNames=Array.from(new Set(blocks.map((({name})=>name))));return select(_constants__WEBPACK_IMPORTED_MODULE_11__.E).getPatternsByBlockTypes(selectedBlockNames,rootClientId)}),((state,blocks,rootClientId)=>getAllowedPatternsDependants(select)(state,rootClientId)))));function getBlockListSettings(state,clientId){return state.blockListSettings[clientId]}function getSettings(state){return state.settings}function isLastBlockChangePersistent(state){return state.blocks.isPersistentChange}const __experimentalGetBlockListSettingsForBlocks=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,clientIds=[])=>clientIds.reduce(((blockListSettingsForBlocks,clientId)=>state.blockListSettings[clientId]?{...blockListSettingsForBlocks,[clientId]:state.blockListSettings[clientId]}:blockListSettingsForBlocks),{})),(state=>[state.blockListSettings])),__experimentalGetReusableBlockTitle=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,ref)=>{(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)("wp.data.select( 'core/block-editor' ).__experimentalGetReusableBlockTitle",{since:"6.6",version:"6.8"});const reusableBlock=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_constants__WEBPACK_IMPORTED_MODULE_11__.E)).getReusableBlocks().find((block=>block.id===ref));return reusableBlock?reusableBlock.title?.raw:null}),(()=>[(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_constants__WEBPACK_IMPORTED_MODULE_11__.E)).getReusableBlocks()]))));function __unstableIsLastBlockChangeIgnored(state){return state.blocks.isIgnoredChange}function __experimentalGetLastBlockAttributeChanges(state){return state.lastBlockAttributesChange}function isNavigationMode(state){return"navigation"===__unstableGetEditorMode(state)}const __unstableGetEditorMode=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>()=>select(_wordpress_preferences__WEBPACK_IMPORTED_MODULE_13__.M).get("core","editorTool")));function hasBlockMovingClientId(){return(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)('wp.data.select( "core/block-editor" ).hasBlockMovingClientId',{since:"6.7",hint:"Block moving mode feature has been removed"}),!1}function didAutomaticChange(state){return!!state.automaticChangeStatus}function isBlockHighlighted(state,clientId){return state.highlightedBlock===clientId}function areInnerBlocksControlled(state,clientId){return!!state.blocks.controlledInnerBlocks[clientId]}const __experimentalGetActiveBlockIdByBlockNames=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(((state,validBlockNames)=>{if(!validBlockNames.length)return null;const selectedBlockClientId=getSelectedBlockClientId(state);if(validBlockNames.includes(getBlockName(state,selectedBlockClientId)))return selectedBlockClientId;const multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(state),entityAreaParents=getBlockParentsByBlockName(state,selectedBlockClientId||multiSelectedBlockClientIds[0],validBlockNames);return entityAreaParents?entityAreaParents[entityAreaParents.length-1]:null}),((state,validBlockNames)=>[state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId,validBlockNames]));function wasBlockJustInserted(state,clientId,source){const{lastBlockInserted}=state;return lastBlockInserted.clientIds?.includes(clientId)&&lastBlockInserted.source===source}function isBlockVisible(state,clientId){var _state$blockVisibilit;return null===(_state$blockVisibilit=state.blockVisibility?.[clientId])||void 0===_state$blockVisibilit||_state$blockVisibilit}function getHoveredBlockClientId(state){return state.hoveredBlockClientId}const __unstableGetVisibleBlocks=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)((state=>{const visibleBlocks=new Set(Object.keys(state.blockVisibility).filter((key=>state.blockVisibility[key])));return 0===visibleBlocks.size?EMPTY_SET:visibleBlocks}),(state=>[state.blockVisibility]));function __unstableHasActiveBlockOverlayActive(state,clientId){if("default"!==getBlockEditingMode(state,clientId))return!1;if(!canEditBlock(state,clientId))return!0;if((0,_private_selectors__WEBPACK_IMPORTED_MODULE_7__.isZoomOut)(state)){const sectionRootClientId=(0,_private_selectors__WEBPACK_IMPORTED_MODULE_7__.getSectionRootClientId)(state);if(sectionRootClientId){const sectionClientIds=getBlockOrder(state,sectionRootClientId);if(sectionClientIds?.includes(clientId))return!0}else if(clientId&&!getBlockRootClientId(state,clientId))return!0}return!(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.pN)(getBlockName(state,clientId),"__experimentalDisableBlockOverlay",!1)&&areInnerBlocksControlled(state,clientId)&&!isBlockSelected(state,clientId)&&!hasSelectedInnerBlock(state,clientId,!0)}function __unstableIsWithinBlockOverlay(state,clientId){let parent=state.blocks.parents.get(clientId);for(;parent;){if(__unstableHasActiveBlockOverlayActive(state,parent))return!0;parent=state.blocks.parents.get(parent)}return!1}const getBlockEditingMode=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(state,clientId="")=>{if(null===clientId&&(clientId=""),(0,_private_selectors__WEBPACK_IMPORTED_MODULE_7__.isZoomOut)(state)){const sectionRootClientId=(0,_private_selectors__WEBPACK_IMPORTED_MODULE_7__.getSectionRootClientId)(state);if(""===clientId)return sectionRootClientId?"disabled":"contentOnly";if(clientId===sectionRootClientId)return"contentOnly";const sectionsClientIds=getBlockOrder(state,sectionRootClientId);return sectionsClientIds?.includes(clientId)?"contentOnly":"disabled"}if("navigation"===__unstableGetEditorMode(state)){const sectionRootClientId=(0,_private_selectors__WEBPACK_IMPORTED_MODULE_7__.getSectionRootClientId)(state);if(clientId===sectionRootClientId)return"default";if(getBlockOrder(state,sectionRootClientId).includes(clientId))return"contentOnly";const isWithinSectionRoot=function isWithinBlock(state,clientId,parentClientId){let parent=state.blocks.parents.get(clientId);for(;parent&&parent!==parentClientId;)parent=state.blocks.parents.get(parent);return parent===parentClientId}(state,clientId,sectionRootClientId);if(!isWithinSectionRoot)return"disabled";const name=getBlockName(state,clientId),{hasContentRoleAttribute}=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.M_));return hasContentRoleAttribute(name)?"contentOnly":"disabled"}const blockEditingMode=state.blockEditingModes.get(clientId);if(blockEditingMode)return blockEditingMode;if(!clientId)return"default";const rootClientId=getBlockRootClientId(state,clientId);if("contentOnly"===getTemplateLock(state,rootClientId)){const name=getBlockName(state,clientId),{hasContentRoleAttribute}=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_10__.T)(select(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.M_));return hasContentRoleAttribute(name)?"contentOnly":"disabled"}const parentMode=getBlockEditingMode(state,rootClientId);return"contentOnly"===parentMode?"default":parentMode})),isUngroupable=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(state,clientId="")=>{const _clientId=clientId||getSelectedBlockClientId(state);if(!_clientId)return!1;const{getGroupingBlockName}=select(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.M_),block=getBlock(state,_clientId),groupingBlockName=getGroupingBlockName();return block&&(block.name===groupingBlockName||(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.E7)(block.name)?.transforms?.ungroup)&&!!block.innerBlocks.length&&canRemoveBlock(state,_clientId)})),isGroupable=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.N)((select=>(state,clientIds=EMPTY_ARRAY)=>{const{getGroupingBlockName}=select(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.M_),groupingBlockName=getGroupingBlockName(),_clientIds=clientIds?.length?clientIds:getSelectedBlockClientIds(state),rootClientId=_clientIds?.length?getBlockRootClientId(state,_clientIds[0]):void 0;return canInsertBlockType(state,groupingBlockName,rootClientId)&&_clientIds.length&&canRemoveBlocks(state,_clientIds)})),__unstableGetContentLockingParent=(state,clientId)=>((0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)("wp.data.select( 'core/block-editor' ).__unstableGetContentLockingParent",{since:"6.1",version:"6.7"}),(0,_private_selectors__WEBPACK_IMPORTED_MODULE_7__.getContentLockingParent)(state,clientId));function __unstableGetTemporarilyEditingAsBlocks(state){return(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)("wp.data.select( 'core/block-editor' ).__unstableGetTemporarilyEditingAsBlocks",{since:"6.1",version:"6.7"}),(0,_private_selectors__WEBPACK_IMPORTED_MODULE_7__.getTemporarilyEditingAsBlocks)(state)}function __unstableGetTemporarilyEditingFocusModeToRevert(state){return(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_6__.A)("wp.data.select( 'core/block-editor' ).__unstableGetTemporarilyEditingFocusModeToRevert",{since:"6.5",version:"6.7"}),(0,_private_selectors__WEBPACK_IMPORTED_MODULE_7__.getTemporarilyEditingFocusModeToRevert)(state)}},"./packages/block-editor/src/store/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{LK:()=>getInsertBlockTypeDependants,S0:()=>checkAllowListRecursive,Yb:()=>getGrammar,mU:()=>getParsedPattern,pk:()=>getAllPatternsDependants,s4:()=>isFiltered,yO:()=>checkAllowList});var _wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_block_serialization_default_parser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-serialization-default-parser/build-module/index.js"),_private_keys__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/block-editor/src/store/private-keys.js"),_lock_unlock__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/lock-unlock.js"),_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/block-editor/src/store/constants.js"),_private_selectors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/block-editor/src/store/private-selectors.js");const isFiltered=Symbol("isFiltered"),parsedPatternCache=new WeakMap,grammarMapCache=new WeakMap;function getParsedPattern(pattern){let parsedPattern=parsedPatternCache.get(pattern);return parsedPattern||(parsedPattern=function parsePattern(pattern){const blocks=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.qg)(pattern.content,{__unstableSkipMigrationLogs:!0});return 1===blocks.length&&(blocks[0].attributes={...blocks[0].attributes,metadata:{...blocks[0].attributes.metadata||{},categories:pattern.categories,patternName:pattern.name,name:blocks[0].attributes.metadata?.name||pattern.title}}),{...pattern,blocks}}(pattern),parsedPatternCache.set(pattern,parsedPattern)),parsedPattern}function getGrammar(pattern){let grammarMap=grammarMapCache.get(pattern);return grammarMap||(grammarMap=(0,_wordpress_block_serialization_default_parser__WEBPACK_IMPORTED_MODULE_1__.q)(pattern.content),grammarMap=grammarMap.filter((block=>null!==block.blockName)),grammarMapCache.set(pattern,grammarMap)),grammarMap}const checkAllowList=(list,item,defaultResult=null)=>"boolean"==typeof list?list:Array.isArray(list)?!(!list.includes("core/post-content")||null!==item)||list.includes(item):defaultResult,checkAllowListRecursive=(blocks,allowedBlockTypes)=>{if("boolean"==typeof allowedBlockTypes)return allowedBlockTypes;const blocksQueue=[...blocks];for(;blocksQueue.length>0;){const block=blocksQueue.shift();if(!checkAllowList(allowedBlockTypes,block.name||block.blockName,!0))return!1;block.innerBlocks?.forEach((innerBlock=>{blocksQueue.push(innerBlock)}))}return!0},getAllPatternsDependants=select=>state=>[state.settings.__experimentalBlockPatterns,state.settings.__experimentalUserPatternCategories,state.settings.__experimentalReusableBlocks,state.settings[_private_keys__WEBPACK_IMPORTED_MODULE_2__.WO]?.(select),state.blockPatterns,(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_3__.T)(select(_constants__WEBPACK_IMPORTED_MODULE_4__.E)).getReusableBlocks()];function getInsertBlockTypeDependants(state,rootClientId){return[state.blockListSettings[rootClientId],state.blocks.byClientId.get(rootClientId),state.settings.allowedBlockTypes,state.settings.templateLock,state.blockEditingModes,state.editorMode,(0,_private_selectors__WEBPACK_IMPORTED_MODULE_5__.getSectionRootClientId)(state)]}},"./packages/block-editor/src/utils/sorting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>orderBy});const comparator=(field,items,order)=>(a,b)=>{let cmpA,cmpB;if("function"==typeof field?(cmpA=field(a),cmpB=field(b)):(cmpA=a[field],cmpB=b[field]),cmpA>cmpB)return"asc"===order?1:-1;if(cmpB>cmpA)return"asc"===order?-1:1;const orderA=items.findIndex((item=>item===a)),orderB=items.findIndex((item=>item===b));return orderA>orderB?1:orderB>orderA?-1:0};function orderBy(items,field,order="asc"){return items.concat().sort(comparator(field,items,order))}}}]);