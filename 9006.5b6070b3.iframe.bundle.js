"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[9006],{"./packages/a11y/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function addContainer(ariaLive="polite"){const container=document.createElement("div");container.id=`a11y-speak-${ariaLive}`,container.className="a11y-speak-region",container.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),container.setAttribute("aria-live",ariaLive),container.setAttribute("aria-relevant","additions text"),container.setAttribute("aria-atomic","true");const{body}=document;return body&&body.appendChild(container),container}__webpack_require__.d(__webpack_exports__,{L:()=>speak});var build_module=__webpack_require__("./packages/i18n/build-module/index.js");let previousMessage="";function speak(message,ariaLive){!function clear(){const regions=document.getElementsByClassName("a11y-speak-region"),introText=document.getElementById("a11y-speak-intro-text");for(let i=0;i<regions.length;i++)regions[i].textContent="";introText&&introText.setAttribute("hidden","hidden")}(),message=function filterMessage(message){return message=message.replace(/<[^<>]+>/g," "),previousMessage===message&&(message+="Â "),previousMessage=message,message}(message);const introText=document.getElementById("a11y-speak-intro-text"),containerAssertive=document.getElementById("a11y-speak-assertive"),containerPolite=document.getElementById("a11y-speak-polite");containerAssertive&&"assertive"===ariaLive?containerAssertive.textContent=message:containerPolite&&(containerPolite.textContent=message),introText&&introText.removeAttribute("hidden")}!function domReady(callback){"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",callback):callback())}((function setup(){const introText=document.getElementById("a11y-speak-intro-text"),containerAssertive=document.getElementById("a11y-speak-assertive"),containerPolite=document.getElementById("a11y-speak-polite");null===introText&&function addIntroText(){const introText=document.createElement("p");introText.id="a11y-speak-intro-text",introText.className="a11y-speak-intro-text",introText.textContent=(0,build_module.__)("Notifications"),introText.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),introText.setAttribute("hidden","hidden");const{body}=document;return body&&body.appendChild(introText),introText}(),null===containerAssertive&&addContainer("assertive"),null===containerPolite&&addContainer("polite")}))},"./packages/compose/build-module/hooks/use-debounce/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useDebounce});var use_memo_one__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/use-memo-one/dist/use-memo-one.esm.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_utils_debounce__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/utils/debounce/index.js");function useDebounce(fn,wait,options){const debounced=(0,use_memo_one__WEBPACK_IMPORTED_MODULE_0__.MA)((()=>(0,_utils_debounce__WEBPACK_IMPORTED_MODULE_1__.s)(fn,null!=wait?wait:0,options)),[fn,wait,options]);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>()=>debounced.cancel()),[debounced]),debounced}},"./packages/compose/build-module/hooks/use-previous/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>usePrevious});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function usePrevious(value){const ref=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)();return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{ref.current=value}),[value]),ref.current}},"./packages/compose/build-module/hooks/use-ref-effect/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>useRefEffect});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useRefEffect(callback,dependencies){const cleanupRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)();return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((node=>{node?cleanupRef.current=callback(node):cleanupRef.current&&cleanupRef.current()}),dependencies)}},"./packages/compose/build-module/utils/debounce/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>debounce});const debounce=(func,wait,options)=>{let lastArgs,lastThis,result,timerId,lastCallTime,maxWait=0,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;function invokeFunc(time){const args=lastArgs,thisArg=lastThis;return lastArgs=void 0,lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args),result}function startTimer(pendingFunc,waitTime){timerId=setTimeout(pendingFunc,waitTime)}function getTimeSinceLastCall(time){return time-(lastCallTime||0)}function shouldInvoke(time){const timeSinceLastCall=getTimeSinceLastCall(time);return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){const time=Date.now();if(shouldInvoke(time))return trailingEdge(time);startTimer(timerExpired,function remainingWait(time){const timeSinceLastCall=getTimeSinceLastCall(time),timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?Math.min(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}(time))}function clearTimer(){timerId=void 0}function trailingEdge(time){return clearTimer(),trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function pending(){return void 0!==timerId}function debounced(...args){const time=Date.now(),isInvoking=shouldInvoke(time);if(lastArgs=args,lastThis=this,lastCallTime=time,isInvoking){if(!pending())return function leadingEdge(time){return lastInvokeTime=time,startTimer(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return startTimer(timerExpired,wait),invokeFunc(lastCallTime)}return pending()||startTimer(timerExpired,wait),result}return options&&(leading=!!options.leading,maxing="maxWait"in options,void 0!==options.maxWait&&(maxWait=Math.max(options.maxWait,wait)),trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){!function cancelTimer(){void 0!==timerId&&clearTimeout(timerId)}(),lastInvokeTime=0,clearTimer(),lastArgs=lastCallTime=lastThis=void 0},debounced.flush=function flush(){return pending()?trailingEdge(Date.now()):result},debounced.pending=pending,debounced}},"./packages/icons/build-module/library/close-small.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})})},"./packages/is-shallow-equal/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>isShallowEqual});var objects=__webpack_require__("./packages/is-shallow-equal/build-module/objects.js");function isShallowEqual(a,b){if(a&&b){if(a.constructor===Object&&b.constructor===Object)return(0,objects.A)(a,b);if(Array.isArray(a)&&Array.isArray(b))return function isShallowEqualArrays(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;for(let i=0,len=a.length;i<len;i++)if(a[i]!==b[i])return!1;return!0}(a,b)}return a===b}},"./packages/is-shallow-equal/build-module/objects.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function isShallowEqualObjects(a,b){if(a===b)return!0;const aKeys=Object.keys(a),bKeys=Object.keys(b);if(aKeys.length!==bKeys.length)return!1;let i=0;for(;i<aKeys.length;){const key=aKeys[i],aValue=a[key];if(void 0===aValue&&!b.hasOwnProperty(key)||aValue!==b[key])return!1;i++}return!0}__webpack_require__.d(__webpack_exports__,{A:()=>isShallowEqualObjects})},"./packages/components/src/form-token-field/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>form_token_field});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react=__webpack_require__("./node_modules/react/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),use_previous=__webpack_require__("./packages/compose/build-module/hooks/use-previous/index.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),close_small=__webpack_require__("./packages/icons/build-module/library/close-small.js"),src_button=__webpack_require__("./packages/components/src/button/index.tsx"),component=__webpack_require__("./packages/components/src/visually-hidden/component.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const noop=()=>{};function Token({value,status,title,displayTransform,isBorderless=!1,disabled=!1,onClickRemove=noop,onMouseEnter,onMouseLeave,messages,termPosition,termsCount}){const instanceId=(0,use_instance_id.A)(Token),tokenClasses=(0,clsx.A)("components-form-token-field__token",{"is-error":"error"===status,"is-success":"success"===status,"is-validating":"validating"===status,"is-borderless":isBorderless,"is-disabled":disabled}),transformedValue=displayTransform(value),termPositionAndCount=(0,build_module.nv)((0,build_module.__)("%1$s (%2$s of %3$s)"),transformedValue,termPosition,termsCount);return(0,jsx_runtime.jsxs)("span",{className:tokenClasses,onMouseEnter,onMouseLeave,title,children:[(0,jsx_runtime.jsxs)("span",{className:"components-form-token-field__token-text",id:`components-form-token-field__token-text-${instanceId}`,children:[(0,jsx_runtime.jsx)(component.A,{as:"span",children:termPositionAndCount}),(0,jsx_runtime.jsx)("span",{"aria-hidden":"true",children:transformedValue})]}),(0,jsx_runtime.jsx)(src_button.Ay,{className:"components-form-token-field__remove-token",icon:close_small.A,onClick:disabled?void 0:()=>onClickRemove({value}),disabled,label:messages.remove,"aria-describedby":`components-form-token-field__token-text-${instanceId}`})]})}Token.displayName="Token";try{token.displayName="token",token.__docgenInfo={description:"",displayName:"token",props:{displayTransform:{defaultValue:null,description:"",name:"displayTransform",required:!0,type:{name:"(value: string) => string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},onClickRemove:{defaultValue:{value:"() => {}"},description:"",name:"onClickRemove",required:!1,type:{name:"({ value }: { value: string; }) => void"}},messages:{defaultValue:null,description:"",name:"messages",required:!0,type:{name:"Messages"}},termPosition:{defaultValue:null,description:"",name:"termPosition",required:!0,type:{name:"number"}},termsCount:{defaultValue:null,description:"",name:"termsCount",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"The value of the token.",name:"value",required:!0,type:{name:"string"}},status:{defaultValue:null,description:"One of 'error', 'validating', or 'success'. Applies styles to token.",name:"status",required:!1,type:{name:"enum",value:[{value:'"success"'},{value:'"error"'},{value:'"validating"'}]}},title:{defaultValue:null,description:"If not falsey, will add a title to the token.",name:"title",required:!1,type:{name:"string"}},isBorderless:{defaultValue:{value:"false"},description:"When true, renders tokens as without a background.",name:"isBorderless",required:!1,type:{name:"boolean"}},onMouseEnter:{defaultValue:null,description:"Function to call when onMouseEnter event triggered on token.",name:"onMouseEnter",required:!1,type:{name:"MouseEventHandler<HTMLSpanElement>"}},onMouseLeave:{defaultValue:null,description:"Function to call when onMouseLeave is triggered on token.",name:"onMouseLeave",required:!1,type:{name:"MouseEventHandler<HTMLSpanElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/form-token-field/token.tsx#token"]={docgenInfo:token.__docgenInfo,name:"token",path:"packages/components/src/form-token-field/token.tsx#token"})}catch(__react_docgen_typescript_loader_error){}var token_input=__webpack_require__("./packages/components/src/form-token-field/token-input.tsx"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),flex_component=__webpack_require__("./packages/components/src/flex/flex/component.tsx"),space=__webpack_require__("./packages/components/src/utils/space.ts"),box_sizing=__webpack_require__("./packages/components/src/utils/box-sizing.ts");const deprecatedPaddings=({__next40pxDefaultSize,hasTokens})=>!__next40pxDefaultSize&&(0,emotion_react_browser_esm.AH)("padding-top:",(0,space.x)(hasTokens?1:.5),";padding-bottom:",(0,space.x)(hasTokens?1:.5),";",""),TokensAndInputWrapperFlex=(0,emotion_styled_base_browser_esm.A)(flex_component.A,{target:"ehq8nmi0"})("padding:7px;",box_sizing.r," ",deprecatedPaddings,";");var suggestions_list=__webpack_require__("./packages/components/src/form-token-field/suggestions-list.tsx"),flex_item_component=__webpack_require__("./packages/components/src/flex/flex-item/component.tsx"),base_control_styles=__webpack_require__("./packages/components/src/base-control/styles/base-control-styles.ts"),spacer_component=__webpack_require__("./packages/components/src/spacer/component.tsx"),use_deprecated_props=__webpack_require__("./packages/components/src/utils/use-deprecated-props.ts"),with_ignore_ime_events=__webpack_require__("./packages/components/src/utils/with-ignore-ime-events.ts");const identity=value=>value;function FormTokenField(props){const{autoCapitalize,autoComplete,maxLength,placeholder,label=(0,build_module.__)("Add item"),className,suggestions=[],maxSuggestions=100,value=[],displayTransform=identity,saveTransform=token=>token.trim(),onChange=()=>{},onInputChange=()=>{},onFocus,isBorderless=!1,disabled=!1,tokenizeOnSpace=!1,messages={added:(0,build_module.__)("Item added."),removed:(0,build_module.__)("Item removed."),remove:(0,build_module.__)("Remove item"),__experimentalInvalid:(0,build_module.__)("Invalid item")},__experimentalRenderItem,__experimentalExpandOnFocus=!1,__experimentalValidateInput=()=>!0,__experimentalShowHowTo=!0,__next40pxDefaultSize=!1,__experimentalAutoSelectFirstMatch=!1,__nextHasNoMarginBottom=!1,tokenizeOnBlur=!1}=(0,use_deprecated_props.R)(props);__nextHasNoMarginBottom||(0,deprecated_build_module.A)("Bottom margin styles for wp.components.FormTokenField",{since:"6.7",version:"7.0",hint:"Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version."});const instanceId=(0,use_instance_id.A)(FormTokenField),[incompleteTokenValue,setIncompleteTokenValue]=(0,react.useState)(""),[inputOffsetFromEnd,setInputOffsetFromEnd]=(0,react.useState)(0),[isActive,setIsActive]=(0,react.useState)(!1),[isExpanded,setIsExpanded]=(0,react.useState)(!1),[selectedSuggestionIndex,setSelectedSuggestionIndex]=(0,react.useState)(-1),[selectedSuggestionScroll,setSelectedSuggestionScroll]=(0,react.useState)(!1),prevSuggestions=(0,use_previous.A)(suggestions),prevValue=(0,use_previous.A)(value),input=(0,react.useRef)(null),tokensAndInput=(0,react.useRef)(null),debouncedSpeak=(0,use_debounce.A)(a11y_build_module.L,500);function focus(){input.current?.focus()}function hasFocus(){return input.current===input.current?.ownerDocument.activeElement}function onBlur(event){if(inputHasValidValue()&&__experimentalValidateInput(incompleteTokenValue))setIsActive(!1),tokenizeOnBlur&&inputHasValidValue()&&addNewToken(incompleteTokenValue);else{if(setIncompleteTokenValue(""),setInputOffsetFromEnd(0),setIsActive(!1),__experimentalExpandOnFocus){const hasFocusWithin=event.relatedTarget===tokensAndInput.current;setIsExpanded(hasFocusWithin)}else setIsExpanded(!1);setSelectedSuggestionIndex(-1),setSelectedSuggestionScroll(!1)}}function onContainerTouched(event){event.target===tokensAndInput.current&&isActive&&event.preventDefault()}function onTokenClickRemove(event){deleteToken(event.value),focus()}function onInputChangeHandler(event){const text=event.value,separator=tokenizeOnSpace?/[ ,\t]+/:/[,\t]+/,items=text.split(separator),tokenValue=items[items.length-1]||"";items.length>1&&addNewTokens(items.slice(0,-1)),setIncompleteTokenValue(tokenValue),onInputChange(tokenValue)}function handleDeleteKey(_deleteToken){let preventDefault=!1;return hasFocus()&&isInputEmpty()&&(_deleteToken(),preventDefault=!0),preventDefault}function deleteTokenBeforeInput(){const index=getIndexOfInput()-1;index>-1&&deleteToken(value[index])}function deleteTokenAfterInput(){const index=getIndexOfInput();index<value.length&&(deleteToken(value[index]),function moveInputToIndex(index){setInputOffsetFromEnd(value.length-Math.max(index,-1)-1)}(index))}function addCurrentToken(){let preventDefault=!1;const selectedSuggestion=function getSelectedSuggestion(){if(-1!==selectedSuggestionIndex)return getMatchingSuggestions()[selectedSuggestionIndex];return}();return selectedSuggestion?(addNewToken(selectedSuggestion),preventDefault=!0):inputHasValidValue()&&(addNewToken(incompleteTokenValue),preventDefault=!0),preventDefault}function addNewTokens(tokens){const tokensToAdd=[...new Set(tokens.map(saveTransform).filter(Boolean).filter((token=>!function valueContainsToken(token){return value.some((item=>getTokenValue(token)===getTokenValue(item)))}(token))))];if(tokensToAdd.length>0){const newValue=[...value];newValue.splice(getIndexOfInput(),0,...tokensToAdd),onChange(newValue)}}function addNewToken(token){__experimentalValidateInput(token)?(addNewTokens([token]),(0,a11y_build_module.L)(messages.added,"assertive"),setIncompleteTokenValue(""),setSelectedSuggestionIndex(-1),setSelectedSuggestionScroll(!1),setIsExpanded(!__experimentalExpandOnFocus),isActive&&!tokenizeOnBlur&&focus()):(0,a11y_build_module.L)(messages.__experimentalInvalid,"assertive")}function deleteToken(token){const newTokens=value.filter((item=>getTokenValue(item)!==getTokenValue(token)));onChange(newTokens),(0,a11y_build_module.L)(messages.removed,"assertive")}function getTokenValue(token){return"object"==typeof token?token.value:token}function getMatchingSuggestions(searchValue=incompleteTokenValue,_suggestions=suggestions,_value=value,_maxSuggestions=maxSuggestions,_saveTransform=saveTransform){let match=_saveTransform(searchValue);const startsWithMatch=[],containsMatch=[],normalizedValue=_value.map((item=>"string"==typeof item?item:item.value));return 0===match.length?_suggestions=_suggestions.filter((suggestion=>!normalizedValue.includes(suggestion))):(match=match.toLocaleLowerCase(),_suggestions.forEach((suggestion=>{const index=suggestion.toLocaleLowerCase().indexOf(match);-1===normalizedValue.indexOf(suggestion)&&(0===index?startsWithMatch.push(suggestion):index>0&&containsMatch.push(suggestion))})),_suggestions=startsWithMatch.concat(containsMatch)),_suggestions.slice(0,_maxSuggestions)}function getIndexOfInput(){return value.length-inputOffsetFromEnd}function isInputEmpty(){return 0===incompleteTokenValue.length}function inputHasValidValue(){return saveTransform(incompleteTokenValue).length>0}function updateSuggestions(resetSelectedSuggestion=!0){const inputHasMinimumChars=incompleteTokenValue.trim().length>1,matchingSuggestions=getMatchingSuggestions(incompleteTokenValue),hasMatchingSuggestions=matchingSuggestions.length>0,shouldExpandIfFocuses=hasFocus()&&__experimentalExpandOnFocus;if(setIsExpanded(shouldExpandIfFocuses||inputHasMinimumChars&&hasMatchingSuggestions),resetSelectedSuggestion&&(__experimentalAutoSelectFirstMatch&&inputHasMinimumChars&&hasMatchingSuggestions?(setSelectedSuggestionIndex(0),setSelectedSuggestionScroll(!0)):(setSelectedSuggestionIndex(-1),setSelectedSuggestionScroll(!1))),inputHasMinimumChars){const message=hasMatchingSuggestions?(0,build_module.nv)((0,build_module._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",matchingSuggestions.length),matchingSuggestions.length):(0,build_module.__)("No results.");debouncedSpeak(message,"assertive")}}function renderToken(token,index,tokens){const _value=getTokenValue(token),status="string"!=typeof token?token.status:void 0,termPosition=index+1,termsCount=tokens.length;return(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(Token,{value:_value,status,title:"string"!=typeof token?token.title:void 0,displayTransform,onClickRemove:onTokenClickRemove,isBorderless:"string"!=typeof token&&token.isBorderless||isBorderless,onMouseEnter:"string"!=typeof token?token.onMouseEnter:void 0,onMouseLeave:"string"!=typeof token?token.onMouseLeave:void 0,disabled:"error"!==status&&disabled,messages,termsCount,termPosition})},"token-"+_value)}(0,react.useEffect)((()=>{isActive&&!hasFocus()&&focus()}),[isActive]),(0,react.useEffect)((()=>{const suggestionsDidUpdate=!(0,is_shallow_equal_build_module.Ay)(suggestions,prevSuggestions||[]);(suggestionsDidUpdate||value!==prevValue)&&updateSuggestions(suggestionsDidUpdate)}),[suggestions,prevSuggestions,value,prevValue]),(0,react.useEffect)((()=>{updateSuggestions()}),[incompleteTokenValue]),(0,react.useEffect)((()=>{updateSuggestions()}),[__experimentalAutoSelectFirstMatch]),disabled&&isActive&&(setIsActive(!1),setIncompleteTokenValue(""));const classes=(0,clsx.A)(className,"components-form-token-field__input-container",{"is-active":isActive,"is-disabled":disabled});let tokenFieldProps={className:"components-form-token-field",tabIndex:-1};const matchingSuggestions=getMatchingSuggestions();return disabled||(tokenFieldProps=Object.assign({},tokenFieldProps,{onKeyDown:(0,with_ignore_ime_events.n)((function onKeyDown(event){let preventDefault=!1;if(!event.defaultPrevented){switch(event.key){case"Backspace":preventDefault=handleDeleteKey(deleteTokenBeforeInput);break;case"Enter":preventDefault=addCurrentToken();break;case"ArrowLeft":preventDefault=function handleLeftArrowKey(){let preventDefault=!1;return isInputEmpty()&&(function moveInputBeforePreviousToken(){setInputOffsetFromEnd((prevInputOffsetFromEnd=>Math.min(prevInputOffsetFromEnd+1,value.length)))}(),preventDefault=!0),preventDefault}();break;case"ArrowUp":preventDefault=function handleUpArrowKey(){return setSelectedSuggestionIndex((index=>(0===index?getMatchingSuggestions(incompleteTokenValue,suggestions,value,maxSuggestions,saveTransform).length:index)-1)),setSelectedSuggestionScroll(!0),!0}();break;case"ArrowRight":preventDefault=function handleRightArrowKey(){let preventDefault=!1;return isInputEmpty()&&(function moveInputAfterNextToken(){setInputOffsetFromEnd((prevInputOffsetFromEnd=>Math.max(prevInputOffsetFromEnd-1,0)))}(),preventDefault=!0),preventDefault}();break;case"ArrowDown":preventDefault=function handleDownArrowKey(){return setSelectedSuggestionIndex((index=>(index+1)%getMatchingSuggestions(incompleteTokenValue,suggestions,value,maxSuggestions,saveTransform).length)),setSelectedSuggestionScroll(!0),!0}();break;case"Delete":preventDefault=handleDeleteKey(deleteTokenAfterInput);break;case"Space":tokenizeOnSpace&&(preventDefault=addCurrentToken());break;case"Escape":preventDefault=function handleEscapeKey(event){return event.target instanceof HTMLInputElement&&(setIncompleteTokenValue(event.target.value),setIsExpanded(!1),setSelectedSuggestionIndex(-1),setSelectedSuggestionScroll(!1)),!0}(event)}preventDefault&&event.preventDefault()}})),onKeyPress:function onKeyPress(event){let preventDefault=!1;","===event.key&&(preventDefault=function handleCommaKey(){return inputHasValidValue()&&addNewToken(incompleteTokenValue),!0}());preventDefault&&event.preventDefault()},onFocus:function onFocusHandler(event){hasFocus()||event.target===tokensAndInput.current?(setIsActive(!0),setIsExpanded(__experimentalExpandOnFocus||isExpanded)):setIsActive(!1),"function"==typeof onFocus&&onFocus(event)}})),(0,jsx_runtime.jsxs)("div",{...tokenFieldProps,children:[label&&(0,jsx_runtime.jsx)(base_control_styles.Gw,{htmlFor:`components-form-token-input-${instanceId}`,className:"components-form-token-field__label",children:label}),(0,jsx_runtime.jsxs)("div",{ref:tokensAndInput,className:classes,tabIndex:-1,onMouseDown:onContainerTouched,onTouchStart:onContainerTouched,children:[(0,jsx_runtime.jsx)(TokensAndInputWrapperFlex,{justify:"flex-start",align:"center",gap:1,wrap:!0,__next40pxDefaultSize,hasTokens:!!value.length,children:function renderTokensAndInput(){const components=value.map(renderToken);return components.splice(getIndexOfInput(),0,function renderInput(){const inputProps={instanceId,autoCapitalize,autoComplete,placeholder:0===value.length?placeholder:"",disabled,value:incompleteTokenValue,onBlur,isExpanded,selectedSuggestionIndex};return(0,jsx_runtime.jsx)(token_input.Ay,{...inputProps,onChange:maxLength&&value.length>=maxLength?void 0:onInputChangeHandler,ref:input},"input")}()),components}()}),isExpanded&&(0,jsx_runtime.jsx)(suggestions_list.A,{instanceId,match:saveTransform(incompleteTokenValue),displayTransform,suggestions:matchingSuggestions,selectedIndex:selectedSuggestionIndex,scrollIntoView:selectedSuggestionScroll,onHover:function onSuggestionHovered(suggestion){const index=getMatchingSuggestions().indexOf(suggestion);index>=0&&(setSelectedSuggestionIndex(index),setSelectedSuggestionScroll(!1))},onSelect:function onSuggestionSelected(suggestion){addNewToken(suggestion)},__experimentalRenderItem})]}),!__nextHasNoMarginBottom&&(0,jsx_runtime.jsx)(spacer_component.A,{marginBottom:2}),__experimentalShowHowTo&&(0,jsx_runtime.jsx)(base_control_styles.te,{id:`components-form-token-suggestions-howto-${instanceId}`,className:"components-form-token-field__help",__nextHasNoMarginBottom,children:tokenizeOnSpace?(0,build_module.__)("Separate with commas, spaces, or the Enter key."):(0,build_module.__)("Separate with commas or the Enter key.")})]})}FormTokenField.displayName="FormTokenField";const form_token_field=FormTokenField;try{FormTokenField.displayName="FormTokenField",FormTokenField.__docgenInfo={description:'A `FormTokenField` is a field similar to the tags and categories fields in the interim editor chrome,\nor the "to" field in Mail on OS X. Tokens can be entered by typing them or selecting them from a list of suggested tokens.\n\nUp to one hundred suggestions that match what the user has typed so far will be shown from which the user can pick from (auto-complete).\nTokens are separated by the "," character. Suggestions can be selected with the up or down arrows and added with the tab or enter key.\n\nThe `value` property is handled in a manner similar to controlled form components.\nSee [Forms](https://react.dev/reference/react-dom/components#form-components) in the React Documentation for more information.',displayName:"FormTokenField",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},suggestions:{defaultValue:null,description:"An array of strings to present to the user as suggested tokens.",name:"suggestions",required:!1,type:{name:"string[]"}},maxSuggestions:{defaultValue:{value:"100"},description:"The maximum number of suggestions to display at a time.",name:"maxSuggestions",required:!1,type:{name:"number"}},value:{defaultValue:null,description:"An array of strings or objects to display as tokens in the field.\nIf objects are present in the array, they **must** have a property of `value`.",name:"value",required:!1,type:{name:"(string | TokenItem)[]"}},displayTransform:{defaultValue:null,description:"Function to call to transform tokens for display.\n(In the editor, this is needed to decode HTML entities embedded in tags\n- otherwise entities like `&` in tag names are double-encoded like `&amp;`,\nonce by the REST API and once by React).",name:"displayTransform",required:!1,type:{name:"(token: string) => string"}},saveTransform:{defaultValue:{value:"( token: string ) => token.trim()"},description:"Function to call to transform tokens for saving. The default is to trim the token value.\nThis function is also applied when matching suggestions against the current value\nso that matching works correctly with leading or trailing spaces. (In the editor,\nthis is needed to remove leading and trailing spaces from tag names, like wp-admin does.\nOtherwise the REST API won't save them.)",name:"saveTransform",required:!1,type:{name:"(token: string) => string"}},onChange:{defaultValue:null,description:"Function to call when the tokens have changed. An array of new tokens is passed to the callback.",name:"onChange",required:!1,type:{name:"(tokens: (string | TokenItem)[]) => void"}},onInputChange:{defaultValue:null,description:"Function to call when the users types in the input field. It can be used to trigger autocomplete requests.",name:"onInputChange",required:!1,type:{name:"(input: string) => void"}},onFocus:{defaultValue:null,description:"Function to call when the TokenField has been focused on. The event is passed to the callback. Useful for analytics.",name:"onFocus",required:!1,type:{name:"(event: FocusEvent<Element, Element>) => void"}},isBorderless:{defaultValue:null,description:"When true, renders tokens as without a background.",name:"isBorderless",required:!1,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"If passed, `TokenField` will disable ability to add new tokens once number of tokens is greater than or equal to `maxLength`.",name:"maxLength",required:!1,type:{name:"number"}},disabled:{defaultValue:null,description:"When true, tokens are not able to be added or removed.",name:"disabled",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"If passed, the `TokenField` input will show a placeholder string if no value tokens are present.",name:"placeholder",required:!1,type:{name:"string"}},tokenizeOnSpace:{defaultValue:null,description:"If true, will add a token when `TokenField` is focused and `space` is pressed.",name:"tokenizeOnSpace",required:!1,type:{name:"boolean"}},messages:{defaultValue:null,description:"Allows customizing the messages presented by screen readers in different occasions:\n\n-   `added`: The user added a new token.\n-   `removed`: The user removed an existing token.\n-   `remove` : The user focused the button to remove the token.\n-   `__experimentalInvalid`: The user tried to add a token that didn't pass the validation.",name:"messages",required:!1,type:{name:"Messages"}},__experimentalExpandOnFocus:{defaultValue:null,description:"If true, the suggestions list will be always expanded when the input field has the focus.",name:"__experimentalExpandOnFocus",required:!1,type:{name:"boolean"}},__experimentalValidateInput:{defaultValue:{value:"() => true"},description:"If passed, all introduced values will be validated before being added as tokens.",name:"__experimentalValidateInput",required:!1,type:{name:"(token: string) => boolean"}},__experimentalShowHowTo:{defaultValue:{value:"true"},description:"If false, the text on how to use the select (ie: _Separate with commas or the Enter key._) will be hidden.",name:"__experimentalShowHowTo",required:!1,type:{name:"boolean"}},__next36pxDefaultSize:{defaultValue:{value:"false"},description:"Deprecated. Use `__next40pxDefaultSize` instead.\n@deprecated\n@ignore",name:"__next36pxDefaultSize",required:!1,type:{name:"boolean"}},__next40pxDefaultSize:{defaultValue:{value:"false"},description:"Start opting into the larger default height that will become the\ndefault size in a future version.",name:"__next40pxDefaultSize",required:!1,type:{name:"boolean"}},__experimentalAutoSelectFirstMatch:{defaultValue:{value:"false"},description:"If true, the select the first matching suggestion when the user presses\nthe Enter key (or space when tokenizeOnSpace is true).",name:"__experimentalAutoSelectFirstMatch",required:!1,type:{name:"boolean"}},__experimentalRenderItem:{defaultValue:null,description:"Custom renderer for suggestions.",name:"__experimentalRenderItem",required:!1,type:{name:"(args: { item: string; }) => ReactNode"}},__nextHasNoMarginBottom:{defaultValue:{value:"false"},description:"Start opting into the new margin-free styles that will become the default in a future version.",name:"__nextHasNoMarginBottom",required:!1,type:{name:"boolean"}},tokenizeOnBlur:{defaultValue:{value:"false"},description:"If true, add any incompleteTokenValue as a new token when the field loses focus.",name:"tokenizeOnBlur",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/form-token-field/index.tsx#FormTokenField"]={docgenInfo:FormTokenField.__docgenInfo,name:"FormTokenField",path:"packages/components/src/form-token-field/index.tsx#FormTokenField"})}catch(__react_docgen_typescript_loader_error){}},"./packages/components/src/form-token-field/suggestions-list.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const handleMouseDown=e=>{e.preventDefault()};function SuggestionsList({selectedIndex,scrollIntoView,match,onHover,onSelect,suggestions=[],displayTransform,instanceId,__experimentalRenderItem}){const listRef=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__.A)((listNode=>(selectedIndex>-1&&scrollIntoView&&listNode.children[selectedIndex]&&listNode.children[selectedIndex].scrollIntoView({behavior:"instant",block:"nearest",inline:"nearest"}),()=>{0})),[selectedIndex,scrollIntoView]),handleHover=suggestion=>()=>{onHover?.(suggestion)},handleClick=suggestion=>()=>{onSelect?.(suggestion)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("ul",{ref:listRef,className:"components-form-token-field__suggestions-list",id:`components-form-token-suggestions-${instanceId}`,role:"listbox",children:[suggestions.map(((suggestion,index)=>{const matchText=(suggestion=>{const matchText=displayTransform(match).toLocaleLowerCase();if(0===matchText.length)return null;const transformedSuggestion=displayTransform(suggestion),indexOfMatch=transformedSuggestion.toLocaleLowerCase().indexOf(matchText);return{suggestionBeforeMatch:transformedSuggestion.substring(0,indexOfMatch),suggestionMatch:transformedSuggestion.substring(indexOfMatch,indexOfMatch+matchText.length),suggestionAfterMatch:transformedSuggestion.substring(indexOfMatch+matchText.length)}})(suggestion),isSelected=index===selectedIndex,isDisabled="object"==typeof suggestion&&suggestion?.disabled,key="object"==typeof suggestion&&"value"in suggestion?suggestion?.value:displayTransform(suggestion),className=(0,clsx__WEBPACK_IMPORTED_MODULE_3__.A)("components-form-token-field__suggestion",{"is-selected":isSelected});let output;return output="function"==typeof __experimentalRenderItem?__experimentalRenderItem({item:suggestion}):matchText?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("span",{"aria-label":displayTransform(suggestion),children:[matchText.suggestionBeforeMatch,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("strong",{className:"components-form-token-field__suggestion-match",children:matchText.suggestionMatch}),matchText.suggestionAfterMatch]}):displayTransform(suggestion),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("li",{id:`components-form-token-suggestions-${instanceId}-${index}`,role:"option",className,onMouseDown:handleMouseDown,onClick:handleClick(suggestion),onMouseEnter:handleHover(suggestion),"aria-selected":index===selectedIndex,"aria-disabled":isDisabled,children:output},key)})),0===suggestions.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("li",{className:"components-form-token-field__suggestion is-empty",children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("No items found")})]})}SuggestionsList.displayName="SuggestionsList";const __WEBPACK_DEFAULT_EXPORT__=SuggestionsList;try{SuggestionsList.displayName="SuggestionsList",SuggestionsList.__docgenInfo={description:"",displayName:"SuggestionsList",props:{selectedIndex:{defaultValue:null,description:"",name:"selectedIndex",required:!0,type:{name:"number"}},scrollIntoView:{defaultValue:null,description:"",name:"scrollIntoView",required:!0,type:{name:"boolean"}},match:{defaultValue:null,description:"",name:"match",required:!0,type:{name:"string | { value: string; disabled?: boolean; }"}},onHover:{defaultValue:null,description:"",name:"onHover",required:!0,type:{name:"(suggestion: T) => void"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(suggestion: T) => void"}},suggestions:{defaultValue:{value:"[]"},description:"",name:"suggestions",required:!1,type:{name:"T[]"}},displayTransform:{defaultValue:null,description:"",name:"displayTransform",required:!0,type:{name:"(value: T) => string"}},instanceId:{defaultValue:null,description:"",name:"instanceId",required:!0,type:{name:"string | number"}},__experimentalRenderItem:{defaultValue:null,description:"",name:"__experimentalRenderItem",required:!1,type:{name:"(args: { item: T; }) => ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/form-token-field/suggestions-list.tsx#SuggestionsList"]={docgenInfo:SuggestionsList.__docgenInfo,name:"SuggestionsList",path:"packages/components/src/form-token-field/suggestions-list.tsx#SuggestionsList"})}catch(__react_docgen_typescript_loader_error){}},"./packages/components/src/form-token-field/token-input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function UnForwardedTokenInput(props,ref){const{value,isExpanded,instanceId,selectedSuggestionIndex,className,onChange,onFocus,onBlur,...restProps}=props,[hasFocus,setHasFocus]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),size=value?value.length+1:0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{ref,id:`components-form-token-input-${instanceId}`,type:"text",...restProps,value:value||"",onChange:event=>{onChange&&onChange({value:event.target.value})},onFocus:e=>{setHasFocus(!0),onFocus?.(e)},onBlur:e=>{setHasFocus(!1),onBlur?.(e)},size,className:(0,clsx__WEBPACK_IMPORTED_MODULE_2__.A)(className,"components-form-token-field__input"),autoComplete:"off",role:"combobox","aria-expanded":isExpanded,"aria-autocomplete":"list","aria-owns":isExpanded?`components-form-token-suggestions-${instanceId}`:void 0,"aria-activedescendant":hasFocus&&-1!==selectedSuggestionIndex&&isExpanded?`components-form-token-suggestions-${instanceId}-${selectedSuggestionIndex}`:void 0,"aria-describedby":`components-form-token-suggestions-howto-${instanceId}`})}UnForwardedTokenInput.displayName="UnForwardedTokenInput";const TokenInput=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(UnForwardedTokenInput),__WEBPACK_DEFAULT_EXPORT__=TokenInput;try{UnForwardedTokenInput.displayName="UnForwardedTokenInput",UnForwardedTokenInput.__docgenInfo={description:"",displayName:"UnForwardedTokenInput",props:{isExpanded:{defaultValue:null,description:"",name:"isExpanded",required:!0,type:{name:"boolean"}},instanceId:{defaultValue:null,description:"",name:"instanceId",required:!0,type:{name:"string | number"}},selectedSuggestionIndex:{defaultValue:null,description:"",name:"selectedSuggestionIndex",required:!0,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"({ value }: { value: string; }) => void"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/form-token-field/token-input.tsx#UnForwardedTokenInput"]={docgenInfo:UnForwardedTokenInput.__docgenInfo,name:"UnForwardedTokenInput",path:"packages/components/src/form-token-field/token-input.tsx#UnForwardedTokenInput"})}catch(__react_docgen_typescript_loader_error){}try{TokenInput.displayName="TokenInput",TokenInput.__docgenInfo={description:"",displayName:"TokenInput",props:{isExpanded:{defaultValue:null,description:"",name:"isExpanded",required:!0,type:{name:"boolean"}},instanceId:{defaultValue:null,description:"",name:"instanceId",required:!0,type:{name:"string | number"}},selectedSuggestionIndex:{defaultValue:null,description:"",name:"selectedSuggestionIndex",required:!0,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"({ value }: { value: string; }) => void"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/form-token-field/token-input.tsx#TokenInput"]={docgenInfo:TokenInput.__docgenInfo,name:"TokenInput",path:"packages/components/src/form-token-field/token-input.tsx#TokenInput"})}catch(__react_docgen_typescript_loader_error){}try{tokeninput.displayName="tokeninput",tokeninput.__docgenInfo={description:"",displayName:"tokeninput",props:{isExpanded:{defaultValue:null,description:"",name:"isExpanded",required:!0,type:{name:"boolean"}},instanceId:{defaultValue:null,description:"",name:"instanceId",required:!0,type:{name:"string | number"}},selectedSuggestionIndex:{defaultValue:null,description:"",name:"selectedSuggestionIndex",required:!0,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"({ value }: { value: string; }) => void"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/form-token-field/token-input.tsx#tokeninput"]={docgenInfo:tokeninput.__docgenInfo,name:"tokeninput",path:"packages/components/src/form-token-field/token-input.tsx#tokeninput"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/use-memo-one/dist/use-memo-one.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MA:()=>useMemoOne});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useMemoOne(getResult,inputs){var initial=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((function(){return{inputs,result:getResult()}}))[0],committed=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(initial),cache=Boolean(inputs&&committed.current.inputs&&function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(var i=0;i<newInputs.length;i++)if(newInputs[i]!==lastInputs[i])return!1;return!0}(inputs,committed.current.inputs))?committed.current:{inputs,result:getResult()};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){committed.current=cache}),[cache]),cache.result}}}]);