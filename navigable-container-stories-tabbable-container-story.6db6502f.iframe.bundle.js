"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[4470],{"./packages/dom/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{XC:()=>build_module_focus});var focusable_namespaceObject={};__webpack_require__.r(focusable_namespaceObject),__webpack_require__.d(focusable_namespaceObject,{find:()=>find});var tabbable_namespaceObject={};function isVisible(element){return element.offsetWidth>0||element.offsetHeight>0||element.getClientRects().length>0}function find(context,{sequential=!1}={}){const elements=context.querySelectorAll(function buildSelector(sequential){return[sequential?'[tabindex]:not([tabindex^="-"])':"[tabindex]","a[href]","button:not([disabled])",'input:not([type="hidden"]):not([disabled])',"select:not([disabled])","textarea:not([disabled])",'iframe:not([tabindex^="-"])',"object","embed","area[href]","[contenteditable]:not([contenteditable=false])"].join(",")}(sequential));return Array.from(elements).filter((element=>{if(!isVisible(element))return!1;const{nodeName}=element;return"AREA"!==nodeName||function isValidFocusableArea(element){const map=element.closest("map[name]");if(!map)return!1;const img=element.ownerDocument.querySelector('img[usemap="#'+map.name+'"]');return!!img&&isVisible(img)}(element)}))}function getTabIndex(element){const tabIndex=element.getAttribute("tabindex");return null===tabIndex?0:parseInt(tabIndex,10)}function isTabbableIndex(element){return-1!==getTabIndex(element)}function mapElementToObjectTabbable(element,index){return{element,index}}function mapObjectTabbableToElement(object){return object.element}function compareObjectTabbables(a,b){const aTabIndex=getTabIndex(a.element),bTabIndex=getTabIndex(b.element);return aTabIndex===bTabIndex?a.index-b.index:aTabIndex-bTabIndex}function filterTabbable(focusables){return focusables.filter(isTabbableIndex).map(mapElementToObjectTabbable).sort(compareObjectTabbables).map(mapObjectTabbableToElement).reduce(function createStatefulCollapseRadioGroup(){const CHOSEN_RADIO_BY_NAME={};return function collapseRadioGroup(result,element){const{nodeName,type,checked,name}=element;if("INPUT"!==nodeName||"radio"!==type||!name)return result.concat(element);const hasChosen=CHOSEN_RADIO_BY_NAME.hasOwnProperty(name);if(!checked&&hasChosen)return result;if(hasChosen){const hadChosenElement=CHOSEN_RADIO_BY_NAME[name];result=result.filter((e=>e!==hadChosenElement))}return CHOSEN_RADIO_BY_NAME[name]=element,result.concat(element)}}(),[])}function tabbable_find(context){return filterTabbable(find(context))}function findPrevious(element){return filterTabbable(find(element.ownerDocument.body)).reverse().find((focusable=>element.compareDocumentPosition(focusable)&element.DOCUMENT_POSITION_PRECEDING))}function findNext(element){return filterTabbable(find(element.ownerDocument.body)).find((focusable=>element.compareDocumentPosition(focusable)&element.DOCUMENT_POSITION_FOLLOWING))}__webpack_require__.r(tabbable_namespaceObject),__webpack_require__.d(tabbable_namespaceObject,{find:()=>tabbable_find,findNext:()=>findNext,findPrevious:()=>findPrevious,isTabbableIndex:()=>isTabbableIndex});const build_module_focus={focusable:focusable_namespaceObject,tabbable:tabbable_namespaceObject}},"./packages/components/src/navigable-container/container.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_wordpress_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/dom/build-module/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const noop=()=>{},MENU_ITEM_ROLES=["menuitem","menuitemradio","menuitemcheckbox"];class NavigableContainer extends _wordpress_element__WEBPACK_IMPORTED_MODULE_1__.Component{constructor(args){super(args),this.onKeyDown=this.onKeyDown.bind(this),this.bindContainer=this.bindContainer.bind(this),this.getFocusableContext=this.getFocusableContext.bind(this),this.getFocusableIndex=this.getFocusableIndex.bind(this)}componentDidMount(){this.container&&this.container.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){this.container&&this.container.removeEventListener("keydown",this.onKeyDown)}bindContainer(ref){const{forwardedRef}=this.props;this.container=ref,"function"==typeof forwardedRef?forwardedRef(ref):forwardedRef&&"current"in forwardedRef&&(forwardedRef.current=ref)}getFocusableContext(target){if(!this.container)return null;const{onlyBrowserTabstops}=this.props,focusables=(onlyBrowserTabstops?_wordpress_dom__WEBPACK_IMPORTED_MODULE_2__.XC.tabbable:_wordpress_dom__WEBPACK_IMPORTED_MODULE_2__.XC.focusable).find(this.container),index=this.getFocusableIndex(focusables,target);return index>-1&&target?{index,target,focusables}:null}getFocusableIndex(focusables,target){return focusables.indexOf(target)}onKeyDown(event){this.props.onKeyDown&&this.props.onKeyDown(event);const{getFocusableContext}=this,{cycle=!0,eventToOffset,onNavigate=noop,stopNavigationEvents}=this.props,offset=eventToOffset(event);if(void 0!==offset&&stopNavigationEvents){event.stopImmediatePropagation();const targetRole=event.target?.getAttribute("role");!!targetRole&&MENU_ITEM_ROLES.includes(targetRole)&&event.preventDefault()}if(!offset)return;const activeElement=event.target?.ownerDocument?.activeElement;if(!activeElement)return;const context=getFocusableContext(activeElement);if(!context)return;const{index,focusables}=context,nextIndex=cycle?function cycleValue(value,total,offset){const nextValue=value+offset;return nextValue<0?total+nextValue:nextValue>=total?nextValue-total:nextValue}(index,focusables.length,offset):index+offset;nextIndex>=0&&nextIndex<focusables.length&&(focusables[nextIndex].focus(),onNavigate(nextIndex,focusables[nextIndex]),"Tab"===event.code&&event.preventDefault())}render(){const{children,stopNavigationEvents,eventToOffset,onNavigate,onKeyDown,cycle,onlyBrowserTabstops,forwardedRef,...restProps}=this.props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref:this.bindContainer,...restProps,children})}}NavigableContainer.displayName="NavigableContainer";const forwardedNavigableContainer=(props,ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NavigableContainer,{...props,forwardedRef:ref});forwardedNavigableContainer.displayName="forwardedNavigableContainer",forwardedNavigableContainer.displayName="NavigableContainer";const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(forwardedNavigableContainer);try{forwardedNavigableContainer.displayName="NavigableContainer",forwardedNavigableContainer.__docgenInfo={description:"",displayName:"NavigableContainer",props:{children:{defaultValue:null,description:"The component children.",name:"children",required:!1,type:{name:"ReactNode"}},cycle:{defaultValue:{value:"true"},description:"A boolean which tells the component whether or not to cycle from the end back to the beginning and vice versa.",name:"cycle",required:!1,type:{name:"boolean"}},onKeyDown:{defaultValue:null,description:"A callback invoked on the keydown event.",name:"onKeyDown",required:!1,type:{name:"(event: KeyboardEvent) => void"}},onNavigate:{defaultValue:null,description:"A callback invoked when the menu navigates to one of its children passing the index and child as an argument",name:"onNavigate",required:!1,type:{name:"(index: number, focusable: HTMLElement) => void"}},eventToOffset:{defaultValue:null,description:"Gets an offset, given an event.",name:"eventToOffset",required:!0,type:{name:"(event: KeyboardEvent) => 0 | 1 | -1"}},forwardedRef:{defaultValue:null,description:"The forwarded ref.",name:"forwardedRef",required:!1,type:{name:"ForwardedRef<any>"}},onlyBrowserTabstops:{defaultValue:{value:"false"},description:"Whether to only consider browser tab stops.",name:"onlyBrowserTabstops",required:!0,type:{name:"boolean"}},stopNavigationEvents:{defaultValue:{value:"false"},description:"Whether to stop navigation events.",name:"stopNavigationEvents",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/navigable-container/container.tsx#NavigableContainer"]={docgenInfo:NavigableContainer.__docgenInfo,name:"NavigableContainer",path:"packages/components/src/navigable-container/container.tsx#NavigableContainer"})}catch(__react_docgen_typescript_loader_error){}},"./packages/components/src/navigable-container/stories/tabbable-container.story.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>tabbable_container_story});var react=__webpack_require__("./node_modules/react/index.js"),container=__webpack_require__("./packages/components/src/navigable-container/container.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function UnforwardedTabbableContainer({eventToOffset,...props},ref){return(0,jsx_runtime.jsx)(container.A,{ref,stopNavigationEvents:!0,onlyBrowserTabstops:!0,eventToOffset:evt=>{const{code,shiftKey}=evt;return"Tab"===code?shiftKey?-1:1:eventToOffset?eventToOffset(evt):void 0},...props})}UnforwardedTabbableContainer.displayName="UnforwardedTabbableContainer";const TabbableContainer=(0,react.forwardRef)(UnforwardedTabbableContainer),navigable_container_tabbable=TabbableContainer;try{TabbableContainer.displayName="TabbableContainer",TabbableContainer.__docgenInfo={description:'A container for tabbable elements.\n\n ```jsx\n import {\n   TabbableContainer,\n   Button,\n } from \'@wordpress/components\';\n\n function onNavigate( index, target ) {\n   console.log( `Navigates to ${ index }`, target );\n }\n\n const MyTabbableContainer = () => (\n   <div>\n     <span>Tabbable Container:</span>\n     <TabbableContainer onNavigate={ onNavigate }>\n       <Button variant="secondary" tabIndex="0">\n         Section 1\n       </Button>\n       <Button variant="secondary" tabIndex="0">\n         Section 2\n       </Button>\n       <Button variant="secondary" tabIndex="0">\n         Section 3\n       </Button>\n       <Button variant="secondary" tabIndex="0">\n         Section 4\n       </Button>\n     </TabbableContainer>\n   </div>\n );\n ```',displayName:"TabbableContainer",props:{children:{defaultValue:null,description:"The component children.",name:"children",required:!1,type:{name:"ReactNode"}},cycle:{defaultValue:{value:"true"},description:"A boolean which tells the component whether or not to cycle from the end back to the beginning and vice versa.",name:"cycle",required:!1,type:{name:"boolean"}},onKeyDown:{defaultValue:null,description:"A callback invoked on the keydown event.",name:"onKeyDown",required:!1,type:{name:"(event: KeyboardEvent) => void"}},onNavigate:{defaultValue:null,description:"A callback invoked when the menu navigates to one of its children passing the index and child as an argument",name:"onNavigate",required:!1,type:{name:"(index: number, focusable: HTMLElement) => void"}},eventToOffset:{defaultValue:null,description:"Gets an offset, given an event.",name:"eventToOffset",required:!1,type:{name:"(event: KeyboardEvent) => 0 | 1 | -1"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/navigable-container/tabbable.tsx#TabbableContainer"]={docgenInfo:TabbableContainer.__docgenInfo,name:"TabbableContainer",path:"packages/components/src/navigable-container/tabbable.tsx#TabbableContainer"})}catch(__react_docgen_typescript_loader_error){}try{tabbable.displayName="tabbable",tabbable.__docgenInfo={description:'A container for tabbable elements.\n\n ```jsx\n import {\n   TabbableContainer,\n   Button,\n } from \'@wordpress/components\';\n\n function onNavigate( index, target ) {\n   console.log( `Navigates to ${ index }`, target );\n }\n\n const MyTabbableContainer = () => (\n   <div>\n     <span>Tabbable Container:</span>\n     <TabbableContainer onNavigate={ onNavigate }>\n       <Button variant="secondary" tabIndex="0">\n         Section 1\n       </Button>\n       <Button variant="secondary" tabIndex="0">\n         Section 2\n       </Button>\n       <Button variant="secondary" tabIndex="0">\n         Section 3\n       </Button>\n       <Button variant="secondary" tabIndex="0">\n         Section 4\n       </Button>\n     </TabbableContainer>\n   </div>\n );\n ```',displayName:"tabbable",props:{children:{defaultValue:null,description:"The component children.",name:"children",required:!1,type:{name:"ReactNode"}},cycle:{defaultValue:{value:"true"},description:"A boolean which tells the component whether or not to cycle from the end back to the beginning and vice versa.",name:"cycle",required:!1,type:{name:"boolean"}},onKeyDown:{defaultValue:null,description:"A callback invoked on the keydown event.",name:"onKeyDown",required:!1,type:{name:"(event: KeyboardEvent) => void"}},onNavigate:{defaultValue:null,description:"A callback invoked when the menu navigates to one of its children passing the index and child as an argument",name:"onNavigate",required:!1,type:{name:"(index: number, focusable: HTMLElement) => void"}},eventToOffset:{defaultValue:null,description:"Gets an offset, given an event.",name:"eventToOffset",required:!1,type:{name:"(event: KeyboardEvent) => 0 | 1 | -1"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/navigable-container/tabbable.tsx#tabbable"]={docgenInfo:tabbable.__docgenInfo,name:"tabbable",path:"packages/components/src/navigable-container/tabbable.tsx#tabbable"})}catch(__react_docgen_typescript_loader_error){}const tabbable_container_story={title:"Components/Containers/TabbableContainer",id:"components-tabbablecontainer",component:navigable_container_tabbable,argTypes:{children:{control:{type:null}}},parameters:{sourceLink:"packages/components/src/navigable-container",badges:[],actions:{argTypesRegex:"^on.*"},controls:{expanded:!0},docs:{canvas:{sourceState:"shown"}}}},Default=args=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("button",{children:"Before tabbable container"}),(0,jsx_runtime.jsxs)(navigable_container_tabbable,{...args,style:{margin:"32px 0",padding:"16px",border:"1px solid black"},children:[(0,jsx_runtime.jsx)("button",{children:"Item 1"}),(0,jsx_runtime.jsx)("button",{children:"Item 2"}),(0,jsx_runtime.jsx)("button",{disabled:!0,children:"Item 3 (disabled)"}),(0,jsx_runtime.jsx)("button",{tabIndex:-1,children:"Item 4 (non-tabbable)"}),(0,jsx_runtime.jsx)("button",{tabIndex:0,children:"Item 5"}),(0,jsx_runtime.jsx)("button",{children:"Item 6"})]}),(0,jsx_runtime.jsx)("button",{children:"After tabbable container"})]});Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => {\n  return <>\n            <button>Before tabbable container</button>\n            <TabbableContainer {...args} style={{\n      margin: '32px 0',\n      padding: '16px',\n      border: '1px solid black'\n    }}>\n                <button>Item 1</button>\n                <button>Item 2</button>\n                <button disabled>Item 3 (disabled)</button>\n                <button tabIndex={-1}>Item 4 (non-tabbable)</button>\n                <button tabIndex={0}>Item 5</button>\n                <button>Item 6</button>\n            </TabbableContainer>\n            <button>After tabbable container</button>\n        </>;\n}",...Default.parameters?.docs?.source}}}}}]);