(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[2892],{"./packages/api-fetch/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>api_fetch_build_module});var build_module=__webpack_require__("./packages/i18n/build-module/index.js");const nonce=function createNonceMiddleware(nonce){const middleware=(options,next)=>{const{headers={}}=options;for(const headerName in headers)if("x-wp-nonce"===headerName.toLowerCase()&&headers[headerName]===middleware.nonce)return next(options);return next({...options,headers:{...headers,"X-WP-Nonce":middleware.nonce}})};return middleware.nonce=nonce,middleware},namespace_endpoint=(options,next)=>{let namespaceTrimmed,endpointTrimmed,path=options.path;return"string"==typeof options.namespace&&"string"==typeof options.endpoint&&(namespaceTrimmed=options.namespace.replace(/^\/|\/$/g,""),endpointTrimmed=options.endpoint.replace(/^\//,""),path=endpointTrimmed?namespaceTrimmed+"/"+endpointTrimmed:namespaceTrimmed),delete options.namespace,delete options.endpoint,next({...options,path})},root_url=rootURL=>(options,next)=>namespace_endpoint(options,(optionsWithPath=>{let apiRoot,url=optionsWithPath.url,path=optionsWithPath.path;return"string"==typeof path&&(apiRoot=rootURL,-1!==rootURL.indexOf("?")&&(path=path.replace("?","&")),path=path.replace(/^\//,""),"string"==typeof apiRoot&&-1!==apiRoot.indexOf("?")&&(path=path.replace("?","&")),url=apiRoot+path),next({...optionsWithPath,url})}));function normalizePath(path){const splitted=path.split("?"),query=splitted[1],base=splitted[0];return query?base+"?"+query.split("&").map((entry=>entry.split("="))).map((pair=>pair.map(decodeURIComponent))).sort(((a,b)=>a[0].localeCompare(b[0]))).map((pair=>pair.map(encodeURIComponent))).map((pair=>pair.join("="))).join("&"):base}var get_query_args=__webpack_require__("./packages/url/build-module/get-query-args.js"),add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js");function prepareResponse(responseData,parse){return Promise.resolve(parse?responseData.body:new window.Response(JSON.stringify(responseData.body),{status:200,statusText:"OK",headers:responseData.headers}))}const preloading=function createPreloadingMiddleware(preloadedData){const cache=Object.fromEntries(Object.entries(preloadedData).map((([path,data])=>[normalizePath(path),data])));return(options,next)=>{const{parse=!0}=options;let rawPath=options.path;if(!rawPath&&options.url){const{rest_route:pathFromQuery,...queryArgs}=(0,get_query_args.u)(options.url);"string"==typeof pathFromQuery&&(rawPath=(0,add_query_args.F)(pathFromQuery,queryArgs))}if("string"!=typeof rawPath)return next(options);const method=options.method||"GET",path=normalizePath(rawPath);if("GET"===method&&cache[path]){const cacheData=cache[path];return delete cache[path],prepareResponse(cacheData,!!parse)}if("OPTIONS"===method&&cache[method]&&cache[method][path]){const cacheData=cache[method][path];return delete cache[method][path],prepareResponse(cacheData,!!parse)}return next(options)}},modifyQuery=({path,url,...options},queryArgs)=>({...options,url:url&&(0,add_query_args.F)(url,queryArgs),path:path&&(0,add_query_args.F)(path,queryArgs)}),parseResponse=response=>response.json?response.json():Promise.reject(response),getNextPageUrl=response=>{const{next}=(linkHeader=>{if(!linkHeader)return{};const match=linkHeader.match(/<([^>]+)>; rel="next"/);return match?{next:match[1]}:{}})(response.headers.get("link"));return next},fetch_all_middleware=async(options,next)=>{if(!1===options.parse)return next(options);if(!(options=>{const pathIsUnbounded=!!options.path&&-1!==options.path.indexOf("per_page=-1"),urlIsUnbounded=!!options.url&&-1!==options.url.indexOf("per_page=-1");return pathIsUnbounded||urlIsUnbounded})(options))return next(options);const response=await api_fetch_build_module({...modifyQuery(options,{per_page:100}),parse:!1}),results=await parseResponse(response);if(!Array.isArray(results))return results;let nextPage=getNextPageUrl(response);if(!nextPage)return results;let mergedResults=[].concat(results);for(;nextPage;){const nextResponse=await api_fetch_build_module({...options,path:void 0,url:nextPage,parse:!1}),nextResults=await parseResponse(nextResponse);mergedResults=mergedResults.concat(nextResults),nextPage=getNextPageUrl(nextResponse)}return mergedResults},OVERRIDE_METHODS=new Set(["PATCH","PUT","DELETE"]),DEFAULT_METHOD="GET",http_v1=(options,next)=>{const{method=DEFAULT_METHOD}=options;return OVERRIDE_METHODS.has(method.toUpperCase())&&(options={...options,headers:{...options.headers,"X-HTTP-Method-Override":method,"Content-Type":"application/json"},method:"POST"}),next(options)};function getQueryArg(url,arg){return(0,get_query_args.u)(url)[arg]}function hasQueryArg(url,arg){return void 0!==getQueryArg(url,arg)}const user_locale=(options,next)=>("string"!=typeof options.url||hasQueryArg(options.url,"_locale")||(options.url=(0,add_query_args.F)(options.url,{_locale:"user"})),"string"!=typeof options.path||hasQueryArg(options.path,"_locale")||(options.path=(0,add_query_args.F)(options.path,{_locale:"user"})),next(options)),parseResponseAndNormalizeError=(response,shouldParseResponse=!0)=>Promise.resolve(((response,shouldParseResponse=!0)=>shouldParseResponse?204===response.status?null:response.json?response.json():Promise.reject(response):response)(response,shouldParseResponse)).catch((res=>parseAndThrowError(res,shouldParseResponse)));function parseAndThrowError(response,shouldParseResponse=!0){if(!shouldParseResponse)throw response;return(response=>{const invalidJsonError={code:"invalid_json",message:(0,build_module.__)("The response is not a valid JSON response.")};if(!response||!response.json)throw invalidJsonError;return response.json().catch((()=>{throw invalidJsonError}))})(response).then((error=>{const unknownError={code:"unknown_error",message:(0,build_module.__)("An unknown error occurred.")};throw error||unknownError}))}const media_upload=(options,next)=>{if(!function isMediaUploadRequest(options){const isCreateMethod=!!options.method&&"POST"===options.method;return(!!options.path&&-1!==options.path.indexOf("/wp/v2/media")||!!options.url&&-1!==options.url.indexOf("/wp/v2/media"))&&isCreateMethod}(options))return next(options);let retries=0;const postProcess=attachmentId=>(retries++,next({path:`/wp/v2/media/${attachmentId}/post-process`,method:"POST",data:{action:"create-image-subsizes"},parse:!1}).catch((()=>retries<5?postProcess(attachmentId):(next({path:`/wp/v2/media/${attachmentId}?force=true`,method:"DELETE"}),Promise.reject()))));return next({...options,parse:!1}).catch((response=>{if(!response.headers)return Promise.reject(response);const attachmentId=response.headers.get("x-wp-upload-attachment-id");return response.status>=500&&response.status<600&&attachmentId?postProcess(attachmentId).catch((()=>!1!==options.parse?Promise.reject({code:"post_process",message:(0,build_module.__)("Media upload failed. If this is a photo or a large image, please scale it down and try again.")}):Promise.reject(response))):parseAndThrowError(response,options.parse)})).then((response=>parseResponseAndNormalizeError(response,options.parse)))};var remove_query_args=__webpack_require__("./packages/url/build-module/remove-query-args.js");const theme_preview=themePath=>(options,next)=>{if("string"==typeof options.url){const wpThemePreview=getQueryArg(options.url,"wp_theme_preview");void 0===wpThemePreview?options.url=(0,add_query_args.F)(options.url,{wp_theme_preview:themePath}):""===wpThemePreview&&(options.url=(0,remove_query_args.m)(options.url,"wp_theme_preview"))}if("string"==typeof options.path){const wpThemePreview=getQueryArg(options.path,"wp_theme_preview");void 0===wpThemePreview?options.path=(0,add_query_args.F)(options.path,{wp_theme_preview:themePath}):""===wpThemePreview&&(options.path=(0,remove_query_args.m)(options.path,"wp_theme_preview"))}return next(options)},DEFAULT_HEADERS={Accept:"application/json, */*;q=0.1"},DEFAULT_OPTIONS={credentials:"include"},middlewares=[user_locale,namespace_endpoint,http_v1,fetch_all_middleware];const checkStatus=response=>{if(response.status>=200&&response.status<300)return response;throw response};let fetchHandler=nextOptions=>{const{url,path,data,parse=!0,...remainingOptions}=nextOptions;let{body,headers}=nextOptions;headers={...DEFAULT_HEADERS,...headers},data&&(body=JSON.stringify(data),headers["Content-Type"]="application/json");return window.fetch(url||path||window.location.href,{...DEFAULT_OPTIONS,...remainingOptions,body,headers}).then((value=>Promise.resolve(value).then(checkStatus).catch((response=>parseAndThrowError(response,parse))).then((response=>parseResponseAndNormalizeError(response,parse)))),(err=>{if(err&&"AbortError"===err.name)throw err;throw{code:"fetch_error",message:(0,build_module.__)("You are probably offline.")}}))};function apiFetch(options){return middlewares.reduceRight(((next,middleware)=>workingOptions=>middleware(workingOptions,next)),fetchHandler)(options).catch((error=>"rest_cookie_invalid_nonce"!==error.code?Promise.reject(error):window.fetch(apiFetch.nonceEndpoint).then(checkStatus).then((data=>data.text())).then((text=>(apiFetch.nonceMiddleware.nonce=text,apiFetch(options))))))}apiFetch.use=function registerMiddleware(middleware){middlewares.unshift(middleware)},apiFetch.setFetchHandler=function setFetchHandler(newFetchHandler){fetchHandler=newFetchHandler},apiFetch.createNonceMiddleware=nonce,apiFetch.createPreloadingMiddleware=preloading,apiFetch.createRootURLMiddleware=root_url,apiFetch.fetchAllMiddleware=fetch_all_middleware,apiFetch.mediaUploadMiddleware=media_upload,apiFetch.createThemePreviewMiddleware=theme_preview;const api_fetch_build_module=apiFetch},"./packages/block-editor/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{LE:()=>AlignmentControl,F0:()=>AlignmentToolbar,E6:()=>BlockAlignmentToolbar,j_:()=>block_breadcrumb,Eo:()=>block_canvas,_C:()=>BlockContextProvider,mC:()=>block_controls,oS:()=>provider,th:()=>block_icon,Nh:()=>block_inspector,m9:()=>BlockList,su:()=>block_preview,Or:()=>block_settings_menu_controls,E9:()=>BlockTitle,Lz:()=>BlockToolbar,SX:()=>BlockVerticalAlignmentControl,OK:()=>BlockVerticalAlignmentToolbar,rE:()=>components_color_palette,wc:()=>contrast_checker,Yf:()=>HeadingLevelDropdown,Tj:()=>inner_blocks,s1:()=>inspector_controls,Ud:()=>media_placeholder,ft:()=>media_replace_flow,Q8:()=>media_upload,qJ:()=>check,rn:()=>NavigableToolbar,Ks:()=>plain_text,ip:()=>RecursionProvider,sD:()=>rich_text,aX:()=>RichTextShortcut,RD:()=>RichTextToolbarButton,fi:()=>SETTINGS_DEFAULTS,yR:()=>tool_selector,Wz:()=>url_input,ZB:()=>url_popover,N5:()=>warning,F5:()=>block_alignment_matrix_control,qV:()=>block_full_height_alignment_control,RM:()=>block_patterns_list,zB:()=>block_variation_picker,W:()=>ColorGradientSettingsDropdown,u0:()=>DateFormatPicker,YK:()=>getBorderClassesAndStyles,Z8:()=>getColorClassesAndStyles,oJ:()=>__experimentalGetElementClassName,fl:()=>getGapCSSValue,tA:()=>__experimentalGetGradientClass,Cc:()=>getShadowClassesAndStyles,bO:()=>getSpacingClassesAndStyles,tb:()=>ImageEditor,sJ:()=>ImageSizeControl,Xw:()=>ImageURLInputUI,MI:()=>InspectorPopoverHeader,Wv:()=>link_control,as:()=>list_view,T:()=>publish_date_time_picker,rZ:()=>SpacingSizesControl,pr:()=>useBlockPreview,SA:()=>useBorderProps,XU:()=>useColorProps,A7:()=>__experimentalUseGradient,wr:()=>useMultipleOriginColorsAndGradients,aG:()=>useResizeCanvas,N9:()=>block_settings_menu_first_item,Ax:()=>block_toolbar_last_item,ui:()=>editor_styles,tX:()=>iframe,EW:()=>__unstableRichTextInputEvent,jZ:()=>useTypewriter,rK:()=>useTypingObserver,tQ:()=>getColorClassName,MK:()=>getColorObjectByAttributeValues,cr:()=>getColorObjectByColorValue,UE:()=>getComputedFluidTypographyValue,y$:()=>getCustomValueFromPreset,t4:()=>getFontSizeClass,Xm:()=>getSpacingPresetCssVar,J6:()=>getTypographyClassesAndStyles,kX:()=>isValueSpacingPreset,jb:()=>privateApis,M_:()=>store_store,iy:()=>storeConfig,RI:()=>transform_styles,KC:()=>useBlockBindingsUtils,Pn:()=>useBlockDisplayInformation,wp:()=>useBlockEditingMode,Z0:()=>use_block_props_useBlockProps,CC:()=>useHasRecursion,yK:()=>useInnerBlocksProps,t0:()=>use_settings_useSettings,dK:()=>useStyleOverride,t_:()=>withColors});var private_selectors_namespaceObject={};__webpack_require__.r(private_selectors_namespaceObject),__webpack_require__.d(private_selectors_namespaceObject,{getAllPatterns:()=>getAllPatterns,getBlockRemovalRules:()=>getBlockRemovalRules,getBlockSettings:()=>getBlockSettings,getBlockStyles:()=>getBlockStyles,getBlockWithoutAttributes:()=>getBlockWithoutAttributes,getClosestAllowedInsertionPoint:()=>getClosestAllowedInsertionPoint,getClosestAllowedInsertionPointForPattern:()=>getClosestAllowedInsertionPointForPattern,getContentLockingParent:()=>getContentLockingParent,getEnabledBlockParents:()=>getEnabledBlockParents,getEnabledClientIdsTree:()=>getEnabledClientIdsTree,getExpandedBlock:()=>getExpandedBlock,getInserterMediaCategories:()=>getInserterMediaCategories,getInsertionPoint:()=>getInsertionPoint,getLastFocus:()=>getLastFocus,getLastInsertedBlocksClientIds:()=>getLastInsertedBlocksClientIds,getOpenedBlockSettingsMenu:()=>getOpenedBlockSettingsMenu,getParentSectionBlock:()=>getParentSectionBlock,getPatternBySlug:()=>getPatternBySlug,getRegisteredInserterMediaCategories:()=>getRegisteredInserterMediaCategories,getRemovalPromptData:()=>getRemovalPromptData,getReusableBlocks:()=>getReusableBlocks,getSectionRootClientId:()=>getSectionRootClientId,getStyleOverrides:()=>getStyleOverrides,getTemporarilyEditingAsBlocks:()=>getTemporarilyEditingAsBlocks,getTemporarilyEditingFocusModeToRevert:()=>getTemporarilyEditingFocusModeToRevert,getZoomLevel:()=>getZoomLevel,hasAllowedPatterns:()=>hasAllowedPatterns,isBlockInterfaceHidden:()=>private_selectors_isBlockInterfaceHidden,isBlockSubtreeDisabled:()=>isBlockSubtreeDisabled,isDragging:()=>private_selectors_isDragging,isResolvingPatterns:()=>isResolvingPatterns,isSectionBlock:()=>isSectionBlock,isZoomOut:()=>isZoomOut});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{__experimentalGetActiveBlockIdByBlockNames:()=>__experimentalGetActiveBlockIdByBlockNames,__experimentalGetAllowedBlocks:()=>__experimentalGetAllowedBlocks,__experimentalGetAllowedPatterns:()=>__experimentalGetAllowedPatterns,__experimentalGetBlockListSettingsForBlocks:()=>__experimentalGetBlockListSettingsForBlocks,__experimentalGetDirectInsertBlock:()=>__experimentalGetDirectInsertBlock,__experimentalGetGlobalBlocksByName:()=>__experimentalGetGlobalBlocksByName,__experimentalGetLastBlockAttributeChanges:()=>__experimentalGetLastBlockAttributeChanges,__experimentalGetParsedPattern:()=>__experimentalGetParsedPattern,__experimentalGetPatternTransformItems:()=>__experimentalGetPatternTransformItems,__experimentalGetPatternsByBlockTypes:()=>__experimentalGetPatternsByBlockTypes,__experimentalGetReusableBlockTitle:()=>__experimentalGetReusableBlockTitle,__unstableGetBlockWithoutInnerBlocks:()=>__unstableGetBlockWithoutInnerBlocks,__unstableGetClientIdWithClientIdsTree:()=>__unstableGetClientIdWithClientIdsTree,__unstableGetClientIdsTree:()=>__unstableGetClientIdsTree,__unstableGetContentLockingParent:()=>__unstableGetContentLockingParent,__unstableGetEditorMode:()=>__unstableGetEditorMode,__unstableGetSelectedBlocksWithPartialSelection:()=>__unstableGetSelectedBlocksWithPartialSelection,__unstableGetTemporarilyEditingAsBlocks:()=>__unstableGetTemporarilyEditingAsBlocks,__unstableGetTemporarilyEditingFocusModeToRevert:()=>__unstableGetTemporarilyEditingFocusModeToRevert,__unstableGetVisibleBlocks:()=>__unstableGetVisibleBlocks,__unstableHasActiveBlockOverlayActive:()=>__unstableHasActiveBlockOverlayActive,__unstableIsFullySelected:()=>__unstableIsFullySelected,__unstableIsLastBlockChangeIgnored:()=>__unstableIsLastBlockChangeIgnored,__unstableIsSelectionCollapsed:()=>__unstableIsSelectionCollapsed,__unstableIsSelectionMergeable:()=>__unstableIsSelectionMergeable,__unstableIsWithinBlockOverlay:()=>__unstableIsWithinBlockOverlay,__unstableSelectionHasUnmergeableBlock:()=>__unstableSelectionHasUnmergeableBlock,areInnerBlocksControlled:()=>areInnerBlocksControlled,canEditBlock:()=>canEditBlock,canInsertBlockType:()=>canInsertBlockType,canInsertBlocks:()=>canInsertBlocks,canLockBlockType:()=>canLockBlockType,canMoveBlock:()=>canMoveBlock,canMoveBlocks:()=>canMoveBlocks,canRemoveBlock:()=>canRemoveBlock,canRemoveBlocks:()=>canRemoveBlocks,didAutomaticChange:()=>didAutomaticChange,getAdjacentBlockClientId:()=>getAdjacentBlockClientId,getAllowedBlocks:()=>getAllowedBlocks,getBlock:()=>getBlock,getBlockAttributes:()=>getBlockAttributes,getBlockCount:()=>getBlockCount,getBlockEditingMode:()=>getBlockEditingMode,getBlockHierarchyRootClientId:()=>getBlockHierarchyRootClientId,getBlockIndex:()=>getBlockIndex,getBlockInsertionPoint:()=>getBlockInsertionPoint,getBlockListSettings:()=>getBlockListSettings,getBlockMode:()=>getBlockMode,getBlockName:()=>getBlockName,getBlockNamesByClientId:()=>getBlockNamesByClientId,getBlockOrder:()=>getBlockOrder,getBlockParents:()=>getBlockParents,getBlockParentsByBlockName:()=>getBlockParentsByBlockName,getBlockRootClientId:()=>getBlockRootClientId,getBlockSelectionEnd:()=>getBlockSelectionEnd,getBlockSelectionStart:()=>getBlockSelectionStart,getBlockTransformItems:()=>getBlockTransformItems,getBlocks:()=>getBlocks,getBlocksByClientId:()=>getBlocksByClientId,getBlocksByName:()=>getBlocksByName,getClientIdsOfDescendants:()=>getClientIdsOfDescendants,getClientIdsWithDescendants:()=>getClientIdsWithDescendants,getDirectInsertBlock:()=>getDirectInsertBlock,getDraggedBlockClientIds:()=>getDraggedBlockClientIds,getFirstMultiSelectedBlockClientId:()=>getFirstMultiSelectedBlockClientId,getGlobalBlockCount:()=>getGlobalBlockCount,getHoveredBlockClientId:()=>getHoveredBlockClientId,getInserterItems:()=>getInserterItems,getLastMultiSelectedBlockClientId:()=>getLastMultiSelectedBlockClientId,getLowestCommonAncestorWithSelectedBlock:()=>getLowestCommonAncestorWithSelectedBlock,getMultiSelectedBlockClientIds:()=>getMultiSelectedBlockClientIds,getMultiSelectedBlocks:()=>getMultiSelectedBlocks,getMultiSelectedBlocksEndClientId:()=>getMultiSelectedBlocksEndClientId,getMultiSelectedBlocksStartClientId:()=>getMultiSelectedBlocksStartClientId,getNextBlockClientId:()=>getNextBlockClientId,getPatternsByBlockTypes:()=>getPatternsByBlockTypes,getPreviousBlockClientId:()=>getPreviousBlockClientId,getSelectedBlock:()=>getSelectedBlock,getSelectedBlockClientId:()=>getSelectedBlockClientId,getSelectedBlockClientIds:()=>getSelectedBlockClientIds,getSelectedBlockCount:()=>getSelectedBlockCount,getSelectedBlocksInitialCaretPosition:()=>getSelectedBlocksInitialCaretPosition,getSelectionEnd:()=>getSelectionEnd,getSelectionStart:()=>getSelectionStart,getSettings:()=>getSettings,getTemplate:()=>getTemplate,getTemplateLock:()=>getTemplateLock,hasBlockMovingClientId:()=>hasBlockMovingClientId,hasDraggedInnerBlock:()=>hasDraggedInnerBlock,hasInserterItems:()=>hasInserterItems,hasMultiSelection:()=>hasMultiSelection,hasSelectedBlock:()=>hasSelectedBlock,hasSelectedInnerBlock:()=>hasSelectedInnerBlock,isAncestorBeingDragged:()=>isAncestorBeingDragged,isAncestorMultiSelected:()=>isAncestorMultiSelected,isBlockBeingDragged:()=>isBlockBeingDragged,isBlockHighlighted:()=>isBlockHighlighted,isBlockInsertionPointVisible:()=>isBlockInsertionPointVisible,isBlockMultiSelected:()=>isBlockMultiSelected,isBlockSelected:()=>isBlockSelected,isBlockValid:()=>isBlockValid,isBlockVisible:()=>isBlockVisible,isBlockWithinSelection:()=>isBlockWithinSelection,isCaretWithinFormattedText:()=>isCaretWithinFormattedText,isDraggingBlocks:()=>isDraggingBlocks,isFirstMultiSelectedBlock:()=>isFirstMultiSelectedBlock,isGroupable:()=>isGroupable,isLastBlockChangePersistent:()=>isLastBlockChangePersistent,isMultiSelecting:()=>selectors_isMultiSelecting,isNavigationMode:()=>isNavigationMode,isSelectionEnabled:()=>selectors_isSelectionEnabled,isTyping:()=>selectors_isTyping,isUngroupable:()=>isUngroupable,isValidTemplate:()=>isValidTemplate,wasBlockJustInserted:()=>wasBlockJustInserted});var private_actions_namespaceObject={};__webpack_require__.r(private_actions_namespaceObject),__webpack_require__.d(private_actions_namespaceObject,{__experimentalUpdateSettings:()=>__experimentalUpdateSettings,clearBlockRemovalPrompt:()=>clearBlockRemovalPrompt,deleteStyleOverride:()=>deleteStyleOverride,ensureDefaultBlock:()=>ensureDefaultBlock,expandBlock:()=>expandBlock,hideBlockInterface:()=>hideBlockInterface,modifyContentLockBlock:()=>modifyContentLockBlock,privateRemoveBlocks:()=>privateRemoveBlocks,resetZoomLevel:()=>resetZoomLevel,setBlockRemovalRules:()=>setBlockRemovalRules,setInsertionPoint:()=>setInsertionPoint,setLastFocus:()=>setLastFocus,setOpenedBlockSettingsMenu:()=>setOpenedBlockSettingsMenu,setStyleOverride:()=>setStyleOverride,setZoomLevel:()=>setZoomLevel,showBlockInterface:()=>showBlockInterface,startDragging:()=>startDragging,stopDragging:()=>stopDragging,stopEditingAsBlocks:()=>stopEditingAsBlocks});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{__unstableDeleteSelection:()=>__unstableDeleteSelection,__unstableExpandSelection:()=>__unstableExpandSelection,__unstableMarkAutomaticChange:()=>__unstableMarkAutomaticChange,__unstableMarkLastChangeAsPersistent:()=>__unstableMarkLastChangeAsPersistent,__unstableMarkNextChangeAsNotPersistent:()=>__unstableMarkNextChangeAsNotPersistent,__unstableSaveReusableBlock:()=>__unstableSaveReusableBlock,__unstableSetEditorMode:()=>__unstableSetEditorMode,__unstableSetTemporarilyEditingAsBlocks:()=>__unstableSetTemporarilyEditingAsBlocks,__unstableSplitSelection:()=>__unstableSplitSelection,clearSelectedBlock:()=>clearSelectedBlock,duplicateBlocks:()=>duplicateBlocks,enterFormattedText:()=>enterFormattedText,exitFormattedText:()=>exitFormattedText,flashBlock:()=>flashBlock,hideInsertionPoint:()=>hideInsertionPoint,hoverBlock:()=>hoverBlock,insertAfterBlock:()=>insertAfterBlock,insertBeforeBlock:()=>insertBeforeBlock,insertBlock:()=>insertBlock,insertBlocks:()=>insertBlocks,insertDefaultBlock:()=>insertDefaultBlock,mergeBlocks:()=>mergeBlocks,moveBlockToPosition:()=>moveBlockToPosition,moveBlocksDown:()=>moveBlocksDown,moveBlocksToPosition:()=>moveBlocksToPosition,moveBlocksUp:()=>moveBlocksUp,multiSelect:()=>multiSelect,receiveBlocks:()=>receiveBlocks,registerInserterMediaCategory:()=>registerInserterMediaCategory,removeBlock:()=>removeBlock,removeBlocks:()=>removeBlocks,replaceBlock:()=>replaceBlock,replaceBlocks:()=>replaceBlocks,replaceInnerBlocks:()=>replaceInnerBlocks,resetBlocks:()=>resetBlocks,resetSelection:()=>resetSelection,selectBlock:()=>selectBlock,selectNextBlock:()=>selectNextBlock,selectPreviousBlock:()=>selectPreviousBlock,selectionChange:()=>selectionChange,setBlockEditingMode:()=>setBlockEditingMode,setBlockMovingClientId:()=>setBlockMovingClientId,setBlockVisibility:()=>setBlockVisibility,setHasControlledInnerBlocks:()=>setHasControlledInnerBlocks,setNavigationMode:()=>setNavigationMode,setTemplateValidity:()=>setTemplateValidity,showInsertionPoint:()=>showInsertionPoint,startDraggingBlocks:()=>startDraggingBlocks,startMultiSelect:()=>startMultiSelect,startTyping:()=>startTyping,stopDraggingBlocks:()=>stopDraggingBlocks,stopMultiSelect:()=>stopMultiSelect,stopTyping:()=>stopTyping,synchronizeTemplate:()=>synchronizeTemplate,toggleBlockHighlight:()=>toggleBlockHighlight,toggleBlockMode:()=>toggleBlockMode,toggleSelection:()=>toggleSelection,unsetBlockEditingMode:()=>unsetBlockEditingMode,updateBlock:()=>updateBlock,updateBlockAttributes:()=>updateBlockAttributes,updateBlockListSettings:()=>updateBlockListSettings,updateSettings:()=>updateSettings,validateBlocksToTemplate:()=>validateBlocksToTemplate});var global_styles_namespaceObject={};__webpack_require__.r(global_styles_namespaceObject),__webpack_require__.d(global_styles_namespaceObject,{AdvancedPanel:()=>AdvancedPanel,BackgroundPanel:()=>background_panel_BackgroundImagePanel,BorderPanel:()=>BorderPanel,ColorPanel:()=>ColorPanel,DimensionsPanel:()=>DimensionsPanel,FiltersPanel:()=>FiltersPanel,GlobalStylesContext:()=>GlobalStylesContext,ImageSettingsPanel:()=>ImageSettingsPanel,TypographyPanel:()=>TypographyPanel,areGlobalStyleConfigsEqual:()=>areGlobalStyleConfigsEqual,getBlockCSSSelector:()=>getBlockCSSSelector,getBlockSelectors:()=>getBlockSelectors,getGlobalStylesChanges:()=>getGlobalStylesChanges,getLayoutStyles:()=>getLayoutStyles,toStyles:()=>toStyles,useGlobalSetting:()=>useGlobalSetting,useGlobalStyle:()=>useGlobalStyle,useGlobalStylesOutput:()=>useGlobalStylesOutput,useGlobalStylesOutputWithConfig:()=>useGlobalStylesOutputWithConfig,useGlobalStylesReset:()=>useGlobalStylesReset,useHasBackgroundPanel:()=>useHasBackgroundPanel,useHasBorderPanel:()=>useHasBorderPanel,useHasBorderPanelControls:()=>useHasBorderPanelControls,useHasColorPanel:()=>useHasColorPanel,useHasDimensionsPanel:()=>useHasDimensionsPanel,useHasFiltersPanel:()=>useHasFiltersPanel,useHasImageSettingsPanel:()=>useHasImageSettingsPanel,useHasTypographyPanel:()=>useHasTypographyPanel,useSettingsForBlockElement:()=>useSettingsForBlockElement});var build_module=__webpack_require__("./packages/blocks/build-module/index.js"),react=__webpack_require__("./node_modules/react/index.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),create_higher_order_component=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),hooks_build_module=__webpack_require__("./packages/hooks/build-module/index.js");const mayDisplayControlsKey=Symbol("mayDisplayControls"),mayDisplayParentControlsKey=Symbol("mayDisplayParentControls"),blockEditingModeKey=Symbol("blockEditingMode"),blockBindingsKey=Symbol("blockBindings"),isPreviewModeKey=Symbol("isPreviewMode"),DEFAULT_BLOCK_EDIT_CONTEXT={name:"",isSelected:!1},Context=(0,react.createContext)(DEFAULT_BLOCK_EDIT_CONTEXT),{Provider}=Context;function useBlockEditContext(){return(0,react.useContext)(Context)}var use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),data_build_module=__webpack_require__("./packages/data/build-module/index.js"),es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6),pipe=__webpack_require__("./packages/compose/build-module/higher-order/pipe.js"),build_module_select=__webpack_require__("./packages/data/build-module/select.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js");const PREFERENCES_DEFAULTS={insertUsage:{}},SETTINGS_DEFAULTS={alignWide:!1,supportsLayout:!0,colors:[{name:(0,i18n_build_module.__)("Black"),slug:"black",color:"#000000"},{name:(0,i18n_build_module.__)("Cyan bluish gray"),slug:"cyan-bluish-gray",color:"#abb8c3"},{name:(0,i18n_build_module.__)("White"),slug:"white",color:"#ffffff"},{name:(0,i18n_build_module.__)("Pale pink"),slug:"pale-pink",color:"#f78da7"},{name:(0,i18n_build_module.__)("Vivid red"),slug:"vivid-red",color:"#cf2e2e"},{name:(0,i18n_build_module.__)("Luminous vivid orange"),slug:"luminous-vivid-orange",color:"#ff6900"},{name:(0,i18n_build_module.__)("Luminous vivid amber"),slug:"luminous-vivid-amber",color:"#fcb900"},{name:(0,i18n_build_module.__)("Light green cyan"),slug:"light-green-cyan",color:"#7bdcb5"},{name:(0,i18n_build_module.__)("Vivid green cyan"),slug:"vivid-green-cyan",color:"#00d084"},{name:(0,i18n_build_module.__)("Pale cyan blue"),slug:"pale-cyan-blue",color:"#8ed1fc"},{name:(0,i18n_build_module.__)("Vivid cyan blue"),slug:"vivid-cyan-blue",color:"#0693e3"},{name:(0,i18n_build_module.__)("Vivid purple"),slug:"vivid-purple",color:"#9b51e0"}],fontSizes:[{name:(0,i18n_build_module._x)("Small","font size name"),size:13,slug:"small"},{name:(0,i18n_build_module._x)("Normal","font size name"),size:16,slug:"normal"},{name:(0,i18n_build_module._x)("Medium","font size name"),size:20,slug:"medium"},{name:(0,i18n_build_module._x)("Large","font size name"),size:36,slug:"large"},{name:(0,i18n_build_module._x)("Huge","font size name"),size:42,slug:"huge"}],imageDefaultSize:"large",imageSizes:[{slug:"thumbnail",name:(0,i18n_build_module.__)("Thumbnail")},{slug:"medium",name:(0,i18n_build_module.__)("Medium")},{slug:"large",name:(0,i18n_build_module.__)("Large")},{slug:"full",name:(0,i18n_build_module.__)("Full Size")}],imageEditing:!0,maxWidth:580,allowedBlockTypes:!0,maxUploadFileSize:0,allowedMimeTypes:null,canLockBlocks:!0,enableOpenverseMediaCategory:!0,clearBlockSelection:!0,__experimentalCanUserUseUnfilteredHTML:!1,__experimentalBlockDirectory:!1,__mobileEnablePageTemplates:!1,__experimentalBlockPatterns:[],__experimentalBlockPatternCategories:[],isPreviewMode:!1,blockInspectorAnimation:{animationParent:"core/navigation","core/navigation":{enterDirection:"leftToRight"},"core/navigation-submenu":{enterDirection:"rightToLeft"},"core/navigation-link":{enterDirection:"rightToLeft"},"core/search":{enterDirection:"rightToLeft"},"core/social-links":{enterDirection:"rightToLeft"},"core/page-list":{enterDirection:"rightToLeft"},"core/spacer":{enterDirection:"rightToLeft"},"core/home-link":{enterDirection:"rightToLeft"},"core/site-title":{enterDirection:"rightToLeft"},"core/site-logo":{enterDirection:"rightToLeft"}},generateAnchors:!1,gradients:[{name:(0,i18n_build_module.__)("Vivid cyan blue to vivid purple"),gradient:"linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)",slug:"vivid-cyan-blue-to-vivid-purple"},{name:(0,i18n_build_module.__)("Light green cyan to vivid green cyan"),gradient:"linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)",slug:"light-green-cyan-to-vivid-green-cyan"},{name:(0,i18n_build_module.__)("Luminous vivid amber to luminous vivid orange"),gradient:"linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)",slug:"luminous-vivid-amber-to-luminous-vivid-orange"},{name:(0,i18n_build_module.__)("Luminous vivid orange to vivid red"),gradient:"linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%)",slug:"luminous-vivid-orange-to-vivid-red"},{name:(0,i18n_build_module.__)("Very light gray to cyan bluish gray"),gradient:"linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%)",slug:"very-light-gray-to-cyan-bluish-gray"},{name:(0,i18n_build_module.__)("Cool to warm spectrum"),gradient:"linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%)",slug:"cool-to-warm-spectrum"},{name:(0,i18n_build_module.__)("Blush light purple"),gradient:"linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%)",slug:"blush-light-purple"},{name:(0,i18n_build_module.__)("Blush bordeaux"),gradient:"linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%)",slug:"blush-bordeaux"},{name:(0,i18n_build_module.__)("Luminous dusk"),gradient:"linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%)",slug:"luminous-dusk"},{name:(0,i18n_build_module.__)("Pale ocean"),gradient:"linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%)",slug:"pale-ocean"},{name:(0,i18n_build_module.__)("Electric grass"),gradient:"linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%)",slug:"electric-grass"},{name:(0,i18n_build_module.__)("Midnight"),gradient:"linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%)",slug:"midnight"}],__unstableResolvedAssets:{styles:[],scripts:[]}};function insertAt(array,elements,index){return[...array.slice(0,index),...Array.isArray(elements)?elements:[elements],...array.slice(index)]}function moveTo(array,from,to,count=1){const withoutMovedElements=[...array];return withoutMovedElements.splice(from,count),insertAt(withoutMovedElements,array.slice(from,from+count),to)}const identity=x=>x;function mapBlockOrder(blocks,rootClientId=""){const result=new Map,current=[];return result.set(rootClientId,current),blocks.forEach((block=>{const{clientId,innerBlocks}=block;current.push(clientId),mapBlockOrder(innerBlocks,clientId).forEach(((order,subClientId)=>{result.set(subClientId,order)}))})),result}function mapBlockParents(blocks,rootClientId=""){const result=[],stack=[[rootClientId,blocks]];for(;stack.length;){const[parent,currentBlocks]=stack.shift();currentBlocks.forEach((({innerBlocks,...block})=>{result.push([block.clientId,parent]),innerBlocks?.length&&stack.push([block.clientId,innerBlocks])}))}return result}function flattenBlocks(blocks,transform=identity){const result=[],stack=[...blocks];for(;stack.length;){const{innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),result.push([block.clientId,transform(block)])}return result}function getFlattenedBlocksWithoutAttributes(blocks){return flattenBlocks(blocks,(block=>{const{attributes,...restBlock}=block;return restBlock}))}function getFlattenedBlockAttributes(blocks){return flattenBlocks(blocks,(block=>block.attributes))}function isUpdatingSameBlockAttribute(action,lastAction){return"UPDATE_BLOCK_ATTRIBUTES"===action.type&&void 0!==lastAction&&"UPDATE_BLOCK_ATTRIBUTES"===lastAction.type&&es6_default()(action.clientIds,lastAction.clientIds)&&function hasSameKeys(a,b){return es6_default()(Object.keys(a),Object.keys(b))}(action.attributes,lastAction.attributes)}function updateBlockTreeForBlocks(state,blocks){const treeToUpdate=state.tree,stack=[...blocks],flattenedBlocks=[...blocks];for(;stack.length;){const block=stack.shift();stack.push(...block.innerBlocks),flattenedBlocks.push(...block.innerBlocks)}for(const block of flattenedBlocks)treeToUpdate.set(block.clientId,{});for(const block of flattenedBlocks)treeToUpdate.set(block.clientId,Object.assign(treeToUpdate.get(block.clientId),{...state.byClientId.get(block.clientId),attributes:state.attributes.get(block.clientId),innerBlocks:block.innerBlocks.map((subBlock=>treeToUpdate.get(subBlock.clientId)))}))}function updateParentInnerBlocksInTree(state,updatedClientIds,updateChildrenOfUpdatedClientIds=!1){const treeToUpdate=state.tree,uncontrolledParents=new Set([]),controlledParents=new Set;for(const clientId of updatedClientIds){let current=updateChildrenOfUpdatedClientIds?clientId:state.parents.get(clientId);do{if(state.controlledInnerBlocks[current]){controlledParents.add(current);break}uncontrolledParents.add(current),current=state.parents.get(current)}while(void 0!==current)}for(const clientId of uncontrolledParents)treeToUpdate.set(clientId,{...treeToUpdate.get(clientId)});for(const clientId of uncontrolledParents)treeToUpdate.get(clientId).innerBlocks=(state.order.get(clientId)||[]).map((subClientId=>treeToUpdate.get(subClientId)));for(const clientId of controlledParents)treeToUpdate.set("controlled||"+clientId,{innerBlocks:(state.order.get(clientId)||[]).map((subClientId=>treeToUpdate.get(subClientId)))})}const blocks=(0,pipe.h)(data_build_module.HY,(reducer=>(state,action)=>{if(state&&"SAVE_REUSABLE_BLOCK_SUCCESS"===action.type){const{id,updatedId}=action;if(id===updatedId)return state;(state={...state}).attributes=new Map(state.attributes),state.attributes.forEach(((attributes,clientId)=>{const{name}=state.byClientId.get(clientId);"core/block"===name&&attributes.ref===id&&state.attributes.set(clientId,{...attributes,ref:updatedId})}))}return reducer(state,action)}),(reducer=>(state={},action)=>{const newState=reducer(state,action);if(newState===state)return state;switch(newState.tree=state.tree?state.tree:new Map,action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":newState.tree=new Map(newState.tree),updateBlockTreeForBlocks(newState,action.blocks),updateParentInnerBlocksInTree(newState,action.rootClientId?[action.rootClientId]:[""],!0);break;case"UPDATE_BLOCK":newState.tree=new Map(newState.tree),newState.tree.set(action.clientId,{...newState.tree.get(action.clientId),...newState.byClientId.get(action.clientId),attributes:newState.attributes.get(action.clientId)}),updateParentInnerBlocksInTree(newState,[action.clientId],!1);break;case"SYNC_DERIVED_BLOCK_ATTRIBUTES":case"UPDATE_BLOCK_ATTRIBUTES":newState.tree=new Map(newState.tree),action.clientIds.forEach((clientId=>{newState.tree.set(clientId,{...newState.tree.get(clientId),attributes:newState.attributes.get(clientId)})})),updateParentInnerBlocksInTree(newState,action.clientIds,!1);break;case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const inserterClientIds=function getFlattenedClientIds(blocks){const result={},stack=[...blocks];for(;stack.length;){const{innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),result[block.clientId]=!0}return result}(action.blocks);newState.tree=new Map(newState.tree),action.replacedClientIds.forEach((clientId=>{newState.tree.delete(clientId),inserterClientIds[clientId]||newState.tree.delete("controlled||"+clientId)})),updateBlockTreeForBlocks(newState,action.blocks),updateParentInnerBlocksInTree(newState,action.blocks.map((b=>b.clientId)),!1);const parentsOfRemovedBlocks=[];for(const clientId of action.clientIds){const parentId=state.parents.get(clientId);void 0===parentId||""!==parentId&&!newState.byClientId.get(parentId)||parentsOfRemovedBlocks.push(parentId)}updateParentInnerBlocksInTree(newState,parentsOfRemovedBlocks,!0);break}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":const parentsOfRemovedBlocks=[];for(const clientId of action.clientIds){const parentId=state.parents.get(clientId);void 0===parentId||""!==parentId&&!newState.byClientId.get(parentId)||parentsOfRemovedBlocks.push(parentId)}newState.tree=new Map(newState.tree),action.removedClientIds.forEach((clientId=>{newState.tree.delete(clientId),newState.tree.delete("controlled||"+clientId)})),updateParentInnerBlocksInTree(newState,parentsOfRemovedBlocks,!0);break;case"MOVE_BLOCKS_TO_POSITION":{const updatedBlockUids=[];action.fromRootClientId?updatedBlockUids.push(action.fromRootClientId):updatedBlockUids.push(""),action.toRootClientId&&updatedBlockUids.push(action.toRootClientId),newState.tree=new Map(newState.tree),updateParentInnerBlocksInTree(newState,updatedBlockUids,!0);break}case"MOVE_BLOCKS_UP":case"MOVE_BLOCKS_DOWN":{const updatedBlockUids=[action.rootClientId?action.rootClientId:""];newState.tree=new Map(newState.tree),updateParentInnerBlocksInTree(newState,updatedBlockUids,!0);break}case"SAVE_REUSABLE_BLOCK_SUCCESS":{const updatedBlockUids=[];newState.attributes.forEach(((attributes,clientId)=>{"core/block"===newState.byClientId.get(clientId).name&&attributes.ref===action.updatedId&&updatedBlockUids.push(clientId)})),newState.tree=new Map(newState.tree),updatedBlockUids.forEach((clientId=>{newState.tree.set(clientId,{...newState.byClientId.get(clientId),attributes:newState.attributes.get(clientId),innerBlocks:newState.tree.get(clientId).innerBlocks})})),updateParentInnerBlocksInTree(newState,updatedBlockUids,!1)}}return newState}),(reducer=>(state,action)=>{const getAllChildren=clientIds=>{let result=clientIds;for(let i=0;i<result.length;i++)!state.order.get(result[i])||action.keepControlledInnerBlocks&&action.keepControlledInnerBlocks[result[i]]||(result===clientIds&&(result=[...result]),result.push(...state.order.get(result[i])));return result};if(state)switch(action.type){case"REMOVE_BLOCKS":action={...action,type:"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN",removedClientIds:getAllChildren(action.clientIds)};break;case"REPLACE_BLOCKS":action={...action,type:"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN",replacedClientIds:getAllChildren(action.clientIds)}}return reducer(state,action)}),(reducer=>(state,action)=>{if("REPLACE_INNER_BLOCKS"!==action.type)return reducer(state,action);const nestedControllers={};if(Object.keys(state.controlledInnerBlocks).length){const stack=[...action.blocks];for(;stack.length;){const{innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),state.controlledInnerBlocks[block.clientId]&&(nestedControllers[block.clientId]=!0)}}let stateAfterBlocksRemoval=state;state.order.get(action.rootClientId)&&(stateAfterBlocksRemoval=reducer(stateAfterBlocksRemoval,{type:"REMOVE_BLOCKS",keepControlledInnerBlocks:nestedControllers,clientIds:state.order.get(action.rootClientId)}));let stateAfterInsert=stateAfterBlocksRemoval;if(action.blocks.length){stateAfterInsert=reducer(stateAfterInsert,{...action,type:"INSERT_BLOCKS",index:0});const stateAfterInsertOrder=new Map(stateAfterInsert.order);Object.keys(nestedControllers).forEach((key=>{state.order.get(key)&&stateAfterInsertOrder.set(key,state.order.get(key))})),stateAfterInsert.order=stateAfterInsertOrder,stateAfterInsert.tree=new Map(stateAfterInsert.tree),Object.keys(nestedControllers).forEach((_key=>{const key=`controlled||${_key}`;state.tree.has(key)&&stateAfterInsert.tree.set(key,state.tree.get(key))}))}return stateAfterInsert}),(reducer=>(state,action)=>{if("RESET_BLOCKS"===action.type){const newState={...state,byClientId:new Map(getFlattenedBlocksWithoutAttributes(action.blocks)),attributes:new Map(getFlattenedBlockAttributes(action.blocks)),order:mapBlockOrder(action.blocks),parents:new Map(mapBlockParents(action.blocks)),controlledInnerBlocks:{}};return newState.tree=new Map(state?.tree),updateBlockTreeForBlocks(newState,action.blocks),newState.tree.set("",{innerBlocks:action.blocks.map((subBlock=>newState.tree.get(subBlock.clientId)))}),newState}return reducer(state,action)}),(function withPersistentBlockChange(reducer){let lastAction,explicitPersistent,markNextChangeAsNotPersistent=!1;return(state,action)=>{let nextIsPersistentChange,nextState=reducer(state,action);var _state$isPersistentCh;"SET_EXPLICIT_PERSISTENT"===action.type&&(explicitPersistent=action.isPersistentChange,nextIsPersistentChange=null===(_state$isPersistentCh=state.isPersistentChange)||void 0===_state$isPersistentCh||_state$isPersistentCh);if(void 0!==explicitPersistent)return nextIsPersistentChange=explicitPersistent,nextIsPersistentChange===nextState.isPersistentChange?nextState:{...nextState,isPersistentChange:nextIsPersistentChange};const isExplicitPersistentChange="MARK_LAST_CHANGE_AS_PERSISTENT"===action.type||markNextChangeAsNotPersistent;var _state$isPersistentCh2;return state!==nextState||isExplicitPersistentChange?(nextState={...nextState,isPersistentChange:isExplicitPersistentChange?!markNextChangeAsNotPersistent:!isUpdatingSameBlockAttribute(action,lastAction)},lastAction=action,markNextChangeAsNotPersistent="MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"===action.type,nextState):(markNextChangeAsNotPersistent="MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"===action.type,nextIsPersistentChange=null===(_state$isPersistentCh2=state?.isPersistentChange)||void 0===_state$isPersistentCh2||_state$isPersistentCh2,state.isPersistentChange===nextIsPersistentChange?state:{...nextState,isPersistentChange:nextIsPersistentChange})}}),(function withIgnoredBlockChange(reducer){const IGNORED_ACTION_TYPES=new Set(["RECEIVE_BLOCKS"]);return(state,action)=>{const nextState=reducer(state,action);return nextState!==state&&(nextState.isIgnoredChange=IGNORED_ACTION_TYPES.has(action.type)),nextState}}),(reducer=>(state,action)=>{if("SET_HAS_CONTROLLED_INNER_BLOCKS"===action.type){const tempState=reducer(state,{type:"REPLACE_INNER_BLOCKS",rootClientId:action.clientId,blocks:[]});return reducer(tempState,action)}return reducer(state,action)}))({byClientId(state=new Map,action){switch(action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":{const newState=new Map(state);return getFlattenedBlocksWithoutAttributes(action.blocks).forEach((([key,value])=>{newState.set(key,value)})),newState}case"UPDATE_BLOCK":{if(!state.has(action.clientId))return state;const{attributes,...changes}=action.updates;if(0===Object.values(changes).length)return state;const newState=new Map(state);return newState.set(action.clientId,{...state.get(action.clientId),...changes}),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{if(!action.blocks)return state;const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),getFlattenedBlocksWithoutAttributes(action.blocks).forEach((([key,value])=>{newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},attributes(state=new Map,action){switch(action.type){case"RECEIVE_BLOCKS":case"INSERT_BLOCKS":{const newState=new Map(state);return getFlattenedBlockAttributes(action.blocks).forEach((([key,value])=>{newState.set(key,value)})),newState}case"UPDATE_BLOCK":{if(!state.get(action.clientId)||!action.updates.attributes)return state;const newState=new Map(state);return newState.set(action.clientId,{...state.get(action.clientId),...action.updates.attributes}),newState}case"SYNC_DERIVED_BLOCK_ATTRIBUTES":case"UPDATE_BLOCK_ATTRIBUTES":{if(action.clientIds.every((id=>!state.get(id))))return state;let hasChange=!1;const newState=new Map(state);for(const clientId of action.clientIds){var _action$attributes;const updatedAttributeEntries=Object.entries(action.uniqueByBlock?action.attributes[clientId]:null!==(_action$attributes=action.attributes)&&void 0!==_action$attributes?_action$attributes:{});if(0===updatedAttributeEntries.length)continue;let hasUpdatedAttributes=!1;const existingAttributes=state.get(clientId),newAttributes={};updatedAttributeEntries.forEach((([key,value])=>{existingAttributes[key]!==value&&(hasUpdatedAttributes=!0,newAttributes[key]=value)})),hasChange=hasChange||hasUpdatedAttributes,hasUpdatedAttributes&&newState.set(clientId,{...existingAttributes,...newAttributes})}return hasChange?newState:state}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{if(!action.blocks)return state;const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),getFlattenedBlockAttributes(action.blocks).forEach((([key,value])=>{newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},order(state=new Map,action){switch(action.type){case"RECEIVE_BLOCKS":{var _state$get;const blockOrder=mapBlockOrder(action.blocks),newState=new Map(state);return blockOrder.forEach(((order,clientId)=>{""!==clientId&&newState.set(clientId,order)})),newState.set("",(null!==(_state$get=state.get(""))&&void 0!==_state$get?_state$get:[]).concat(blockOrder[""])),newState}case"INSERT_BLOCKS":{const{rootClientId=""}=action,subState=state.get(rootClientId)||[],mappedBlocks=mapBlockOrder(action.blocks,rootClientId),{index=subState.length}=action,newState=new Map(state);return mappedBlocks.forEach(((order,clientId)=>{newState.set(clientId,order)})),newState.set(rootClientId,insertAt(subState,mappedBlocks.get(rootClientId),index)),newState}case"MOVE_BLOCKS_TO_POSITION":{var _state$get$filter;const{fromRootClientId="",toRootClientId="",clientIds}=action,{index=state.get(toRootClientId).length}=action;if(fromRootClientId===toRootClientId){const fromIndex=state.get(toRootClientId).indexOf(clientIds[0]),newState=new Map(state);return newState.set(toRootClientId,moveTo(state.get(toRootClientId),fromIndex,index,clientIds.length)),newState}const newState=new Map(state);return newState.set(fromRootClientId,null!==(_state$get$filter=state.get(fromRootClientId)?.filter((id=>!clientIds.includes(id))))&&void 0!==_state$get$filter?_state$get$filter:[]),newState.set(toRootClientId,insertAt(state.get(toRootClientId),clientIds,index)),newState}case"MOVE_BLOCKS_UP":{const{clientIds,rootClientId=""}=action,firstClientId=clientIds[0],subState=state.get(rootClientId);if(!subState.length||firstClientId===subState[0])return state;const firstIndex=subState.indexOf(firstClientId),newState=new Map(state);return newState.set(rootClientId,moveTo(subState,firstIndex,firstIndex-1,clientIds.length)),newState}case"MOVE_BLOCKS_DOWN":{const{clientIds,rootClientId=""}=action,firstClientId=clientIds[0],lastClientId=clientIds[clientIds.length-1],subState=state.get(rootClientId);if(!subState.length||lastClientId===subState[subState.length-1])return state;const firstIndex=subState.indexOf(firstClientId),newState=new Map(state);return newState.set(rootClientId,moveTo(subState,firstIndex,firstIndex+1,clientIds.length)),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const{clientIds}=action;if(!action.blocks)return state;const mappedBlocks=mapBlockOrder(action.blocks),newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),mappedBlocks.forEach(((order,clientId)=>{""!==clientId&&newState.set(clientId,order)})),newState.forEach(((order,clientId)=>{const newSubOrder=Object.values(order).reduce(((result,subClientId)=>subClientId===clientIds[0]?[...result,...mappedBlocks.get("")]:(-1===clientIds.indexOf(subClientId)&&result.push(subClientId),result)),[]);newState.set(clientId,newSubOrder)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState.forEach(((order,clientId)=>{var _order$filter;const newSubOrder=null!==(_order$filter=order?.filter((id=>!action.removedClientIds.includes(id))))&&void 0!==_order$filter?_order$filter:[];newSubOrder.length!==order.length&&newState.set(clientId,newSubOrder)})),newState}}return state},parents(state=new Map,action){switch(action.type){case"RECEIVE_BLOCKS":{const newState=new Map(state);return mapBlockParents(action.blocks).forEach((([key,value])=>{newState.set(key,value)})),newState}case"INSERT_BLOCKS":{const newState=new Map(state);return mapBlockParents(action.blocks,action.rootClientId||"").forEach((([key,value])=>{newState.set(key,value)})),newState}case"MOVE_BLOCKS_TO_POSITION":{const newState=new Map(state);return action.clientIds.forEach((id=>{newState.set(id,action.toRootClientId||"")})),newState}case"REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.replacedClientIds.forEach((clientId=>{newState.delete(clientId)})),mapBlockParents(action.blocks,state.get(action.clientIds[0])).forEach((([key,value])=>{newState.set(key,value)})),newState}case"REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN":{const newState=new Map(state);return action.removedClientIds.forEach((clientId=>{newState.delete(clientId)})),newState}}return state},controlledInnerBlocks:(state={},{type,clientId,hasControlledInnerBlocks})=>"SET_HAS_CONTROLLED_INNER_BLOCKS"===type?{...state,[clientId]:hasControlledInnerBlocks}:state});function selectionHelper(state={},action){switch(action.type){case"CLEAR_SELECTED_BLOCK":return state.clientId?{}:state;case"SELECT_BLOCK":return action.clientId===state.clientId?state:{clientId:action.clientId};case"REPLACE_INNER_BLOCKS":case"INSERT_BLOCKS":return action.updateSelection&&action.blocks.length?{clientId:action.blocks[0].clientId}:state;case"REMOVE_BLOCKS":return action.clientIds&&action.clientIds.length&&-1!==action.clientIds.indexOf(state.clientId)?{}:state;case"REPLACE_BLOCKS":{if(-1===action.clientIds.indexOf(state.clientId))return state;const blockToSelect=action.blocks[action.indexToSelect]||action.blocks[action.blocks.length-1];return blockToSelect?blockToSelect.clientId===state.clientId?state:{clientId:blockToSelect.clientId}:{}}}return state}const combinedReducers=(0,data_build_module.HY)({blocks,isDragging:function isDragging(state=!1,action){switch(action.type){case"START_DRAGGING":return!0;case"STOP_DRAGGING":return!1}return state},isTyping:function isTyping(state=!1,action){switch(action.type){case"START_TYPING":return!0;case"STOP_TYPING":return!1}return state},isBlockInterfaceHidden:function isBlockInterfaceHidden(state=!1,action){switch(action.type){case"HIDE_BLOCK_INTERFACE":return!0;case"SHOW_BLOCK_INTERFACE":return!1}return state},draggedBlocks:function draggedBlocks(state=[],action){switch(action.type){case"START_DRAGGING_BLOCKS":return action.clientIds;case"STOP_DRAGGING_BLOCKS":return[]}return state},selection:function selection(state={},action){switch(action.type){case"SELECTION_CHANGE":return action.clientId?{selectionStart:{clientId:action.clientId,attributeKey:action.attributeKey,offset:action.startOffset},selectionEnd:{clientId:action.clientId,attributeKey:action.attributeKey,offset:action.endOffset}}:{selectionStart:action.start||state.selectionStart,selectionEnd:action.end||state.selectionEnd};case"RESET_SELECTION":const{selectionStart,selectionEnd}=action;return{selectionStart,selectionEnd};case"MULTI_SELECT":const{start,end}=action;return start===state.selectionStart?.clientId&&end===state.selectionEnd?.clientId?state:{selectionStart:{clientId:start},selectionEnd:{clientId:end}};case"RESET_BLOCKS":const startClientId=state?.selectionStart?.clientId,endClientId=state?.selectionEnd?.clientId;if(!startClientId&&!endClientId)return state;if(!action.blocks.some((block=>block.clientId===startClientId)))return{selectionStart:{},selectionEnd:{}};if(!action.blocks.some((block=>block.clientId===endClientId)))return{...state,selectionEnd:state.selectionStart}}const selectionStart=selectionHelper(state.selectionStart,action),selectionEnd=selectionHelper(state.selectionEnd,action);return selectionStart===state.selectionStart&&selectionEnd===state.selectionEnd?state:{selectionStart,selectionEnd}},isMultiSelecting:function isMultiSelecting(state=!1,action){switch(action.type){case"START_MULTI_SELECT":return!0;case"STOP_MULTI_SELECT":return!1}return state},isSelectionEnabled:function isSelectionEnabled(state=!0,action){return"TOGGLE_SELECTION"===action.type?action.isSelectionEnabled:state},initialPosition:function initialPosition(state=null,action){return"REPLACE_BLOCKS"===action.type&&void 0!==action.initialPosition||["MULTI_SELECT","SELECT_BLOCK","RESET_SELECTION","INSERT_BLOCKS","REPLACE_INNER_BLOCKS"].includes(action.type)?action.initialPosition:state},blocksMode:function blocksMode(state={},action){if("TOGGLE_BLOCK_MODE"===action.type){const{clientId}=action;return{...state,[clientId]:state[clientId]&&"html"===state[clientId]?"visual":"html"}}return state},blockListSettings:(state={},action)=>{switch(action.type){case"REPLACE_BLOCKS":case"REMOVE_BLOCKS":return Object.fromEntries(Object.entries(state).filter((([id])=>!action.clientIds.includes(id))));case"UPDATE_BLOCK_LIST_SETTINGS":{const updates="string"==typeof action.clientId?{[action.clientId]:action.settings}:action.clientId;for(const clientId in updates)updates[clientId]?es6_default()(state[clientId],updates[clientId])&&delete updates[clientId]:state[clientId]||delete updates[clientId];if(0===Object.keys(updates).length)return state;const merged={...state,...updates};for(const clientId in updates)updates[clientId]||delete merged[clientId];return merged}}return state},insertionPoint:function insertionPoint(state=null,action){switch(action.type){case"SET_INSERTION_POINT":return action.value;case"SELECT_BLOCK":return null}return state},insertionCue:function insertionCue(state=null,action){switch(action.type){case"SHOW_INSERTION_POINT":{const{rootClientId,index,__unstableWithInserter,operation,nearestSide}=action,nextState={rootClientId,index,__unstableWithInserter,operation,nearestSide};return es6_default()(state,nextState)?state:nextState}case"HIDE_INSERTION_POINT":return null}return state},template:function template(state={isValid:!0},action){return"SET_TEMPLATE_VALIDITY"===action.type?{...state,isValid:action.isValid}:state},settings:function settings(state=SETTINGS_DEFAULTS,action){if("UPDATE_SETTINGS"===action.type){const updatedSettings=action.reset?{...SETTINGS_DEFAULTS,...action.settings}:{...state,...action.settings};return Object.defineProperty(updatedSettings,"__unstableIsPreviewMode",{get(){return(0,deprecated_build_module.A)("__unstableIsPreviewMode",{since:"6.8",alternative:"isPreviewMode"}),this.isPreviewMode}}),updatedSettings}return state},preferences:function preferences(state=PREFERENCES_DEFAULTS,action){switch(action.type){case"INSERT_BLOCKS":case"REPLACE_BLOCKS":{const nextInsertUsage=action.blocks.reduce(((prevUsage,block)=>{const{attributes,name:blockName}=block;let id=blockName;const match=(0,build_module_select.L)(build_module.M_).getActiveBlockVariation(blockName,attributes);return match?.name&&(id+="/"+match.name),"core/block"===blockName&&(id+="/"+attributes.ref),{...prevUsage,[id]:{time:action.time,count:prevUsage[id]?prevUsage[id].count+1:1}}}),state.insertUsage);return{...state,insertUsage:nextInsertUsage}}}return state},lastBlockAttributesChange:function lastBlockAttributesChange(state=null,action){switch(action.type){case"UPDATE_BLOCK":if(!action.updates.attributes)break;return{[action.clientId]:action.updates.attributes};case"UPDATE_BLOCK_ATTRIBUTES":return action.clientIds.reduce(((accumulator,id)=>({...accumulator,[id]:action.uniqueByBlock?action.attributes[id]:action.attributes})),{})}return state},lastFocus:function lastFocus(state=!1,action){return"LAST_FOCUS"===action.type?action.lastFocus:state},expandedBlock:function expandedBlock(state=null,action){switch(action.type){case"SET_BLOCK_EXPANDED_IN_LIST_VIEW":return action.clientId;case"SELECT_BLOCK":if(action.clientId!==state)return null}return state},highlightedBlock:function highlightedBlock(state,action){switch(action.type){case"TOGGLE_BLOCK_HIGHLIGHT":const{clientId,isHighlighted}=action;return isHighlighted?clientId:state===clientId?null:state;case"SELECT_BLOCK":if(action.clientId!==state)return null}return state},lastBlockInserted:function lastBlockInserted(state={},action){switch(action.type){case"INSERT_BLOCKS":case"REPLACE_BLOCKS":if(!action.blocks.length)return state;const clientIds=action.blocks.map((block=>block.clientId)),source=action.meta?.source;return{clientIds,source};case"RESET_BLOCKS":return{}}return state},temporarilyEditingAsBlocks:function temporarilyEditingAsBlocks(state="",action){return"SET_TEMPORARILY_EDITING_AS_BLOCKS"===action.type?action.temporarilyEditingAsBlocks:state},temporarilyEditingFocusModeRevert:function temporarilyEditingFocusModeRevert(state="",action){return"SET_TEMPORARILY_EDITING_AS_BLOCKS"===action.type?action.focusModeToRevert:state},blockVisibility:function blockVisibility(state={},action){return"SET_BLOCK_VISIBILITY"===action.type?{...state,...action.updates}:state},blockEditingModes:function blockEditingModes(state=new Map,action){switch(action.type){case"SET_BLOCK_EDITING_MODE":return new Map(state).set(action.clientId,action.mode);case"UNSET_BLOCK_EDITING_MODE":{const newState=new Map(state);return newState.delete(action.clientId),newState}case"RESET_BLOCKS":return state.has("")?(new Map).set("",state.get("")):state}return state},styleOverrides:function styleOverrides(state=new Map,action){switch(action.type){case"SET_STYLE_OVERRIDE":return new Map(state).set(action.id,action.style);case"DELETE_STYLE_OVERRIDE":{const newState=new Map(state);return newState.delete(action.id),newState}}return state},removalPromptData:function removalPromptData(state=!1,action){switch(action.type){case"DISPLAY_BLOCK_REMOVAL_PROMPT":const{clientIds,selectPrevious,message}=action;return{clientIds,selectPrevious,message};case"CLEAR_BLOCK_REMOVAL_PROMPT":return!1}return state},blockRemovalRules:function blockRemovalRules(state=!1,action){return"SET_BLOCK_REMOVAL_RULES"===action.type?action.rules:state},openedBlockSettingsMenu:function openedBlockSettingsMenu(state=null,action){var _action$clientId;return"SET_OPENED_BLOCK_SETTINGS_MENU"===action.type?null!==(_action$clientId=action?.clientId)&&void 0!==_action$clientId?_action$clientId:null:state},registeredInserterMediaCategories:function registeredInserterMediaCategories(state=[],action){return"REGISTER_INSERTER_MEDIA_CATEGORY"===action.type?[...state,action.category]:state},hoveredBlockClientId:function hoveredBlockClientId(state=!1,action){return"HOVER_BLOCK"===action.type?action.clientId:state},zoomLevel:function zoomLevel(state=100,action){switch(action.type){case"SET_ZOOM_LEVEL":return action.zoom;case"RESET_ZOOM_LEVEL":return 100}return state}});const reducer=function withAutomaticChangeReset(reducer){return(state,action)=>{const nextState=reducer(state,action);return state?(nextState.automaticChangeStatus=state.automaticChangeStatus,"MARK_AUTOMATIC_CHANGE"===action.type?{...nextState,automaticChangeStatus:"pending"}:"MARK_AUTOMATIC_CHANGE_FINAL"===action.type&&"pending"===state.automaticChangeStatus?{...nextState,automaticChangeStatus:"final"}:nextState.blocks===state.blocks&&nextState.selection===state.selection||"final"!==nextState.automaticChangeStatus&&nextState.selection!==state.selection?nextState:{...nextState,automaticChangeStatus:void 0}):nextState}}(combinedReducers);var platform=__webpack_require__("./packages/element/build-module/platform.js"),symbol=__webpack_require__("./packages/icons/build-module/library/symbol.js"),rich_text_build_module=__webpack_require__("./packages/rich-text/build-module/index.js"),rememo=__webpack_require__("./node_modules/rememo/rememo.js"),factory=__webpack_require__("./packages/data/build-module/factory.js"),store=__webpack_require__("./packages/preferences/build-module/store/index.js"),block_serialization_default_parser_build_module=__webpack_require__("./packages/block-serialization-default-parser/build-module/index.js");const globalStylesDataKey=Symbol("globalStylesDataKey"),globalStylesLinksDataKey=Symbol("globalStylesLinks"),selectBlockPatternsKey=Symbol("selectBlockPatternsKey"),reusableBlocksSelectKey=Symbol("reusableBlocksSelect"),sectionRootClientIdKey=Symbol("sectionRootClientIdKey");var implementation=__webpack_require__("./packages/private-apis/build-module/implementation.js");const{lock,unlock}=(0,implementation.yf)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/block-editor"),STORE_NAME="core/block-editor",INSERTER_PATTERN_TYPES={user:"user",theme:"theme",directory:"directory"},INSERTER_SYNC_TYPES={full:"fully",unsynced:"unsynced"},allPatternsCategory={name:"allPatterns",label:(0,i18n_build_module._x)("All","patterns")},myPatternsCategory={name:"myPatterns",label:(0,i18n_build_module.__)("My patterns")};function isPatternFiltered(pattern,sourceFilter,syncFilter){const isUserPattern=pattern.name.startsWith("core/block"),isDirectoryPattern="core"===pattern.source||pattern.source?.startsWith("pattern-directory");return!(sourceFilter!==INSERTER_PATTERN_TYPES.theme||!isUserPattern&&!isDirectoryPattern)||(!(sourceFilter!==INSERTER_PATTERN_TYPES.directory||!isUserPattern&&isDirectoryPattern)||(sourceFilter===INSERTER_PATTERN_TYPES.user&&pattern.type!==INSERTER_PATTERN_TYPES.user||(syncFilter===INSERTER_SYNC_TYPES.full&&""!==pattern.syncStatus||!(syncFilter!==INSERTER_SYNC_TYPES.unsynced||"unsynced"===pattern.syncStatus||!isUserPattern))))}function setImmutably(object,path,value){path=Array.isArray(path)?[...path]:[path],object=Array.isArray(object)?[...object]:{...object};const leaf=path.pop();let prev=object;for(const key of path){const lvl=prev[key];prev=prev[key]=Array.isArray(lvl)?[...lvl]:{...lvl}}return prev[leaf]=value,object}const getValueFromObjectPath=(object,path,defaultValue)=>{var _value;const arrayPath=Array.isArray(path)?path:path.split(".");let value=object;return arrayPath.forEach((fieldName=>{value=value?.[fieldName]})),null!==(_value=value)&&void 0!==_value?_value:defaultValue};const blockedPaths=["color","border","dimensions","typography","spacing"],deprecatedFlags={"color.palette":settings=>settings.colors,"color.gradients":settings=>settings.gradients,"color.custom":settings=>void 0===settings.disableCustomColors?void 0:!settings.disableCustomColors,"color.customGradient":settings=>void 0===settings.disableCustomGradients?void 0:!settings.disableCustomGradients,"typography.fontSizes":settings=>settings.fontSizes,"typography.customFontSize":settings=>void 0===settings.disableCustomFontSizes?void 0:!settings.disableCustomFontSizes,"typography.lineHeight":settings=>settings.enableCustomLineHeight,"spacing.units":settings=>{if(void 0!==settings.enableCustomUnits)return!0===settings.enableCustomUnits?["px","em","rem","vh","vw","%"]:settings.enableCustomUnits},"spacing.padding":settings=>settings.enableCustomSpacing},prefixedFlags={"border.customColor":"border.color","border.customStyle":"border.style","border.customWidth":"border.width","typography.customFontStyle":"typography.fontStyle","typography.customFontWeight":"typography.fontWeight","typography.customLetterSpacing":"typography.letterSpacing","typography.customTextDecorations":"typography.textDecoration","typography.customTextTransforms":"typography.textTransform","border.customRadius":"border.radius","spacing.customMargin":"spacing.margin","spacing.customPadding":"spacing.padding","typography.customLineHeight":"typography.lineHeight"},removeCustomPrefixes=path=>prefixedFlags[path]||path;function getBlockSettings(state,clientId,...paths){const blockName=getBlockName(state,clientId),candidates=[];if(clientId){let id=clientId;do{const name=getBlockName(state,id);(0,build_module.pN)(name,"__experimentalSettings",!1)&&candidates.push(id)}while(id=state.blocks.parents.get(id))}return paths.map((path=>{if(blockedPaths.includes(path))return void console.warn("Top level useSetting paths are disabled. Please use a subpath to query the information needed.");let result=(0,hooks_build_module.W5)("blockEditor.useSetting.before",void 0,path,clientId,blockName);if(void 0!==result)return result;const normalizedPath=removeCustomPrefixes(path);for(const candidateClientId of candidates){var _getValueFromObjectPa;const candidateAtts=getBlockAttributes(state,candidateClientId);if(result=null!==(_getValueFromObjectPa=getValueFromObjectPath(candidateAtts.settings?.blocks?.[blockName],normalizedPath))&&void 0!==_getValueFromObjectPa?_getValueFromObjectPa:getValueFromObjectPath(candidateAtts.settings,normalizedPath),void 0!==result)break}const settings=getSettings(state);var _ref,_result$custom;if(void 0===result&&blockName&&(result=getValueFromObjectPath(settings.__experimentalFeatures?.blocks?.[blockName],normalizedPath)),void 0===result&&(result=getValueFromObjectPath(settings.__experimentalFeatures,normalizedPath)),void 0!==result)return build_module.G8[normalizedPath]?null!==(_ref=null!==(_result$custom=result.custom)&&void 0!==_result$custom?_result$custom:result.theme)&&void 0!==_ref?_ref:result.default:result;const deprecatedSettingsValue=deprecatedFlags[normalizedPath]?.(settings);return void 0!==deprecatedSettingsValue?deprecatedSettingsValue:"typography.dropCap"===normalizedPath||void 0}))}function private_selectors_isBlockInterfaceHidden(state){return state.isBlockInterfaceHidden}function getLastInsertedBlocksClientIds(state){return state?.lastBlockInserted?.clientIds}function getBlockWithoutAttributes(state,clientId){return state.blocks.byClientId.get(clientId)}const isBlockSubtreeDisabled=(state,clientId)=>{const isChildSubtreeDisabled=childClientId=>"disabled"===getBlockEditingMode(state,childClientId)&&getBlockOrder(state,childClientId).every(isChildSubtreeDisabled);return getBlockOrder(state,clientId).every(isChildSubtreeDisabled)};const getEnabledClientIdsTree=(0,rememo.A)((function getEnabledClientIdsTreeUnmemoized(state,rootClientId){const blockOrder=getBlockOrder(state,rootClientId),result=[];for(const clientId of blockOrder){const innerBlocks=getEnabledClientIdsTreeUnmemoized(state,clientId);"disabled"!==getBlockEditingMode(state,clientId)?result.push({clientId,innerBlocks}):result.push(...innerBlocks)}return result}),(state=>[state.blocks.order,state.blockEditingModes,state.settings.templateLock,state.blockListSettings,state.editorMode,state.zoomLevel,getSectionRootClientId(state)])),getEnabledBlockParents=(0,rememo.A)(((state,clientId,ascending=!1)=>getBlockParents(state,clientId,ascending).filter((parent=>"disabled"!==getBlockEditingMode(state,parent)))),(state=>[state.blocks.parents,state.blockEditingModes,state.settings.templateLock,state.blockListSettings]));function getRemovalPromptData(state){return state.removalPromptData}function getBlockRemovalRules(state){return state.blockRemovalRules}function getOpenedBlockSettingsMenu(state){return state.openedBlockSettingsMenu}const getStyleOverrides=(0,rememo.A)((state=>{const clientIdMap=getClientIdsWithDescendants(state).reduce(((acc,clientId,index)=>(acc[clientId]=index,acc)),{});return[...state.styleOverrides].sort(((overrideA,overrideB)=>{var _clientIdMap$clientId,_clientIdMap$clientId2;const[,{clientId:clientIdA}]=overrideA,[,{clientId:clientIdB}]=overrideB;return(null!==(_clientIdMap$clientId=clientIdMap[clientIdA])&&void 0!==_clientIdMap$clientId?_clientIdMap$clientId:-1)-(null!==(_clientIdMap$clientId2=clientIdMap[clientIdB])&&void 0!==_clientIdMap$clientId2?_clientIdMap$clientId2:-1)}))}),(state=>[state.blocks.order,state.styleOverrides]));function getRegisteredInserterMediaCategories(state){return state.registeredInserterMediaCategories}const getInserterMediaCategories=(0,rememo.A)((state=>{const{settings:{inserterMediaCategories,allowedMimeTypes,enableOpenverseMediaCategory},registeredInserterMediaCategories}=state;if(!inserterMediaCategories&&!registeredInserterMediaCategories.length||!allowedMimeTypes)return;const coreInserterMediaCategoriesNames=inserterMediaCategories?.map((({name})=>name))||[];return[...inserterMediaCategories||[],...(registeredInserterMediaCategories||[]).filter((({name})=>!coreInserterMediaCategoriesNames.includes(name)))].filter((category=>!(!enableOpenverseMediaCategory&&"openverse"===category.name)&&Object.values(allowedMimeTypes).some((mimeType=>mimeType.startsWith(`${category.mediaType}/`)))))}),(state=>[state.settings.inserterMediaCategories,state.settings.allowedMimeTypes,state.settings.enableOpenverseMediaCategory,state.registeredInserterMediaCategories])),hasAllowedPatterns=(0,factory.N)((select=>(0,rememo.A)(((state,rootClientId=null)=>{const{getAllPatterns}=unlock(select(STORE_NAME)),patterns=getAllPatterns(),{allowedBlockTypes}=getSettings(state);return patterns.some((pattern=>{const{inserter=!0}=pattern;if(!inserter)return!1;const grammar=getGrammar(pattern);return checkAllowListRecursive(grammar,allowedBlockTypes)&&grammar.every((({name:blockName})=>canInsertBlockType(state,blockName,rootClientId)))}))}),((state,rootClientId)=>[...getAllPatternsDependants(select)(state),...getInsertBlockTypeDependants(state,rootClientId)]))));function mapUserPattern(userPattern,__experimentalUserPatternCategories=[]){return{name:`core/block/${userPattern.id}`,id:userPattern.id,type:INSERTER_PATTERN_TYPES.user,title:userPattern.title.raw,categories:userPattern.wp_pattern_category.map((catId=>{const category=__experimentalUserPatternCategories.find((({id})=>id===catId));return category?category.slug:catId})),content:userPattern.content.raw,syncStatus:userPattern.wp_pattern_sync_status}}const getPatternBySlug=(0,factory.N)((select=>(0,rememo.A)(((state,patternName)=>{var _state$settings$__exp,_state$settings$selec;if(patternName?.startsWith("core/block/")){const _id=parseInt(patternName.slice(11),10),block=unlock(select(STORE_NAME)).getReusableBlocks().find((({id})=>id===_id));return block?mapUserPattern(block,state.settings.__experimentalUserPatternCategories):null}return[...null!==(_state$settings$__exp=state.settings.__experimentalBlockPatterns)&&void 0!==_state$settings$__exp?_state$settings$__exp:[],...null!==(_state$settings$selec=state.settings[selectBlockPatternsKey]?.(select))&&void 0!==_state$settings$selec?_state$settings$selec:[]].find((({name})=>name===patternName))}),((state,patternName)=>patternName?.startsWith("core/block/")?[unlock(select(STORE_NAME)).getReusableBlocks(),state.settings.__experimentalReusableBlocks]:[state.settings.__experimentalBlockPatterns,state.settings[selectBlockPatternsKey]?.(select)])))),getAllPatterns=(0,factory.N)((select=>(0,rememo.A)((state=>{var _state$settings$__exp2,_state$settings$selec2;return[...unlock(select(STORE_NAME)).getReusableBlocks().map((userPattern=>mapUserPattern(userPattern,state.settings.__experimentalUserPatternCategories))),...null!==(_state$settings$__exp2=state.settings.__experimentalBlockPatterns)&&void 0!==_state$settings$__exp2?_state$settings$__exp2:[],...null!==(_state$settings$selec2=state.settings[selectBlockPatternsKey]?.(select))&&void 0!==_state$settings$selec2?_state$settings$selec2:[]].filter(((x,index,arr)=>index===arr.findIndex((y=>x.name===y.name))))}),getAllPatternsDependants(select)))),isResolvingPatterns=(0,factory.N)((select=>(0,rememo.A)((state=>{const blockPatternsSelect=state.settings[selectBlockPatternsKey],reusableBlocksSelect=state.settings[reusableBlocksSelectKey];return!!blockPatternsSelect&&void 0===blockPatternsSelect(select)||!!reusableBlocksSelect&&void 0===reusableBlocksSelect(select)}),getAllPatternsDependants(select)))),EMPTY_ARRAY=[],getReusableBlocks=(0,factory.N)((select=>state=>{var _ref;const reusableBlocksSelect=state.settings[reusableBlocksSelectKey];return null!==(_ref=reusableBlocksSelect?reusableBlocksSelect(select):state.settings.__experimentalReusableBlocks)&&void 0!==_ref?_ref:EMPTY_ARRAY}));function getLastFocus(state){return state.lastFocus}function private_selectors_isDragging(state){return state.isDragging}function getExpandedBlock(state){return state.expandedBlock}const getContentLockingParent=(state,clientId)=>{let result,current=clientId;for(;!result&&(current=state.blocks.parents.get(current));)"contentOnly"===getTemplateLock(state,current)&&(result=current);return result},getParentSectionBlock=(state,clientId)=>{let result,current=clientId;for(;!result&&(current=state.blocks.parents.get(current));)isSectionBlock(state,current)&&(result=current);return result};function isSectionBlock(state,clientId){const sectionClientIds=getBlockOrder(state,getSectionRootClientId(state));return"core/block"===getBlockName(state,clientId)||"contentOnly"===getTemplateLock(state,clientId)||isNavigationMode(state)&&sectionClientIds.includes(clientId)}function getTemporarilyEditingAsBlocks(state){return state.temporarilyEditingAsBlocks}function getTemporarilyEditingFocusModeToRevert(state){return state.temporarilyEditingFocusModeRevert}const getBlockStyles=(0,rememo.A)(((state,clientIds)=>clientIds.reduce(((styles,clientId)=>(styles[clientId]=state.blocks.attributes.get(clientId)?.style,styles)),{})),((state,clientIds)=>[...clientIds.map((clientId=>state.blocks.attributes.get(clientId)?.style))]));function getSectionRootClientId(state){return state.settings?.[sectionRootClientIdKey]}function isZoomOut(state){return"auto-scaled"===state.zoomLevel||state.zoomLevel<100}function getZoomLevel(state){return state.zoomLevel}function getClosestAllowedInsertionPoint(state,name,clientId=""){const blockNames=Array.isArray(name)?name:[name],areBlockNamesAllowedInClientId=id=>blockNames.every((currentName=>canInsertBlockType(state,currentName,id)));if(!clientId){if(areBlockNamesAllowedInClientId(clientId))return clientId;const sectionRootClientId=getSectionRootClientId(state);return sectionRootClientId&&areBlockNamesAllowedInClientId(sectionRootClientId)?sectionRootClientId:null}let current=clientId;for(;null!==current&&!areBlockNamesAllowedInClientId(current);){current=getBlockRootClientId(state,current)}return current}function getClosestAllowedInsertionPointForPattern(state,pattern,clientId){const{allowedBlockTypes}=getSettings(state);if(!checkAllowListRecursive(getGrammar(pattern),allowedBlockTypes))return null;return getClosestAllowedInsertionPoint(state,getGrammar(pattern).map((({blockName:name})=>name)),clientId)}function getInsertionPoint(state){return state.insertionPoint}const isFiltered=Symbol("isFiltered"),parsedPatternCache=new WeakMap,grammarMapCache=new WeakMap;function getParsedPattern(pattern){let parsedPattern=parsedPatternCache.get(pattern);return parsedPattern||(parsedPattern=function parsePattern(pattern){const blocks=(0,build_module.qg)(pattern.content,{__unstableSkipMigrationLogs:!0});return 1===blocks.length&&(blocks[0].attributes={...blocks[0].attributes,metadata:{...blocks[0].attributes.metadata||{},categories:pattern.categories,patternName:pattern.name,name:blocks[0].attributes.metadata?.name||pattern.title}}),{...pattern,blocks}}(pattern),parsedPatternCache.set(pattern,parsedPattern)),parsedPattern}function getGrammar(pattern){let grammarMap=grammarMapCache.get(pattern);return grammarMap||(grammarMap=(0,block_serialization_default_parser_build_module.q)(pattern.content),grammarMap=grammarMap.filter((block=>null!==block.blockName)),grammarMapCache.set(pattern,grammarMap)),grammarMap}const checkAllowList=(list,item,defaultResult=null)=>"boolean"==typeof list?list:Array.isArray(list)?!(!list.includes("core/post-content")||null!==item)||list.includes(item):defaultResult,checkAllowListRecursive=(blocks,allowedBlockTypes)=>{if("boolean"==typeof allowedBlockTypes)return allowedBlockTypes;const blocksQueue=[...blocks];for(;blocksQueue.length>0;){const block=blocksQueue.shift();if(!checkAllowList(allowedBlockTypes,block.name||block.blockName,!0))return!1;block.innerBlocks?.forEach((innerBlock=>{blocksQueue.push(innerBlock)}))}return!0},getAllPatternsDependants=select=>state=>[state.settings.__experimentalBlockPatterns,state.settings.__experimentalUserPatternCategories,state.settings.__experimentalReusableBlocks,state.settings[selectBlockPatternsKey]?.(select),state.blockPatterns,unlock(select(STORE_NAME)).getReusableBlocks()];function getInsertBlockTypeDependants(state,rootClientId){return[state.blockListSettings[rootClientId],state.blocks.byClientId.get(rootClientId),state.settings.allowedBlockTypes,state.settings.templateLock,state.blockEditingModes,state.editorMode,getSectionRootClientId(state)]}const comparator=(field,items,order)=>(a,b)=>{let cmpA,cmpB;if("function"==typeof field?(cmpA=field(a),cmpB=field(b)):(cmpA=a[field],cmpB=b[field]),cmpA>cmpB)return"asc"===order?1:-1;if(cmpB>cmpA)return"asc"===order?-1:1;const orderA=items.findIndex((item=>item===a)),orderB=items.findIndex((item=>item===b));return orderA>orderB?1:orderB>orderA?-1:0};function orderBy(items,field,order="asc"){return items.concat().sort(comparator(field,items,order))}const selectors_EMPTY_ARRAY=[],EMPTY_SET=new Set,DEFAULT_INSERTER_OPTIONS={[isFiltered]:!0};function getBlockName(state,clientId){const block=state.blocks.byClientId.get(clientId);if("web"!==platform.A.OS&&"core/social-link"===block?.name){const attributes=state.blocks.attributes.get(clientId),{service}=null!=attributes?attributes:{};return service?`core/social-link-${service}`:"core/social-link"}return block?block.name:null}function isBlockValid(state,clientId){const block=state.blocks.byClientId.get(clientId);return!!block&&block.isValid}function getBlockAttributes(state,clientId){return state.blocks.byClientId.get(clientId)?state.blocks.attributes.get(clientId):null}function getBlock(state,clientId){return state.blocks.byClientId.has(clientId)?state.blocks.tree.get(clientId):null}const __unstableGetBlockWithoutInnerBlocks=(0,rememo.A)(((state,clientId)=>{const block=state.blocks.byClientId.get(clientId);return block?{...block,attributes:getBlockAttributes(state,clientId)}:null}),((state,clientId)=>[state.blocks.byClientId.get(clientId),state.blocks.attributes.get(clientId)]));function getBlocks(state,rootClientId){const treeKey=rootClientId&&areInnerBlocksControlled(state,rootClientId)?"controlled||"+rootClientId:rootClientId||"";return state.blocks.tree.get(treeKey)?.innerBlocks||selectors_EMPTY_ARRAY}const __unstableGetClientIdWithClientIdsTree=(0,rememo.A)(((state,clientId)=>((0,deprecated_build_module.A)("wp.data.select( 'core/block-editor' ).__unstableGetClientIdWithClientIdsTree",{since:"6.3",version:"6.5"}),{clientId,innerBlocks:__unstableGetClientIdsTree(state,clientId)})),(state=>[state.blocks.order])),__unstableGetClientIdsTree=(0,rememo.A)(((state,rootClientId="")=>((0,deprecated_build_module.A)("wp.data.select( 'core/block-editor' ).__unstableGetClientIdsTree",{since:"6.3",version:"6.5"}),getBlockOrder(state,rootClientId).map((clientId=>__unstableGetClientIdWithClientIdsTree(state,clientId))))),(state=>[state.blocks.order])),getClientIdsOfDescendants=(0,rememo.A)(((state,rootIds)=>{rootIds=Array.isArray(rootIds)?[...rootIds]:[rootIds];const ids=[];for(const rootId of rootIds){const order=state.blocks.order.get(rootId);order&&ids.push(...order)}let index=0;for(;index<ids.length;){const id=ids[index],order=state.blocks.order.get(id);order&&ids.splice(index+1,0,...order),index++}return ids}),(state=>[state.blocks.order])),getClientIdsWithDescendants=state=>getClientIdsOfDescendants(state,""),getGlobalBlockCount=(0,rememo.A)(((state,blockName)=>{const clientIds=getClientIdsWithDescendants(state);if(!blockName)return clientIds.length;let count=0;for(const clientId of clientIds){state.blocks.byClientId.get(clientId).name===blockName&&count++}return count}),(state=>[state.blocks.order,state.blocks.byClientId])),getBlocksByName=(0,rememo.A)(((state,blockName)=>{if(!blockName)return selectors_EMPTY_ARRAY;const blockNames=Array.isArray(blockName)?blockName:[blockName],foundBlocks=getClientIdsWithDescendants(state).filter((clientId=>{const block=state.blocks.byClientId.get(clientId);return blockNames.includes(block.name)}));return foundBlocks.length>0?foundBlocks:selectors_EMPTY_ARRAY}),(state=>[state.blocks.order,state.blocks.byClientId]));function __experimentalGetGlobalBlocksByName(state,blockName){return(0,deprecated_build_module.A)("wp.data.select( 'core/block-editor' ).__experimentalGetGlobalBlocksByName",{since:"6.5",alternative:"wp.data.select( 'core/block-editor' ).getBlocksByName"}),getBlocksByName(state,blockName)}const getBlocksByClientId=(0,rememo.A)(((state,clientIds)=>(Array.isArray(clientIds)?clientIds:[clientIds]).map((clientId=>getBlock(state,clientId)))),((state,clientIds)=>(Array.isArray(clientIds)?clientIds:[clientIds]).map((clientId=>state.blocks.tree.get(clientId))))),getBlockNamesByClientId=(0,rememo.A)(((state,clientIds)=>getBlocksByClientId(state,clientIds).filter(Boolean).map((block=>block.name))),((state,clientIds)=>getBlocksByClientId(state,clientIds)));function getBlockCount(state,rootClientId){return getBlockOrder(state,rootClientId).length}function getSelectionStart(state){return state.selection.selectionStart}function getSelectionEnd(state){return state.selection.selectionEnd}function getBlockSelectionStart(state){return state.selection.selectionStart.clientId}function getBlockSelectionEnd(state){return state.selection.selectionEnd.clientId}function getSelectedBlockCount(state){const multiSelectedBlockCount=getMultiSelectedBlockClientIds(state).length;return multiSelectedBlockCount||(state.selection.selectionStart.clientId?1:0)}function hasSelectedBlock(state){const{selectionStart,selectionEnd}=state.selection;return!!selectionStart.clientId&&selectionStart.clientId===selectionEnd.clientId}function getSelectedBlockClientId(state){const{selectionStart,selectionEnd}=state.selection,{clientId}=selectionStart;return clientId&&clientId===selectionEnd.clientId?clientId:null}function getSelectedBlock(state){const clientId=getSelectedBlockClientId(state);return clientId?getBlock(state,clientId):null}function getBlockRootClientId(state,clientId){var _state$blocks$parents;return null!==(_state$blocks$parents=state.blocks.parents.get(clientId))&&void 0!==_state$blocks$parents?_state$blocks$parents:null}const getBlockParents=(0,rememo.A)(((state,clientId,ascending=!1)=>{const parents=[];let current=clientId;for(;current=state.blocks.parents.get(current);)parents.push(current);return parents.length?ascending?parents:parents.reverse():selectors_EMPTY_ARRAY}),(state=>[state.blocks.parents])),getBlockParentsByBlockName=(0,rememo.A)(((state,clientId,blockName,ascending=!1)=>{const parents=getBlockParents(state,clientId,ascending),hasName=Array.isArray(blockName)?name=>blockName.includes(name):name=>blockName===name;return parents.filter((id=>hasName(getBlockName(state,id))))}),(state=>[state.blocks.parents]));function getBlockHierarchyRootClientId(state,clientId){let parent,current=clientId;do{parent=current,current=state.blocks.parents.get(current)}while(current);return parent}function getLowestCommonAncestorWithSelectedBlock(state,clientId){const selectedId=getSelectedBlockClientId(state),clientParents=[...getBlockParents(state,clientId),clientId],selectedParents=[...getBlockParents(state,selectedId),selectedId];let lowestCommonAncestor;const maxDepth=Math.min(clientParents.length,selectedParents.length);for(let index=0;index<maxDepth&&clientParents[index]===selectedParents[index];index++)lowestCommonAncestor=clientParents[index];return lowestCommonAncestor}function getAdjacentBlockClientId(state,startClientId,modifier=1){if(void 0===startClientId&&(startClientId=getSelectedBlockClientId(state)),void 0===startClientId&&(startClientId=modifier<0?getFirstMultiSelectedBlockClientId(state):getLastMultiSelectedBlockClientId(state)),!startClientId)return null;const rootClientId=getBlockRootClientId(state,startClientId);if(null===rootClientId)return null;const{order}=state.blocks,orderSet=order.get(rootClientId),nextIndex=orderSet.indexOf(startClientId)+1*modifier;return nextIndex<0||nextIndex===orderSet.length?null:orderSet[nextIndex]}function getPreviousBlockClientId(state,startClientId){return getAdjacentBlockClientId(state,startClientId,-1)}function getNextBlockClientId(state,startClientId){return getAdjacentBlockClientId(state,startClientId,1)}function getSelectedBlocksInitialCaretPosition(state){return state.initialPosition}const getSelectedBlockClientIds=(0,rememo.A)((state=>{const{selectionStart,selectionEnd}=state.selection;if(!selectionStart.clientId||!selectionEnd.clientId)return selectors_EMPTY_ARRAY;if(selectionStart.clientId===selectionEnd.clientId)return[selectionStart.clientId];const rootClientId=getBlockRootClientId(state,selectionStart.clientId);if(null===rootClientId)return selectors_EMPTY_ARRAY;const blockOrder=getBlockOrder(state,rootClientId),startIndex=blockOrder.indexOf(selectionStart.clientId),endIndex=blockOrder.indexOf(selectionEnd.clientId);return startIndex>endIndex?blockOrder.slice(endIndex,startIndex+1):blockOrder.slice(startIndex,endIndex+1)}),(state=>[state.blocks.order,state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId]));function getMultiSelectedBlockClientIds(state){const{selectionStart,selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?selectors_EMPTY_ARRAY:getSelectedBlockClientIds(state)}const getMultiSelectedBlocks=(0,rememo.A)((state=>{const multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(state);return multiSelectedBlockClientIds.length?multiSelectedBlockClientIds.map((clientId=>getBlock(state,clientId))):selectors_EMPTY_ARRAY}),(state=>[...getSelectedBlockClientIds.getDependants(state),state.blocks.byClientId,state.blocks.order,state.blocks.attributes]));function getFirstMultiSelectedBlockClientId(state){return getMultiSelectedBlockClientIds(state)[0]||null}function getLastMultiSelectedBlockClientId(state){const selectedClientIds=getMultiSelectedBlockClientIds(state);return selectedClientIds[selectedClientIds.length-1]||null}function isFirstMultiSelectedBlock(state,clientId){return getFirstMultiSelectedBlockClientId(state)===clientId}function isBlockMultiSelected(state,clientId){return-1!==getMultiSelectedBlockClientIds(state).indexOf(clientId)}const isAncestorMultiSelected=(0,rememo.A)(((state,clientId)=>{let ancestorClientId=clientId,isMultiSelected=!1;for(;ancestorClientId&&!isMultiSelected;)ancestorClientId=getBlockRootClientId(state,ancestorClientId),isMultiSelected=isBlockMultiSelected(state,ancestorClientId);return isMultiSelected}),(state=>[state.blocks.order,state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId]));function getMultiSelectedBlocksStartClientId(state){const{selectionStart,selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?null:selectionStart.clientId||null}function getMultiSelectedBlocksEndClientId(state){const{selectionStart,selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId?null:selectionEnd.clientId||null}function __unstableIsFullySelected(state){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);return!selectionAnchor.attributeKey&&!selectionFocus.attributeKey&&void 0===selectionAnchor.offset&&void 0===selectionFocus.offset}function __unstableIsSelectionCollapsed(state){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);return!!selectionAnchor&&!!selectionFocus&&selectionAnchor.clientId===selectionFocus.clientId&&selectionAnchor.attributeKey===selectionFocus.attributeKey&&selectionAnchor.offset===selectionFocus.offset}function __unstableSelectionHasUnmergeableBlock(state){return getSelectedBlockClientIds(state).some((clientId=>{const blockName=getBlockName(state,clientId);return!(0,build_module.E7)(blockName).merge}))}function __unstableIsSelectionMergeable(state,isForward){const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);if(selectionAnchor.clientId===selectionFocus.clientId)return!1;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return!1;const anchorRootClientId=getBlockRootClientId(state,selectionAnchor.clientId);if(anchorRootClientId!==getBlockRootClientId(state,selectionFocus.clientId))return!1;const blockOrder=getBlockOrder(state,anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const targetBlockClientId=isForward?selectionEnd.clientId:selectionStart.clientId,blockToMergeClientId=isForward?selectionStart.clientId:selectionEnd.clientId,targetBlockName=getBlockName(state,targetBlockClientId);if(!(0,build_module.E7)(targetBlockName).merge)return!1;const blockToMerge=getBlock(state,blockToMergeClientId);if(blockToMerge.name===targetBlockName)return!0;const blocksToMerge=(0,build_module.bh)(blockToMerge,targetBlockName);return blocksToMerge&&blocksToMerge.length}const __unstableGetSelectedBlocksWithPartialSelection=state=>{const selectionAnchor=getSelectionStart(state),selectionFocus=getSelectionEnd(state);if(selectionAnchor.clientId===selectionFocus.clientId)return selectors_EMPTY_ARRAY;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return selectors_EMPTY_ARRAY;const anchorRootClientId=getBlockRootClientId(state,selectionAnchor.clientId);if(anchorRootClientId!==getBlockRootClientId(state,selectionFocus.clientId))return selectors_EMPTY_ARRAY;const blockOrder=getBlockOrder(state,anchorRootClientId),anchorIndex=blockOrder.indexOf(selectionAnchor.clientId),focusIndex=blockOrder.indexOf(selectionFocus.clientId),[selectionStart,selectionEnd]=anchorIndex>focusIndex?[selectionFocus,selectionAnchor]:[selectionAnchor,selectionFocus],blockA=getBlock(state,selectionStart.clientId),blockB=getBlock(state,selectionEnd.clientId),htmlA=blockA.attributes[selectionStart.attributeKey],htmlB=blockB.attributes[selectionEnd.attributeKey];let valueA=(0,rich_text_build_module.vt)({html:htmlA}),valueB=(0,rich_text_build_module.vt)({html:htmlB});return valueA=(0,rich_text_build_module.TF)(valueA,0,selectionStart.offset),valueB=(0,rich_text_build_module.TF)(valueB,selectionEnd.offset,valueB.text.length),[{...blockA,attributes:{...blockA.attributes,[selectionStart.attributeKey]:(0,rich_text_build_module.Ky)({value:valueA})}},{...blockB,attributes:{...blockB.attributes,[selectionEnd.attributeKey]:(0,rich_text_build_module.Ky)({value:valueB})}}]};function getBlockOrder(state,rootClientId){return state.blocks.order.get(rootClientId||"")||selectors_EMPTY_ARRAY}function getBlockIndex(state,clientId){return getBlockOrder(state,getBlockRootClientId(state,clientId)).indexOf(clientId)}function isBlockSelected(state,clientId){const{selectionStart,selectionEnd}=state.selection;return selectionStart.clientId===selectionEnd.clientId&&selectionStart.clientId===clientId}function hasSelectedInnerBlock(state,clientId,deep=!1){const selectedBlockClientIds=getSelectedBlockClientIds(state);return!!selectedBlockClientIds.length&&(deep?selectedBlockClientIds.some((id=>getBlockParents(state,id,!0).includes(clientId))):selectedBlockClientIds.some((id=>getBlockRootClientId(state,id)===clientId)))}function hasDraggedInnerBlock(state,clientId,deep=!1){return getBlockOrder(state,clientId).some((innerClientId=>isBlockBeingDragged(state,innerClientId)||deep&&hasDraggedInnerBlock(state,innerClientId,deep)))}function isBlockWithinSelection(state,clientId){if(!clientId)return!1;const clientIds=getMultiSelectedBlockClientIds(state),index=clientIds.indexOf(clientId);return index>-1&&index<clientIds.length-1}function hasMultiSelection(state){const{selectionStart,selectionEnd}=state.selection;return selectionStart.clientId!==selectionEnd.clientId}function selectors_isMultiSelecting(state){return state.isMultiSelecting}function selectors_isSelectionEnabled(state){return state.isSelectionEnabled}function getBlockMode(state,clientId){return state.blocksMode[clientId]||"visual"}function selectors_isTyping(state){return state.isTyping}function isDraggingBlocks(state){return!!state.draggedBlocks.length}function getDraggedBlockClientIds(state){return state.draggedBlocks}function isBlockBeingDragged(state,clientId){return state.draggedBlocks.includes(clientId)}function isAncestorBeingDragged(state,clientId){if(!isDraggingBlocks(state))return!1;return getBlockParents(state,clientId).some((parentClientId=>isBlockBeingDragged(state,parentClientId)))}function isCaretWithinFormattedText(){return(0,deprecated_build_module.A)('wp.data.select( "core/block-editor" ).isCaretWithinFormattedText',{since:"6.1",version:"6.3"}),!1}const getBlockInsertionPoint=(0,rememo.A)((state=>{let rootClientId,index;const{insertionCue,selection:{selectionEnd}}=state;if(null!==insertionCue)return insertionCue;const{clientId}=selectionEnd;return clientId?(rootClientId=getBlockRootClientId(state,clientId)||void 0,index=getBlockIndex(state,selectionEnd.clientId)+1):index=getBlockOrder(state).length,{rootClientId,index}}),(state=>[state.insertionCue,state.selection.selectionEnd.clientId,state.blocks.parents,state.blocks.order]));function isBlockInsertionPointVisible(state){return null!==state.insertionCue}function isValidTemplate(state){return state.template.isValid}function getTemplate(state){return state.settings.template}function getTemplateLock(state,rootClientId){var _getBlockListSettings,_state$settings$templ;return rootClientId?null!==(_getBlockListSettings=getBlockListSettings(state,rootClientId)?.templateLock)&&void 0!==_getBlockListSettings&&_getBlockListSettings:null!==(_state$settings$templ=state.settings.templateLock)&&void 0!==_state$settings$templ&&_state$settings$templ}const isBlockVisibleInTheInserter=(state,blockNameOrType,checkedBlocks=new Set)=>{let blockType,blockName;if(blockNameOrType&&"object"==typeof blockNameOrType?(blockType=blockNameOrType,blockName=blockNameOrType.name):(blockType=(0,build_module.E7)(blockNameOrType),blockName=blockNameOrType),!blockType)return!1;const{allowedBlockTypes}=getSettings(state);return!!checkAllowList(allowedBlockTypes,blockName,!0)&&(!checkedBlocks.has(blockName)&&(checkedBlocks.add(blockName),!Array.isArray(blockType.parent)||blockType.parent.some((name=>blockName!==name&&isBlockVisibleInTheInserter(state,name,checkedBlocks)||"core/post-content"===name))))},canInsertBlockTypeUnmemoized=(state,blockName,rootClientId=null)=>{if(!isBlockVisibleInTheInserter(state,blockName))return!1;let blockType;blockName&&"object"==typeof blockName?(blockType=blockName,blockName=blockType.name):blockType=(0,build_module.E7)(blockName);if(!!getTemplateLock(state,rootClientId))return!1;if(!!isSectionBlock(state,rootClientId))return!1;if("disabled"===getBlockEditingMode(state,null!=rootClientId?rootClientId:""))return!1;const parentBlockListSettings=getBlockListSettings(state,rootClientId);if(rootClientId&&void 0===parentBlockListSettings)return!1;const parentName=getBlockName(state,rootClientId),parentBlockType=(0,build_module.E7)(parentName),parentAllowedChildBlocks=parentBlockType?.allowedBlocks;let hasParentAllowedBlock=checkAllowList(parentAllowedChildBlocks,blockName);if(!1!==hasParentAllowedBlock){const parentAllowedBlocks=parentBlockListSettings?.allowedBlocks,hasParentListAllowedBlock=checkAllowList(parentAllowedBlocks,blockName);null!==hasParentListAllowedBlock&&(hasParentAllowedBlock=hasParentListAllowedBlock)}const blockAllowedParentBlocks=blockType.parent,hasBlockAllowedParent=checkAllowList(blockAllowedParentBlocks,parentName);let hasBlockAllowedAncestor=!0;const blockAllowedAncestorBlocks=blockType.ancestor;if(blockAllowedAncestorBlocks){hasBlockAllowedAncestor=[rootClientId,...getBlockParents(state,rootClientId)].some((ancestorClientId=>checkAllowList(blockAllowedAncestorBlocks,getBlockName(state,ancestorClientId))))}const canInsert=hasBlockAllowedAncestor&&(null===hasParentAllowedBlock&&null===hasBlockAllowedParent||!0===hasParentAllowedBlock||!0===hasBlockAllowedParent);return canInsert?(0,hooks_build_module.W5)("blockEditor.__unstableCanInsertBlockType",canInsert,blockType,rootClientId,{getBlock:getBlock.bind(null,state),getBlockParentsByBlockName:getBlockParentsByBlockName.bind(null,state)}):canInsert},canInsertBlockType=(0,rememo.A)(canInsertBlockTypeUnmemoized,((state,blockName,rootClientId)=>getInsertBlockTypeDependants(state,rootClientId)));function canInsertBlocks(state,clientIds,rootClientId=null){return clientIds.every((id=>canInsertBlockType(state,getBlockName(state,id),rootClientId)))}function canRemoveBlock(state,clientId){const attributes=getBlockAttributes(state,clientId);if(null===attributes)return!0;if(void 0!==attributes.lock?.remove)return!attributes.lock.remove;const rootClientId=getBlockRootClientId(state,clientId);if(getTemplateLock(state,rootClientId))return!1;return!!!getParentSectionBlock(state,clientId)&&"disabled"!==getBlockEditingMode(state,rootClientId)}function canRemoveBlocks(state,clientIds){return clientIds.every((clientId=>canRemoveBlock(state,clientId)))}function canMoveBlock(state,clientId){const attributes=getBlockAttributes(state,clientId);if(null===attributes)return!0;if(void 0!==attributes.lock?.move)return!attributes.lock.move;const rootClientId=getBlockRootClientId(state,clientId);return"all"!==getTemplateLock(state,rootClientId)&&"disabled"!==getBlockEditingMode(state,rootClientId)}function canMoveBlocks(state,clientIds){return clientIds.every((clientId=>canMoveBlock(state,clientId)))}function canEditBlock(state,clientId){const attributes=getBlockAttributes(state,clientId);if(null===attributes)return!0;const{lock}=attributes;return!lock?.edit}function canLockBlockType(state,nameOrType){return!!(0,build_module.pN)(nameOrType,"lock",!0)&&!!state.settings?.canLockBlocks}function getInsertUsage(state,id){var _state$preferences$in;return null!==(_state$preferences$in=state.preferences.insertUsage?.[id])&&void 0!==_state$preferences$in?_state$preferences$in:null}const canIncludeBlockTypeInInserter=(state,blockType,rootClientId)=>!!(0,build_module.pN)(blockType,"inserter",!0)&&canInsertBlockTypeUnmemoized(state,blockType.name,rootClientId),calculateFrecency=(time,count)=>{if(!time)return count;const duration=Date.now()-time;switch(!0){case duration<36e5:return 4*count;case duration<864e5:return 2*count;case duration<6048e5:return count/2;default:return count/4}},buildBlockTypeItem=(state,{buildScope="inserter"})=>blockType=>{const id=blockType.name;let isDisabled=!1;(0,build_module.pN)(blockType.name,"multiple",!0)||(isDisabled=getBlocksByClientId(state,getClientIdsWithDescendants(state)).some((({name})=>name===blockType.name)));const{time,count=0}=getInsertUsage(state,id)||{},blockItemBase={id,name:blockType.name,title:blockType.title,icon:blockType.icon,isDisabled,frecency:calculateFrecency(time,count)};if("transform"===buildScope)return blockItemBase;const inserterVariations=(0,build_module.oO)(blockType.name,"inserter");return{...blockItemBase,initialAttributes:{},description:blockType.description,category:blockType.category,keywords:blockType.keywords,parent:blockType.parent,variations:inserterVariations,example:blockType.example,utility:1}},getInserterItems=(0,factory.N)((select=>(0,rememo.A)(((state,rootClientId=null,options=DEFAULT_INSERTER_OPTIONS)=>{const syncedPatternInserterItems=canInsertBlockTypeUnmemoized(state,"core/block",rootClientId)?unlock(select(STORE_NAME)).getReusableBlocks().map((reusableBlock=>{const icon=reusableBlock.wp_pattern_sync_status?symbol.A:{src:symbol.A,foreground:"var(--wp-block-synced-color)"},id=`core/block/${reusableBlock.id}`,{time,count=0}=getInsertUsage(state,id)||{},frecency=calculateFrecency(time,count);return{id,name:"core/block",initialAttributes:{ref:reusableBlock.id},title:reusableBlock.title?.raw,icon,category:"reusable",keywords:["reusable"],isDisabled:!1,utility:1,frecency,content:reusableBlock.content?.raw,syncStatus:reusableBlock.wp_pattern_sync_status}})):[],buildBlockTypeInserterItem=buildBlockTypeItem(state,{buildScope:"inserter"});let blockTypeInserterItems=(0,build_module.li)().filter((blockType=>(0,build_module.pN)(blockType,"inserter",!0))).map(buildBlockTypeInserterItem);blockTypeInserterItems=!1!==options[isFiltered]?blockTypeInserterItems.filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId))):blockTypeInserterItems.filter((blockType=>isBlockVisibleInTheInserter(state,blockType))).map((blockType=>({...blockType,isAllowedInCurrentRoot:canIncludeBlockTypeInInserter(state,blockType,rootClientId)})));const items=blockTypeInserterItems.reduce(((accumulator,item)=>{const{variations=[]}=item;if(variations.some((({isDefault})=>isDefault))||accumulator.push(item),variations.length){const variationMapper=((state,item)=>variation=>{const variationId=`${item.id}/${variation.name}`,{time,count=0}=getInsertUsage(state,variationId)||{};return{...item,id:variationId,icon:variation.icon||item.icon,title:variation.title||item.title,description:variation.description||item.description,category:variation.category||item.category,example:variation.hasOwnProperty("example")?variation.example:item.example,initialAttributes:{...item.initialAttributes,...variation.attributes},innerBlocks:variation.innerBlocks,keywords:variation.keywords||item.keywords,frecency:calculateFrecency(time,count)}})(state,item);accumulator.push(...variations.map(variationMapper))}return accumulator}),[]),{core:coreItems,noncore:nonCoreItems}=items.reduce(((blocks,block)=>{const{core,noncore}=blocks;return(block.name.startsWith("core/")?core:noncore).push(block),blocks}),{core:[],noncore:[]});return[...[...coreItems,...nonCoreItems],...syncedPatternInserterItems]}),((state,rootClientId)=>[(0,build_module.li)(),unlock(select(STORE_NAME)).getReusableBlocks(),state.blocks.order,state.preferences.insertUsage,...getInsertBlockTypeDependants(state,rootClientId)])))),getBlockTransformItems=(0,rememo.A)(((state,blocks,rootClientId=null)=>{const normalizedBlocks=Array.isArray(blocks)?blocks:[blocks],buildBlockTypeTransformItem=buildBlockTypeItem(state,{buildScope:"transform"}),blockTypeTransformItems=(0,build_module.li)().filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId))).map(buildBlockTypeTransformItem),itemsByName=Object.fromEntries(Object.entries(blockTypeTransformItems).map((([,value])=>[value.name,value]))),possibleTransforms=(0,build_module.Fk)(normalizedBlocks).reduce(((accumulator,block)=>(itemsByName[block?.name]&&accumulator.push(itemsByName[block.name]),accumulator)),[]);return orderBy(possibleTransforms,(block=>itemsByName[block.name].frecency),"desc")}),((state,blocks,rootClientId)=>[(0,build_module.li)(),state.preferences.insertUsage,...getInsertBlockTypeDependants(state,rootClientId)])),hasInserterItems=(0,factory.N)((select=>(state,rootClientId=null)=>{if((0,build_module.li)().some((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId))))return!0;return canInsertBlockTypeUnmemoized(state,"core/block",rootClientId)&&unlock(select(STORE_NAME)).getReusableBlocks().length>0})),getAllowedBlocks=(0,factory.N)((select=>(0,rememo.A)(((state,rootClientId=null)=>{if(!rootClientId)return;const blockTypes=(0,build_module.li)().filter((blockType=>canIncludeBlockTypeInInserter(state,blockType,rootClientId)));return canInsertBlockTypeUnmemoized(state,"core/block",rootClientId)&&unlock(select(STORE_NAME)).getReusableBlocks().length>0&&blockTypes.push("core/block"),blockTypes}),((state,rootClientId)=>[(0,build_module.li)(),unlock(select(STORE_NAME)).getReusableBlocks(),...getInsertBlockTypeDependants(state,rootClientId)])))),__experimentalGetAllowedBlocks=(0,rememo.A)(((state,rootClientId=null)=>((0,deprecated_build_module.A)('wp.data.select( "core/block-editor" ).__experimentalGetAllowedBlocks',{alternative:'wp.data.select( "core/block-editor" ).getAllowedBlocks',since:"6.2",version:"6.4"}),getAllowedBlocks(state,rootClientId))),((state,rootClientId)=>getAllowedBlocks.getDependants(state,rootClientId)));function getDirectInsertBlock(state,rootClientId=null){var _state$blockListSetti;if(!rootClientId)return;const{defaultBlock,directInsert}=null!==(_state$blockListSetti=state.blockListSettings[rootClientId])&&void 0!==_state$blockListSetti?_state$blockListSetti:{};return defaultBlock&&directInsert?defaultBlock:void 0}function __experimentalGetDirectInsertBlock(state,rootClientId=null){return(0,deprecated_build_module.A)('wp.data.select( "core/block-editor" ).__experimentalGetDirectInsertBlock',{alternative:'wp.data.select( "core/block-editor" ).getDirectInsertBlock',since:"6.3",version:"6.4"}),getDirectInsertBlock(state,rootClientId)}const __experimentalGetParsedPattern=(0,factory.N)((select=>(state,patternName)=>{const pattern=unlock(select(STORE_NAME)).getPatternBySlug(patternName);return pattern?getParsedPattern(pattern):null})),getAllowedPatternsDependants=select=>(state,rootClientId)=>[...getAllPatternsDependants(select)(state),...getInsertBlockTypeDependants(state,rootClientId)],patternsWithParsedBlocks=new WeakMap;function enhancePatternWithParsedBlocks(pattern){let enhancedPattern=patternsWithParsedBlocks.get(pattern);return enhancedPattern||(enhancedPattern={...pattern,get blocks(){return getParsedPattern(pattern).blocks}},patternsWithParsedBlocks.set(pattern,enhancedPattern)),enhancedPattern}const __experimentalGetAllowedPatterns=(0,factory.N)((select=>(0,rememo.A)(((state,rootClientId=null,options=DEFAULT_INSERTER_OPTIONS)=>{const{getAllPatterns}=unlock(select(STORE_NAME)),patterns=getAllPatterns(),{allowedBlockTypes}=getSettings(state),parsedPatterns=patterns.filter((({inserter=!0})=>!!inserter)).map(enhancePatternWithParsedBlocks);return parsedPatterns.filter((pattern=>checkAllowListRecursive(getGrammar(pattern),allowedBlockTypes))).filter((pattern=>getGrammar(pattern).every((({blockName:name})=>!1!==options[isFiltered]?canInsertBlockType(state,name,rootClientId):isBlockVisibleInTheInserter(state,name)))))}),getAllowedPatternsDependants(select)))),getPatternsByBlockTypes=(0,factory.N)((select=>(0,rememo.A)(((state,blockNames,rootClientId=null)=>{if(!blockNames)return selectors_EMPTY_ARRAY;const patterns=select(STORE_NAME).__experimentalGetAllowedPatterns(rootClientId),normalizedBlockNames=Array.isArray(blockNames)?blockNames:[blockNames],filteredPatterns=patterns.filter((pattern=>pattern?.blockTypes?.some?.((blockName=>normalizedBlockNames.includes(blockName)))));return 0===filteredPatterns.length?selectors_EMPTY_ARRAY:filteredPatterns}),((state,blockNames,rootClientId)=>getAllowedPatternsDependants(select)(state,rootClientId))))),__experimentalGetPatternsByBlockTypes=(0,factory.N)((select=>((0,deprecated_build_module.A)('wp.data.select( "core/block-editor" ).__experimentalGetPatternsByBlockTypes',{alternative:'wp.data.select( "core/block-editor" ).getPatternsByBlockTypes',since:"6.2",version:"6.4"}),select(STORE_NAME).getPatternsByBlockTypes))),__experimentalGetPatternTransformItems=(0,factory.N)((select=>(0,rememo.A)(((state,blocks,rootClientId=null)=>{if(!blocks)return selectors_EMPTY_ARRAY;if(blocks.some((({clientId,innerBlocks})=>innerBlocks.length||areInnerBlocksControlled(state,clientId))))return selectors_EMPTY_ARRAY;const selectedBlockNames=Array.from(new Set(blocks.map((({name})=>name))));return select(STORE_NAME).getPatternsByBlockTypes(selectedBlockNames,rootClientId)}),((state,blocks,rootClientId)=>getAllowedPatternsDependants(select)(state,rootClientId)))));function getBlockListSettings(state,clientId){return state.blockListSettings[clientId]}function getSettings(state){return state.settings}function isLastBlockChangePersistent(state){return state.blocks.isPersistentChange}const __experimentalGetBlockListSettingsForBlocks=(0,rememo.A)(((state,clientIds=[])=>clientIds.reduce(((blockListSettingsForBlocks,clientId)=>state.blockListSettings[clientId]?{...blockListSettingsForBlocks,[clientId]:state.blockListSettings[clientId]}:blockListSettingsForBlocks),{})),(state=>[state.blockListSettings])),__experimentalGetReusableBlockTitle=(0,factory.N)((select=>(0,rememo.A)(((state,ref)=>{(0,deprecated_build_module.A)("wp.data.select( 'core/block-editor' ).__experimentalGetReusableBlockTitle",{since:"6.6",version:"6.8"});const reusableBlock=unlock(select(STORE_NAME)).getReusableBlocks().find((block=>block.id===ref));return reusableBlock?reusableBlock.title?.raw:null}),(()=>[unlock(select(STORE_NAME)).getReusableBlocks()]))));function __unstableIsLastBlockChangeIgnored(state){return state.blocks.isIgnoredChange}function __experimentalGetLastBlockAttributeChanges(state){return state.lastBlockAttributesChange}function isNavigationMode(state){return"navigation"===__unstableGetEditorMode(state)}const __unstableGetEditorMode=(0,factory.N)((select=>()=>select(store.M).get("core","editorTool")));function hasBlockMovingClientId(){return(0,deprecated_build_module.A)('wp.data.select( "core/block-editor" ).hasBlockMovingClientId',{since:"6.7",hint:"Block moving mode feature has been removed"}),!1}function didAutomaticChange(state){return!!state.automaticChangeStatus}function isBlockHighlighted(state,clientId){return state.highlightedBlock===clientId}function areInnerBlocksControlled(state,clientId){return!!state.blocks.controlledInnerBlocks[clientId]}const __experimentalGetActiveBlockIdByBlockNames=(0,rememo.A)(((state,validBlockNames)=>{if(!validBlockNames.length)return null;const selectedBlockClientId=getSelectedBlockClientId(state);if(validBlockNames.includes(getBlockName(state,selectedBlockClientId)))return selectedBlockClientId;const multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(state),entityAreaParents=getBlockParentsByBlockName(state,selectedBlockClientId||multiSelectedBlockClientIds[0],validBlockNames);return entityAreaParents?entityAreaParents[entityAreaParents.length-1]:null}),((state,validBlockNames)=>[state.selection.selectionStart.clientId,state.selection.selectionEnd.clientId,validBlockNames]));function wasBlockJustInserted(state,clientId,source){const{lastBlockInserted}=state;return lastBlockInserted.clientIds?.includes(clientId)&&lastBlockInserted.source===source}function isBlockVisible(state,clientId){var _state$blockVisibilit;return null===(_state$blockVisibilit=state.blockVisibility?.[clientId])||void 0===_state$blockVisibilit||_state$blockVisibilit}function getHoveredBlockClientId(state){return state.hoveredBlockClientId}const __unstableGetVisibleBlocks=(0,rememo.A)((state=>{const visibleBlocks=new Set(Object.keys(state.blockVisibility).filter((key=>state.blockVisibility[key])));return 0===visibleBlocks.size?EMPTY_SET:visibleBlocks}),(state=>[state.blockVisibility]));function __unstableHasActiveBlockOverlayActive(state,clientId){if("default"!==getBlockEditingMode(state,clientId))return!1;if(!canEditBlock(state,clientId))return!0;if(isZoomOut(state)){const sectionRootClientId=getSectionRootClientId(state);if(sectionRootClientId){const sectionClientIds=getBlockOrder(state,sectionRootClientId);if(sectionClientIds?.includes(clientId))return!0}else if(clientId&&!getBlockRootClientId(state,clientId))return!0}return!(0,build_module.pN)(getBlockName(state,clientId),"__experimentalDisableBlockOverlay",!1)&&areInnerBlocksControlled(state,clientId)&&!isBlockSelected(state,clientId)&&!hasSelectedInnerBlock(state,clientId,!0)}function __unstableIsWithinBlockOverlay(state,clientId){let parent=state.blocks.parents.get(clientId);for(;parent;){if(__unstableHasActiveBlockOverlayActive(state,parent))return!0;parent=state.blocks.parents.get(parent)}return!1}const getBlockEditingMode=(0,factory.N)((select=>(state,clientId="")=>{if(null===clientId&&(clientId=""),isZoomOut(state)){const sectionRootClientId=getSectionRootClientId(state);if(""===clientId)return sectionRootClientId?"disabled":"contentOnly";if(clientId===sectionRootClientId)return"contentOnly";const sectionsClientIds=getBlockOrder(state,sectionRootClientId);return sectionsClientIds?.includes(clientId)?"contentOnly":"disabled"}if("navigation"===__unstableGetEditorMode(state)){const sectionRootClientId=getSectionRootClientId(state);if(clientId===sectionRootClientId)return"default";if(getBlockOrder(state,sectionRootClientId).includes(clientId))return"contentOnly";const isWithinSectionRoot=function isWithinBlock(state,clientId,parentClientId){let parent=state.blocks.parents.get(clientId);for(;parent&&parent!==parentClientId;)parent=state.blocks.parents.get(parent);return parent===parentClientId}(state,clientId,sectionRootClientId);if(!isWithinSectionRoot)return"disabled";const name=getBlockName(state,clientId),{hasContentRoleAttribute}=unlock(select(build_module.M_));return hasContentRoleAttribute(name)?"contentOnly":"disabled"}const blockEditingMode=state.blockEditingModes.get(clientId);if(blockEditingMode)return blockEditingMode;if(!clientId)return"default";const rootClientId=getBlockRootClientId(state,clientId);if("contentOnly"===getTemplateLock(state,rootClientId)){const name=getBlockName(state,clientId),{hasContentRoleAttribute}=unlock(select(build_module.M_));return hasContentRoleAttribute(name)?"contentOnly":"disabled"}const parentMode=getBlockEditingMode(state,rootClientId);return"contentOnly"===parentMode?"default":parentMode})),isUngroupable=(0,factory.N)((select=>(state,clientId="")=>{const _clientId=clientId||getSelectedBlockClientId(state);if(!_clientId)return!1;const{getGroupingBlockName}=select(build_module.M_),block=getBlock(state,_clientId),groupingBlockName=getGroupingBlockName();return block&&(block.name===groupingBlockName||(0,build_module.E7)(block.name)?.transforms?.ungroup)&&!!block.innerBlocks.length&&canRemoveBlock(state,_clientId)})),isGroupable=(0,factory.N)((select=>(state,clientIds=selectors_EMPTY_ARRAY)=>{const{getGroupingBlockName}=select(build_module.M_),groupingBlockName=getGroupingBlockName(),_clientIds=clientIds?.length?clientIds:getSelectedBlockClientIds(state),rootClientId=_clientIds?.length?getBlockRootClientId(state,_clientIds[0]):void 0;return canInsertBlockType(state,groupingBlockName,rootClientId)&&_clientIds.length&&canRemoveBlocks(state,_clientIds)})),__unstableGetContentLockingParent=(state,clientId)=>((0,deprecated_build_module.A)("wp.data.select( 'core/block-editor' ).__unstableGetContentLockingParent",{since:"6.1",version:"6.7"}),getContentLockingParent(state,clientId));function __unstableGetTemporarilyEditingAsBlocks(state){return(0,deprecated_build_module.A)("wp.data.select( 'core/block-editor' ).__unstableGetTemporarilyEditingAsBlocks",{since:"6.1",version:"6.7"}),getTemporarilyEditingAsBlocks(state)}function __unstableGetTemporarilyEditingFocusModeToRevert(state){return(0,deprecated_build_module.A)("wp.data.select( 'core/block-editor' ).__unstableGetTemporarilyEditingFocusModeToRevert",{since:"6.5",version:"6.7"}),getTemporarilyEditingFocusModeToRevert(state)}var a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js");const privateSettings=["inserterMediaCategories","blockInspectorAnimation"];function __experimentalUpdateSettings(settings,{stripExperimentalSettings=!1,reset=!1}={}){let incomingSettings=settings;Object.hasOwn(incomingSettings,"__unstableIsPreviewMode")&&((0,deprecated_build_module.A)("__unstableIsPreviewMode argument in wp.data.dispatch('core/block-editor').updateSettings",{since:"6.8",alternative:"isPreviewMode"}),incomingSettings={...incomingSettings},incomingSettings.isPreviewMode=incomingSettings.__unstableIsPreviewMode,delete incomingSettings.__unstableIsPreviewMode);let cleanSettings=incomingSettings;if(stripExperimentalSettings&&"web"===platform.A.OS){cleanSettings={};for(const key in incomingSettings)privateSettings.includes(key)||(cleanSettings[key]=incomingSettings[key])}return{type:"UPDATE_SETTINGS",settings:cleanSettings,reset}}function hideBlockInterface(){return{type:"HIDE_BLOCK_INTERFACE"}}function showBlockInterface(){return{type:"SHOW_BLOCK_INTERFACE"}}const privateRemoveBlocks=(clientIds,selectPrevious=!0,forceRemove=!1)=>({select,dispatch,registry})=>{if(!clientIds||!clientIds.length)return;var maybeArray;maybeArray=clientIds,clientIds=Array.isArray(maybeArray)?maybeArray:[maybeArray];if(!select.canRemoveBlocks(clientIds))return;const rules=!forceRemove&&select.getBlockRemovalRules();if(rules){function flattenBlocks(blocks){const result=[],stack=[...blocks];for(;stack.length;){const{innerBlocks,...block}=stack.shift();stack.push(...innerBlocks),result.push(block)}return result}const flattenedBlocks=flattenBlocks(clientIds.map(select.getBlock));let message;for(const rule of rules)if(message=rule.callback(flattenedBlocks),message)return void dispatch(displayBlockRemovalPrompt(clientIds,selectPrevious,message))}selectPrevious&&dispatch.selectPreviousBlock(clientIds[0],selectPrevious),registry.batch((()=>{dispatch({type:"REMOVE_BLOCKS",clientIds}),dispatch(ensureDefaultBlock())}))},ensureDefaultBlock=()=>({select,dispatch})=>{if(select.getBlockCount()>0)return;const{__unstableHasCustomAppender}=select.getSettings();__unstableHasCustomAppender||dispatch.insertDefaultBlock()};function displayBlockRemovalPrompt(clientIds,selectPrevious,message){return{type:"DISPLAY_BLOCK_REMOVAL_PROMPT",clientIds,selectPrevious,message}}function clearBlockRemovalPrompt(){return{type:"CLEAR_BLOCK_REMOVAL_PROMPT"}}function setBlockRemovalRules(rules=!1){return{type:"SET_BLOCK_REMOVAL_RULES",rules}}function setOpenedBlockSettingsMenu(clientId){return{type:"SET_OPENED_BLOCK_SETTINGS_MENU",clientId}}function setStyleOverride(id,style){return{type:"SET_STYLE_OVERRIDE",id,style}}function deleteStyleOverride(id){return{type:"DELETE_STYLE_OVERRIDE",id}}function setLastFocus(lastFocus=null){return{type:"LAST_FOCUS",lastFocus}}function stopEditingAsBlocks(clientId){return({select,dispatch,registry})=>{const focusModeToRevert=unlock(registry.select(store_store)).getTemporarilyEditingFocusModeToRevert();dispatch.__unstableMarkNextChangeAsNotPersistent(),dispatch.updateBlockAttributes(clientId,{templateLock:"contentOnly"}),dispatch.updateBlockListSettings(clientId,{...select.getBlockListSettings(clientId),templateLock:"contentOnly"}),dispatch.updateSettings({focusMode:focusModeToRevert}),dispatch.__unstableSetTemporarilyEditingAsBlocks()}}function startDragging(){return{type:"START_DRAGGING"}}function stopDragging(){return{type:"STOP_DRAGGING"}}function expandBlock(clientId){return{type:"SET_BLOCK_EXPANDED_IN_LIST_VIEW",clientId}}function setInsertionPoint(value){return{type:"SET_INSERTION_POINT",value}}const modifyContentLockBlock=clientId=>({select,dispatch})=>{dispatch.selectBlock(clientId),dispatch.__unstableMarkNextChangeAsNotPersistent(),dispatch.updateBlockAttributes(clientId,{templateLock:void 0}),dispatch.updateBlockListSettings(clientId,{...select.getBlockListSettings(clientId),templateLock:!1});const focusModeToRevert=select.getSettings().focusMode;dispatch.updateSettings({focusMode:!0}),dispatch.__unstableSetTemporarilyEditingAsBlocks(clientId,focusModeToRevert)},setZoomLevel=(zoom=100)=>({select,dispatch})=>{if(100!==zoom){const firstSelectedClientId=select.getBlockSelectionStart(),sectionRootClientId=select.getSectionRootClientId();if(firstSelectedClientId){let sectionClientId;if(sectionRootClientId){const sectionClientIds=select.getBlockOrder(sectionRootClientId);sectionClientId=sectionClientIds?.includes(firstSelectedClientId)?firstSelectedClientId:select.getBlockParents(firstSelectedClientId).find((parent=>sectionClientIds.includes(parent)))}else sectionClientId=select.getBlockHierarchyRootClientId(firstSelectedClientId);sectionClientId?dispatch.selectBlock(sectionClientId):dispatch.clearSelectedBlock(),(0,a11y_build_module.L)((0,i18n_build_module.__)("You are currently in zoom-out mode."))}}dispatch({type:"SET_ZOOM_LEVEL",zoom})};function resetZoomLevel(){return{type:"RESET_ZOOM_LEVEL"}}var notices_build_module=__webpack_require__("./packages/notices/build-module/index.js");const START_OF_SELECTED_AREA="";function retrieveSelectedAttribute(blockAttributes){if(blockAttributes)return Object.keys(blockAttributes).find((name=>{const value=blockAttributes[name];return("string"==typeof value||value instanceof rich_text_build_module.EF)&&-1!==value.toString().indexOf(START_OF_SELECTED_AREA)}))}function findRichTextAttributeKey(blockType){for(const[key,value]of Object.entries(blockType.attributes))if("rich-text"===value.source||"html"===value.source)return key}const actions_castArray=maybeArray=>Array.isArray(maybeArray)?maybeArray:[maybeArray],resetBlocks=blocks=>({dispatch})=>{dispatch({type:"RESET_BLOCKS",blocks}),dispatch(validateBlocksToTemplate(blocks))},validateBlocksToTemplate=blocks=>({select,dispatch})=>{const template=select.getTemplate(),templateLock=select.getTemplateLock(),isBlocksValidToTemplate=!template||"all"!==templateLock||(0,build_module.V6)(blocks,template);if(isBlocksValidToTemplate!==select.isValidTemplate())return dispatch.setTemplateValidity(isBlocksValidToTemplate),isBlocksValidToTemplate};function resetSelection(selectionStart,selectionEnd,initialPosition){return{type:"RESET_SELECTION",selectionStart,selectionEnd,initialPosition}}function receiveBlocks(blocks){return(0,deprecated_build_module.A)('wp.data.dispatch( "core/block-editor" ).receiveBlocks',{since:"5.9",alternative:"resetBlocks or insertBlocks"}),{type:"RECEIVE_BLOCKS",blocks}}function updateBlockAttributes(clientIds,attributes,uniqueByBlock=!1){return{type:"UPDATE_BLOCK_ATTRIBUTES",clientIds:actions_castArray(clientIds),attributes,uniqueByBlock}}function updateBlock(clientId,updates){return{type:"UPDATE_BLOCK",clientId,updates}}function selectBlock(clientId,initialPosition=0){return{type:"SELECT_BLOCK",initialPosition,clientId}}function hoverBlock(clientId){return{type:"HOVER_BLOCK",clientId}}const selectPreviousBlock=(clientId,fallbackToParent=!1)=>({select,dispatch})=>{const previousBlockClientId=select.getPreviousBlockClientId(clientId);if(previousBlockClientId)dispatch.selectBlock(previousBlockClientId,-1);else if(fallbackToParent){const firstParentClientId=select.getBlockRootClientId(clientId);firstParentClientId&&dispatch.selectBlock(firstParentClientId,-1)}},selectNextBlock=clientId=>({select,dispatch})=>{const nextBlockClientId=select.getNextBlockClientId(clientId);nextBlockClientId&&dispatch.selectBlock(nextBlockClientId)};function startMultiSelect(){return{type:"START_MULTI_SELECT"}}function stopMultiSelect(){return{type:"STOP_MULTI_SELECT"}}const multiSelect=(start,end,__experimentalInitialPosition=0)=>({select,dispatch})=>{if(select.getBlockRootClientId(start)!==select.getBlockRootClientId(end))return;dispatch({type:"MULTI_SELECT",start,end,initialPosition:__experimentalInitialPosition});const blockCount=select.getSelectedBlockCount();(0,a11y_build_module.L)((0,i18n_build_module.nv)((0,i18n_build_module._n)("%s block selected.","%s blocks selected.",blockCount),blockCount),"assertive")};function clearSelectedBlock(){return{type:"CLEAR_SELECTED_BLOCK"}}function toggleSelection(isSelectionEnabled=!0){return{type:"TOGGLE_SELECTION",isSelectionEnabled}}const replaceBlocks=(clientIds,blocks,indexToSelect,initialPosition=0,meta)=>({select,dispatch,registry})=>{clientIds=actions_castArray(clientIds),blocks=actions_castArray(blocks);const rootClientId=select.getBlockRootClientId(clientIds[0]);for(let index=0;index<blocks.length;index++){const block=blocks[index];if(!select.canInsertBlockType(block.name,rootClientId))return}registry.batch((()=>{dispatch({type:"REPLACE_BLOCKS",clientIds,blocks,time:Date.now(),indexToSelect,initialPosition,meta}),dispatch.ensureDefaultBlock()}))};function replaceBlock(clientId,block){return replaceBlocks(clientId,block)}const createOnMove=type=>(clientIds,rootClientId)=>({select,dispatch})=>{select.canMoveBlocks(clientIds)&&dispatch({type,clientIds:actions_castArray(clientIds),rootClientId})},moveBlocksDown=createOnMove("MOVE_BLOCKS_DOWN"),moveBlocksUp=createOnMove("MOVE_BLOCKS_UP"),moveBlocksToPosition=(clientIds,fromRootClientId="",toRootClientId="",index)=>({select,dispatch})=>{if(select.canMoveBlocks(clientIds)){if(fromRootClientId!==toRootClientId){if(!select.canRemoveBlocks(clientIds))return;if(!select.canInsertBlocks(clientIds,toRootClientId))return}dispatch({type:"MOVE_BLOCKS_TO_POSITION",fromRootClientId,toRootClientId,clientIds,index})}};function moveBlockToPosition(clientId,fromRootClientId="",toRootClientId="",index){return moveBlocksToPosition([clientId],fromRootClientId,toRootClientId,index)}function insertBlock(block,index,rootClientId,updateSelection,meta){return insertBlocks([block],index,rootClientId,updateSelection,0,meta)}const insertBlocks=(blocks,index,rootClientId,updateSelection=!0,initialPosition=0,meta)=>({select,dispatch})=>{null!==initialPosition&&"object"==typeof initialPosition&&(meta=initialPosition,initialPosition=0,(0,deprecated_build_module.A)("meta argument in wp.data.dispatch('core/block-editor')",{since:"5.8",hint:"The meta argument is now the 6th argument of the function"})),blocks=actions_castArray(blocks);const allowedBlocks=[];for(const block of blocks){select.canInsertBlockType(block.name,rootClientId)&&allowedBlocks.push(block)}allowedBlocks.length&&dispatch({type:"INSERT_BLOCKS",blocks:allowedBlocks,index,rootClientId,time:Date.now(),updateSelection,initialPosition:updateSelection?initialPosition:null,meta})};function showInsertionPoint(rootClientId,index,__unstableOptions={}){const{__unstableWithInserter,operation,nearestSide}=__unstableOptions;return{type:"SHOW_INSERTION_POINT",rootClientId,index,__unstableWithInserter,operation,nearestSide}}const hideInsertionPoint=()=>({select,dispatch})=>{select.isBlockInsertionPointVisible()&&dispatch({type:"HIDE_INSERTION_POINT"})};function setTemplateValidity(isValid){return{type:"SET_TEMPLATE_VALIDITY",isValid}}const synchronizeTemplate=()=>({select,dispatch})=>{dispatch({type:"SYNCHRONIZE_TEMPLATE"});const blocks=select.getBlocks(),template=select.getTemplate(),updatedBlockList=(0,build_module.Nk)(blocks,template);dispatch.resetBlocks(updatedBlockList)},__unstableDeleteSelection=isForward=>({registry,select,dispatch})=>{const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd();if(selectionAnchor.clientId===selectionFocus.clientId)return;if(!selectionAnchor.attributeKey||!selectionFocus.attributeKey||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return!1;const anchorRootClientId=select.getBlockRootClientId(selectionAnchor.clientId);if(anchorRootClientId!==select.getBlockRootClientId(selectionFocus.clientId))return;const blockOrder=select.getBlockOrder(anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const targetSelection=isForward?selectionEnd:selectionStart,targetBlock=select.getBlock(targetSelection.clientId),targetBlockType=(0,build_module.E7)(targetBlock.name);if(!targetBlockType.merge)return;const selectionA=selectionStart,selectionB=selectionEnd,blockA=select.getBlock(selectionA.clientId),blockB=select.getBlock(selectionB.clientId),htmlA=blockA.attributes[selectionA.attributeKey],htmlB=blockB.attributes[selectionB.attributeKey];let valueA=(0,rich_text_build_module.vt)({html:htmlA}),valueB=(0,rich_text_build_module.vt)({html:htmlB});valueA=(0,rich_text_build_module.TF)(valueA,selectionA.offset,valueA.text.length),valueB=(0,rich_text_build_module.Yr)(valueB,START_OF_SELECTED_AREA,0,selectionB.offset);const cloneA=(0,build_module.JB)(blockA,{[selectionA.attributeKey]:(0,rich_text_build_module.Ky)({value:valueA})}),cloneB=(0,build_module.JB)(blockB,{[selectionB.attributeKey]:(0,rich_text_build_module.Ky)({value:valueB})}),followingBlock=isForward?cloneA:cloneB,blocksWithTheSameType=blockA.name===blockB.name?[followingBlock]:(0,build_module.bh)(followingBlock,targetBlockType.name);if(!blocksWithTheSameType||!blocksWithTheSameType.length)return;let updatedAttributes;if(isForward){const blockToMerge=blocksWithTheSameType.pop();updatedAttributes=targetBlockType.merge(blockToMerge.attributes,cloneB.attributes)}else{const blockToMerge=blocksWithTheSameType.shift();updatedAttributes=targetBlockType.merge(cloneA.attributes,blockToMerge.attributes)}const newAttributeKey=retrieveSelectedAttribute(updatedAttributes),convertedHtml=updatedAttributes[newAttributeKey],convertedValue=(0,rich_text_build_module.vt)({html:convertedHtml}),newOffset=convertedValue.text.indexOf(START_OF_SELECTED_AREA),newValue=(0,rich_text_build_module.TF)(convertedValue,newOffset,newOffset+1),newHtml=(0,rich_text_build_module.Ky)({value:newValue});updatedAttributes[newAttributeKey]=newHtml;const selectedBlockClientIds=select.getSelectedBlockClientIds(),replacement=[...isForward?blocksWithTheSameType:[],{...targetBlock,attributes:{...targetBlock.attributes,...updatedAttributes}},...isForward?[]:blocksWithTheSameType];registry.batch((()=>{dispatch.selectionChange(targetBlock.clientId,newAttributeKey,newOffset,newOffset),dispatch.replaceBlocks(selectedBlockClientIds,replacement,0,select.getSelectedBlocksInitialCaretPosition())}))},__unstableSplitSelection=(blocks=[])=>({registry,select,dispatch})=>{const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd(),anchorRootClientId=select.getBlockRootClientId(selectionAnchor.clientId),focusRootClientId=select.getBlockRootClientId(selectionFocus.clientId);if(anchorRootClientId!==focusRootClientId)return;const blockOrder=select.getBlockOrder(anchorRootClientId);let selectionStart,selectionEnd;blockOrder.indexOf(selectionAnchor.clientId)>blockOrder.indexOf(selectionFocus.clientId)?(selectionStart=selectionFocus,selectionEnd=selectionAnchor):(selectionStart=selectionAnchor,selectionEnd=selectionFocus);const selectionA=selectionStart,selectionB=selectionEnd,blockA=select.getBlock(selectionA.clientId),blockB=select.getBlock(selectionB.clientId),blockAType=(0,build_module.E7)(blockA.name),blockBType=(0,build_module.E7)(blockB.name),attributeKeyA="string"==typeof selectionA.attributeKey?selectionA.attributeKey:findRichTextAttributeKey(blockAType),attributeKeyB="string"==typeof selectionB.attributeKey?selectionB.attributeKey:findRichTextAttributeKey(blockBType),blockAttributes=select.getBlockAttributes(selectionA.clientId),bindings=blockAttributes?.metadata?.bindings;if(bindings?.[attributeKeyA]){if(blocks.length){const{createWarningNotice}=registry.dispatch(notices_build_module.M);return void createWarningNotice((0,i18n_build_module.__)("Blocks can't be inserted into other blocks with bindings"),{type:"snackbar"})}return void dispatch.insertAfterBlock(selectionA.clientId)}if(!attributeKeyA||!attributeKeyB||void 0===selectionAnchor.offset||void 0===selectionFocus.offset)return;if(selectionA.clientId===selectionB.clientId&&attributeKeyA===attributeKeyB&&selectionA.offset===selectionB.offset)if(blocks.length){if((0,build_module.Xw)(blockA))return void dispatch.replaceBlocks([selectionA.clientId],blocks,blocks.length-1,-1)}else if(!select.getBlockOrder(selectionA.clientId).length){function createEmpty(){const defaultBlockName=(0,build_module.K$)();return select.canInsertBlockType(defaultBlockName,anchorRootClientId)?(0,build_module.Wv)(defaultBlockName):(0,build_module.Wv)(select.getBlockName(selectionA.clientId))}const length=blockAttributes[attributeKeyA].length;if(0===selectionA.offset&&length)return void dispatch.insertBlocks([createEmpty()],select.getBlockIndex(selectionA.clientId),anchorRootClientId,!1);if(selectionA.offset===length)return void dispatch.insertBlocks([createEmpty()],select.getBlockIndex(selectionA.clientId)+1,anchorRootClientId)}const htmlA=blockA.attributes[attributeKeyA],htmlB=blockB.attributes[attributeKeyB];let valueA=(0,rich_text_build_module.vt)({html:htmlA}),valueB=(0,rich_text_build_module.vt)({html:htmlB});valueA=(0,rich_text_build_module.TF)(valueA,selectionA.offset,valueA.text.length),valueB=(0,rich_text_build_module.TF)(valueB,0,selectionB.offset);let head={...blockA,innerBlocks:blockA.clientId===blockB.clientId?[]:blockA.innerBlocks,attributes:{...blockA.attributes,[attributeKeyA]:(0,rich_text_build_module.Ky)({value:valueA})}},tail={...blockB,clientId:blockA.clientId===blockB.clientId?(0,build_module.Wv)(blockB.name).clientId:blockB.clientId,attributes:{...blockB.attributes,[attributeKeyB]:(0,rich_text_build_module.Ky)({value:valueB})}};const defaultBlockName=(0,build_module.K$)();if(blockA.clientId===blockB.clientId&&defaultBlockName&&tail.name!==defaultBlockName&&select.canInsertBlockType(defaultBlockName,anchorRootClientId)){const switched=(0,build_module.bh)(tail,defaultBlockName);1===switched?.length&&(tail=switched[0])}if(!blocks.length)return void dispatch.replaceBlocks(select.getSelectedBlockClientIds(),[head,tail]);let selection;const output=[],clonedBlocks=[...blocks],firstBlock=clonedBlocks.shift(),headType=(0,build_module.E7)(head.name),firstBlocks=headType.merge&&firstBlock.name===headType.name?[firstBlock]:(0,build_module.bh)(firstBlock,headType.name);if(firstBlocks?.length){const first=firstBlocks.shift();head={...head,attributes:{...head.attributes,...headType.merge(head.attributes,first.attributes)}},output.push(head),selection={clientId:head.clientId,attributeKey:attributeKeyA,offset:(0,rich_text_build_module.vt)({html:head.attributes[attributeKeyA]}).text.length},clonedBlocks.unshift(...firstBlocks)}else(0,build_module.C5)(head)||output.push(head),output.push(firstBlock);const lastBlock=clonedBlocks.pop(),tailType=(0,build_module.E7)(tail.name);if(clonedBlocks.length&&output.push(...clonedBlocks),lastBlock){const lastBlocks=tailType.merge&&tailType.name===lastBlock.name?[lastBlock]:(0,build_module.bh)(lastBlock,tailType.name);if(lastBlocks?.length){const last=lastBlocks.pop();output.push({...tail,attributes:{...tail.attributes,...tailType.merge(last.attributes,tail.attributes)}}),output.push(...lastBlocks),selection={clientId:tail.clientId,attributeKey:attributeKeyB,offset:(0,rich_text_build_module.vt)({html:last.attributes[attributeKeyB]}).text.length}}else output.push(lastBlock),(0,build_module.C5)(tail)||output.push(tail)}else(0,build_module.C5)(tail)||output.push(tail);registry.batch((()=>{dispatch.replaceBlocks(select.getSelectedBlockClientIds(),output,output.length-1,0),selection&&dispatch.selectionChange(selection.clientId,selection.attributeKey,selection.offset,selection.offset)}))},__unstableExpandSelection=()=>({select,dispatch})=>{const selectionAnchor=select.getSelectionStart(),selectionFocus=select.getSelectionEnd();dispatch.selectionChange({start:{clientId:selectionAnchor.clientId},end:{clientId:selectionFocus.clientId}})},mergeBlocks=(firstBlockClientId,secondBlockClientId)=>({registry,select,dispatch})=>{const clientIdA=firstBlockClientId,clientIdB=secondBlockClientId,blockA=select.getBlock(clientIdA),blockAType=(0,build_module.E7)(blockA.name);if(!blockAType)return;const blockB=select.getBlock(clientIdB);if(!blockAType.merge&&(0,build_module.bI)(blockA.name,"__experimentalOnMerge")){const blocksWithTheSameType=(0,build_module.bh)(blockB,blockAType.name);if(1!==blocksWithTheSameType?.length)return void dispatch.selectBlock(blockA.clientId);const[blockWithSameType]=blocksWithTheSameType;return blockWithSameType.innerBlocks.length<1?void dispatch.selectBlock(blockA.clientId):void registry.batch((()=>{dispatch.insertBlocks(blockWithSameType.innerBlocks,void 0,clientIdA),dispatch.removeBlock(clientIdB),dispatch.selectBlock(blockWithSameType.innerBlocks[0].clientId);const nextBlockClientId=select.getNextBlockClientId(clientIdA);if(nextBlockClientId&&select.getBlockName(clientIdA)===select.getBlockName(nextBlockClientId)){const rootAttributes=select.getBlockAttributes(clientIdA),previousRootAttributes=select.getBlockAttributes(nextBlockClientId);Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key]))&&(dispatch.moveBlocksToPosition(select.getBlockOrder(nextBlockClientId),nextBlockClientId,clientIdA),dispatch.removeBlock(nextBlockClientId,!1))}}))}if((0,build_module.Xw)(blockA))return void dispatch.removeBlock(clientIdA,select.isBlockSelected(clientIdA));if((0,build_module.Xw)(blockB))return void dispatch.removeBlock(clientIdB,select.isBlockSelected(clientIdB));if(!blockAType.merge)return void dispatch.selectBlock(blockA.clientId);const blockBType=(0,build_module.E7)(blockB.name),{clientId,attributeKey,offset}=select.getSelectionStart(),attributeDefinition=(clientId===clientIdA?blockAType:blockBType).attributes[attributeKey],canRestoreTextSelection=(clientId===clientIdA||clientId===clientIdB)&&void 0!==attributeKey&&void 0!==offset&&!!attributeDefinition;attributeDefinition||("number"==typeof attributeKey?window.console.error("RichText needs an identifier prop that is the block attribute key of the attribute it controls. Its type is expected to be a string, but was "+typeof attributeKey):window.console.error("The RichText identifier prop does not match any attributes defined by the block."));const cloneA=(0,build_module.JB)(blockA),cloneB=(0,build_module.JB)(blockB);if(canRestoreTextSelection){const selectedBlock=clientId===clientIdA?cloneA:cloneB,html=selectedBlock.attributes[attributeKey],value=(0,rich_text_build_module.Yr)((0,rich_text_build_module.vt)({html}),START_OF_SELECTED_AREA,offset,offset);selectedBlock.attributes[attributeKey]=(0,rich_text_build_module.Ky)({value})}const blocksWithTheSameType=blockA.name===blockB.name?[cloneB]:(0,build_module.bh)(cloneB,blockA.name);if(!blocksWithTheSameType||!blocksWithTheSameType.length)return;const updatedAttributes=blockAType.merge(cloneA.attributes,blocksWithTheSameType[0].attributes);if(canRestoreTextSelection){const newAttributeKey=retrieveSelectedAttribute(updatedAttributes),convertedHtml=updatedAttributes[newAttributeKey],convertedValue=(0,rich_text_build_module.vt)({html:convertedHtml}),newOffset=convertedValue.text.indexOf(START_OF_SELECTED_AREA),newValue=(0,rich_text_build_module.TF)(convertedValue,newOffset,newOffset+1),newHtml=(0,rich_text_build_module.Ky)({value:newValue});updatedAttributes[newAttributeKey]=newHtml,dispatch.selectionChange(blockA.clientId,newAttributeKey,newOffset,newOffset)}dispatch.replaceBlocks([blockA.clientId,blockB.clientId],[{...blockA,attributes:{...blockA.attributes,...updatedAttributes}},...blocksWithTheSameType.slice(1)],0)},removeBlocks=(clientIds,selectPrevious=!0)=>privateRemoveBlocks(clientIds,selectPrevious);function removeBlock(clientId,selectPrevious){return removeBlocks([clientId],selectPrevious)}function replaceInnerBlocks(rootClientId,blocks,updateSelection=!1,initialPosition=0){return{type:"REPLACE_INNER_BLOCKS",rootClientId,blocks,updateSelection,initialPosition:updateSelection?initialPosition:null,time:Date.now()}}function toggleBlockMode(clientId){return{type:"TOGGLE_BLOCK_MODE",clientId}}function startTyping(){return{type:"START_TYPING"}}function stopTyping(){return{type:"STOP_TYPING"}}function startDraggingBlocks(clientIds=[]){return{type:"START_DRAGGING_BLOCKS",clientIds}}function stopDraggingBlocks(){return{type:"STOP_DRAGGING_BLOCKS"}}function enterFormattedText(){return(0,deprecated_build_module.A)('wp.data.dispatch( "core/block-editor" ).enterFormattedText',{since:"6.1",version:"6.3"}),{type:"DO_NOTHING"}}function exitFormattedText(){return(0,deprecated_build_module.A)('wp.data.dispatch( "core/block-editor" ).exitFormattedText',{since:"6.1",version:"6.3"}),{type:"DO_NOTHING"}}function selectionChange(clientId,attributeKey,startOffset,endOffset){return"string"==typeof clientId?{type:"SELECTION_CHANGE",clientId,attributeKey,startOffset,endOffset}:{type:"SELECTION_CHANGE",...clientId}}const insertDefaultBlock=(attributes,rootClientId,index)=>({dispatch})=>{const defaultBlockName=(0,build_module.K$)();if(!defaultBlockName)return;const block=(0,build_module.Wv)(defaultBlockName,attributes);return dispatch.insertBlock(block,index,rootClientId)};function updateBlockListSettings(clientId,settings){return{type:"UPDATE_BLOCK_LIST_SETTINGS",clientId,settings}}function updateSettings(settings){return __experimentalUpdateSettings(settings,{stripExperimentalSettings:!0})}function __unstableSaveReusableBlock(id,updatedId){return{type:"SAVE_REUSABLE_BLOCK_SUCCESS",id,updatedId}}function __unstableMarkLastChangeAsPersistent(){return{type:"MARK_LAST_CHANGE_AS_PERSISTENT"}}function __unstableMarkNextChangeAsNotPersistent(){return{type:"MARK_NEXT_CHANGE_AS_NOT_PERSISTENT"}}const __unstableMarkAutomaticChange=()=>({dispatch})=>{dispatch({type:"MARK_AUTOMATIC_CHANGE"});const{requestIdleCallback=cb=>setTimeout(cb,100)}=window;requestIdleCallback((()=>{dispatch({type:"MARK_AUTOMATIC_CHANGE_FINAL"})}))},setNavigationMode=(isNavigationMode=!0)=>({dispatch})=>{dispatch.__unstableSetEditorMode(isNavigationMode?"navigation":"edit")},__unstableSetEditorMode=mode=>({registry})=>{registry.dispatch(store.M).set("core","editorTool",mode),"navigation"===mode?(0,a11y_build_module.L)((0,i18n_build_module.__)("You are currently in Write mode.")):"edit"===mode&&(0,a11y_build_module.L)((0,i18n_build_module.__)("You are currently in Design mode."))};function setBlockMovingClientId(){return(0,deprecated_build_module.A)('wp.data.dispatch( "core/block-editor" ).setBlockMovingClientId',{since:"6.7",hint:"Block moving mode feature has been removed"}),{type:"DO_NOTHING"}}const duplicateBlocks=(clientIds,updateSelection=!0)=>({select,dispatch})=>{if(!clientIds||!clientIds.length)return;const blocks=select.getBlocksByClientId(clientIds);if(blocks.some((block=>!block)))return;const blockNames=blocks.map((block=>block.name));if(blockNames.some((blockName=>!(0,build_module.pN)(blockName,"multiple",!0))))return;const rootClientId=select.getBlockRootClientId(clientIds[0]),clientIdsArray=actions_castArray(clientIds),lastSelectedIndex=select.getBlockIndex(clientIdsArray[clientIdsArray.length-1]),clonedBlocks=blocks.map((block=>(0,build_module.Eb)(block)));return dispatch.insertBlocks(clonedBlocks,lastSelectedIndex+1,rootClientId,updateSelection),clonedBlocks.length>1&&updateSelection&&dispatch.multiSelect(clonedBlocks[0].clientId,clonedBlocks[clonedBlocks.length-1].clientId),clonedBlocks.map((block=>block.clientId))},insertBeforeBlock=clientId=>({select,dispatch})=>{if(!clientId)return;const rootClientId=select.getBlockRootClientId(clientId);if(select.getTemplateLock(rootClientId))return;const blockIndex=select.getBlockIndex(clientId),directInsertBlock=rootClientId?select.getDirectInsertBlock(rootClientId):null;if(!directInsertBlock)return dispatch.insertDefaultBlock({},rootClientId,blockIndex);const copiedAttributes={};if(directInsertBlock.attributesToCopy){const attributes=select.getBlockAttributes(clientId);directInsertBlock.attributesToCopy.forEach((key=>{attributes[key]&&(copiedAttributes[key]=attributes[key])}))}const block=(0,build_module.Wv)(directInsertBlock.name,{...directInsertBlock.attributes,...copiedAttributes});return dispatch.insertBlock(block,blockIndex,rootClientId)},insertAfterBlock=clientId=>({select,dispatch})=>{if(!clientId)return;const rootClientId=select.getBlockRootClientId(clientId);if(select.getTemplateLock(rootClientId))return;const blockIndex=select.getBlockIndex(clientId),directInsertBlock=rootClientId?select.getDirectInsertBlock(rootClientId):null;if(!directInsertBlock)return dispatch.insertDefaultBlock({},rootClientId,blockIndex+1);const copiedAttributes={};if(directInsertBlock.attributesToCopy){const attributes=select.getBlockAttributes(clientId);directInsertBlock.attributesToCopy.forEach((key=>{attributes[key]&&(copiedAttributes[key]=attributes[key])}))}const block=(0,build_module.Wv)(directInsertBlock.name,{...directInsertBlock.attributes,...copiedAttributes});return dispatch.insertBlock(block,blockIndex+1,rootClientId)};function toggleBlockHighlight(clientId,isHighlighted){return{type:"TOGGLE_BLOCK_HIGHLIGHT",clientId,isHighlighted}}const flashBlock=clientId=>async({dispatch})=>{dispatch(toggleBlockHighlight(clientId,!0)),await new Promise((resolve=>setTimeout(resolve,150))),dispatch(toggleBlockHighlight(clientId,!1))};function setHasControlledInnerBlocks(clientId,hasControlledInnerBlocks){return{type:"SET_HAS_CONTROLLED_INNER_BLOCKS",hasControlledInnerBlocks,clientId}}function setBlockVisibility(updates){return{type:"SET_BLOCK_VISIBILITY",updates}}function __unstableSetTemporarilyEditingAsBlocks(temporarilyEditingAsBlocks,focusModeToRevert){return{type:"SET_TEMPORARILY_EDITING_AS_BLOCKS",temporarilyEditingAsBlocks,focusModeToRevert}}const registerInserterMediaCategory=category=>({select,dispatch})=>{if(!category||"object"!=typeof category)return void console.error("Category should be an `InserterMediaCategory` object.");if(!category.name)return void console.error("Category should have a `name` that should be unique among all media categories.");if(!category.labels?.name)return void console.error("Category should have a `labels.name`.");if(!["image","audio","video"].includes(category.mediaType))return void console.error("Category should have `mediaType` property that is one of `image|audio|video`.");if(!category.fetch||"function"!=typeof category.fetch)return void console.error("Category should have a `fetch` function defined with the following signature `(InserterMediaRequest) => Promise<InserterMediaItem[]>`.");const registeredInserterMediaCategories=select.getRegisteredInserterMediaCategories();registeredInserterMediaCategories.some((({name})=>name===category.name))?console.error(`A category is already registered with the same name: "${category.name}".`):registeredInserterMediaCategories.some((({labels:{name}={}})=>name===category.labels?.name))?console.error(`A category is already registered with the same labels.name: "${category.labels.name}".`):dispatch({type:"REGISTER_INSERTER_MEDIA_CATEGORY",category:{...category,isExternalResource:!0}})};function setBlockEditingMode(clientId="",mode){return{type:"SET_BLOCK_EDITING_MODE",clientId,mode}}function unsetBlockEditingMode(clientId=""){return{type:"UNSET_BLOCK_EDITING_MODE",clientId}}const storeConfig={reducer,selectors:selectors_namespaceObject,actions:actions_namespaceObject},store_store=(0,redux_store.A)(STORE_NAME,{...storeConfig,persist:["preferences"]}),registeredStore=(0,data_build_module.ti)(STORE_NAME,{...storeConfig,persist:["preferences"]});function use_settings_useSettings(...paths){const{clientId=null}=useBlockEditContext();return(0,use_select.A)((select=>unlock(select(store_store)).getBlockSettings(clientId,...paths)),[clientId,...paths])}unlock(registeredStore).registerPrivateActions(private_actions_namespaceObject),unlock(registeredStore).registerPrivateSelectors(private_selectors_namespaceObject),unlock(store_store).registerPrivateActions(private_actions_namespaceObject),unlock(store_store).registerPrivateSelectors(private_selectors_namespaceObject);var use_viewport_match=__webpack_require__("./packages/compose/build-module/hooks/use-viewport-match/index.js"),utils=__webpack_require__("./packages/style-engine/build-module/styles/utils.js");const DEFAULT_MAXIMUM_VIEWPORT_WIDTH="1600px",DEFAULT_MINIMUM_VIEWPORT_WIDTH="320px",DEFAULT_SCALE_FACTOR=1,DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN=.25,DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX=.75,DEFAULT_MINIMUM_FONT_SIZE_LIMIT="14px";function getComputedFluidTypographyValue({minimumFontSize,maximumFontSize,fontSize,minimumViewportWidth=DEFAULT_MINIMUM_VIEWPORT_WIDTH,maximumViewportWidth=DEFAULT_MAXIMUM_VIEWPORT_WIDTH,scaleFactor=DEFAULT_SCALE_FACTOR,minimumFontSizeLimit}){if(minimumFontSizeLimit=getTypographyValueAndUnit(minimumFontSizeLimit)?minimumFontSizeLimit:DEFAULT_MINIMUM_FONT_SIZE_LIMIT,fontSize){const fontSizeParsed=getTypographyValueAndUnit(fontSize);if(!fontSizeParsed?.unit)return null;const minimumFontSizeLimitParsed=getTypographyValueAndUnit(minimumFontSizeLimit,{coerceTo:fontSizeParsed.unit});if(minimumFontSizeLimitParsed?.value&&!minimumFontSize&&!maximumFontSize&&fontSizeParsed?.value<=minimumFontSizeLimitParsed?.value)return null;if(maximumFontSize||(maximumFontSize=`${fontSizeParsed.value}${fontSizeParsed.unit}`),!minimumFontSize){const fontSizeValueInPx="px"===fontSizeParsed.unit?fontSizeParsed.value:16*fontSizeParsed.value,minimumFontSizeFactor=Math.min(Math.max(1-.075*Math.log2(fontSizeValueInPx),DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN),DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX),calculatedMinimumFontSize=roundToPrecision(fontSizeParsed.value*minimumFontSizeFactor,3);minimumFontSize=minimumFontSizeLimitParsed?.value&&calculatedMinimumFontSize<minimumFontSizeLimitParsed?.value?`${minimumFontSizeLimitParsed.value}${minimumFontSizeLimitParsed.unit}`:`${calculatedMinimumFontSize}${fontSizeParsed.unit}`}}const minimumFontSizeParsed=getTypographyValueAndUnit(minimumFontSize),fontSizeUnit=minimumFontSizeParsed?.unit||"rem",maximumFontSizeParsed=getTypographyValueAndUnit(maximumFontSize,{coerceTo:fontSizeUnit});if(!minimumFontSizeParsed||!maximumFontSizeParsed)return null;const minimumFontSizeRem=getTypographyValueAndUnit(minimumFontSize,{coerceTo:"rem"}),maximumViewportWidthParsed=getTypographyValueAndUnit(maximumViewportWidth,{coerceTo:fontSizeUnit}),minimumViewportWidthParsed=getTypographyValueAndUnit(minimumViewportWidth,{coerceTo:fontSizeUnit});if(!maximumViewportWidthParsed||!minimumViewportWidthParsed||!minimumFontSizeRem)return null;const linearDenominator=maximumViewportWidthParsed.value-minimumViewportWidthParsed.value;if(!linearDenominator)return null;const minViewportWidthOffsetValue=roundToPrecision(minimumViewportWidthParsed.value/100,3),viewportWidthOffset=roundToPrecision(minViewportWidthOffsetValue,3)+fontSizeUnit,linearFactorScaled=roundToPrecision(((maximumFontSizeParsed.value-minimumFontSizeParsed.value)/linearDenominator*100||1)*scaleFactor,3);return`clamp(${minimumFontSize}, ${`${minimumFontSizeRem.value}${minimumFontSizeRem.unit} + ((1vw - ${viewportWidthOffset}) * ${linearFactorScaled})`}, ${maximumFontSize})`}function getTypographyValueAndUnit(rawValue,options={}){if("string"!=typeof rawValue&&"number"!=typeof rawValue)return null;isFinite(rawValue)&&(rawValue=`${rawValue}px`);const{coerceTo,rootSizeValue,acceptableUnits}={coerceTo:"",rootSizeValue:16,acceptableUnits:["rem","px","em"],...options},acceptableUnitsGroup=acceptableUnits?.join("|"),regexUnits=new RegExp(`^(\\d*\\.?\\d+)(${acceptableUnitsGroup}){1,1}$`),matches=rawValue.match(regexUnits);if(!matches||matches.length<3)return null;let[,value,unit]=matches,returnValue=parseFloat(value);return"px"!==coerceTo||"em"!==unit&&"rem"!==unit||(returnValue*=rootSizeValue,unit=coerceTo),"px"!==unit||"em"!==coerceTo&&"rem"!==coerceTo||(returnValue/=rootSizeValue,unit=coerceTo),"em"!==coerceTo&&"rem"!==coerceTo||"em"!==unit&&"rem"!==unit||(unit=coerceTo),{value:roundToPrecision(returnValue,3),unit}}function roundToPrecision(value,digits=3){const base=Math.pow(10,digits);return Number.isFinite(value)?parseFloat(Math.round(value*base)/base):void 0}function formatFontWeight(fontWeight){if(!fontWeight)return{};if("object"==typeof fontWeight)return fontWeight;let name;switch(fontWeight){case"normal":case"400":name=(0,i18n_build_module._x)("Regular","font weight");break;case"bold":case"700":name=(0,i18n_build_module._x)("Bold","font weight");break;case"100":name=(0,i18n_build_module._x)("Thin","font weight");break;case"200":name=(0,i18n_build_module._x)("Extra Light","font weight");break;case"300":name=(0,i18n_build_module._x)("Light","font weight");break;case"500":name=(0,i18n_build_module._x)("Medium","font weight");break;case"600":name=(0,i18n_build_module._x)("Semi Bold","font weight");break;case"800":name=(0,i18n_build_module._x)("Extra Bold","font weight");break;case"900":name=(0,i18n_build_module._x)("Black","font weight");break;case"1000":name=(0,i18n_build_module._x)("Extra Black","font weight");break;default:name=fontWeight}return{name,value:fontWeight}}const FONT_STYLES=[{name:(0,i18n_build_module._x)("Regular","font style"),value:"normal"},{name:(0,i18n_build_module._x)("Italic","font style"),value:"italic"}],FONT_WEIGHTS=[{name:(0,i18n_build_module._x)("Thin","font weight"),value:"100"},{name:(0,i18n_build_module._x)("Extra Light","font weight"),value:"200"},{name:(0,i18n_build_module._x)("Light","font weight"),value:"300"},{name:(0,i18n_build_module._x)("Regular","font weight"),value:"400"},{name:(0,i18n_build_module._x)("Medium","font weight"),value:"500"},{name:(0,i18n_build_module._x)("Semi Bold","font weight"),value:"600"},{name:(0,i18n_build_module._x)("Bold","font weight"),value:"700"},{name:(0,i18n_build_module._x)("Extra Bold","font weight"),value:"800"},{name:(0,i18n_build_module._x)("Black","font weight"),value:"900"},{name:(0,i18n_build_module._x)("Extra Black","font weight"),value:"1000"}];function getFontStylesAndWeights(fontFamilyFaces){let fontStyles=[],fontWeights=[];const combinedStyleAndWeightOptions=[],isSystemFont=!fontFamilyFaces||0===fontFamilyFaces?.length;let isVariableFont=!1;return fontFamilyFaces?.forEach((face=>{if("string"==typeof face.fontWeight&&/\s/.test(face.fontWeight.trim())){isVariableFont=!0;let[startValue,endValue]=face.fontWeight.split(" ");startValue=parseInt(startValue.slice(0,1)),endValue="1000"===endValue?10:parseInt(endValue.slice(0,1));for(let i=startValue;i<=endValue;i++){const fontWeightValue=`${i.toString()}00`;fontWeights.some((weight=>weight.value===fontWeightValue))||fontWeights.push(formatFontWeight(fontWeightValue))}}const fontWeight=formatFontWeight("number"==typeof face.fontWeight?face.fontWeight.toString():face.fontWeight),fontStyle=function formatFontStyle(fontStyle){if(!fontStyle)return{};if("object"==typeof fontStyle)return fontStyle;let name;switch(fontStyle){case"normal":name=(0,i18n_build_module._x)("Regular","font style");break;case"italic":name=(0,i18n_build_module._x)("Italic","font style");break;case"oblique":name=(0,i18n_build_module._x)("Oblique","font style");break;default:name=fontStyle}return{name,value:fontStyle}}(face.fontStyle);fontStyle&&Object.keys(fontStyle).length&&(fontStyles.some((style=>style.value===fontStyle.value))||fontStyles.push(fontStyle)),fontWeight&&Object.keys(fontWeight).length&&(fontWeights.some((weight=>weight.value===fontWeight.value))||isVariableFont||fontWeights.push(fontWeight))})),fontWeights.some((weight=>weight.value>="600"))||fontWeights.push({name:(0,i18n_build_module._x)("Bold","font weight"),value:"700"}),fontStyles.some((style=>"italic"===style.value))||fontStyles.push({name:(0,i18n_build_module._x)("Italic","font style"),value:"italic"}),isSystemFont&&(fontStyles=FONT_STYLES,fontWeights=FONT_WEIGHTS),fontStyles=0===fontStyles.length?FONT_STYLES:fontStyles,fontWeights=0===fontWeights.length?FONT_WEIGHTS:fontWeights,fontStyles.forEach((({name:styleName,value:styleValue})=>{fontWeights.forEach((({name:weightName,value:weightValue})=>{const optionName="normal"===styleValue?weightName:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%1$s %2$s"),weightName,styleName);combinedStyleAndWeightOptions.push({key:`${styleValue}-${weightValue}`,name:optionName,style:{fontStyle:styleValue,fontWeight:weightValue}})}))})),{fontStyles,fontWeights,combinedStyleAndWeightOptions,isSystemFont,isVariableFont}}function getTypographyFontSizeValue(preset,settings){const{size:defaultSize}=preset;if(!defaultSize||"0"===defaultSize||!1===preset?.fluid)return defaultSize;if(!isFluidTypographyEnabled(settings?.typography)&&!isFluidTypographyEnabled(preset))return defaultSize;let fluidTypographySettings=function getFluidTypographyOptionsFromSettings(settings){const typographySettings=settings?.typography,layoutSettings=settings?.layout,defaultMaxViewportWidth=getTypographyValueAndUnit(layoutSettings?.wideSize)?layoutSettings?.wideSize:null;return isFluidTypographyEnabled(typographySettings)&&defaultMaxViewportWidth?{fluid:{maxViewportWidth:defaultMaxViewportWidth,...typographySettings.fluid}}:{fluid:typographySettings?.fluid}}(settings);fluidTypographySettings="object"==typeof fluidTypographySettings?.fluid?fluidTypographySettings?.fluid:{};const fluidFontSizeValue=getComputedFluidTypographyValue({minimumFontSize:preset?.fluid?.min,maximumFontSize:preset?.fluid?.max,fontSize:defaultSize,minimumFontSizeLimit:fluidTypographySettings?.minFontSize,maximumViewportWidth:fluidTypographySettings?.maxViewportWidth,minimumViewportWidth:fluidTypographySettings?.minViewportWidth});return fluidFontSizeValue||defaultSize}function isFluidTypographyEnabled(typographySettings){const fluidSettings=typographySettings?.fluid;return!0===fluidSettings||fluidSettings&&"object"==typeof fluidSettings&&Object.keys(fluidSettings).length>0}function findNearestFontWeight(availableFontWeights,newFontWeightValue){if(!(newFontWeightValue="number"==typeof newFontWeightValue?newFontWeightValue.toString():newFontWeightValue)||"string"!=typeof newFontWeightValue)return"";if(!availableFontWeights||0===availableFontWeights.length)return newFontWeightValue;const nearestFontWeight=availableFontWeights?.reduce(((nearest,{value:fw})=>Math.abs(parseInt(fw)-parseInt(newFontWeightValue))<Math.abs(parseInt(nearest)-parseInt(newFontWeightValue))?fw:nearest),availableFontWeights[0]?.value);return nearestFontWeight}const ROOT_BLOCK_SELECTOR="body",ROOT_CSS_PROPERTIES_SELECTOR=":root",PRESET_METADATA=[{path:["color","palette"],valueKey:"color",cssVarInfix:"color",classes:[{classSuffix:"color",propertyName:"color"},{classSuffix:"background-color",propertyName:"background-color"},{classSuffix:"border-color",propertyName:"border-color"}]},{path:["color","gradients"],valueKey:"gradient",cssVarInfix:"gradient",classes:[{classSuffix:"gradient-background",propertyName:"background"}]},{path:["color","duotone"],valueKey:"colors",cssVarInfix:"duotone",valueFunc:({slug})=>`url( '#wp-duotone-${slug}' )`,classes:[]},{path:["shadow","presets"],valueKey:"shadow",cssVarInfix:"shadow",classes:[]},{path:["typography","fontSizes"],valueFunc:(preset,settings)=>getTypographyFontSizeValue(preset,settings),valueKey:"size",cssVarInfix:"font-size",classes:[{classSuffix:"font-size",propertyName:"font-size"}]},{path:["typography","fontFamilies"],valueKey:"fontFamily",cssVarInfix:"font-family",classes:[{classSuffix:"font-family",propertyName:"font-family"}]},{path:["spacing","spacingSizes"],valueKey:"size",cssVarInfix:"spacing",valueFunc:({size})=>size,classes:[]}],STYLE_PATH_TO_CSS_VAR_INFIX={"color.background":"color","color.text":"color","filter.duotone":"duotone","elements.link.color.text":"color","elements.link.:hover.color.text":"color","elements.link.typography.fontFamily":"font-family","elements.link.typography.fontSize":"font-size","elements.button.color.text":"color","elements.button.color.background":"color","elements.caption.color.text":"color","elements.button.typography.fontFamily":"font-family","elements.button.typography.fontSize":"font-size","elements.heading.color":"color","elements.heading.color.background":"color","elements.heading.typography.fontFamily":"font-family","elements.heading.gradient":"gradient","elements.heading.color.gradient":"gradient","elements.h1.color":"color","elements.h1.color.background":"color","elements.h1.typography.fontFamily":"font-family","elements.h1.color.gradient":"gradient","elements.h2.color":"color","elements.h2.color.background":"color","elements.h2.typography.fontFamily":"font-family","elements.h2.color.gradient":"gradient","elements.h3.color":"color","elements.h3.color.background":"color","elements.h3.typography.fontFamily":"font-family","elements.h3.color.gradient":"gradient","elements.h4.color":"color","elements.h4.color.background":"color","elements.h4.typography.fontFamily":"font-family","elements.h4.color.gradient":"gradient","elements.h5.color":"color","elements.h5.color.background":"color","elements.h5.typography.fontFamily":"font-family","elements.h5.color.gradient":"gradient","elements.h6.color":"color","elements.h6.color.background":"color","elements.h6.typography.fontFamily":"font-family","elements.h6.color.gradient":"gradient","color.gradient":"gradient",shadow:"shadow","typography.fontSize":"font-size","typography.fontFamily":"font-family"};function useToolsPanelDropdownMenuProps(){return(0,use_viewport_match.A)("medium","<")?{}:{popoverProps:{placement:"left-start",offset:259}}}function findInPresetsBy(features,blockName,presetPath,presetProperty,presetValueValue){const orderedPresetsByOrigin=[getValueFromObjectPath(features,["blocks",blockName,...presetPath]),getValueFromObjectPath(features,presetPath)];for(const presetByOrigin of orderedPresetsByOrigin)if(presetByOrigin){const origins=["custom","theme","default"];for(const origin of origins){const presets=presetByOrigin[origin];if(presets){const presetObject=presets.find((preset=>preset[presetProperty]===presetValueValue));if(presetObject){if("slug"===presetProperty)return presetObject;return findInPresetsBy(features,blockName,presetPath,"slug",presetObject.slug)[presetProperty]===presetObject[presetProperty]?presetObject:void 0}}}}}function getValueFromVariable(features,blockName,variable){if(!variable||"string"!=typeof variable){if("string"!=typeof variable?.ref)return variable;if(!(variable=getValueFromObjectPath(features,variable.ref))||variable?.ref)return variable}let parsedVar;if(variable.startsWith("var:"))parsedVar=variable.slice(4).split("|");else{if(!variable.startsWith("var(--wp--")||!variable.endsWith(")"))return variable;parsedVar=variable.slice(10,-1).split("--")}const[type,...path]=parsedVar;return"preset"===type?function getValueFromPresetVariable(features,blockName,variable,[presetType,slug]){const metadata=PRESET_METADATA.find((data=>data.cssVarInfix===presetType));if(!metadata)return variable;const presetObject=findInPresetsBy(features.settings,blockName,metadata.path,"slug",slug);if(presetObject){const{valueKey}=metadata;return getValueFromVariable(features,blockName,presetObject[valueKey])}return variable}(features,blockName,variable,path):"custom"===type?function getValueFromCustomVariable(features,blockName,variable,path){var _getValueFromObjectPa;const result=null!==(_getValueFromObjectPa=getValueFromObjectPath(features.settings,["blocks",blockName,"custom",...path]))&&void 0!==_getValueFromObjectPa?_getValueFromObjectPa:getValueFromObjectPath(features.settings,["custom",...path]);return result?getValueFromVariable(features,blockName,result):variable}(features,blockName,variable,path):variable}function scopeSelector(scope,selector){if(!scope||!selector)return selector;const scopes=scope.split(","),selectors=selector.split(","),selectorsScoped=[];return scopes.forEach((outer=>{selectors.forEach((inner=>{selectorsScoped.push(`${outer.trim()} ${inner.trim()}`)}))})),selectorsScoped.join(", ")}function areGlobalStyleConfigsEqual(original,variation){return"object"!=typeof original||"object"!=typeof variation?original===variation:es6_default()(original?.styles,variation?.styles)&&es6_default()(original?.settings,variation?.settings)}function getResolvedValue(ruleValue,tree){if(!ruleValue||!tree)return ruleValue;const resolvedValue=function getResolvedRefValue(ruleValue,tree){if(!ruleValue||!tree)return ruleValue;if("string"!=typeof ruleValue&&ruleValue?.ref){const resolvedRuleValue=(0,utils.k5)(getValueFromObjectPath(tree,ruleValue.ref));if(resolvedRuleValue?.ref)return;return void 0===resolvedRuleValue?ruleValue:resolvedRuleValue}return ruleValue}(ruleValue,tree);return resolvedValue?.url&&(resolvedValue.url=function getResolvedThemeFilePath(file,themeFileURIs){if(!file||!themeFileURIs||!Array.isArray(themeFileURIs))return file;const uri=themeFileURIs.find((themeFileUri=>themeFileUri?.name===file));return uri?.href?uri?.href:file}(resolvedValue.url,tree?._links?.["wp:theme-file"])),resolvedValue}const GlobalStylesContext=(0,react.createContext)({user:{},base:{},merged:{},setUserConfig:()=>{}}),EMPTY_CONFIG={settings:{},styles:{}},VALID_SETTINGS=["appearanceTools","useRootPaddingAwareAlignments","background.backgroundImage","background.backgroundRepeat","background.backgroundSize","background.backgroundPosition","border.color","border.radius","border.style","border.width","shadow.presets","shadow.defaultPresets","color.background","color.button","color.caption","color.custom","color.customDuotone","color.customGradient","color.defaultDuotone","color.defaultGradients","color.defaultPalette","color.duotone","color.gradients","color.heading","color.link","color.palette","color.text","custom","dimensions.aspectRatio","dimensions.minHeight","layout.contentSize","layout.definitions","layout.wideSize","lightbox.enabled","lightbox.allowEditing","position.fixed","position.sticky","spacing.customSpacingSize","spacing.defaultSpacingSizes","spacing.spacingSizes","spacing.spacingScale","spacing.blockGap","spacing.margin","spacing.padding","spacing.units","typography.fluid","typography.customFontSize","typography.defaultFontSizes","typography.dropCap","typography.fontFamilies","typography.fontSizes","typography.fontStyle","typography.fontWeight","typography.letterSpacing","typography.lineHeight","typography.textAlign","typography.textColumns","typography.textDecoration","typography.textTransform","typography.writingMode"],useGlobalStylesReset=()=>{const{user,setUserConfig}=(0,react.useContext)(GlobalStylesContext),config={settings:user.settings,styles:user.styles};return[!!config&&!es6_default()(config,EMPTY_CONFIG),(0,react.useCallback)((()=>setUserConfig(EMPTY_CONFIG)),[setUserConfig])]};function useGlobalSetting(propertyPath,blockName,source="all"){const{setUserConfig,...configs}=(0,react.useContext)(GlobalStylesContext),appendedBlockPath=blockName?".blocks."+blockName:"",appendedPropertyPath=propertyPath?"."+propertyPath:"",contextualPath=`settings${appendedBlockPath}${appendedPropertyPath}`,globalPath=`settings${appendedPropertyPath}`,sourceKey="all"===source?"merged":source;return[(0,react.useMemo)((()=>{const configToUse=configs[sourceKey];if(!configToUse)throw"Unsupported source";var _getValueFromObjectPa;if(propertyPath)return null!==(_getValueFromObjectPa=getValueFromObjectPath(configToUse,contextualPath))&&void 0!==_getValueFromObjectPa?_getValueFromObjectPa:getValueFromObjectPath(configToUse,globalPath);let result={};return VALID_SETTINGS.forEach((setting=>{var _getValueFromObjectPa2;const value=null!==(_getValueFromObjectPa2=getValueFromObjectPath(configToUse,`settings${appendedBlockPath}.${setting}`))&&void 0!==_getValueFromObjectPa2?_getValueFromObjectPa2:getValueFromObjectPath(configToUse,`settings.${setting}`);void 0!==value&&(result=setImmutably(result,setting.split("."),value))})),result}),[configs,sourceKey,propertyPath,contextualPath,globalPath,appendedBlockPath]),newValue=>{setUserConfig((currentConfig=>setImmutably(currentConfig,contextualPath.split("."),newValue)))}]}function useGlobalStyle(path,blockName,source="all",{shouldDecodeEncode=!0}={}){const{merged:mergedConfig,base:baseConfig,user:userConfig,setUserConfig}=(0,react.useContext)(GlobalStylesContext),appendedPath=path?"."+path:"",finalPath=blockName?`styles.blocks.${blockName}${appendedPath}`:`styles${appendedPath}`;let rawResult,result;switch(source){case"all":rawResult=getValueFromObjectPath(mergedConfig,finalPath),result=shouldDecodeEncode?getValueFromVariable(mergedConfig,blockName,rawResult):rawResult;break;case"user":rawResult=getValueFromObjectPath(userConfig,finalPath),result=shouldDecodeEncode?getValueFromVariable(mergedConfig,blockName,rawResult):rawResult;break;case"base":rawResult=getValueFromObjectPath(baseConfig,finalPath),result=shouldDecodeEncode?getValueFromVariable(baseConfig,blockName,rawResult):rawResult;break;default:throw"Unsupported source"}return[result,newValue=>{setUserConfig((currentConfig=>setImmutably(currentConfig,finalPath.split("."),shouldDecodeEncode?function getPresetVariableFromValue(features,blockName,variableStylePath,presetPropertyValue){if(!presetPropertyValue)return presetPropertyValue;const cssVarInfix=STYLE_PATH_TO_CSS_VAR_INFIX[variableStylePath],metadata=PRESET_METADATA.find((data=>data.cssVarInfix===cssVarInfix));if(!metadata)return presetPropertyValue;const{valueKey,path}=metadata,presetObject=findInPresetsBy(features,blockName,path,valueKey,presetPropertyValue);return presetObject?`var:preset|${cssVarInfix}|${presetObject.slug}`:presetPropertyValue}(mergedConfig.settings,blockName,path,newValue):newValue)))}]}function useSettingsForBlockElement(parentSettings,blockName,element){const{supportedStyles,supports}=(0,use_select.A)((select=>({supportedStyles:unlock(select(build_module.M_)).getSupportedStyles(blockName,element),supports:select(build_module.M_).getBlockType(blockName)?.supports})),[blockName,element]);return(0,react.useMemo)((()=>{const updatedSettings={...parentSettings};return supportedStyles.includes("fontSize")||(updatedSettings.typography={...updatedSettings.typography,fontSizes:{},customFontSize:!1,defaultFontSizes:!1}),supportedStyles.includes("fontFamily")||(updatedSettings.typography={...updatedSettings.typography,fontFamilies:{}}),updatedSettings.color={...updatedSettings.color,text:updatedSettings.color?.text&&supportedStyles.includes("color"),background:updatedSettings.color?.background&&(supportedStyles.includes("background")||supportedStyles.includes("backgroundColor")),button:updatedSettings.color?.button&&supportedStyles.includes("buttonColor"),heading:updatedSettings.color?.heading&&supportedStyles.includes("headingColor"),link:updatedSettings.color?.link&&supportedStyles.includes("linkColor"),caption:updatedSettings.color?.caption&&supportedStyles.includes("captionColor")},supportedStyles.includes("background")||(updatedSettings.color.gradients=[],updatedSettings.color.customGradient=!1),supportedStyles.includes("filter")||(updatedSettings.color.defaultDuotone=!1,updatedSettings.color.customDuotone=!1),["lineHeight","fontStyle","fontWeight","letterSpacing","textAlign","textTransform","textDecoration","writingMode"].forEach((key=>{supportedStyles.includes(key)||(updatedSettings.typography={...updatedSettings.typography,[key]:!1})})),supportedStyles.includes("columnCount")||(updatedSettings.typography={...updatedSettings.typography,textColumns:!1}),["contentSize","wideSize"].forEach((key=>{supportedStyles.includes(key)||(updatedSettings.layout={...updatedSettings.layout,[key]:!1})})),["padding","margin","blockGap"].forEach((key=>{supportedStyles.includes(key)||(updatedSettings.spacing={...updatedSettings.spacing,[key]:!1});const sides=Array.isArray(supports?.spacing?.[key])?supports?.spacing?.[key]:supports?.spacing?.[key]?.sides;sides?.length&&updatedSettings.spacing?.[key]&&(updatedSettings.spacing={...updatedSettings.spacing,[key]:{...updatedSettings.spacing?.[key],sides}})})),["aspectRatio","minHeight"].forEach((key=>{supportedStyles.includes(key)||(updatedSettings.dimensions={...updatedSettings.dimensions,[key]:!1})})),["radius","color","style","width"].forEach((key=>{supportedStyles.includes("border"+key.charAt(0).toUpperCase()+key.slice(1))||(updatedSettings.border={...updatedSettings.border,[key]:!1})})),["backgroundImage","backgroundSize"].forEach((key=>{supportedStyles.includes(key)||(updatedSettings.background={...updatedSettings.background,[key]:!1})})),updatedSettings.shadow=!!supportedStyles.includes("shadow")&&updatedSettings.shadow,element&&(updatedSettings.typography.textAlign=!1),updatedSettings}),[parentSettings,supportedStyles,supports,element])}function useColorsPerOrigin(settings){const customColors=settings?.color?.palette?.custom,themeColors=settings?.color?.palette?.theme,defaultColors=settings?.color?.palette?.default,shouldDisplayDefaultColors=settings?.color?.defaultPalette;return(0,react.useMemo)((()=>{const result=[];return themeColors&&themeColors.length&&result.push({name:(0,i18n_build_module._x)("Theme","Indicates this palette comes from the theme."),colors:themeColors}),shouldDisplayDefaultColors&&defaultColors&&defaultColors.length&&result.push({name:(0,i18n_build_module._x)("Default","Indicates this palette comes from WordPress."),colors:defaultColors}),customColors&&customColors.length&&result.push({name:(0,i18n_build_module._x)("Custom","Indicates this palette is created by the user."),colors:customColors}),result}),[customColors,themeColors,defaultColors,shouldDisplayDefaultColors])}function useGradientsPerOrigin(settings){const customGradients=settings?.color?.gradients?.custom,themeGradients=settings?.color?.gradients?.theme,defaultGradients=settings?.color?.gradients?.default,shouldDisplayDefaultGradients=settings?.color?.defaultGradients;return(0,react.useMemo)((()=>{const result=[];return themeGradients&&themeGradients.length&&result.push({name:(0,i18n_build_module._x)("Theme","Indicates this palette comes from the theme."),gradients:themeGradients}),shouldDisplayDefaultGradients&&defaultGradients&&defaultGradients.length&&result.push({name:(0,i18n_build_module._x)("Default","Indicates this palette comes from WordPress."),gradients:defaultGradients}),customGradients&&customGradients.length&&result.push({name:(0,i18n_build_module._x)("Custom","Indicates this palette is created by the user."),gradients:customGradients}),result}),[customGradients,themeGradients,defaultGradients,shouldDisplayDefaultGradients])}var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const utils_cleanEmptyObject=object=>{if(null===object||"object"!=typeof object||Array.isArray(object))return object;const cleanedNestedObjects=Object.entries(object).map((([key,value])=>[key,utils_cleanEmptyObject(value)])).filter((([,value])=>void 0!==value));return cleanedNestedObjects.length?Object.fromEntries(cleanedNestedObjects):void 0};function transformStyles(activeSupports,migrationPaths,result,source,index,results){if(Object.values(null!=activeSupports?activeSupports:{}).every((isActive=>!isActive)))return result;if(1===results.length&&result.innerBlocks.length===source.length)return result;let referenceBlockAttributes=source[0]?.attributes;if(results.length>1&&source.length>1){if(!source[index])return result;referenceBlockAttributes=source[index]?.attributes}let returnBlock=result;return Object.entries(activeSupports).forEach((([support,isActive])=>{isActive&&migrationPaths[support].forEach((path=>{const styleValue=getValueFromObjectPath(referenceBlockAttributes,path);styleValue&&(returnBlock={...returnBlock,attributes:setImmutably(returnBlock.attributes,path,styleValue)})}))})),returnBlock}function shouldSkipSerialization(blockNameOrType,featureSet,feature){const support=(0,build_module.bI)(blockNameOrType,featureSet),skipSerialization=support?.__experimentalSkipSerialization;return Array.isArray(skipSerialization)?skipSerialization.includes(feature):skipSerialization}const pendingStyleOverrides=new WeakMap;function useStyleOverride({id,css}){return usePrivateStyleOverride({id,css})}function usePrivateStyleOverride({id,css,assets,__unstableType,variation,clientId}={}){const{setStyleOverride,deleteStyleOverride}=unlock((0,use_dispatch.A)(store_store)),registry=(0,use_registry.A)(),fallbackId=(0,react.useId)();(0,react.useEffect)((()=>{if(!css&&!assets)return;const _id=id||fallbackId,override={id,css,assets,__unstableType,variation,clientId};return pendingStyleOverrides.get(registry)||pendingStyleOverrides.set(registry,[]),pendingStyleOverrides.get(registry).push([_id,override]),window.queueMicrotask((()=>{pendingStyleOverrides.get(registry)?.length&&registry.batch((()=>{pendingStyleOverrides.get(registry).forEach((args=>{setStyleOverride(...args)})),pendingStyleOverrides.set(registry,[])}))})),()=>{const isPending=pendingStyleOverrides.get(registry)?.find((([currentId])=>currentId===_id));isPending?pendingStyleOverrides.set(registry,pendingStyleOverrides.get(registry).filter((([currentId])=>currentId!==_id))):deleteStyleOverride(_id)}}),[id,css,clientId,assets,__unstableType,fallbackId,setStyleOverride,deleteStyleOverride,registry])}function useBlockSettings(name,parentLayout){const[backgroundImage,backgroundSize,customFontFamilies,defaultFontFamilies,themeFontFamilies,defaultFontSizesEnabled,customFontSizes,defaultFontSizes,themeFontSizes,customFontSize,fontStyle,fontWeight,lineHeight,textAlign,textColumns,textDecoration,writingMode,textTransform,letterSpacing,padding,margin,blockGap,defaultSpacingSizesEnabled,customSpacingSize,userSpacingSizes,defaultSpacingSizes,themeSpacingSizes,units,aspectRatio,minHeight,layout,borderColor,borderRadius,borderStyle,borderWidth,customColorsEnabled,customColors,customDuotone,themeColors,defaultColors,defaultPalette,defaultDuotone,userDuotonePalette,themeDuotonePalette,defaultDuotonePalette,userGradientPalette,themeGradientPalette,defaultGradientPalette,defaultGradients,areCustomGradientsEnabled,isBackgroundEnabled,isLinkEnabled,isTextEnabled,isHeadingEnabled,isButtonEnabled,shadow]=use_settings_useSettings("background.backgroundImage","background.backgroundSize","typography.fontFamilies.custom","typography.fontFamilies.default","typography.fontFamilies.theme","typography.defaultFontSizes","typography.fontSizes.custom","typography.fontSizes.default","typography.fontSizes.theme","typography.customFontSize","typography.fontStyle","typography.fontWeight","typography.lineHeight","typography.textAlign","typography.textColumns","typography.textDecoration","typography.writingMode","typography.textTransform","typography.letterSpacing","spacing.padding","spacing.margin","spacing.blockGap","spacing.defaultSpacingSizes","spacing.customSpacingSize","spacing.spacingSizes.custom","spacing.spacingSizes.default","spacing.spacingSizes.theme","spacing.units","dimensions.aspectRatio","dimensions.minHeight","layout","border.color","border.radius","border.style","border.width","color.custom","color.palette.custom","color.customDuotone","color.palette.theme","color.palette.default","color.defaultPalette","color.defaultDuotone","color.duotone.custom","color.duotone.theme","color.duotone.default","color.gradients.custom","color.gradients.theme","color.gradients.default","color.defaultGradients","color.customGradient","color.background","color.link","color.text","color.heading","color.button","shadow");return useSettingsForBlockElement((0,react.useMemo)((()=>({background:{backgroundImage,backgroundSize},color:{palette:{custom:customColors,theme:themeColors,default:defaultColors},gradients:{custom:userGradientPalette,theme:themeGradientPalette,default:defaultGradientPalette},duotone:{custom:userDuotonePalette,theme:themeDuotonePalette,default:defaultDuotonePalette},defaultGradients,defaultPalette,defaultDuotone,custom:customColorsEnabled,customGradient:areCustomGradientsEnabled,customDuotone,background:isBackgroundEnabled,link:isLinkEnabled,heading:isHeadingEnabled,button:isButtonEnabled,text:isTextEnabled},typography:{fontFamilies:{custom:customFontFamilies,default:defaultFontFamilies,theme:themeFontFamilies},fontSizes:{custom:customFontSizes,default:defaultFontSizes,theme:themeFontSizes},customFontSize,defaultFontSizes:defaultFontSizesEnabled,fontStyle,fontWeight,lineHeight,textAlign,textColumns,textDecoration,textTransform,letterSpacing,writingMode},spacing:{spacingSizes:{custom:userSpacingSizes,default:defaultSpacingSizes,theme:themeSpacingSizes},customSpacingSize,defaultSpacingSizes:defaultSpacingSizesEnabled,padding,margin,blockGap,units},border:{color:borderColor,radius:borderRadius,style:borderStyle,width:borderWidth},dimensions:{aspectRatio,minHeight},layout,parentLayout,shadow})),[backgroundImage,backgroundSize,customFontFamilies,defaultFontFamilies,themeFontFamilies,defaultFontSizesEnabled,customFontSizes,defaultFontSizes,themeFontSizes,customFontSize,fontStyle,fontWeight,lineHeight,textAlign,textColumns,textDecoration,textTransform,letterSpacing,writingMode,padding,margin,blockGap,defaultSpacingSizesEnabled,customSpacingSize,userSpacingSizes,defaultSpacingSizes,themeSpacingSizes,units,aspectRatio,minHeight,layout,parentLayout,borderColor,borderRadius,borderStyle,borderWidth,customColorsEnabled,customColors,customDuotone,themeColors,defaultColors,defaultPalette,defaultDuotone,userDuotonePalette,themeDuotonePalette,defaultDuotonePalette,userGradientPalette,themeGradientPalette,defaultGradientPalette,defaultGradients,areCustomGradientsEnabled,isBackgroundEnabled,isLinkEnabled,isTextEnabled,isHeadingEnabled,isButtonEnabled,shadow]),name)}const BlockPropsPure=(0,react.memo)((function BlockProps({index,useBlockProps,setAllWrapperProps,...props}){const wrapperProps=useBlockProps(props),setWrapperProps=next=>setAllWrapperProps((prev=>{const nextAll=[...prev];return nextAll[index]=next,nextAll}));return(0,react.useEffect)((()=>(setWrapperProps(wrapperProps),()=>{setWrapperProps(void 0)}))),null}));(0,hooks_build_module.U2)("blocks.registerBlockType","core/compat/migrateLightBlockWrapper",(function migrateLightBlockWrapper(settings){const{apiVersion=1}=settings;return apiVersion<2&&(0,build_module.pN)(settings,"lightBlockWrapper",!1)&&(settings.apiVersion=2),settings}));var toolbar_group=__webpack_require__("./packages/components/build-module/toolbar/toolbar-group/index.js"),style_provider=__webpack_require__("./packages/components/build-module/style-provider/index.js"),slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js");const block_controls_groups={default:(0,slot_fill.QJ)("BlockControls"),block:(0,slot_fill.QJ)("BlockControlsBlock"),inline:(0,slot_fill.QJ)("BlockFormatControls"),other:(0,slot_fill.QJ)("BlockControlsOther"),parent:(0,slot_fill.QJ)("BlockControlsParent")};function BlockControlsFill({group="default",controls,children,__experimentalShareWithChildBlocks=!1}){const Fill=function useBlockControlsFill(group,shareWithChildBlocks){const context=useBlockEditContext();return context[mayDisplayControlsKey]?block_controls_groups[group]?.Fill:context[mayDisplayParentControlsKey]&&shareWithChildBlocks?block_controls_groups.parent.Fill:null}(group,__experimentalShareWithChildBlocks);if(!Fill)return null;const innerMarkup=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["default"===group&&(0,jsx_runtime.jsx)(toolbar_group.A,{controls}),children]});return(0,jsx_runtime.jsx)(style_provider.A,{document,children:(0,jsx_runtime.jsx)(Fill,{children:fillProps=>{const{forwardedContext=[]}=fillProps;return forwardedContext.reduce(((inner,[Provider,props])=>(0,jsx_runtime.jsx)(Provider,{...props,children:inner})),innerMarkup)}})})}var private_apis=__webpack_require__("./packages/components/build-module/private-apis.js"),toolbar_context=__webpack_require__("./packages/components/build-module/toolbar/toolbar-context/index.js"),use_slot_fills=__webpack_require__("./packages/components/build-module/slot-fill/bubbles-virtually/use-slot-fills.js"),warning_build_module=__webpack_require__("./packages/warning/build-module/index.js");const{ComponentsContext}=unlock(private_apis.j);function BlockControlsSlot({group="default",...props}){const toolbarState=(0,react.useContext)(toolbar_context.A),contextState=(0,react.useContext)(ComponentsContext),fillProps=(0,react.useMemo)((()=>({forwardedContext:[[toolbar_context.A.Provider,{value:toolbarState}],[ComponentsContext.Provider,{value:contextState}]]})),[toolbarState,contextState]),Slot=block_controls_groups[group]?.Slot,fills=(0,use_slot_fills.A)(Slot?.__unstableName);if(!Slot)return!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)(`Unknown BlockControls group "${group}" provided.`),null;if(!fills?.length)return null;const slot=(0,jsx_runtime.jsx)(Slot,{...props,bubblesVirtually:!0,fillProps});return"default"===group?slot:(0,jsx_runtime.jsx)(toolbar_group.A,{children:slot})}const BlockControls=BlockControlsFill;BlockControls.Slot=BlockControlsSlot;const block_controls=BlockControls;var toolbar_dropdown_menu=__webpack_require__("./packages/components/build-module/toolbar/toolbar-dropdown-menu/index.js"),menu_group=__webpack_require__("./packages/components/build-module/menu-group/index.js"),menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js"),justify_left=__webpack_require__("./packages/icons/build-module/library/justify-left.js"),justify_center=__webpack_require__("./packages/icons/build-module/library/justify-center.js"),justify_right=__webpack_require__("./packages/icons/build-module/library/justify-right.js"),justify_space_between=__webpack_require__("./packages/icons/build-module/library/justify-space-between.js"),justify_stretch=__webpack_require__("./packages/icons/build-module/library/justify-stretch.js"),arrow_right=__webpack_require__("./packages/icons/build-module/library/arrow-right.js"),arrow_down=__webpack_require__("./packages/icons/build-module/library/arrow-down.js"),component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),flex_item_component=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),toggle_group_control_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control/component.js"),toggle_group_control_option_icon_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option-icon/component.js"),toggle_control=__webpack_require__("./packages/components/build-module/toggle-control/index.js");const LAYOUT_DEFINITIONS={default:{name:"default",slug:"flow",className:"is-layout-flow",baseStyles:[{selector:" > .alignleft",rules:{float:"left","margin-inline-start":"0","margin-inline-end":"2em"}},{selector:" > .alignright",rules:{float:"right","margin-inline-start":"2em","margin-inline-end":"0"}},{selector:" > .aligncenter",rules:{"margin-left":"auto !important","margin-right":"auto !important"}}],spacingStyles:[{selector:" > :first-child",rules:{"margin-block-start":"0"}},{selector:" > :last-child",rules:{"margin-block-end":"0"}},{selector:" > *",rules:{"margin-block-start":null,"margin-block-end":"0"}}]},constrained:{name:"constrained",slug:"constrained",className:"is-layout-constrained",baseStyles:[{selector:" > .alignleft",rules:{float:"left","margin-inline-start":"0","margin-inline-end":"2em"}},{selector:" > .alignright",rules:{float:"right","margin-inline-start":"2em","margin-inline-end":"0"}},{selector:" > .aligncenter",rules:{"margin-left":"auto !important","margin-right":"auto !important"}},{selector:" > :where(:not(.alignleft):not(.alignright):not(.alignfull))",rules:{"max-width":"var(--wp--style--global--content-size)","margin-left":"auto !important","margin-right":"auto !important"}},{selector:" > .alignwide",rules:{"max-width":"var(--wp--style--global--wide-size)"}}],spacingStyles:[{selector:" > :first-child",rules:{"margin-block-start":"0"}},{selector:" > :last-child",rules:{"margin-block-end":"0"}},{selector:" > *",rules:{"margin-block-start":null,"margin-block-end":"0"}}]},flex:{name:"flex",slug:"flex",className:"is-layout-flex",displayMode:"flex",baseStyles:[{selector:"",rules:{"flex-wrap":"wrap","align-items":"center"}},{selector:" > :is(*, div)",rules:{margin:"0"}}],spacingStyles:[{selector:"",rules:{gap:null}}]},grid:{name:"grid",slug:"grid",className:"is-layout-grid",displayMode:"grid",baseStyles:[{selector:" > :is(*, div)",rules:{margin:"0"}}],spacingStyles:[{selector:"",rules:{gap:null}}]}};function appendSelectors(selectors,append=""){return selectors.split(",").map((subselector=>`${subselector}${append?` ${append}`:""}`)).join(",")}function getBlockGapCSS(selector,layoutDefinitions=LAYOUT_DEFINITIONS,layoutType,blockGapValue){let output="";return layoutDefinitions?.[layoutType]?.spacingStyles?.length&&blockGapValue&&layoutDefinitions[layoutType].spacingStyles.forEach((gapStyle=>{output+=`${appendSelectors(selector,gapStyle.selector.trim())} { `,output+=Object.entries(gapStyle.rules).map((([cssProperty,value])=>`${cssProperty}: ${value||blockGapValue}`)).join("; "),output+="; }"})),output}function getAlignmentsInfo(layout){const{contentSize,wideSize,type="default"}=layout,alignmentInfo={},sizeRegex=/^(?!0)\d+(px|em|rem|vw|vh|%|svw|lvw|dvw|svh|lvh|dvh|vi|svi|lvi|dvi|vb|svb|lvb|dvb|vmin|svmin|lvmin|dvmin|vmax|svmax|lvmax|dvmax)?$/i;return sizeRegex.test(contentSize)&&"constrained"===type&&(alignmentInfo.none=(0,i18n_build_module.nv)((0,i18n_build_module.__)("Max %s wide"),contentSize)),sizeRegex.test(wideSize)&&(alignmentInfo.wide=(0,i18n_build_module.nv)((0,i18n_build_module.__)("Max %s wide"),wideSize)),alignmentInfo}var sides_all=__webpack_require__("./packages/icons/build-module/library/sides-all.js"),sides_horizontal=__webpack_require__("./packages/icons/build-module/library/sides-horizontal.js"),sides_vertical=__webpack_require__("./packages/icons/build-module/library/sides-vertical.js"),sides_top=__webpack_require__("./packages/icons/build-module/library/sides-top.js"),sides_right=__webpack_require__("./packages/icons/build-module/library/sides-right.js"),sides_bottom=__webpack_require__("./packages/icons/build-module/library/sides-bottom.js"),sides_left=__webpack_require__("./packages/icons/build-module/library/sides-left.js");const RANGE_CONTROL_MAX_SIZE=8,ALL_SIDES=["top","right","bottom","left"],DEFAULT_VALUES={top:void 0,right:void 0,bottom:void 0,left:void 0},ICONS={custom:sides_all.A,axial:sides_all.A,horizontal:sides_horizontal.A,vertical:sides_vertical.A,top:sides_top.A,right:sides_right.A,bottom:sides_bottom.A,left:sides_left.A},LABELS={default:(0,i18n_build_module.__)("Spacing control"),top:(0,i18n_build_module.__)("Top"),bottom:(0,i18n_build_module.__)("Bottom"),left:(0,i18n_build_module.__)("Left"),right:(0,i18n_build_module.__)("Right"),mixed:(0,i18n_build_module.__)("Mixed"),vertical:(0,i18n_build_module.__)("Vertical"),horizontal:(0,i18n_build_module.__)("Horizontal"),axial:(0,i18n_build_module.__)("Horizontal & vertical"),custom:(0,i18n_build_module.__)("Custom")},VIEWS={axial:"axial",top:"top",right:"right",bottom:"bottom",left:"left",custom:"custom"};function isValueSpacingPreset(value){return!!value?.includes&&("0"===value||value.includes("var:preset|spacing|"))}function getCustomValueFromPreset(value,spacingSizes){if(!isValueSpacingPreset(value))return value;const slug=getSpacingPresetSlug(value),spacingSize=spacingSizes.find((size=>String(size.slug)===slug));return spacingSize?.size}function getPresetValueFromCustomValue(value,spacingSizes){if(!value||isValueSpacingPreset(value)||"0"===value)return value;const spacingMatch=spacingSizes.find((size=>String(size.size)===String(value)));return spacingMatch?.slug?`var:preset|spacing|${spacingMatch.slug}`:value}function getSpacingPresetCssVar(value){if(!value)return;const slug=value.match(/var:preset\|spacing\|(.+)/);return slug?`var(--wp--preset--spacing--${slug[1]})`:value}function getSpacingPresetSlug(value){if(!value)return;if("0"===value||"default"===value)return value;const slug=value.match(/var:preset\|spacing\|(.+)/);return slug?slug[1]:void 0}function hasAxisSupport(sides,axis){if(!sides||!sides.length)return!1;const hasHorizontalSupport=sides.includes("horizontal")||sides.includes("left")&&sides.includes("right"),hasVerticalSupport=sides.includes("vertical")||sides.includes("top")&&sides.includes("bottom");return"horizontal"===axis?hasHorizontalSupport:"vertical"===axis?hasVerticalSupport:hasHorizontalSupport||hasVerticalSupport}function getGapCSSValue(blockGapValue,defaultValue="0"){const blockGapBoxControlValue=function getGapBoxControlValueFromStyle(blockGapValue){if(!blockGapValue)return null;const isValueString="string"==typeof blockGapValue;return{top:isValueString?blockGapValue:blockGapValue?.top,left:isValueString?blockGapValue:blockGapValue?.left}}(blockGapValue);if(!blockGapBoxControlValue)return null;const row=getSpacingPresetCssVar(blockGapBoxControlValue?.top)||defaultValue,column=getSpacingPresetCssVar(blockGapBoxControlValue?.left)||defaultValue;return row===column?row:`${row} ${column}`}var justify_top=__webpack_require__("./packages/icons/build-module/library/justify-top.js"),justify_center_vertical=__webpack_require__("./packages/icons/build-module/library/justify-center-vertical.js"),justify_bottom=__webpack_require__("./packages/icons/build-module/library/justify-bottom.js"),justify_stretch_vertical=__webpack_require__("./packages/icons/build-module/library/justify-stretch-vertical.js"),justify_space_between_vertical=__webpack_require__("./packages/icons/build-module/library/justify-space-between-vertical.js");const BLOCK_ALIGNMENTS_CONTROLS={top:{icon:justify_top.A,title:(0,i18n_build_module._x)("Align top","Block vertical alignment setting")},center:{icon:justify_center_vertical.A,title:(0,i18n_build_module._x)("Align middle","Block vertical alignment setting")},bottom:{icon:justify_bottom.A,title:(0,i18n_build_module._x)("Align bottom","Block vertical alignment setting")},stretch:{icon:justify_stretch_vertical.A,title:(0,i18n_build_module._x)("Stretch to fill","Block vertical alignment setting")},"space-between":{icon:justify_space_between_vertical.A,title:(0,i18n_build_module._x)("Space between","Block vertical alignment setting")}},DEFAULT_CONTROLS=["top","center","bottom"];const ui=function BlockVerticalAlignmentUI({value,onChange,controls=DEFAULT_CONTROLS,isCollapsed=!0,isToolbar}){function applyOrUnset(align){return()=>onChange(value===align?void 0:align)}const activeAlignment=BLOCK_ALIGNMENTS_CONTROLS[value],defaultAlignmentControl=BLOCK_ALIGNMENTS_CONTROLS.top,UIComponent=isToolbar?toolbar_group.A:toolbar_dropdown_menu.A,extraProps=isToolbar?{isCollapsed}:{};return(0,jsx_runtime.jsx)(UIComponent,{icon:activeAlignment?activeAlignment.icon:defaultAlignmentControl.icon,label:(0,i18n_build_module._x)("Change vertical alignment","Block vertical alignment setting label"),controls:controls.map((control=>({...BLOCK_ALIGNMENTS_CONTROLS[control],isActive:value===control,role:isCollapsed?"menuitemradio":void 0,onClick:applyOrUnset(control)}))),...extraProps})},BlockVerticalAlignmentControl=props=>(0,jsx_runtime.jsx)(ui,{...props,isToolbar:!1}),BlockVerticalAlignmentToolbar=props=>(0,jsx_runtime.jsx)(ui,{...props,isToolbar:!0}),icons={left:justify_left.A,center:justify_center.A,right:justify_right.A,"space-between":justify_space_between.A,stretch:justify_stretch.A};const justify_content_control_ui=function ui_JustifyContentUI({allowedControls=["left","center","right","space-between"],isCollapsed=!0,onChange,value,popoverProps,isToolbar}){const handleClick=next=>{onChange(next===value?void 0:next)},icon=value?icons[value]:icons.left,allControls=[{name:"left",icon:justify_left.A,title:(0,i18n_build_module.__)("Justify items left"),isActive:"left"===value,onClick:()=>handleClick("left")},{name:"center",icon:justify_center.A,title:(0,i18n_build_module.__)("Justify items center"),isActive:"center"===value,onClick:()=>handleClick("center")},{name:"right",icon:justify_right.A,title:(0,i18n_build_module.__)("Justify items right"),isActive:"right"===value,onClick:()=>handleClick("right")},{name:"space-between",icon:justify_space_between.A,title:(0,i18n_build_module.__)("Space between items"),isActive:"space-between"===value,onClick:()=>handleClick("space-between")},{name:"stretch",icon:justify_stretch.A,title:(0,i18n_build_module.__)("Stretch items"),isActive:"stretch"===value,onClick:()=>handleClick("stretch")}],UIComponent=isToolbar?toolbar_group.A:toolbar_dropdown_menu.A,extraProps=isToolbar?{isCollapsed}:{};return(0,jsx_runtime.jsx)(UIComponent,{icon,popoverProps,label:(0,i18n_build_module.__)("Change items justification"),controls:allControls.filter((elem=>allowedControls.includes(elem.name))),...extraProps})},JustifyContentControl=props=>(0,jsx_runtime.jsx)(justify_content_control_ui,{...props,isToolbar:!1}),justifyContentMap={left:"flex-start",right:"flex-end",center:"center","space-between":"space-between"},alignItemsMap={left:"flex-start",right:"flex-end",center:"center",stretch:"stretch"},verticalAlignmentMap={top:"flex-start",center:"center",bottom:"flex-end",stretch:"stretch","space-between":"space-between"},flexWrapOptions=["wrap","nowrap"],flex={name:"flex",label:(0,i18n_build_module.__)("Flex"),inspectorControls:function FlexLayoutInspectorControls({layout={},onChange,layoutBlockSupport={}}){const{allowOrientation=!0}=layoutBlockSupport;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(component.A,{children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(FlexLayoutJustifyContentControl,{layout,onChange})}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:allowOrientation&&(0,jsx_runtime.jsx)(OrientationControl,{layout,onChange})})]}),(0,jsx_runtime.jsx)(FlexWrapControl,{layout,onChange})]})},toolBarControls:function FlexLayoutToolbarControls({layout={},onChange,layoutBlockSupport}){if(layoutBlockSupport?.allowSwitching)return null;const{allowVerticalAlignment=!0}=layoutBlockSupport;return(0,jsx_runtime.jsxs)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0,children:[(0,jsx_runtime.jsx)(FlexLayoutJustifyContentControl,{layout,onChange,isToolbar:!0}),allowVerticalAlignment&&(0,jsx_runtime.jsx)(FlexLayoutVerticalAlignmentControl,{layout,onChange})]})},getLayoutStyle:function getLayoutStyle({selector,layout,style,blockName,hasBlockGapSupport,layoutDefinitions=LAYOUT_DEFINITIONS}){const{orientation="horizontal"}=layout,blockGapValue=style?.spacing?.blockGap&&!shouldSkipSerialization(blockName,"spacing","blockGap")?getGapCSSValue(style?.spacing?.blockGap,"0.5em"):void 0,justifyContent=justifyContentMap[layout.justifyContent],flexWrap=flexWrapOptions.includes(layout.flexWrap)?layout.flexWrap:"wrap",verticalAlignment=verticalAlignmentMap[layout.verticalAlignment],alignItems=alignItemsMap[layout.justifyContent]||alignItemsMap.left;let output="";const rules=[];return flexWrap&&"wrap"!==flexWrap&&rules.push(`flex-wrap: ${flexWrap}`),"horizontal"===orientation?(verticalAlignment&&rules.push(`align-items: ${verticalAlignment}`),justifyContent&&rules.push(`justify-content: ${justifyContent}`)):(verticalAlignment&&rules.push(`justify-content: ${verticalAlignment}`),rules.push("flex-direction: column"),rules.push(`align-items: ${alignItems}`)),rules.length&&(output=`${appendSelectors(selector)} {\n\t\t\t\t${rules.join("; ")};\n\t\t\t}`),hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"flex",blockGapValue)),output},getOrientation(layout){const{orientation="horizontal"}=layout;return orientation},getAlignments:()=>[]};function FlexLayoutVerticalAlignmentControl({layout,onChange}){const{orientation="horizontal"}=layout,defaultVerticalAlignment="horizontal"===orientation?verticalAlignmentMap.center:verticalAlignmentMap.top,{verticalAlignment=defaultVerticalAlignment}=layout;return(0,jsx_runtime.jsx)(BlockVerticalAlignmentControl,{onChange:value=>{onChange({...layout,verticalAlignment:value})},value:verticalAlignment,controls:"horizontal"===orientation?["top","center","bottom","stretch"]:["top","center","bottom","space-between"]})}const POPOVER_PROPS={placement:"bottom-start"};function FlexLayoutJustifyContentControl({layout,onChange,isToolbar=!1}){const{justifyContent="left",orientation="horizontal"}=layout,onJustificationChange=value=>{onChange({...layout,justifyContent:value})},allowedControls=["left","center","right"];if("horizontal"===orientation?allowedControls.push("space-between"):allowedControls.push("stretch"),isToolbar)return(0,jsx_runtime.jsx)(JustifyContentControl,{allowedControls,value:justifyContent,onChange:onJustificationChange,popoverProps:POPOVER_PROPS});const justificationOptions=[{value:"left",icon:justify_left.A,label:(0,i18n_build_module.__)("Justify items left")},{value:"center",icon:justify_center.A,label:(0,i18n_build_module.__)("Justify items center")},{value:"right",icon:justify_right.A,label:(0,i18n_build_module.__)("Justify items right")}];return"horizontal"===orientation?justificationOptions.push({value:"space-between",icon:justify_space_between.A,label:(0,i18n_build_module.__)("Space between items")}):justificationOptions.push({value:"stretch",icon:justify_stretch.A,label:(0,i18n_build_module.__)("Stretch items")}),(0,jsx_runtime.jsx)(toggle_group_control_component.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Justification"),value:justifyContent,onChange:onJustificationChange,className:"block-editor-hooks__flex-layout-justification-controls",children:justificationOptions.map((({value,icon,label})=>(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{value,icon,label},value)))})}function FlexWrapControl({layout,onChange}){const{flexWrap="wrap"}=layout;return(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Allow to wrap to multiple lines"),onChange:value=>{onChange({...layout,flexWrap:value?"wrap":"nowrap"})},checked:"wrap"===flexWrap})}function OrientationControl({layout,onChange}){const{orientation="horizontal",verticalAlignment,justifyContent}=layout;return(0,jsx_runtime.jsxs)(toggle_group_control_component.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,className:"block-editor-hooks__flex-layout-orientation-controls",label:(0,i18n_build_module.__)("Orientation"),value:orientation,onChange:value=>{let newVerticalAlignment=verticalAlignment,newJustification=justifyContent;return"horizontal"===value?("space-between"===verticalAlignment&&(newVerticalAlignment="center"),"stretch"===justifyContent&&(newJustification="left")):("stretch"===verticalAlignment&&(newVerticalAlignment="top"),"space-between"===justifyContent&&(newJustification="left")),onChange({...layout,orientation:value,verticalAlignment:newVerticalAlignment,justifyContent:newJustification})},children:[(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{icon:arrow_right.A,value:"horizontal",label:(0,i18n_build_module.__)("Horizontal")}),(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{icon:arrow_down.A,value:"vertical",label:(0,i18n_build_module.__)("Vertical")})]})}const flow={name:"default",label:(0,i18n_build_module.__)("Flow"),inspectorControls:function DefaultLayoutInspectorControls(){return null},toolBarControls:function DefaultLayoutToolbarControls(){return null},getLayoutStyle:function getLayoutStyle({selector,style,blockName,hasBlockGapSupport,layoutDefinitions=LAYOUT_DEFINITIONS}){const blockGapStyleValue=getGapCSSValue(style?.spacing?.blockGap);let blockGapValue="";shouldSkipSerialization(blockName,"spacing","blockGap")||(blockGapStyleValue?.top?blockGapValue=getGapCSSValue(blockGapStyleValue?.top):"string"==typeof blockGapStyleValue&&(blockGapValue=getGapCSSValue(blockGapStyleValue)));let output="";return hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"default",blockGapValue)),output},getOrientation:()=>"vertical",getAlignments(layout,isBlockBasedTheme){const alignmentInfo=getAlignmentsInfo(layout);if(void 0!==layout.alignments)return layout.alignments.includes("none")||layout.alignments.unshift("none"),layout.alignments.map((alignment=>({name:alignment,info:alignmentInfo[alignment]})));const alignments=[{name:"left"},{name:"center"},{name:"right"}];if(!isBlockBasedTheme){const{contentSize,wideSize}=layout;contentSize&&alignments.unshift({name:"full"}),wideSize&&alignments.unshift({name:"wide",info:alignmentInfo.wide})}return alignments.unshift({name:"none",info:alignmentInfo.none}),alignments}};var unit_control_utils=__webpack_require__("./packages/components/build-module/unit-control/utils.js"),v_stack_component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),unit_control=__webpack_require__("./packages/components/build-module/unit-control/index.js"),input_prefix_wrapper=__webpack_require__("./packages/components/build-module/input-control/input-prefix-wrapper.js"),build_module_icon=__webpack_require__("./packages/icons/build-module/icon/index.js"),align_none=__webpack_require__("./packages/icons/build-module/library/align-none.js"),stretch_wide=__webpack_require__("./packages/icons/build-module/library/stretch-wide.js"),style_engine_build_module=__webpack_require__("./packages/style-engine/build-module/index.js");const constrained={name:"constrained",label:(0,i18n_build_module.__)("Constrained"),inspectorControls:function DefaultLayoutInspectorControls({layout,onChange,layoutBlockSupport={}}){const{wideSize,contentSize,justifyContent="center"}=layout,{allowJustification=!0,allowCustomContentAndWideSize=!0}=layoutBlockSupport,justificationOptions=[{value:"left",icon:justify_left.A,label:(0,i18n_build_module.__)("Justify items left")},{value:"center",icon:justify_center.A,label:(0,i18n_build_module.__)("Justify items center")},{value:"right",icon:justify_right.A,label:(0,i18n_build_module.__)("Justify items right")}],[availableUnits]=use_settings_useSettings("spacing.units"),units=(0,unit_control_utils.E)({availableUnits:availableUnits||["%","px","em","rem","vw"]});return(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:4,className:"block-editor-hooks__layout-constrained",children:[allowCustomContentAndWideSize&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(unit_control.Ay,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Content width"),labelPosition:"top",value:contentSize||wideSize||"",onChange:nextWidth=>{nextWidth=0>parseFloat(nextWidth)?"0":nextWidth,onChange({...layout,contentSize:nextWidth})},units,prefix:(0,jsx_runtime.jsx)(input_prefix_wrapper.A,{variant:"icon",children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:align_none.A})})}),(0,jsx_runtime.jsx)(unit_control.Ay,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Wide width"),labelPosition:"top",value:wideSize||contentSize||"",onChange:nextWidth=>{nextWidth=0>parseFloat(nextWidth)?"0":nextWidth,onChange({...layout,wideSize:nextWidth})},units,prefix:(0,jsx_runtime.jsx)(input_prefix_wrapper.A,{variant:"icon",children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:stretch_wide.A})})}),(0,jsx_runtime.jsx)("p",{className:"block-editor-hooks__layout-constrained-helptext",children:(0,i18n_build_module.__)("Customize the width for all elements that are assigned to the center or wide columns.")})]}),allowJustification&&(0,jsx_runtime.jsx)(toggle_group_control_component.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Justification"),value:justifyContent,onChange:value=>{onChange({...layout,justifyContent:value})},children:justificationOptions.map((({value,icon,label})=>(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{value,icon,label},value)))})]})},toolBarControls:function DefaultLayoutToolbarControls({layout={},onChange,layoutBlockSupport}){const{allowJustification=!0}=layoutBlockSupport;return allowJustification?(0,jsx_runtime.jsx)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0,children:(0,jsx_runtime.jsx)(DefaultLayoutJustifyContentControl,{layout,onChange})}):null},getLayoutStyle:function getLayoutStyle({selector,layout={},style,blockName,hasBlockGapSupport,layoutDefinitions=LAYOUT_DEFINITIONS}){const{contentSize,wideSize,justifyContent}=layout,blockGapStyleValue=getGapCSSValue(style?.spacing?.blockGap);let blockGapValue="";shouldSkipSerialization(blockName,"spacing","blockGap")||(blockGapStyleValue?.top?blockGapValue=getGapCSSValue(blockGapStyleValue?.top):"string"==typeof blockGapStyleValue&&(blockGapValue=getGapCSSValue(blockGapStyleValue)));const marginLeft="left"===justifyContent?"0 !important":"auto !important",marginRight="right"===justifyContent?"0 !important":"auto !important";let output=contentSize||wideSize?`\n\t\t\t\t\t${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")} {\n\t\t\t\t\t\tmax-width: ${null!=contentSize?contentSize:wideSize};\n\t\t\t\t\t\tmargin-left: ${marginLeft};\n\t\t\t\t\t\tmargin-right: ${marginRight};\n\t\t\t\t\t}\n\t\t\t\t\t${appendSelectors(selector,"> .alignwide")}  {\n\t\t\t\t\t\tmax-width: ${null!=wideSize?wideSize:contentSize};\n\t\t\t\t\t}\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmax-width: none;\n\t\t\t\t\t}\n\t\t\t\t`:"";if("left"===justifyContent?output+=`${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")}\n\t\t\t{ margin-left: ${marginLeft}; }`:"right"===justifyContent&&(output+=`${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")}\n\t\t\t{ margin-right: ${marginRight}; }`),style?.spacing?.padding){(0,style_engine_build_module.np)(style).forEach((rule=>{if("paddingRight"===rule.key){const paddingRightValue="0"===rule.value?"0px":rule.value;output+=`\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmargin-right: calc(${paddingRightValue} * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`}else if("paddingLeft"===rule.key){const paddingLeftValue="0"===rule.value?"0px":rule.value;output+=`\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmargin-left: calc(${paddingLeftValue} * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`}}))}return hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"constrained",blockGapValue)),output},getOrientation:()=>"vertical",getAlignments(layout){const alignmentInfo=getAlignmentsInfo(layout);if(void 0!==layout.alignments)return layout.alignments.includes("none")||layout.alignments.unshift("none"),layout.alignments.map((alignment=>({name:alignment,info:alignmentInfo[alignment]})));const{contentSize,wideSize}=layout,alignments=[{name:"left"},{name:"center"},{name:"right"}];return contentSize&&alignments.unshift({name:"full"}),wideSize&&alignments.unshift({name:"wide",info:alignmentInfo.wide}),alignments.unshift({name:"none",info:alignmentInfo.none}),alignments}},constrained_POPOVER_PROPS={placement:"bottom-start"};function DefaultLayoutJustifyContentControl({layout,onChange}){const{justifyContent="center"}=layout;return(0,jsx_runtime.jsx)(JustifyContentControl,{allowedControls:["left","center","right"],value:justifyContent,onChange:value=>{onChange({...layout,justifyContent:value})},popoverProps:constrained_POPOVER_PROPS})}var base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),range_control=__webpack_require__("./packages/components/build-module/range-control/index.js"),number_control=__webpack_require__("./packages/components/build-module/number-control/index.js"),toggle_group_control_option_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option/component.js");const RANGE_CONTROL_MAX_VALUES={px:600,"%":100,vw:100,vh:100,em:38,rem:38,svw:100,lvw:100,dvw:100,svh:100,lvh:100,dvh:100,vi:100,svi:100,lvi:100,dvi:100,vb:100,svb:100,lvb:100,dvb:100,vmin:100,svmin:100,lvmin:100,dvmin:100,vmax:100,svmax:100,lvmax:100,dvmax:100},units=[{value:"px",label:"px",default:0},{value:"rem",label:"rem",default:0},{value:"em",label:"em",default:0}],grid={name:"grid",label:(0,i18n_build_module.__)("Grid"),inspectorControls:function GridLayoutInspectorControls({layout={},onChange,layoutBlockSupport={}}){const{allowSizingOnChildren=!1}=layoutBlockSupport,showColumnsControl=window.__experimentalEnableGridInteractivity||!!layout?.columnCount,showMinWidthControl=window.__experimentalEnableGridInteractivity||!layout?.columnCount;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(GridLayoutTypeControl,{layout,onChange}),(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:4,children:[showColumnsControl&&(0,jsx_runtime.jsx)(GridLayoutColumnsAndRowsControl,{layout,onChange,allowSizingOnChildren}),showMinWidthControl&&(0,jsx_runtime.jsx)(GridLayoutMinimumWidthControl,{layout,onChange})]})]})},toolBarControls:function GridLayoutToolbarControls(){return null},getLayoutStyle:function getLayoutStyle({selector,layout,style,blockName,hasBlockGapSupport,layoutDefinitions=LAYOUT_DEFINITIONS}){const{minimumColumnWidth=null,columnCount=null,rowCount=null}=layout;const blockGapValue=style?.spacing?.blockGap&&!shouldSkipSerialization(blockName,"spacing","blockGap")?getGapCSSValue(style?.spacing?.blockGap,"0.5em"):void 0;let output="";const rules=[];if(minimumColumnWidth&&columnCount>0){const maxValue=`max(${minimumColumnWidth}, ( 100% - (${blockGapValue||"1.2rem"}*${columnCount-1}) ) / ${columnCount})`;rules.push(`grid-template-columns: repeat(auto-fill, minmax(${maxValue}, 1fr))`,"container-type: inline-size"),rowCount&&rules.push(`grid-template-rows: repeat(${rowCount}, minmax(1rem, auto))`)}else columnCount?(rules.push(`grid-template-columns: repeat(${columnCount}, minmax(0, 1fr))`),rowCount&&rules.push(`grid-template-rows: repeat(${rowCount}, minmax(1rem, auto))`)):rules.push(`grid-template-columns: repeat(auto-fill, minmax(min(${minimumColumnWidth||"12rem"}, 100%), 1fr))`,"container-type: inline-size");return rules.length&&(output=`${appendSelectors(selector)} { ${rules.join("; ")}; }`),hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"grid",blockGapValue)),output},getOrientation:()=>"horizontal",getAlignments:()=>[]};function GridLayoutMinimumWidthControl({layout,onChange}){const{minimumColumnWidth,columnCount,isManualPlacement}=layout,value=minimumColumnWidth||(isManualPlacement||columnCount?null:"12rem"),[quantity,unit="rem"]=(0,unit_control_utils.bu)(value);return(0,jsx_runtime.jsxs)("fieldset",{children:[(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"legend",children:(0,i18n_build_module.__)("Minimum column width")}),(0,jsx_runtime.jsxs)(component.A,{gap:4,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(unit_control.Ay,{size:"__unstable-large",onChange:newValue=>{onChange({...layout,minimumColumnWidth:""===newValue?void 0:newValue})},onUnitChange:newUnit=>{let newValue;["em","rem"].includes(newUnit)&&"px"===unit?newValue=(quantity/16).toFixed(2)+newUnit:["em","rem"].includes(unit)&&"px"===newUnit&&(newValue=Math.round(16*quantity)+newUnit),onChange({...layout,minimumColumnWidth:newValue})},value,units,min:0,label:(0,i18n_build_module.__)("Minimum column width"),hideLabelFromVision:!0})}),(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(range_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,onChange:next=>{onChange({...layout,minimumColumnWidth:[next,unit].join("")})},value:quantity||0,min:0,max:RANGE_CONTROL_MAX_VALUES[unit]||600,withInputField:!1,label:(0,i18n_build_module.__)("Minimum column width"),hideLabelFromVision:!0})})]})]})}function GridLayoutColumnsAndRowsControl({layout,onChange,allowSizingOnChildren}){const defaultColumnCount=window.__experimentalEnableGridInteractivity?void 0:3,{columnCount=defaultColumnCount,rowCount,isManualPlacement}=layout;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("fieldset",{children:[(!window.__experimentalEnableGridInteractivity||!isManualPlacement)&&(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"legend",children:(0,i18n_build_module.__)("Columns")}),(0,jsx_runtime.jsxs)(component.A,{gap:4,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(number_control.A,{size:"__unstable-large",onChange:value=>{if(window.__experimentalEnableGridInteractivity){const newColumnCount=""===value||"0"===value?isManualPlacement?1:void 0:parseInt(value,10);onChange({...layout,columnCount:newColumnCount})}else{const newColumnCount=""===value||"0"===value?1:parseInt(value,10);onChange({...layout,columnCount:newColumnCount})}},value:columnCount,min:1,label:(0,i18n_build_module.__)("Columns"),hideLabelFromVision:!window.__experimentalEnableGridInteractivity||!isManualPlacement})}),(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:window.__experimentalEnableGridInteractivity&&allowSizingOnChildren&&isManualPlacement?(0,jsx_runtime.jsx)(number_control.A,{size:"__unstable-large",onChange:value=>{const newRowCount=""===value||"0"===value?1:parseInt(value,10);onChange({...layout,rowCount:newRowCount})},value:rowCount,min:1,label:(0,i18n_build_module.__)("Rows")}):(0,jsx_runtime.jsx)(range_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,value:null!=columnCount?columnCount:1,onChange:value=>onChange({...layout,columnCount:""===value||"0"===value?1:value}),min:1,max:16,withInputField:!1,label:(0,i18n_build_module.__)("Columns"),hideLabelFromVision:!0})})]})]})})}function GridLayoutTypeControl({layout,onChange}){const{columnCount,rowCount,minimumColumnWidth,isManualPlacement}=layout,[tempColumnCount,setTempColumnCount]=(0,react.useState)(columnCount||3),[tempRowCount,setTempRowCount]=(0,react.useState)(rowCount),[tempMinimumColumnWidth,setTempMinimumColumnWidth]=(0,react.useState)(minimumColumnWidth||"12rem"),gridPlacement=isManualPlacement||columnCount&&!window.__experimentalEnableGridInteractivity?"manual":"auto",helpText="manual"===gridPlacement?(0,i18n_build_module.__)("Grid items can be manually placed in any position on the grid."):(0,i18n_build_module.__)("Grid items are placed automatically depending on their order.");return(0,jsx_runtime.jsxs)(toggle_group_control_component.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Grid item position"),value:gridPlacement,onChange:value=>{"manual"===value?setTempMinimumColumnWidth(minimumColumnWidth||"12rem"):(setTempColumnCount(columnCount||3),setTempRowCount(rowCount)),onChange({...layout,columnCount:"manual"===value?tempColumnCount:null,rowCount:"manual"===value&&window.__experimentalEnableGridInteractivity?tempRowCount:void 0,isManualPlacement:!("manual"!==value||!window.__experimentalEnableGridInteractivity)||void 0,minimumColumnWidth:"auto"===value?tempMinimumColumnWidth:null})},isBlock:!0,help:window.__experimentalEnableGridInteractivity?helpText:void 0,children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"auto",label:(0,i18n_build_module.__)("Auto")},"auto"),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"manual",label:(0,i18n_build_module.__)("Manual")},"manual")]})}const layoutTypes=[flow,flex,constrained,grid];function getLayoutType(name="default"){return layoutTypes.find((layoutType=>layoutType.name===name))}const defaultLayout={type:"default"},Layout=(0,react.createContext)(defaultLayout),LayoutProvider=Layout.Provider;function useLayout(){return(0,react.useContext)(Layout)}const use_available_alignments_EMPTY_ARRAY=[],use_available_alignments_DEFAULT_CONTROLS=["none","left","center","right","wide","full"],WIDE_CONTROLS=["wide","full"];function useAvailableAlignments(controls=use_available_alignments_DEFAULT_CONTROLS){controls.includes("none")||(controls=["none",...controls]);const isNoneOnly=1===controls.length&&"none"===controls[0],[wideControlsEnabled,themeSupportsLayout,isBlockBasedTheme]=(0,use_select.A)((select=>{var _settings$alignWide;if(isNoneOnly)return[!1,!1,!1];const settings=select(store_store).getSettings();return[null!==(_settings$alignWide=settings.alignWide)&&void 0!==_settings$alignWide&&_settings$alignWide,settings.supportsLayout,settings.__unstableIsBlockBasedTheme]}),[isNoneOnly]),layout=useLayout();if(isNoneOnly)return use_available_alignments_EMPTY_ARRAY;const layoutType=getLayoutType(layout?.type);if(themeSupportsLayout){const alignments=layoutType.getAlignments(layout,isBlockBasedTheme).filter((alignment=>controls.includes(alignment.name)));return 1===alignments.length&&"none"===alignments[0].name?use_available_alignments_EMPTY_ARRAY:alignments}if("default"!==layoutType.name&&"constrained"!==layoutType.name)return use_available_alignments_EMPTY_ARRAY;const alignments=controls.filter((control=>layout.alignments?layout.alignments.includes(control):!(!wideControlsEnabled&&WIDE_CONTROLS.includes(control))&&use_available_alignments_DEFAULT_CONTROLS.includes(control))).map((name=>({name})));return 1===alignments.length&&"none"===alignments[0].name?use_available_alignments_EMPTY_ARRAY:alignments}var position_left=__webpack_require__("./packages/icons/build-module/library/position-left.js"),position_center=__webpack_require__("./packages/icons/build-module/library/position-center.js"),position_right=__webpack_require__("./packages/icons/build-module/library/position-right.js"),svg=__webpack_require__("./packages/primitives/build-module/svg/index.js");const stretch_full_width=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M5 4h14v11H5V4Zm11 16H8v-1.5h8V20Z"})}),constants_BLOCK_ALIGNMENTS_CONTROLS={none:{icon:align_none.A,title:(0,i18n_build_module._x)("None","Alignment option")},left:{icon:position_left.A,title:(0,i18n_build_module.__)("Align left")},center:{icon:position_center.A,title:(0,i18n_build_module.__)("Align center")},right:{icon:position_right.A,title:(0,i18n_build_module.__)("Align right")},wide:{icon:stretch_wide.A,title:(0,i18n_build_module.__)("Wide width")},full:{icon:stretch_full_width,title:(0,i18n_build_module.__)("Full width")}};const block_alignment_control_ui=function BlockAlignmentUI({value,onChange,controls,isToolbar,isCollapsed=!0}){const enabledControls=useAvailableAlignments(controls);if(!!!enabledControls.length)return null;function onChangeAlignment(align){onChange([value,"none"].includes(align)?void 0:align)}const activeAlignmentControl=constants_BLOCK_ALIGNMENTS_CONTROLS[value],defaultAlignmentControl=constants_BLOCK_ALIGNMENTS_CONTROLS.none,UIComponent=isToolbar?toolbar_group.A:toolbar_dropdown_menu.A,commonProps={icon:activeAlignmentControl?activeAlignmentControl.icon:defaultAlignmentControl.icon,label:(0,i18n_build_module.__)("Align")},extraProps=isToolbar?{isCollapsed,controls:enabledControls.map((({name:controlName})=>({...constants_BLOCK_ALIGNMENTS_CONTROLS[controlName],isActive:value===controlName||!value&&"none"===controlName,role:isCollapsed?"menuitemradio":void 0,onClick:()=>onChangeAlignment(controlName)})))}:{toggleProps:{description:(0,i18n_build_module.__)("Change alignment")},children:({onClose})=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(menu_group.A,{className:"block-editor-block-alignment-control__menu-group",children:enabledControls.map((({name:controlName,info})=>{const{icon,title}=constants_BLOCK_ALIGNMENTS_CONTROLS[controlName],isSelected=controlName===value||!value&&"none"===controlName;return(0,jsx_runtime.jsx)(menu_item.A,{icon,iconPosition:"left",className:(0,clsx.A)("components-dropdown-menu__menu-item",{"is-active":isSelected}),isSelected,onClick:()=>{onChangeAlignment(controlName),onClose()},role:"menuitemradio",info,children:title},controlName)}))})})};return(0,jsx_runtime.jsx)(UIComponent,{...commonProps,...extraProps})},BlockAlignmentControl=props=>(0,jsx_runtime.jsx)(block_alignment_control_ui,{...props,isToolbar:!1}),BlockAlignmentToolbar=props=>(0,jsx_runtime.jsx)(block_alignment_control_ui,{...props,isToolbar:!0});function useBlockEditingMode(mode){const context=useBlockEditContext(),{clientId=""}=context,{setBlockEditingMode,unsetBlockEditingMode}=(0,use_dispatch.A)(store_store),globalBlockEditingMode=(0,use_select.A)((select=>clientId?null:select(store_store).getBlockEditingMode()),[clientId]);return(0,react.useEffect)((()=>(mode&&setBlockEditingMode(clientId,mode),()=>{mode&&unsetBlockEditingMode(clientId)})),[clientId,mode,setBlockEditingMode,unsetBlockEditingMode]),clientId?context[blockEditingModeKey]:globalBlockEditingMode}const ALL_ALIGNMENTS=["left","center","right","wide","full"],WIDE_ALIGNMENTS=["wide","full"];function getValidAlignments(blockAlign,hasWideBlockSupport=!0,hasWideEnabled=!0){let validAlignments;return validAlignments=Array.isArray(blockAlign)?ALL_ALIGNMENTS.filter((value=>blockAlign.includes(value))):!0===blockAlign?[...ALL_ALIGNMENTS]:[],!hasWideEnabled||!0===blockAlign&&!hasWideBlockSupport?validAlignments.filter((alignment=>!WIDE_ALIGNMENTS.includes(alignment))):validAlignments}const align={shareWithChildBlocks:!0,edit:function BlockEditAlignmentToolbarControlsPure({name:blockName,align,setAttributes}){const validAlignments=useAvailableAlignments(getValidAlignments((0,build_module.bI)(blockName,"align"),(0,build_module.pN)(blockName,"alignWide",!0))).map((({name})=>name)),blockEditingMode=useBlockEditingMode();return validAlignments.length&&"default"===blockEditingMode?(0,jsx_runtime.jsx)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0,children:(0,jsx_runtime.jsx)(BlockAlignmentControl,{value:align,onChange:nextAlign=>{if(!nextAlign){const blockType=(0,build_module.E7)(blockName),blockDefaultAlign=blockType?.attributes?.align?.default;blockDefaultAlign&&(nextAlign="")}setAttributes({align:nextAlign})},controls:validAlignments})}):null},useBlockProps:function useBlockProps({name,align}){const blockAllowedAlignments=getValidAlignments((0,build_module.bI)(name,"align"),(0,build_module.pN)(name,"alignWide",!0));if(useAvailableAlignments(blockAllowedAlignments).some((alignment=>alignment.name===align)))return{"data-align":align};return{}},addSaveProps:function addAssignedAlign(props,blockType,attributes){const{align}=attributes,blockAlign=(0,build_module.bI)(blockType,"align"),hasWideBlockSupport=(0,build_module.pN)(blockType,"alignWide",!0),isAlignValid=getValidAlignments(blockAlign,hasWideBlockSupport).includes(align);isAlignValid&&(props.className=(0,clsx.A)(`align${align}`,props.className));return props},attributeKeys:["align"],hasSupport:name=>(0,build_module.pN)(name,"align",!1)};(0,hooks_build_module.U2)("blocks.registerBlockType","core/editor/align/addAttribute",(function addAttribute(settings){var _settings$attributes$;return"type"in(null!==(_settings$attributes$=settings.attributes?.align)&&void 0!==_settings$attributes$?_settings$attributes$:{})||(0,build_module.pN)(settings,"align")&&(settings.attributes={...settings.attributes,align:{type:"string",enum:[...ALL_ALIGNMENTS,""]}}),settings}));var context=__webpack_require__("./packages/components/build-module/tools-panel/context.js");const InspectorControlsDefault=(0,slot_fill.QJ)("InspectorControls"),InspectorControlsAdvanced=(0,slot_fill.QJ)("InspectorAdvancedControls"),InspectorControlsBindings=(0,slot_fill.QJ)("InspectorControlsBindings"),InspectorControlsBackground=(0,slot_fill.QJ)("InspectorControlsBackground"),InspectorControlsBorder=(0,slot_fill.QJ)("InspectorControlsBorder"),InspectorControlsColor=(0,slot_fill.QJ)("InspectorControlsColor"),InspectorControlsFilter=(0,slot_fill.QJ)("InspectorControlsFilter"),InspectorControlsDimensions=(0,slot_fill.QJ)("InspectorControlsDimensions"),InspectorControlsPosition=(0,slot_fill.QJ)("InspectorControlsPosition"),InspectorControlsTypography=(0,slot_fill.QJ)("InspectorControlsTypography"),InspectorControlsListView=(0,slot_fill.QJ)("InspectorControlsListView"),InspectorControlsStyles=(0,slot_fill.QJ)("InspectorControlsStyles"),inspector_controls_groups={default:InspectorControlsDefault,advanced:InspectorControlsAdvanced,background:InspectorControlsBackground,bindings:InspectorControlsBindings,border:InspectorControlsBorder,color:InspectorControlsColor,dimensions:InspectorControlsDimensions,effects:(0,slot_fill.QJ)("InspectorControlsEffects"),filter:InspectorControlsFilter,list:InspectorControlsListView,position:InspectorControlsPosition,settings:InspectorControlsDefault,styles:InspectorControlsStyles,typography:InspectorControlsTypography};function InspectorControlsFill({children,group="default",__experimentalGroup,resetAllFilter}){__experimentalGroup&&((0,deprecated_build_module.A)("`__experimentalGroup` property in `InspectorControlsFill`",{since:"6.2",version:"6.4",alternative:"`group`"}),group=__experimentalGroup);const context=useBlockEditContext(),Fill=inspector_controls_groups[group]?.Fill;return Fill?context[mayDisplayControlsKey]?(0,jsx_runtime.jsx)(style_provider.A,{document,children:(0,jsx_runtime.jsx)(Fill,{children:fillProps=>(0,jsx_runtime.jsx)(ToolsPanelInspectorControl,{fillProps,children,resetAllFilter})})}):null:(!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)(`Unknown InspectorControls group "${group}" provided.`),null)}function RegisterResetAll({resetAllFilter,children}){const{registerResetAllFilter,deregisterResetAllFilter}=(0,react.useContext)(context.z);return(0,react.useEffect)((()=>{if(resetAllFilter&&registerResetAllFilter&&deregisterResetAllFilter)return registerResetAllFilter(resetAllFilter),()=>{deregisterResetAllFilter(resetAllFilter)}}),[resetAllFilter,registerResetAllFilter,deregisterResetAllFilter]),children}function ToolsPanelInspectorControl({children,resetAllFilter,fillProps}){const{forwardedContext=[]}=fillProps,innerMarkup=(0,jsx_runtime.jsx)(RegisterResetAll,{resetAllFilter,children});return forwardedContext.reduce(((inner,[Provider,props])=>(0,jsx_runtime.jsx)(Provider,{...props,children:inner})),innerMarkup)}var MotionContext=__webpack_require__("./node_modules/framer-motion/dist/es/context/MotionContext/index.mjs"),tools_panel_component=__webpack_require__("./packages/components/build-module/tools-panel/tools-panel/component.js");function BlockSupportToolsPanel({children,group,label}){const{updateBlockAttributes}=(0,use_dispatch.A)(store_store),{getBlockAttributes,getMultiSelectedBlockClientIds,getSelectedBlockClientId,hasMultiSelection}=(0,use_select.A)(store_store),dropdownMenuProps=useToolsPanelDropdownMenuProps(),panelId=getSelectedBlockClientId(),resetAll=(0,react.useCallback)(((resetFilters=[])=>{const newAttributes={},clientIds=hasMultiSelection()?getMultiSelectedBlockClientIds():[panelId];clientIds.forEach((clientId=>{const{style}=getBlockAttributes(clientId);let newBlockAttributes={style};resetFilters.forEach((resetFilter=>{newBlockAttributes={...newBlockAttributes,...resetFilter(newBlockAttributes)}})),newBlockAttributes={...newBlockAttributes,style:utils_cleanEmptyObject(newBlockAttributes.style)},newAttributes[clientId]=newBlockAttributes})),updateBlockAttributes(clientIds,newAttributes,!0)}),[getBlockAttributes,getMultiSelectedBlockClientIds,hasMultiSelection,panelId,updateBlockAttributes]);return(0,jsx_runtime.jsx)(tools_panel_component.A,{className:`${group}-block-support-panel`,label,resetAll,panelId,hasInnerWrapper:!0,shouldRenderPlaceholderItems:!0,__experimentalFirstVisibleItemClass:"first",__experimentalLastVisibleItemClass:"last",dropdownMenuProps,children},panelId)}function BlockSupportSlotContainer({Slot,fillProps,...props}){const toolsPanelContext=(0,react.useContext)(context.z),computedFillProps=(0,react.useMemo)((()=>{var _fillProps$forwardedC;return{...null!=fillProps?fillProps:{},forwardedContext:[...null!==(_fillProps$forwardedC=fillProps?.forwardedContext)&&void 0!==_fillProps$forwardedC?_fillProps$forwardedC:[],[context.z.Provider,{value:toolsPanelContext}]]}}),[toolsPanelContext,fillProps]);return(0,jsx_runtime.jsx)(Slot,{...props,fillProps:computedFillProps,bubblesVirtually:!0})}function InspectorControlsSlot({__experimentalGroup,group="default",label,fillProps,...props}){__experimentalGroup&&((0,deprecated_build_module.A)("`__experimentalGroup` property in `InspectorControlsSlot`",{since:"6.2",version:"6.4",alternative:"`group`"}),group=__experimentalGroup);const Slot=inspector_controls_groups[group]?.Slot,fills=(0,use_slot_fills.A)(Slot?.__unstableName),motionContextValue=(0,react.useContext)(MotionContext.A),computedFillProps=(0,react.useMemo)((()=>{var _fillProps$forwardedC;return{...null!=fillProps?fillProps:{},forwardedContext:[...null!==(_fillProps$forwardedC=fillProps?.forwardedContext)&&void 0!==_fillProps$forwardedC?_fillProps$forwardedC:[],[MotionContext.A.Provider,{value:motionContextValue}]]}}),[motionContextValue,fillProps]);return Slot?fills?.length?label?(0,jsx_runtime.jsx)(BlockSupportToolsPanel,{group,label,children:(0,jsx_runtime.jsx)(BlockSupportSlotContainer,{...props,fillProps:computedFillProps,Slot})}):(0,jsx_runtime.jsx)(Slot,{...props,fillProps:computedFillProps,bubblesVirtually:!0}):null:(!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)(`Unknown InspectorControls group "${group}" provided.`),null)}const InspectorControls=InspectorControlsFill;InspectorControls.Slot=InspectorControlsSlot;const InspectorAdvancedControls=props=>(0,jsx_runtime.jsx)(InspectorControlsFill,{...props,group:"advanced"});InspectorAdvancedControls.Slot=props=>(0,jsx_runtime.jsx)(InspectorControlsSlot,{...props,group:"advanced"}),InspectorAdvancedControls.slotName="InspectorAdvancedControls";const inspector_controls=InspectorControls;var tools_panel_item_component=__webpack_require__("./packages/components/build-module/tools-panel/tools-panel-item/component.js"),item_group_component=__webpack_require__("./packages/components/build-module/item-group/item-group/component.js"),h_stack_component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),truncate_component=__webpack_require__("./packages/components/build-module/truncate/component.js"),visually_hidden_component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),dropdown=__webpack_require__("./packages/components/build-module/dropdown/index.js"),dropdown_content_wrapper=__webpack_require__("./packages/components/build-module/dropdown/dropdown-content-wrapper.js"),build_module_placeholder=__webpack_require__("./packages/components/build-module/placeholder/index.js"),spinner=__webpack_require__("./packages/components/build-module/spinner/index.js"),drop_zone=__webpack_require__("./packages/components/build-module/drop-zone/index.js"),focal_point_picker=__webpack_require__("./packages/components/build-module/focal-point-picker/index.js"),get_filename=__webpack_require__("./packages/url/build-module/get-filename.js"),dom_build_module=__webpack_require__("./packages/dom/build-module/index.js"),blob_build_module=__webpack_require__("./packages/blob/build-module/index.js"),toolbar_button=__webpack_require__("./packages/components/build-module/toolbar/toolbar-button/index.js"),menu=__webpack_require__("./packages/components/build-module/navigable-container/menu.js"),form_file_upload=__webpack_require__("./packages/components/build-module/form-file-upload/index.js"),with_filters=__webpack_require__("./packages/components/build-module/higher-order/with-filters/index.js"),with_dispatch=__webpack_require__("./packages/data/build-module/components/with-dispatch/index.js"),keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js"),media=__webpack_require__("./packages/icons/build-module/library/media.js"),upload=__webpack_require__("./packages/icons/build-module/library/upload.js"),post_featured_image=__webpack_require__("./packages/icons/build-module/library/post-featured-image.js"),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),strip_html=__webpack_require__("./packages/dom/build-module/dom/strip-html.js");const media_upload=(0,with_filters.A)("editor.MediaUpload")((()=>null));const check=function MediaUploadCheck({fallback=null,children}){const hasUploadPermissions=(0,use_select.A)((select=>{const{getSettings}=select(store_store);return!!getSettings().mediaUpload}),[]);return hasUploadPermissions?children:fallback};var text_control=__webpack_require__("./packages/components/build-module/text-control/index.js"),input_suffix_wrapper=__webpack_require__("./packages/components/build-module/input-control/input-suffix-wrapper.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),notice=__webpack_require__("./packages/components/build-module/notice/index.js"),objects=__webpack_require__("./packages/is-shallow-equal/build-module/objects.js"),keyboard_return=__webpack_require__("./packages/icons/build-module/library/keyboard-return.js"),AnimatePresence=__webpack_require__("./node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs"),motion=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion.mjs"),chevron_left_small=__webpack_require__("./packages/icons/build-module/library/chevron-left-small.js"),chevron_right_small=__webpack_require__("./packages/icons/build-module/library/chevron-right-small.js"),use_reduced_motion=__webpack_require__("./packages/compose/build-module/hooks/use-reduced-motion/index.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js");const settings_drawer=function LinkSettingsDrawer({children,settingsOpen,setSettingsOpen}){const prefersReducedMotion=(0,use_reduced_motion.A)(),MaybeAnimatePresence=prefersReducedMotion?react.Fragment:AnimatePresence.N,MaybeMotionDiv=prefersReducedMotion?"div":motion.P.div,settingsDrawerId=`link-control-settings-drawer-${(0,use_instance_id.A)(LinkSettingsDrawer)}`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"block-editor-link-control__drawer-toggle","aria-expanded":settingsOpen,onClick:()=>setSettingsOpen(!settingsOpen),icon:(0,i18n_build_module.V8)()?chevron_left_small.A:chevron_right_small.A,"aria-controls":settingsDrawerId,children:(0,i18n_build_module._x)("Advanced","Additional link settings")}),(0,jsx_runtime.jsx)(MaybeAnimatePresence,{children:settingsOpen&&(0,jsx_runtime.jsx)(MaybeMotionDiv,{className:"block-editor-link-control__drawer",hidden:!settingsOpen,id:settingsDrawerId,initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.1},children:(0,jsx_runtime.jsx)("div",{className:"block-editor-link-control__drawer-inner",children})})})]})};var input_control=__webpack_require__("./packages/components/build-module/input-control/index.js"),popover=__webpack_require__("./packages/components/build-module/popover/index.js"),with_spoken_messages=__webpack_require__("./packages/components/build-module/higher-order/with-spoken-messages/index.js"),debounce=__webpack_require__("./packages/compose/build-module/utils/debounce/index.js"),with_safe_timeout=__webpack_require__("./packages/compose/build-module/higher-order/with-safe-timeout/index.js"),with_instance_id=__webpack_require__("./packages/compose/build-module/higher-order/with-instance-id/index.js"),with_select=__webpack_require__("./packages/data/build-module/components/with-select/index.js"),is_url=__webpack_require__("./packages/url/build-module/is-url.js");function isFunction(maybeFunc){return"function"==typeof maybeFunc}class URLInput extends react.Component{constructor(props){super(props),this.onChange=this.onChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.selectLink=this.selectLink.bind(this),this.handleOnClick=this.handleOnClick.bind(this),this.bindSuggestionNode=this.bindSuggestionNode.bind(this),this.autocompleteRef=props.autocompleteRef||(0,react.createRef)(),this.inputRef=(0,react.createRef)(),this.updateSuggestions=(0,debounce.s)(this.updateSuggestions.bind(this),200),this.suggestionNodes=[],this.suggestionsRequest=null,this.state={suggestions:[],showSuggestions:!1,suggestionsValue:null,selectedSuggestion:null,suggestionsListboxId:"",suggestionOptionIdPrefix:""}}componentDidUpdate(prevProps){const{showSuggestions,selectedSuggestion}=this.state,{value,__experimentalShowInitialSuggestions=!1}=this.props;showSuggestions&&null!==selectedSuggestion&&this.suggestionNodes[selectedSuggestion]&&this.suggestionNodes[selectedSuggestion].scrollIntoView({behavior:"instant",block:"nearest",inline:"nearest"}),prevProps.value===value||this.props.disableSuggestions||(value?.length?this.updateSuggestions(value):__experimentalShowInitialSuggestions&&this.updateSuggestions())}componentDidMount(){this.shouldShowInitialSuggestions()&&this.updateSuggestions()}componentWillUnmount(){this.suggestionsRequest?.cancel?.(),this.suggestionsRequest=null}bindSuggestionNode(index){return ref=>{this.suggestionNodes[index]=ref}}shouldShowInitialSuggestions(){const{__experimentalShowInitialSuggestions=!1,value}=this.props;return __experimentalShowInitialSuggestions&&!(value&&value.length)}updateSuggestions(value=""){const{__experimentalFetchLinkSuggestions:fetchLinkSuggestions,__experimentalHandleURLSuggestions:handleURLSuggestions}=this.props;if(!fetchLinkSuggestions)return;const isInitialSuggestions=!value?.length;if(value=value.trim(),!isInitialSuggestions&&(value.length<2||!handleURLSuggestions&&(0,is_url.m)(value)))return this.suggestionsRequest?.cancel?.(),this.suggestionsRequest=null,void this.setState({suggestions:[],showSuggestions:!1,suggestionsValue:value,selectedSuggestion:null,loading:!1});this.setState({selectedSuggestion:null,loading:!0});const request=fetchLinkSuggestions(value,{isInitialSuggestions});request.then((suggestions=>{this.suggestionsRequest===request&&(this.setState({suggestions,suggestionsValue:value,loading:!1,showSuggestions:!!suggestions.length}),suggestions.length?this.props.debouncedSpeak((0,i18n_build_module.nv)((0,i18n_build_module._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",suggestions.length),suggestions.length),"assertive"):this.props.debouncedSpeak((0,i18n_build_module.__)("No results."),"assertive"))})).catch((()=>{this.suggestionsRequest===request&&this.setState({loading:!1})})).finally((()=>{this.suggestionsRequest===request&&(this.suggestionsRequest=null)})),this.suggestionsRequest=request}onChange(newValue){this.props.onChange(newValue)}onFocus(){const{suggestions}=this.state,{disableSuggestions,value}=this.props;!value||disableSuggestions||suggestions&&suggestions.length||null!==this.suggestionsRequest||this.updateSuggestions(value)}onKeyDown(event){this.props.onKeyDown?.(event);const{showSuggestions,selectedSuggestion,suggestions,loading}=this.state;if(!showSuggestions||!suggestions.length||loading){switch(event.keyCode){case keycodes_build_module.UP:0!==event.target.selectionStart&&(event.preventDefault(),event.target.setSelectionRange(0,0));break;case keycodes_build_module.PX:this.props.value.length!==event.target.selectionStart&&(event.preventDefault(),event.target.setSelectionRange(this.props.value.length,this.props.value.length));break;case keycodes_build_module.Fm:this.props.onSubmit&&(event.preventDefault(),this.props.onSubmit(null,event))}return}const suggestion=this.state.suggestions[this.state.selectedSuggestion];switch(event.keyCode){case keycodes_build_module.UP:{event.preventDefault();const previousIndex=selectedSuggestion?selectedSuggestion-1:suggestions.length-1;this.setState({selectedSuggestion:previousIndex});break}case keycodes_build_module.PX:{event.preventDefault();const nextIndex=null===selectedSuggestion||selectedSuggestion===suggestions.length-1?0:selectedSuggestion+1;this.setState({selectedSuggestion:nextIndex});break}case keycodes_build_module.wn:null!==this.state.selectedSuggestion&&(this.selectLink(suggestion),this.props.speak((0,i18n_build_module.__)("Link selected.")));break;case keycodes_build_module.Fm:event.preventDefault(),null!==this.state.selectedSuggestion?(this.selectLink(suggestion),this.props.onSubmit&&this.props.onSubmit(suggestion,event)):this.props.onSubmit&&this.props.onSubmit(null,event)}}selectLink(suggestion){this.props.onChange(suggestion.url,suggestion),this.setState({selectedSuggestion:null,showSuggestions:!1})}handleOnClick(suggestion){this.selectLink(suggestion),this.inputRef.current.focus()}static getDerivedStateFromProps({value,instanceId,disableSuggestions,__experimentalShowInitialSuggestions=!1},{showSuggestions}){let shouldShowSuggestions=showSuggestions;const hasValue=value&&value.length;return __experimentalShowInitialSuggestions||hasValue||(shouldShowSuggestions=!1),!0===disableSuggestions&&(shouldShowSuggestions=!1),{showSuggestions:shouldShowSuggestions,suggestionsListboxId:`block-editor-url-input-suggestions-${instanceId}`,suggestionOptionIdPrefix:`block-editor-url-input-suggestion-${instanceId}`}}render(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[this.renderControl(),this.renderSuggestions()]})}renderControl(){const{label=null,className,isFullWidth,instanceId,placeholder=(0,i18n_build_module.__)("Paste URL or type to search"),__experimentalRenderControl:renderControl,value="",hideLabelFromVision=!1}=this.props,{loading,showSuggestions,selectedSuggestion,suggestionsListboxId,suggestionOptionIdPrefix}=this.state,inputId=`url-input-control-${instanceId}`,controlProps={id:inputId,label,className:(0,clsx.A)("block-editor-url-input",className,{"is-full-width":isFullWidth}),hideLabelFromVision},inputProps={id:inputId,value,required:!0,type:"text",onChange:this.onChange,onFocus:this.onFocus,placeholder,onKeyDown:this.onKeyDown,role:"combobox","aria-label":label?void 0:(0,i18n_build_module.__)("URL"),"aria-expanded":showSuggestions,"aria-autocomplete":"list","aria-owns":suggestionsListboxId,"aria-activedescendant":null!==selectedSuggestion?`${suggestionOptionIdPrefix}-${selectedSuggestion}`:void 0,ref:this.inputRef,suffix:this.props.suffix};return renderControl?renderControl(controlProps,inputProps,loading):(0,jsx_runtime.jsxs)(base_control.Ay,{__nextHasNoMarginBottom:!0,...controlProps,children:[(0,jsx_runtime.jsx)(input_control.Ay,{...inputProps,__next40pxDefaultSize:!0}),loading&&(0,jsx_runtime.jsx)(spinner.Ay,{})]})}renderSuggestions(){const{className,__experimentalRenderSuggestions:renderSuggestions}=this.props,{showSuggestions,suggestions,suggestionsValue,selectedSuggestion,suggestionsListboxId,suggestionOptionIdPrefix,loading}=this.state;if(!showSuggestions||0===suggestions.length)return null;const suggestionsListProps={id:suggestionsListboxId,ref:this.autocompleteRef,role:"listbox"},buildSuggestionItemProps=(suggestion,index)=>({role:"option",tabIndex:"-1",id:`${suggestionOptionIdPrefix}-${index}`,ref:this.bindSuggestionNode(index),"aria-selected":index===selectedSuggestion||void 0});return isFunction(renderSuggestions)?renderSuggestions({suggestions,selectedSuggestion,suggestionsListProps,buildSuggestionItemProps,isLoading:loading,handleSuggestionClick:this.handleOnClick,isInitialSuggestions:!suggestionsValue?.length,currentInputValue:suggestionsValue}):(0,jsx_runtime.jsx)(popover.Ay,{placement:"bottom",focusOnMount:!1,children:(0,jsx_runtime.jsx)("div",{...suggestionsListProps,className:(0,clsx.A)("block-editor-url-input__suggestions",`${className}__suggestions`),children:suggestions.map(((suggestion,index)=>(0,react.createElement)(build_module_button.Ay,{__next40pxDefaultSize:!0,...buildSuggestionItemProps(0,index),key:suggestion.id,className:(0,clsx.A)("block-editor-url-input__suggestion",{"is-selected":index===selectedSuggestion}),onClick:()=>this.handleOnClick(suggestion)},suggestion.title)))})})}}URLInput.displayName="URLInput";const url_input=(0,compose.A)(with_safe_timeout.A,with_spoken_messages.A,with_instance_id.A,(0,with_select.A)(((select,props)=>{if(isFunction(props.__experimentalFetchLinkSuggestions))return;const{getSettings}=select(store_store);return{__experimentalFetchLinkSuggestions:getSettings().__experimentalFetchLinkSuggestions}})))(URLInput);var create_interpolate_element=__webpack_require__("./packages/element/build-module/create-interpolate-element.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js");const search_create_button=({searchTerm,onClick,itemProps,buttonText})=>{if(!searchTerm)return null;let text;return text=buttonText?"function"==typeof buttonText?buttonText(searchTerm):buttonText:(0,create_interpolate_element.A)((0,i18n_build_module.nv)((0,i18n_build_module.__)("Create: <mark>%s</mark>"),searchTerm),{mark:(0,jsx_runtime.jsx)("mark",{})}),(0,jsx_runtime.jsx)(menu_item.A,{...itemProps,iconPosition:"left",icon:plus.A,className:"block-editor-link-control__search-item",onClick,children:text})};var strings=__webpack_require__("./packages/components/build-module/utils/strings.js");const text_highlight=props=>{const{text="",highlight=""}=props,trimmedHighlightText=highlight.trim();if(!trimmedHighlightText)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:text});const regex=new RegExp(`(${(0,strings.Nt)(trimmedHighlightText)})`,"gi");return(0,create_interpolate_element.A)(text.replace(regex,"<mark>$&</mark>"),{mark:(0,jsx_runtime.jsx)("mark",{})})};var post_list=__webpack_require__("./packages/icons/build-module/library/post-list.js"),page=__webpack_require__("./packages/icons/build-module/library/page.js"),tag=__webpack_require__("./packages/icons/build-module/library/tag.js"),category=__webpack_require__("./packages/icons/build-module/library/category.js"),file=__webpack_require__("./packages/icons/build-module/library/file.js");const library_globe=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M12 3.3c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8s-4-8.8-8.8-8.8zm6.5 5.5h-2.6C15.4 7.3 14.8 6 14 5c2 .6 3.6 2 4.5 3.8zm.7 3.2c0 .6-.1 1.2-.2 1.8h-2.9c.1-.6.1-1.2.1-1.8s-.1-1.2-.1-1.8H19c.2.6.2 1.2.2 1.8zM12 18.7c-1-.7-1.8-1.9-2.3-3.5h4.6c-.5 1.6-1.3 2.9-2.3 3.5zm-2.6-4.9c-.1-.6-.1-1.1-.1-1.8 0-.6.1-1.2.1-1.8h5.2c.1.6.1 1.1.1 1.8s-.1 1.2-.1 1.8H9.4zM4.8 12c0-.6.1-1.2.2-1.8h2.9c-.1.6-.1 1.2-.1 1.8 0 .6.1 1.2.1 1.8H5c-.2-.6-.2-1.2-.2-1.8zM12 5.3c1 .7 1.8 1.9 2.3 3.5H9.7c.5-1.6 1.3-2.9 2.3-3.5zM10 5c-.8 1-1.4 2.3-1.8 3.8H5.5C6.4 7 8 5.6 10 5zM5.5 15.3h2.6c.4 1.5 1 2.8 1.8 3.7-1.8-.6-3.5-2-4.4-3.7zM14 19c.8-1 1.4-2.2 1.8-3.7h2.6C17.6 17 16 18.4 14 19z"})});var home=__webpack_require__("./packages/icons/build-module/library/home.js"),verse=__webpack_require__("./packages/icons/build-module/library/verse.js"),safe_decode_uri=__webpack_require__("./packages/url/build-module/safe-decode-uri.js"),get_path=__webpack_require__("./packages/url/build-module/get-path.js"),filter_url_for_display=__webpack_require__("./packages/url/build-module/filter-url-for-display.js");const ICONS_MAP={post:post_list.A,page:page.A,post_tag:tag.A,category:category.A,attachment:file.A};function SearchItemIcon({isURL,suggestion}){let icon=null;return isURL?icon=library_globe:suggestion.type in ICONS_MAP&&(icon=ICONS_MAP[suggestion.type],"page"===suggestion.type&&(suggestion.isFrontPage&&(icon=home.A),suggestion.isBlogHome&&(icon=verse.A))),icon?(0,jsx_runtime.jsx)(build_module_icon.A,{className:"block-editor-link-control__search-item-icon",icon}):null}function addLeadingSlash(url){const trimmedURL=url?.trim();return trimmedURL?.length?url?.replace(/^\/?/,"/"):url}function removeTrailingSlash(url){const trimmedURL=url?.trim();return trimmedURL?.length?url?.replace(/\/$/,""):url}function getVisualTypeName(suggestion){return suggestion.isFrontPage?"front page":suggestion.isBlogHome?"blog home":"post_tag"===suggestion.type?"tag":suggestion.type}const search_item=({itemProps,suggestion,searchTerm,onClick,isURL=!1,shouldShowType=!1})=>{const info=isURL?(0,i18n_build_module.__)("Press ENTER to add this link"):function getURLForDisplay(url){return url?(0,pipe.h)(safe_decode_uri.S,get_path.Y,(d="",v=>null==v||v!=v?d:v),((fn,...partialArgs)=>(...args)=>fn(...args,...partialArgs))(filter_url_for_display.r,24),removeTrailingSlash,addLeadingSlash)(url):url;var d}(suggestion.url);return(0,jsx_runtime.jsx)(menu_item.A,{...itemProps,info,iconPosition:"left",icon:(0,jsx_runtime.jsx)(SearchItemIcon,{suggestion,isURL}),onClick,shortcut:shouldShowType&&getVisualTypeName(suggestion),className:"block-editor-link-control__search-item",children:(0,jsx_runtime.jsx)(text_highlight,{text:(0,strip_html.A)(suggestion.title),highlight:searchTerm})})},LINK_ENTRY_TYPES=["link","mailto","tel","internal"],DEFAULT_LINK_SETTINGS=[{id:"opensInNewTab",title:(0,i18n_build_module.__)("Open in new tab")}];function LinkControlSearchResults({withCreateSuggestion,currentInputValue,handleSuggestionClick,suggestionsListProps,buildSuggestionItemProps,suggestions,selectedSuggestion,isLoading,isInitialSuggestions,createSuggestionButtonText,suggestionsQuery}){const resultsListClasses=(0,clsx.A)("block-editor-link-control__search-results",{"is-loading":isLoading}),isSingleDirectEntryResult=1===suggestions.length&&LINK_ENTRY_TYPES.includes(suggestions[0].type),shouldShowCreateSuggestion=withCreateSuggestion&&!isSingleDirectEntryResult&&!isInitialSuggestions,shouldShowSuggestionsTypes=!suggestionsQuery?.type,labelText=isInitialSuggestions?(0,i18n_build_module.__)("Suggestions"):(0,i18n_build_module.nv)((0,i18n_build_module.__)('Search results for "%s"'),currentInputValue);return(0,jsx_runtime.jsx)("div",{className:"block-editor-link-control__search-results-wrapper",children:(0,jsx_runtime.jsx)("div",{...suggestionsListProps,className:resultsListClasses,"aria-label":labelText,children:(0,jsx_runtime.jsx)(menu_group.A,{children:suggestions.map(((suggestion,index)=>shouldShowCreateSuggestion&&"__CREATE__"===suggestion.type?(0,jsx_runtime.jsx)(search_create_button,{searchTerm:currentInputValue,buttonText:createSuggestionButtonText,onClick:()=>handleSuggestionClick(suggestion),itemProps:buildSuggestionItemProps(suggestion,index),isSelected:index===selectedSuggestion},suggestion.type):"__CREATE__"===suggestion.type?null:(0,jsx_runtime.jsx)(search_item,{itemProps:buildSuggestionItemProps(suggestion,index),suggestion,index,onClick:()=>{handleSuggestionClick(suggestion)},isSelected:index===selectedSuggestion,isURL:LINK_ENTRY_TYPES.includes(suggestion.type),searchTerm:currentInputValue,shouldShowType:shouldShowSuggestionsTypes,isFrontPage:suggestion?.isFrontPage,isBlogHome:suggestion?.isBlogHome},`${suggestion.id}-${suggestion.type}`)))})})})}var get_protocol=__webpack_require__("./packages/url/build-module/get-protocol.js"),prepend_http=__webpack_require__("./packages/url/build-module/prepend-http.js"),is_valid_protocol=__webpack_require__("./packages/url/build-module/is-valid-protocol.js"),is_valid_fragment=__webpack_require__("./packages/url/build-module/is-valid-fragment.js");function isURLLike(val){if(val.includes(" "))return!1;const protocol=(0,get_protocol.J)(val),protocolIsValid=(0,is_valid_protocol.v)(protocol),mayBeTLD=function hasPossibleTLD(url,maxLength=6){const cleanedURL=url.split(/[?#]/)[0];return new RegExp(`(?<=\\S)\\.(?:[a-zA-Z_]{2,${maxLength}})(?:\\/|$)`).test(cleanedURL)}(val),isWWW=val?.startsWith("www."),isInternal=val?.startsWith("#")&&(0,is_valid_fragment.R)(val);return protocolIsValid||isWWW||isInternal||mayBeTLD}const handleNoop=()=>Promise.resolve([]),handleDirectEntry=val=>{let type="link";const protocol=(0,get_protocol.J)(val)||"";return protocol.includes("mailto")&&(type="mailto"),protocol.includes("tel")&&(type="tel"),val?.startsWith("#")&&(type="internal"),Promise.resolve([{id:val,title:val,url:"URL"===type?(0,prepend_http.N)(val):val,type}])};function useSearchHandler(suggestionsQuery,allowDirectEntry,withCreateSuggestion){const{fetchSearchSuggestions,pageOnFront,pageForPosts}=(0,use_select.A)((select=>{const{getSettings}=select(store_store);return{pageOnFront:getSettings().pageOnFront,pageForPosts:getSettings().pageForPosts,fetchSearchSuggestions:getSettings().__experimentalFetchLinkSuggestions}}),[]),directEntryHandler=allowDirectEntry?handleDirectEntry:handleNoop;return(0,react.useCallback)(((val,{isInitialSuggestions})=>isURLLike(val)?directEntryHandler(val,{isInitialSuggestions}):(async(val,suggestionsQuery,fetchSearchSuggestions,withCreateSuggestion,pageOnFront,pageForPosts)=>{const{isInitialSuggestions}=suggestionsQuery,results=await fetchSearchSuggestions(val,suggestionsQuery);return results.map((result=>Number(result.id)===pageOnFront?(result.isFrontPage=!0,result):Number(result.id)===pageForPosts?(result.isBlogHome=!0,result):result)),isInitialSuggestions||isURLLike(val)||!withCreateSuggestion?results:results.concat({title:val,url:val,type:"__CREATE__"})})(val,{...suggestionsQuery,isInitialSuggestions},fetchSearchSuggestions,withCreateSuggestion,pageOnFront,pageForPosts)),[directEntryHandler,fetchSearchSuggestions,pageOnFront,pageForPosts,suggestionsQuery,withCreateSuggestion])}const noopSearchHandler=()=>Promise.resolve([]),noop=()=>{},LinkControlSearchInput=(0,react.forwardRef)((({value,children,currentLink={},className=null,placeholder=null,withCreateSuggestion=!1,onCreateSuggestion=noop,onChange=noop,onSelect=noop,showSuggestions=!0,renderSuggestions=props=>(0,jsx_runtime.jsx)(LinkControlSearchResults,{...props}),fetchSuggestions=null,allowDirectEntry=!0,showInitialSuggestions=!1,suggestionsQuery={},withURLSuggestion=!0,createSuggestionButtonText,hideLabelFromVision=!1,suffix},ref)=>{const genericSearchHandler=useSearchHandler(suggestionsQuery,allowDirectEntry,withCreateSuggestion),searchHandler=showSuggestions?fetchSuggestions||genericSearchHandler:noopSearchHandler,[focusedSuggestion,setFocusedSuggestion]=(0,react.useState)(),onSuggestionSelected=async selectedSuggestion=>{let suggestion=selectedSuggestion;if("__CREATE__"!==selectedSuggestion.type){if(allowDirectEntry||suggestion&&Object.keys(suggestion).length>=1){const{id,url,...restLinkProps}=null!=currentLink?currentLink:{};onSelect({...restLinkProps,...suggestion},suggestion)}}else try{suggestion=await onCreateSuggestion(selectedSuggestion.title),suggestion?.url&&onSelect(suggestion)}catch(e){}},inputLabel=null!=placeholder?placeholder:(0,i18n_build_module.__)("Search or type URL");return(0,jsx_runtime.jsxs)("div",{className:"block-editor-link-control__search-input-container",children:[(0,jsx_runtime.jsx)(url_input,{disableSuggestions:currentLink?.url===value,label:inputLabel,hideLabelFromVision,className,value,onChange:(selection,suggestion)=>{onChange(selection),setFocusedSuggestion(suggestion)},placeholder:inputLabel,__experimentalRenderSuggestions:showSuggestions?props=>renderSuggestions({...props,withCreateSuggestion,createSuggestionButtonText,suggestionsQuery,handleSuggestionClick:suggestion=>{props.handleSuggestionClick&&props.handleSuggestionClick(suggestion),onSuggestionSelected(suggestion)}}):null,__experimentalFetchLinkSuggestions:searchHandler,__experimentalHandleURLSuggestions:!0,__experimentalShowInitialSuggestions:showInitialSuggestions,onSubmit:(suggestion,event)=>{const hasSuggestion=suggestion||focusedSuggestion;hasSuggestion||value?.trim()?.length?onSuggestionSelected(hasSuggestion||{url:value}):event.preventDefault()},ref,suffix}),children]})})),search_input=LinkControlSearchInput;var external_link=__webpack_require__("./packages/components/build-module/external-link/index.js"),use_copy_to_clipboard=__webpack_require__("./packages/compose/build-module/hooks/use-copy-to-clipboard/index.js");const library_info=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})});var edit=__webpack_require__("./packages/icons/build-module/library/edit.js"),link_off=__webpack_require__("./packages/icons/build-module/library/link-off.js"),copy_small=__webpack_require__("./packages/icons/build-module/library/copy-small.js");const{Slot:ViewerSlot,Fill:ViewerFill}=(0,slot_fill.QJ)("BlockEditorLinkControlViewer");function use_rich_url_data_reducer(state,action){switch(action.type){case"RESOLVED":return{...state,isFetching:!1,richData:action.richData};case"ERROR":return{...state,isFetching:!1,richData:null};case"LOADING":return{...state,isFetching:!0};default:throw new Error(`Unexpected action type ${action.type}`)}}const use_rich_url_data=function useRemoteUrlData(url){const[state,dispatch]=(0,react.useReducer)(use_rich_url_data_reducer,{richData:null,isFetching:!1}),{fetchRichUrlData}=(0,use_select.A)((select=>{const{getSettings}=select(store_store);return{fetchRichUrlData:getSettings().__experimentalFetchRichUrlData}}),[]);return(0,react.useEffect)((()=>{if(url?.length&&fetchRichUrlData&&"undefined"!=typeof AbortController){dispatch({type:"LOADING"});const controller=new window.AbortController,signal=controller.signal;return fetchRichUrlData(url,{signal}).then((urlData=>{dispatch({type:"RESOLVED",richData:urlData})})).catch((()=>{signal.aborted||dispatch({type:"ERROR"})})),()=>{controller.abort()}}}),[url]),state};function LinkPreview({value,onEditClick,hasRichPreviews=!1,hasUnlinkControl=!1,onRemove}){const showIconLabels=(0,use_select.A)((select=>select(store.M).get("core","showIconLabels")),[]),showRichPreviews=hasRichPreviews?value?.url:null,{richData,isFetching}=use_rich_url_data(showRichPreviews),hasRichData=richData&&Object.keys(richData).length,displayURL=value&&(0,filter_url_for_display.r)((0,safe_decode_uri.S)(value.url),24)||"",isEmptyURL=!value?.url?.length,displayTitle=!isEmptyURL&&(0,strip_html.A)(richData?.title||value?.title||displayURL),isUrlRedundant=!value?.url||function filterTitleForDisplay(title){return title.replace(/^[a-z\-.\+]+[0-9]*:(\/\/)?/i,"").replace(/^www\./i,"")}(displayTitle)===displayURL;let icon;icon=richData?.icon?(0,jsx_runtime.jsx)("img",{src:richData?.icon,alt:""}):isEmptyURL?(0,jsx_runtime.jsx)(build_module_icon.A,{icon:library_info,size:32}):(0,jsx_runtime.jsx)(build_module_icon.A,{icon:library_globe});const{createNotice}=(0,use_dispatch.A)(notices_build_module.M),ref=(0,use_copy_to_clipboard.A)(value.url,(()=>{createNotice("info",(0,i18n_build_module.__)("Link copied to clipboard."),{isDismissible:!0,type:"snackbar"})}));return(0,jsx_runtime.jsx)("div",{"aria-label":(0,i18n_build_module.__)("Currently selected"),className:(0,clsx.A)("block-editor-link-control__search-item",{"is-current":!0,"is-rich":hasRichData,"is-fetching":!!isFetching,"is-preview":!0,"is-error":isEmptyURL,"is-url-title":displayTitle===displayURL}),children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-link-control__search-item-top",children:[(0,jsx_runtime.jsxs)("span",{className:"block-editor-link-control__search-item-header",children:[(0,jsx_runtime.jsx)("span",{className:(0,clsx.A)("block-editor-link-control__search-item-icon",{"is-image":richData?.icon}),children:icon}),(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-item-details",children:isEmptyURL?(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-item-error-notice",children:(0,i18n_build_module.__)("Link is empty")}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(external_link.A,{className:"block-editor-link-control__search-item-title",href:value.url,children:(0,jsx_runtime.jsx)(truncate_component.A,{numberOfLines:1,children:displayTitle})}),!isUrlRedundant&&(0,jsx_runtime.jsx)("span",{className:"block-editor-link-control__search-item-info",children:(0,jsx_runtime.jsx)(truncate_component.A,{numberOfLines:1,children:displayURL})})]})})]}),(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:edit.A,label:(0,i18n_build_module.__)("Edit link"),onClick:onEditClick,size:"compact"}),hasUnlinkControl&&(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:link_off.A,label:(0,i18n_build_module.__)("Remove link"),onClick:onRemove,size:"compact"}),(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:copy_small.A,label:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Copy link%s"),isEmptyURL||showIconLabels?"":": "+value.url),ref,accessibleWhenDisabled:!0,disabled:isEmptyURL,size:"compact"}),(0,jsx_runtime.jsx)(ViewerSlot,{fillProps:value})]})})}var checkbox_control=__webpack_require__("./packages/components/build-module/checkbox-control/index.js");const settings_noop=()=>{},link_control_settings=({value,onChange=settings_noop,settings})=>{if(!settings||!settings.length)return null;const handleSettingChange=setting=>newValue=>{onChange({...value,[setting.id]:newValue})},theSettings=settings.map((setting=>(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,className:"block-editor-link-control__setting",label:setting.title,onChange:handleSettingChange(setting),checked:!!value&&!!value[setting.id],help:setting?.help},setting.id)));return(0,jsx_runtime.jsxs)("fieldset",{className:"block-editor-link-control__settings",children:[(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"legend",children:(0,i18n_build_module.__)("Currently selected link settings")}),theSettings]})};const makeCancelable=promise=>{let hasCanceled_=!1;return{promise:new Promise(((resolve,reject)=>{promise.then((val=>hasCanceled_?reject({isCanceled:!0}):resolve(val)),(error=>reject(hasCanceled_?{isCanceled:!0}:error)))})),cancel(){hasCanceled_=!0}}};var fast_deep_equal=__webpack_require__("./node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal);const link_control_noop=()=>{};function LinkControl({searchInputPlaceholder,value,settings=DEFAULT_LINK_SETTINGS,onChange=link_control_noop,onRemove,onCancel,noDirectEntry=!1,showSuggestions=!0,showInitialSuggestions,forceIsEditingLink,createSuggestion,withCreateSuggestion,inputValue:propInputValue="",suggestionsQuery={},noURLSuggestion=!1,createSuggestionButtonText,hasRichPreviews=!1,hasTextControl=!1,renderControlBottom=null}){void 0===withCreateSuggestion&&createSuggestion&&(withCreateSuggestion=!0);const[settingsOpen,setSettingsOpen]=(0,react.useState)(!1),{advancedSettingsPreference}=(0,use_select.A)((select=>{var _prefsStore$get;return{advancedSettingsPreference:null!==(_prefsStore$get=select(store.M).get("core/block-editor","linkControlSettingsDrawer"))&&void 0!==_prefsStore$get&&_prefsStore$get}}),[]),{set:setPreference}=(0,use_dispatch.A)(store.M),isSettingsOpen=advancedSettingsPreference||settingsOpen,isMountingRef=(0,react.useRef)(!0),wrapperNode=(0,react.useRef)(),textInputRef=(0,react.useRef)(),isEndingEditWithFocusRef=(0,react.useRef)(!1),settingsKeys=settings.map((({id})=>id)),[internalControlValue,setInternalControlValue,setInternalURLInputValue,setInternalTextInputValue,createSetInternalSettingValueHandler]=function useInternalValue(value){const[internalValue,setInternalValue]=(0,react.useState)(value||{}),[previousValue,setPreviousValue]=(0,react.useState)(value);return fast_deep_equal_default()(value,previousValue)||(setPreviousValue(value),setInternalValue(value)),[internalValue,setInternalValue,nextValue=>{setInternalValue({...internalValue,url:nextValue})},nextValue=>{setInternalValue({...internalValue,title:nextValue})},settingsKeys=>nextValue=>{const settingsUpdates=Object.keys(nextValue).reduce(((acc,key)=>(settingsKeys.includes(key)&&(acc[key]=nextValue[key]),acc)),{});setInternalValue({...internalValue,...settingsUpdates})}]}(value),valueHasChanges=value&&!(0,objects.A)(internalControlValue,value),[isEditingLink,setIsEditingLink]=(0,react.useState)(void 0!==forceIsEditingLink?forceIsEditingLink:!value||!value.url),{createPage,isCreatingPage,errorMessage}=function useCreatePage(handleCreatePage){const cancelableCreateSuggestion=(0,react.useRef)(),[isCreatingPage,setIsCreatingPage]=(0,react.useState)(!1),[errorMessage,setErrorMessage]=(0,react.useState)(null);return(0,react.useEffect)((()=>()=>{cancelableCreateSuggestion.current&&cancelableCreateSuggestion.current.cancel()}),[]),{createPage:async function(suggestionTitle){setIsCreatingPage(!0),setErrorMessage(null);try{return cancelableCreateSuggestion.current=makeCancelable(Promise.resolve(handleCreatePage(suggestionTitle))),await cancelableCreateSuggestion.current.promise}catch(error){if(error&&error.isCanceled)return;throw setErrorMessage(error.message||(0,i18n_build_module.__)("An unknown error occurred during creation. Please try again.")),error}finally{setIsCreatingPage(!1)}},isCreatingPage,errorMessage}}(createSuggestion);(0,react.useEffect)((()=>{void 0!==forceIsEditingLink&&setIsEditingLink(forceIsEditingLink)}),[forceIsEditingLink]),(0,react.useEffect)((()=>{if(isMountingRef.current)return;(dom_build_module.XC.focusable.find(wrapperNode.current)[0]||wrapperNode.current).focus(),isEndingEditWithFocusRef.current=!1}),[isEditingLink,isCreatingPage]),(0,react.useEffect)((()=>(isMountingRef.current=!1,()=>{isMountingRef.current=!0})),[]);const hasLinkValue=value?.url?.trim()?.length>0,stopEditing=()=>{isEndingEditWithFocusRef.current=!!wrapperNode.current?.contains(wrapperNode.current.ownerDocument.activeElement),setIsEditingLink(!1)},handleSubmit=()=>{valueHasChanges&&onChange({...value,...internalControlValue,url:currentUrlInputValue}),stopEditing()},currentUrlInputValue=propInputValue||internalControlValue?.url||"",currentInputIsEmpty=!currentUrlInputValue?.trim()?.length,shownUnlinkControl=onRemove&&value&&!isEditingLink&&!isCreatingPage,showActions=isEditingLink&&hasLinkValue,showTextControl=hasLinkValue&&hasTextControl,isEditing=(isEditingLink||!value)&&!isCreatingPage,isDisabled=!valueHasChanges||currentInputIsEmpty,showSettings=!!settings?.length&&isEditingLink&&hasLinkValue;return(0,jsx_runtime.jsxs)("div",{tabIndex:-1,ref:wrapperNode,className:"block-editor-link-control",children:[isCreatingPage&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-link-control__loading",children:[(0,jsx_runtime.jsx)(spinner.Ay,{})," ",(0,i18n_build_module.__)("Creating"),"…"]}),isEditing&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)({"block-editor-link-control__search-input-wrapper":!0,"has-text-control":showTextControl,"has-actions":showActions}),children:[showTextControl&&(0,jsx_runtime.jsx)(text_control.A,{__nextHasNoMarginBottom:!0,ref:textInputRef,className:"block-editor-link-control__field block-editor-link-control__text-content",label:(0,i18n_build_module.__)("Text"),value:internalControlValue?.title,onChange:setInternalTextInputValue,onKeyDown:event=>{const{keyCode}=event;keyCode!==keycodes_build_module.Fm||currentInputIsEmpty||(event.preventDefault(),handleSubmit())},__next40pxDefaultSize:!0}),(0,jsx_runtime.jsx)(search_input,{currentLink:value,className:"block-editor-link-control__field block-editor-link-control__search-input",placeholder:searchInputPlaceholder,value:currentUrlInputValue,withCreateSuggestion,onCreateSuggestion:createPage,onChange:setInternalURLInputValue,onSelect:updatedValue=>{const nonSettingsChanges=Object.keys(updatedValue).reduce(((acc,key)=>(settingsKeys.includes(key)||(acc[key]=updatedValue[key]),acc)),{});onChange({...internalControlValue,...nonSettingsChanges,title:internalControlValue?.title||updatedValue?.title}),stopEditing()},showInitialSuggestions,allowDirectEntry:!noDirectEntry,showSuggestions,suggestionsQuery,withURLSuggestion:!noURLSuggestion,createSuggestionButtonText,hideLabelFromVision:!showTextControl,suffix:showActions?void 0:(0,jsx_runtime.jsx)(input_suffix_wrapper.A,{variant:"control",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{onClick:isDisabled?link_control_noop:handleSubmit,label:(0,i18n_build_module.__)("Submit"),icon:keyboard_return.A,className:"block-editor-link-control__search-submit","aria-disabled":isDisabled,size:"small"})})})]}),errorMessage&&(0,jsx_runtime.jsx)(notice.A,{className:"block-editor-link-control__search-error",status:"error",isDismissible:!1,children:errorMessage})]}),value&&!isEditingLink&&!isCreatingPage&&(0,jsx_runtime.jsx)(LinkPreview,{value,onEditClick:()=>setIsEditingLink(!0),hasRichPreviews,hasUnlinkControl:shownUnlinkControl,onRemove:()=>{onRemove(),setIsEditingLink(!0)}},value?.url),showSettings&&(0,jsx_runtime.jsx)("div",{className:"block-editor-link-control__tools",children:!currentInputIsEmpty&&(0,jsx_runtime.jsx)(settings_drawer,{settingsOpen:isSettingsOpen,setSettingsOpen:prefVal=>{setPreference&&setPreference("core/block-editor","linkControlSettingsDrawer",prefVal),setSettingsOpen(prefVal)},children:(0,jsx_runtime.jsx)(link_control_settings,{value:internalControlValue,settings,onChange:createSetInternalSettingValueHandler(settingsKeys)})})}),showActions&&(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",className:"block-editor-link-control__search-actions",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:event=>{event.preventDefault(),event.stopPropagation(),setInternalControlValue(value),hasLinkValue?stopEditing():onRemove?.(),onCancel?.()},children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",onClick:isDisabled?link_control_noop:handleSubmit,className:"block-editor-link-control__search-submit","aria-disabled":isDisabled,children:(0,i18n_build_module.__)("Save")})]}),!isCreatingPage&&renderControlBottom&&renderControlBottom()]})}LinkControl.ViewerFill=ViewerFill,LinkControl.DEFAULT_LINK_SETTINGS=DEFAULT_LINK_SETTINGS;const link_control=LinkControl,media_replace_flow_noop=()=>{};let uniqueId=0;const media_replace_flow=(0,compose.A)([(0,with_dispatch.A)((dispatch=>{const{createNotice,removeNotice}=dispatch(notices_build_module.M);return{createNotice,removeNotice}})),(0,with_filters.A)("editor.MediaReplaceFlow")])((({mediaURL,mediaId,mediaIds,allowedTypes,accept,onError,onSelect,onSelectURL,onReset,onToggleFeaturedImage,useFeaturedImage,onFilesUpload=media_replace_flow_noop,name=(0,i18n_build_module.__)("Replace"),createNotice,removeNotice,children,multiple=!1,addToGallery,handleUpload=!0,popoverProps})=>{const mediaUpload=(0,use_select.A)((select=>select(store_store).getSettings().mediaUpload),[]),canUpload=!!mediaUpload,editMediaButtonRef=(0,react.useRef)(),errorNoticeID="block-editor/media-replace-flow/error-notice/"+ ++uniqueId,onUploadError=message=>{const safeMessage=(0,strip_html.A)(message);onError?onError(safeMessage):setTimeout((()=>{createNotice("error",safeMessage,{speak:!0,id:errorNoticeID,isDismissible:!0})}),1e3)},selectMedia=(media,closeMenu)=>{useFeaturedImage&&onToggleFeaturedImage&&onToggleFeaturedImage(),closeMenu(),onSelect(media),(0,a11y_build_module.L)((0,i18n_build_module.__)("The media file has been replaced")),removeNotice(errorNoticeID)},openOnArrowDown=event=>{event.keyCode===keycodes_build_module.PX&&(event.preventDefault(),event.target.click())},gallery=multiple&&!(!allowedTypes||0===allowedTypes.length)&&allowedTypes.every((allowedType=>"image"===allowedType||allowedType.startsWith("image/")));return(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,contentClassName:"block-editor-media-replace-flow__options",renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(toolbar_button.A,{ref:editMediaButtonRef,"aria-expanded":isOpen,"aria-haspopup":"true",onClick:onToggle,onKeyDown:openOnArrowDown,children:name}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu.Ay,{className:"block-editor-media-replace-flow__media-upload-menu",children:[(0,jsx_runtime.jsxs)(check,{children:[(0,jsx_runtime.jsx)(media_upload,{gallery,addToGallery,multiple,value:multiple?mediaIds:mediaId,onSelect:media=>selectMedia(media,onClose),allowedTypes,render:({open})=>(0,jsx_runtime.jsx)(menu_item.A,{icon:media.A,onClick:open,children:(0,i18n_build_module.__)("Open Media Library")})}),(0,jsx_runtime.jsx)(form_file_upload.A,{onChange:event=>{((event,closeMenu)=>{const files=event.target.files;if(!handleUpload)return closeMenu(),onSelect(files);onFilesUpload(files),mediaUpload({allowedTypes,filesList:files,onFileChange:([media])=>{selectMedia(media,closeMenu)},onError:onUploadError})})(event,onClose)},accept,multiple:!!multiple,render:({openFileDialog})=>(0,jsx_runtime.jsx)(menu_item.A,{icon:upload.A,onClick:()=>{openFileDialog()},children:(0,i18n_build_module.__)("Upload")})})]}),onToggleFeaturedImage&&(0,jsx_runtime.jsx)(menu_item.A,{icon:post_featured_image.A,onClick:onToggleFeaturedImage,isPressed:useFeaturedImage,children:(0,i18n_build_module.__)("Use featured image")}),mediaURL&&onReset&&(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{onReset(),onClose()},children:(0,i18n_build_module.__)("Reset")}),"function"==typeof children?children({onClose}):children]}),onSelectURL&&(0,jsx_runtime.jsxs)("form",{className:(0,clsx.A)("block-editor-media-flow__url-input",{"has-siblings":canUpload||onToggleFeaturedImage}),children:[(0,jsx_runtime.jsx)("span",{className:"block-editor-media-replace-flow__image-url-label",children:(0,i18n_build_module.__)("Current media URL:")}),(0,jsx_runtime.jsx)(link_control,{value:{url:mediaURL},settings:[],showSuggestions:!1,onChange:({url})=>{onSelectURL(url),editMediaButtonRef.current.focus()}})]})]})})})),IMAGE_BACKGROUND_TYPE="image",BACKGROUND_POPOVER_PROPS={placement:"left-start",offset:36,shift:!0,className:"block-editor-global-styles-background-panel__popover"},background_image_control_noop=()=>{};const coordsToBackgroundPosition=value=>{if(!value||isNaN(value.x)&&isNaN(value.y))return;return`${100*(isNaN(value.x)?.5:value.x)}% ${100*(isNaN(value.y)?.5:value.y)}%`},backgroundPositionToCoords=value=>{if(!value)return{x:void 0,y:void 0};let[x,y]=value.split(" ").map((v=>parseFloat(v)/100));return x=isNaN(x)?void 0:x,y=isNaN(y)?x:y,{x,y}};function InspectorImagePreviewItem({as="span",imgUrl,toggleProps={},filename,label,className,onToggleCallback=background_image_control_noop}){return(0,react.useEffect)((()=>{void 0!==toggleProps?.isOpen&&onToggleCallback(toggleProps?.isOpen)}),[toggleProps?.isOpen,onToggleCallback]),(0,jsx_runtime.jsx)(item_group_component.A,{as,className,...toggleProps,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-start",as:"span",className:"block-editor-global-styles-background-panel__inspector-preview-inner",children:[imgUrl&&(0,jsx_runtime.jsx)("span",{className:"block-editor-global-styles-background-panel__inspector-image-indicator-wrapper","aria-hidden":!0,children:(0,jsx_runtime.jsx)("span",{className:"block-editor-global-styles-background-panel__inspector-image-indicator",style:{backgroundImage:`url(${imgUrl})`}})}),(0,jsx_runtime.jsxs)(flex_item_component.A,{as:"span",style:imgUrl?{}:{flexGrow:1},children:[(0,jsx_runtime.jsx)(truncate_component.A,{numberOfLines:1,className:"block-editor-global-styles-background-panel__inspector-media-replace-title",children:label}),(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"span",children:imgUrl?(0,i18n_build_module.nv)((0,i18n_build_module.__)("Background image: %s"),filename||label):(0,i18n_build_module.__)("No background image selected")})]})]})})}function BackgroundControlsPanel({label,filename,url:imgUrl,children,onToggle:onToggleCallback=background_image_control_noop,hasImageValue}){if(!hasImageValue)return;const imgLabel=label||(0,get_filename.e)(imgUrl)||(0,i18n_build_module.__)("Add background image");return(0,jsx_runtime.jsx)(dropdown.A,{popoverProps:BACKGROUND_POPOVER_PROPS,renderToggle:({onToggle,isOpen})=>{const toggleProps={onClick:onToggle,className:"block-editor-global-styles-background-panel__dropdown-toggle","aria-expanded":isOpen,"aria-label":(0,i18n_build_module.__)("Background size, position and repeat options."),isOpen};return(0,jsx_runtime.jsx)(InspectorImagePreviewItem,{imgUrl,filename,label:imgLabel,toggleProps,as:"button",onToggleCallback})},renderContent:()=>(0,jsx_runtime.jsx)(dropdown_content_wrapper.A,{className:"block-editor-global-styles-background-panel__dropdown-content-wrapper",paddingSize:"medium",children})})}function LoadingSpinner(){return(0,jsx_runtime.jsx)(build_module_placeholder.A,{className:"block-editor-global-styles-background-panel__loading",children:(0,jsx_runtime.jsx)(spinner.Ay,{})})}function BackgroundImageControls({onChange,style,inheritedValue,onRemoveImage=background_image_control_noop,onResetImage=background_image_control_noop,displayInPanel,defaultValues}){const[isUploading,setIsUploading]=(0,react.useState)(!1),{getSettings}=(0,use_select.A)(store_store),{id,title,url}=style?.background?.backgroundImage||{...inheritedValue?.background?.backgroundImage},replaceContainerRef=(0,react.useRef)(),{createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M),onUploadError=message=>{createErrorNotice(message,{type:"snackbar"}),setIsUploading(!1)},onSelectMedia=media=>{if(!media||!media.url)return onChange(setImmutably(style,["background","backgroundImage"],void 0)),void setIsUploading(!1);if((0,blob_build_module.H8)(media.url))return void setIsUploading(!0);if(media.media_type&&media.media_type!==IMAGE_BACKGROUND_TYPE||!media.media_type&&media.type&&media.type!==IMAGE_BACKGROUND_TYPE)return void onUploadError((0,i18n_build_module.__)("Only images can be used as a background image."));const sizeValue=style?.background?.backgroundSize||defaultValues?.backgroundSize,positionValue=style?.background?.backgroundPosition;onChange(setImmutably(style,["background"],{...style?.background,backgroundImage:{url:media.url,id:media.id,source:"file",title:media.title||void 0},backgroundPosition:positionValue||"auto"!==sizeValue&&sizeValue?positionValue:"50% 0",backgroundSize:sizeValue})),setIsUploading(!1)},hasValue=hasBackgroundImageValue(style),closeAndFocus=()=>{const[toggleButton]=dom_build_module.XC.tabbable.find(replaceContainerRef.current);toggleButton?.focus(),toggleButton?.click()},canRemove=!hasValue&&hasBackgroundImageValue(inheritedValue),imgLabel=title||(0,get_filename.e)(url)||(0,i18n_build_module.__)("Add background image");return(0,jsx_runtime.jsxs)("div",{ref:replaceContainerRef,className:"block-editor-global-styles-background-panel__image-tools-panel-item",children:[isUploading&&(0,jsx_runtime.jsx)(LoadingSpinner,{}),(0,jsx_runtime.jsx)(media_replace_flow,{mediaId:id,mediaURL:url,allowedTypes:[IMAGE_BACKGROUND_TYPE],accept:"image/*",onSelect:onSelectMedia,popoverProps:{className:(0,clsx.A)({"block-editor-global-styles-background-panel__media-replace-popover":displayInPanel})},name:(0,jsx_runtime.jsx)(InspectorImagePreviewItem,{className:"block-editor-global-styles-background-panel__image-preview",imgUrl:url,filename:title,label:imgLabel}),variant:"secondary",onError:onUploadError,onReset:()=>{closeAndFocus(),onResetImage()},children:canRemove&&(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{closeAndFocus(),onChange(setImmutably(style,["background"],{backgroundImage:"none"})),onRemoveImage()},children:(0,i18n_build_module.__)("Remove")})}),(0,jsx_runtime.jsx)(drop_zone.A,{onFilesDrop:filesList=>{filesList?.length>1?onUploadError((0,i18n_build_module.__)("Only one image can be used as a background image.")):getSettings().mediaUpload({allowedTypes:[IMAGE_BACKGROUND_TYPE],filesList,onFileChange([image]){onSelectMedia(image)},onError:onUploadError})},label:(0,i18n_build_module.__)("Drop to upload")})]})}function BackgroundSizeControls({onChange,style,inheritedValue,defaultValues}){const sizeValue=style?.background?.backgroundSize||inheritedValue?.background?.backgroundSize,repeatValue=style?.background?.backgroundRepeat||inheritedValue?.background?.backgroundRepeat,imageValue=style?.background?.backgroundImage?.url||inheritedValue?.background?.backgroundImage?.url,isUploadedImage=style?.background?.backgroundImage?.id,positionValue=style?.background?.backgroundPosition||inheritedValue?.background?.backgroundPosition,attachmentValue=style?.background?.backgroundAttachment||inheritedValue?.background?.backgroundAttachment;let currentValueForToggle=!sizeValue&&isUploadedImage?defaultValues?.backgroundSize:sizeValue||"auto";currentValueForToggle=["cover","contain","auto"].includes(currentValueForToggle)?currentValueForToggle:"auto";const repeatCheckedValue=!("no-repeat"===repeatValue||"cover"===currentValueForToggle&&void 0===repeatValue),updateBackgroundSize=next=>{let nextRepeat=repeatValue,nextPosition=positionValue;"contain"===next&&(nextRepeat="no-repeat",nextPosition=void 0),"cover"===next&&(nextRepeat=void 0,nextPosition=void 0),"cover"!==currentValueForToggle&&"contain"!==currentValueForToggle||"auto"!==next||(nextRepeat=void 0,style?.background?.backgroundImage?.id&&(nextPosition="50% 0")),next||"auto"!==currentValueForToggle||(next="auto"),onChange(setImmutably(style,["background"],{...style?.background,backgroundPosition:nextPosition,backgroundRepeat:nextRepeat,backgroundSize:next}))},backgroundPositionValue=!positionValue&&isUploadedImage&&"contain"===sizeValue?defaultValues?.backgroundPosition:positionValue;return(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:3,className:"single-column",children:[(0,jsx_runtime.jsx)(focal_point_picker.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Focal point"),url:imageValue,value:backgroundPositionToCoords(backgroundPositionValue),onChange:next=>{onChange(setImmutably(style,["background","backgroundPosition"],coordsToBackgroundPosition(next)))}}),(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Fixed background"),checked:"fixed"===attachmentValue,onChange:()=>onChange(setImmutably(style,["background","backgroundAttachment"],"fixed"===attachmentValue?"scroll":"fixed"))}),(0,jsx_runtime.jsxs)(toggle_group_control_component.A,{__nextHasNoMarginBottom:!0,size:"__unstable-large",label:(0,i18n_build_module.__)("Size"),value:currentValueForToggle,onChange:updateBackgroundSize,isBlock:!0,help:(value=sizeValue||defaultValues?.backgroundSize,"cover"===value||void 0===value?(0,i18n_build_module.__)("Image covers the space evenly."):"contain"===value?(0,i18n_build_module.__)("Image is contained without distortion."):(0,i18n_build_module.__)("Image has a fixed width.")),children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"cover",label:(0,i18n_build_module._x)("Cover","Size option for background image control")},"cover"),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"contain",label:(0,i18n_build_module._x)("Contain","Size option for background image control")},"contain"),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"auto",label:(0,i18n_build_module._x)("Tile","Size option for background image control")},"tile")]}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-start",spacing:2,as:"span",children:[(0,jsx_runtime.jsx)(unit_control.Ay,{"aria-label":(0,i18n_build_module.__)("Background image width"),onChange:updateBackgroundSize,value:sizeValue,size:"__unstable-large",__unstableInputWidth:"100px",min:0,placeholder:(0,i18n_build_module.__)("Auto"),disabled:"auto"!==currentValueForToggle||void 0===currentValueForToggle}),(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Repeat"),checked:repeatCheckedValue,onChange:()=>onChange(setImmutably(style,["background","backgroundRepeat"],!0===repeatCheckedValue?"no-repeat":"repeat")),disabled:"cover"===currentValueForToggle})]})]});var value}function BackgroundImagePanel({value,onChange,inheritedValue=value,settings,defaultValues={}}){const{globalStyles,_links}=(0,use_select.A)((select=>{const{getSettings}=select(store_store),_settings=getSettings();return{globalStyles:_settings[globalStylesDataKey],_links:_settings[globalStylesLinksDataKey]}}),[]),resolvedInheritedValue=(0,react.useMemo)((()=>{const resolvedValues={background:{}};return inheritedValue?.background?(Object.entries(inheritedValue?.background).forEach((([key,backgroundValue])=>{resolvedValues.background[key]=getResolvedValue(backgroundValue,{styles:globalStyles,_links})})),resolvedValues):inheritedValue}),[globalStyles,_links,inheritedValue]),resetBackground=()=>onChange(setImmutably(value,["background"],{})),{title,url}=value?.background?.backgroundImage||{...resolvedInheritedValue?.background?.backgroundImage},hasImageValue=hasBackgroundImageValue(value)||hasBackgroundImageValue(resolvedInheritedValue),shouldShowBackgroundImageControls=hasImageValue&&"none"!==(value?.background?.backgroundImage||inheritedValue?.background?.backgroundImage)&&(settings?.background?.backgroundSize||settings?.background?.backgroundPosition||settings?.background?.backgroundRepeat),[isDropDownOpen,setIsDropDownOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("block-editor-global-styles-background-panel__inspector-media-replace-container",{"is-open":isDropDownOpen}),children:shouldShowBackgroundImageControls?(0,jsx_runtime.jsx)(BackgroundControlsPanel,{label:title,filename:title,url,onToggle:setIsDropDownOpen,hasImageValue,children:(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:3,className:"single-column",children:[(0,jsx_runtime.jsx)(BackgroundImageControls,{onChange,style:value,inheritedValue:resolvedInheritedValue,displayInPanel:!0,onResetImage:()=>{setIsDropDownOpen(!1),resetBackground()},onRemoveImage:()=>setIsDropDownOpen(!1),defaultValues}),(0,jsx_runtime.jsx)(BackgroundSizeControls,{onChange,style:value,defaultValues,inheritedValue:resolvedInheritedValue})]})}):(0,jsx_runtime.jsx)(BackgroundImageControls,{onChange,style:value,inheritedValue:resolvedInheritedValue,defaultValues,onResetImage:()=>{setIsDropDownOpen(!1),resetBackground()},onRemoveImage:()=>setIsDropDownOpen(!1)})})}const background_panel_DEFAULT_CONTROLS={backgroundImage:!0};function useHasBackgroundPanel(settings){return"web"===platform.A.OS&&settings?.background?.backgroundImage}function hasBackgroundImageValue(style){return!!style?.background?.backgroundImage?.id||"string"==typeof style?.background?.backgroundImage||!!style?.background?.backgroundImage?.url}function BackgroundToolsPanel({resetAllFilter,onChange,value,panelId,children,headerLabel}){const dropdownMenuProps=useToolsPanelDropdownMenuProps();return(0,jsx_runtime.jsx)(tools_panel_component.A,{label:headerLabel,resetAll:()=>{const updatedValue=resetAllFilter(value);onChange(updatedValue)},panelId,dropdownMenuProps,children})}function background_panel_BackgroundImagePanel({as:Wrapper=BackgroundToolsPanel,value,onChange,inheritedValue,settings,panelId,defaultControls=background_panel_DEFAULT_CONTROLS,defaultValues={},headerLabel=(0,i18n_build_module.__)("Background image")}){const showBackgroundImageControl=useHasBackgroundPanel(settings),resetAllFilter=(0,react.useCallback)((previousValue=>({...previousValue,background:{}})),[]);return(0,jsx_runtime.jsx)(Wrapper,{resetAllFilter,value,onChange,panelId,headerLabel,children:showBackgroundImageControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{hasValue:()=>!!value?.background,label:(0,i18n_build_module.__)("Image"),onDeselect:()=>onChange(setImmutably(value,["background"],{})),isShownByDefault:defaultControls.backgroundImage,panelId,children:(0,jsx_runtime.jsx)(BackgroundImagePanel,{value,onChange,settings,inheritedValue,defaultControls,defaultValues})})})}const BACKGROUND_SUPPORT_KEY="background",BACKGROUND_BLOCK_DEFAULT_VALUES={backgroundSize:"cover",backgroundPosition:"50% 50%"};function hasBackgroundSupport(blockName,feature="any"){const support=(0,build_module.bI)(blockName,BACKGROUND_SUPPORT_KEY);return!0===support||("any"===feature?!!support?.backgroundImage||!!support?.backgroundSize||!!support?.backgroundRepeat:!!support?.[feature])}function setBackgroundStyleDefaults(backgroundStyle){if(!backgroundStyle||!backgroundStyle?.backgroundImage?.url)return;let backgroundStylesWithDefaults;return backgroundStyle?.backgroundSize||(backgroundStylesWithDefaults={backgroundSize:BACKGROUND_BLOCK_DEFAULT_VALUES.backgroundSize}),"contain"!==backgroundStyle?.backgroundSize||backgroundStyle?.backgroundPosition||(backgroundStylesWithDefaults={backgroundPosition:BACKGROUND_BLOCK_DEFAULT_VALUES.backgroundPosition}),backgroundStylesWithDefaults}function getBackgroundImageClasses(style){return hasBackgroundImageValue(style)?"has-background":""}function BackgroundInspectorControl({children}){const resetAllFilter=(0,react.useCallback)((attributes=>({...attributes,style:{...attributes.style,background:void 0}})),[]);return(0,jsx_runtime.jsx)(inspector_controls,{group:"background",resetAllFilter,children})}function background_BackgroundImagePanel({clientId,name,setAttributes,settings}){const{style,inheritedValue}=(0,use_select.A)((select=>{const{getBlockAttributes,getSettings}=select(store_store),_settings=getSettings();return{style:getBlockAttributes(clientId)?.style,inheritedValue:_settings[globalStylesDataKey]?.blocks?.[name]}}),[clientId,name]);if(!useHasBackgroundPanel(settings)||!hasBackgroundSupport(name,"backgroundImage"))return null;const updatedSettings={...settings,background:{...settings.background,backgroundSize:settings?.background?.backgroundSize&&hasBackgroundSupport(name,"backgroundSize")}};return(0,jsx_runtime.jsx)(background_panel_BackgroundImagePanel,{inheritedValue,as:BackgroundInspectorControl,panelId:clientId,defaultValues:BACKGROUND_BLOCK_DEFAULT_VALUES,settings:updatedSettings,onChange:newStyle=>{setAttributes({style:utils_cleanEmptyObject(newStyle)})},value:style})}const background={useBlockProps:function background_useBlockProps({name,style}){if(!hasBackgroundSupport(name)||!style?.background?.backgroundImage)return;const backgroundStyles=setBackgroundStyleDefaults(style?.background);return backgroundStyles?{style:{...backgroundStyles}}:void 0},attributeKeys:["style"],hasSupport:hasBackgroundSupport};(0,hooks_build_module.U2)("blocks.registerBlockType","core/lock/addAttribute",(function lock_addAttribute(settings){var _settings$attributes$;return"type"in(null!==(_settings$attributes$=settings.attributes?.lock)&&void 0!==_settings$attributes$?_settings$attributes$:{})||(settings.attributes={...settings.attributes,lock:{type:"object"}}),settings}));const ANCHOR_REGEX=/[\s#]/g,ANCHOR_SCHEMA={type:"string",source:"attribute",attribute:"id",selector:"*"};const hooks_anchor={addSaveProps:function addSaveProps(extraProps,blockType,attributes){(0,build_module.pN)(blockType,"anchor")&&(extraProps.id=""===attributes.anchor?null:attributes.anchor);return extraProps},edit:function BlockEditAnchorControlPure({anchor,setAttributes}){if("default"!==useBlockEditingMode())return null;const isWeb="web"===platform.A.OS;return(0,jsx_runtime.jsx)(inspector_controls,{group:"advanced",children:(0,jsx_runtime.jsx)(text_control.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,className:"html-anchor-control",label:(0,i18n_build_module.__)("HTML anchor"),help:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,i18n_build_module.__)("Enter a word or two — without spaces — to make a unique web address just for this block, called an “anchor”. Then, you’ll be able to link directly to this section of your page."),isWeb&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[" ",(0,jsx_runtime.jsx)(external_link.A,{href:(0,i18n_build_module.__)("https://wordpress.org/documentation/article/page-jumps/"),children:(0,i18n_build_module.__)("Learn more about anchors")})]})]}),value:anchor||"",placeholder:isWeb?null:(0,i18n_build_module.__)("Add an anchor"),onChange:nextValue=>{nextValue=nextValue.replace(ANCHOR_REGEX,"-"),setAttributes({anchor:nextValue})},autoCapitalize:"none",autoComplete:"off"})})},attributeKeys:["anchor"],hasSupport:name=>(0,build_module.pN)(name,"anchor")};(0,hooks_build_module.U2)("blocks.registerBlockType","core/anchor/attribute",(function anchor_addAttribute(settings){var _settings$attributes$;return"type"in(null!==(_settings$attributes$=settings.attributes?.anchor)&&void 0!==_settings$attributes$?_settings$attributes$:{})||(0,build_module.pN)(settings,"anchor")&&(settings.attributes={...settings.attributes,anchor:ANCHOR_SCHEMA}),settings}));const ARIA_LABEL_SCHEMA={type:"string",source:"attribute",attribute:"aria-label",selector:"*"};const aria_label={addSaveProps:function aria_label_addSaveProps(extraProps,blockType,attributes){return(0,build_module.pN)(blockType,"ariaLabel")&&(extraProps["aria-label"]=""===attributes.ariaLabel?null:attributes.ariaLabel),extraProps},attributeKeys:["ariaLabel"],hasSupport:name=>(0,build_module.pN)(name,"ariaLabel")};(0,hooks_build_module.U2)("blocks.registerBlockType","core/ariaLabel/attribute",(function aria_label_addAttribute(settings){return settings?.attributes?.ariaLabel?.type||(0,build_module.pN)(settings,"ariaLabel")&&(settings.attributes={...settings.attributes,ariaLabel:ARIA_LABEL_SCHEMA}),settings}));const custom_class_name={edit:function CustomClassNameControlsPure({className,setAttributes}){return"default"!==useBlockEditingMode()?null:(0,jsx_runtime.jsx)(inspector_controls,{group:"advanced",children:(0,jsx_runtime.jsx)(text_control.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,autoComplete:"off",label:(0,i18n_build_module.__)("Additional CSS class(es)"),value:className||"",onChange:nextValue=>{setAttributes({className:""!==nextValue?nextValue:void 0})},help:(0,i18n_build_module.__)("Separate multiple classes with spaces.")})})},addSaveProps:function custom_class_name_addSaveProps(extraProps,blockType,attributes){(0,build_module.pN)(blockType,"customClassName",!0)&&attributes.className&&(extraProps.className=(0,clsx.A)(extraProps.className,attributes.className));return extraProps},attributeKeys:["className"],hasSupport:name=>(0,build_module.pN)(name,"customClassName",!0)};(0,hooks_build_module.U2)("blocks.registerBlockType","core/editor/custom-class-name/attribute",(function custom_class_name_addAttribute(settings){return(0,build_module.pN)(settings,"customClassName",!0)&&(settings.attributes={...settings.attributes,className:{type:"string"}}),settings})),(0,hooks_build_module.U2)("blocks.switchToBlockType.transformedBlock","core/color/addTransforms",(function addTransforms(result,source,index,results){if(!(0,build_module.pN)(result.name,"customClassName",!0))return result;if(1===results.length&&result.innerBlocks.length===source.length)return result;if(1===results.length&&source.length>1||results.length>1&&1===source.length)return result;if(source[index]){const originClassName=source[index]?.attributes.className;if(originClassName)return{...result,attributes:{...result.attributes,className:originClassName}}}return result})),(0,hooks_build_module.U2)("blocks.getSaveContent.extraProps","core/generated-class-name/save-props",(function addGeneratedClassName(extraProps,blockType){return(0,build_module.pN)(blockType,"className",!0)&&("string"==typeof extraProps.className?extraProps.className=[...new Set([(0,build_module.KW)(blockType.name),...extraProps.className.split(" ")])].join(" ").trim():extraProps.className=(0,build_module.KW)(blockType.name)),extraProps}));var border_box_control_utils=__webpack_require__("./packages/components/build-module/border-box-control/utils.js"),colord=__webpack_require__("./node_modules/colord/index.mjs"),names=__webpack_require__("./node_modules/colord/plugins/names.mjs"),a11y=__webpack_require__("./node_modules/colord/plugins/a11y.mjs");(0,colord.X$)([names.A,a11y.A]);const{kebabCase}=unlock(private_apis.j),getColorObjectByAttributeValues=(colors,definedColor,customColor)=>{if(definedColor){const colorObj=colors?.find((color=>color.slug===definedColor));if(colorObj)return colorObj}return{color:customColor}},getColorObjectByColorValue=(colors,colorValue)=>colors?.find((color=>color.color===colorValue));function getColorClassName(colorContextName,colorSlug){if(colorContextName&&colorSlug)return`has-${kebabCase(colorSlug)}-${colorContextName}`}function useMultipleOriginColorsAndGradients(){const[enableCustomColors,customColors,themeColors,defaultColors,shouldDisplayDefaultColors,enableCustomGradients,customGradients,themeGradients,defaultGradients,shouldDisplayDefaultGradients]=use_settings_useSettings("color.custom","color.palette.custom","color.palette.theme","color.palette.default","color.defaultPalette","color.customGradient","color.gradients.custom","color.gradients.theme","color.gradients.default","color.defaultGradients"),colorGradientSettings={disableCustomColors:!enableCustomColors,disableCustomGradients:!enableCustomGradients};return colorGradientSettings.colors=(0,react.useMemo)((()=>{const result=[];return themeColors&&themeColors.length&&result.push({name:(0,i18n_build_module._x)("Theme","Indicates this palette comes from the theme."),slug:"theme",colors:themeColors}),shouldDisplayDefaultColors&&defaultColors&&defaultColors.length&&result.push({name:(0,i18n_build_module._x)("Default","Indicates this palette comes from WordPress."),slug:"default",colors:defaultColors}),customColors&&customColors.length&&result.push({name:(0,i18n_build_module._x)("Custom","Indicates this palette is created by the user."),slug:"custom",colors:customColors}),result}),[customColors,themeColors,defaultColors,shouldDisplayDefaultColors]),colorGradientSettings.gradients=(0,react.useMemo)((()=>{const result=[];return themeGradients&&themeGradients.length&&result.push({name:(0,i18n_build_module._x)("Theme","Indicates this palette comes from the theme."),slug:"theme",gradients:themeGradients}),shouldDisplayDefaultGradients&&defaultGradients&&defaultGradients.length&&result.push({name:(0,i18n_build_module._x)("Default","Indicates this palette comes from WordPress."),slug:"default",gradients:defaultGradients}),customGradients&&customGradients.length&&result.push({name:(0,i18n_build_module._x)("Custom","Indicates this palette is created by the user."),slug:"custom",gradients:customGradients}),result}),[customGradients,themeGradients,defaultGradients,shouldDisplayDefaultGradients]),colorGradientSettings.hasColorsOrGradients=!!colorGradientSettings.colors.length||!!colorGradientSettings.gradients.length,colorGradientSettings}var use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),library_link=__webpack_require__("./packages/icons/build-module/library/link.js"),tooltip=__webpack_require__("./packages/components/build-module/tooltip/index.js"),view_component=__webpack_require__("./packages/components/build-module/view/component.js"),context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),rtl=__webpack_require__("./packages/components/build-module/utils/rtl.js"),colors_values=__webpack_require__("./packages/components/build-module/utils/colors-values.js"),config_values=__webpack_require__("./packages/components/build-module/utils/config-values.js");const borderBoxControl=(0,emotion_react_browser_esm.AH)("","","",""),wrapper={name:"bjn8wh",styles:"position:relative"},borderBoxStyleWithFallback=border=>{const{color=colors_values.l.gray[200],style="solid",width=config_values.A.borderWidth}=border||{};return`${color} ${!!width&&"0"!==width||!!color?style||"solid":style} ${width!==config_values.A.borderWidth?`clamp(1px, ${width}, 10px)`:width}`},centeredBorderControl={name:"1nwbfnf",styles:"grid-column:span 2;margin:0 auto"};var use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js"),use_cx=__webpack_require__("./packages/components/build-module/utils/hooks/use-cx.js");function useBorderBoxControlLinkedButton(props){const{className,size="default",...otherProps}=(0,use_context_system.A)(props,"BorderBoxControlLinkedButton"),cx=(0,use_cx.l)();return{...otherProps,className:(0,react.useMemo)((()=>cx((size=>(0,emotion_react_browser_esm.AH)("position:absolute;top:","__unstable-large"===size?"8px":"3px",";",(0,rtl.h)({right:0})()," line-height:0;","","",""))(size),className)),[className,cx,size])}}const border_box_control_linked_button_component=(0,context_connect.KZ)(((props,forwardedRef)=>{const{className,isLinked,...buttonProps}=useBorderBoxControlLinkedButton(props),label=isLinked?(0,i18n_build_module.__)("Unlink sides"):(0,i18n_build_module.__)("Link sides");return(0,jsx_runtime.jsx)(tooltip.Ay,{text:label,children:(0,jsx_runtime.jsx)(view_component.A,{className,children:(0,jsx_runtime.jsx)(build_module_button.Ay,{...buttonProps,size:"small",icon:isLinked?library_link.A:link_off.A,iconSize:24,"aria-label":label,ref:forwardedRef})})})}),"BorderBoxControlLinkedButton");function useBorderBoxControlVisualizer(props){const{className,value,size="default",...otherProps}=(0,use_context_system.A)(props,"BorderBoxControlVisualizer"),cx=(0,use_cx.l)();return{...otherProps,className:(0,react.useMemo)((()=>cx(((borders,size)=>(0,emotion_react_browser_esm.AH)("position:absolute;top:","__unstable-large"===size?"20px":"15px",";right:","__unstable-large"===size?"39px":"29px",";bottom:","__unstable-large"===size?"20px":"15px",";left:","__unstable-large"===size?"39px":"29px",";border-top:",borderBoxStyleWithFallback(borders?.top),";border-bottom:",borderBoxStyleWithFallback(borders?.bottom),";",(0,rtl.h)({borderLeft:borderBoxStyleWithFallback(borders?.left)})()," ",(0,rtl.h)({borderRight:borderBoxStyleWithFallback(borders?.right)})(),";","","",""))(value,size),className)),[cx,className,value,size]),value}}const border_box_control_visualizer_component=(0,context_connect.KZ)(((props,forwardedRef)=>{const{value,...otherProps}=useBorderBoxControlVisualizer(props);return(0,jsx_runtime.jsx)(view_component.A,{...otherProps,ref:forwardedRef})}),"BorderBoxControlVisualizer");var line_solid=__webpack_require__("./packages/icons/build-module/library/line-solid.js"),line_dashed=__webpack_require__("./packages/icons/build-module/library/line-dashed.js"),line_dotted=__webpack_require__("./packages/icons/build-module/library/line-dotted.js");const BORDER_STYLES=[{label:(0,i18n_build_module.__)("Solid"),icon:line_solid.A,value:"solid"},{label:(0,i18n_build_module.__)("Dashed"),icon:line_dashed.A,value:"dashed"},{label:(0,i18n_build_module.__)("Dotted"),icon:line_dotted.A,value:"dotted"}];const border_control_style_picker_component=(0,context_connect.KZ)((function UnconnectedBorderControlStylePicker({onChange,...restProps},forwardedRef){return(0,jsx_runtime.jsx)(toggle_group_control_component.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,ref:forwardedRef,isDeselectable:!0,onChange:value=>{onChange?.(value)},...restProps,children:BORDER_STYLES.map((borderStyle=>(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{value:borderStyle.value,icon:borderStyle.icon,label:borderStyle.label},borderStyle.value)))})}),"BorderControlStylePicker");var color_indicator=__webpack_require__("./packages/components/build-module/color-indicator/index.js"),color_palette=__webpack_require__("./packages/components/build-module/color-palette/index.js"),box_sizing=__webpack_require__("./packages/components/build-module/utils/box-sizing.js"),space=__webpack_require__("./packages/components/build-module/utils/space.js"),base_control_styles=__webpack_require__("./packages/components/build-module/base-control/styles/base-control-styles.js"),unit_control_styles=__webpack_require__("./packages/components/build-module/unit-control/styles/unit-control-styles.js");const focusBoxShadow=(0,emotion_react_browser_esm.AH)("box-shadow:inset ",config_values.A.controlBoxShadowFocus,";","","",""),borderControl=(0,emotion_react_browser_esm.AH)("border:0;padding:0;margin:0;",box_sizing.r,";","","",""),styles_wrapperWidth=(0,emotion_react_browser_esm.AH)(unit_control_styles.mT,"{flex:0 0 auto;}","","",""),borderControlDropdown=(0,emotion_react_browser_esm.AH)("background:#fff;&&>button{aspect-ratio:1;padding:0;display:flex;align-items:center;justify-content:center;",(0,rtl.h)({borderRadius:"2px 0 0 2px"},{borderRadius:"0 2px 2px 0"})()," border:",config_values.A.borderWidth," solid ",colors_values.l.ui.border,";&:focus,&:hover:not( :disabled ){",focusBoxShadow," border-color:",colors_values.l.ui.borderFocus,";z-index:1;position:relative;}}","","",""),colorIndicatorWrapper=(border,size)=>{const{style}=border||{};return(0,emotion_react_browser_esm.AH)("border-radius:",config_values.A.radiusFull,";border:2px solid transparent;",style?(border=>{const{color,style}=border||{},fallbackColor=style&&"none"!==style?colors_values.l.gray[300]:void 0;return(0,emotion_react_browser_esm.AH)("border-style:","none"===style?"solid":style,";border-color:",color||fallbackColor,";","","","")})(border):void 0," width:","__unstable-large"===size?"24px":"22px",";height:","__unstable-large"===size?"24px":"22px",";padding:","__unstable-large"===size?"2px":"1px",";&>span{height:",(0,space.x)(4),";width:",(0,space.x)(4),";background:linear-gradient(\n\t\t\t\t-45deg,\n\t\t\t\ttransparent 48%,\n\t\t\t\trgb( 0 0 0 / 20% ) 48%,\n\t\t\t\trgb( 0 0 0 / 20% ) 52%,\n\t\t\t\ttransparent 52%\n\t\t\t);}","","","")},borderControlPopoverControls=(0,emotion_react_browser_esm.AH)("width:",228,"px;>div:first-of-type>",base_control_styles.Gw,"{margin-bottom:0;}&& ",base_control_styles.Gw,"+button:not( .has-text ){min-width:24px;padding:0;}","","",""),borderControlPopoverContent=(0,emotion_react_browser_esm.AH)("","","",""),borderColorIndicator=(0,emotion_react_browser_esm.AH)("","","",""),resetButton=(0,emotion_react_browser_esm.AH)("justify-content:center;width:100%;&&{border-top:",config_values.A.borderWidth," solid ",colors_values.l.gray[400],";border-top-left-radius:0;border-top-right-radius:0;}","","","");var color_palette_utils=__webpack_require__("./packages/components/build-module/color-palette/utils.js");const getAriaLabelColorValue=colorValue=>colorValue.replace(/^var\((.+)\)$/,"$1"),ConnectedBorderControlDropdown=(0,context_connect.KZ)(((props,forwardedRef)=>{const{__experimentalIsRenderedInSidebar,border,colors,disableCustomColors,enableAlpha,enableStyle,indicatorClassName,indicatorWrapperClassName,isStyleSettable,onReset,onColorChange,onStyleChange,popoverContentClassName,popoverControlsClassName,resetButtonClassName,size,__unstablePopoverProps,...otherProps}=function useBorderControlDropdown(props){const{border,className,colors=[],enableAlpha=!1,enableStyle=!0,onChange,previousStyleSelection,size="default",__experimentalIsRenderedInSidebar=!1,...otherProps}=(0,use_context_system.A)(props,"BorderControlDropdown"),[widthValue]=(0,unit_control_utils.bu)(border?.width),hasZeroWidth=0===widthValue,cx=(0,use_cx.l)(),classes=(0,react.useMemo)((()=>cx(borderControlDropdown,className)),[className,cx]),indicatorClassName=(0,react.useMemo)((()=>cx(borderColorIndicator)),[cx]),indicatorWrapperClassName=(0,react.useMemo)((()=>cx(colorIndicatorWrapper(border,size))),[border,cx,size]),popoverControlsClassName=(0,react.useMemo)((()=>cx(borderControlPopoverControls)),[cx]),popoverContentClassName=(0,react.useMemo)((()=>cx(borderControlPopoverContent)),[cx]),resetButtonClassName=(0,react.useMemo)((()=>cx(resetButton)),[cx]);return{...otherProps,border,className:classes,colors,enableAlpha,enableStyle,indicatorClassName,indicatorWrapperClassName,onColorChange:color=>{onChange({color,style:"none"===border?.style?previousStyleSelection:border?.style,width:hasZeroWidth&&color?"1px":border?.width})},onStyleChange:style=>{const width=hasZeroWidth&&style?"1px":border?.width;onChange({...border,style,width})},onReset:()=>{onChange({...border,color:void 0,style:void 0})},popoverContentClassName,popoverControlsClassName,resetButtonClassName,size,__experimentalIsRenderedInSidebar}}(props),{color,style}=border||{},colorObject=((colorValue,colors)=>{if(colorValue&&colors){if((0,color_palette_utils.HB)(colors)){let matchedColor;return colors.some((origin=>origin.colors.some((color=>color.color===colorValue&&(matchedColor=color,!0))))),matchedColor}return colors.find((color=>color.color===colorValue))}})(color,colors),toggleAriaLabel=((colorValue,colorObject,style,isStyleEnabled)=>{if(isStyleEnabled){if(colorObject){const ariaLabelValue=getAriaLabelColorValue(colorObject.color);return style?(0,i18n_build_module.nv)('Border color and style picker. The currently selected color is called "%1$s" and has a value of "%2$s". The currently selected style is "%3$s".',colorObject.name,ariaLabelValue,style):(0,i18n_build_module.nv)('Border color and style picker. The currently selected color is called "%1$s" and has a value of "%2$s".',colorObject.name,ariaLabelValue)}if(colorValue){const ariaLabelValue=getAriaLabelColorValue(colorValue);return style?(0,i18n_build_module.nv)('Border color and style picker. The currently selected color has a value of "%1$s". The currently selected style is "%2$s".',ariaLabelValue,style):(0,i18n_build_module.nv)('Border color and style picker. The currently selected color has a value of "%1$s".',ariaLabelValue)}return(0,i18n_build_module.__)("Border color and style picker.")}return colorObject?(0,i18n_build_module.nv)('Border color picker. The currently selected color is called "%1$s" and has a value of "%2$s".',colorObject.name,getAriaLabelColorValue(colorObject.color)):colorValue?(0,i18n_build_module.nv)('Border color picker. The currently selected color has a value of "%1$s".',getAriaLabelColorValue(colorValue)):(0,i18n_build_module.__)("Border color picker.")})(color,colorObject,style,enableStyle),showResetButton=color||style&&"none"!==style,dropdownPosition=__experimentalIsRenderedInSidebar?"bottom left":void 0;return(0,jsx_runtime.jsx)(dropdown.A,{renderToggle:({onToggle})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{onClick:onToggle,variant:"tertiary","aria-label":toggleAriaLabel,tooltipPosition:dropdownPosition,label:(0,i18n_build_module.__)("Border color and style picker"),showTooltip:!0,__next40pxDefaultSize:"__unstable-large"===size,children:(0,jsx_runtime.jsx)("span",{className:indicatorWrapperClassName,children:(0,jsx_runtime.jsx)(color_indicator.A,{className:indicatorClassName,colorValue:color})})}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(dropdown_content_wrapper.A,{paddingSize:"medium",children:(0,jsx_runtime.jsxs)(v_stack_component.A,{className:popoverControlsClassName,spacing:6,children:[(0,jsx_runtime.jsx)(color_palette.Ay,{className:popoverContentClassName,value:color,onChange:onColorChange,colors,disableCustomColors,__experimentalIsRenderedInSidebar,clearable:!1,enableAlpha}),enableStyle&&isStyleSettable&&(0,jsx_runtime.jsx)(border_control_style_picker_component,{label:(0,i18n_build_module.__)("Style"),value:style,onChange:onStyleChange})]})}),showResetButton&&(0,jsx_runtime.jsx)(dropdown_content_wrapper.A,{paddingSize:"none",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{className:resetButtonClassName,variant:"tertiary",onClick:()=>{onReset(),onClose()},__next40pxDefaultSize:!0,children:(0,i18n_build_module.__)("Reset")})})]}),popoverProps:{...__unstablePopoverProps},...otherProps,ref:forwardedRef})}),"BorderControlDropdown"),border_control_dropdown_component=ConnectedBorderControlDropdown,isValidBorder=border=>void 0!==border?.width&&""!==border.width||void 0!==border?.color;function useBorderControl(props){const{className,colors=[],isCompact,onChange,enableAlpha=!0,enableStyle=!0,shouldSanitizeBorder=!0,size="default",value:border,width,__experimentalIsRenderedInSidebar=!1,__next40pxDefaultSize,...otherProps}=(0,use_context_system.A)(props,"BorderControl"),computedSize="default"===size&&__next40pxDefaultSize?"__unstable-large":size,[widthValue,originalWidthUnit]=(0,unit_control_utils.bu)(border?.width),widthUnit=originalWidthUnit||"px",hadPreviousZeroWidth=0===widthValue,[colorSelection,setColorSelection]=(0,react.useState)(),[styleSelection,setStyleSelection]=(0,react.useState)(),isStyleSettable=!shouldSanitizeBorder||isValidBorder(border),onBorderChange=(0,react.useCallback)((newBorder=>{!shouldSanitizeBorder||isValidBorder(newBorder)?onChange(newBorder):onChange(void 0)}),[onChange,shouldSanitizeBorder]),onWidthChange=(0,react.useCallback)((newWidth=>{const newWidthValue=""===newWidth?void 0:newWidth,[parsedValue]=(0,unit_control_utils.bu)(newWidth),hasZeroWidth=0===parsedValue,updatedBorder={...border,width:newWidthValue};hasZeroWidth&&!hadPreviousZeroWidth&&(setColorSelection(border?.color),setStyleSelection(border?.style),updatedBorder.color=void 0,updatedBorder.style="none"),!hasZeroWidth&&hadPreviousZeroWidth&&(void 0===updatedBorder.color&&(updatedBorder.color=colorSelection),"none"===updatedBorder.style&&(updatedBorder.style=styleSelection)),onBorderChange(updatedBorder)}),[border,hadPreviousZeroWidth,colorSelection,styleSelection,onBorderChange]),onSliderChange=(0,react.useCallback)((value=>{onWidthChange(`${value}${widthUnit}`)}),[onWidthChange,widthUnit]),cx=(0,use_cx.l)(),classes=(0,react.useMemo)((()=>cx(borderControl,className)),[className,cx]);let wrapperWidth=width;isCompact&&(wrapperWidth="__unstable-large"===size?"116px":"90px");const innerWrapperClassName=(0,react.useMemo)((()=>{const widthStyle=!!wrapperWidth&&styles_wrapperWidth,heightStyle=(size=>(0,emotion_react_browser_esm.AH)("height:","__unstable-large"===size?"40px":"30px",";","","",""))(computedSize);return cx((0,emotion_react_browser_esm.AH)(unit_control_styles.mT,"{flex:1 1 40%;}&& ",unit_control_styles.td,"{min-height:0;}","","",""),widthStyle,heightStyle)}),[wrapperWidth,cx,computedSize]),sliderClassName=(0,react.useMemo)((()=>cx((0,emotion_react_browser_esm.AH)("flex:1 1 60%;",(0,rtl.h)({marginRight:(0,space.x)(3)})(),";","","",""))),[cx]);return{...otherProps,className:classes,colors,enableAlpha,enableStyle,innerWrapperClassName,inputWidth:wrapperWidth,isStyleSettable,onBorderChange,onSliderChange,onWidthChange,previousStyleSelection:styleSelection,sliderClassName,value:border,widthUnit,widthValue,size:computedSize,__experimentalIsRenderedInSidebar,__next40pxDefaultSize}}var spacer_component=__webpack_require__("./packages/components/build-module/spacer/component.js");const BorderLabel=props=>{const{label,hideLabelFromVision}=props;return label?hideLabelFromVision?(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"legend",children:label}):(0,jsx_runtime.jsx)(base_control_styles.Gw,{as:"legend",children:label}):null},BorderControl=(0,context_connect.KZ)(((props,forwardedRef)=>{const{__next40pxDefaultSize=!1,colors,disableCustomColors,disableUnits,enableAlpha,enableStyle,hideLabelFromVision,innerWrapperClassName,inputWidth,isStyleSettable,label,onBorderChange,onSliderChange,onWidthChange,placeholder,__unstablePopoverProps,previousStyleSelection,showDropdownHeader,size,sliderClassName,value:border,widthUnit,widthValue,withSlider,__experimentalIsRenderedInSidebar,...otherProps}=useBorderControl(props);return(0,jsx_runtime.jsxs)(view_component.A,{as:"fieldset",...otherProps,ref:forwardedRef,children:[(0,jsx_runtime.jsx)(BorderLabel,{label,hideLabelFromVision}),(0,jsx_runtime.jsxs)(h_stack_component.A,{spacing:4,className:innerWrapperClassName,children:[(0,jsx_runtime.jsx)(unit_control.Ay,{prefix:(0,jsx_runtime.jsx)(spacer_component.A,{marginRight:1,marginBottom:0,children:(0,jsx_runtime.jsx)(border_control_dropdown_component,{border,colors,__unstablePopoverProps,disableCustomColors,enableAlpha,enableStyle,isStyleSettable,onChange:onBorderChange,previousStyleSelection,__experimentalIsRenderedInSidebar,size})}),label:(0,i18n_build_module.__)("Border width"),hideLabelFromVision:!0,min:0,onChange:onWidthChange,value:border?.width||"",placeholder,disableUnits,__unstableInputWidth:inputWidth,size}),withSlider&&(0,jsx_runtime.jsx)(range_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Border width"),hideLabelFromVision:!0,className:sliderClassName,initialPosition:0,max:100,min:0,onChange:onSliderChange,step:["px","%"].includes(widthUnit)?1:.1,value:widthValue||void 0,withInputField:!1,__next40pxDefaultSize})]})]})}),"BorderControl"),border_control_component=BorderControl;var grid_component=__webpack_require__("./packages/components/build-module/grid/component.js");function useBorderBoxControlSplitControls(props){const{className,colors=[],enableAlpha=!1,enableStyle=!0,size="default",__experimentalIsRenderedInSidebar=!1,...otherProps}=(0,use_context_system.A)(props,"BorderBoxControlSplitControls"),cx=(0,use_cx.l)(),classes=(0,react.useMemo)((()=>cx((size=>(0,emotion_react_browser_esm.AH)("position:relative;flex:1;width:","__unstable-large"===size?void 0:"80%",";","","",""))(size),className)),[cx,className,size]);return{...otherProps,centeredClassName:(0,react.useMemo)((()=>cx(centeredBorderControl,className)),[cx,className]),className:classes,colors,enableAlpha,enableStyle,rightAlignedClassName:(0,react.useMemo)((()=>cx((0,emotion_react_browser_esm.AH)((0,rtl.h)({marginLeft:"auto"})(),";","","",""),className)),[cx,className]),size,__experimentalIsRenderedInSidebar}}const ConnectedBorderBoxControlSplitControls=(0,context_connect.KZ)(((props,forwardedRef)=>{const{centeredClassName,colors,disableCustomColors,enableAlpha,enableStyle,onChange,popoverPlacement,popoverOffset,rightAlignedClassName,size="default",value,__experimentalIsRenderedInSidebar,...otherProps}=useBorderBoxControlSplitControls(props),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>popoverPlacement?{placement:popoverPlacement,offset:popoverOffset,anchor:popoverAnchor,shift:!0}:void 0),[popoverPlacement,popoverOffset,popoverAnchor]),sharedBorderControlProps={colors,disableCustomColors,enableAlpha,enableStyle,isCompact:!0,__experimentalIsRenderedInSidebar,size},mergedRef=(0,use_merge_refs.A)([setPopoverAnchor,forwardedRef]);return(0,jsx_runtime.jsxs)(grid_component.A,{...otherProps,ref:mergedRef,gap:4,children:[(0,jsx_runtime.jsx)(border_box_control_visualizer_component,{value,size}),(0,jsx_runtime.jsx)(border_control_component,{className:centeredClassName,hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Top border"),onChange:newBorder=>onChange(newBorder,"top"),__unstablePopoverProps:popoverProps,value:value?.top,...sharedBorderControlProps}),(0,jsx_runtime.jsx)(border_control_component,{hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Left border"),onChange:newBorder=>onChange(newBorder,"left"),__unstablePopoverProps:popoverProps,value:value?.left,...sharedBorderControlProps}),(0,jsx_runtime.jsx)(border_control_component,{className:rightAlignedClassName,hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Right border"),onChange:newBorder=>onChange(newBorder,"right"),__unstablePopoverProps:popoverProps,value:value?.right,...sharedBorderControlProps}),(0,jsx_runtime.jsx)(border_control_component,{className:centeredClassName,hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Bottom border"),onChange:newBorder=>onChange(newBorder,"bottom"),__unstablePopoverProps:popoverProps,value:value?.bottom,...sharedBorderControlProps})]})}),"BorderBoxControlSplitControls"),border_box_control_split_controls_component=ConnectedBorderBoxControlSplitControls;function useBorderBoxControl(props){const{className,colors=[],onChange,enableAlpha=!1,enableStyle=!0,size="default",value,__experimentalIsRenderedInSidebar=!1,__next40pxDefaultSize,...otherProps}=(0,use_context_system.A)(props,"BorderBoxControl"),computedSize="default"===size&&__next40pxDefaultSize?"__unstable-large":size,mixedBorders=(0,border_box_control_utils.xY)(value),splitBorders=(0,border_box_control_utils.wN)(value),linkedValue=splitBorders?(0,border_box_control_utils.uO)(value):value,splitValue=splitBorders?value:(0,border_box_control_utils.mS)(value),hasWidthValue=!isNaN(parseFloat(`${linkedValue?.width}`)),[isLinked,setIsLinked]=(0,react.useState)(!mixedBorders),cx=(0,use_cx.l)(),classes=(0,react.useMemo)((()=>cx(borderBoxControl,className)),[cx,className]),linkedControlClassName=(0,react.useMemo)((()=>cx((0,emotion_react_browser_esm.AH)("flex:1;",(0,rtl.h)({marginRight:"24px"})(),";","","",""))),[cx]),wrapperClassName=(0,react.useMemo)((()=>cx(wrapper)),[cx]);return{...otherProps,className:classes,colors,disableUnits:mixedBorders&&!hasWidthValue,enableAlpha,enableStyle,hasMixedBorders:mixedBorders,isLinked,linkedControlClassName,onLinkedChange:newBorder=>{if(!newBorder)return onChange(void 0);if(!mixedBorders||(0,border_box_control_utils.KM)(newBorder))return onChange((0,border_box_control_utils.AN)(newBorder)?void 0:newBorder);const changes=(0,border_box_control_utils.KP)(linkedValue,newBorder),updatedBorders={top:{...value?.top,...changes},right:{...value?.right,...changes},bottom:{...value?.bottom,...changes},left:{...value?.left,...changes}};if((0,border_box_control_utils.xY)(updatedBorders))return onChange(updatedBorders);const filteredResult=(0,border_box_control_utils.AN)(updatedBorders.top)?void 0:updatedBorders.top;onChange(filteredResult)},onSplitChange:(newBorder,side)=>{const updatedBorders={...splitValue,[side]:newBorder};(0,border_box_control_utils.xY)(updatedBorders)?onChange(updatedBorders):onChange(newBorder)},toggleLinked:()=>setIsLinked(!isLinked),linkedValue,size:computedSize,splitValue,wrapperClassName,__experimentalIsRenderedInSidebar}}const component_BorderLabel=props=>{const{label,hideLabelFromVision}=props;return label?hideLabelFromVision?(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"label",children:label}):(0,jsx_runtime.jsx)(base_control_styles.Gw,{children:label}):null},BorderBoxControl=(0,context_connect.KZ)(((props,forwardedRef)=>{const{className,colors,disableCustomColors,disableUnits,enableAlpha,enableStyle,hasMixedBorders,hideLabelFromVision,isLinked,label,linkedControlClassName,linkedValue,onLinkedChange,onSplitChange,popoverPlacement,popoverOffset,size,splitValue,toggleLinked,wrapperClassName,__experimentalIsRenderedInSidebar,...otherProps}=useBorderBoxControl(props),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>popoverPlacement?{placement:popoverPlacement,offset:popoverOffset,anchor:popoverAnchor,shift:!0}:void 0),[popoverPlacement,popoverOffset,popoverAnchor]),mergedRef=(0,use_merge_refs.A)([setPopoverAnchor,forwardedRef]);return(0,jsx_runtime.jsxs)(view_component.A,{className,...otherProps,ref:mergedRef,children:[(0,jsx_runtime.jsx)(component_BorderLabel,{label,hideLabelFromVision}),(0,jsx_runtime.jsxs)(view_component.A,{className:wrapperClassName,children:[isLinked?(0,jsx_runtime.jsx)(border_control_component,{className:linkedControlClassName,colors,disableUnits,disableCustomColors,enableAlpha,enableStyle,onChange:onLinkedChange,placeholder:hasMixedBorders?(0,i18n_build_module.__)("Mixed"):void 0,__unstablePopoverProps:popoverProps,shouldSanitizeBorder:!1,value:linkedValue,withSlider:!0,width:"__unstable-large"===size?"116px":"110px",__experimentalIsRenderedInSidebar,size}):(0,jsx_runtime.jsx)(border_box_control_split_controls_component,{colors,disableCustomColors,enableAlpha,enableStyle,onChange:onSplitChange,popoverPlacement,popoverOffset,value:splitValue,__experimentalIsRenderedInSidebar,size}),(0,jsx_runtime.jsx)(border_box_control_linked_button_component,{onClick:toggleLinked,isLinked,size})]})]})}),"BorderBoxControl"),border_box_control_component=BorderBoxControl;function utils_mode(inputArray){return[...inputArray].sort(((a,b)=>inputArray.filter((v=>v===b)).length-inputArray.filter((v=>v===a)).length)).shift()}function getAllUnit(selectedUnits={}){const{flat,...cornerUnits}=selectedUnits;return flat||utils_mode(Object.values(cornerUnits).filter(Boolean))||"px"}function getAllValue(values={}){if("string"==typeof values)return values;const parsedQuantitiesAndUnits=Object.values(values).map((value=>(0,unit_control_utils.bu)(value))),allValues=parsedQuantitiesAndUnits.map((value=>{var _value$;return null!==(_value$=value[0])&&void 0!==_value$?_value$:""})),allUnits=parsedQuantitiesAndUnits.map((value=>value[1])),value=allValues.every((v=>v===allValues[0]))?allValues[0]:"",unit=utils_mode(allUnits);return 0===value||value?`${value}${unit}`:void 0}function hasMixedValues(values={}){const allValue=getAllValue(values);return"string"!=typeof values&&isNaN(parseFloat(allValue))}function hasDefinedValues(values){if(!values)return!1;if("string"==typeof values)return!0;return!!Object.values(values).filter((value=>!!value||0===value)).length}function AllInputControl({onChange,selectedUnits,setSelectedUnits,values,...props}){let allValue=getAllValue(values);void 0===allValue&&(allValue=getAllUnit(selectedUnits));const isMixed=hasDefinedValues(values)&&hasMixedValues(values),allPlaceholder=isMixed?(0,i18n_build_module.__)("Mixed"):null;return(0,jsx_runtime.jsx)(unit_control.Ay,{...props,"aria-label":(0,i18n_build_module.__)("Border radius"),disableUnits:isMixed,isOnly:!0,value:allValue,onChange:next=>{const isNumeric=!isNaN(parseFloat(next));onChange(isNumeric?next:void 0)},onUnitChange:unit=>{setSelectedUnits({topLeft:unit,topRight:unit,bottomLeft:unit,bottomRight:unit})},placeholder:allPlaceholder,size:"__unstable-large"})}const CORNERS={topLeft:(0,i18n_build_module.__)("Top left"),topRight:(0,i18n_build_module.__)("Top right"),bottomLeft:(0,i18n_build_module.__)("Bottom left"),bottomRight:(0,i18n_build_module.__)("Bottom right")};function BoxInputControls({onChange,selectedUnits,setSelectedUnits,values:valuesProp,...props}){const createHandleOnChange=corner=>next=>{if(!onChange)return;const nextValue=!isNaN(parseFloat(next))?next:void 0;onChange({...values,[corner]:nextValue})},values="string"!=typeof valuesProp?valuesProp:{topLeft:valuesProp,topRight:valuesProp,bottomLeft:valuesProp,bottomRight:valuesProp};return(0,jsx_runtime.jsx)("div",{className:"components-border-radius-control__input-controls-wrapper",children:Object.entries(CORNERS).map((([corner,label])=>{const[parsedQuantity,parsedUnit]=(0,unit_control_utils.bu)(values[corner]),computedUnit=values[corner]?parsedUnit:selectedUnits[corner]||selectedUnits.flat;return(0,jsx_runtime.jsx)(tooltip.Ay,{text:label,placement:"top",children:(0,jsx_runtime.jsx)("div",{className:"components-border-radius-control__tooltip-wrapper",children:(0,jsx_runtime.jsx)(unit_control.Ay,{...props,"aria-label":label,value:[parsedQuantity,computedUnit].join(""),onChange:createHandleOnChange(corner),onUnitChange:(side=corner,next=>{const newUnits={...selectedUnits};newUnits[side]=next,setSelectedUnits(newUnits)}),size:"__unstable-large"})})},corner);var side}))})}function LinkedButton({isLinked,...props}){const label=isLinked?(0,i18n_build_module.__)("Unlink radii"):(0,i18n_build_module.__)("Link radii");return(0,jsx_runtime.jsx)(build_module_button.Ay,{...props,className:"component-border-radius-control__linked-button",size:"small",icon:isLinked?library_link.A:link_off.A,iconSize:24,label})}const border_radius_control_DEFAULT_VALUES={topLeft:void 0,topRight:void 0,bottomLeft:void 0,bottomRight:void 0},MIN_BORDER_RADIUS_VALUE=0,MAX_BORDER_RADIUS_VALUES={px:100,em:20,rem:20};function BorderRadiusControl({onChange,values}){const[isLinked,setIsLinked]=(0,react.useState)(!hasDefinedValues(values)||!hasMixedValues(values)),[selectedUnits,setSelectedUnits]=(0,react.useState)({flat:"string"==typeof values?(0,unit_control_utils.bu)(values)[1]:void 0,topLeft:(0,unit_control_utils.bu)(values?.topLeft)[1],topRight:(0,unit_control_utils.bu)(values?.topRight)[1],bottomLeft:(0,unit_control_utils.bu)(values?.bottomLeft)[1],bottomRight:(0,unit_control_utils.bu)(values?.bottomRight)[1]}),[availableUnits]=use_settings_useSettings("spacing.units"),units=(0,unit_control_utils.E)({availableUnits:availableUnits||["px","em","rem"]}),unit=getAllUnit(selectedUnits),unitConfig=units&&units.find((item=>item.value===unit)),step=unitConfig?.step||1,[allValue]=(0,unit_control_utils.bu)(getAllValue(values));return(0,jsx_runtime.jsxs)("fieldset",{className:"components-border-radius-control",children:[(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"legend",children:(0,i18n_build_module.__)("Radius")}),(0,jsx_runtime.jsxs)("div",{className:"components-border-radius-control__wrapper",children:[isLinked?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(AllInputControl,{className:"components-border-radius-control__unit-control",values,min:MIN_BORDER_RADIUS_VALUE,onChange,selectedUnits,setSelectedUnits,units}),(0,jsx_runtime.jsx)(range_control.A,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Border radius"),hideLabelFromVision:!0,className:"components-border-radius-control__range-control",value:null!=allValue?allValue:"",min:MIN_BORDER_RADIUS_VALUE,max:MAX_BORDER_RADIUS_VALUES[unit],initialPosition:0,withInputField:!1,onChange:next=>{onChange(void 0!==next?`${next}${unit}`:void 0)},step,__nextHasNoMarginBottom:!0})]}):(0,jsx_runtime.jsx)(BoxInputControls,{min:MIN_BORDER_RADIUS_VALUE,onChange,selectedUnits,setSelectedUnits,values:values||border_radius_control_DEFAULT_VALUES,units}),(0,jsx_runtime.jsx)(LinkedButton,{onClick:()=>setIsLinked(!isLinked),isLinked})]})]})}var heading_component=__webpack_require__("./packages/components/build-module/heading/component.js"),composite=__webpack_require__("./packages/components/build-module/composite/index.js"),library_check=__webpack_require__("./packages/icons/build-module/library/check.js"),shadow=__webpack_require__("./packages/icons/build-module/library/shadow.js");const shadow_panel_components_EMPTY_ARRAY=[];function ShadowPopoverContainer({shadow,onShadowChange,settings}){const shadows=useShadowPresets(settings);return(0,jsx_runtime.jsx)("div",{className:"block-editor-global-styles__shadow-popover-container",children:(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:4,children:[(0,jsx_runtime.jsx)(heading_component.A,{level:5,children:(0,i18n_build_module.__)("Drop shadow")}),(0,jsx_runtime.jsx)(ShadowPresets,{presets:shadows,activeShadow:shadow,onSelect:onShadowChange}),(0,jsx_runtime.jsx)("div",{className:"block-editor-global-styles__clear-shadow",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>onShadowChange(void 0),children:(0,i18n_build_module.__)("Clear")})})]})})}function ShadowPresets({presets,activeShadow,onSelect}){return presets?(0,jsx_runtime.jsx)(composite.e,{role:"listbox",className:"block-editor-global-styles__shadow__list","aria-label":(0,i18n_build_module.__)("Drop shadows"),children:presets.map((({name,slug,shadow})=>(0,jsx_runtime.jsx)(ShadowIndicator,{label:name,isActive:shadow===activeShadow,type:"unset"===slug?"unset":"preset",onSelect:()=>onSelect(shadow===activeShadow?void 0:shadow),shadow},slug)))}):null}function ShadowIndicator({type,label,isActive,onSelect,shadow}){return(0,jsx_runtime.jsx)(tooltip.Ay,{text:label,children:(0,jsx_runtime.jsx)(composite.e.Item,{role:"option","aria-label":label,"aria-selected":isActive,className:(0,clsx.A)("block-editor-global-styles__shadow__item",{"is-active":isActive}),render:(0,jsx_runtime.jsx)("button",{className:(0,clsx.A)("block-editor-global-styles__shadow-indicator",{unset:"unset"===type}),onClick:onSelect,style:{boxShadow:shadow},"aria-label":label,children:isActive&&(0,jsx_runtime.jsx)(build_module_icon.A,{icon:library_check.A})})})})}function ShadowPopover({shadow,onShadowChange,settings}){return(0,jsx_runtime.jsx)(dropdown.A,{popoverProps:{placement:"left-start",offset:36,shift:!0},className:"block-editor-global-styles__shadow-dropdown",renderToggle:renderShadowToggle(),renderContent:()=>(0,jsx_runtime.jsx)(dropdown_content_wrapper.A,{paddingSize:"medium",children:(0,jsx_runtime.jsx)(ShadowPopoverContainer,{shadow,onShadowChange,settings})})})}function renderShadowToggle(){return({onToggle,isOpen})=>{const toggleProps={onClick:onToggle,className:(0,clsx.A)({"is-open":isOpen}),"aria-expanded":isOpen};return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,...toggleProps,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-start",children:[(0,jsx_runtime.jsx)(build_module_icon.A,{className:"block-editor-global-styles__toggle-icon",icon:shadow.A,size:24}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,i18n_build_module.__)("Drop shadow")})]})})}}function useShadowPresets(settings){return(0,react.useMemo)((()=>{var _settings$shadow$pres;if(!settings?.shadow)return shadow_panel_components_EMPTY_ARRAY;const defaultPresetsEnabled=settings?.shadow?.defaultPresets,{default:defaultShadows,theme:themeShadows,custom:customShadows}=null!==(_settings$shadow$pres=settings?.shadow?.presets)&&void 0!==_settings$shadow$pres?_settings$shadow$pres:{},unsetShadow={name:(0,i18n_build_module.__)("Unset"),slug:"unset",shadow:"none"},shadowPresets=[...defaultPresetsEnabled&&defaultShadows||shadow_panel_components_EMPTY_ARRAY,...themeShadows||shadow_panel_components_EMPTY_ARRAY,...customShadows||shadow_panel_components_EMPTY_ARRAY];return shadowPresets.length&&shadowPresets.unshift(unsetShadow),shadowPresets}),[settings])}function useHasBorderPanel(settings){return Object.values(useHasBorderPanelControls(settings)).some(Boolean)}function useHasBorderPanelControls(settings){return{hasBorderColor:useHasBorderColorControl(settings),hasBorderRadius:useHasBorderRadiusControl(settings),hasBorderStyle:useHasBorderStyleControl(settings),hasBorderWidth:useHasBorderWidthControl(settings),hasShadow:useHasShadowControl(settings)}}function useHasBorderColorControl(settings){return settings?.border?.color}function useHasBorderRadiusControl(settings){return settings?.border?.radius}function useHasBorderStyleControl(settings){return settings?.border?.style}function useHasBorderWidthControl(settings){return settings?.border?.width}function useHasShadowControl(settings){const shadows=useShadowPresets(settings);return!!settings?.shadow&&shadows.length>0}function BorderToolsPanel({resetAllFilter,onChange,value,panelId,children,label}){const dropdownMenuProps=useToolsPanelDropdownMenuProps();return(0,jsx_runtime.jsx)(tools_panel_component.A,{label,resetAll:()=>{const updatedValue=resetAllFilter(value);onChange(updatedValue)},panelId,dropdownMenuProps,children})}const border_panel_DEFAULT_CONTROLS={radius:!0,color:!0,width:!0,shadow:!0};function BorderPanel({as:Wrapper=BorderToolsPanel,value,onChange,inheritedValue=value,settings,panelId,name,defaultControls=border_panel_DEFAULT_CONTROLS}){var _settings$shadow$pres,_ref,_ref2,_shadowPresets$custom;const colors=useColorsPerOrigin(settings),decodeValue=(0,react.useCallback)((rawValue=>getValueFromVariable({settings},"",rawValue)),[settings]),encodeColorValue=colorValue=>{const colorObject=colors.flatMap((({colors:originColors})=>originColors)).find((({color})=>color===colorValue));return colorObject?"var:preset|color|"+colorObject.slug:colorValue},border=(0,react.useMemo)((()=>{if((0,border_box_control_utils.wN)(inheritedValue?.border)){const borderValue={...inheritedValue?.border};return["top","right","bottom","left"].forEach((side=>{borderValue[side]={...borderValue[side],color:decodeValue(borderValue[side]?.color)}})),borderValue}return{...inheritedValue?.border,color:inheritedValue?.border?.color?decodeValue(inheritedValue?.border?.color):void 0}}),[inheritedValue?.border,decodeValue]),setBorder=newBorder=>onChange({...value,border:newBorder}),showBorderColor=useHasBorderColorControl(settings),showBorderStyle=useHasBorderStyleControl(settings),showBorderWidth=useHasBorderWidthControl(settings),showBorderRadius=useHasBorderRadiusControl(settings),borderRadiusValues=decodeValue(border?.radius),setBorderRadius=newBorderRadius=>setBorder({...border,radius:newBorderRadius}),hasBorderRadius=()=>{const borderValues=value?.border?.radius;return"object"==typeof borderValues?Object.entries(borderValues).some(Boolean):!!borderValues},hasShadowControl=useHasShadowControl(settings),shadow=decodeValue(inheritedValue?.shadow),shadowPresets=null!==(_settings$shadow$pres=settings?.shadow?.presets)&&void 0!==_settings$shadow$pres?_settings$shadow$pres:{},mergedShadowPresets=null!==(_ref=null!==(_ref2=null!==(_shadowPresets$custom=shadowPresets.custom)&&void 0!==_shadowPresets$custom?_shadowPresets$custom:shadowPresets.theme)&&void 0!==_ref2?_ref2:shadowPresets.default)&&void 0!==_ref?_ref:[],setShadow=newValue=>{const slug=mergedShadowPresets?.find((({shadow:shadowName})=>shadowName===newValue))?.slug;onChange(setImmutably(value,["shadow"],slug?`var:preset|shadow|${slug}`:newValue||void 0))},resetAllFilter=(0,react.useCallback)((previousValue=>({...previousValue,border:void 0,shadow:void 0})),[]),showBorderByDefault=defaultControls?.color||defaultControls?.width,hasBorderControl=showBorderColor||showBorderStyle||showBorderWidth||showBorderRadius,label=useBorderPanelLabel({blockName:name,hasShadowControl,hasBorderControl});return(0,jsx_runtime.jsxs)(Wrapper,{resetAllFilter,value,onChange,panelId,label,children:[(showBorderWidth||showBorderColor)&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{hasValue:()=>(0,border_box_control_utils.yO)(value?.border),label:(0,i18n_build_module.__)("Border"),onDeselect:()=>(()=>{if(hasBorderRadius())return setBorder({radius:value?.border?.radius});setBorder(void 0)})(),isShownByDefault:showBorderByDefault,panelId,children:(0,jsx_runtime.jsx)(border_box_control_component,{colors,enableAlpha:!0,enableStyle:showBorderStyle,onChange:newBorder=>{const updatedBorder={...newBorder};(0,border_box_control_utils.wN)(updatedBorder)?["top","right","bottom","left"].forEach((side=>{updatedBorder[side]&&(updatedBorder[side]={...updatedBorder[side],color:encodeColorValue(updatedBorder[side]?.color)})})):updatedBorder&&(updatedBorder.color=encodeColorValue(updatedBorder.color)),setBorder({radius:border?.radius,...updatedBorder})},popoverOffset:40,popoverPlacement:"left-start",value:border,__experimentalIsRenderedInSidebar:!0,size:"__unstable-large",hideLabelFromVision:!hasShadowControl,label:(0,i18n_build_module.__)("Border")})}),showBorderRadius&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{hasValue:hasBorderRadius,label:(0,i18n_build_module.__)("Radius"),onDeselect:()=>setBorderRadius(void 0),isShownByDefault:defaultControls.radius,panelId,children:(0,jsx_runtime.jsx)(BorderRadiusControl,{values:borderRadiusValues,onChange:newValue=>{setBorderRadius(newValue||void 0)}})}),hasShadowControl&&(0,jsx_runtime.jsxs)(tools_panel_item_component.A,{label:(0,i18n_build_module.__)("Shadow"),hasValue:()=>!!value?.shadow,onDeselect:()=>setShadow(void 0),isShownByDefault:defaultControls.shadow,panelId,children:[hasBorderControl?(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"legend",children:(0,i18n_build_module.__)("Shadow")}):null,(0,jsx_runtime.jsx)(item_group_component.A,{isBordered:!0,isSeparated:!0,children:(0,jsx_runtime.jsx)(ShadowPopover,{shadow,onShadowChange:setShadow,settings})})]})]})}const BORDER_SUPPORT_KEY="__experimentalBorder",SHADOW_SUPPORT_KEY="shadow",getColorByProperty=(colors,property,value)=>{let matchedColor;return colors.some((origin=>origin.colors.some((color=>color[property]===value&&(matchedColor=color,!0))))),matchedColor},getMultiOriginColor=({colors,namedColor,customColor})=>{if(namedColor){const colorObject=getColorByProperty(colors,"slug",namedColor);if(colorObject)return colorObject}if(!customColor)return{color:void 0};const colorObject=getColorByProperty(colors,"color",customColor);return colorObject||{color:customColor}};function getColorSlugFromVariable(value){const namedColor=/var:preset\|color\|(.+)/.exec(value);return namedColor&&namedColor[1]?namedColor[1]:null}function styleToAttributes(style){if((0,border_box_control_utils.wN)(style?.border))return{style,borderColor:void 0};const borderColorValue=style?.border?.color,borderColorSlug=borderColorValue?.startsWith("var:preset|color|")?borderColorValue.substring(17):void 0,updatedStyle={...style};return updatedStyle.border={...updatedStyle.border,color:borderColorSlug?void 0:borderColorValue},{style:utils_cleanEmptyObject(updatedStyle),borderColor:borderColorSlug}}function attributesToStyle(attributes){return(0,border_box_control_utils.wN)(attributes.style?.border)?attributes.style:{...attributes.style,border:{...attributes.style?.border,color:attributes.borderColor?"var:preset|color|"+attributes.borderColor:attributes.style?.border?.color}}}function BordersInspectorControl({label,children,resetAllFilter}){const attributesResetAllFilter=(0,react.useCallback)((attributes=>{const existingStyle=attributesToStyle(attributes),updatedStyle=resetAllFilter(existingStyle);return{...attributes,...styleToAttributes(updatedStyle)}}),[resetAllFilter]);return(0,jsx_runtime.jsx)(inspector_controls,{group:"border",resetAllFilter:attributesResetAllFilter,label,children})}function border_BorderPanel({clientId,name,setAttributes,settings}){const isEnabled=useHasBorderPanel(settings);const{style,borderColor}=(0,use_select.A)((function selector(select){const{style,borderColor}=select(store_store).getBlockAttributes(clientId)||{};return{style,borderColor}}),[clientId]),value=(0,react.useMemo)((()=>attributesToStyle({style,borderColor})),[style,borderColor]);if(!isEnabled)return null;const defaultControls={...(0,build_module.bI)(name,[BORDER_SUPPORT_KEY,"__experimentalDefaultControls"]),...(0,build_module.bI)(name,[SHADOW_SUPPORT_KEY,"__experimentalDefaultControls"])};return(0,jsx_runtime.jsx)(BorderPanel,{as:BordersInspectorControl,panelId:clientId,settings,value,onChange:newStyle=>{setAttributes(styleToAttributes(newStyle))},defaultControls})}function hasBorderSupport(blockName,feature="any"){if("web"!==platform.A.OS)return!1;const support=(0,build_module.bI)(blockName,BORDER_SUPPORT_KEY);return!0===support||("any"===feature?!!(support?.color||support?.radius||support?.width||support?.style):!!support?.[feature])}function useBorderPanelLabel({blockName,hasBorderControl,hasShadowControl}={}){const controls=useHasBorderPanelControls(useBlockSettings(blockName));return hasBorderControl||hasShadowControl||!blockName||(hasBorderControl=controls?.hasBorderColor||controls?.hasBorderStyle||controls?.hasBorderWidth||controls?.hasBorderRadius,hasShadowControl=controls?.hasShadow),hasBorderControl&&hasShadowControl?(0,i18n_build_module.__)("Border & Shadow"):hasShadowControl?(0,i18n_build_module.__)("Shadow"):(0,i18n_build_module.__)("Border")}function border_addSaveProps(props,blockNameOrType,attributes){if(!hasBorderSupport(blockNameOrType,"color")||shouldSkipSerialization(blockNameOrType,BORDER_SUPPORT_KEY,"color"))return props;const borderClasses=getBorderClasses(attributes),newClassName=(0,clsx.A)(props.className,borderClasses);return props.className=newClassName||void 0,props}function getBorderClasses(attributes){const{borderColor,style}=attributes,borderColorClass=getColorClassName("border-color",borderColor);return(0,clsx.A)({"has-border-color":borderColor||style?.border?.color,[borderColorClass]:!!borderColorClass})}const border={useBlockProps:function border_useBlockProps({name,borderColor,style}){const{colors}=useMultipleOriginColorsAndGradients();if(!hasBorderSupport(name,"color")||shouldSkipSerialization(name,BORDER_SUPPORT_KEY,"color"))return{};const{color:borderColorValue}=getMultiOriginColor({colors,namedColor:borderColor}),{color:borderTopColor}=getMultiOriginColor({colors,namedColor:getColorSlugFromVariable(style?.border?.top?.color)}),{color:borderRightColor}=getMultiOriginColor({colors,namedColor:getColorSlugFromVariable(style?.border?.right?.color)}),{color:borderBottomColor}=getMultiOriginColor({colors,namedColor:getColorSlugFromVariable(style?.border?.bottom?.color)}),{color:borderLeftColor}=getMultiOriginColor({colors,namedColor:getColorSlugFromVariable(style?.border?.left?.color)});return border_addSaveProps({style:utils_cleanEmptyObject({borderTopColor:borderTopColor||borderColorValue,borderRightColor:borderRightColor||borderColorValue,borderBottomColor:borderBottomColor||borderColorValue,borderLeftColor:borderLeftColor||borderColorValue})||{}},name,{borderColor,style})},addSaveProps:border_addSaveProps,attributeKeys:["borderColor","style"],hasSupport:name=>hasBorderSupport(name,"color")};function __experimentalGetGradientClass(gradientSlug){if(gradientSlug)return`has-${gradientSlug}-gradient-background`}function getGradientValueBySlug(gradients,slug){const gradient=gradients?.find((g=>g.slug===slug));return gradient&&gradient.gradient}function __experimentalUseGradient({gradientAttribute="gradient",customGradientAttribute="customGradient"}={}){const{clientId}=useBlockEditContext(),[userGradientPalette,themeGradientPalette,defaultGradientPalette]=use_settings_useSettings("color.gradients.custom","color.gradients.theme","color.gradients.default"),allGradients=(0,react.useMemo)((()=>[...userGradientPalette||[],...themeGradientPalette||[],...defaultGradientPalette||[]]),[userGradientPalette,themeGradientPalette,defaultGradientPalette]),{gradient,customGradient}=(0,use_select.A)((select=>{const{getBlockAttributes}=select(store_store),attributes=getBlockAttributes(clientId)||{};return{customGradient:attributes[customGradientAttribute],gradient:attributes[gradientAttribute]}}),[clientId,gradientAttribute,customGradientAttribute]),{updateBlockAttributes}=(0,use_dispatch.A)(store_store),setGradient=(0,react.useCallback)((newGradientValue=>{const slug=function getGradientSlugByValue(gradients,value){const gradient=function __experimentalGetGradientObjectByGradientValue(gradients,value){const gradient=gradients?.find((g=>g.gradient===value));return gradient}(gradients,value);return gradient&&gradient.slug}(allGradients,newGradientValue);updateBlockAttributes(clientId,slug?{[gradientAttribute]:slug,[customGradientAttribute]:void 0}:{[gradientAttribute]:void 0,[customGradientAttribute]:newGradientValue})}),[allGradients,clientId,updateBlockAttributes]),gradientClass=__experimentalGetGradientClass(gradient);let gradientValue;return gradientValue=gradient?getGradientValueBySlug(allGradients,gradient):customGradient,{gradientClass,gradientValue,setGradient}}(0,hooks_build_module.U2)("blocks.registerBlockType","core/border/addAttributes",(function addAttributes(settings){return hasBorderSupport(settings,"color")?settings.attributes.borderColor?settings:{...settings,attributes:{...settings.attributes,borderColor:{type:"string"}}}:settings}));var z_stack_component=__webpack_require__("./packages/components/build-module/z-stack/component.js"),gradient_picker=__webpack_require__("./packages/components/build-module/gradient-picker/index.js");const{Tabs}=unlock(private_apis.j),colorsAndGradientKeys=["colors","disableCustomColors","gradients","disableCustomGradients"],TAB_IDS={color:"color",gradient:"gradient"};function ColorGradientControlInner({colors,gradients,disableCustomColors,disableCustomGradients,__experimentalIsRenderedInSidebar,className,label,onColorChange,onGradientChange,colorValue,gradientValue,clearable,showTitle=!0,enableAlpha,headingLevel}){const canChooseAColor=onColorChange&&(colors&&colors.length>0||!disableCustomColors),canChooseAGradient=onGradientChange&&(gradients&&gradients.length>0||!disableCustomGradients);if(!canChooseAColor&&!canChooseAGradient)return null;const tabPanels={[TAB_IDS.color]:(0,jsx_runtime.jsx)(color_palette.Ay,{value:colorValue,onChange:canChooseAGradient?newColor=>{onColorChange(newColor),onGradientChange()}:onColorChange,colors,disableCustomColors,__experimentalIsRenderedInSidebar,clearable,enableAlpha,headingLevel}),[TAB_IDS.gradient]:(0,jsx_runtime.jsx)(gradient_picker.A,{value:gradientValue,onChange:canChooseAColor?newGradient=>{onGradientChange(newGradient),onColorChange()}:onGradientChange,gradients,disableCustomGradients,__experimentalIsRenderedInSidebar,clearable,headingLevel})},renderPanelType=type=>(0,jsx_runtime.jsx)("div",{className:"block-editor-color-gradient-control__panel",children:tabPanels[type]});return(0,jsx_runtime.jsx)(base_control.Ay,{__nextHasNoMarginBottom:!0,className:(0,clsx.A)("block-editor-color-gradient-control",className),children:(0,jsx_runtime.jsx)("fieldset",{className:"block-editor-color-gradient-control__fieldset",children:(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:1,children:[showTitle&&(0,jsx_runtime.jsx)("legend",{children:(0,jsx_runtime.jsx)("div",{className:"block-editor-color-gradient-control__color-indicator",children:(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{children:label})})}),canChooseAColor&&canChooseAGradient&&(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)(Tabs,{defaultTabId:gradientValue?TAB_IDS.gradient:!!canChooseAColor&&TAB_IDS.color,children:[(0,jsx_runtime.jsxs)(Tabs.TabList,{children:[(0,jsx_runtime.jsx)(Tabs.Tab,{tabId:TAB_IDS.color,children:(0,i18n_build_module.__)("Color")}),(0,jsx_runtime.jsx)(Tabs.Tab,{tabId:TAB_IDS.gradient,children:(0,i18n_build_module.__)("Gradient")})]}),(0,jsx_runtime.jsx)(Tabs.TabPanel,{tabId:TAB_IDS.color,className:"block-editor-color-gradient-control__panel",focusable:!1,children:tabPanels.color}),(0,jsx_runtime.jsx)(Tabs.TabPanel,{tabId:TAB_IDS.gradient,className:"block-editor-color-gradient-control__panel",focusable:!1,children:tabPanels.gradient})]})}),!canChooseAGradient&&renderPanelType(TAB_IDS.color),!canChooseAColor&&renderPanelType(TAB_IDS.gradient)]})})})}function ColorGradientControlSelect(props){const[colors,gradients,customColors,customGradients]=use_settings_useSettings("color.palette","color.gradients","color.custom","color.customGradient");return(0,jsx_runtime.jsx)(ColorGradientControlInner,{colors,gradients,disableCustomColors:!customColors,disableCustomGradients:!customGradients,...props})}const control=function ColorGradientControl(props){return colorsAndGradientKeys.every((key=>props.hasOwnProperty(key)))?(0,jsx_runtime.jsx)(ColorGradientControlInner,{...props}):(0,jsx_runtime.jsx)(ColorGradientControlSelect,{...props})};function useHasColorPanel(settings){const hasTextPanel=useHasTextPanel(settings),hasBackgroundPanel=useHasBackgroundColorPanel(settings),hasLinkPanel=useHasLinkPanel(settings),hasHeadingPanel=useHasHeadingPanel(settings),hasButtonPanel=useHasButtonPanel(settings),hasCaptionPanel=useHasCaptionPanel(settings);return hasTextPanel||hasBackgroundPanel||hasLinkPanel||hasHeadingPanel||hasButtonPanel||hasCaptionPanel}function useHasTextPanel(settings){const colors=useColorsPerOrigin(settings);return settings?.color?.text&&(colors?.length>0||settings?.color?.custom)}function useHasLinkPanel(settings){const colors=useColorsPerOrigin(settings);return settings?.color?.link&&(colors?.length>0||settings?.color?.custom)}function useHasCaptionPanel(settings){const colors=useColorsPerOrigin(settings);return settings?.color?.caption&&(colors?.length>0||settings?.color?.custom)}function useHasHeadingPanel(settings){const colors=useColorsPerOrigin(settings),gradients=useGradientsPerOrigin(settings);return settings?.color?.heading&&(colors?.length>0||settings?.color?.custom||gradients?.length>0||settings?.color?.customGradient)}function useHasButtonPanel(settings){const colors=useColorsPerOrigin(settings),gradients=useGradientsPerOrigin(settings);return settings?.color?.button&&(colors?.length>0||settings?.color?.custom||gradients?.length>0||settings?.color?.customGradient)}function useHasBackgroundColorPanel(settings){const colors=useColorsPerOrigin(settings),gradients=useGradientsPerOrigin(settings);return settings?.color?.background&&(colors?.length>0||settings?.color?.custom||gradients?.length>0||settings?.color?.customGradient)}function ColorToolsPanel({resetAllFilter,onChange,value,panelId,children}){const dropdownMenuProps=useToolsPanelDropdownMenuProps();return(0,jsx_runtime.jsx)(tools_panel_component.A,{label:(0,i18n_build_module.__)("Elements"),resetAll:()=>{const updatedValue=resetAllFilter(value);onChange(updatedValue)},panelId,hasInnerWrapper:!0,headingLevel:3,className:"color-block-support-panel",__experimentalFirstVisibleItemClass:"first",__experimentalLastVisibleItemClass:"last",dropdownMenuProps,children:(0,jsx_runtime.jsx)("div",{className:"color-block-support-panel__inner-wrapper",children})})}const color_panel_DEFAULT_CONTROLS={text:!0,background:!0,link:!0,heading:!0,button:!0,caption:!0},popoverProps={placement:"left-start",offset:36,shift:!0},{Tabs:color_panel_Tabs}=unlock(private_apis.j),LabeledColorIndicators=({indicators,label})=>(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-start",children:[(0,jsx_runtime.jsx)(z_stack_component.A,{isLayered:!1,offset:-8,children:indicators.map(((indicator,index)=>(0,jsx_runtime.jsx)(component.A,{expanded:!1,children:(0,jsx_runtime.jsx)(color_indicator.A,{colorValue:indicator})},index)))}),(0,jsx_runtime.jsx)(flex_item_component.A,{className:"block-editor-panel-color-gradient-settings__color-name",children:label})]});function ColorPanelTab({isGradient,inheritedValue,userValue,setValue,colorGradientControlSettings}){return(0,jsx_runtime.jsx)(control,{...colorGradientControlSettings,showTitle:!1,enableAlpha:!0,__experimentalIsRenderedInSidebar:!0,colorValue:isGradient?void 0:inheritedValue,gradientValue:isGradient?inheritedValue:void 0,onColorChange:isGradient?void 0:setValue,onGradientChange:isGradient?setValue:void 0,clearable:inheritedValue===userValue,headingLevel:3})}function ColorPanelDropdown({label,hasValue,resetValue,isShownByDefault,indicators,tabs,colorGradientControlSettings,panelId}){var _tabs$;const currentTab=tabs.find((tab=>void 0!==tab.userValue)),{key:firstTabKey,...firstTab}=null!==(_tabs$=tabs[0])&&void 0!==_tabs$?_tabs$:{};return(0,jsx_runtime.jsx)(tools_panel_item_component.A,{className:"block-editor-tools-panel-color-gradient-settings__item",hasValue,label,onDeselect:resetValue,isShownByDefault,panelId,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,className:"block-editor-tools-panel-color-gradient-settings__dropdown",renderToggle:({onToggle,isOpen})=>{const toggleProps={onClick:onToggle,className:(0,clsx.A)("block-editor-panel-color-gradient-settings__dropdown",{"is-open":isOpen}),"aria-expanded":isOpen};return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,...toggleProps,children:(0,jsx_runtime.jsx)(LabeledColorIndicators,{indicators,label})})},renderContent:()=>(0,jsx_runtime.jsx)(dropdown_content_wrapper.A,{paddingSize:"none",children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-panel-color-gradient-settings__dropdown-content",children:[1===tabs.length&&(0,jsx_runtime.jsx)(ColorPanelTab,{...firstTab,colorGradientControlSettings},firstTabKey),tabs.length>1&&(0,jsx_runtime.jsxs)(color_panel_Tabs,{defaultTabId:currentTab?.key,children:[(0,jsx_runtime.jsx)(color_panel_Tabs.TabList,{children:tabs.map((tab=>(0,jsx_runtime.jsx)(color_panel_Tabs.Tab,{tabId:tab.key,children:tab.label},tab.key)))}),tabs.map((tab=>{const{key:tabKey,...restTabProps}=tab;return(0,jsx_runtime.jsx)(color_panel_Tabs.TabPanel,{tabId:tabKey,focusable:!1,children:(0,jsx_runtime.jsx)(ColorPanelTab,{...restTabProps,colorGradientControlSettings},tabKey)},tabKey)}))]})]})})})})}function ColorPanel({as:Wrapper=ColorToolsPanel,value,onChange,inheritedValue=value,settings,panelId,defaultControls=color_panel_DEFAULT_CONTROLS,children}){const colors=useColorsPerOrigin(settings),gradients=useGradientsPerOrigin(settings),areCustomSolidsEnabled=settings?.color?.custom,areCustomGradientsEnabled=settings?.color?.customGradient,hasSolidColors=colors.length>0||areCustomSolidsEnabled,hasGradientColors=gradients.length>0||areCustomGradientsEnabled,decodeValue=rawValue=>getValueFromVariable({settings},"",rawValue),encodeColorValue=colorValue=>{const colorObject=colors.flatMap((({colors:originColors})=>originColors)).find((({color})=>color===colorValue));return colorObject?"var:preset|color|"+colorObject.slug:colorValue},encodeGradientValue=gradientValue=>{const gradientObject=gradients.flatMap((({gradients:originGradients})=>originGradients)).find((({gradient})=>gradient===gradientValue));return gradientObject?"var:preset|gradient|"+gradientObject.slug:gradientValue},showBackgroundPanel=useHasBackgroundColorPanel(settings),backgroundColor=decodeValue(inheritedValue?.color?.background),userBackgroundColor=decodeValue(value?.color?.background),gradient=decodeValue(inheritedValue?.color?.gradient),userGradient=decodeValue(value?.color?.gradient),showLinkPanel=useHasLinkPanel(settings),linkColor=decodeValue(inheritedValue?.elements?.link?.color?.text),userLinkColor=decodeValue(value?.elements?.link?.color?.text),hoverLinkColor=decodeValue(inheritedValue?.elements?.link?.[":hover"]?.color?.text),userHoverLinkColor=decodeValue(value?.elements?.link?.[":hover"]?.color?.text),showTextPanel=useHasTextPanel(settings),textColor=decodeValue(inheritedValue?.color?.text),userTextColor=decodeValue(value?.color?.text),setTextColor=newColor=>{let changedObject=setImmutably(value,["color","text"],encodeColorValue(newColor));textColor===linkColor&&(changedObject=setImmutably(changedObject,["elements","link","color","text"],encodeColorValue(newColor))),onChange(changedObject)},elements=[{name:"caption",label:(0,i18n_build_module.__)("Captions"),showPanel:useHasCaptionPanel(settings)},{name:"button",label:(0,i18n_build_module.__)("Button"),showPanel:useHasButtonPanel(settings)},{name:"heading",label:(0,i18n_build_module.__)("Heading"),showPanel:useHasHeadingPanel(settings)},{name:"h1",label:(0,i18n_build_module.__)("H1"),showPanel:useHasHeadingPanel(settings)},{name:"h2",label:(0,i18n_build_module.__)("H2"),showPanel:useHasHeadingPanel(settings)},{name:"h3",label:(0,i18n_build_module.__)("H3"),showPanel:useHasHeadingPanel(settings)},{name:"h4",label:(0,i18n_build_module.__)("H4"),showPanel:useHasHeadingPanel(settings)},{name:"h5",label:(0,i18n_build_module.__)("H5"),showPanel:useHasHeadingPanel(settings)},{name:"h6",label:(0,i18n_build_module.__)("H6"),showPanel:useHasHeadingPanel(settings)}],resetAllFilter=(0,react.useCallback)((previousValue=>({...previousValue,color:void 0,elements:{...previousValue?.elements,link:{...previousValue?.elements?.link,color:void 0,":hover":{color:void 0}},...elements.reduce(((acc,element)=>({...acc,[element.name]:{...previousValue?.elements?.[element.name],color:void 0}})),{})}})),[]),items=[showTextPanel&&{key:"text",label:(0,i18n_build_module.__)("Text"),hasValue:()=>!!userTextColor,resetValue:()=>setTextColor(void 0),isShownByDefault:defaultControls.text,indicators:[textColor],tabs:[{key:"text",label:(0,i18n_build_module.__)("Text"),inheritedValue:textColor,setValue:setTextColor,userValue:userTextColor}]},showBackgroundPanel&&{key:"background",label:(0,i18n_build_module.__)("Background"),hasValue:()=>!!userBackgroundColor||!!userGradient,resetValue:()=>{const newValue=setImmutably(value,["color","background"],void 0);newValue.color.gradient=void 0,onChange(newValue)},isShownByDefault:defaultControls.background,indicators:[null!=gradient?gradient:backgroundColor],tabs:[hasSolidColors&&{key:"background",label:(0,i18n_build_module.__)("Color"),inheritedValue:backgroundColor,setValue:newColor=>{const newValue=setImmutably(value,["color","background"],encodeColorValue(newColor));newValue.color.gradient=void 0,onChange(newValue)},userValue:userBackgroundColor},hasGradientColors&&{key:"gradient",label:(0,i18n_build_module.__)("Gradient"),inheritedValue:gradient,setValue:newGradient=>{const newValue=setImmutably(value,["color","gradient"],encodeGradientValue(newGradient));newValue.color.background=void 0,onChange(newValue)},userValue:userGradient,isGradient:!0}].filter(Boolean)},showLinkPanel&&{key:"link",label:(0,i18n_build_module.__)("Link"),hasValue:()=>!!userLinkColor||!!userHoverLinkColor,resetValue:()=>{let newValue=setImmutably(value,["elements","link",":hover","color","text"],void 0);newValue=setImmutably(newValue,["elements","link","color","text"],void 0),onChange(newValue)},isShownByDefault:defaultControls.link,indicators:[linkColor,hoverLinkColor],tabs:[{key:"link",label:(0,i18n_build_module.__)("Default"),inheritedValue:linkColor,setValue:newColor=>{onChange(setImmutably(value,["elements","link","color","text"],encodeColorValue(newColor)))},userValue:userLinkColor},{key:"hover",label:(0,i18n_build_module.__)("Hover"),inheritedValue:hoverLinkColor,setValue:newColor=>{onChange(setImmutably(value,["elements","link",":hover","color","text"],encodeColorValue(newColor)))},userValue:userHoverLinkColor}]}].filter(Boolean);return elements.forEach((({name,label,showPanel})=>{if(!showPanel)return;const elementBackgroundColor=decodeValue(inheritedValue?.elements?.[name]?.color?.background),elementGradient=decodeValue(inheritedValue?.elements?.[name]?.color?.gradient),elementTextColor=decodeValue(inheritedValue?.elements?.[name]?.color?.text),elementBackgroundUserColor=decodeValue(value?.elements?.[name]?.color?.background),elementGradientUserColor=decodeValue(value?.elements?.[name]?.color?.gradient),elementTextUserColor=decodeValue(value?.elements?.[name]?.color?.text),supportsBackground="caption"!==name;items.push({key:name,label,hasValue:()=>!!(elementTextUserColor||elementBackgroundUserColor||elementGradientUserColor),resetValue:()=>{const newValue=setImmutably(value,["elements",name,"color","background"],void 0);newValue.elements[name].color.gradient=void 0,newValue.elements[name].color.text=void 0,onChange(newValue)},isShownByDefault:defaultControls[name],indicators:supportsBackground?[elementTextColor,null!=elementGradient?elementGradient:elementBackgroundColor]:[elementTextColor],tabs:[hasSolidColors&&{key:"text",label:(0,i18n_build_module.__)("Text"),inheritedValue:elementTextColor,setValue:newTextColor=>{onChange(setImmutably(value,["elements",name,"color","text"],encodeColorValue(newTextColor)))},userValue:elementTextUserColor},hasSolidColors&&supportsBackground&&{key:"background",label:(0,i18n_build_module.__)("Background"),inheritedValue:elementBackgroundColor,setValue:newBackgroundColor=>{const newValue=setImmutably(value,["elements",name,"color","background"],encodeColorValue(newBackgroundColor));newValue.elements[name].color.gradient=void 0,onChange(newValue)},userValue:elementBackgroundUserColor},hasGradientColors&&supportsBackground&&{key:"gradient",label:(0,i18n_build_module.__)("Gradient"),inheritedValue:elementGradient,setValue:newGradient=>{const newValue=setImmutably(value,["elements",name,"color","gradient"],encodeGradientValue(newGradient));newValue.elements[name].color.background=void 0,onChange(newValue)},userValue:elementGradientUserColor,isGradient:!0}].filter(Boolean)})})),(0,jsx_runtime.jsxs)(Wrapper,{resetAllFilter,value,onChange,panelId,children:[items.map((item=>{const{key,...restItem}=item;return(0,jsx_runtime.jsx)(ColorPanelDropdown,{...restItem,colorGradientControlSettings:{colors,disableCustomColors:!areCustomSolidsEnabled,gradients,disableCustomGradients:!areCustomGradientsEnabled},panelId},key)})),children]})}(0,colord.X$)([names.A,a11y.A]);const contrast_checker=function ContrastChecker({backgroundColor,fallbackBackgroundColor,fallbackTextColor,fallbackLinkColor,fontSize,isLargeText,textColor,linkColor,enableAlphaChecker=!1}){const currentBackgroundColor=backgroundColor||fallbackBackgroundColor;if(!currentBackgroundColor)return null;const currentTextColor=textColor||fallbackTextColor,currentLinkColor=linkColor||fallbackLinkColor;if(!currentTextColor&&!currentLinkColor)return null;const textColors=[{color:currentTextColor,description:(0,i18n_build_module.__)("text color")},{color:currentLinkColor,description:(0,i18n_build_module.__)("link color")}],colordBackgroundColor=(0,colord.Mj)(currentBackgroundColor),backgroundColorHasTransparency=colordBackgroundColor.alpha()<1,backgroundColorBrightness=colordBackgroundColor.brightness(),isReadableOptions={level:"AA",size:isLargeText||!1!==isLargeText&&fontSize>=24?"large":"small"};let message="",speakMessage="";for(const item of textColors){if(!item.color)continue;const colordTextColor=(0,colord.Mj)(item.color),isColordTextReadable=colordTextColor.isReadable(colordBackgroundColor,isReadableOptions),textHasTransparency=colordTextColor.alpha()<1;if(!isColordTextReadable){if(backgroundColorHasTransparency||textHasTransparency)continue;message=backgroundColorBrightness<colordTextColor.brightness()?(0,i18n_build_module.nv)((0,i18n_build_module.__)("This color combination may be hard for people to read. Try using a darker background color and/or a brighter %s."),item.description):(0,i18n_build_module.nv)((0,i18n_build_module.__)("This color combination may be hard for people to read. Try using a brighter background color and/or a darker %s."),item.description),speakMessage=(0,i18n_build_module.__)("This color combination may be hard for people to read.");break}textHasTransparency&&enableAlphaChecker&&(message=(0,i18n_build_module.__)("Transparent text may be hard for people to read."),speakMessage=(0,i18n_build_module.__)("Transparent text may be hard for people to read."))}return message?((0,a11y_build_module.L)(speakMessage),(0,jsx_runtime.jsx)("div",{className:"block-editor-contrast-checker",children:(0,jsx_runtime.jsx)(notice.A,{spokenMessage:null,status:"warning",isDismissible:!1,children:message})})):null};var use_ref_effect=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),observable_map=__webpack_require__("./packages/compose/build-module/utils/observable-map/index.js");const BlockRefs=(0,react.createContext)({refsMap:(0,observable_map.u)()});function BlockRefsProvider({children}){const value=(0,react.useMemo)((()=>({refsMap:(0,observable_map.u)()})),[]);return(0,jsx_runtime.jsx)(BlockRefs.Provider,{value,children})}function useBlockRefProvider(clientId){const{refsMap}=(0,react.useContext)(BlockRefs);return(0,use_ref_effect.A)((element=>(refsMap.set(clientId,element),()=>refsMap.delete(clientId))),[clientId])}function assignRef(ref,value){"function"==typeof ref?ref(value):ref&&(ref.current=value)}function useBlockElementRef(clientId,ref){const{refsMap}=(0,react.useContext)(BlockRefs);(0,react.useLayoutEffect)((()=>{assignRef(ref,refsMap.get(clientId));const unsubscribe=refsMap.subscribe(clientId,(()=>assignRef(ref,refsMap.get(clientId))));return()=>{unsubscribe(),assignRef(ref,null)}}),[refsMap,clientId,ref])}function useBlockElement(clientId){const[blockElement,setBlockElement]=(0,react.useState)(null);return useBlockElementRef(clientId,setBlockElement),blockElement}function getComputedStyle(node){return node.ownerDocument.defaultView.getComputedStyle(node)}function BlockColorContrastChecker({clientId}){const[detectedBackgroundColor,setDetectedBackgroundColor]=(0,react.useState)(),[detectedColor,setDetectedColor]=(0,react.useState)(),[detectedLinkColor,setDetectedLinkColor]=(0,react.useState)(),blockEl=useBlockElement(clientId);return(0,react.useEffect)((()=>{if(!blockEl)return;setDetectedColor(getComputedStyle(blockEl).color);const firstLinkElement=blockEl.querySelector("a");firstLinkElement&&firstLinkElement.innerText&&setDetectedLinkColor(getComputedStyle(firstLinkElement).color);let backgroundColorNode=blockEl,backgroundColor=getComputedStyle(backgroundColorNode).backgroundColor;for(;"rgba(0, 0, 0, 0)"===backgroundColor&&backgroundColorNode.parentNode&&backgroundColorNode.parentNode.nodeType===backgroundColorNode.parentNode.ELEMENT_NODE;)backgroundColorNode=backgroundColorNode.parentNode,backgroundColor=getComputedStyle(backgroundColorNode).backgroundColor;setDetectedBackgroundColor(backgroundColor)}),[blockEl]),(0,jsx_runtime.jsx)(contrast_checker,{backgroundColor:detectedBackgroundColor,textColor:detectedColor,enableAlphaChecker:!0,linkColor:detectedLinkColor})}const COLOR_SUPPORT_KEY="color",hasColorSupport=blockNameOrType=>{const colorSupport=(0,build_module.bI)(blockNameOrType,COLOR_SUPPORT_KEY);return colorSupport&&(!0===colorSupport.link||!0===colorSupport.gradient||!1!==colorSupport.background||!1!==colorSupport.text)},hasLinkColorSupport=blockType=>{if("web"!==platform.A.OS)return!1;const colorSupport=(0,build_module.bI)(blockType,COLOR_SUPPORT_KEY);return null!==colorSupport&&"object"==typeof colorSupport&&!!colorSupport.link},hasGradientSupport=blockNameOrType=>{const colorSupport=(0,build_module.bI)(blockNameOrType,COLOR_SUPPORT_KEY);return null!==colorSupport&&"object"==typeof colorSupport&&!!colorSupport.gradients},hasBackgroundColorSupport=blockType=>{const colorSupport=(0,build_module.bI)(blockType,COLOR_SUPPORT_KEY);return colorSupport&&!1!==colorSupport.background},hasTextColorSupport=blockType=>{const colorSupport=(0,build_module.bI)(blockType,COLOR_SUPPORT_KEY);return colorSupport&&!1!==colorSupport.text};function color_addSaveProps(props,blockNameOrType,attributes){if(!hasColorSupport(blockNameOrType)||shouldSkipSerialization(blockNameOrType,COLOR_SUPPORT_KEY))return props;const hasGradient=hasGradientSupport(blockNameOrType),{backgroundColor,textColor,gradient,style}=attributes,shouldSerialize=feature=>!shouldSkipSerialization(blockNameOrType,COLOR_SUPPORT_KEY,feature),textClass=shouldSerialize("text")?getColorClassName("color",textColor):void 0,gradientClass=shouldSerialize("gradients")?__experimentalGetGradientClass(gradient):void 0,backgroundClass=shouldSerialize("background")?getColorClassName("background-color",backgroundColor):void 0,serializeHasBackground=shouldSerialize("background")||shouldSerialize("gradients"),hasBackground=backgroundColor||style?.color?.background||hasGradient&&(gradient||style?.color?.gradient),newClassName=(0,clsx.A)(props.className,textClass,gradientClass,{[backgroundClass]:!(hasGradient&&style?.color?.gradient||!backgroundClass),"has-text-color":shouldSerialize("text")&&(textColor||style?.color?.text),"has-background":serializeHasBackground&&hasBackground,"has-link-color":shouldSerialize("link")&&style?.elements?.link?.color});return props.className=newClassName||void 0,props}function color_styleToAttributes(style){const textColorValue=style?.color?.text,textColorSlug=textColorValue?.startsWith("var:preset|color|")?textColorValue.substring(17):void 0,backgroundColorValue=style?.color?.background,backgroundColorSlug=backgroundColorValue?.startsWith("var:preset|color|")?backgroundColorValue.substring(17):void 0,gradientValue=style?.color?.gradient,gradientSlug=gradientValue?.startsWith("var:preset|gradient|")?gradientValue.substring(20):void 0,updatedStyle={...style};return updatedStyle.color={...updatedStyle.color,text:textColorSlug?void 0:textColorValue,background:backgroundColorSlug?void 0:backgroundColorValue,gradient:gradientSlug?void 0:gradientValue},{style:utils_cleanEmptyObject(updatedStyle),textColor:textColorSlug,backgroundColor:backgroundColorSlug,gradient:gradientSlug}}function color_attributesToStyle(attributes){return{...attributes.style,color:{...attributes.style?.color,text:attributes.textColor?"var:preset|color|"+attributes.textColor:attributes.style?.color?.text,background:attributes.backgroundColor?"var:preset|color|"+attributes.backgroundColor:attributes.style?.color?.background,gradient:attributes.gradient?"var:preset|gradient|"+attributes.gradient:attributes.style?.color?.gradient}}}function ColorInspectorControl({children,resetAllFilter}){const attributesResetAllFilter=(0,react.useCallback)((attributes=>{const existingStyle=color_attributesToStyle(attributes),updatedStyle=resetAllFilter(existingStyle);return{...attributes,...color_styleToAttributes(updatedStyle)}}),[resetAllFilter]);return(0,jsx_runtime.jsx)(inspector_controls,{group:"color",resetAllFilter:attributesResetAllFilter,children})}function ColorEdit({clientId,name,setAttributes,settings}){const isEnabled=useHasColorPanel(settings);const{style,textColor,backgroundColor,gradient}=(0,use_select.A)((function selector(select){const{style,textColor,backgroundColor,gradient}=select(store_store).getBlockAttributes(clientId)||{};return{style,textColor,backgroundColor,gradient}}),[clientId]),value=(0,react.useMemo)((()=>color_attributesToStyle({style,textColor,backgroundColor,gradient})),[style,textColor,backgroundColor,gradient]);if(!isEnabled)return null;const defaultControls=(0,build_module.bI)(name,[COLOR_SUPPORT_KEY,"__experimentalDefaultControls"]),enableContrastChecking="web"===platform.A.OS&&!value?.color?.gradient&&(settings?.color?.text||settings?.color?.link)&&!1!==(0,build_module.bI)(name,[COLOR_SUPPORT_KEY,"enableContrastChecker"]);return(0,jsx_runtime.jsx)(ColorPanel,{as:ColorInspectorControl,panelId:clientId,settings,value,onChange:newStyle=>{setAttributes(color_styleToAttributes(newStyle))},defaultControls,enableContrastChecker:!1!==(0,build_module.bI)(name,[COLOR_SUPPORT_KEY,"enableContrastChecker"]),children:enableContrastChecking&&(0,jsx_runtime.jsx)(BlockColorContrastChecker,{clientId})})}const color={useBlockProps:function color_useBlockProps({name,backgroundColor,textColor,gradient,style}){const[userPalette,themePalette,defaultPalette]=use_settings_useSettings("color.palette.custom","color.palette.theme","color.palette.default"),colors=(0,react.useMemo)((()=>[...userPalette||[],...themePalette||[],...defaultPalette||[]]),[userPalette,themePalette,defaultPalette]);if(!hasColorSupport(name)||shouldSkipSerialization(name,COLOR_SUPPORT_KEY))return{};const extraStyles={};textColor&&!shouldSkipSerialization(name,COLOR_SUPPORT_KEY,"text")&&(extraStyles.color=getColorObjectByAttributeValues(colors,textColor)?.color),backgroundColor&&!shouldSkipSerialization(name,COLOR_SUPPORT_KEY,"background")&&(extraStyles.backgroundColor=getColorObjectByAttributeValues(colors,backgroundColor)?.color);const saveProps=color_addSaveProps({style:extraStyles},name,{textColor,backgroundColor,gradient,style}),hasBackgroundValue=backgroundColor||style?.color?.background||gradient||style?.color?.gradient;return{...saveProps,className:(0,clsx.A)(saveProps.className,!hasBackgroundValue&&getBackgroundImageClasses(style))}},addSaveProps:color_addSaveProps,attributeKeys:["backgroundColor","textColor","gradient","style"],hasSupport:hasColorSupport},MIGRATION_PATHS={linkColor:[["style","elements","link","color","text"]],textColor:[["textColor"],["style","color","text"]],backgroundColor:[["backgroundColor"],["style","color","background"]],gradient:[["gradient"],["style","color","gradient"]]};(0,hooks_build_module.U2)("blocks.registerBlockType","core/color/addAttribute",(function color_addAttributes(settings){return hasColorSupport(settings)?(settings.attributes.backgroundColor||Object.assign(settings.attributes,{backgroundColor:{type:"string"}}),settings.attributes.textColor||Object.assign(settings.attributes,{textColor:{type:"string"}}),hasGradientSupport(settings)&&!settings.attributes.gradient&&Object.assign(settings.attributes,{gradient:{type:"string"}}),settings):settings})),(0,hooks_build_module.U2)("blocks.switchToBlockType.transformedBlock","core/color/addTransforms",(function color_addTransforms(result,source,index,results){const destinationBlockType=result.name;return transformStyles({linkColor:hasLinkColorSupport(destinationBlockType),textColor:hasTextColorSupport(destinationBlockType),backgroundColor:hasBackgroundColorSupport(destinationBlockType),gradient:hasGradientSupport(destinationBlockType)},MIGRATION_PATHS,result,source,index,results)}));var library_settings=__webpack_require__("./packages/icons/build-module/library/settings.js");function getCommonSizeUnit(fontSizes){const[firstFontSize,...otherFontSizes]=fontSizes;if(!firstFontSize)return null;const[,firstUnit]=(0,unit_control_utils.bu)(firstFontSize.size);return otherFontSizes.every((fontSize=>{const[,unit]=(0,unit_control_utils.bu)(fontSize.size);return unit===firstUnit}))?firstUnit:null}var emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const Container=(0,emotion_styled_base_browser_esm.A)("fieldset",{target:"e8tqeku4"})({name:"1t1ytme",styles:"border:0;margin:0;padding:0"}),Header=(0,emotion_styled_base_browser_esm.A)(h_stack_component.A,{target:"e8tqeku3"})("height:",(0,space.x)(4),";"),HeaderToggle=(0,emotion_styled_base_browser_esm.A)(build_module_button.Ay,{target:"e8tqeku2"})("margin-top:",(0,space.x)(-1),";"),HeaderLabel=(0,emotion_styled_base_browser_esm.A)(base_control.Ay.VisualLabel,{target:"e8tqeku1"})("display:flex;gap:",(0,space.x)(1),";justify-content:flex-start;margin-bottom:0;"),HeaderHint=(0,emotion_styled_base_browser_esm.A)("span",{target:"e8tqeku0"})("color:",colors_values.l.gray[700],";");var X5LAA6JI=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/__chunks/X5LAA6JI.js"),select_label=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/select/select-label.js"),_2GXGCHW6=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/__chunks/2GXGCHW6.js"),select_select=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/select/select.js"),select_popover=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/select/select-popover.js"),select_item=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/select/select-item.js"),select_item_check=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/select/select-item-check.js"),select_control_styles=__webpack_require__("./packages/components/build-module/select-control/styles/select-control-styles.js"),input_control_styles=__webpack_require__("./packages/components/build-module/input-control/styles/input-control-styles.js");const ANIMATION_PARAMS_SLIDE_AMOUNT="2px",ANIMATION_PARAMS_DURATION="400ms",ANIMATION_PARAMS_EASING="cubic-bezier( 0.16, 1, 0.3, 1 )",INLINE_PADDING={compact:config_values.A.controlPaddingXSmall,small:config_values.A.controlPaddingXSmall,default:config_values.A.controlPaddingX},Select=(0,emotion_styled_base_browser_esm.A)(select_select.l,{shouldForwardProp:prop=>"hasCustomRenderProp"!==prop,target:"e1p3eej77"})((({size,hasCustomRenderProp})=>(0,emotion_react_browser_esm.AH)("display:block;background-color:",colors_values.l.theme.background,";border:none;color:",colors_values.l.theme.foreground,";cursor:pointer;font-family:inherit;text-align:start;user-select:none;width:100%;&[data-focus-visible]{outline:none;}",((size,heightProperty)=>{const sizes={compact:{[heightProperty]:32,paddingInlineStart:INLINE_PADDING.compact,paddingInlineEnd:INLINE_PADDING.compact+select_control_styles.qO},default:{[heightProperty]:40,paddingInlineStart:INLINE_PADDING.default,paddingInlineEnd:INLINE_PADDING.default+select_control_styles.qO},small:{[heightProperty]:24,paddingInlineStart:INLINE_PADDING.small,paddingInlineEnd:INLINE_PADDING.small+select_control_styles.qO}};return sizes[size]||sizes.default})(size,hasCustomRenderProp?"minHeight":"height")," ",!hasCustomRenderProp&&truncateStyles," ",(0,input_control_styles.TA)({inputSize:size}),";","","","")),""),slideDownAndFade=(0,emotion_react_browser_esm.i7)({"0%":{opacity:0,transform:`translateY(-${ANIMATION_PARAMS_SLIDE_AMOUNT})`},"100%":{opacity:1,transform:"translateY(0)"}}),SelectPopover=(0,emotion_styled_base_browser_esm.A)(select_popover.k,{target:"e1p3eej76"})("display:flex;flex-direction:column;background-color:",colors_values.l.theme.background,";border-radius:",config_values.A.radiusSmall,";border:1px solid ",colors_values.l.theme.foreground,";box-shadow:",config_values.A.elevationMedium,";z-index:1000000;max-height:min( var( --popover-available-height, 400px ), 400px );overflow:auto;overscroll-behavior:contain;min-width:min-content;&[data-open]{@media not ( prefers-reduced-motion ){animation-duration:",ANIMATION_PARAMS_DURATION,";animation-timing-function:",ANIMATION_PARAMS_EASING,";animation-name:",slideDownAndFade,";will-change:transform,opacity;}}&[data-focus-visible]{outline:none;}"),SelectItem=(0,emotion_styled_base_browser_esm.A)(select_item.e,{target:"e1p3eej75"})((({size})=>(0,emotion_react_browser_esm.AH)("cursor:default;display:flex;align-items:center;justify-content:space-between;font-size:",config_values.A.fontSize,";line-height:28px;padding-block:",(0,space.x)(2),";scroll-margin:",(0,space.x)(1),";user-select:none;&[aria-disabled='true']{cursor:not-allowed;}&[data-active-item]{background-color:",colors_values.l.theme.gray[300],";}",(size=>{const sizes={compact:{paddingInlineStart:INLINE_PADDING.compact,paddingInlineEnd:INLINE_PADDING.compact-6},default:{paddingInlineStart:INLINE_PADDING.default,paddingInlineEnd:INLINE_PADDING.default-6},small:{paddingInlineStart:INLINE_PADDING.small,paddingInlineEnd:INLINE_PADDING.small-6}};return sizes[size]||sizes.default})(size),";","","","")),""),truncateStyles={name:"1h52dri",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap"},SelectedExperimentalHintWrapper=(0,emotion_styled_base_browser_esm.A)("div",{target:"e1p3eej74"})(truncateStyles,";"),SelectedExperimentalHintItem=(0,emotion_styled_base_browser_esm.A)("span",{target:"e1p3eej73"})("color:",colors_values.l.theme.gray[600],";margin-inline-start:",(0,space.x)(2),";"),WithHintItemWrapper=(0,emotion_styled_base_browser_esm.A)("div",{target:"e1p3eej72"})("display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;flex:1;column-gap:",(0,space.x)(4),";"),WithHintItemHint=(0,emotion_styled_base_browser_esm.A)("span",{target:"e1p3eej71"})("color:",colors_values.l.theme.gray[600],";text-align:initial;line-height:",config_values.A.fontLineHeightBase,";padding-inline-end:",(0,space.x)(1),";margin-block:",(0,space.x)(1),";"),SelectedItemCheck=(0,emotion_styled_base_browser_esm.A)(select_item_check.u,{target:"e1p3eej70"})("display:flex;align-items:center;margin-inline-start:",(0,space.x)(2),";align-self:start;margin-block-start:2px;font-size:0;",WithHintItemWrapper,"~&,&:not(:empty){font-size:24px;}");var input_base=__webpack_require__("./packages/components/build-module/input-control/input-base.js"),chevron_down=__webpack_require__("./packages/components/build-module/select-control/chevron-down.js");const CustomSelectContext=(0,react.createContext)(void 0);function defaultRenderSelectedValue(value){return(Array.isArray(value)?0===value.length:null==value)?(0,i18n_build_module.__)("Select an item"):Array.isArray(value)?1===value.length?value[0]:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s items selected"),value.length):value}const CustomSelectButton=({renderSelectedValue,size="default",store,...restProps})=>{const{value:currentValue}=(0,_2GXGCHW6.O$)(store),computedRenderSelectedValue=(0,react.useMemo)((()=>null!=renderSelectedValue?renderSelectedValue:defaultRenderSelectedValue),[renderSelectedValue]);return(0,jsx_runtime.jsx)(Select,{...restProps,size,hasCustomRenderProp:!!renderSelectedValue,store,children:computedRenderSelectedValue(currentValue)})};const custom_select=function _CustomSelect(props){const{children,hideLabelFromVision=!1,label,size,store,className,isLegacy=!1,...restProps}=props,onSelectPopoverKeyDown=(0,react.useCallback)((e=>{isLegacy&&e.stopPropagation()}),[isLegacy]),contextValue=(0,react.useMemo)((()=>({store,size})),[store,size]);return(0,jsx_runtime.jsxs)("div",{className,children:[(0,jsx_runtime.jsx)(select_label.T,{store,render:hideLabelFromVision?(0,jsx_runtime.jsx)(visually_hidden_component.A,{}):(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"div"}),children:label}),(0,jsx_runtime.jsxs)(input_base.A,{__next40pxDefaultSize:!0,size,suffix:(0,jsx_runtime.jsx)(chevron_down.A,{}),children:[(0,jsx_runtime.jsx)(CustomSelectButton,{...restProps,size,store,showOnKeyDown:!isLegacy}),(0,jsx_runtime.jsx)(SelectPopover,{gutter:12,store,sameWidth:!0,slide:!1,onKeyDown:onSelectPopoverKeyDown,flip:!isLegacy,children:(0,jsx_runtime.jsx)(CustomSelectContext.Provider,{value:contextValue,children})})]})]})};function CustomSelectItem({children,...props}){var _customSelectContext$;const customSelectContext=(0,react.useContext)(CustomSelectContext);return(0,jsx_runtime.jsxs)(SelectItem,{store:customSelectContext?.store,size:null!==(_customSelectContext$=customSelectContext?.size)&&void 0!==_customSelectContext$?_customSelectContext$:"default",...props,children:[null!=children?children:props.value,(0,jsx_runtime.jsx)(SelectedItemCheck,{children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:library_check.A})})]})}CustomSelectItem.displayName="CustomSelectControlV2.Item";const item=CustomSelectItem;function applyOptionDeprecations({__experimentalHint,...rest}){return{hint:__experimentalHint,...rest}}function getDescribedBy(currentValue,describedBy){return describedBy||(0,i18n_build_module.nv)((0,i18n_build_module.__)("Currently selected: %s"),currentValue)}const custom_select_control=function CustomSelectControl(props){const{__next40pxDefaultSize=!1,describedBy,options,onChange,size="default",value,className:classNameProp,showSelectedHint=!1,...restProps}=function useDeprecatedProps({__experimentalShowSelectedHint,...otherProps}){return{showSelectedHint:__experimentalShowSelectedHint,...otherProps}}(props),descriptionId=(0,use_instance_id.A)(CustomSelectControl,"custom-select-control__description"),store=X5LAA6JI.n({async setValue(nextValue){const nextOption=options.find((item=>item.name===nextValue));if(!onChange||!nextOption)return;await Promise.resolve();const state=store.getState(),changeObject={highlightedIndex:state.renderedItems.findIndex((item=>item.value===nextValue)),inputValue:"",isOpen:state.open,selectedItem:nextOption,type:""};onChange(changeObject)},value:value?.name,defaultValue:options[0]?.name}),children=options.map(applyOptionDeprecations).map((({name,key,hint,style,className})=>{const withHint=(0,jsx_runtime.jsxs)(WithHintItemWrapper,{children:[(0,jsx_runtime.jsx)("span",{children:name}),(0,jsx_runtime.jsx)(WithHintItemHint,{className:"components-custom-select-control__item-hint",children:hint})]});return(0,jsx_runtime.jsx)(item,{value:name,children:hint?withHint:name,style,className:(0,clsx.A)(className,"components-custom-select-control__item",{"has-hint":hint})},key)})),{value:currentValue}=store.getState(),translatedSize=__next40pxDefaultSize&&"default"===size||"__unstable-large"===size?"default":__next40pxDefaultSize||"default"!==size?size:"compact";return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(custom_select,{"aria-describedby":descriptionId,renderSelectedValue:showSelectedHint?()=>{const selectedOptionHint=options?.map(applyOptionDeprecations)?.find((({name})=>currentValue===name))?.hint;return(0,jsx_runtime.jsxs)(SelectedExperimentalHintWrapper,{children:[currentValue,selectedOptionHint&&(0,jsx_runtime.jsx)(SelectedExperimentalHintItem,{className:"components-custom-select-control__hint",children:selectedOptionHint})]})}:void 0,size:translatedSize,store,className:(0,clsx.A)("components-custom-select-control",classNameProp),isLegacy:!0,...restProps,children}),(0,jsx_runtime.jsx)(visually_hidden_component.A,{children:(0,jsx_runtime.jsx)("span",{id:descriptionId,children:getDescribedBy(currentValue,describedBy)})})]})},DEFAULT_OPTION={key:"default",name:(0,i18n_build_module.__)("Default"),value:void 0},CUSTOM_OPTION={key:"custom",name:(0,i18n_build_module.__)("Custom")},font_size_picker_select=props=>{var _options$find;const{__next40pxDefaultSize,fontSizes,value,disableCustomFontSizes,size,onChange,onSelectCustom}=props,areAllSizesSameUnit=!!getCommonSizeUnit(fontSizes),options=[DEFAULT_OPTION,...fontSizes.map((fontSize=>{let hint;if(areAllSizesSameUnit){const[quantity]=(0,unit_control_utils.bu)(fontSize.size);void 0!==quantity&&(hint=String(quantity))}else(function isSimpleCssValue(value){return/^[\d\.]+(px|em|rem|vw|vh|%|svw|lvw|dvw|svh|lvh|dvh|vi|svi|lvi|dvi|vb|svb|lvb|dvb|vmin|svmin|lvmin|dvmin|vmax|svmax|lvmax|dvmax)?$/i.test(String(value))})(fontSize.size)&&(hint=String(fontSize.size));return{key:fontSize.slug,name:fontSize.name||fontSize.slug,value:fontSize.size,hint}})),...disableCustomFontSizes?[]:[CUSTOM_OPTION]],selectedOption=value?null!==(_options$find=options.find((option=>option.value===value)))&&void 0!==_options$find?_options$find:CUSTOM_OPTION:DEFAULT_OPTION;return(0,jsx_runtime.jsx)(custom_select_control,{__next40pxDefaultSize,className:"components-font-size-picker__select",label:(0,i18n_build_module.__)("Font size"),hideLabelFromVision:!0,describedBy:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Currently selected font size: %s"),selectedOption.name),options,value:selectedOption,showSelectedHint:!0,onChange:({selectedItem})=>{selectedItem===CUSTOM_OPTION?onSelectCustom():onChange(selectedItem.value)},size})},T_SHIRT_ABBREVIATIONS=[(0,i18n_build_module.__)("S"),(0,i18n_build_module.__)("M"),(0,i18n_build_module.__)("L"),(0,i18n_build_module.__)("XL"),(0,i18n_build_module.__)("XXL")],T_SHIRT_NAMES=[(0,i18n_build_module.__)("Small"),(0,i18n_build_module.__)("Medium"),(0,i18n_build_module.__)("Large"),(0,i18n_build_module.__)("Extra Large"),(0,i18n_build_module.__)("Extra Extra Large")],font_size_picker_toggle_group=props=>{const{fontSizes,value,__next40pxDefaultSize,size,onChange}=props;return(0,jsx_runtime.jsx)(toggle_group_control_component.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize,label:(0,i18n_build_module.__)("Font size"),hideLabelFromVision:!0,value,onChange,isBlock:!0,size,children:fontSizes.map(((fontSize,index)=>(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:fontSize.size,label:T_SHIRT_ABBREVIATIONS[index],"aria-label":fontSize.name||T_SHIRT_NAMES[index],showTooltip:!0},fontSize.slug)))})},DEFAULT_UNITS=["px","em","rem","vw","vh"],font_size_picker_FontSizePicker=(0,react.forwardRef)(((props,ref)=>{const{__next40pxDefaultSize=!1,fallbackFontSize,fontSizes=[],disableCustomFontSizes=!1,onChange,size="default",units:unitsProp=DEFAULT_UNITS,value,withSlider=!1,withReset=!0}=props,units=(0,unit_control_utils.E)({availableUnits:unitsProp}),selectedFontSize=fontSizes.find((fontSize=>fontSize.size===value)),isCustomValue=!!value&&!selectedFontSize,[userRequestedCustom,setUserRequestedCustom]=(0,react.useState)(isCustomValue);let currentPickerType;currentPickerType=!disableCustomFontSizes&&userRequestedCustom?"custom":fontSizes.length>5?"select":"togglegroup";const headerHint=(0,react.useMemo)((()=>{switch(currentPickerType){case"custom":return(0,i18n_build_module.__)("Custom");case"togglegroup":if(selectedFontSize)return selectedFontSize.name||T_SHIRT_NAMES[fontSizes.indexOf(selectedFontSize)];break;case"select":const commonUnit=getCommonSizeUnit(fontSizes);if(commonUnit)return`(${commonUnit})`}return""}),[currentPickerType,selectedFontSize,fontSizes]);if(0===fontSizes.length&&disableCustomFontSizes)return null;const hasUnits="string"==typeof value||"string"==typeof fontSizes[0]?.size,[valueQuantity,valueUnit]=(0,unit_control_utils.bu)(value,units),isValueUnitRelative=!!valueUnit&&["em","rem","vw","vh"].includes(valueUnit),isDisabled=void 0===value;return(0,jsx_runtime.jsxs)(Container,{ref,className:"components-font-size-picker",children:[(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"legend",children:(0,i18n_build_module.__)("Font size")}),(0,jsx_runtime.jsx)(spacer_component.A,{children:(0,jsx_runtime.jsxs)(Header,{className:"components-font-size-picker__header",children:[(0,jsx_runtime.jsxs)(HeaderLabel,{"aria-label":`${(0,i18n_build_module.__)("Size")} ${headerHint||""}`,children:[(0,i18n_build_module.__)("Size"),headerHint&&(0,jsx_runtime.jsx)(HeaderHint,{className:"components-font-size-picker__header__hint",children:headerHint})]}),!disableCustomFontSizes&&(0,jsx_runtime.jsx)(HeaderToggle,{label:"custom"===currentPickerType?(0,i18n_build_module.__)("Use size preset"):(0,i18n_build_module.__)("Set custom size"),icon:library_settings.A,onClick:()=>setUserRequestedCustom(!userRequestedCustom),isPressed:"custom"===currentPickerType,size:"small"})]})}),(0,jsx_runtime.jsxs)("div",{children:["select"===currentPickerType&&(0,jsx_runtime.jsx)(font_size_picker_select,{__next40pxDefaultSize,fontSizes,value,disableCustomFontSizes,size,onChange:newValue=>{void 0===newValue?onChange?.(void 0):onChange?.(hasUnits?newValue:Number(newValue),fontSizes.find((fontSize=>fontSize.size===newValue)))},onSelectCustom:()=>setUserRequestedCustom(!0)}),"togglegroup"===currentPickerType&&(0,jsx_runtime.jsx)(font_size_picker_toggle_group,{fontSizes,value,__next40pxDefaultSize,size,onChange:newValue=>{void 0===newValue?onChange?.(void 0):onChange?.(hasUnits?newValue:Number(newValue),fontSizes.find((fontSize=>fontSize.size===newValue)))}}),"custom"===currentPickerType&&(0,jsx_runtime.jsxs)(component.A,{className:"components-font-size-picker__custom-size-control",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(unit_control.Ay,{__next40pxDefaultSize,label:(0,i18n_build_module.__)("Custom"),labelPosition:"top",hideLabelFromVision:!0,value,onChange:newValue=>{setUserRequestedCustom(!0),onChange?.(void 0===newValue?void 0:hasUnits?newValue:parseInt(newValue,10))},size,units:hasUnits?units:[],min:0})}),withSlider&&(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(spacer_component.A,{marginX:2,marginBottom:0,children:(0,jsx_runtime.jsx)(range_control.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize,className:"components-font-size-picker__custom-input",label:(0,i18n_build_module.__)("Custom Size"),hideLabelFromVision:!0,value:valueQuantity,initialPosition:fallbackFontSize,withInputField:!1,onChange:newValue=>{setUserRequestedCustom(!0),onChange?.(void 0===newValue?void 0:hasUnits?newValue+(null!=valueUnit?valueUnit:"px"):newValue)},min:0,max:isValueUnitRelative?10:100,step:isValueUnitRelative?.1:1})})}),withReset&&(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.$n,{disabled:isDisabled,accessibleWhenDisabled:!0,onClick:()=>{onChange?.(void 0)},variant:"secondary",__next40pxDefaultSize:!0,size:"__unstable-large"===size||props.__next40pxDefaultSize?"default":"small",children:(0,i18n_build_module.__)("Reset")})})]})]})]})})),font_size_picker=font_size_picker_FontSizePicker;var select_control=__webpack_require__("./packages/components/build-module/select-control/index.js");function FontFamilyControl({__next40pxDefaultSize=!1,__nextHasNoMarginBottom=!1,value="",onChange,fontFamilies,...props}){const[blockLevelFontFamilies]=use_settings_useSettings("typography.fontFamilies");if(fontFamilies||(fontFamilies=blockLevelFontFamilies),!fontFamilies||0===fontFamilies.length)return null;const options=[{value:"",label:(0,i18n_build_module.__)("Default")},...fontFamilies.map((({fontFamily,name})=>({value:fontFamily,label:name||fontFamily})))];return __nextHasNoMarginBottom||(0,deprecated_build_module.A)("Bottom margin styles for wp.blockEditor.FontFamilyControl",{since:"6.7",version:"7.0",hint:"Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version"}),(0,jsx_runtime.jsx)(select_control.A,{__next40pxDefaultSize,__nextHasNoMarginBottom,label:(0,i18n_build_module.__)("Font"),options,value,onChange,labelPosition:"top",...props})}const getFontAppearanceLabel=(hasFontStyles,hasFontWeights)=>hasFontStyles?hasFontWeights?(0,i18n_build_module.__)("Appearance"):(0,i18n_build_module.__)("Font style"):(0,i18n_build_module.__)("Font weight");function FontAppearanceControl(props){const{__next40pxDefaultSize=!1,onChange,hasFontStyles=!0,hasFontWeights=!0,fontFamilyFaces,value:{fontStyle,fontWeight},...otherProps}=props,hasStylesOrWeights=hasFontStyles||hasFontWeights,label=getFontAppearanceLabel(hasFontStyles,hasFontWeights),defaultOption={key:"default",name:(0,i18n_build_module.__)("Default"),style:{fontStyle:void 0,fontWeight:void 0}},{fontStyles,fontWeights,combinedStyleAndWeightOptions}=getFontStylesAndWeights(fontFamilyFaces),selectOptions=(0,react.useMemo)((()=>hasFontStyles&&hasFontWeights?(()=>{const combinedOptions=[defaultOption];return combinedStyleAndWeightOptions&&combinedOptions.push(...combinedStyleAndWeightOptions),combinedOptions})():hasFontStyles?(()=>{const combinedOptions=[defaultOption];return fontStyles.forEach((({name,value})=>{combinedOptions.push({key:value,name,style:{fontStyle:value,fontWeight:void 0}})})),combinedOptions})():(()=>{const combinedOptions=[defaultOption];return fontWeights.forEach((({name,value})=>{combinedOptions.push({key:value,name,style:{fontStyle:void 0,fontWeight:value}})})),combinedOptions})()),[props.options,fontStyles,fontWeights,combinedStyleAndWeightOptions]),currentSelection=selectOptions.find((option=>option.style.fontStyle===fontStyle&&option.style.fontWeight===fontWeight))||selectOptions[0];return hasStylesOrWeights&&(0,jsx_runtime.jsx)(custom_select_control,{...otherProps,className:"components-font-appearance-control",__next40pxDefaultSize,label,describedBy:currentSelection?hasFontStyles?hasFontWeights?(0,i18n_build_module.nv)((0,i18n_build_module.__)("Currently selected font appearance: %s"),currentSelection.name):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Currently selected font style: %s"),currentSelection.name):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Currently selected font weight: %s"),currentSelection.name):(0,i18n_build_module.__)("No selected font appearance"),options:selectOptions,value:currentSelection,onChange:({selectedItem})=>onChange(selectedItem.style)})}const line_height_control=({__next40pxDefaultSize=!1,value:lineHeight,onChange,__unstableInputWidth="60px",...otherProps})=>{const isDefined=function isLineHeightDefined(lineHeight){return void 0!==lineHeight&&""!==lineHeight}(lineHeight),adjustNextValue=(nextValue,wasTypedOrPasted)=>{if(isDefined)return nextValue;switch(`${nextValue}`){case"0.1":return 1.6;case"0":return wasTypedOrPasted?nextValue:1.4;case"":return 1.5;default:return nextValue}},value=isDefined?lineHeight:"";return(0,jsx_runtime.jsx)("div",{className:"block-editor-line-height-control",children:(0,jsx_runtime.jsx)(number_control.A,{...otherProps,__next40pxDefaultSize,__unstableInputWidth,__unstableStateReducer:(state,action)=>{const wasTypedOrPasted=["insertText","insertFromPaste"].includes(action.payload.event.nativeEvent?.inputType),value=adjustNextValue(state.value,wasTypedOrPasted);return{...state,value}},onChange:(nextValue,{event})=>{""!==nextValue?"click"!==event.type?onChange(`${nextValue}`):onChange(adjustNextValue(`${nextValue}`,!1)):onChange()},label:(0,i18n_build_module.__)("Line height"),placeholder:1.5,step:.01,spinFactor:10,value,min:0,spinControls:"custom"})})};function LetterSpacingControl({__next40pxDefaultSize=!1,value,onChange,__unstableInputWidth="60px",...otherProps}){const[availableUnits]=use_settings_useSettings("spacing.units"),units=(0,unit_control_utils.E)({availableUnits:availableUnits||["px","em","rem"],defaultValues:{px:2,em:.2,rem:.2}});return(0,jsx_runtime.jsx)(unit_control.Ay,{__next40pxDefaultSize,...otherProps,label:(0,i18n_build_module.__)("Letter spacing"),value,__unstableInputWidth,units,onChange})}var align_left=__webpack_require__("./packages/icons/build-module/library/align-left.js"),align_center=__webpack_require__("./packages/icons/build-module/library/align-center.js"),align_right=__webpack_require__("./packages/icons/build-module/library/align-right.js"),align_justify=__webpack_require__("./packages/icons/build-module/library/align-justify.js");const TEXT_ALIGNMENT_OPTIONS=[{label:(0,i18n_build_module.__)("Align text left"),value:"left",icon:align_left.A},{label:(0,i18n_build_module.__)("Align text center"),value:"center",icon:align_center.A},{label:(0,i18n_build_module.__)("Align text right"),value:"right",icon:align_right.A},{label:(0,i18n_build_module.__)("Justify text"),value:"justify",icon:align_justify.A}],DEFAULT_OPTIONS=["left","center","right"];function TextAlignmentControl({className,value,onChange,options=DEFAULT_OPTIONS}){const validOptions=(0,react.useMemo)((()=>TEXT_ALIGNMENT_OPTIONS.filter((option=>options.includes(option.value)))),[options]);return validOptions.length?(0,jsx_runtime.jsx)(toggle_group_control_component.A,{isDeselectable:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Text alignment"),className:(0,clsx.A)("block-editor-text-alignment-control",className),value,onChange:newValue=>{onChange(newValue===value?void 0:newValue)},children:validOptions.map((option=>(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{value:option.value,icon:option.icon,label:option.label},option.value)))}):null}var library_reset=__webpack_require__("./packages/icons/build-module/library/reset.js"),format_uppercase=__webpack_require__("./packages/icons/build-module/library/format-uppercase.js"),format_lowercase=__webpack_require__("./packages/icons/build-module/library/format-lowercase.js"),format_capitalize=__webpack_require__("./packages/icons/build-module/library/format-capitalize.js");const TEXT_TRANSFORMS=[{label:(0,i18n_build_module.__)("None"),value:"none",icon:library_reset.A},{label:(0,i18n_build_module.__)("Uppercase"),value:"uppercase",icon:format_uppercase.A},{label:(0,i18n_build_module.__)("Lowercase"),value:"lowercase",icon:format_lowercase.A},{label:(0,i18n_build_module.__)("Capitalize"),value:"capitalize",icon:format_capitalize.A}];function TextTransformControl({className,value,onChange}){return(0,jsx_runtime.jsx)(toggle_group_control_component.A,{isDeselectable:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Letter case"),className:(0,clsx.A)("block-editor-text-transform-control",className),value,onChange:newValue=>{onChange(newValue===value?void 0:newValue)},children:TEXT_TRANSFORMS.map((option=>(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{value:option.value,icon:option.icon,label:option.label},option.value)))})}var format_underline=__webpack_require__("./packages/icons/build-module/library/format-underline.js"),format_strikethrough=__webpack_require__("./packages/icons/build-module/library/format-strikethrough.js");const TEXT_DECORATIONS=[{label:(0,i18n_build_module.__)("None"),value:"none",icon:library_reset.A},{label:(0,i18n_build_module.__)("Underline"),value:"underline",icon:format_underline.A},{label:(0,i18n_build_module.__)("Strikethrough"),value:"line-through",icon:format_strikethrough.A}];function TextDecorationControl({value,onChange,className}){return(0,jsx_runtime.jsx)(toggle_group_control_component.A,{isDeselectable:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Decoration"),className:(0,clsx.A)("block-editor-text-decoration-control",className),value,onChange:newValue=>{onChange(newValue===value?void 0:newValue)},children:TEXT_DECORATIONS.map((option=>(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{value:option.value,icon:option.icon,label:option.label},option.value)))})}const text_horizontal=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M8.2 14.4h3.9L13 17h1.7L11 6.5H9.3L5.6 17h1.7l.9-2.6zm2-5.5 1.4 4H8.8l1.4-4zm7.4 7.5-1.3.8.8 1.4H5.5V20h14.3l-2.2-3.6z"})}),text_vertical=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M7 5.6v1.7l2.6.9v3.9L7 13v1.7L17.5 11V9.3L7 5.6zm4.2 6V8.8l4 1.4-4 1.4zm-5.7 5.6V5.5H4v14.3l3.6-2.2-.8-1.3-1.3.9z"})}),WRITING_MODES=[{label:(0,i18n_build_module.__)("Horizontal"),value:"horizontal-tb",icon:text_horizontal},{label:(0,i18n_build_module.__)("Vertical"),value:(0,i18n_build_module.V8)()?"vertical-lr":"vertical-rl",icon:text_vertical}];function WritingModeControl({className,value,onChange}){return(0,jsx_runtime.jsx)(toggle_group_control_component.A,{isDeselectable:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Orientation"),className:(0,clsx.A)("block-editor-writing-mode-control",className),value,onChange:newValue=>{onChange(newValue===value?void 0:newValue)},children:WRITING_MODES.map((option=>(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{value:option.value,icon:option.icon,label:option.label},option.value)))})}const MIN_TEXT_COLUMNS=1,MAX_TEXT_COLUMNS=6;function useHasTypographyPanel(settings){const hasFontFamily=useHasFontFamilyControl(settings),hasLineHeight=useHasLineHeightControl(settings),hasFontAppearance=useHasAppearanceControl(settings),hasLetterSpacing=useHasLetterSpacingControl(settings),hasTextAlign=useHasTextAlignmentControl(settings),hasTextTransform=useHasTextTransformControl(settings),hasTextDecoration=useHasTextDecorationControl(settings),hasWritingMode=useHasWritingModeControl(settings),hasTextColumns=useHasTextColumnsControl(settings),hasFontSize=useHasFontSizeControl(settings);return hasFontFamily||hasLineHeight||hasFontAppearance||hasLetterSpacing||hasTextAlign||hasTextTransform||hasFontSize||hasTextDecoration||hasWritingMode||hasTextColumns}function useHasFontSizeControl(settings){return!1!==settings?.typography?.defaultFontSizes&&settings?.typography?.fontSizes?.default?.length||settings?.typography?.fontSizes?.theme?.length||settings?.typography?.fontSizes?.custom?.length||settings?.typography?.customFontSize}function useHasFontFamilyControl(settings){return["default","theme","custom"].some((key=>settings?.typography?.fontFamilies?.[key]?.length))}function useHasLineHeightControl(settings){return settings?.typography?.lineHeight}function useHasAppearanceControl(settings){return settings?.typography?.fontStyle||settings?.typography?.fontWeight}function useHasLetterSpacingControl(settings){return settings?.typography?.letterSpacing}function useHasTextTransformControl(settings){return settings?.typography?.textTransform}function useHasTextAlignmentControl(settings){return settings?.typography?.textAlign}function useHasTextDecorationControl(settings){return settings?.typography?.textDecoration}function useHasWritingModeControl(settings){return settings?.typography?.writingMode}function useHasTextColumnsControl(settings){return settings?.typography?.textColumns}function TypographyToolsPanel({resetAllFilter,onChange,value,panelId,children}){const dropdownMenuProps=useToolsPanelDropdownMenuProps();return(0,jsx_runtime.jsx)(tools_panel_component.A,{label:(0,i18n_build_module.__)("Typography"),resetAll:()=>{const updatedValue=resetAllFilter(value);onChange(updatedValue)},panelId,dropdownMenuProps,children})}const typography_panel_DEFAULT_CONTROLS={fontFamily:!0,fontSize:!0,fontAppearance:!0,lineHeight:!0,letterSpacing:!0,textAlign:!0,textTransform:!0,textDecoration:!0,writingMode:!0,textColumns:!0};function TypographyPanel({as:Wrapper=TypographyToolsPanel,value,onChange,inheritedValue=value,settings,panelId,defaultControls=typography_panel_DEFAULT_CONTROLS}){const decodeValue=rawValue=>getValueFromVariable({settings},"",rawValue),hasFontFamilyEnabled=useHasFontFamilyControl(settings),fontFamily=decodeValue(inheritedValue?.typography?.fontFamily),{fontFamilies,fontFamilyFaces}=(0,react.useMemo)((()=>function getMergedFontFamiliesAndFontFamilyFaces(settings,selectedFontFamily){var _fontFamilies$find$fo;const fontFamiliesFromSettings=settings?.typography?.fontFamilies,fontFamilies=["default","theme","custom"].flatMap((key=>{var _fontFamiliesFromSett;return null!==(_fontFamiliesFromSett=fontFamiliesFromSettings?.[key])&&void 0!==_fontFamiliesFromSett?_fontFamiliesFromSett:[]})),fontFamilyFaces=null!==(_fontFamilies$find$fo=fontFamilies.find((family=>family.fontFamily===selectedFontFamily))?.fontFace)&&void 0!==_fontFamilies$find$fo?_fontFamilies$find$fo:[];return{fontFamilies,fontFamilyFaces}}(settings,fontFamily)),[settings,fontFamily]),setFontFamily=newValue=>{const slug=fontFamilies?.find((({fontFamily:f})=>f===newValue))?.slug;onChange(setImmutably(value,["typography","fontFamily"],slug?`var:preset|font-family|${slug}`:newValue||void 0))},hasFontSizeEnabled=useHasFontSizeControl(settings),disableCustomFontSizes=!settings?.typography?.customFontSize,mergedFontSizes=function getMergedFontSizes(settings){var _fontSizes$custom,_fontSizes$theme,_fontSizes$default;const fontSizes=settings?.typography?.fontSizes,defaultFontSizesEnabled=!!settings?.typography?.defaultFontSizes;return[...null!==(_fontSizes$custom=fontSizes?.custom)&&void 0!==_fontSizes$custom?_fontSizes$custom:[],...null!==(_fontSizes$theme=fontSizes?.theme)&&void 0!==_fontSizes$theme?_fontSizes$theme:[],...defaultFontSizesEnabled&&null!==(_fontSizes$default=fontSizes?.default)&&void 0!==_fontSizes$default?_fontSizes$default:[]]}(settings),fontSize=decodeValue(inheritedValue?.typography?.fontSize),setFontSize=(newValue,metadata)=>{onChange(setImmutably(value,["typography","fontSize"],(metadata?.slug?`var:preset|font-size|${metadata?.slug}`:newValue)||void 0))},hasAppearanceControl=useHasAppearanceControl(settings),appearanceControlLabel=function useAppearanceControlLabel(settings){return settings?.typography?.fontStyle?settings?.typography?.fontWeight?(0,i18n_build_module.__)("Appearance"):(0,i18n_build_module.__)("Font style"):(0,i18n_build_module.__)("Font weight")}(settings),hasFontStyles=settings?.typography?.fontStyle,hasFontWeights=settings?.typography?.fontWeight,fontStyle=decodeValue(inheritedValue?.typography?.fontStyle),fontWeight=decodeValue(inheritedValue?.typography?.fontWeight),{nearestFontStyle,nearestFontWeight}=function findNearestStyleAndWeight(fontFamilyFaces,fontStyle,fontWeight){let nearestFontStyle=fontStyle,nearestFontWeight=fontWeight;const{fontStyles,fontWeights,combinedStyleAndWeightOptions}=getFontStylesAndWeights(fontFamilyFaces),hasFontStyle=fontStyles?.some((({value:fs})=>fs===fontStyle)),hasFontWeight=fontWeights?.some((({value:fw})=>fw?.toString()===fontWeight?.toString()));return hasFontStyle||(nearestFontStyle=fontStyle?function findNearestFontStyle(availableFontStyles,newFontStyleValue){return"string"==typeof newFontStyleValue&&newFontStyleValue&&["normal","italic","oblique"].includes(newFontStyleValue)?!availableFontStyles||0===availableFontStyles.length||availableFontStyles.find((style=>style.value===newFontStyleValue))?newFontStyleValue:"oblique"!==newFontStyleValue||availableFontStyles.find((style=>"oblique"===style.value))?"":"italic":""}(fontStyles,fontStyle):combinedStyleAndWeightOptions?.find((option=>option.style.fontWeight===findNearestFontWeight(fontWeights,fontWeight)))?.style?.fontStyle),hasFontWeight||(nearestFontWeight=fontWeight?findNearestFontWeight(fontWeights,fontWeight):combinedStyleAndWeightOptions?.find((option=>option.style.fontStyle===(nearestFontStyle||fontStyle)))?.style?.fontWeight),{nearestFontStyle,nearestFontWeight}}(fontFamilyFaces,fontStyle,fontWeight),setFontAppearance=(0,react.useCallback)((({fontStyle:newFontStyle,fontWeight:newFontWeight})=>{newFontStyle===fontStyle&&newFontWeight===fontWeight||onChange({...value,typography:{...value?.typography,fontStyle:newFontStyle||void 0,fontWeight:newFontWeight||void 0}})}),[fontStyle,fontWeight,onChange,value]),resetFontAppearance=(0,react.useCallback)((()=>{setFontAppearance({})}),[setFontAppearance]);(0,react.useEffect)((()=>{nearestFontStyle&&nearestFontWeight?setFontAppearance({fontStyle:nearestFontStyle,fontWeight:nearestFontWeight}):resetFontAppearance()}),[nearestFontStyle,nearestFontWeight,resetFontAppearance,setFontAppearance]);const hasLineHeightEnabled=useHasLineHeightControl(settings),lineHeight=decodeValue(inheritedValue?.typography?.lineHeight),setLineHeight=newValue=>{onChange(setImmutably(value,["typography","lineHeight"],newValue||void 0))},hasLetterSpacingControl=useHasLetterSpacingControl(settings),letterSpacing=decodeValue(inheritedValue?.typography?.letterSpacing),setLetterSpacing=newValue=>{onChange(setImmutably(value,["typography","letterSpacing"],newValue||void 0))},hasTextColumnsControl=useHasTextColumnsControl(settings),textColumns=decodeValue(inheritedValue?.typography?.textColumns),setTextColumns=newValue=>{onChange(setImmutably(value,["typography","textColumns"],newValue||void 0))},hasTextTransformControl=useHasTextTransformControl(settings),textTransform=decodeValue(inheritedValue?.typography?.textTransform),setTextTransform=newValue=>{onChange(setImmutably(value,["typography","textTransform"],newValue||void 0))},hasTextDecorationControl=useHasTextDecorationControl(settings),textDecoration=decodeValue(inheritedValue?.typography?.textDecoration),setTextDecoration=newValue=>{onChange(setImmutably(value,["typography","textDecoration"],newValue||void 0))},hasWritingModeControl=useHasWritingModeControl(settings),writingMode=decodeValue(inheritedValue?.typography?.writingMode),setWritingMode=newValue=>{onChange(setImmutably(value,["typography","writingMode"],newValue||void 0))},hasTextAlignmentControl=useHasTextAlignmentControl(settings),textAlign=decodeValue(inheritedValue?.typography?.textAlign),setTextAlign=newValue=>{onChange(setImmutably(value,["typography","textAlign"],newValue||void 0))},resetAllFilter=(0,react.useCallback)((previousValue=>({...previousValue,typography:{}})),[]);return(0,jsx_runtime.jsxs)(Wrapper,{resetAllFilter,value,onChange,panelId,children:[hasFontFamilyEnabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{label:(0,i18n_build_module.__)("Font"),hasValue:()=>!!value?.typography?.fontFamily,onDeselect:()=>setFontFamily(void 0),isShownByDefault:defaultControls.fontFamily,panelId,children:(0,jsx_runtime.jsx)(FontFamilyControl,{fontFamilies,value:fontFamily,onChange:setFontFamily,size:"__unstable-large",__nextHasNoMarginBottom:!0})}),hasFontSizeEnabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{label:(0,i18n_build_module.__)("Size"),hasValue:()=>!!value?.typography?.fontSize,onDeselect:()=>setFontSize(void 0),isShownByDefault:defaultControls.fontSize,panelId,children:(0,jsx_runtime.jsx)(font_size_picker,{value:fontSize,onChange:setFontSize,fontSizes:mergedFontSizes,disableCustomFontSizes,withReset:!1,withSlider:!0,size:"__unstable-large"})}),hasAppearanceControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{className:"single-column",label:appearanceControlLabel,hasValue:()=>!!value?.typography?.fontStyle||!!value?.typography?.fontWeight,onDeselect:resetFontAppearance,isShownByDefault:defaultControls.fontAppearance,panelId,children:(0,jsx_runtime.jsx)(FontAppearanceControl,{value:{fontStyle,fontWeight},onChange:setFontAppearance,hasFontStyles,hasFontWeights,fontFamilyFaces,size:"__unstable-large"})}),hasLineHeightEnabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{className:"single-column",label:(0,i18n_build_module.__)("Line height"),hasValue:()=>void 0!==value?.typography?.lineHeight,onDeselect:()=>setLineHeight(void 0),isShownByDefault:defaultControls.lineHeight,panelId,children:(0,jsx_runtime.jsx)(line_height_control,{__unstableInputWidth:"auto",value:lineHeight,onChange:setLineHeight,size:"__unstable-large"})}),hasLetterSpacingControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{className:"single-column",label:(0,i18n_build_module.__)("Letter spacing"),hasValue:()=>!!value?.typography?.letterSpacing,onDeselect:()=>setLetterSpacing(void 0),isShownByDefault:defaultControls.letterSpacing,panelId,children:(0,jsx_runtime.jsx)(LetterSpacingControl,{value:letterSpacing,onChange:setLetterSpacing,size:"__unstable-large",__unstableInputWidth:"auto"})}),hasTextColumnsControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{className:"single-column",label:(0,i18n_build_module.__)("Columns"),hasValue:()=>!!value?.typography?.textColumns,onDeselect:()=>setTextColumns(void 0),isShownByDefault:defaultControls.textColumns,panelId,children:(0,jsx_runtime.jsx)(number_control.A,{label:(0,i18n_build_module.__)("Columns"),max:MAX_TEXT_COLUMNS,min:MIN_TEXT_COLUMNS,onChange:setTextColumns,size:"__unstable-large",spinControls:"custom",value:textColumns,initialPosition:1})}),hasTextDecorationControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{className:"single-column",label:(0,i18n_build_module.__)("Decoration"),hasValue:()=>!!value?.typography?.textDecoration,onDeselect:()=>setTextDecoration(void 0),isShownByDefault:defaultControls.textDecoration,panelId,children:(0,jsx_runtime.jsx)(TextDecorationControl,{value:textDecoration,onChange:setTextDecoration,size:"__unstable-large",__unstableInputWidth:"auto"})}),hasWritingModeControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{className:"single-column",label:(0,i18n_build_module.__)("Orientation"),hasValue:()=>!!value?.typography?.writingMode,onDeselect:()=>setWritingMode(void 0),isShownByDefault:defaultControls.writingMode,panelId,children:(0,jsx_runtime.jsx)(WritingModeControl,{value:writingMode,onChange:setWritingMode,size:"__unstable-large",__nextHasNoMarginBottom:!0})}),hasTextTransformControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{label:(0,i18n_build_module.__)("Letter case"),hasValue:()=>!!value?.typography?.textTransform,onDeselect:()=>setTextTransform(void 0),isShownByDefault:defaultControls.textTransform,panelId,children:(0,jsx_runtime.jsx)(TextTransformControl,{value:textTransform,onChange:setTextTransform,showNone:!0,isBlock:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})}),hasTextAlignmentControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{label:(0,i18n_build_module.__)("Text alignment"),hasValue:()=>!!value?.typography?.textAlign,onDeselect:()=>setTextAlign(void 0),isShownByDefault:defaultControls.textAlign,panelId,children:(0,jsx_runtime.jsx)(TextAlignmentControl,{value:textAlign,onChange:setTextAlign,size:"__unstable-large",__nextHasNoMarginBottom:!0})})]})}class TokenList{constructor(initialValue=""){this._currentValue="",this._valueAsArray=[],this.value=initialValue}entries(...args){return this._valueAsArray.entries(...args)}forEach(...args){return this._valueAsArray.forEach(...args)}keys(...args){return this._valueAsArray.keys(...args)}values(...args){return this._valueAsArray.values(...args)}get value(){return this._currentValue}set value(value){value=String(value),this._valueAsArray=[...new Set(value.split(/\s+/g).filter(Boolean))],this._currentValue=this._valueAsArray.join(" ")}get length(){return this._valueAsArray.length}toString(){return this.value}*[Symbol.iterator](){return yield*this._valueAsArray}item(index){return this._valueAsArray[index]}contains(item){return-1!==this._valueAsArray.indexOf(item)}add(...items){this.value+=" "+items.join(" ")}remove(...items){this.value=this._valueAsArray.filter((val=>!items.includes(val))).join(" ")}toggle(token,force){return void 0===force&&(force=!this.contains(token)),force?this.add(token):this.remove(token),force}replace(token,newToken){return!!this.contains(token)&&(this.remove(token),this.add(newToken),!0)}supports(_token){return!0}}const FONT_FAMILY_SUPPORT_KEY="typography.__experimentalFontFamily",{kebabCase:font_family_kebabCase}=unlock(private_apis.j);function font_family_addSaveProps(props,blockType,attributes){if(!(0,build_module.pN)(blockType,FONT_FAMILY_SUPPORT_KEY))return props;if(shouldSkipSerialization(blockType,TYPOGRAPHY_SUPPORT_KEY,"fontFamily"))return props;if(!attributes?.fontFamily)return props;const classes=new TokenList(props.className);classes.add(`has-${font_family_kebabCase(attributes?.fontFamily)}-font-family`);const newClassName=classes.value;return props.className=newClassName||void 0,props}const font_family={useBlockProps:function font_family_useBlockProps({name,fontFamily}){return font_family_addSaveProps({},name,{fontFamily})},addSaveProps:font_family_addSaveProps,attributeKeys:["fontFamily"],hasSupport:name=>(0,build_module.pN)(name,FONT_FAMILY_SUPPORT_KEY)};(0,hooks_build_module.U2)("blocks.registerBlockType","core/fontFamily/addAttribute",(function font_family_addAttributes(settings){return(0,build_module.pN)(settings,FONT_FAMILY_SUPPORT_KEY)?(settings.attributes.fontFamily||Object.assign(settings.attributes,{fontFamily:{type:"string"}}),settings):settings}));const{kebabCase:utils_kebabCase}=unlock(private_apis.j),utils_getFontSize=(fontSizes,fontSizeAttribute,customFontSizeAttribute)=>{if(fontSizeAttribute){const fontSizeObject=fontSizes?.find((({slug})=>slug===fontSizeAttribute));if(fontSizeObject)return fontSizeObject}return{size:customFontSizeAttribute}};function getFontSizeClass(fontSizeSlug){if(fontSizeSlug)return`has-${utils_kebabCase(fontSizeSlug)}-font-size`}const FONT_SIZE_SUPPORT_KEY="typography.fontSize";function font_size_addSaveProps(props,blockNameOrType,attributes){if(!(0,build_module.pN)(blockNameOrType,FONT_SIZE_SUPPORT_KEY))return props;if(shouldSkipSerialization(blockNameOrType,TYPOGRAPHY_SUPPORT_KEY,"fontSize"))return props;const classes=new TokenList(props.className);classes.add(getFontSizeClass(attributes.fontSize));const newClassName=classes.value;return props.className=newClassName||void 0,props}const font_size={useBlockProps:function font_size_useBlockProps({name,fontSize,style}){const[fontSizes,fluidTypographySettings,layoutSettings]=use_settings_useSettings("typography.fontSizes","typography.fluid","layout");if(!(0,build_module.pN)(name,FONT_SIZE_SUPPORT_KEY)||shouldSkipSerialization(name,TYPOGRAPHY_SUPPORT_KEY,"fontSize")||!fontSize&&!style?.typography?.fontSize)return;let props;return style?.typography?.fontSize&&(props={style:{fontSize:getTypographyFontSizeValue({size:style.typography.fontSize},{typography:{fluid:fluidTypographySettings},layout:layoutSettings})}}),fontSize&&(props={style:{fontSize:utils_getFontSize(fontSizes,fontSize,style?.typography?.fontSize).size}}),props?font_size_addSaveProps(props,name,{fontSize}):void 0},addSaveProps:font_size_addSaveProps,attributeKeys:["fontSize","style"],hasSupport:name=>(0,build_module.pN)(name,FONT_SIZE_SUPPORT_KEY)},font_size_MIGRATION_PATHS={fontSize:[["fontSize"],["style","typography","fontSize"]]};(0,hooks_build_module.U2)("blocks.registerBlockType","core/font/addAttribute",(function font_size_addAttributes(settings){return(0,build_module.pN)(settings,FONT_SIZE_SUPPORT_KEY)?(settings.attributes.fontSize||Object.assign(settings.attributes,{fontSize:{type:"string"}}),settings):settings})),(0,hooks_build_module.U2)("blocks.switchToBlockType.transformedBlock","core/font-size/addTransforms",(function font_size_addTransforms(result,source,index,results){const destinationBlockType=result.name;return transformStyles({fontSize:(0,build_module.pN)(destinationBlockType,FONT_SIZE_SUPPORT_KEY)},font_size_MIGRATION_PATHS,result,source,index,results)}));const DEFAULT_ALIGNMENT_CONTROLS=[{icon:align_left.A,title:(0,i18n_build_module.__)("Align text left"),align:"left"},{icon:align_center.A,title:(0,i18n_build_module.__)("Align text center"),align:"center"},{icon:align_right.A,title:(0,i18n_build_module.__)("Align text right"),align:"right"}],ui_POPOVER_PROPS={placement:"bottom-start"};const alignment_control_ui=function AlignmentUI({value,onChange,alignmentControls=DEFAULT_ALIGNMENT_CONTROLS,label=(0,i18n_build_module.__)("Align text"),description=(0,i18n_build_module.__)("Change text alignment"),isCollapsed=!0,isToolbar}){function applyOrUnset(align){return()=>onChange(value===align?void 0:align)}const activeAlignment=alignmentControls.find((control=>control.align===value)),UIComponent=isToolbar?toolbar_group.A:toolbar_dropdown_menu.A,extraProps=isToolbar?{isCollapsed}:{toggleProps:{description},popoverProps:ui_POPOVER_PROPS};return(0,jsx_runtime.jsx)(UIComponent,{icon:function setIcon(){return activeAlignment?activeAlignment.icon:(0,i18n_build_module.V8)()?align_right.A:align_left.A}(),label,controls:alignmentControls.map((control=>{const{align}=control,isActive=value===align;return{...control,isActive,role:isCollapsed?"menuitemradio":void 0,onClick:applyOrUnset(align)}})),...extraProps})},AlignmentControl=props=>(0,jsx_runtime.jsx)(alignment_control_ui,{...props,isToolbar:!1}),AlignmentToolbar=props=>(0,jsx_runtime.jsx)(alignment_control_ui,{...props,isToolbar:!0}),text_align_TEXT_ALIGNMENT_OPTIONS=[{icon:align_left.A,title:(0,i18n_build_module.__)("Align text left"),align:"left"},{icon:align_center.A,title:(0,i18n_build_module.__)("Align text center"),align:"center"},{icon:align_right.A,title:(0,i18n_build_module.__)("Align text right"),align:"right"}],VALID_TEXT_ALIGNMENTS=["left","center","right"],NO_TEXT_ALIGNMENTS=[];function getValidTextAlignments(blockTextAlign){return Array.isArray(blockTextAlign)?VALID_TEXT_ALIGNMENTS.filter((textAlign=>blockTextAlign.includes(textAlign))):!0===blockTextAlign?VALID_TEXT_ALIGNMENTS:NO_TEXT_ALIGNMENTS}const text_align={edit:function BlockEditTextAlignmentToolbarControlsPure({style,name:blockName,setAttributes}){const settings=useBlockSettings(blockName),hasTextAlignControl=settings?.typography?.textAlign,blockEditingMode=useBlockEditingMode();if(!hasTextAlignControl||"default"!==blockEditingMode)return null;const validTextAlignments=getValidTextAlignments((0,build_module.bI)(blockName,"typography.textAlign"));if(!validTextAlignments.length)return null;const textAlignmentControls=text_align_TEXT_ALIGNMENT_OPTIONS.filter((control=>validTextAlignments.includes(control.align)));return(0,jsx_runtime.jsx)(block_controls,{group:"block",children:(0,jsx_runtime.jsx)(AlignmentControl,{value:style?.typography?.textAlign,onChange:newTextAlignValue=>{const newStyle={...style,typography:{...style?.typography,textAlign:newTextAlignValue}};setAttributes({style:utils_cleanEmptyObject(newStyle)})},alignmentControls:textAlignmentControls})})},useBlockProps:function text_align_useBlockProps({name,style}){if(!style?.typography?.textAlign)return null;if(!getValidTextAlignments((0,build_module.bI)(name,"typography.textAlign")).length)return null;if(shouldSkipSerialization(name,TYPOGRAPHY_SUPPORT_KEY,"textAlign"))return null;const textAlign=style.typography.textAlign;return{className:(0,clsx.A)({[`has-text-align-${textAlign}`]:textAlign})}},addSaveProps:function addAssignedTextAlign(props,blockType,attributes){if(!attributes?.style?.typography?.textAlign)return props;const{textAlign}=attributes.style.typography,blockTextAlign=(0,build_module.bI)(blockType,"typography.textAlign");getValidTextAlignments(blockTextAlign).includes(textAlign)&&!shouldSkipSerialization(blockType,TYPOGRAPHY_SUPPORT_KEY,"textAlign")&&(props.className=(0,clsx.A)(`has-text-align-${textAlign}`,props.className));return props},attributeKeys:["style"],hasSupport:name=>(0,build_module.pN)(name,"typography.textAlign",!1)};function omit(object,keys){return Object.fromEntries(Object.entries(object).filter((([key])=>!keys.includes(key))))}const TYPOGRAPHY_SUPPORT_KEY="typography",TYPOGRAPHY_SUPPORT_KEYS=["typography.lineHeight",FONT_SIZE_SUPPORT_KEY,"typography.__experimentalFontStyle","typography.__experimentalFontWeight",FONT_FAMILY_SUPPORT_KEY,"typography.textAlign","typography.textColumns","typography.__experimentalTextDecoration","typography.__experimentalWritingMode","typography.__experimentalTextTransform","typography.__experimentalLetterSpacing"];function typography_styleToAttributes(style){const updatedStyle={...omit(style,["fontFamily"])},fontSizeValue=style?.typography?.fontSize,fontFamilyValue=style?.typography?.fontFamily,fontSizeSlug=fontSizeValue?.startsWith("var:preset|font-size|")?fontSizeValue.substring(21):void 0,fontFamilySlug=fontFamilyValue?.startsWith("var:preset|font-family|")?fontFamilyValue.substring(23):void 0;return updatedStyle.typography={...omit(updatedStyle.typography,["fontFamily"]),fontSize:fontSizeSlug?void 0:fontSizeValue},{style:utils_cleanEmptyObject(updatedStyle),fontFamily:fontFamilySlug,fontSize:fontSizeSlug}}function typography_attributesToStyle(attributes){return{...attributes.style,typography:{...attributes.style?.typography,fontFamily:attributes.fontFamily?"var:preset|font-family|"+attributes.fontFamily:void 0,fontSize:attributes.fontSize?"var:preset|font-size|"+attributes.fontSize:attributes.style?.typography?.fontSize}}}function TypographyInspectorControl({children,resetAllFilter}){const attributesResetAllFilter=(0,react.useCallback)((attributes=>{const existingStyle=typography_attributesToStyle(attributes),updatedStyle=resetAllFilter(existingStyle);return{...attributes,...typography_styleToAttributes(updatedStyle)}}),[resetAllFilter]);return(0,jsx_runtime.jsx)(inspector_controls,{group:"typography",resetAllFilter:attributesResetAllFilter,children})}function typography_TypographyPanel({clientId,name,setAttributes,settings}){const{style,fontFamily,fontSize}=(0,use_select.A)((function selector(select){const{style,fontFamily,fontSize}=select(store_store).getBlockAttributes(clientId)||{};return{style,fontFamily,fontSize}}),[clientId]),isEnabled=useHasTypographyPanel(settings),value=(0,react.useMemo)((()=>typography_attributesToStyle({style,fontFamily,fontSize})),[style,fontSize,fontFamily]);if(!isEnabled)return null;const defaultControls=(0,build_module.bI)(name,[TYPOGRAPHY_SUPPORT_KEY,"__experimentalDefaultControls"]);return(0,jsx_runtime.jsx)(TypographyPanel,{as:TypographyInspectorControl,panelId:clientId,settings,value,onChange:newStyle=>{setAttributes(typography_styleToAttributes(newStyle))},defaultControls})}const Root=(0,emotion_styled_base_browser_esm.A)("span",{target:"e1j5nr4z8"})({name:"1w884gc",styles:"box-sizing:border-box;display:block;width:24px;height:24px;position:relative;padding:4px"}),Viewbox=(0,emotion_styled_base_browser_esm.A)("span",{target:"e1j5nr4z7"})({name:"i6vjox",styles:"box-sizing:border-box;display:block;position:relative;width:100%;height:100%"}),strokeFocus=({isFocused})=>(0,emotion_react_browser_esm.AH)({backgroundColor:"currentColor",opacity:isFocused?1:.3},"","","",""),Stroke=(0,emotion_styled_base_browser_esm.A)("span",{target:"e1j5nr4z6"})("box-sizing:border-box;display:block;pointer-events:none;position:absolute;",strokeFocus,";"),VerticalStroke=(0,emotion_styled_base_browser_esm.A)(Stroke,{target:"e1j5nr4z5"})({name:"1k2w39q",styles:"bottom:3px;top:3px;width:2px"}),HorizontalStroke=(0,emotion_styled_base_browser_esm.A)(Stroke,{target:"e1j5nr4z4"})({name:"1q9b07k",styles:"height:2px;left:3px;right:3px"}),TopStroke=(0,emotion_styled_base_browser_esm.A)(HorizontalStroke,{target:"e1j5nr4z3"})({name:"abcix4",styles:"top:0"}),RightStroke=(0,emotion_styled_base_browser_esm.A)(VerticalStroke,{target:"e1j5nr4z2"})({name:"1wf8jf",styles:"right:0"}),BottomStroke=(0,emotion_styled_base_browser_esm.A)(HorizontalStroke,{target:"e1j5nr4z1"})({name:"8tapst",styles:"bottom:0"}),LeftStroke=(0,emotion_styled_base_browser_esm.A)(VerticalStroke,{target:"e1j5nr4z0"})({name:"1ode3cm",styles:"left:0"});function BoxControlIcon({size=24,side="all",sides,...props}){const hasSide=value=>!(value=>sides?.length&&!sides.includes(value))(value)&&("all"===side||side===value),top=hasSide("top")||hasSide("vertical"),right=hasSide("right")||hasSide("horizontal"),bottom=hasSide("bottom")||hasSide("vertical"),left=hasSide("left")||hasSide("horizontal"),scale=size/24;return(0,jsx_runtime.jsx)(Root,{style:{transform:`scale(${scale})`},...props,children:(0,jsx_runtime.jsxs)(Viewbox,{children:[(0,jsx_runtime.jsx)(TopStroke,{isFocused:top}),(0,jsx_runtime.jsx)(RightStroke,{isFocused:right}),(0,jsx_runtime.jsx)(BottomStroke,{isFocused:bottom}),(0,jsx_runtime.jsx)(LeftStroke,{isFocused:left})]})})}const StyledUnitControl=(0,emotion_styled_base_browser_esm.A)(unit_control.Ay,{target:"e1jovhle5"})({name:"1ejyr19",styles:"max-width:90px"}),InputWrapper=(0,emotion_styled_base_browser_esm.A)(h_stack_component.A,{target:"e1jovhle4"})({name:"1j1lmoi",styles:"grid-column:1/span 3"}),ResetButton=(0,emotion_styled_base_browser_esm.A)(build_module_button.Ay,{target:"e1jovhle3"})({name:"tkya7b",styles:"grid-area:1/2;justify-self:end"}),LinkedButtonWrapper=(0,emotion_styled_base_browser_esm.A)("div",{target:"e1jovhle2"})({name:"1dfa8al",styles:"grid-area:1/3;justify-self:end"}),FlexedBoxControlIcon=(0,emotion_styled_base_browser_esm.A)(BoxControlIcon,{target:"e1jovhle1"})({name:"ou8xsw",styles:"flex:0 0 auto"}),FlexedRangeControl=(0,emotion_styled_base_browser_esm.A)(range_control.A,{target:"e1jovhle0"})("width:100%;margin-inline-end:",(0,space.x)(2),";"),CUSTOM_VALUE_SETTINGS={px:{max:300,step:1},"%":{max:100,step:1},vw:{max:100,step:1},vh:{max:100,step:1},em:{max:10,step:.1},rm:{max:10,step:.1},svw:{max:100,step:1},lvw:{max:100,step:1},dvw:{max:100,step:1},svh:{max:100,step:1},lvh:{max:100,step:1},dvh:{max:100,step:1},vi:{max:100,step:1},svi:{max:100,step:1},lvi:{max:100,step:1},dvi:{max:100,step:1},vb:{max:100,step:1},svb:{max:100,step:1},lvb:{max:100,step:1},dvb:{max:100,step:1},vmin:{max:100,step:1},svmin:{max:100,step:1},lvmin:{max:100,step:1},dvmin:{max:100,step:1},vmax:{max:100,step:1},svmax:{max:100,step:1},lvmax:{max:100,step:1},dvmax:{max:100,step:1}},utils_LABELS={all:(0,i18n_build_module.__)("All sides"),top:(0,i18n_build_module.__)("Top side"),bottom:(0,i18n_build_module.__)("Bottom side"),left:(0,i18n_build_module.__)("Left side"),right:(0,i18n_build_module.__)("Right side"),mixed:(0,i18n_build_module.__)("Mixed"),vertical:(0,i18n_build_module.__)("Top and bottom sides"),horizontal:(0,i18n_build_module.__)("Left and right sides")},utils_DEFAULT_VALUES={top:void 0,right:void 0,bottom:void 0,left:void 0},utils_ALL_SIDES=["top","right","bottom","left"];function box_control_utils_mode(arr){return arr.sort(((a,b)=>arr.filter((v=>v===a)).length-arr.filter((v=>v===b)).length)).pop()}function utils_getAllValue(values={},selectedUnits,availableSides=utils_ALL_SIDES){const parsedQuantitiesAndUnits=function normalizeSides(sides){const filteredSides=[];if(!sides?.length)return utils_ALL_SIDES;if(sides.includes("vertical"))filteredSides.push("top","bottom");else if(sides.includes("horizontal"))filteredSides.push("left","right");else{const newSides=utils_ALL_SIDES.filter((side=>sides.includes(side)));filteredSides.push(...newSides)}return filteredSides}(availableSides).map((side=>(0,unit_control_utils.bu)(values[side]))),allParsedQuantities=parsedQuantitiesAndUnits.map((value=>{var _value$;return null!==(_value$=value[0])&&void 0!==_value$?_value$:""})),allParsedUnits=parsedQuantitiesAndUnits.map((value=>value[1])),commonQuantity=allParsedQuantities.every((v=>v===allParsedQuantities[0]))?allParsedQuantities[0]:"";let commonUnit;var _getAllUnitFallback;"number"==typeof commonQuantity?commonUnit=box_control_utils_mode(allParsedUnits):commonUnit=null!==(_getAllUnitFallback=function getAllUnitFallback(selectedUnits){if(!selectedUnits||"object"!=typeof selectedUnits)return;const filteredUnits=Object.values(selectedUnits).filter(Boolean);return box_control_utils_mode(filteredUnits)}(selectedUnits))&&void 0!==_getAllUnitFallback?_getAllUnitFallback:box_control_utils_mode(allParsedUnits);return[commonQuantity,commonUnit].join("")}function utils_isValuesMixed(values={},selectedUnits,sides=utils_ALL_SIDES){const allValue=utils_getAllValue(values,selectedUnits,sides);return isNaN(parseFloat(allValue))}function utils_isValuesDefined(values){return values&&Object.values(values).filter((value=>!!value&&/\d/.test(value))).length>0}function getInitialSide(isLinked,splitOnAxis){let initialSide="all";return isLinked||(initialSide=splitOnAxis?"vertical":"top"),initialSide}function applyValueToSides(currentValues,newValue,sides){const newValues={...currentValues};return sides?.length?sides.forEach((side=>{"vertical"===side?(newValues.top=newValue,newValues.bottom=newValue):"horizontal"===side?(newValues.left=newValue,newValues.right=newValue):newValues[side]=newValue})):utils_ALL_SIDES.forEach((side=>newValues[side]=newValue)),newValues}const all_input_control_noop=()=>{};function all_input_control_AllInputControl({__next40pxDefaultSize,onChange=all_input_control_noop,onFocus=all_input_control_noop,values,sides,selectedUnits,setSelectedUnits,...props}){var _CUSTOM_VALUE_SETTING,_CUSTOM_VALUE_SETTING2;const inputId=(0,use_instance_id.A)(all_input_control_AllInputControl,"box-control-input-all"),allValue=utils_getAllValue(values,selectedUnits,sides),isMixed=utils_isValuesDefined(values)&&utils_isValuesMixed(values,selectedUnits,sides),allPlaceholder=isMixed?utils_LABELS.mixed:void 0,[parsedQuantity,parsedUnit]=(0,unit_control_utils.bu)(allValue),onValueChange=next=>{const isNumeric=void 0!==next&&!isNaN(parseFloat(next)),nextValues=applyValueToSides(values,isNumeric?next:void 0,sides);onChange(nextValues)};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StyledUnitControl,{...props,__next40pxDefaultSize,className:"component-box-control__unit-control",disableUnits:isMixed,id:inputId,isPressEnterToChange:!0,value:allValue,onChange:onValueChange,onUnitChange:unit=>{const newUnits=applyValueToSides(selectedUnits,unit,sides);setSelectedUnits(newUnits)},onFocus:event=>{onFocus(event,{side:"all"})},placeholder:allPlaceholder,label:utils_LABELS.all,hideLabelFromVision:!0}),(0,jsx_runtime.jsx)(FlexedRangeControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize,"aria-controls":inputId,label:utils_LABELS.all,hideLabelFromVision:!0,onChange:next=>{onValueChange(void 0!==next?[next,parsedUnit].join(""):void 0)},min:0,max:null!==(_CUSTOM_VALUE_SETTING=CUSTOM_VALUE_SETTINGS[null!=parsedUnit?parsedUnit:"px"]?.max)&&void 0!==_CUSTOM_VALUE_SETTING?_CUSTOM_VALUE_SETTING:10,step:null!==(_CUSTOM_VALUE_SETTING2=CUSTOM_VALUE_SETTINGS[null!=parsedUnit?parsedUnit:"px"]?.step)&&void 0!==_CUSTOM_VALUE_SETTING2?_CUSTOM_VALUE_SETTING2:.1,value:null!=parsedQuantity?parsedQuantity:0,withInputField:!1})]})}const input_controls_noop=()=>{};function input_controls_BoxInputControls({__next40pxDefaultSize,onChange=input_controls_noop,onFocus=input_controls_noop,values,selectedUnits,setSelectedUnits,sides,...props}){const generatedId=(0,use_instance_id.A)(input_controls_BoxInputControls,"box-control-input"),createHandleOnFocus=side=>event=>{onFocus(event,{side})},handleOnValueChange=(side,next,extra)=>{const nextValues={...values},nextValue=void 0!==next&&!isNaN(parseFloat(next))?next:void 0;if(nextValues[side]=nextValue,extra?.event.altKey)switch(side){case"top":nextValues.bottom=nextValue;break;case"bottom":nextValues.top=nextValue;break;case"left":nextValues.right=nextValue;break;case"right":nextValues.left=nextValue}(nextValues=>{onChange(nextValues)})(nextValues)},createHandleOnUnitChange=side=>next=>{const newUnits={...selectedUnits};newUnits[side]=next,setSelectedUnits(newUnits)},filteredSides=sides?.length?utils_ALL_SIDES.filter((side=>sides.includes(side))):utils_ALL_SIDES;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:filteredSides.map((side=>{var _CUSTOM_VALUE_SETTING,_CUSTOM_VALUE_SETTING2;const[parsedQuantity,parsedUnit]=(0,unit_control_utils.bu)(values[side]),computedUnit=values[side]?parsedUnit:selectedUnits[side],inputId=[generatedId,side].join("-");return(0,jsx_runtime.jsxs)(InputWrapper,{expanded:!0,children:[(0,jsx_runtime.jsx)(FlexedBoxControlIcon,{side,sides}),(0,jsx_runtime.jsx)(tooltip.Ay,{placement:"top-end",text:utils_LABELS[side],children:(0,jsx_runtime.jsx)(StyledUnitControl,{...props,__next40pxDefaultSize,className:"component-box-control__unit-control",id:inputId,isPressEnterToChange:!0,value:[parsedQuantity,computedUnit].join(""),onChange:(nextValue,extra)=>handleOnValueChange(side,nextValue,extra),onUnitChange:createHandleOnUnitChange(side),onFocus:createHandleOnFocus(side),label:utils_LABELS[side],hideLabelFromVision:!0})}),(0,jsx_runtime.jsx)(FlexedRangeControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize,"aria-controls":inputId,label:utils_LABELS[side],hideLabelFromVision:!0,onChange:newValue=>{handleOnValueChange(side,void 0!==newValue?[newValue,computedUnit].join(""):void 0)},min:0,max:null!==(_CUSTOM_VALUE_SETTING=CUSTOM_VALUE_SETTINGS[null!=computedUnit?computedUnit:"px"]?.max)&&void 0!==_CUSTOM_VALUE_SETTING?_CUSTOM_VALUE_SETTING:10,step:null!==(_CUSTOM_VALUE_SETTING2=CUSTOM_VALUE_SETTINGS[null!=computedUnit?computedUnit:"px"]?.step)&&void 0!==_CUSTOM_VALUE_SETTING2?_CUSTOM_VALUE_SETTING2:.1,value:null!=parsedQuantity?parsedQuantity:0,withInputField:!1})]},`box-control-${side}`)}))})}const groupedSides=["vertical","horizontal"];function AxialInputControls({__next40pxDefaultSize,onChange,onFocus,values,selectedUnits,setSelectedUnits,sides,...props}){const generatedId=(0,use_instance_id.A)(AxialInputControls,"box-control-input"),createHandleOnFocus=side=>event=>{onFocus&&onFocus(event,{side})},handleOnValueChange=(side,next)=>{if(!onChange)return;const nextValues={...values},nextValue=void 0!==next&&!isNaN(parseFloat(next))?next:void 0;"vertical"===side&&(nextValues.top=nextValue,nextValues.bottom=nextValue),"horizontal"===side&&(nextValues.left=nextValue,nextValues.right=nextValue),onChange(nextValues)},createHandleOnUnitChange=side=>next=>{const newUnits={...selectedUnits};"vertical"===side&&(newUnits.top=next,newUnits.bottom=next),"horizontal"===side&&(newUnits.left=next,newUnits.right=next),setSelectedUnits(newUnits)},filteredSides=sides?.length?groupedSides.filter((side=>sides.includes(side))):groupedSides;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:filteredSides.map((side=>{var _CUSTOM_VALUE_SETTING,_CUSTOM_VALUE_SETTING2;const[parsedQuantity,parsedUnit]=(0,unit_control_utils.bu)("vertical"===side?values.top:values.left),selectedUnit="vertical"===side?selectedUnits.top:selectedUnits.left,inputId=[generatedId,side].join("-");return(0,jsx_runtime.jsxs)(InputWrapper,{children:[(0,jsx_runtime.jsx)(FlexedBoxControlIcon,{side,sides}),(0,jsx_runtime.jsx)(tooltip.Ay,{placement:"top-end",text:utils_LABELS[side],children:(0,react.createElement)(StyledUnitControl,{...props,__next40pxDefaultSize,className:"component-box-control__unit-control",id:inputId,isPressEnterToChange:!0,value:[parsedQuantity,null!=selectedUnit?selectedUnit:parsedUnit].join(""),onChange:newValue=>handleOnValueChange(side,newValue),onUnitChange:createHandleOnUnitChange(side),onFocus:createHandleOnFocus(side),label:utils_LABELS[side],hideLabelFromVision:!0,key:side})}),(0,jsx_runtime.jsx)(FlexedRangeControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize,"aria-controls":inputId,label:utils_LABELS[side],hideLabelFromVision:!0,onChange:newValue=>handleOnValueChange(side,void 0!==newValue?[newValue,null!=selectedUnit?selectedUnit:parsedUnit].join(""):void 0),min:0,max:null!==(_CUSTOM_VALUE_SETTING=CUSTOM_VALUE_SETTINGS[null!=selectedUnit?selectedUnit:"px"]?.max)&&void 0!==_CUSTOM_VALUE_SETTING?_CUSTOM_VALUE_SETTING:10,step:null!==(_CUSTOM_VALUE_SETTING2=CUSTOM_VALUE_SETTINGS[null!=selectedUnit?selectedUnit:"px"]?.step)&&void 0!==_CUSTOM_VALUE_SETTING2?_CUSTOM_VALUE_SETTING2:.1,value:null!=parsedQuantity?parsedQuantity:0,withInputField:!1})]},side)}))})}function linked_button_LinkedButton({isLinked,...props}){const label=isLinked?(0,i18n_build_module.__)("Unlink sides"):(0,i18n_build_module.__)("Link sides");return(0,jsx_runtime.jsx)(tooltip.Ay,{text:label,children:(0,jsx_runtime.jsx)(build_module_button.Ay,{...props,className:"component-box-control__linked-button",size:"small",icon:isLinked?library_link.A:link_off.A,iconSize:24,"aria-label":label})})}var use_controlled_state=__webpack_require__("./packages/components/build-module/utils/hooks/use-controlled-state.js");const defaultInputProps={min:0},box_control_noop=()=>{};function BoxControl({__next40pxDefaultSize=!1,id:idProp,inputProps=defaultInputProps,onChange=box_control_noop,label=(0,i18n_build_module.__)("Box Control"),values:valuesProp,units,sides,splitOnAxis=!1,allowReset=!0,resetValues=utils_DEFAULT_VALUES,onMouseOver,onMouseOut}){const[values,setValues]=(0,use_controlled_state.A)(valuesProp,{fallback:utils_DEFAULT_VALUES}),inputValues=values||utils_DEFAULT_VALUES,hasInitialValue=utils_isValuesDefined(valuesProp),hasOneSide=1===sides?.length,[isDirty,setIsDirty]=(0,react.useState)(hasInitialValue),[isLinked,setIsLinked]=(0,react.useState)(!hasInitialValue||!utils_isValuesMixed(inputValues)||hasOneSide),[side,setSide]=(0,react.useState)(getInitialSide(isLinked,splitOnAxis)),[selectedUnits,setSelectedUnits]=(0,react.useState)({top:(0,unit_control_utils.bu)(valuesProp?.top)[1],right:(0,unit_control_utils.bu)(valuesProp?.right)[1],bottom:(0,unit_control_utils.bu)(valuesProp?.bottom)[1],left:(0,unit_control_utils.bu)(valuesProp?.left)[1]}),id=function useUniqueId(idProp){const instanceId=(0,use_instance_id.A)(BoxControl,"inspector-box-control");return idProp||instanceId}(idProp),headingId=`${id}-heading`,inputControlProps={...inputProps,onChange:nextValues=>{onChange(nextValues),setValues(nextValues),setIsDirty(!0)},onFocus:(_event,{side:nextSide})=>{setSide(nextSide)},isLinked,units,selectedUnits,setSelectedUnits,sides,values:inputValues,onMouseOver,onMouseOut,__next40pxDefaultSize};return(0,jsx_runtime.jsxs)(grid_component.A,{id,columns:3,templateColumns:"1fr min-content min-content",role:"group","aria-labelledby":headingId,children:[(0,jsx_runtime.jsx)(base_control.pu.VisualLabel,{id:headingId,children:label}),isLinked&&(0,jsx_runtime.jsxs)(InputWrapper,{children:[(0,jsx_runtime.jsx)(FlexedBoxControlIcon,{side,sides}),(0,jsx_runtime.jsx)(all_input_control_AllInputControl,{...inputControlProps})]}),!hasOneSide&&(0,jsx_runtime.jsx)(LinkedButtonWrapper,{children:(0,jsx_runtime.jsx)(linked_button_LinkedButton,{onClick:()=>{setIsLinked(!isLinked),setSide(getInitialSide(!isLinked,splitOnAxis))},isLinked})}),!isLinked&&splitOnAxis&&(0,jsx_runtime.jsx)(AxialInputControls,{...inputControlProps}),!isLinked&&!splitOnAxis&&(0,jsx_runtime.jsx)(input_controls_BoxInputControls,{...inputControlProps}),allowReset&&(0,jsx_runtime.jsx)(ResetButton,{className:"component-box-control__reset-button",variant:"secondary",size:"small",onClick:()=>{onChange(resetValues),setValues(resetValues),setSelectedUnits(resetValues),setIsDirty(!1)},disabled:!isDirty,children:(0,i18n_build_module.__)("Reset")})]})}const box_control=BoxControl;var components_build_module_icon=__webpack_require__("./packages/components/build-module/icon/index.js"),use_previous=__webpack_require__("./packages/compose/build-module/hooks/use-previous/index.js");const spacing_input_control_CUSTOM_VALUE_SETTINGS={px:{max:300,steps:1},"%":{max:100,steps:1},vw:{max:100,steps:1},vh:{max:100,steps:1},em:{max:10,steps:.1},rm:{max:10,steps:.1},svw:{max:100,steps:1},lvw:{max:100,steps:1},dvw:{max:100,steps:1},svh:{max:100,steps:1},lvh:{max:100,steps:1},dvh:{max:100,steps:1},vi:{max:100,steps:1},svi:{max:100,steps:1},lvi:{max:100,steps:1},dvi:{max:100,steps:1},vb:{max:100,steps:1},svb:{max:100,steps:1},lvb:{max:100,steps:1},dvb:{max:100,steps:1},vmin:{max:100,steps:1},svmin:{max:100,steps:1},lvmin:{max:100,steps:1},dvmin:{max:100,steps:1},vmax:{max:100,steps:1},svmax:{max:100,steps:1},lvmax:{max:100,steps:1},dvmax:{max:100,steps:1}};function SpacingInputControl({icon,isMixed=!1,minimumCustomValue,onChange,onMouseOut,onMouseOver,showSideInLabel=!0,side,spacingSizes,type,value}){var _CUSTOM_VALUE_SETTING,_CUSTOM_VALUE_SETTING2;value=getPresetValueFromCustomValue(value,spacingSizes);let selectListSizes=spacingSizes;const showRangeControl=spacingSizes.length<=RANGE_CONTROL_MAX_SIZE,disableCustomSpacingSizes=(0,use_select.A)((select=>{const editorSettings=select(store_store).getSettings();return editorSettings?.disableCustomSpacingSizes})),[showCustomValueControl,setShowCustomValueControl]=(0,react.useState)(!disableCustomSpacingSizes&&void 0!==value&&!isValueSpacingPreset(value)),[minValue,setMinValue]=(0,react.useState)(minimumCustomValue),previousValue=(0,use_previous.A)(value);value&&previousValue!==value&&!isValueSpacingPreset(value)&&!0!==showCustomValueControl&&setShowCustomValueControl(!0);const[availableUnits]=use_settings_useSettings("spacing.units"),units=(0,unit_control_utils.E)({availableUnits:availableUnits||["px","em","rem"]});let currentValue=null;!showRangeControl&&!showCustomValueControl&&void 0!==value&&(!isValueSpacingPreset(value)||isValueSpacingPreset(value)&&isMixed)?(selectListSizes=[...spacingSizes,{name:isMixed?(0,i18n_build_module.__)("Mixed"):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Custom (%s)"),value),slug:"custom",size:value}],currentValue=selectListSizes.length-1):isMixed||(currentValue=showCustomValueControl?getCustomValueFromPreset(value,spacingSizes):function getSliderValueFromPreset(presetValue,spacingSizes){if(void 0===presetValue)return 0;const slug=0===parseFloat(presetValue,10)?"0":getSpacingPresetSlug(presetValue),sliderValue=spacingSizes.findIndex((spacingSize=>String(spacingSize.slug)===slug));return-1!==sliderValue?sliderValue:NaN}(value,spacingSizes));const selectedUnit=(0,react.useMemo)((()=>(0,unit_control_utils.bu)(currentValue)),[currentValue])[1]||units[0]?.value,customRangeValue=parseFloat(currentValue,10),getNewPresetValue=(newSize,controlType)=>{const size=parseInt(newSize,10);if("selectList"===controlType){if(0===size)return;if(1===size)return"0"}else if(0===size)return"0";return`var:preset|spacing|${spacingSizes[newSize]?.slug}`},allPlaceholder=isMixed?(0,i18n_build_module.__)("Mixed"):null,options=selectListSizes.map(((size,index)=>({key:index,name:size.name}))),marks=spacingSizes.slice(1,spacingSizes.length-1).map(((_newValue,index)=>({value:index+1,label:void 0}))),sideLabel=ALL_SIDES.includes(side)&&showSideInLabel?LABELS[side]:"",typeLabel=showSideInLabel?type?.toLowerCase():type,ariaLabel=(0,i18n_build_module.nv)((0,i18n_build_module.__)("%1$s %2$s"),sideLabel,typeLabel).trim();return(0,jsx_runtime.jsxs)(h_stack_component.A,{className:"spacing-sizes-control__wrapper",children:[icon&&(0,jsx_runtime.jsx)(components_build_module_icon.A,{className:"spacing-sizes-control__icon",icon,size:24}),showCustomValueControl&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(unit_control.Ay,{onMouseOver,onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut,onChange:newSize=>onChange((newSize=>isNaN(parseFloat(newSize))?void 0:newSize)(newSize)),value:currentValue,units,min:minValue,placeholder:allPlaceholder,disableUnits:isMixed,label:ariaLabel,hideLabelFromVision:!0,className:"spacing-sizes-control__custom-value-input",size:"__unstable-large",onDragStart:()=>{"-"===value?.charAt(0)&&setMinValue(0)},onDrag:()=>{"-"===value?.charAt(0)&&setMinValue(0)},onDragEnd:()=>{setMinValue(minimumCustomValue)}}),(0,jsx_runtime.jsx)(range_control.A,{__next40pxDefaultSize:!0,onMouseOver,onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut,value:customRangeValue,min:0,max:null!==(_CUSTOM_VALUE_SETTING=spacing_input_control_CUSTOM_VALUE_SETTINGS[selectedUnit]?.max)&&void 0!==_CUSTOM_VALUE_SETTING?_CUSTOM_VALUE_SETTING:10,step:null!==(_CUSTOM_VALUE_SETTING2=spacing_input_control_CUSTOM_VALUE_SETTINGS[selectedUnit]?.steps)&&void 0!==_CUSTOM_VALUE_SETTING2?_CUSTOM_VALUE_SETTING2:.1,withInputField:!1,onChange:next=>{onChange([next,selectedUnit].join(""))},className:"spacing-sizes-control__custom-value-range",__nextHasNoMarginBottom:!0,label:ariaLabel,hideLabelFromVision:!0})]}),showRangeControl&&!showCustomValueControl&&(0,jsx_runtime.jsx)(range_control.A,{__next40pxDefaultSize:!0,onMouseOver,onMouseOut,className:"spacing-sizes-control__range-control",value:currentValue,onChange:newSize=>onChange(getNewPresetValue(newSize)),onMouseDown:event=>{event?.nativeEvent?.offsetX<35&&void 0===value&&onChange("0")},withInputField:!1,"aria-valuenow":currentValue,"aria-valuetext":spacingSizes[currentValue]?.name,renderTooltipContent:newValue=>void 0===value?void 0:spacingSizes[newValue]?.name,min:0,max:spacingSizes.length-1,marks,label:ariaLabel,hideLabelFromVision:!0,__nextHasNoMarginBottom:!0,onFocus:onMouseOver,onBlur:onMouseOut}),!showRangeControl&&!showCustomValueControl&&(0,jsx_runtime.jsx)(custom_select_control,{className:"spacing-sizes-control__custom-select-control",value:options.find((option=>option.key===currentValue))||"",onChange:selection=>{onChange(getNewPresetValue(selection.selectedItem.key,"selectList"))},options,label:ariaLabel,hideLabelFromVision:!0,size:"__unstable-large",onMouseOver,onMouseOut,onFocus:onMouseOver,onBlur:onMouseOut}),!disableCustomSpacingSizes&&(0,jsx_runtime.jsx)(build_module_button.Ay,{label:showCustomValueControl?(0,i18n_build_module.__)("Use size preset"):(0,i18n_build_module.__)("Set custom size"),icon:library_settings.A,onClick:()=>{setShowCustomValueControl(!showCustomValueControl)},isPressed:showCustomValueControl,size:"small",className:"spacing-sizes-control__custom-toggle",iconSize:24})]})}const axial_groupedSides=["vertical","horizontal"];function axial_AxialInputControls({minimumCustomValue,onChange,onMouseOut,onMouseOver,sides,spacingSizes,type,values}){const createHandleOnChange=side=>next=>{if(!onChange)return;const nextValues={...Object.keys(values).reduce(((acc,key)=>(acc[key]=getPresetValueFromCustomValue(values[key],spacingSizes),acc)),{})};"vertical"===side&&(nextValues.top=next,nextValues.bottom=next),"horizontal"===side&&(nextValues.left=next,nextValues.right=next),onChange(nextValues)},filteredSides=sides?.length?axial_groupedSides.filter((side=>hasAxisSupport(sides,side))):axial_groupedSides;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:filteredSides.map((side=>{const axisValue="vertical"===side?values.top:values.left;return(0,jsx_runtime.jsx)(SpacingInputControl,{icon:ICONS[side],label:LABELS[side],minimumCustomValue,onChange:createHandleOnChange(side),onMouseOut,onMouseOver,side,spacingSizes,type,value:axisValue,withInputField:!1},`spacing-sizes-control-${side}`)}))})}function SeparatedInputControls({minimumCustomValue,onChange,onMouseOut,onMouseOver,sides,spacingSizes,type,values}){const filteredSides=sides?.length?ALL_SIDES.filter((side=>sides.includes(side))):ALL_SIDES,createHandleOnChange=side=>next=>{const nextValues={...Object.keys(values).reduce(((acc,key)=>(acc[key]=getPresetValueFromCustomValue(values[key],spacingSizes),acc)),{})};nextValues[side]=next,onChange(nextValues)};return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:filteredSides.map((side=>(0,jsx_runtime.jsx)(SpacingInputControl,{icon:ICONS[side],label:LABELS[side],minimumCustomValue,onChange:createHandleOnChange(side),onMouseOut,onMouseOver,side,spacingSizes,type,value:values[side],withInputField:!1},`spacing-sizes-control-${side}`)))})}function SingleInputControl({minimumCustomValue,onChange,onMouseOut,onMouseOver,showSideInLabel,side,spacingSizes,type,values}){return(0,jsx_runtime.jsx)(SpacingInputControl,{label:LABELS[side],minimumCustomValue,onChange:(currentSide=side,next=>{const nextValues={...Object.keys(values).reduce(((acc,key)=>(acc[key]=getPresetValueFromCustomValue(values[key],spacingSizes),acc)),{})};nextValues[currentSide]=next,onChange(nextValues)}),onMouseOut,onMouseOver,showSideInLabel,side,spacingSizes,type,value:values[side],withInputField:!1});var currentSide}function spacing_sizes_control_linked_button_LinkedButton({isLinked,...props}){const label=isLinked?(0,i18n_build_module.__)("Unlink sides"):(0,i18n_build_module.__)("Link sides");return(0,jsx_runtime.jsx)(tooltip.Ay,{text:label,children:(0,jsx_runtime.jsx)(build_module_button.Ay,{...props,size:"small",icon:isLinked?library_link.A:link_off.A,iconSize:24,"aria-label":label})})}const use_spacing_sizes_EMPTY_ARRAY=[],compare=new Intl.Collator("und",{numeric:!0}).compare;function useSpacingSizes(){const[customSpacingSizes,themeSpacingSizes,defaultSpacingSizes,defaultSpacingSizesEnabled]=use_settings_useSettings("spacing.spacingSizes.custom","spacing.spacingSizes.theme","spacing.spacingSizes.default","spacing.defaultSpacingSizes"),customSizes=null!=customSpacingSizes?customSpacingSizes:use_spacing_sizes_EMPTY_ARRAY,themeSizes=null!=themeSpacingSizes?themeSpacingSizes:use_spacing_sizes_EMPTY_ARRAY,defaultSizes=defaultSpacingSizes&&!1!==defaultSpacingSizesEnabled?defaultSpacingSizes:use_spacing_sizes_EMPTY_ARRAY;return(0,react.useMemo)((()=>{const sizes=[{name:(0,i18n_build_module.__)("None"),slug:"0",size:0},...customSizes,...themeSizes,...defaultSizes];return sizes.every((({slug})=>/^[0-9]/.test(slug)))&&sizes.sort(((a,b)=>compare(a.slug,b.slug))),sizes.length>RANGE_CONTROL_MAX_SIZE?[{name:(0,i18n_build_module.__)("Default"),slug:"default",size:void 0},...sizes]:sizes}),[customSizes,themeSizes,defaultSizes])}function SpacingSizesControl({inputProps,label:labelProp,minimumCustomValue=0,onChange,onMouseOut,onMouseOver,showSideInLabel=!0,sides=ALL_SIDES,useSelect,values}){const spacingSizes=useSpacingSizes(),inputValues=values||DEFAULT_VALUES,hasOneSide=1===sides?.length,hasOnlyAxialSides=sides?.includes("horizontal")&&sides?.includes("vertical")&&2===sides?.length,[view,setView]=(0,react.useState)(function getInitialView(values={},sides){const{top,right,bottom,left}=values,sideValues=[top,right,bottom,left].filter(Boolean),hasMatchingAxialValues=!(top!==bottom||left!==right||!top&&!left),hasNoValuesAndBalancedSides=!sideValues.length&&function hasBalancedSidesSupport(sides=[]){const counts={top:0,right:0,bottom:0,left:0};return sides.forEach((side=>counts[side]+=1)),(counts.top+counts.bottom)%2==0&&(counts.left+counts.right)%2==0}(sides),hasOnlyAxialSides=sides?.includes("horizontal")&&sides?.includes("vertical")&&2===sides?.length;if(hasAxisSupport(sides)&&(hasMatchingAxialValues||hasNoValuesAndBalancedSides))return VIEWS.axial;if(hasOnlyAxialSides&&1===sideValues.length){let side;return Object.entries(values).some((([key,value])=>(side=key,void 0!==value))),side}return 1!==sides?.length||sideValues.length?VIEWS.custom:sides[0]}(inputValues,sides)),inputControlProps={...inputProps,minimumCustomValue,onChange:nextValue=>{const newValues={...values,...nextValue};onChange(newValues)},onMouseOut,onMouseOver,sides,spacingSizes,type:labelProp,useSelect,values:inputValues},sideLabel=ALL_SIDES.includes(view)&&showSideInLabel?LABELS[view]:"",label=(0,i18n_build_module.nv)((0,i18n_build_module.__)("%1$s %2$s"),labelProp,sideLabel).trim();return(0,jsx_runtime.jsxs)("fieldset",{className:"spacing-sizes-control",children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{className:"spacing-sizes-control__header",children:[(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"legend",className:"spacing-sizes-control__label",children:label}),!hasOneSide&&!hasOnlyAxialSides&&(0,jsx_runtime.jsx)(spacing_sizes_control_linked_button_LinkedButton,{label:labelProp,onClick:()=>{setView(view===VIEWS.axial?VIEWS.custom:VIEWS.axial)},isLinked:view===VIEWS.axial})]}),(0,jsx_runtime.jsx)(v_stack_component.A,{spacing:.5,children:view===VIEWS.axial?(0,jsx_runtime.jsx)(axial_AxialInputControls,{...inputControlProps}):view===VIEWS.custom?(0,jsx_runtime.jsx)(SeparatedInputControls,{...inputControlProps}):(0,jsx_runtime.jsx)(SingleInputControl,{side:view,...inputControlProps,showSideInLabel})})]})}const RANGE_CONTROL_CUSTOM_SETTINGS={px:{max:1e3,step:1},"%":{max:100,step:1},vw:{max:100,step:1},vh:{max:100,step:1},em:{max:50,step:.1},rem:{max:50,step:.1},svw:{max:100,step:1},lvw:{max:100,step:1},dvw:{max:100,step:1},svh:{max:100,step:1},lvh:{max:100,step:1},dvh:{max:100,step:1},vi:{max:100,step:1},svi:{max:100,step:1},lvi:{max:100,step:1},dvi:{max:100,step:1},vb:{max:100,step:1},svb:{max:100,step:1},lvb:{max:100,step:1},dvb:{max:100,step:1},vmin:{max:100,step:1},svmin:{max:100,step:1},lvmin:{max:100,step:1},dvmin:{max:100,step:1},vmax:{max:100,step:1},svmax:{max:100,step:1},lvmax:{max:100,step:1},dvmax:{max:100,step:1}};function HeightControl({label=(0,i18n_build_module.__)("Height"),onChange,value}){var _RANGE_CONTROL_CUSTOM,_RANGE_CONTROL_CUSTOM2;const customRangeValue=parseFloat(value),[availableUnits]=use_settings_useSettings("spacing.units"),units=(0,unit_control_utils.E)({availableUnits:availableUnits||["%","px","em","rem","vh","vw"]}),selectedUnit=(0,react.useMemo)((()=>(0,unit_control_utils.bu)(value)),[value])[1]||units[0]?.value||"px";return(0,jsx_runtime.jsxs)("fieldset",{className:"block-editor-height-control",children:[(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"legend",children:label}),(0,jsx_runtime.jsxs)(component.A,{children:[(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(unit_control.Ay,{value,units,onChange,onUnitChange:newUnit=>{const[currentValue,currentUnit]=(0,unit_control_utils.bu)(value);["em","rem"].includes(newUnit)&&"px"===currentUnit?onChange((currentValue/16).toFixed(2)+newUnit):["em","rem"].includes(currentUnit)&&"px"===newUnit?onChange(Math.round(16*currentValue)+newUnit):["%","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax"].includes(newUnit)&&currentValue>100&&onChange(100+newUnit)},min:0,size:"__unstable-large",label,hideLabelFromVision:!0})}),(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(spacer_component.A,{marginX:2,marginBottom:0,children:(0,jsx_runtime.jsx)(range_control.A,{__next40pxDefaultSize:!0,value:customRangeValue,min:0,max:null!==(_RANGE_CONTROL_CUSTOM=RANGE_CONTROL_CUSTOM_SETTINGS[selectedUnit]?.max)&&void 0!==_RANGE_CONTROL_CUSTOM?_RANGE_CONTROL_CUSTOM:100,step:null!==(_RANGE_CONTROL_CUSTOM2=RANGE_CONTROL_CUSTOM_SETTINGS[selectedUnit]?.step)&&void 0!==_RANGE_CONTROL_CUSTOM2?_RANGE_CONTROL_CUSTOM2:.1,withInputField:!1,onChange:next=>{onChange([next,selectedUnit].join(""))},__nextHasNoMarginBottom:!0,label,hideLabelFromVision:!0})})})]})]})}function useGetNumberOfBlocksBeforeCell(gridClientId,numColumns){const{getBlockOrder,getBlockAttributes}=(0,use_select.A)(store_store);return(column,row)=>{const targetIndex=(row-1)*numColumns+column-1;let count=0;for(const clientId of getBlockOrder(gridClientId)){var _getBlockAttributes$s;const{columnStart,rowStart}=null!==(_getBlockAttributes$s=getBlockAttributes(clientId).style?.layout)&&void 0!==_getBlockAttributes$s?_getBlockAttributes$s:{};(rowStart-1)*numColumns+columnStart-1<targetIndex&&count++}return count}}function helpText(selfStretch,parentLayout){const{orientation="horizontal"}=parentLayout;return"fill"===selfStretch?(0,i18n_build_module.__)("Stretch to fill available space."):"fixed"===selfStretch&&"horizontal"===orientation?(0,i18n_build_module.__)("Specify a fixed width."):"fixed"===selfStretch?(0,i18n_build_module.__)("Specify a fixed height."):(0,i18n_build_module.__)("Fit contents.")}function ChildLayoutControl({value:childLayout={},onChange,parentLayout,isShownByDefault,panelId}){const{type:parentType,default:{type:defaultParentType="default"}={}}=null!=parentLayout?parentLayout:{},parentLayoutType=parentType||defaultParentType;return"flex"===parentLayoutType?(0,jsx_runtime.jsx)(FlexControls,{childLayout,onChange,parentLayout,isShownByDefault,panelId}):"grid"===parentLayoutType?(0,jsx_runtime.jsx)(GridControls,{childLayout,onChange,parentLayout,isShownByDefault,panelId}):null}function FlexControls({childLayout,onChange,parentLayout,isShownByDefault,panelId}){const{selfStretch,flexSize}=childLayout,{orientation="horizontal"}=null!=parentLayout?parentLayout:{},flexResetLabel="horizontal"===orientation?(0,i18n_build_module.__)("Width"):(0,i18n_build_module.__)("Height");return(0,react.useEffect)((()=>{"fixed"!==selfStretch||flexSize||onChange({...childLayout,selfStretch:"fit"})}),[]),(0,jsx_runtime.jsxs)(v_stack_component.A,{as:tools_panel_item_component.A,spacing:2,hasValue:()=>!!selfStretch,label:flexResetLabel,onDeselect:()=>{onChange({selfStretch:void 0,flexSize:void 0})},isShownByDefault,panelId,children:[(0,jsx_runtime.jsxs)(toggle_group_control_component.A,{__nextHasNoMarginBottom:!0,size:"__unstable-large",label:childLayoutOrientation(parentLayout),value:selfStretch||"fit",help:helpText(selfStretch,parentLayout),onChange:value=>{onChange({selfStretch:value,flexSize:"fixed"!==value?null:flexSize})},isBlock:!0,children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"fit",label:(0,i18n_build_module._x)("Fit","Intrinsic block width in flex layout")},"fit"),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"fill",label:(0,i18n_build_module._x)("Grow","Block with expanding width in flex layout")},"fill"),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"fixed",label:(0,i18n_build_module._x)("Fixed","Block with fixed width in flex layout")},"fixed")]}),"fixed"===selfStretch&&(0,jsx_runtime.jsx)(unit_control.Ay,{size:"__unstable-large",onChange:value=>{onChange({selfStretch,flexSize:value})},value:flexSize,label:flexResetLabel,hideLabelFromVision:!0})]})}function childLayoutOrientation(parentLayout){const{orientation="horizontal"}=parentLayout;return"horizontal"===orientation?(0,i18n_build_module.__)("Width"):(0,i18n_build_module.__)("Height")}function GridControls({childLayout,onChange,parentLayout,isShownByDefault,panelId}){const{columnStart,rowStart,columnSpan,rowSpan}=childLayout,{columnCount=3,rowCount}=null!=parentLayout?parentLayout:{},rootClientId=(0,use_select.A)((select=>select(store_store).getBlockRootClientId(panelId))),{moveBlocksToPosition,__unstableMarkNextChangeAsNotPersistent}=(0,use_dispatch.A)(store_store),getNumberOfBlocksBeforeCell=useGetNumberOfBlocksBeforeCell(rootClientId,columnCount);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{as:tools_panel_item_component.A,hasValue:()=>!!columnSpan||!!rowSpan,label:(0,i18n_build_module.__)("Grid span"),onDeselect:()=>{onChange({columnSpan:void 0,rowSpan:void 0})},isShownByDefault,panelId,children:[(0,jsx_runtime.jsx)(input_control.Ay,{size:"__unstable-large",label:(0,i18n_build_module.__)("Column span"),type:"number",onChange:value=>{const newColumnSpan=""===value?1:parseInt(value,10);onChange({columnStart,rowStart,rowSpan,columnSpan:newColumnSpan})},value:null!=columnSpan?columnSpan:1,min:1}),(0,jsx_runtime.jsx)(input_control.Ay,{size:"__unstable-large",label:(0,i18n_build_module.__)("Row span"),type:"number",onChange:value=>{const newRowSpan=""===value?1:parseInt(value,10);onChange({columnStart,rowStart,columnSpan,rowSpan:newRowSpan})},value:null!=rowSpan?rowSpan:1,min:1})]}),window.__experimentalEnableGridInteractivity&&columnCount&&(0,jsx_runtime.jsxs)(component.A,{as:tools_panel_item_component.A,hasValue:()=>!!columnStart||!!rowStart,label:(0,i18n_build_module.__)("Grid placement"),onDeselect:()=>{onChange({columnStart:void 0,rowStart:void 0})},isShownByDefault:!1,panelId,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{style:{width:"50%"},children:(0,jsx_runtime.jsx)(input_control.Ay,{size:"__unstable-large",label:(0,i18n_build_module.__)("Column"),type:"number",onChange:value=>{const newColumnStart=""===value?1:parseInt(value,10);onChange({columnStart:newColumnStart,rowStart,columnSpan,rowSpan}),__unstableMarkNextChangeAsNotPersistent(),moveBlocksToPosition([panelId],rootClientId,rootClientId,getNumberOfBlocksBeforeCell(newColumnStart,rowStart))},value:null!=columnStart?columnStart:1,min:1,max:columnCount?columnCount-(null!=columnSpan?columnSpan:1)+1:void 0})}),(0,jsx_runtime.jsx)(flex_item_component.A,{style:{width:"50%"},children:(0,jsx_runtime.jsx)(input_control.Ay,{size:"__unstable-large",label:(0,i18n_build_module.__)("Row"),type:"number",onChange:value=>{const newRowStart=""===value?1:parseInt(value,10);onChange({columnStart,rowStart:newRowStart,columnSpan,rowSpan}),__unstableMarkNextChangeAsNotPersistent(),moveBlocksToPosition([panelId],rootClientId,rootClientId,getNumberOfBlocksBeforeCell(columnStart,newRowStart))},value:null!=rowStart?rowStart:1,min:1,max:rowCount?rowCount-(null!=rowSpan?rowSpan:1)+1:void 0})})]})]})}function AspectRatioTool({panelId,value,onChange=()=>{},options,defaultValue="auto",hasValue,isShownByDefault=!0}){const displayValue=null!=value?value:"auto",[defaultRatios,themeRatios,showDefaultRatios]=use_settings_useSettings("dimensions.aspectRatios.default","dimensions.aspectRatios.theme","dimensions.defaultAspectRatios"),themeOptions=themeRatios?.map((({name,ratio})=>({label:name,value:ratio}))),defaultOptions=defaultRatios?.map((({name,ratio})=>({label:name,value:ratio}))),aspectRatioOptions=[{label:(0,i18n_build_module._x)("Original","Aspect ratio option for dimensions control"),value:"auto"},...showDefaultRatios?defaultOptions:[],...themeOptions||[],{label:(0,i18n_build_module._x)("Custom","Aspect ratio option for dimensions control"),value:"custom",disabled:!0,hidden:!0}];return(0,jsx_runtime.jsx)(tools_panel_item_component.A,{hasValue:hasValue||(()=>displayValue!==defaultValue),label:(0,i18n_build_module.__)("Aspect ratio"),onDeselect:()=>onChange(void 0),isShownByDefault,panelId,children:(0,jsx_runtime.jsx)(select_control.A,{label:(0,i18n_build_module.__)("Aspect ratio"),value:displayValue,options:null!=options?options:aspectRatioOptions,onChange,size:"__unstable-large",__nextHasNoMarginBottom:!0})})}const AXIAL_SIDES=["horizontal","vertical"];function useHasDimensionsPanel(settings){const hasContentSize=useHasContentSize(settings),hasWideSize=useHasWideSize(settings),hasPadding=useHasPadding(settings),hasMargin=useHasMargin(settings),hasGap=useHasGap(settings),hasMinHeight=useHasMinHeight(settings),hasAspectRatio=useHasAspectRatio(settings),hasChildLayout=useHasChildLayout(settings);return"web"===platform.A.OS&&(hasContentSize||hasWideSize||hasPadding||hasMargin||hasGap||hasMinHeight||hasAspectRatio||hasChildLayout)}function useHasContentSize(settings){return settings?.layout?.contentSize}function useHasWideSize(settings){return settings?.layout?.wideSize}function useHasPadding(settings){return settings?.spacing?.padding}function useHasMargin(settings){return settings?.spacing?.margin}function useHasGap(settings){return settings?.spacing?.blockGap}function useHasMinHeight(settings){return settings?.dimensions?.minHeight}function useHasAspectRatio(settings){return settings?.dimensions?.aspectRatio}function useHasChildLayout(settings){var _settings$parentLayou;const{type:parentLayoutType="default",default:{type:defaultParentLayoutType="default"}={},allowSizingOnChildren=!1}=null!==(_settings$parentLayou=settings?.parentLayout)&&void 0!==_settings$parentLayou?_settings$parentLayou:{},support=("flex"===defaultParentLayoutType||"flex"===parentLayoutType||"grid"===defaultParentLayoutType||"grid"===parentLayoutType)&&allowSizingOnChildren;return!!settings?.layout&&support}function filterValuesBySides(values,sides){if(!sides||!values)return values;const filteredValues={};return sides.forEach((side=>{"vertical"===side&&(filteredValues.top=values.top,filteredValues.bottom=values.bottom),"horizontal"===side&&(filteredValues.left=values.left,filteredValues.right=values.right),filteredValues[side]=values?.[side]})),filteredValues}function splitStyleValue(value){return value&&"string"==typeof value?{top:value,right:value,bottom:value,left:value}:value}function DimensionsToolsPanel({resetAllFilter,onChange,value,panelId,children}){const dropdownMenuProps=useToolsPanelDropdownMenuProps();return(0,jsx_runtime.jsx)(tools_panel_component.A,{label:(0,i18n_build_module.__)("Dimensions"),resetAll:()=>{const updatedValue=resetAllFilter(value);onChange(updatedValue)},panelId,dropdownMenuProps,children})}const dimensions_panel_DEFAULT_CONTROLS={contentSize:!0,wideSize:!0,padding:!0,margin:!0,blockGap:!0,minHeight:!0,aspectRatio:!0,childLayout:!0};function DimensionsPanel({as:Wrapper=DimensionsToolsPanel,value,onChange,inheritedValue=value,settings,panelId,defaultControls=dimensions_panel_DEFAULT_CONTROLS,onVisualize=()=>{},includeLayoutControls=!1}){var _defaultControls$cont,_defaultControls$wide,_defaultControls$padd,_defaultControls$marg,_defaultControls$bloc,_defaultControls$chil,_defaultControls$minH,_defaultControls$aspe;const{dimensions,spacing}=settings,decodeValue=rawValue=>rawValue&&"object"==typeof rawValue?Object.keys(rawValue).reduce(((acc,key)=>(acc[key]=getValueFromVariable({settings:{dimensions,spacing}},"",rawValue[key]),acc)),{}):getValueFromVariable({settings:{dimensions,spacing}},"",rawValue),showSpacingPresetsControl=function useHasSpacingPresets(settings){const{defaultSpacingSizes,spacingSizes}=settings?.spacing||{};return!1!==defaultSpacingSizes&&spacingSizes?.default?.length>0||spacingSizes?.theme?.length>0||spacingSizes?.custom?.length>0}(settings),units=(0,unit_control_utils.E)({availableUnits:settings?.spacing?.units||["%","px","em","rem","vw"]}),[minMarginValue,setMinMarginValue]=(0,react.useState)(-(1/0)),showContentSizeControl=useHasContentSize(settings)&&includeLayoutControls,contentSizeValue=decodeValue(inheritedValue?.layout?.contentSize),setContentSizeValue=newValue=>{onChange(setImmutably(value,["layout","contentSize"],newValue||void 0))},showWideSizeControl=useHasWideSize(settings)&&includeLayoutControls,wideSizeValue=decodeValue(inheritedValue?.layout?.wideSize),setWideSizeValue=newValue=>{onChange(setImmutably(value,["layout","wideSize"],newValue||void 0))},showPaddingControl=useHasPadding(settings),paddingValues=splitStyleValue(decodeValue(inheritedValue?.spacing?.padding)),paddingSides=Array.isArray(settings?.spacing?.padding)?settings?.spacing?.padding:settings?.spacing?.padding?.sides,isAxialPadding=paddingSides&&paddingSides.some((side=>AXIAL_SIDES.includes(side))),setPaddingValues=newPaddingValues=>{const padding=filterValuesBySides(newPaddingValues,paddingSides);onChange(setImmutably(value,["spacing","padding"],padding))},onMouseOverPadding=()=>onVisualize("padding"),showMarginControl=useHasMargin(settings),marginValues=splitStyleValue(decodeValue(inheritedValue?.spacing?.margin)),marginSides=Array.isArray(settings?.spacing?.margin)?settings?.spacing?.margin:settings?.spacing?.margin?.sides,isAxialMargin=marginSides&&marginSides.some((side=>AXIAL_SIDES.includes(side))),setMarginValues=newMarginValues=>{const margin=filterValuesBySides(newMarginValues,marginSides);onChange(setImmutably(value,["spacing","margin"],margin))},onMouseOverMargin=()=>onVisualize("margin"),showGapControl=useHasGap(settings),gapValue=decodeValue(inheritedValue?.spacing?.blockGap),gapValues=function splitGapValue(value){return value&&"string"==typeof value?{top:value}:value?{...value,right:value?.left,bottom:value?.top}:value}(gapValue),gapSides=Array.isArray(settings?.spacing?.blockGap)?settings?.spacing?.blockGap:settings?.spacing?.blockGap?.sides,isAxialGap=gapSides&&gapSides.some((side=>AXIAL_SIDES.includes(side))),setGapValue=newGapValue=>{onChange(setImmutably(value,["spacing","blockGap"],newGapValue))},setGapValues=nextBoxGapValue=>{nextBoxGapValue||setGapValue(null),!isAxialGap&&nextBoxGapValue?.hasOwnProperty("top")?setGapValue(nextBoxGapValue.top):setGapValue({top:nextBoxGapValue?.top,left:nextBoxGapValue?.left})},showMinHeightControl=useHasMinHeight(settings),minHeightValue=decodeValue(inheritedValue?.dimensions?.minHeight),setMinHeightValue=newValue=>{const tempValue=setImmutably(value,["dimensions","minHeight"],newValue);onChange(setImmutably(tempValue,["dimensions","aspectRatio"],void 0))},showAspectRatioControl=useHasAspectRatio(settings),aspectRatioValue=decodeValue(inheritedValue?.dimensions?.aspectRatio),showChildLayoutControl=useHasChildLayout(settings),childLayout=inheritedValue?.layout,resetAllFilter=(0,react.useCallback)((previousValue=>({...previousValue,layout:utils_cleanEmptyObject({...previousValue?.layout,contentSize:void 0,wideSize:void 0,selfStretch:void 0,flexSize:void 0,columnStart:void 0,rowStart:void 0,columnSpan:void 0,rowSpan:void 0}),spacing:{...previousValue?.spacing,padding:void 0,margin:void 0,blockGap:void 0},dimensions:{...previousValue?.dimensions,minHeight:void 0,aspectRatio:void 0}})),[]),onMouseLeaveControls=()=>onVisualize(!1),inputProps={min:minMarginValue,onDragStart:()=>{setMinMarginValue(0)},onDragEnd:()=>{setMinMarginValue(-(1/0))}};return(0,jsx_runtime.jsxs)(Wrapper,{resetAllFilter,value,onChange,panelId,children:[(showContentSizeControl||showWideSizeControl)&&(0,jsx_runtime.jsx)("span",{className:"span-columns",children:(0,i18n_build_module.__)("Set the width of the main content area.")}),showContentSizeControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{label:(0,i18n_build_module.__)("Content width"),hasValue:()=>!!value?.layout?.contentSize,onDeselect:()=>setContentSizeValue(void 0),isShownByDefault:null!==(_defaultControls$cont=defaultControls.contentSize)&&void 0!==_defaultControls$cont?_defaultControls$cont:dimensions_panel_DEFAULT_CONTROLS.contentSize,panelId,children:(0,jsx_runtime.jsx)(unit_control.Ay,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Content width"),labelPosition:"top",value:contentSizeValue||"",onChange:nextContentSize=>{setContentSizeValue(nextContentSize)},units,prefix:(0,jsx_runtime.jsx)(input_prefix_wrapper.A,{variant:"icon",children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:align_none.A})})})}),showWideSizeControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{label:(0,i18n_build_module.__)("Wide width"),hasValue:()=>!!value?.layout?.wideSize,onDeselect:()=>setWideSizeValue(void 0),isShownByDefault:null!==(_defaultControls$wide=defaultControls.wideSize)&&void 0!==_defaultControls$wide?_defaultControls$wide:dimensions_panel_DEFAULT_CONTROLS.wideSize,panelId,children:(0,jsx_runtime.jsx)(unit_control.Ay,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Wide width"),labelPosition:"top",value:wideSizeValue||"",onChange:nextWideSize=>{setWideSizeValue(nextWideSize)},units,prefix:(0,jsx_runtime.jsx)(input_prefix_wrapper.A,{variant:"icon",children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:stretch_wide.A})})})}),showPaddingControl&&(0,jsx_runtime.jsxs)(tools_panel_item_component.A,{hasValue:()=>!!value?.spacing?.padding&&Object.keys(value?.spacing?.padding).length,label:(0,i18n_build_module.__)("Padding"),onDeselect:()=>setPaddingValues(void 0),isShownByDefault:null!==(_defaultControls$padd=defaultControls.padding)&&void 0!==_defaultControls$padd?_defaultControls$padd:dimensions_panel_DEFAULT_CONTROLS.padding,className:(0,clsx.A)({"tools-panel-item-spacing":showSpacingPresetsControl}),panelId,children:[!showSpacingPresetsControl&&(0,jsx_runtime.jsx)(box_control,{__next40pxDefaultSize:!0,values:paddingValues,onChange:setPaddingValues,label:(0,i18n_build_module.__)("Padding"),sides:paddingSides,units,allowReset:!1,splitOnAxis:isAxialPadding,onMouseOver:onMouseOverPadding,onMouseOut:onMouseLeaveControls}),showSpacingPresetsControl&&(0,jsx_runtime.jsx)(SpacingSizesControl,{values:paddingValues,onChange:setPaddingValues,label:(0,i18n_build_module.__)("Padding"),sides:paddingSides,units,allowReset:!1,onMouseOver:onMouseOverPadding,onMouseOut:onMouseLeaveControls})]}),showMarginControl&&(0,jsx_runtime.jsxs)(tools_panel_item_component.A,{hasValue:()=>!!value?.spacing?.margin&&Object.keys(value?.spacing?.margin).length,label:(0,i18n_build_module.__)("Margin"),onDeselect:()=>setMarginValues(void 0),isShownByDefault:null!==(_defaultControls$marg=defaultControls.margin)&&void 0!==_defaultControls$marg?_defaultControls$marg:dimensions_panel_DEFAULT_CONTROLS.margin,className:(0,clsx.A)({"tools-panel-item-spacing":showSpacingPresetsControl}),panelId,children:[!showSpacingPresetsControl&&(0,jsx_runtime.jsx)(box_control,{__next40pxDefaultSize:!0,values:marginValues,onChange:setMarginValues,inputProps,label:(0,i18n_build_module.__)("Margin"),sides:marginSides,units,allowReset:!1,splitOnAxis:isAxialMargin,onMouseOver:onMouseOverMargin,onMouseOut:onMouseLeaveControls}),showSpacingPresetsControl&&(0,jsx_runtime.jsx)(SpacingSizesControl,{values:marginValues,onChange:setMarginValues,minimumCustomValue:-1/0,label:(0,i18n_build_module.__)("Margin"),sides:marginSides,units,allowReset:!1,onMouseOver:onMouseOverMargin,onMouseOut:onMouseLeaveControls})]}),showGapControl&&(0,jsx_runtime.jsxs)(tools_panel_item_component.A,{hasValue:()=>!!value?.spacing?.blockGap,label:(0,i18n_build_module.__)("Block spacing"),onDeselect:()=>setGapValue(void 0),isShownByDefault:null!==(_defaultControls$bloc=defaultControls.blockGap)&&void 0!==_defaultControls$bloc?_defaultControls$bloc:dimensions_panel_DEFAULT_CONTROLS.blockGap,className:(0,clsx.A)({"tools-panel-item-spacing":showSpacingPresetsControl,"single-column":!showSpacingPresetsControl&&!isAxialGap}),panelId,children:[!showSpacingPresetsControl&&(isAxialGap?(0,jsx_runtime.jsx)(box_control,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Block spacing"),min:0,onChange:setGapValues,units,sides:gapSides,values:gapValues,allowReset:!1,splitOnAxis:isAxialGap}):(0,jsx_runtime.jsx)(unit_control.Ay,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Block spacing"),min:0,onChange:setGapValue,units,value:gapValue})),showSpacingPresetsControl&&(0,jsx_runtime.jsx)(SpacingSizesControl,{label:(0,i18n_build_module.__)("Block spacing"),min:0,onChange:setGapValues,showSideInLabel:!1,sides:isAxialGap?gapSides:["top"],values:gapValues,allowReset:!1})]}),showChildLayoutControl&&(0,jsx_runtime.jsx)(ChildLayoutControl,{value:childLayout,onChange:newChildLayout=>{onChange({...value,layout:{...newChildLayout}})},parentLayout:settings?.parentLayout,panelId,isShownByDefault:null!==(_defaultControls$chil=defaultControls.childLayout)&&void 0!==_defaultControls$chil?_defaultControls$chil:dimensions_panel_DEFAULT_CONTROLS.childLayout}),showMinHeightControl&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{hasValue:()=>!!value?.dimensions?.minHeight,label:(0,i18n_build_module.__)("Minimum height"),onDeselect:()=>{setMinHeightValue(void 0)},isShownByDefault:null!==(_defaultControls$minH=defaultControls.minHeight)&&void 0!==_defaultControls$minH?_defaultControls$minH:dimensions_panel_DEFAULT_CONTROLS.minHeight,panelId,children:(0,jsx_runtime.jsx)(HeightControl,{label:(0,i18n_build_module.__)("Minimum height"),value:minHeightValue,onChange:setMinHeightValue})}),showAspectRatioControl&&(0,jsx_runtime.jsx)(AspectRatioTool,{hasValue:()=>!!value?.dimensions?.aspectRatio,value:aspectRatioValue,onChange:newValue=>{const tempValue=setImmutably(value,["dimensions","aspectRatio"],newValue);onChange(setImmutably(tempValue,["dimensions","minHeight"],void 0))},panelId,isShownByDefault:null!==(_defaultControls$aspe=defaultControls.aspectRatio)&&void 0!==_defaultControls$aspe?_defaultControls$aspe:dimensions_panel_DEFAULT_CONTROLS.aspectRatio})]})}var is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js");const use_popover_scroll=function usePopoverScroll(scrollableRef){return(0,use_ref_effect.A)((node=>{if(!scrollableRef)return;function onWheel(event){const{deltaX,deltaY}=event;scrollableRef.current.scrollBy(deltaX,deltaY)}const options={passive:!0};return node.addEventListener("wheel",onWheel,options),()=>{node.removeEventListener("wheel",onWheel,options)}}),[scrollableRef])},BLOCK_SELECTOR=".block-editor-block-list__block",APPENDER_SELECTOR=".block-list-appender",BLOCK_APPENDER_CLASS=".block-editor-button-block-appender";function isInSameBlock(a,b){return a.closest(BLOCK_SELECTOR)===b.closest(BLOCK_SELECTOR)}function isInsideRootBlock(blockElement,element){return element.closest([BLOCK_SELECTOR,APPENDER_SELECTOR,BLOCK_APPENDER_CLASS].join(","))===blockElement}function getBlockClientId(node){for(;node&&node.nodeType!==node.ELEMENT_NODE;)node=node.parentNode;if(!node)return;const blockNode=node.closest(BLOCK_SELECTOR);return blockNode?blockNode.id.slice(6):void 0}function rectUnion(rect1,rect2){const left=Math.min(rect1.left,rect2.left),right=Math.max(rect1.right,rect2.right),bottom=Math.max(rect1.bottom,rect2.bottom),top=Math.min(rect1.top,rect2.top);return new window.DOMRectReadOnly(left,top,right-left,bottom-top)}function isElementVisible(element){const viewport=element.ownerDocument.defaultView;if(!viewport)return!1;if(element.classList.contains("components-visually-hidden"))return!1;const bounds=element.getBoundingClientRect();if(0===bounds.width||0===bounds.height)return!1;if(element.checkVisibility)return element.checkVisibility?.({opacityProperty:!0,contentVisibilityAuto:!0,visibilityProperty:!0});const style=viewport.getComputedStyle(element);return"none"!==style.display&&"hidden"!==style.visibility&&"0"!==style.opacity}function isScrollable(element){const style=window.getComputedStyle(element);return"auto"===style.overflowX||"scroll"===style.overflowX||"auto"===style.overflowY||"scroll"===style.overflowY}function getVisibleElementBounds(element){const viewport=element.ownerDocument.defaultView;if(!viewport)return new window.DOMRectReadOnly;let bounds=element.getBoundingClientRect();const stack=[element];let currentElement;for(;currentElement=stack.pop();)for(const child of currentElement.children)if(isElementVisible(child)){let childBounds=child.getBoundingClientRect();isScrollable(currentElement)&&(childBounds=currentElement.getBoundingClientRect()),bounds=rectUnion(bounds,childBounds),stack.push(child)}const left=Math.max(bounds.left,0),right=Math.min(bounds.right,viewport.innerWidth);return bounds=new window.DOMRectReadOnly(left,bounds.top,right-left,bounds.height),bounds}const MAX_POPOVER_RECOMPUTE_COUNTER=Number.MAX_SAFE_INTEGER;const PrivateBlockPopover=(0,react.forwardRef)((function BlockPopover({clientId,bottomClientId,children,__unstablePopoverSlot,__unstableContentRef,shift=!0,...props},ref){const selectedElement=useBlockElement(clientId),lastSelectedElement=useBlockElement(null!=bottomClientId?bottomClientId:clientId),mergedRefs=(0,use_merge_refs.A)([ref,use_popover_scroll(__unstableContentRef)]),[popoverDimensionsRecomputeCounter,forceRecomputePopoverDimensions]=(0,react.useReducer)((s=>(s+1)%MAX_POPOVER_RECOMPUTE_COUNTER),0);(0,react.useLayoutEffect)((()=>{if(!selectedElement)return;const observer=new window.MutationObserver(forceRecomputePopoverDimensions);return observer.observe(selectedElement,{attributes:!0}),()=>{observer.disconnect()}}),[selectedElement]);const popoverAnchor=(0,react.useMemo)((()=>{if(!(popoverDimensionsRecomputeCounter<0||!selectedElement||bottomClientId&&!lastSelectedElement))return{getBoundingClientRect:()=>lastSelectedElement?rectUnion(getVisibleElementBounds(selectedElement),getVisibleElementBounds(lastSelectedElement)):getVisibleElementBounds(selectedElement),contextElement:selectedElement}}),[popoverDimensionsRecomputeCounter,selectedElement,bottomClientId,lastSelectedElement]);return!selectedElement||bottomClientId&&!lastSelectedElement?null:(0,jsx_runtime.jsx)(popover.Ay,{ref:mergedRefs,animate:!1,focusOnMount:!1,anchor:popoverAnchor,__unstableSlotName:__unstablePopoverSlot,inline:!__unstablePopoverSlot,placement:"top-start",resize:!1,flip:!1,shift,...props,className:(0,clsx.A)("block-editor-block-popover",props.className),variant:"unstyled",children})})),block_popover=(0,react.forwardRef)((({clientId,bottomClientId,children,...props},ref)=>(0,jsx_runtime.jsx)(PrivateBlockPopover,{...props,bottomClientId,clientId,__unstableContentRef:void 0,__unstablePopoverSlot:void 0,ref,children})));function CoverContainer({selectedElement,additionalStyles={},children}){const[width,setWidth]=(0,react.useState)(selectedElement.offsetWidth),[height,setHeight]=(0,react.useState)(selectedElement.offsetHeight);(0,react.useEffect)((()=>{const observer=new window.ResizeObserver((()=>{setWidth(selectedElement.offsetWidth),setHeight(selectedElement.offsetHeight)}));return observer.observe(selectedElement,{box:"border-box"}),()=>observer.disconnect()}),[selectedElement]);const style=(0,react.useMemo)((()=>({position:"absolute",width,height,...additionalStyles})),[width,height,additionalStyles]);return(0,jsx_runtime.jsx)("div",{style,children})}const cover=(0,react.forwardRef)((function BlockPopoverCover({clientId,bottomClientId,children,shift=!1,additionalStyles,...props},ref){var _bottomClientId;null!==(_bottomClientId=bottomClientId)&&void 0!==_bottomClientId||(bottomClientId=clientId);const selectedElement=useBlockElement(clientId);return(0,jsx_runtime.jsx)(PrivateBlockPopover,{ref,clientId,bottomClientId,shift,...props,children:selectedElement&&clientId===bottomClientId?(0,jsx_runtime.jsx)(CoverContainer,{selectedElement,additionalStyles,children}):children})}));function SpacingVisualizer({clientId,value,computeStyle,forceShow}){const blockElement=useBlockElement(clientId),[style,updateStyle]=(0,react.useReducer)((()=>computeStyle(blockElement)));(0,react.useLayoutEffect)((()=>{blockElement&&window.requestAnimationFrame((()=>window.requestAnimationFrame(updateStyle)))}),[blockElement,value]);const previousValueRef=(0,react.useRef)(value),[isActive,setIsActive]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{if((0,is_shallow_equal_build_module.Ay)(value,previousValueRef.current)||forceShow)return;setIsActive(!0),previousValueRef.current=value;const timeout=setTimeout((()=>{setIsActive(!1)}),400);return()=>{setIsActive(!1),clearTimeout(timeout)}}),[value,forceShow]),isActive||forceShow?(0,jsx_runtime.jsx)(cover,{clientId,__unstablePopoverSlot:"block-toolbar",children:(0,jsx_runtime.jsx)("div",{className:"block-editor__spacing-visualizer",style})}):null}function getComputedCSS(element,property){return element.ownerDocument.defaultView.getComputedStyle(element).getPropertyValue(property)}function MarginVisualizer({clientId,value,forceShow}){return(0,jsx_runtime.jsx)(SpacingVisualizer,{clientId,value:value?.spacing?.margin,computeStyle:blockElement=>{const top=getComputedCSS(blockElement,"margin-top"),right=getComputedCSS(blockElement,"margin-right"),bottom=getComputedCSS(blockElement,"margin-bottom"),left=getComputedCSS(blockElement,"margin-left");return{borderTopWidth:top,borderRightWidth:right,borderBottomWidth:bottom,borderLeftWidth:left,top:top?`-${top}`:0,right:right?`-${right}`:0,bottom:bottom?`-${bottom}`:0,left:left?`-${left}`:0}},forceShow})}function PaddingVisualizer({clientId,value,forceShow}){return(0,jsx_runtime.jsx)(SpacingVisualizer,{clientId,value:value?.spacing?.padding,computeStyle:blockElement=>({borderTopWidth:getComputedCSS(blockElement,"padding-top"),borderRightWidth:getComputedCSS(blockElement,"padding-right"),borderBottomWidth:getComputedCSS(blockElement,"padding-bottom"),borderLeftWidth:getComputedCSS(blockElement,"padding-left")}),forceShow})}const DIMENSIONS_SUPPORT_KEY="dimensions",SPACING_SUPPORT_KEY="spacing";function DimensionsInspectorControl({children,resetAllFilter}){const attributesResetAllFilter=(0,react.useCallback)((attributes=>{const existingStyle=attributes.style,updatedStyle=resetAllFilter(existingStyle);return{...attributes,style:updatedStyle}}),[resetAllFilter]);return(0,jsx_runtime.jsx)(inspector_controls,{group:"dimensions",resetAllFilter:attributesResetAllFilter,children})}function dimensions_DimensionsPanel({clientId,name,setAttributes,settings}){const isEnabled=useHasDimensionsPanel(settings),value=(0,use_select.A)((select=>select(store_store).getBlockAttributes(clientId)?.style),[clientId]),[visualizedProperty,setVisualizedProperty]=function useVisualizer(){const[property,setProperty]=(0,react.useState)(!1),{hideBlockInterface,showBlockInterface}=unlock((0,use_dispatch.A)(store_store));return(0,react.useEffect)((()=>{property?hideBlockInterface():showBlockInterface()}),[property,showBlockInterface,hideBlockInterface]),[property,setProperty]}();if(!isEnabled)return null;const defaultControls={...(0,build_module.bI)(name,[DIMENSIONS_SUPPORT_KEY,"__experimentalDefaultControls"]),...(0,build_module.bI)(name,[SPACING_SUPPORT_KEY,"__experimentalDefaultControls"])};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DimensionsPanel,{as:DimensionsInspectorControl,panelId:clientId,settings,value,onChange:newStyle=>{setAttributes({style:utils_cleanEmptyObject(newStyle)})},defaultControls,onVisualize:setVisualizedProperty}),!!settings?.spacing?.padding&&(0,jsx_runtime.jsx)(PaddingVisualizer,{forceShow:"padding"===visualizedProperty,clientId,value}),!!settings?.spacing?.margin&&(0,jsx_runtime.jsx)(MarginVisualizer,{forceShow:"margin"===visualizedProperty,clientId,value})]})}function hasDimensionsSupport(blockName,feature="any"){if("web"!==platform.A.OS)return!1;const support=(0,build_module.bI)(blockName,DIMENSIONS_SUPPORT_KEY);return!0===support||("any"===feature?!(!support?.aspectRatio&&!support?.minHeight):!!support?.[feature])}const dimensions={useBlockProps:function dimensions_useBlockProps({name,minHeight,style}){if(!hasDimensionsSupport(name,"aspectRatio")||shouldSkipSerialization(name,DIMENSIONS_SUPPORT_KEY,"aspectRatio"))return{};const className=(0,clsx.A)({"has-aspect-ratio":!!style?.dimensions?.aspectRatio}),inlineStyleOverrides={};style?.dimensions?.aspectRatio?inlineStyleOverrides.minHeight="unset":(minHeight||style?.dimensions?.minHeight)&&(inlineStyleOverrides.aspectRatio="unset");return{className,style:inlineStyleOverrides}},attributeKeys:["minHeight","style"],hasSupport:name=>hasDimensionsSupport(name,"aspectRatio")};const styleSupportKeys=[...TYPOGRAPHY_SUPPORT_KEYS,BORDER_SUPPORT_KEY,COLOR_SUPPORT_KEY,DIMENSIONS_SUPPORT_KEY,BACKGROUND_SUPPORT_KEY,SPACING_SUPPORT_KEY,SHADOW_SUPPORT_KEY],hasStyleSupport=nameOrType=>styleSupportKeys.some((key=>(0,build_module.pN)(nameOrType,key)));function getInlineStyles(styles={}){const output={};return(0,style_engine_build_module.np)(styles).forEach((rule=>{output[rule.key]=rule.value})),output}const skipSerializationPathsEdit={[`${BORDER_SUPPORT_KEY}.__experimentalSkipSerialization`]:["border"],[`${COLOR_SUPPORT_KEY}.__experimentalSkipSerialization`]:[COLOR_SUPPORT_KEY],[`${TYPOGRAPHY_SUPPORT_KEY}.__experimentalSkipSerialization`]:[TYPOGRAPHY_SUPPORT_KEY],[`${DIMENSIONS_SUPPORT_KEY}.__experimentalSkipSerialization`]:[DIMENSIONS_SUPPORT_KEY],[`${SPACING_SUPPORT_KEY}.__experimentalSkipSerialization`]:[SPACING_SUPPORT_KEY],[`${SHADOW_SUPPORT_KEY}.__experimentalSkipSerialization`]:[SHADOW_SUPPORT_KEY]},skipSerializationPathsSave={...skipSerializationPathsEdit,[`${DIMENSIONS_SUPPORT_KEY}.aspectRatio`]:[`${DIMENSIONS_SUPPORT_KEY}.aspectRatio`],[`${BACKGROUND_SUPPORT_KEY}`]:[BACKGROUND_SUPPORT_KEY]},skipSerializationPathsSaveChecks={[`${DIMENSIONS_SUPPORT_KEY}.aspectRatio`]:!0,[`${BACKGROUND_SUPPORT_KEY}`]:!0},renamedFeatures={gradients:"gradient"};function omitStyle(style,paths,preserveReference=!1){if(!style)return style;let newStyle=style;return preserveReference||(newStyle=JSON.parse(JSON.stringify(style))),Array.isArray(paths)||(paths=[paths]),paths.forEach((path=>{if(Array.isArray(path)||(path=path.split(".")),path.length>1){const[firstSubpath,...restPath]=path;omitStyle(newStyle[firstSubpath],[restPath],!0)}else 1===path.length&&delete newStyle[path[0]]})),newStyle}function style_addSaveProps(props,blockNameOrType,attributes,skipPaths=skipSerializationPathsSave){if(!hasStyleSupport(blockNameOrType))return props;let{style}=attributes;return Object.entries(skipPaths).forEach((([indicator,path])=>{const skipSerialization=skipSerializationPathsSaveChecks[indicator]||(0,build_module.bI)(blockNameOrType,indicator);!0===skipSerialization&&(style=omitStyle(style,path)),Array.isArray(skipSerialization)&&skipSerialization.forEach((featureName=>{const feature=renamedFeatures[featureName]||featureName;style=omitStyle(style,[[...path,feature]])}))})),props.style={...getInlineStyles(style),...props.style},props}const style={edit:function BlockStyleControls({clientId,name,setAttributes,__unstableParentLayout}){const settings=useBlockSettings(name,__unstableParentLayout),blockEditingMode=useBlockEditingMode(),passedProps={clientId,name,setAttributes,settings:{...settings,typography:{...settings.typography,textAlign:!1}}};return"default"!==blockEditingMode?null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ColorEdit,{...passedProps}),(0,jsx_runtime.jsx)(background_BackgroundImagePanel,{...passedProps}),(0,jsx_runtime.jsx)(typography_TypographyPanel,{...passedProps}),(0,jsx_runtime.jsx)(border_BorderPanel,{...passedProps}),(0,jsx_runtime.jsx)(dimensions_DimensionsPanel,{...passedProps})]})},hasSupport:hasStyleSupport,addSaveProps:style_addSaveProps,attributeKeys:["style"],useBlockProps:function style_useBlockProps({name,style}){const blockElementsContainerIdentifier=(0,use_instance_id.A)(STYLE_BLOCK_PROPS_REFERENCE,"wp-elements"),baseElementSelector=`.${blockElementsContainerIdentifier}`,blockElementStyles=style?.elements,styles=(0,react.useMemo)((()=>{if(!blockElementStyles)return;const elementCSSRules=[];return elementTypes.forEach((({elementType,pseudo,elements})=>{if(shouldSkipSerialization(name,COLOR_SUPPORT_KEY,elementType))return;const elementStyles=blockElementStyles?.[elementType];if(elementStyles){const selector=scopeSelector(baseElementSelector,build_module.dB[elementType]);elementCSSRules.push((0,style_engine_build_module.zn)(elementStyles,{selector})),pseudo&&pseudo.forEach((pseudoSelector=>{elementStyles[pseudoSelector]&&elementCSSRules.push((0,style_engine_build_module.zn)(elementStyles[pseudoSelector],{selector:scopeSelector(baseElementSelector,`${build_module.dB[elementType]}${pseudoSelector}`)}))}))}elements&&elements.forEach((element=>{blockElementStyles[element]&&elementCSSRules.push((0,style_engine_build_module.zn)(blockElementStyles[element],{selector:scopeSelector(baseElementSelector,build_module.dB[element])}))}))})),elementCSSRules.length>0?elementCSSRules.join(""):void 0}),[baseElementSelector,blockElementStyles,name]);return useStyleOverride({css:styles}),style_addSaveProps({className:blockElementsContainerIdentifier},name,{style},skipSerializationPathsEdit)}},elementTypes=[{elementType:"button"},{elementType:"link",pseudo:[":hover"]},{elementType:"heading",elements:["h1","h2","h3","h4","h5","h6"]}],STYLE_BLOCK_PROPS_REFERENCE={};(0,hooks_build_module.U2)("blocks.registerBlockType","core/style/addAttribute",(function style_addAttribute(settings){return hasStyleSupport(settings)?(settings.attributes.style||Object.assign(settings.attributes,{style:{type:"object"}}),settings):settings}));(0,hooks_build_module.U2)("blocks.registerBlockType","core/settings/addAttribute",(function settings_addAttribute(settings){return blockType=settings,(0,build_module.pN)(blockType,"__experimentalSettings",!1)?(settings?.attributes?.settings||(settings.attributes={...settings.attributes,settings:{type:"object"}}),settings):settings;var blockType}));var swatch=__webpack_require__("./packages/icons/build-module/library/swatch.js"),duotone_picker_utils=__webpack_require__("./packages/components/build-module/duotone-picker/utils.js");const duotone_swatch=function DuotoneSwatch({values}){return values?(0,jsx_runtime.jsx)(color_indicator.A,{colorValue:(0,duotone_picker_utils.yb)(values,"135deg")}):(0,jsx_runtime.jsx)(components_build_module_icon.A,{icon:swatch.A})};var duotone_picker=__webpack_require__("./packages/components/build-module/duotone-picker/duotone-picker.js");const library_filter=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M12 4 4 19h16L12 4zm0 3.2 5.5 10.3H12V7.2z"})});const duotone_control=function DuotoneControl({id:idProp,colorPalette,duotonePalette,disableCustomColors,disableCustomDuotone,value,onChange}){let toolbarIcon;toolbarIcon="unset"===value?(0,jsx_runtime.jsx)(color_indicator.A,{className:"block-editor-duotone-control__unset-indicator"}):value?(0,jsx_runtime.jsx)(duotone_swatch,{values:value}):(0,jsx_runtime.jsx)(build_module_icon.A,{icon:library_filter});const actionLabel=(0,i18n_build_module.__)("Apply duotone filter"),descriptionId=`${(0,use_instance_id.A)(DuotoneControl,"duotone-control",idProp)}__description`;return(0,jsx_runtime.jsx)(dropdown.A,{popoverProps:{className:"block-editor-duotone-control__popover",headerTitle:(0,i18n_build_module.__)("Duotone")},renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(toolbar_button.A,{showTooltip:!0,onClick:onToggle,"aria-haspopup":"true","aria-expanded":isOpen,onKeyDown:event=>{isOpen||event.keyCode!==keycodes_build_module.PX||(event.preventDefault(),onToggle())},label:actionLabel,icon:toolbarIcon}),renderContent:()=>(0,jsx_runtime.jsxs)(menu_group.A,{label:(0,i18n_build_module.__)("Duotone"),children:[(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("Create a two-tone color effect without losing your original image.")}),(0,jsx_runtime.jsx)(duotone_picker.A,{"aria-label":actionLabel,"aria-describedby":descriptionId,colorPalette,duotonePalette,disableCustomColors,disableCustomDuotone,value,onChange})]})})};function getDuotoneUnsetStylesheet(selector){return`${selector}{filter:none}`}function getDuotoneStylesheet(selector,id){return`${selector}{filter:url(#${id})}`}function getDuotoneFilter(id,colors){const values=function getValuesFromColors(colors=[]){const values={r:[],g:[],b:[],a:[]};return colors.forEach((color=>{const rgbColor=(0,colord.Mj)(color).toRgb();values.r.push(rgbColor.r/255),values.g.push(rgbColor.g/255),values.b.push(rgbColor.b/255),values.a.push(rgbColor.a)})),values}(colors);return`\n<svg\n\txmlns:xlink="http://www.w3.org/1999/xlink"\n\tviewBox="0 0 0 0"\n\twidth="0"\n\theight="0"\n\tfocusable="false"\n\trole="none"\n\taria-hidden="true"\n\tstyle="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"\n>\n\t<defs>\n\t\t<filter id="${id}">\n\t\t\t\x3c!--\n\t\t\t\tUse sRGB instead of linearRGB so transparency looks correct.\n\t\t\t\tUse perceptual brightness to convert to grayscale.\n\t\t\t--\x3e\n\t\t\t<feColorMatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "></feColorMatrix>\n\t\t\t\x3c!-- Use sRGB instead of linearRGB to be consistent with how CSS gradients work. --\x3e\n\t\t\t<feComponentTransfer color-interpolation-filters="sRGB">\n\t\t\t\t<feFuncR type="table" tableValues="${values.r.join(" ")}"></feFuncR>\n\t\t\t\t<feFuncG type="table" tableValues="${values.g.join(" ")}"></feFuncG>\n\t\t\t\t<feFuncB type="table" tableValues="${values.b.join(" ")}"></feFuncB>\n\t\t\t\t<feFuncA type="table" tableValues="${values.a.join(" ")}"></feFuncA>\n\t\t\t</feComponentTransfer>\n\t\t\t\x3c!-- Re-mask the image with the original transparency since the feColorMatrix above loses that information. --\x3e\n\t\t\t<feComposite in2="SourceGraphic" operator="in"></feComposite>\n\t\t</filter>\n\t</defs>\n</svg>`}function getBlockCSSSelector(blockType,target="root",options={}){if(!target)return null;const{fallback=!1}=options,{name,selectors,supports}=blockType,hasSelectors=selectors&&Object.keys(selectors).length>0,path=Array.isArray(target)?target.join("."):target;let rootSelector=null;if(rootSelector=hasSelectors&&selectors.root?selectors?.root:supports?.__experimentalSelector?supports.__experimentalSelector:".wp-block-"+name.replace("core/","").replace("/","-"),"root"===path)return rootSelector;const pathArray=Array.isArray(target)?target:target.split(".");if(1===pathArray.length){const fallbackSelector=fallback?rootSelector:null;if(hasSelectors){return getValueFromObjectPath(selectors,`${path}.root`,null)||getValueFromObjectPath(selectors,path,null)||fallbackSelector}const featureSelector=getValueFromObjectPath(supports,`${path}.__experimentalSelector`,null);return featureSelector?scopeSelector(rootSelector,featureSelector):fallbackSelector}let subfeatureSelector;return hasSelectors&&(subfeatureSelector=getValueFromObjectPath(selectors,path,null)),subfeatureSelector||(fallback?getBlockCSSSelector(blockType,pathArray[0],options):null)}const filters_panel_EMPTY_ARRAY=[];function useMultiOriginColorPresets(settings,{presetSetting,defaultSetting}){const disableDefault=!settings?.color?.[defaultSetting],userPresets=settings?.color?.[presetSetting]?.custom||filters_panel_EMPTY_ARRAY,themePresets=settings?.color?.[presetSetting]?.theme||filters_panel_EMPTY_ARRAY,defaultPresets=settings?.color?.[presetSetting]?.default||filters_panel_EMPTY_ARRAY;return(0,react.useMemo)((()=>[...userPresets,...themePresets,...disableDefault?filters_panel_EMPTY_ARRAY:defaultPresets]),[disableDefault,userPresets,themePresets,defaultPresets])}function useHasFiltersPanel(settings){return useHasDuotoneControl(settings)}function useHasDuotoneControl(settings){return settings.color.customDuotone||settings.color.defaultDuotone||settings.color.duotone.length>0}function FiltersToolsPanel({resetAllFilter,onChange,value,panelId,children}){const dropdownMenuProps=useToolsPanelDropdownMenuProps();return(0,jsx_runtime.jsx)(tools_panel_component.A,{label:(0,i18n_build_module._x)("Filters","Name for applying graphical effects"),resetAll:()=>{const updatedValue=resetAllFilter(value);onChange(updatedValue)},panelId,dropdownMenuProps,children})}const filters_panel_DEFAULT_CONTROLS={duotone:!0},filters_panel_popoverProps={placement:"left-start",offset:36,shift:!0,className:"block-editor-duotone-control__popover",headerTitle:(0,i18n_build_module.__)("Duotone")},LabeledColorIndicator=({indicator,label})=>(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-start",children:[(0,jsx_runtime.jsx)(z_stack_component.A,{isLayered:!1,offset:-8,children:(0,jsx_runtime.jsx)(component.A,{expanded:!1,children:"unset"!==indicator&&indicator?(0,jsx_runtime.jsx)(duotone_swatch,{values:indicator}):(0,jsx_runtime.jsx)(color_indicator.A,{className:"block-editor-duotone-control__unset-indicator"})})}),(0,jsx_runtime.jsx)(flex_item_component.A,{title:label,children:label})]});function FiltersPanel({as:Wrapper=FiltersToolsPanel,value,onChange,inheritedValue=value,settings,panelId,defaultControls=filters_panel_DEFAULT_CONTROLS}){const hasDuotoneEnabled=useHasDuotoneControl(settings),duotonePalette=useMultiOriginColorPresets(settings,{presetSetting:"duotone",defaultSetting:"defaultDuotone"}),colorPalette=useMultiOriginColorPresets(settings,{presetSetting:"palette",defaultSetting:"defaultPalette"}),duotone=(rawValue=inheritedValue?.filter?.duotone,getValueFromVariable({settings},"",rawValue));var rawValue;const setDuotone=newValue=>{const duotonePreset=duotonePalette.find((({colors})=>colors===newValue)),settedValue=duotonePreset?`var:preset|duotone|${duotonePreset.slug}`:newValue;onChange(setImmutably(value,["filter","duotone"],settedValue))},resetAllFilter=(0,react.useCallback)((previousValue=>({...previousValue,filter:{...previousValue.filter,duotone:void 0}})),[]);return(0,jsx_runtime.jsx)(Wrapper,{resetAllFilter,value,onChange,panelId,children:hasDuotoneEnabled&&(0,jsx_runtime.jsx)(tools_panel_item_component.A,{label:(0,i18n_build_module.__)("Duotone"),hasValue:()=>!!value?.filter?.duotone,onDeselect:()=>setDuotone(void 0),isShownByDefault:defaultControls.duotone,panelId,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps:filters_panel_popoverProps,className:"block-editor-global-styles-filters-panel__dropdown",renderToggle:({onToggle,isOpen})=>{const toggleProps={onClick:onToggle,className:(0,clsx.A)({"is-open":isOpen}),"aria-expanded":isOpen};return(0,jsx_runtime.jsx)(item_group_component.A,{isBordered:!0,isSeparated:!0,children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,...toggleProps,children:(0,jsx_runtime.jsx)(LabeledColorIndicator,{indicator:duotone,label:(0,i18n_build_module.__)("Duotone")})})})},renderContent:()=>(0,jsx_runtime.jsx)(dropdown_content_wrapper.A,{paddingSize:"small",children:(0,jsx_runtime.jsxs)(menu_group.A,{label:(0,i18n_build_module.__)("Duotone"),children:[(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("Create a two-tone color effect without losing your original image.")}),(0,jsx_runtime.jsx)(duotone_picker.A,{colorPalette,duotonePalette,disableCustomColors:!0,disableCustomDuotone:!0,value:duotone,onChange:setDuotone})]})})})})})}const duotone_EMPTY_ARRAY=[],isSafari=window?.navigator.userAgent&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")&&!window.navigator.userAgent.includes("Chromium");function useMultiOriginPresets({presetSetting,defaultSetting}){const[enableDefault,userPresets,themePresets,defaultPresets]=use_settings_useSettings(defaultSetting,`${presetSetting}.custom`,`${presetSetting}.theme`,`${presetSetting}.default`);return(0,react.useMemo)((()=>[...userPresets||duotone_EMPTY_ARRAY,...themePresets||duotone_EMPTY_ARRAY,...enableDefault&&defaultPresets||duotone_EMPTY_ARRAY]),[enableDefault,userPresets,themePresets,defaultPresets])}function getColorsFromDuotonePreset(duotone,duotonePalette){if(!duotone)return;const preset=duotonePalette?.find((({slug})=>duotone===`var:preset|duotone|${slug}`));return preset?preset.colors:void 0}(0,colord.X$)([names.A]);const duotone={shareWithChildBlocks:!0,edit:function DuotonePanelPure({style,setAttributes,name}){const duotoneStyle=style?.color?.duotone,settings=useBlockSettings(name),blockEditingMode=useBlockEditingMode(),duotonePalette=useMultiOriginPresets({presetSetting:"color.duotone",defaultSetting:"color.defaultDuotone"}),colorPalette=useMultiOriginPresets({presetSetting:"color.palette",defaultSetting:"color.defaultPalette"}),[enableCustomColors,enableCustomDuotone]=use_settings_useSettings("color.custom","color.customDuotone"),disableCustomColors=!enableCustomColors,disableCustomDuotone=!enableCustomDuotone||0===colorPalette?.length&&disableCustomColors;if(0===duotonePalette?.length&&disableCustomDuotone)return null;if("default"!==blockEditingMode)return null;const duotonePresetOrColors=Array.isArray(duotoneStyle)?duotoneStyle:getColorsFromDuotonePreset(duotoneStyle,duotonePalette);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(inspector_controls,{group:"filter",children:(0,jsx_runtime.jsx)(FiltersPanel,{value:{filter:{duotone:duotonePresetOrColors}},onChange:newDuotone=>{const newStyle={...style,color:{...newDuotone?.filter}};setAttributes({style:newStyle})},settings})}),(0,jsx_runtime.jsx)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0,children:(0,jsx_runtime.jsx)(duotone_control,{duotonePalette,colorPalette,disableCustomDuotone,disableCustomColors,value:duotonePresetOrColors,onChange:newDuotone=>{const maybePreset=function getDuotonePresetFromColors(colors,duotonePalette){if(!colors||!Array.isArray(colors))return;const preset=duotonePalette?.find((duotonePreset=>duotonePreset?.colors?.every(((val,index)=>val===colors[index]))));return preset?`var:preset|duotone|${preset.slug}`:void 0}(newDuotone,duotonePalette),newStyle={...style,color:{...style?.color,duotone:null!=maybePreset?maybePreset:newDuotone}};setAttributes({style:newStyle})},settings})})]})},useBlockProps:function duotone_useBlockProps({clientId,name,style}){const id=(0,use_instance_id.A)(DUOTONE_BLOCK_PROPS_REFERENCE),selector=(0,react.useMemo)((()=>{const blockType=(0,build_module.E7)(name);if(blockType){if(!(0,build_module.bI)(blockType,"filter.duotone",!1))return null;const experimentalDuotone=(0,build_module.bI)(blockType,"color.__experimentalDuotone",!1);if(experimentalDuotone){const rootSelector=getBlockCSSSelector(blockType);return"string"==typeof experimentalDuotone?scopeSelector(rootSelector,experimentalDuotone):rootSelector}return getBlockCSSSelector(blockType,"filter.duotone",{fallback:!0})}}),[name]),attribute=style?.color?.duotone,filterClass=`wp-duotone-${id}`,shouldRender=selector&&attribute;return useDuotoneStyles({clientId,id:filterClass,selector,attribute}),{className:shouldRender?filterClass:""}},attributeKeys:["style"],hasSupport:name=>(0,build_module.pN)(name,"filter.duotone")};function useDuotoneStyles({clientId,id:filterId,selector:duotoneSelector,attribute:duotoneAttr}){const duotonePalette=useMultiOriginPresets({presetSetting:"color.duotone",defaultSetting:"color.defaultDuotone"}),isCustom=Array.isArray(duotoneAttr),duotonePreset=isCustom?void 0:getColorsFromDuotonePreset(duotoneAttr,duotonePalette),isPreset="string"==typeof duotoneAttr&&duotonePreset;let colors=null;isPreset?colors=duotonePreset:("string"==typeof duotoneAttr&&!isPreset||isCustom)&&(colors=duotoneAttr);const selector=duotoneSelector.split(",").map((selectorPart=>`.${filterId}${selectorPart.trim()}`)).join(", "),isValidFilter=Array.isArray(colors)||"unset"===colors;usePrivateStyleOverride(isValidFilter?{css:"unset"!==colors?getDuotoneStylesheet(selector,filterId):getDuotoneUnsetStylesheet(selector),__unstableType:"presets"}:void 0),usePrivateStyleOverride(isValidFilter?{assets:"unset"!==colors?getDuotoneFilter(filterId,colors):"",__unstableType:"svgs"}:void 0);const blockElement=useBlockElement(clientId);(0,react.useEffect)((()=>{if(isValidFilter&&blockElement&&isSafari){const display=blockElement.style.display;blockElement.style.display="inline-block",blockElement.offsetHeight,blockElement.style.display=display}}),[isValidFilter,blockElement,colors])}const DUOTONE_BLOCK_PROPS_REFERENCE={};function useBlockDisplayInformation(clientId){return(0,use_select.A)((select=>{if(!clientId)return null;const{getBlockName,getBlockAttributes}=select(store_store),{getBlockType,getActiveBlockVariation}=select(build_module.M_),blockName=getBlockName(clientId),blockType=getBlockType(blockName);if(!blockType)return null;const attributes=getBlockAttributes(clientId),match=getActiveBlockVariation(blockName,attributes),isSynced=(0,build_module.tk)(blockType)||(0,build_module.gc)(blockType),title=(isSynced?(0,build_module.Y0)(blockType,attributes):void 0)||blockType.title,positionLabel=function getPositionTypeLabel(attributes){const positionType=attributes?.style?.position?.type;return"sticky"===positionType?(0,i18n_build_module.__)("Sticky"):"fixed"===positionType?(0,i18n_build_module.__)("Fixed"):null}(attributes),blockTypeInfo={isSynced,title,icon:blockType.icon,description:blockType.description,anchor:attributes?.anchor,positionLabel,positionType:attributes?.style?.position?.type,name:attributes?.metadata?.name};return match?{isSynced,title:match.title||blockType.title,icon:match.icon||blockType.icon,description:match.description||blockType.description,anchor:attributes?.anchor,positionLabel,positionType:attributes?.style?.position?.type,name:attributes?.metadata?.name}:blockTypeInfo}),[clientId])}(0,hooks_build_module.U2)("blocks.registerBlockType","core/editor/duotone/add-attributes",(function addDuotoneAttributes(settings){return(0,build_module.pN)(settings,"filter.duotone")?(settings.attributes.style||Object.assign(settings.attributes,{style:{type:"object"}}),settings):settings}));const POSITION_SUPPORT_KEY="position",position_DEFAULT_OPTION={key:"default",value:"",name:(0,i18n_build_module.__)("Default")},STICKY_OPTION={key:"sticky",value:"sticky",name:(0,i18n_build_module._x)("Sticky","Name for the value of the CSS position property"),hint:(0,i18n_build_module.__)("The block will stick to the top of the window instead of scrolling.")},FIXED_OPTION={key:"fixed",value:"fixed",name:(0,i18n_build_module._x)("Fixed","Name for the value of the CSS position property"),hint:(0,i18n_build_module.__)("The block will not move when the page is scrolled.")},POSITION_SIDES=["top","right","bottom","left"],VALID_POSITION_TYPES=["sticky","fixed"];function hasStickyOrFixedPositionValue(attributes){const positionType=attributes?.style?.position?.type;return"sticky"===positionType||"fixed"===positionType}function useIsPositionDisabled({name:blockName}={}){const[allowFixed,allowSticky]=use_settings_useSettings("position.fixed","position.sticky"),isDisabled=!allowFixed&&!allowSticky;return!function hasPositionSupport(blockType){return!!(0,build_module.bI)(blockType,POSITION_SUPPORT_KEY)}(blockName)||isDisabled}function PositionPanelPure({style={},clientId,name:blockName,setAttributes}){const allowFixed=function hasFixedPositionSupport(blockType){const support=(0,build_module.bI)(blockType,POSITION_SUPPORT_KEY);return!(!0!==support&&!support?.fixed)}(blockName),allowSticky=function hasStickyPositionSupport(blockType){const support=(0,build_module.bI)(blockType,POSITION_SUPPORT_KEY);return!(!0!==support&&!support?.sticky)}(blockName),value=style?.position?.type,{firstParentClientId}=(0,use_select.A)((select=>{const{getBlockParents}=select(store_store),parents=getBlockParents(clientId);return{firstParentClientId:parents[parents.length-1]}}),[clientId]),blockInformation=useBlockDisplayInformation(firstParentClientId),stickyHelpText=allowSticky&&value===STICKY_OPTION.value&&blockInformation?(0,i18n_build_module.nv)((0,i18n_build_module.__)("The block will stick to the scrollable area of the parent %s block."),blockInformation.title):null,options=(0,react.useMemo)((()=>{const availableOptions=[position_DEFAULT_OPTION];return(allowSticky||value===STICKY_OPTION.value)&&availableOptions.push(STICKY_OPTION),(allowFixed||value===FIXED_OPTION.value)&&availableOptions.push(FIXED_OPTION),availableOptions}),[allowFixed,allowSticky,value]),selectedOption=value&&options.find((option=>option.value===value))||position_DEFAULT_OPTION;return platform.A.select({web:options.length>1?(0,jsx_runtime.jsx)(inspector_controls,{group:"position",children:(0,jsx_runtime.jsx)(base_control.Ay,{__nextHasNoMarginBottom:!0,help:stickyHelpText,children:(0,jsx_runtime.jsx)(custom_select_control,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Position"),hideLabelFromVision:!0,describedBy:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Currently selected position: %s"),selectedOption.name),options,value:selectedOption,onChange:({selectedItem})=>{(next=>{const newStyle={...style,position:{...style?.position,type:next,top:"sticky"===next||"fixed"===next?"0px":void 0}};setAttributes({style:utils_cleanEmptyObject(newStyle)})})(selectedItem.value)},size:"__unstable-large"})})}):null,native:null})}const position={edit:function Edit(props){return useIsPositionDisabled(props)?null:(0,jsx_runtime.jsx)(PositionPanelPure,{...props})},useBlockProps:function position_useBlockProps({name,style}){const hasPositionBlockSupport=(0,build_module.pN)(name,POSITION_SUPPORT_KEY),isPositionDisabled=useIsPositionDisabled({name}),allowPositionStyles=hasPositionBlockSupport&&!isPositionDisabled,id=(0,use_instance_id.A)(POSITION_BLOCK_PROPS_REFERENCE),positionSelector=`.wp-container-${id}.wp-container-${id}`;let css;allowPositionStyles&&(css=function getPositionCSS({selector,style}){let output="";const{type:positionType}=style?.position||{};return VALID_POSITION_TYPES.includes(positionType)?(output+=`${selector} {`,output+=`position: ${positionType};`,POSITION_SIDES.forEach((side=>{void 0!==style?.position?.[side]&&(output+=`${side}: ${style.position[side]};`)})),"sticky"!==positionType&&"fixed"!==positionType||(output+="z-index: 10"),output+="}",output):output}({selector:positionSelector,style})||"");const className=(0,clsx.A)({[`wp-container-${id}`]:allowPositionStyles&&!!css,[`is-position-${style?.position?.type}`]:allowPositionStyles&&!!css&&!!style?.position?.type});return useStyleOverride({css}),{className}},attributeKeys:["style"],hasSupport:name=>(0,build_module.pN)(name,POSITION_SUPPORT_KEY)},POSITION_BLOCK_PROPS_REFERENCE={};const ELEMENT_CLASS_NAMES={button:"wp-element-button",caption:"wp-element-caption"},BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS={__experimentalBorder:"border",color:"color",spacing:"spacing",typography:"typography"},{kebabCase:use_global_styles_output_kebabCase}=unlock(private_apis.j);function flattenTree(input={},prefix,token){let result=[];return Object.keys(input).forEach((key=>{const newKey=prefix+use_global_styles_output_kebabCase(key.replace("/","-")),newLeaf=input[key];if(newLeaf instanceof Object){const newPrefix=newKey+token;result=[...result,...flattenTree(newLeaf,newPrefix,token)]}else result.push(`${newKey}: ${newLeaf}`)})),result}const getFeatureDeclarations=(selectors,styles)=>{const declarations={};return Object.entries(selectors).forEach((([feature,selector])=>{if("root"===feature||!styles?.[feature])return;const isShorthand="string"==typeof selector;if(isShorthand||Object.entries(selector).forEach((([subfeature,subfeatureSelector])=>{if("root"===subfeature||!styles?.[feature][subfeature])return;const newDeclarations=getStylesDeclarations({[feature]:{[subfeature]:styles[feature][subfeature]}});declarations[subfeatureSelector]=[...declarations[subfeatureSelector]||[],...newDeclarations],delete styles[feature][subfeature]})),isShorthand||selector.root){const featureSelector=isShorthand?selector:selector.root,newDeclarations=getStylesDeclarations({[feature]:styles[feature]});declarations[featureSelector]=[...declarations[featureSelector]||[],...newDeclarations],delete styles[feature]}})),declarations};function getStylesDeclarations(blockStyles={},selector="",useRootPaddingAlign,tree={},disableRootPadding=!1){const isRoot=ROOT_BLOCK_SELECTOR===selector,output=Object.entries(build_module.RY).reduce(((declarations,[key,{value,properties,useEngine,rootOnly}])=>{if(rootOnly&&!isRoot)return declarations;const pathToValue=value;if("elements"===pathToValue[0]||useEngine)return declarations;const styleValue=getValueFromObjectPath(blockStyles,pathToValue);if("--wp--style--root--padding"===key&&("string"==typeof styleValue||!useRootPaddingAlign))return declarations;if(properties&&"string"!=typeof styleValue)Object.entries(properties).forEach((entry=>{const[name,prop]=entry;if(!getValueFromObjectPath(styleValue,[prop],!1))return;const cssProperty=name.startsWith("--")?name:use_global_styles_output_kebabCase(name);declarations.push(`${cssProperty}: ${(0,utils.k5)(getValueFromObjectPath(styleValue,[prop]))}`)}));else if(getValueFromObjectPath(blockStyles,pathToValue,!1)){const cssProperty=key.startsWith("--")?key:use_global_styles_output_kebabCase(key);declarations.push(`${cssProperty}: ${(0,utils.k5)(getValueFromObjectPath(blockStyles,pathToValue))}`)}return declarations}),[]);blockStyles.background&&(blockStyles.background?.backgroundImage&&(blockStyles.background.backgroundImage=getResolvedValue(blockStyles.background.backgroundImage,tree)),!isRoot&&blockStyles.background?.backgroundImage?.id&&(blockStyles={...blockStyles,background:{...blockStyles.background,...setBackgroundStyleDefaults(blockStyles.background)}}));return(0,style_engine_build_module.np)(blockStyles).forEach((rule=>{if(isRoot&&(useRootPaddingAlign||disableRootPadding)&&rule.key.startsWith("padding"))return;const cssProperty=rule.key.startsWith("--")?rule.key:use_global_styles_output_kebabCase(rule.key);let ruleValue=getResolvedValue(rule.value,tree);"font-size"===cssProperty&&(ruleValue=getTypographyFontSizeValue({size:ruleValue},tree?.settings)),"aspect-ratio"===cssProperty&&output.push("min-height: unset"),output.push(`${cssProperty}: ${ruleValue}`)})),output}function getLayoutStyles({layoutDefinitions=LAYOUT_DEFINITIONS,style,selector,hasBlockGapSupport,hasFallbackGapSupport,fallbackGapValue}){let ruleset="",gapValue=hasBlockGapSupport?getGapCSSValue(style?.spacing?.blockGap):"";if(hasFallbackGapSupport&&(selector===ROOT_BLOCK_SELECTOR?gapValue=gapValue||"0.5em":!hasBlockGapSupport&&fallbackGapValue&&(gapValue=fallbackGapValue)),gapValue&&layoutDefinitions&&(Object.values(layoutDefinitions).forEach((({className,name,spacingStyles})=>{(hasBlockGapSupport||"flex"===name||"grid"===name)&&spacingStyles?.length&&spacingStyles.forEach((spacingStyle=>{const declarations=[];if(spacingStyle.rules&&Object.entries(spacingStyle.rules).forEach((([cssProperty,cssValue])=>{declarations.push(`${cssProperty}: ${cssValue||gapValue}`)})),declarations.length){let combinedSelector="";combinedSelector=hasBlockGapSupport?selector===ROOT_BLOCK_SELECTOR?`:root :where(.${className})${spacingStyle?.selector||""}`:`:root :where(${selector}-${className})${spacingStyle?.selector||""}`:selector===ROOT_BLOCK_SELECTOR?`:where(.${className}${spacingStyle?.selector||""})`:`:where(${selector}.${className}${spacingStyle?.selector||""})`,ruleset+=`${combinedSelector} { ${declarations.join("; ")}; }`}}))})),selector===ROOT_BLOCK_SELECTOR&&hasBlockGapSupport&&(ruleset+=`${ROOT_CSS_PROPERTIES_SELECTOR} { --wp--style--block-gap: ${gapValue}; }`)),selector===ROOT_BLOCK_SELECTOR&&layoutDefinitions){const validDisplayModes=["block","flex","grid"];Object.values(layoutDefinitions).forEach((({className,displayMode,baseStyles})=>{displayMode&&validDisplayModes.includes(displayMode)&&(ruleset+=`${selector} .${className} { display:${displayMode}; }`),baseStyles?.length&&baseStyles.forEach((baseStyle=>{const declarations=[];if(baseStyle.rules&&Object.entries(baseStyle.rules).forEach((([cssProperty,cssValue])=>{declarations.push(`${cssProperty}: ${cssValue}`)})),declarations.length){ruleset+=`${`.${className}${baseStyle?.selector||""}`} { ${declarations.join("; ")}; }`}}))}))}return ruleset}const STYLE_KEYS=["border","color","dimensions","spacing","typography","filter","outline","shadow","background"];function pickStyleKeys(treeToPickFrom){if(!treeToPickFrom)return{};const clonedEntries=Object.entries(treeToPickFrom).filter((([key])=>STYLE_KEYS.includes(key))).map((([key,style])=>[key,JSON.parse(JSON.stringify(style))]));return Object.fromEntries(clonedEntries)}const getNodesWithStyles=(tree,blockSelectors)=>{var _tree$styles$blocks;const nodes=[];if(!tree?.styles)return nodes;const styles=pickStyleKeys(tree.styles);return styles&&nodes.push({styles,selector:ROOT_BLOCK_SELECTOR,skipSelectorWrapper:!0}),Object.entries(build_module.dB).forEach((([name,selector])=>{tree.styles?.elements?.[name]&&nodes.push({styles:tree.styles?.elements?.[name],selector,skipSelectorWrapper:!ELEMENT_CLASS_NAMES[name]})})),Object.entries(null!==(_tree$styles$blocks=tree.styles?.blocks)&&void 0!==_tree$styles$blocks?_tree$styles$blocks:{}).forEach((([blockName,node])=>{var _node$elements;const blockStyles=pickStyleKeys(node);if(node?.variations){const variations={};Object.entries(node.variations).forEach((([variationName,variation])=>{var _variation$elements,_variation$blocks;variations[variationName]=pickStyleKeys(variation),variation?.css&&(variations[variationName].css=variation.css);const variationSelector=blockSelectors[blockName]?.styleVariationSelectors?.[variationName];Object.entries(null!==(_variation$elements=variation?.elements)&&void 0!==_variation$elements?_variation$elements:{}).forEach((([element,elementStyles])=>{elementStyles&&build_module.dB[element]&&nodes.push({styles:elementStyles,selector:scopeSelector(variationSelector,build_module.dB[element])})})),Object.entries(null!==(_variation$blocks=variation?.blocks)&&void 0!==_variation$blocks?_variation$blocks:{}).forEach((([variationBlockName,variationBlockStyles])=>{var _variationBlockStyles;const variationBlockSelector=scopeSelector(variationSelector,blockSelectors[variationBlockName]?.selector),variationDuotoneSelector=scopeSelector(variationSelector,blockSelectors[variationBlockName]?.duotoneSelector),variationFeatureSelectors=function scopeFeatureSelectors(scope,selectors){if(!scope||!selectors)return;const featureSelectors={};return Object.entries(selectors).forEach((([feature,selector])=>{"string"==typeof selector&&(featureSelectors[feature]=scopeSelector(scope,selector)),"object"==typeof selector&&(featureSelectors[feature]={},Object.entries(selector).forEach((([subfeature,subfeatureSelector])=>{featureSelectors[feature][subfeature]=scopeSelector(scope,subfeatureSelector)})))})),featureSelectors}(variationSelector,blockSelectors[variationBlockName]?.featureSelectors),variationBlockStyleNodes=pickStyleKeys(variationBlockStyles);variationBlockStyles?.css&&(variationBlockStyleNodes.css=variationBlockStyles.css),nodes.push({selector:variationBlockSelector,duotoneSelector:variationDuotoneSelector,featureSelectors:variationFeatureSelectors,fallbackGapValue:blockSelectors[variationBlockName]?.fallbackGapValue,hasLayoutSupport:blockSelectors[variationBlockName]?.hasLayoutSupport,styles:variationBlockStyleNodes}),Object.entries(null!==(_variationBlockStyles=variationBlockStyles.elements)&&void 0!==_variationBlockStyles?_variationBlockStyles:{}).forEach((([variationBlockElement,variationBlockElementStyles])=>{variationBlockElementStyles&&build_module.dB[variationBlockElement]&&nodes.push({styles:variationBlockElementStyles,selector:scopeSelector(variationBlockSelector,build_module.dB[variationBlockElement])})}))}))})),blockStyles.variations=variations}blockSelectors?.[blockName]?.selector&&nodes.push({duotoneSelector:blockSelectors[blockName].duotoneSelector,fallbackGapValue:blockSelectors[blockName].fallbackGapValue,hasLayoutSupport:blockSelectors[blockName].hasLayoutSupport,selector:blockSelectors[blockName].selector,styles:blockStyles,featureSelectors:blockSelectors[blockName].featureSelectors,styleVariationSelectors:blockSelectors[blockName].styleVariationSelectors}),Object.entries(null!==(_node$elements=node?.elements)&&void 0!==_node$elements?_node$elements:{}).forEach((([elementName,value])=>{value&&blockSelectors?.[blockName]&&build_module.dB[elementName]&&nodes.push({styles:value,selector:blockSelectors[blockName]?.selector.split(",").map((sel=>build_module.dB[elementName].split(",").map((elementSelector=>sel+" "+elementSelector)))).join(",")})}))})),nodes},getNodesWithSettings=(tree,blockSelectors)=>{var _tree$settings$blocks;const nodes=[];if(!tree?.settings)return nodes;const pickPresets=treeToPickFrom=>{let presets={};return PRESET_METADATA.forEach((({path})=>{const value=getValueFromObjectPath(treeToPickFrom,path,!1);!1!==value&&(presets=setImmutably(presets,path,value))})),presets},presets=pickPresets(tree.settings),custom=tree.settings?.custom;return(Object.keys(presets).length>0||custom)&&nodes.push({presets,custom,selector:ROOT_CSS_PROPERTIES_SELECTOR}),Object.entries(null!==(_tree$settings$blocks=tree.settings?.blocks)&&void 0!==_tree$settings$blocks?_tree$settings$blocks:{}).forEach((([blockName,node])=>{const blockPresets=pickPresets(node),blockCustom=node.custom;(Object.keys(blockPresets).length>0||blockCustom)&&nodes.push({presets:blockPresets,custom:blockCustom,selector:blockSelectors[blockName]?.selector})})),nodes},toCustomProperties=(tree,blockSelectors)=>{const settings=getNodesWithSettings(tree,blockSelectors);let ruleset="";return settings.forEach((({presets,custom,selector})=>{const declarations=function getPresetsDeclarations(blockPresets={},mergedSettings){return PRESET_METADATA.reduce(((declarations,{path,valueKey,valueFunc,cssVarInfix})=>{const presetByOrigin=getValueFromObjectPath(blockPresets,path,[]);return["default","theme","custom"].forEach((origin=>{presetByOrigin[origin]&&presetByOrigin[origin].forEach((value=>{valueKey&&!valueFunc?declarations.push(`--wp--preset--${cssVarInfix}--${use_global_styles_output_kebabCase(value.slug)}: ${value[valueKey]}`):valueFunc&&"function"==typeof valueFunc&&declarations.push(`--wp--preset--${cssVarInfix}--${use_global_styles_output_kebabCase(value.slug)}: ${valueFunc(value,mergedSettings)}`)}))})),declarations}),[])}(presets,tree?.settings),customProps=flattenTree(custom,"--wp--custom--","--");customProps.length>0&&declarations.push(...customProps),declarations.length>0&&(ruleset+=`${selector}{${declarations.join(";")};}`)})),ruleset},toStyles=(tree,blockSelectors,hasBlockGapSupport,hasFallbackGapSupport,disableLayoutStyles=!1,disableRootPadding=!1,styleOptions=void 0)=>{const options={blockGap:!0,blockStyles:!0,layoutStyles:!0,marginReset:!0,presets:!0,rootPadding:!0,variationStyles:!1,...styleOptions},nodesWithStyles=getNodesWithStyles(tree,blockSelectors),nodesWithSettings=getNodesWithSettings(tree,blockSelectors),useRootPaddingAlign=tree?.settings?.useRootPaddingAwareAlignments,{contentSize,wideSize}=tree?.settings?.layout||{},hasBodyStyles=options.marginReset||options.rootPadding||options.layoutStyles;let ruleset="";if(options.presets&&(contentSize||wideSize)&&(ruleset+=`${ROOT_CSS_PROPERTIES_SELECTOR} {`,ruleset=contentSize?ruleset+` --wp--style--global--content-size: ${contentSize};`:ruleset,ruleset=wideSize?ruleset+` --wp--style--global--wide-size: ${wideSize};`:ruleset,ruleset+="}"),hasBodyStyles&&(ruleset+=":where(body) {margin: 0;",options.rootPadding&&useRootPaddingAlign&&(ruleset+="padding-right: 0; padding-left: 0; padding-top: var(--wp--style--root--padding-top); padding-bottom: var(--wp--style--root--padding-bottom) }\n\t\t\t\t.has-global-padding { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }\n\t\t\t\t.has-global-padding > .alignfull { margin-right: calc(var(--wp--style--root--padding-right) * -1); margin-left: calc(var(--wp--style--root--padding-left) * -1); }\n\t\t\t\t.has-global-padding :where(:not(.alignfull.is-layout-flow) > .has-global-padding:not(.wp-block-block, .alignfull)) { padding-right: 0; padding-left: 0; }\n\t\t\t\t.has-global-padding :where(:not(.alignfull.is-layout-flow) > .has-global-padding:not(.wp-block-block, .alignfull)) > .alignfull { margin-left: 0; margin-right: 0;\n\t\t\t\t"),ruleset+="}"),options.blockStyles&&nodesWithStyles.forEach((({selector,duotoneSelector,styles,fallbackGapValue,hasLayoutSupport,featureSelectors,styleVariationSelectors,skipSelectorWrapper})=>{if(featureSelectors){const featureDeclarations=getFeatureDeclarations(featureSelectors,styles);Object.entries(featureDeclarations).forEach((([cssSelector,declarations])=>{if(declarations.length){const rules=declarations.join(";");ruleset+=`:root :where(${cssSelector}){${rules};}`}}))}if(duotoneSelector){const duotoneStyles={};styles?.filter&&(duotoneStyles.filter=styles.filter,delete styles.filter);const duotoneDeclarations=getStylesDeclarations(duotoneStyles);duotoneDeclarations.length&&(ruleset+=`${duotoneSelector}{${duotoneDeclarations.join(";")};}`)}disableLayoutStyles||ROOT_BLOCK_SELECTOR!==selector&&!hasLayoutSupport||(ruleset+=getLayoutStyles({style:styles,selector,hasBlockGapSupport,hasFallbackGapSupport,fallbackGapValue}));const styleDeclarations=getStylesDeclarations(styles,selector,useRootPaddingAlign,tree,disableRootPadding);if(styleDeclarations?.length){ruleset+=`${skipSelectorWrapper?selector:`:root :where(${selector})`}{${styleDeclarations.join(";")};}`}styles?.css&&(ruleset+=processCSSNesting(styles.css,`:root :where(${selector})`)),options.variationStyles&&styleVariationSelectors&&Object.entries(styleVariationSelectors).forEach((([styleVariationName,styleVariationSelector])=>{const styleVariations=styles?.variations?.[styleVariationName];if(styleVariations){if(featureSelectors){const featureDeclarations=getFeatureDeclarations(featureSelectors,styleVariations);Object.entries(featureDeclarations).forEach((([baseSelector,declarations])=>{if(declarations.length){const cssSelector=function concatFeatureVariationSelectorString(featureSelector,styleVariationSelector){const featureSelectors=featureSelector.split(","),combinedSelectors=[];return featureSelectors.forEach((selector=>{combinedSelectors.push(`${styleVariationSelector.trim()}${selector.trim()}`)})),combinedSelectors.join(", ")}(baseSelector,styleVariationSelector),rules=declarations.join(";");ruleset+=`:root :where(${cssSelector}){${rules};}`}}))}const styleVariationDeclarations=getStylesDeclarations(styleVariations,styleVariationSelector,useRootPaddingAlign,tree);styleVariationDeclarations.length&&(ruleset+=`:root :where(${styleVariationSelector}){${styleVariationDeclarations.join(";")};}`),styleVariations?.css&&(ruleset+=processCSSNesting(styleVariations.css,`:root :where(${styleVariationSelector})`))}}));const pseudoSelectorStyles=Object.entries(styles).filter((([key])=>key.startsWith(":")));pseudoSelectorStyles?.length&&pseudoSelectorStyles.forEach((([pseudoKey,pseudoStyle])=>{const pseudoDeclarations=getStylesDeclarations(pseudoStyle);if(!pseudoDeclarations?.length)return;const pseudoRule=`:root :where(${selector.split(",").map((sel=>sel+pseudoKey)).join(",")}){${pseudoDeclarations.join(";")};}`;ruleset+=pseudoRule}))})),options.layoutStyles&&(ruleset+=".wp-site-blocks > .alignleft { float: left; margin-right: 2em; }",ruleset+=".wp-site-blocks > .alignright { float: right; margin-left: 2em; }",ruleset+=".wp-site-blocks > .aligncenter { justify-content: center; margin-left: auto; margin-right: auto; }"),options.blockGap&&hasBlockGapSupport){const gapValue=getGapCSSValue(tree?.styles?.spacing?.blockGap)||"0.5em";ruleset+=`:root :where(.wp-site-blocks) > * { margin-block-start: ${gapValue}; margin-block-end: 0; }`,ruleset+=":root :where(.wp-site-blocks) > :first-child { margin-block-start: 0; }",ruleset+=":root :where(.wp-site-blocks) > :last-child { margin-block-end: 0; }"}return options.presets&&nodesWithSettings.forEach((({selector,presets})=>{ROOT_BLOCK_SELECTOR!==selector&&ROOT_CSS_PROPERTIES_SELECTOR!==selector||(selector="");const classes=function getPresetsClasses(blockSelector="*",blockPresets={}){return PRESET_METADATA.reduce(((declarations,{path,cssVarInfix,classes})=>{if(!classes)return declarations;const presetByOrigin=getValueFromObjectPath(blockPresets,path,[]);return["default","theme","custom"].forEach((origin=>{presetByOrigin[origin]&&presetByOrigin[origin].forEach((({slug})=>{classes.forEach((({classSuffix,propertyName})=>{const classSelectorToUse=`.has-${use_global_styles_output_kebabCase(slug)}-${classSuffix}`,selectorToUse=blockSelector.split(",").map((selector=>`${selector}${classSelectorToUse}`)).join(","),value=`var(--wp--preset--${cssVarInfix}--${use_global_styles_output_kebabCase(slug)})`;declarations+=`${selectorToUse}{${propertyName}: ${value} !important;}`}))}))})),declarations}),"")}(selector,presets);classes.length>0&&(ruleset+=classes)})),ruleset};function toSvgFilters(tree,blockSelectors){return getNodesWithSettings(tree,blockSelectors).flatMap((({presets})=>function getPresetsSvgFilters(blockPresets={}){return PRESET_METADATA.filter((metadata=>"duotone"===metadata.path.at(-1))).flatMap((metadata=>{const presetByOrigin=getValueFromObjectPath(blockPresets,metadata.path,{});return["default","theme"].filter((origin=>presetByOrigin[origin])).flatMap((origin=>presetByOrigin[origin].map((preset=>getDuotoneFilter(`wp-duotone-${preset.slug}`,preset.colors))))).join("")}))}(presets)))}const getBlockSelectors=(blockTypes,getBlockStyles,variationInstanceId)=>{const result={};return blockTypes.forEach((blockType=>{const name=blockType.name,selector=getBlockCSSSelector(blockType);let duotoneSelector=getBlockCSSSelector(blockType,"filter.duotone");if(!duotoneSelector){const rootSelector=getBlockCSSSelector(blockType),duotoneSupport=(0,build_module.bI)(blockType,"color.__experimentalDuotone",!1);duotoneSelector=duotoneSupport&&scopeSelector(rootSelector,duotoneSupport)}const hasLayoutSupport=!!blockType?.supports?.layout||!!blockType?.supports?.__experimentalLayout,fallbackGapValue=blockType?.supports?.spacing?.blockGap?.__experimentalDefault,blockStyleVariations=getBlockStyles(name),styleVariationSelectors={};blockStyleVariations?.forEach((variation=>{const variationSuffix=variationInstanceId?`-${variationInstanceId}`:"",variationName=`${variation.name}${variationSuffix}`,styleVariationSelector=function getBlockStyleVariationSelector(variation,blockSelector){const variationClass=`.is-style-${variation}`;if(!blockSelector)return variationClass;const ancestorRegex=/((?::\([^)]+\))?\s*)([^\s:]+)/,addVariationClass=(_match,group1,group2)=>group1+group2+variationClass;return blockSelector.split(",").map((part=>part.replace(ancestorRegex,addVariationClass))).join(",")}(variationName,selector);styleVariationSelectors[variationName]=styleVariationSelector}));const featureSelectors=((blockType,rootSelector)=>{if(blockType?.selectors&&Object.keys(blockType.selectors).length>0)return blockType.selectors;const config={root:rootSelector};return Object.entries(BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS).forEach((([featureKey,featureName])=>{const featureSelector=getBlockCSSSelector(blockType,featureKey);featureSelector&&(config[featureName]=featureSelector)})),config})(blockType,selector);result[name]={duotoneSelector,fallbackGapValue,featureSelectors:Object.keys(featureSelectors).length?featureSelectors:void 0,hasLayoutSupport,name,selector,styleVariationSelectors:blockStyleVariations?.length?styleVariationSelectors:void 0}})),result};function processCSSNesting(css,blockSelector){let processedCSS="";if(!css||""===css.trim())return processedCSS;return css.split("&").forEach((part=>{if(!part||""===part.trim())return;if(!part.includes("{"))processedCSS+=`:root :where(${blockSelector}){${part.trim()}}`;else{const splittedPart=part.replace("}","").split("{");if(2!==splittedPart.length)return;const[nestedSelector,cssValue]=splittedPart,matches=nestedSelector.match(/([>+~\s]*::[a-zA-Z-]+)/),pseudoPart=matches?matches[1]:"",withoutPseudoElement=matches?nestedSelector.replace(pseudoPart,"").trim():nestedSelector.trim();let combinedSelector;combinedSelector=""===withoutPseudoElement?blockSelector:nestedSelector.startsWith(" ")?scopeSelector(blockSelector,withoutPseudoElement):function appendToSelector(selector,toAppend){return selector.includes(",")?selector.split(",").map((sel=>sel+toAppend)).join(","):selector+toAppend}(blockSelector,withoutPseudoElement),processedCSS+=`:root :where(${combinedSelector})${pseudoPart}{${cssValue.trim()}}`}})),processedCSS}function useGlobalStylesOutputWithConfig(mergedConfig={},disableRootPadding){const[blockGap]=useGlobalSetting("spacing.blockGap"),hasBlockGapSupport=null!==blockGap,hasFallbackGapSupport=!hasBlockGapSupport,disableLayoutStyles=(0,use_select.A)((select=>{const{getSettings}=select(store_store);return!!getSettings().disableLayoutStyles})),{getBlockStyles}=(0,use_select.A)(build_module.M_);return(0,react.useMemo)((()=>{var _updatedConfig$styles;if(!mergedConfig?.styles||!mergedConfig?.settings)return[];const updatedConfig=function updateConfigWithSeparator(config){return config.styles?.blocks?.["core/separator"]&&config.styles?.blocks?.["core/separator"].color?.background&&!config.styles?.blocks?.["core/separator"].color?.text&&!config.styles?.blocks?.["core/separator"].border?.color?{...config,styles:{...config.styles,blocks:{...config.styles.blocks,"core/separator":{...config.styles.blocks["core/separator"],color:{...config.styles.blocks["core/separator"].color,text:config.styles?.blocks["core/separator"].color.background}}}}}:config}(mergedConfig),blockSelectors=getBlockSelectors((0,build_module.li)(),getBlockStyles),customProperties=toCustomProperties(updatedConfig,blockSelectors),globalStyles=toStyles(updatedConfig,blockSelectors,hasBlockGapSupport,hasFallbackGapSupport,disableLayoutStyles,disableRootPadding),svgs=toSvgFilters(updatedConfig,blockSelectors),styles=[{css:customProperties,isGlobalStyles:!0},{css:globalStyles,isGlobalStyles:!0},{css:null!==(_updatedConfig$styles=updatedConfig.styles.css)&&void 0!==_updatedConfig$styles?_updatedConfig$styles:"",isGlobalStyles:!0},{assets:svgs,__unstableType:"svg",isGlobalStyles:!0}];return(0,build_module.li)().forEach((blockType=>{if(updatedConfig.styles.blocks[blockType.name]?.css){const selector=blockSelectors[blockType.name].selector;styles.push({css:processCSSNesting(updatedConfig.styles.blocks[blockType.name]?.css,selector),isGlobalStyles:!0})}})),[styles,updatedConfig.settings]}),[hasBlockGapSupport,hasFallbackGapSupport,mergedConfig,disableLayoutStyles,disableRootPadding,getBlockStyles])}function useGlobalStylesOutput(disableRootPadding=!1){const{merged:mergedConfig}=(0,react.useContext)(GlobalStylesContext);return useGlobalStylesOutputWithConfig(mergedConfig,disableRootPadding)}const VARIATION_PREFIX="is-style-";function getVariationMatches(className){return className?className.split(/\s+/).reduce(((matches,name)=>{if(name.startsWith(VARIATION_PREFIX)){const match=name.slice(VARIATION_PREFIX.length);"default"!==match&&matches.push(match)}return matches}),[]):[]}function OverrideStyles({override}){usePrivateStyleOverride(override)}function useBlockStyleVariation(name,variation,clientId){const{merged:mergedConfig}=(0,react.useContext)(GlobalStylesContext),{globalSettings,globalStyles}=(0,use_select.A)((select=>{const settings=select(store_store).getSettings();return{globalSettings:settings.__experimentalFeatures,globalStyles:settings[globalStylesDataKey]}}),[]);return(0,react.useMemo)((()=>{var _mergedConfig$setting,_mergedConfig$styles,_mergedConfig$setting2;const variationStyles=function getVariationStylesWithRefValues(globalStyles,name,variation){if(!globalStyles?.styles?.blocks?.[name]?.variations?.[variation])return;const replaceRefs=variationStyles=>{Object.keys(variationStyles).forEach((key=>{const value=variationStyles[key];if("object"==typeof value&&null!==value)if(void 0!==value.ref)if("string"!=typeof value.ref||""===value.ref.trim())delete variationStyles[key];else{const refValue=getValueFromObjectPath(globalStyles,value.ref);refValue?variationStyles[key]=refValue:delete variationStyles[key]}else replaceRefs(value),0===Object.keys(value).length&&delete variationStyles[key]}))},styles=JSON.parse(JSON.stringify(globalStyles.styles.blocks[name].variations[variation]));return replaceRefs(styles),styles}({settings:null!==(_mergedConfig$setting=mergedConfig?.settings)&&void 0!==_mergedConfig$setting?_mergedConfig$setting:globalSettings,styles:null!==(_mergedConfig$styles=mergedConfig?.styles)&&void 0!==_mergedConfig$styles?_mergedConfig$styles:globalStyles},name,variation);return{settings:null!==(_mergedConfig$setting2=mergedConfig?.settings)&&void 0!==_mergedConfig$setting2?_mergedConfig$setting2:globalSettings,styles:{blocks:{[name]:{variations:{[`${variation}-${clientId}`]:variationStyles}}}}}}),[mergedConfig,globalSettings,globalStyles,variation,clientId,name])}const block_style_variation={hasSupport:()=>!0,attributeKeys:["className"],isMatch:({className})=>getVariationMatches(className).length>0,useBlockProps:function block_style_variation_useBlockProps({name,className,clientId}){const{getBlockStyles}=(0,use_select.A)(build_module.M_),variation=function getVariationNameFromClass(className,registeredStyles=[]){const matches=getVariationMatches(className);if(!matches)return null;for(const variation of matches)if(registeredStyles.some((style=>style.name===variation)))return variation;return null}(className,getBlockStyles(name)),variationClass=`${VARIATION_PREFIX}${variation}-${clientId}`,{settings,styles}=useBlockStyleVariation(name,variation,clientId),variationStyles=(0,react.useMemo)((()=>{if(!variation)return;const variationConfig={settings,styles},blockSelectors=getBlockSelectors((0,build_module.li)(),getBlockStyles,clientId);return toStyles(variationConfig,blockSelectors,!1,!0,!0,!0,{blockGap:!1,blockStyles:!0,layoutStyles:!1,marginReset:!1,presets:!1,rootPadding:!1,variationStyles:!0})}),[variation,settings,styles,getBlockStyles,clientId]);return usePrivateStyleOverride({id:`variation-${clientId}`,css:variationStyles,__unstableType:"variation",variation,clientId}),variation?{className:variationClass}:{}}};var body=__webpack_require__("./packages/components/build-module/panel/body.js");const{kebabCase:layout_kebabCase}=unlock(private_apis.j);function hasLayoutBlockSupport(blockName){return(0,build_module.pN)(blockName,"layout")||(0,build_module.pN)(blockName,"__experimentalLayout")}function useLayoutClasses(blockAttributes={},blockName=""){const{layout}=blockAttributes,{default:defaultBlockLayout}=(0,build_module.bI)(blockName,"layout")||{},usedLayout=layout?.inherit||layout?.contentSize||layout?.wideSize?{...layout,type:"constrained"}:layout||defaultBlockLayout||{},layoutClassnames=[];if(LAYOUT_DEFINITIONS[usedLayout?.type||"default"]?.className){const baseClassName=LAYOUT_DEFINITIONS[usedLayout?.type||"default"]?.className,splitBlockName=blockName.split("/"),compoundClassName=`wp-block-${"core"===splitBlockName[0]?splitBlockName.pop():splitBlockName.join("-")}-${baseClassName}`;layoutClassnames.push(baseClassName,compoundClassName)}return(0,use_select.A)((select=>(usedLayout?.inherit||usedLayout?.contentSize||"constrained"===usedLayout?.type)&&select(store_store).getSettings().__experimentalFeatures?.useRootPaddingAwareAlignments),[usedLayout?.contentSize,usedLayout?.inherit,usedLayout?.type])&&layoutClassnames.push("has-global-padding"),usedLayout?.orientation&&layoutClassnames.push(`is-${layout_kebabCase(usedLayout.orientation)}`),usedLayout?.justifyContent&&layoutClassnames.push(`is-content-justification-${layout_kebabCase(usedLayout.justifyContent)}`),usedLayout?.flexWrap&&"nowrap"===usedLayout.flexWrap&&layoutClassnames.push("is-nowrap"),layoutClassnames}const layout={shareWithChildBlocks:!0,edit:function LayoutPanelPure({layout,setAttributes,name:blockName,clientId}){const settings=useBlockSettings(blockName),{layout:layoutSettings}=settings,{themeSupportsLayout}=(0,use_select.A)((select=>{const{getSettings}=select(store_store);return{themeSupportsLayout:getSettings().supportsLayout}}),[]);if("default"!==useBlockEditingMode())return null;const layoutBlockSupport=(0,build_module.bI)(blockName,"layout",{}),blockSupportAndThemeSettings={...layoutSettings,...layoutBlockSupport},{allowSwitching,allowEditing=!0,allowInheriting=!0,default:defaultBlockLayout}=blockSupportAndThemeSettings;if(!allowEditing)return null;const blockSupportAndLayout={...layoutBlockSupport,...layout},{type,default:{type:defaultType="default"}={}}=blockSupportAndLayout,blockLayoutType=type||defaultType,showInheritToggle=!(!allowInheriting||blockLayoutType&&"default"!==blockLayoutType&&"constrained"!==blockLayoutType&&!blockSupportAndLayout.inherit),usedLayout=layout||defaultBlockLayout||{},{inherit=!1,contentSize=null}=usedLayout;if(("default"===blockLayoutType||"constrained"===blockLayoutType)&&!themeSupportsLayout)return null;const layoutType=getLayoutType(blockLayoutType),constrainedType=getLayoutType("constrained"),displayControlsForLegacyLayouts=!usedLayout.type&&(contentSize||inherit),hasContentSizeOrLegacySettings=!!inherit||!!contentSize,onChangeLayout=newLayout=>setAttributes({layout:newLayout});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(inspector_controls,{children:(0,jsx_runtime.jsxs)(body.Ay,{title:(0,i18n_build_module.__)("Layout"),children:[showInheritToggle&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Inner blocks use content width"),checked:"constrained"===layoutType?.name||hasContentSizeOrLegacySettings,onChange:()=>setAttributes({layout:{type:"constrained"===layoutType?.name||hasContentSizeOrLegacySettings?"default":"constrained"}}),help:"constrained"===layoutType?.name||hasContentSizeOrLegacySettings?(0,i18n_build_module.__)("Nested blocks use content width with options for full and wide widths."):(0,i18n_build_module.__)("Nested blocks will fill the width of this container. Toggle to constrain.")})}),!inherit&&allowSwitching&&(0,jsx_runtime.jsx)(LayoutTypeSwitcher,{type:blockLayoutType,onChange:newType=>setAttributes({layout:{type:newType}})}),layoutType&&"default"!==layoutType.name&&(0,jsx_runtime.jsx)(layoutType.inspectorControls,{layout:usedLayout,onChange:onChangeLayout,layoutBlockSupport:blockSupportAndThemeSettings,name:blockName,clientId}),constrainedType&&displayControlsForLegacyLayouts&&(0,jsx_runtime.jsx)(constrainedType.inspectorControls,{layout:usedLayout,onChange:onChangeLayout,layoutBlockSupport:blockSupportAndThemeSettings,name:blockName,clientId})]})}),!inherit&&layoutType&&(0,jsx_runtime.jsx)(layoutType.toolBarControls,{layout:usedLayout,onChange:onChangeLayout,layoutBlockSupport,name:blockName,clientId})]})},attributeKeys:["layout"],hasSupport:name=>hasLayoutBlockSupport(name)};function LayoutTypeSwitcher({type,onChange}){return(0,jsx_runtime.jsx)(toggle_group_control_component.A,{__next40pxDefaultSize:!0,isBlock:!0,label:(0,i18n_build_module.__)("Layout type"),__nextHasNoMarginBottom:!0,hideLabelFromVision:!0,isAdaptiveWidth:!0,value:type,onChange,children:layoutTypes.map((({name,label})=>(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:name,label},name)))})}function BlockWithLayoutStyles({block:BlockListBlock,props,blockGapSupport,layoutClasses}){const{name,attributes}=props,id=(0,use_instance_id.A)(BlockListBlock),{layout}=attributes,{default:defaultBlockLayout}=(0,build_module.bI)(name,"layout")||{},usedLayout=layout?.inherit||layout?.contentSize||layout?.wideSize?{...layout,type:"constrained"}:layout||defaultBlockLayout||{},selectorPrefix=`wp-container-${layout_kebabCase(name)}-is-layout-`,selector=`.${selectorPrefix}${id}`,hasBlockGapSupport=null!==blockGapSupport,fullLayoutType=getLayoutType(usedLayout?.type||"default"),css=fullLayoutType?.getLayoutStyle?.({blockName:name,selector,layout:usedLayout,style:attributes?.style,hasBlockGapSupport}),layoutClassNames=(0,clsx.A)({[`${selectorPrefix}${id}`]:!!css},layoutClasses);return useStyleOverride({css}),(0,jsx_runtime.jsx)(BlockListBlock,{...props,__unstableLayoutClassNames:layoutClassNames})}const withLayoutStyles=(0,create_higher_order_component.f)((BlockListBlock=>props=>{const{clientId,name,attributes}=props,blockSupportsLayout=hasLayoutBlockSupport(name),layoutClasses=useLayoutClasses(attributes,name),extraProps=(0,use_select.A)((select=>{if(!blockSupportsLayout)return;const{getSettings,getBlockSettings}=unlock(select(store_store)),{disableLayoutStyles}=getSettings();if(disableLayoutStyles)return;const[blockGapSupport]=getBlockSettings(clientId,"spacing.blockGap");return{blockGapSupport}}),[blockSupportsLayout,clientId]);return extraProps?(0,jsx_runtime.jsx)(BlockWithLayoutStyles,{block:BlockListBlock,props,layoutClasses,...extraProps}):(0,jsx_runtime.jsx)(BlockListBlock,{...props,__unstableLayoutClassNames:blockSupportsLayout?layoutClasses:void 0})}),"withLayoutStyles");(0,hooks_build_module.U2)("blocks.registerBlockType","core/layout/addAttribute",(function layout_addAttribute(settings){var _settings$attributes$;return"type"in(null!==(_settings$attributes$=settings.attributes?.layout)&&void 0!==_settings$attributes$?_settings$attributes$:{})||hasLayoutBlockSupport(settings)&&(settings.attributes={...settings.attributes,layout:{type:"object"}}),settings})),(0,hooks_build_module.U2)("editor.BlockListBlock","core/editor/layout/with-layout-styles",withLayoutStyles);var use_drop_zone=__webpack_require__("./packages/compose/build-module/hooks/use-drop-zone/index.js");function range(start,length){return Array.from({length},((_,i)=>start+i))}class GridRect{constructor({columnStart,rowStart,columnEnd,rowEnd,columnSpan,rowSpan}={}){this.columnStart=null!=columnStart?columnStart:1,this.rowStart=null!=rowStart?rowStart:1,this.columnEnd=void 0!==columnSpan?this.columnStart+columnSpan-1:null!=columnEnd?columnEnd:this.columnStart,this.rowEnd=void 0!==rowSpan?this.rowStart+rowSpan-1:null!=rowEnd?rowEnd:this.rowStart}get columnSpan(){return this.columnEnd-this.columnStart+1}get rowSpan(){return this.rowEnd-this.rowStart+1}contains(column,row){return column>=this.columnStart&&column<=this.columnEnd&&row>=this.rowStart&&row<=this.rowEnd}containsRect(rect){return this.contains(rect.columnStart,rect.rowStart)&&this.contains(rect.columnEnd,rect.rowEnd)}intersectsRect(rect){return this.columnStart<=rect.columnEnd&&this.columnEnd>=rect.columnStart&&this.rowStart<=rect.rowEnd&&this.rowEnd>=rect.rowStart}}function utils_getComputedCSS(element,property){return element.ownerDocument.defaultView.getComputedStyle(element).getPropertyValue(property)}function getGridTracks(template,gap){const tracks=[];for(const size of template.split(" ")){const previousTrack=tracks[tracks.length-1],start=previousTrack?previousTrack.end+gap:0,end=start+parseFloat(size);tracks.push({start,end})}return tracks}function getClosestTrack(tracks,position,edge="start"){return tracks.reduce(((closest,track,index)=>Math.abs(track[edge]-position)<Math.abs(tracks[closest][edge]-position)?index:closest),0)}function getGridInfo(gridElement){const gridTemplateColumns=utils_getComputedCSS(gridElement,"grid-template-columns"),gridTemplateRows=utils_getComputedCSS(gridElement,"grid-template-rows"),numColumns=gridTemplateColumns.split(" ").length,numRows=gridTemplateRows.split(" ").length;return{numColumns,numRows,numItems:numColumns*numRows,currentColor:utils_getComputedCSS(gridElement,"color"),style:{gridTemplateColumns,gridTemplateRows,gap:utils_getComputedCSS(gridElement,"gap"),padding:utils_getComputedCSS(gridElement,"padding")}}}var if_condition=__webpack_require__("./packages/compose/build-module/higher-order/if-condition/index.js"),search_control=__webpack_require__("./packages/components/build-module/search-control/index.js"),use_debounced_input=__webpack_require__("./packages/compose/build-module/hooks/use-debounced-input/index.js"),tip=__webpack_require__("./packages/components/build-module/tip/index.js");const globalTips=[(0,create_interpolate_element.A)((0,i18n_build_module.__)("While writing, you can press <kbd>/</kbd> to quickly insert new blocks."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,create_interpolate_element.A)((0,i18n_build_module.__)("Indent a list by pressing <kbd>space</kbd> at the beginning of a line."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,create_interpolate_element.A)((0,i18n_build_module.__)("Outdent a list by pressing <kbd>backspace</kbd> at the beginning of a line."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,i18n_build_module.__)("Drag files into the editor to automatically insert media blocks."),(0,i18n_build_module.__)("Change a block's type by pressing the block icon on the toolbar.")];const tips=function Tips(){const[randomIndex]=(0,react.useState)(Math.floor(Math.random()*globalTips.length));return(0,jsx_runtime.jsx)(tip.A,{children:globalTips[randomIndex]})};var text_component=__webpack_require__("./packages/components/build-module/text/component.js"),chevron_right=__webpack_require__("./packages/icons/build-module/library/chevron-right.js"),chevron_left=__webpack_require__("./packages/icons/build-module/library/chevron-left.js"),block_default=__webpack_require__("./packages/icons/build-module/library/block-default.js");const block_icon=(0,react.memo)((function BlockIcon({icon,showColors=!1,className,context}){"block-default"===icon?.src&&(icon={src:block_default.A});const renderedIcon=(0,jsx_runtime.jsx)(components_build_module_icon.A,{icon:icon&&icon.src?icon.src:icon,context}),style=showColors?{backgroundColor:icon&&icon.background,color:icon&&icon.foreground}:{};return(0,jsx_runtime.jsx)("span",{style,className:(0,clsx.A)("block-editor-block-icon",className,{"has-colors":showColors}),children:renderedIcon})}));const block_card=function BlockCard({title,icon,description,blockType,className,name}){blockType&&((0,deprecated_build_module.A)("`blockType` property in `BlockCard component`",{since:"5.7",alternative:"`title, icon and description` properties"}),({title,icon,description}=blockType));const{parentNavBlockClientId}=(0,use_select.A)((select=>{const{getSelectedBlockClientId,getBlockParentsByBlockName}=select(store_store);return{parentNavBlockClientId:getBlockParentsByBlockName(getSelectedBlockClientId(),"core/navigation",!0)[0]}}),[]),{selectBlock}=(0,use_dispatch.A)(store_store);return(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("block-editor-block-card",className),children:[parentNavBlockClientId&&(0,jsx_runtime.jsx)(build_module_button.Ay,{onClick:()=>selectBlock(parentNavBlockClientId),label:(0,i18n_build_module.__)("Go to parent Navigation block"),style:{minWidth:24,padding:0},icon:(0,i18n_build_module.V8)()?chevron_right.A:chevron_left.A,size:"small"}),(0,jsx_runtime.jsx)(block_icon,{icon,showColors:!0}),(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:1,children:[(0,jsx_runtime.jsx)("h2",{className:"block-editor-block-card__title",children:name?.length?(0,i18n_build_module.nv)((0,i18n_build_module.__)("%1$s (%2$s)"),name,title):title}),description&&(0,jsx_runtime.jsx)(text_component.A,{className:"block-editor-block-card__description",children:description})]})]})};var use_disabled=__webpack_require__("./packages/compose/build-module/hooks/use-disabled/index.js"),build_module_registry=__webpack_require__("./packages/data/build-module/registry.js"),registry_provider_context=__webpack_require__("./packages/data/build-module/components/registry-provider/context.js");const with_registry_provider=(0,create_higher_order_component.f)((WrappedComponent=>({useSubRegistry=!0,...props})=>{const registry=(0,use_registry.A)(),[subRegistries]=(0,react.useState)((()=>new WeakMap)),subRegistry=function getSubRegistry(subRegistries,registry,useSubRegistry){if(!useSubRegistry)return registry;let subRegistry=subRegistries.get(registry);return subRegistry||(subRegistry=(0,build_module_registry.I)({},registry),subRegistry.registerStore(STORE_NAME,storeConfig),subRegistries.set(registry,subRegistry)),subRegistry}(subRegistries,registry,useSubRegistry);return subRegistry===registry?(0,jsx_runtime.jsx)(WrappedComponent,{registry,...props}):(0,jsx_runtime.jsx)(registry_provider_context.Ay,{value:subRegistry,children:(0,jsx_runtime.jsx)(WrappedComponent,{registry:subRegistry,...props})})}),"withRegistryProvider"),use_block_sync_noop=()=>{};function useBlockSync({clientId=null,value:controlledBlocks,selection:controlledSelection,onChange=use_block_sync_noop,onInput=use_block_sync_noop}){const registry=(0,use_registry.A)(),{resetBlocks,resetSelection,replaceInnerBlocks,setHasControlledInnerBlocks,__unstableMarkNextChangeAsNotPersistent}=registry.dispatch(store_store),{getBlockName,getBlocks,getSelectionStart,getSelectionEnd}=registry.select(store_store),isControlled=(0,use_select.A)((select=>!clientId||select(store_store).areInnerBlocksControlled(clientId)),[clientId]),pendingChangesRef=(0,react.useRef)({incoming:null,outgoing:[]}),subscribedRef=(0,react.useRef)(!1),setControlledBlocks=()=>{controlledBlocks&&(__unstableMarkNextChangeAsNotPersistent(),clientId?registry.batch((()=>{setHasControlledInnerBlocks(clientId,!0);const storeBlocks=controlledBlocks.map((block=>(0,build_module.JB)(block)));subscribedRef.current&&(pendingChangesRef.current.incoming=storeBlocks),__unstableMarkNextChangeAsNotPersistent(),replaceInnerBlocks(clientId,storeBlocks)})):(subscribedRef.current&&(pendingChangesRef.current.incoming=controlledBlocks),resetBlocks(controlledBlocks)))},onInputRef=(0,react.useRef)(onInput),onChangeRef=(0,react.useRef)(onChange);(0,react.useEffect)((()=>{onInputRef.current=onInput,onChangeRef.current=onChange}),[onInput,onChange]),(0,react.useEffect)((()=>{pendingChangesRef.current.outgoing.includes(controlledBlocks)?pendingChangesRef.current.outgoing[pendingChangesRef.current.outgoing.length-1]===controlledBlocks&&(pendingChangesRef.current.outgoing=[]):getBlocks(clientId)!==controlledBlocks&&(pendingChangesRef.current.outgoing=[],setControlledBlocks(),controlledSelection&&resetSelection(controlledSelection.selectionStart,controlledSelection.selectionEnd,controlledSelection.initialPosition))}),[controlledBlocks,clientId]);const isMountedRef=(0,react.useRef)(!1);(0,react.useEffect)((()=>{isMountedRef.current?isControlled||(pendingChangesRef.current.outgoing=[],setControlledBlocks()):isMountedRef.current=!0}),[isControlled]),(0,react.useEffect)((()=>{const{getSelectedBlocksInitialCaretPosition,isLastBlockChangePersistent,__unstableIsLastBlockChangeIgnored,areInnerBlocksControlled}=registry.select(store_store);let blocks=getBlocks(clientId),isPersistent=isLastBlockChangePersistent(),previousAreBlocksDifferent=!1;subscribedRef.current=!0;const unsubscribe=registry.subscribe((()=>{if(null!==clientId&&null===getBlockName(clientId))return;if(!(!clientId||areInnerBlocksControlled(clientId)))return;const newIsPersistent=isLastBlockChangePersistent(),newBlocks=getBlocks(clientId),areBlocksDifferent=newBlocks!==blocks;if(blocks=newBlocks,areBlocksDifferent&&(pendingChangesRef.current.incoming||__unstableIsLastBlockChangeIgnored()))return pendingChangesRef.current.incoming=null,void(isPersistent=newIsPersistent);if(areBlocksDifferent||previousAreBlocksDifferent&&!areBlocksDifferent&&newIsPersistent&&!isPersistent){isPersistent=newIsPersistent,pendingChangesRef.current.outgoing.push(blocks);(isPersistent?onChangeRef.current:onInputRef.current)(blocks,{selection:{selectionStart:getSelectionStart(),selectionEnd:getSelectionEnd(),initialPosition:getSelectedBlocksInitialCaretPosition()}})}previousAreBlocksDifferent=areBlocksDifferent}),store_store);return()=>{subscribedRef.current=!1,unsubscribe()}}),[registry,clientId]),(0,react.useEffect)((()=>()=>{__unstableMarkNextChangeAsNotPersistent(),clientId?(setHasControlledInnerBlocks(clientId,!1),__unstableMarkNextChangeAsNotPersistent(),replaceInnerBlocks(clientId,[])):resetBlocks([])}),[])}var keyboard_shortcuts_build_module=__webpack_require__("./packages/keyboard-shortcuts/build-module/index.js");function KeyboardShortcuts(){return null}KeyboardShortcuts.Register=function KeyboardShortcutsRegister(){const{registerShortcut}=(0,use_dispatch.A)(keyboard_shortcuts_build_module.M_);return(0,react.useEffect)((()=>{registerShortcut({name:"core/block-editor/duplicate",category:"block",description:(0,i18n_build_module.__)("Duplicate the selected block(s)."),keyCombination:{modifier:"primaryShift",character:"d"}}),registerShortcut({name:"core/block-editor/remove",category:"block",description:(0,i18n_build_module.__)("Remove the selected block(s)."),keyCombination:{modifier:"access",character:"z"}}),registerShortcut({name:"core/block-editor/insert-before",category:"block",description:(0,i18n_build_module.__)("Insert a new block before the selected block(s)."),keyCombination:{modifier:"primaryAlt",character:"t"}}),registerShortcut({name:"core/block-editor/insert-after",category:"block",description:(0,i18n_build_module.__)("Insert a new block after the selected block(s)."),keyCombination:{modifier:"primaryAlt",character:"y"}}),registerShortcut({name:"core/block-editor/delete-multi-selection",category:"block",description:(0,i18n_build_module.__)("Delete selection."),keyCombination:{character:"del"},aliases:[{character:"backspace"}]}),registerShortcut({name:"core/block-editor/select-all",category:"selection",description:(0,i18n_build_module.__)("Select all text when typing. Press again to select all blocks."),keyCombination:{modifier:"primary",character:"a"}}),registerShortcut({name:"core/block-editor/unselect",category:"selection",description:(0,i18n_build_module.__)("Clear selection."),keyCombination:{character:"escape"}}),registerShortcut({name:"core/block-editor/multi-text-selection",category:"selection",description:(0,i18n_build_module.__)("Select text across multiple blocks."),keyCombination:{modifier:"shift",character:"arrow"}}),registerShortcut({name:"core/block-editor/focus-toolbar",category:"global",description:(0,i18n_build_module.__)("Navigate to the nearest toolbar."),keyCombination:{modifier:"alt",character:"F10"}}),registerShortcut({name:"core/block-editor/move-up",category:"block",description:(0,i18n_build_module.__)("Move the selected block(s) up."),keyCombination:{modifier:"secondary",character:"t"}}),registerShortcut({name:"core/block-editor/move-down",category:"block",description:(0,i18n_build_module.__)("Move the selected block(s) down."),keyCombination:{modifier:"secondary",character:"y"}}),registerShortcut({name:"core/block-editor/collapse-list-view",category:"list-view",description:(0,i18n_build_module.__)("Collapse all other items."),keyCombination:{modifier:"alt",character:"l"}}),registerShortcut({name:"core/block-editor/group",category:"block",description:(0,i18n_build_module.__)("Create a group block from the selected multiple blocks."),keyCombination:{modifier:"primary",character:"g"}})}),[registerShortcut]),null};const keyboard_shortcuts=KeyboardShortcuts,ExperimentalBlockEditorProvider=with_registry_provider((props=>{const{children,settings,stripExperimentalSettings=!1}=props,{__experimentalUpdateSettings}=unlock((0,use_dispatch.A)(store_store));return(0,react.useEffect)((()=>{__experimentalUpdateSettings({...settings,__internalIsInitialized:!0},{stripExperimentalSettings,reset:!0})}),[settings,stripExperimentalSettings,__experimentalUpdateSettings]),useBlockSync(props),(0,jsx_runtime.jsxs)(slot_fill.Kq,{passthrough:!0,children:[!settings?.isPreviewMode&&(0,jsx_runtime.jsx)(keyboard_shortcuts.Register,{}),(0,jsx_runtime.jsx)(BlockRefsProvider,{children})]})})),provider=props=>(0,jsx_runtime.jsx)(ExperimentalBlockEditorProvider,{...props,stripExperimentalSettings:!0,children:props.children});var use_resize_observer=__webpack_require__("./packages/compose/build-module/hooks/use-resize-observer/index.js"),disabled=__webpack_require__("./packages/components/build-module/disabled/index.js"),async_mode_provider_context=__webpack_require__("./packages/data/build-module/components/async-mode-provider/context.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),raw_html=__webpack_require__("./packages/element/build-module/raw-html.js"),safe_html=__webpack_require__("./packages/dom/build-module/dom/safe-html.js");const block_context_Context=(0,react.createContext)({});function BlockContextProvider({value,children}){const context=(0,react.useContext)(block_context_Context),nextValue=(0,react.useMemo)((()=>({...context,...value})),[context,value]);return(0,jsx_runtime.jsx)(block_context_Context.Provider,{value:nextValue,children})}const block_context=block_context_Context,DEFAULT_BLOCK_CONTEXT={},EditWithFilters=(0,with_filters.A)("editor.BlockEdit")((props=>{const{name}=props,blockType=(0,build_module.E7)(name);if(!blockType)return null;const Component=blockType.edit||blockType.save;return(0,jsx_runtime.jsx)(Component,{...props})})),block_edit_edit=props=>{const{attributes={},name}=props,blockType=(0,build_module.E7)(name),blockContext=(0,react.useContext)(block_context),context=(0,react.useMemo)((()=>blockType&&blockType.usesContext?Object.fromEntries(Object.entries(blockContext).filter((([key])=>blockType.usesContext.includes(key)))):DEFAULT_BLOCK_CONTEXT),[blockType,blockContext]);if(!blockType)return null;if(blockType.apiVersion>1)return(0,jsx_runtime.jsx)(EditWithFilters,{...props,context});const generatedClassName=(0,build_module.pN)(blockType,"className",!0)?(0,build_module.KW)(name):null,className=(0,clsx.A)(generatedClassName,attributes.className,props.className);return(0,jsx_runtime.jsx)(EditWithFilters,{...props,context,className})};var dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js");const warning=function Warning({className,actions,children,secondaryActions}){return(0,jsx_runtime.jsx)("div",{style:{display:"contents",all:"initial"},children:(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)(className,"block-editor-warning"),children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-warning__contents",children:[(0,jsx_runtime.jsx)("p",{className:"block-editor-warning__message",children}),(react.Children.count(actions)>0||secondaryActions)&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-warning__actions",children:[react.Children.count(actions)>0&&react.Children.map(actions,((action,i)=>(0,jsx_runtime.jsx)("span",{className:"block-editor-warning__action",children:action},i))),secondaryActions&&(0,jsx_runtime.jsx)(dropdown_menu.A,{className:"block-editor-warning__secondary",icon:more_vertical.A,label:(0,i18n_build_module.__)("More options"),popoverProps:{position:"bottom left",className:"block-editor-warning__dropdown"},noIcons:!0,children:()=>(0,jsx_runtime.jsx)(menu_group.A,{children:secondaryActions.map(((item,pos)=>(0,jsx_runtime.jsx)(menu_item.A,{onClick:item.onClick,children:item.title},pos)))})})]})]})})})};function MultipleUsageWarning({originalBlockClientId,name,onReplace}){const{selectBlock}=(0,use_dispatch.A)(store_store),blockType=(0,build_module.E7)(name);return(0,jsx_runtime.jsxs)(warning,{actions:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",onClick:()=>selectBlock(originalBlockClientId),children:(0,i18n_build_module.__)("Find original")},"find-original"),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",onClick:()=>onReplace([]),children:(0,i18n_build_module.__)("Remove")},"remove")],children:[(0,jsx_runtime.jsxs)("strong",{children:[blockType?.title,": "]}),(0,i18n_build_module.__)("This block can only be used once.")]})}const PrivateBlockContext=(0,react.createContext)({});function BlockEdit({mayDisplayControls,mayDisplayParentControls,blockEditingMode,isPreviewMode,...props}){const{name,isSelected,clientId,attributes={},__unstableLayoutClassNames}=props,{layout=null,metadata={}}=attributes,{bindings}=metadata,layoutSupport=(0,build_module.pN)(name,"layout",!1)||(0,build_module.pN)(name,"__experimentalLayout",!1),{originalBlockClientId}=(0,react.useContext)(PrivateBlockContext);return(0,jsx_runtime.jsxs)(Provider,{value:(0,react.useMemo)((()=>({name,isSelected,clientId,layout:layoutSupport?layout:null,__unstableLayoutClassNames,[mayDisplayControlsKey]:mayDisplayControls,[mayDisplayParentControlsKey]:mayDisplayParentControls,[blockEditingModeKey]:blockEditingMode,[blockBindingsKey]:bindings,[isPreviewModeKey]:isPreviewMode})),[name,isSelected,clientId,layoutSupport,layout,__unstableLayoutClassNames,mayDisplayControls,mayDisplayParentControls,blockEditingMode,bindings,isPreviewMode]),children:[(0,jsx_runtime.jsx)(block_edit_edit,{...props}),originalBlockClientId&&(0,jsx_runtime.jsx)(MultipleUsageWarning,{originalBlockClientId,name,onReplace:props.onReplace})]})}var modal=__webpack_require__("./packages/components/build-module/modal/index.js"),character=__webpack_require__("./node_modules/diff/lib/diff/character.js");function BlockView({title,rawContent,renderedContent,action,actionText,className}){return(0,jsx_runtime.jsxs)("div",{className,children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-compare__content",children:[(0,jsx_runtime.jsx)("h2",{className:"block-editor-block-compare__heading",children:title}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__html",children:rawContent}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__preview edit-post-visual-editor",children:(0,jsx_runtime.jsx)(raw_html.A,{children:(0,safe_html.A)(renderedContent)})})]}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__action",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",tabIndex:"0",onClick:action,children:actionText})})]})}const block_compare=function BlockCompare({block,onKeep,onConvert,convertor,convertButtonText}){const converted=function getConvertedContent(convertedBlock){const newContent=(Array.isArray(convertedBlock)?convertedBlock:[convertedBlock]).map((item=>(0,build_module.Z9)(item.name,item.attributes,item.innerBlocks)));return newContent.join("")}(convertor(block)),difference=function getDifference(originalContent,newContent){return(0,character.JJ)(originalContent,newContent).map(((item,pos)=>{const classes=(0,clsx.A)({"block-editor-block-compare__added":item.added,"block-editor-block-compare__removed":item.removed});return(0,jsx_runtime.jsx)("span",{className:classes,children:item.value},pos)}))}(block.originalContent,converted);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-compare__wrapper",children:[(0,jsx_runtime.jsx)(BlockView,{title:(0,i18n_build_module.__)("Current"),className:"block-editor-block-compare__current",action:onKeep,actionText:(0,i18n_build_module.__)("Convert to HTML"),rawContent:block.originalContent,renderedContent:block.originalContent}),(0,jsx_runtime.jsx)(BlockView,{title:(0,i18n_build_module.__)("After Conversion"),className:"block-editor-block-compare__converted",action:onConvert,actionText:convertButtonText,rawContent:difference,renderedContent:converted})]})},blockToBlocks=block=>(0,build_module.lh)({HTML:block.originalContent});function BlockInvalidWarning({clientId}){const{block,canInsertHTMLBlock,canInsertClassicBlock}=(0,use_select.A)((select=>{const{canInsertBlockType,getBlock,getBlockRootClientId}=select(store_store),rootClientId=getBlockRootClientId(clientId);return{block:getBlock(clientId),canInsertHTMLBlock:canInsertBlockType("core/html",rootClientId),canInsertClassicBlock:canInsertBlockType("core/freeform",rootClientId)}}),[clientId]),{replaceBlock}=(0,use_dispatch.A)(store_store),[compare,setCompare]=(0,react.useState)(!1),onCompareClose=(0,react.useCallback)((()=>setCompare(!1)),[]),convert=(0,react.useMemo)((()=>({toClassic(){const classicBlock=(0,build_module.Wv)("core/freeform",{content:block.originalContent});return replaceBlock(block.clientId,classicBlock)},toHTML(){const htmlBlock=(0,build_module.Wv)("core/html",{content:block.originalContent});return replaceBlock(block.clientId,htmlBlock)},toBlocks(){const newBlocks=blockToBlocks(block);return replaceBlock(block.clientId,newBlocks)},toRecoveredBlock(){const recoveredBlock=(0,build_module.Wv)(block.name,block.attributes,block.innerBlocks);return replaceBlock(block.clientId,recoveredBlock)}})),[block,replaceBlock]),secondaryActions=(0,react.useMemo)((()=>[{title:(0,i18n_build_module._x)("Resolve","imperative verb"),onClick:()=>setCompare(!0)},canInsertHTMLBlock&&{title:(0,i18n_build_module.__)("Convert to HTML"),onClick:convert.toHTML},canInsertClassicBlock&&{title:(0,i18n_build_module.__)("Convert to Classic Block"),onClick:convert.toClassic}].filter(Boolean)),[canInsertHTMLBlock,canInsertClassicBlock,convert]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(warning,{actions:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,onClick:convert.toRecoveredBlock,variant:"primary",children:(0,i18n_build_module.__)("Attempt recovery")},"recover")],secondaryActions,children:(0,i18n_build_module.__)("Block contains unexpected or invalid content.")}),compare&&(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Resolve Block"),onRequestClose:onCompareClose,className:"block-editor-block-compare",children:(0,jsx_runtime.jsx)(block_compare,{block,onKeep:convert.toHTML,onConvert:convert.toBlocks,convertor:blockToBlocks,convertButtonText:(0,i18n_build_module.__)("Convert to Blocks")})})]})}const block_crash_warning_warning=(0,jsx_runtime.jsx)(warning,{className:"block-editor-block-list__block-crash-warning",children:(0,i18n_build_module.__)("This block has encountered an error and cannot be previewed.")}),block_crash_warning=()=>block_crash_warning_warning;class BlockCrashBoundary extends react.Component{constructor(){super(...arguments),this.state={hasError:!1}}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?this.props.fallback:this.props.children}}BlockCrashBoundary.displayName="BlockCrashBoundary";const block_crash_boundary=BlockCrashBoundary;var lib=__webpack_require__("./node_modules/react-autosize-textarea/lib/index.js");const block_html=function BlockHTML({clientId}){const[html,setHtml]=(0,react.useState)(""),block=(0,use_select.A)((select=>select(store_store).getBlock(clientId)),[clientId]),{updateBlock}=(0,use_dispatch.A)(store_store);return(0,react.useEffect)((()=>{setHtml((0,build_module.F8)(block))}),[block]),(0,jsx_runtime.jsx)(lib.A,{className:"block-editor-block-list__block-html-textarea",value:html,onBlur:()=>{const blockType=(0,build_module.E7)(block.name);if(!blockType)return;const attributes=(0,build_module.Ph)(blockType,html,block.attributes),content=html||(0,build_module.Z9)(blockType,attributes),[isValid]=html?(0,build_module.YV)({...block,attributes,originalContent:content}):[!0];updateBlock(clientId,{attributes,originalContent:content,isValid}),html||setHtml(content)},onChange:event=>setHtml(event.target.value)})};var react_spring_web_esm=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),get_scroll_container=__webpack_require__("./packages/dom/build-module/dom/get-scroll-container.js");function getAbsolutePosition(element){return{top:element.offsetTop,left:element.offsetLeft}}const use_moving_animation=function useMovingAnimation({triggerAnimationOnChange,clientId}){const ref=(0,react.useRef)(),{isTyping,getGlobalBlockCount,isBlockSelected,isFirstMultiSelectedBlock,isBlockMultiSelected,isAncestorMultiSelected}=(0,use_select.A)(store_store),{previous,prevRect}=(0,react.useMemo)((()=>({previous:ref.current&&getAbsolutePosition(ref.current),prevRect:ref.current&&ref.current.getBoundingClientRect()})),[triggerAnimationOnChange]);return(0,react.useLayoutEffect)((()=>{if(!previous||!ref.current)return;const scrollContainer=(0,get_scroll_container.A)(ref.current),isSelected=isBlockSelected(clientId),adjustScrolling=isSelected||isFirstMultiSelectedBlock(clientId);function preserveScrollPosition(){if(adjustScrolling&&prevRect){const diff=ref.current.getBoundingClientRect().top-prevRect.top;diff&&(scrollContainer.scrollTop+=diff)}}if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||isTyping()||getGlobalBlockCount()>200)return void preserveScrollPosition();const zIndex=isSelected||isBlockMultiSelected(clientId)||isAncestorMultiSelected(clientId)?"1":"",controller=new react_spring_web_esm.Controller({x:0,y:0,config:{mass:5,tension:2e3,friction:200},onChange({value}){if(!ref.current)return;let{x,y}=value;x=Math.round(x),y=Math.round(y);const finishedMoving=0===x&&0===y;ref.current.style.transformOrigin="center center",ref.current.style.transform=finishedMoving?null:`translate3d(${x}px,${y}px,0)`,ref.current.style.zIndex=zIndex,preserveScrollPosition()}});ref.current.style.transform=void 0;const destination=getAbsolutePosition(ref.current),x=Math.round(previous.left-destination.left),y=Math.round(previous.top-destination.top);return controller.start({x:0,y:0,from:{x,y}}),()=>{controller.stop(),controller.set({x:0,y:0})}}),[previous,prevRect,clientId,isTyping,getGlobalBlockCount,isBlockSelected,isFirstMultiSelectedBlock,isBlockMultiSelected,isAncestorMultiSelected]),ref};var is_text_field=__webpack_require__("./packages/dom/build-module/dom/is-text-field.js"),is_form_element=__webpack_require__("./packages/dom/build-module/dom/is-form-element.js"),place_caret_at_horizontal_edge=__webpack_require__("./packages/dom/build-module/dom/place-caret-at-horizontal-edge.js");function useFocusFirstElement({clientId,initialPosition}){const ref=(0,react.useRef)(),{isBlockSelected,isMultiSelecting,isZoomOut}=unlock((0,use_select.A)(store_store));return(0,react.useEffect)((()=>{if(!isBlockSelected(clientId)||isMultiSelecting()||isZoomOut())return;if(null==initialPosition)return;if(!ref.current)return;const{ownerDocument}=ref.current;if(isInsideRootBlock(ref.current,ownerDocument.activeElement))return;const textInputs=dom_build_module.XC.tabbable.find(ref.current).filter((node=>(0,is_text_field.A)(node))),isReverse=-1===initialPosition,target=textInputs[isReverse?textInputs.length-1:0]||ref.current;if(isInsideRootBlock(ref.current,target)){if(!ref.current.getAttribute("contenteditable")){const focusElement=dom_build_module.XC.tabbable.findNext(ref.current);if(focusElement&&isInsideRootBlock(ref.current,focusElement)&&(0,is_form_element.A)(focusElement))return void focusElement.focus()}(0,place_caret_at_horizontal_edge.A)(target,isReverse)}else ref.current.focus()}),[initialPosition,clientId]),ref}function useIsHovered({clientId}){const{hoverBlock}=(0,use_dispatch.A)(store_store);function listener(event){if(event.defaultPrevented)return;const action="mouseover"===event.type?"add":"remove";event.preventDefault(),event.currentTarget.classList[action]("is-hovered"),hoverBlock("add"===action?clientId:null)}return(0,use_ref_effect.A)((node=>(node.addEventListener("mouseout",listener),node.addEventListener("mouseover",listener),()=>{node.removeEventListener("mouseout",listener),node.removeEventListener("mouseover",listener),node.classList.remove("is-hovered"),hoverBlock(null)})),[])}function useFocusHandler(clientId){const{isBlockSelected}=(0,use_select.A)(store_store),{selectBlock,selectionChange}=(0,use_dispatch.A)(store_store);return(0,use_ref_effect.A)((node=>{function onFocus(event){node.parentElement.closest('[contenteditable="true"]')||(isBlockSelected(clientId)?event.target.isContentEditable||selectionChange(clientId):isInsideRootBlock(node,event.target)&&selectBlock(clientId))}return node.addEventListener("focusin",onFocus),()=>{node.removeEventListener("focusin",onFocus)}}),[isBlockSelected,selectBlock])}function useEventHandlers({clientId,isSelected}){const{getBlockRootClientId,getBlockIndex,isZoomOut}=unlock((0,use_select.A)(store_store)),{insertAfterBlock,removeBlock,resetZoomLevel}=unlock((0,use_dispatch.A)(store_store));return(0,use_ref_effect.A)((node=>{if(isSelected)return node.addEventListener("keydown",onKeyDown),node.addEventListener("dragstart",onDragStart),()=>{node.removeEventListener("keydown",onKeyDown),node.removeEventListener("dragstart",onDragStart)};function onKeyDown(event){const{keyCode,target}=event;keyCode!==keycodes_build_module.Fm&&keyCode!==keycodes_build_module.G_&&keyCode!==keycodes_build_module.SJ||target!==node||(0,is_text_field.A)(target)||(event.preventDefault(),keyCode===keycodes_build_module.Fm&&isZoomOut()?resetZoomLevel():keyCode===keycodes_build_module.Fm?insertAfterBlock(clientId):removeBlock(clientId))}function onDragStart(event){event.preventDefault()}}),[clientId,isSelected,getBlockRootClientId,getBlockIndex,insertAfterBlock,removeBlock,isZoomOut,resetZoomLevel])}function useIntersectionObserver(){const observer=(0,react.useContext)(IntersectionObserver);return(0,use_ref_effect.A)((node=>{if(observer)return observer.observe(node),()=>{observer.unobserve(node)}}),[observer])}function useScrollIntoView({isSelected}){const prefersReducedMotion=(0,use_reduced_motion.A)();return(0,use_ref_effect.A)((node=>{if(isSelected){const{ownerDocument}=node,{defaultView}=ownerDocument;if(!defaultView.IntersectionObserver)return;const observer=new defaultView.IntersectionObserver((entries=>{entries[0].isIntersecting||node.scrollIntoView({behavior:prefersReducedMotion?"instant":"smooth"}),observer.disconnect()}));return observer.observe(node),()=>{observer.disconnect()}}}),[isSelected])}function useFlashEditableBlocks({clientId="",isEnabled=!0}={}){const{getEnabledClientIdsTree}=unlock((0,use_select.A)(store_store));return(0,use_ref_effect.A)((element=>{if(!isEnabled)return;const handleClick=event=>{(event.target===element||event.target.classList.contains("is-root-container"))&&(event.defaultPrevented||(event.preventDefault(),getEnabledClientIdsTree(clientId).forEach((({clientId:id})=>{const block=element.querySelector(`[data-block="${id}"]`);block&&(block.classList.remove("has-editable-outline"),block.offsetWidth,block.classList.add("has-editable-outline"))}))))};return element.addEventListener("click",handleClick),()=>element.removeEventListener("click",handleClick)}),[isEnabled])}const BLOCK_BINDINGS_ALLOWED_BLOCKS={"core/paragraph":["content"],"core/heading":["content"],"core/image":["id","url","title","alt"],"core/button":["url","text","linkTarget","rel"]};function canBindBlock(blockName){return blockName in BLOCK_BINDINGS_ALLOWED_BLOCKS}function canBindAttribute(blockName,attributeName){return canBindBlock(blockName)&&BLOCK_BINDINGS_ALLOWED_BLOCKS[blockName].includes(attributeName)}const withBlockBindingSupport=(0,create_higher_order_component.f)((BlockEdit=>props=>{const registry=(0,use_registry.A)(),blockContext=(0,react.useContext)(block_context),sources=(0,use_select.A)((select=>unlock(select(build_module.M_)).getAllBlockBindingsSources())),{name,clientId,context,setAttributes}=props,blockBindings=(0,react.useMemo)((()=>function replacePatternOverrideDefaultBindings(blockName,bindings){if("core/pattern-overrides"===bindings?.__default?.source){const supportedAttributes=BLOCK_BINDINGS_ALLOWED_BLOCKS[blockName],bindingsWithDefaults={};for(const attributeName of supportedAttributes){const bindingSource=bindings[attributeName]?bindings[attributeName]:{source:"core/pattern-overrides"};bindingsWithDefaults[attributeName]=bindingSource}return bindingsWithDefaults}return bindings}(name,props.attributes.metadata?.bindings)),[props.attributes.metadata?.bindings,name]),updatedContext={},boundAttributes=(0,use_select.A)((select=>{if(!blockBindings)return;const attributes={},blockBindingsBySource=new Map;for(const[attributeName,binding]of Object.entries(blockBindings)){const{source:sourceName,args:sourceArgs}=binding,source=sources[sourceName];if(source&&canBindAttribute(name,attributeName)){for(const key of source.usesContext||[])updatedContext[key]=blockContext[key];blockBindingsBySource.set(source,{...blockBindingsBySource.get(source),[attributeName]:{args:sourceArgs}})}}if(blockBindingsBySource.size)for(const[source,bindings]of blockBindingsBySource){let values={};source.getValues?values=source.getValues({select,context:updatedContext,clientId,bindings}):Object.keys(bindings).forEach((attr=>{values[attr]=source.label}));for(const[attributeName,value]of Object.entries(values))"url"!==attributeName||value&&isURLLike(value)?attributes[attributeName]=value:attributes[attributeName]=null}return attributes}),[blockBindings,name,clientId,updatedContext,sources]),hasParentPattern=!!updatedContext["pattern/overrides"],hasPatternOverridesDefaultBinding="core/pattern-overrides"===props.attributes.metadata?.bindings?.__default?.source,_setAttributes=(0,react.useCallback)((nextAttributes=>{registry.batch((()=>{if(!blockBindings)return void setAttributes(nextAttributes);const keptAttributes={...nextAttributes},blockBindingsBySource=new Map;for(const[attributeName,newValue]of Object.entries(keptAttributes)){if(!blockBindings[attributeName]||!canBindAttribute(name,attributeName))continue;const binding=blockBindings[attributeName],source=sources[binding?.source];source?.setValues&&(blockBindingsBySource.set(source,{...blockBindingsBySource.get(source),[attributeName]:{args:binding.args,newValue}}),delete keptAttributes[attributeName])}if(blockBindingsBySource.size)for(const[source,bindings]of blockBindingsBySource)source.setValues({select:registry.select,dispatch:registry.dispatch,context:updatedContext,clientId,bindings});hasPatternOverridesDefaultBinding&&hasParentPattern||!Object.keys(keptAttributes).length||(hasPatternOverridesDefaultBinding&&(delete keptAttributes?.caption,delete keptAttributes?.href),setAttributes(keptAttributes))}))}),[registry,blockBindings,name,clientId,updatedContext,setAttributes,sources,hasPatternOverridesDefaultBinding,hasParentPattern]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(BlockEdit,{...props,attributes:{...props.attributes,...boundAttributes},setAttributes:_setAttributes,context:{...context,...updatedContext}})})}),"withBlockBindingSupport");function use_block_props_useBlockProps(props={},{__unstableIsHtml}={}){const{clientId,className,wrapperProps={},isAligned,index,mode,name,blockApiVersion,blockTitle,isSelected,isSubtreeDisabled,hasOverlay,initialPosition,blockEditingMode,isHighlighted,isMultiSelected,isPartiallySelected,isReusable,isDragging,hasChildSelected,isEditingDisabled,hasEditableOutline,isTemporarilyEditingAsBlocks,defaultClassName,isSectionBlock}=(0,react.useContext)(PrivateBlockContext),blockLabel=(0,i18n_build_module.nv)((0,i18n_build_module.__)("Block: %s"),blockTitle),htmlSuffix="html"!==mode||__unstableIsHtml?"":"-visual",mergedRefs=(0,use_merge_refs.A)([props.ref,useFocusFirstElement({clientId,initialPosition}),useBlockRefProvider(clientId),useFocusHandler(clientId),useEventHandlers({clientId,isSelected}),useIsHovered({clientId}),useIntersectionObserver(),use_moving_animation({triggerAnimationOnChange:index,clientId}),(0,use_disabled.A)({isDisabled:!hasOverlay}),useFlashEditableBlocks({clientId,isEnabled:isSectionBlock}),useScrollIntoView({isSelected})]),blockEditContext=useBlockEditContext(),bindingsStyle=!!blockEditContext[blockBindingsKey]&&canBindBlock(name)?{"--wp-admin-theme-color":"var(--wp-block-synced-color)","--wp-admin-theme-color--rgb":"var(--wp-block-synced-color--rgb)"}:{};blockApiVersion<2&&clientId===blockEditContext.clientId&&!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)(`Block type "${name}" must support API version 2 or higher to work correctly with "useBlockProps" method.`);let hasNegativeMargin=!1;return"-"!==wrapperProps?.style?.marginTop?.charAt(0)&&"-"!==wrapperProps?.style?.marginBottom?.charAt(0)&&"-"!==wrapperProps?.style?.marginLeft?.charAt(0)&&"-"!==wrapperProps?.style?.marginRight?.charAt(0)||(hasNegativeMargin=!0),{tabIndex:"disabled"===blockEditingMode?-1:0,...wrapperProps,...props,ref:mergedRefs,id:`block-${clientId}${htmlSuffix}`,role:"document","aria-label":blockLabel,"data-block":clientId,"data-type":name,"data-title":blockTitle,inert:isSubtreeDisabled?"true":void 0,className:(0,clsx.A)("block-editor-block-list__block",{"wp-block":!isAligned,"has-block-overlay":hasOverlay,"is-selected":isSelected,"is-highlighted":isHighlighted,"is-multi-selected":isMultiSelected,"is-partially-selected":isPartiallySelected,"is-reusable":isReusable,"is-dragging":isDragging,"has-child-selected":hasChildSelected,"is-editing-disabled":isEditingDisabled,"has-editable-outline":hasEditableOutline,"has-negative-margin":hasNegativeMargin,"is-content-locked-temporarily-editing-as-blocks":isTemporarilyEditingAsBlocks},className,props.className,wrapperProps.className,defaultClassName),style:{...wrapperProps.style,...props.style,...bindingsStyle}}}(0,hooks_build_module.U2)("blocks.registerBlockType","core/editor/custom-sources-backwards-compatibility/shim-attribute-source",(function shimAttributeSource(settings,name){return canBindBlock(name)?{...settings,edit:withBlockBindingSupport(settings.edit)}:settings})),use_block_props_useBlockProps.save=build_module.cV;const{isUnmodifiedBlockContent}=unlock(build_module.jb);function Block({children,isHtml,...props}){return(0,jsx_runtime.jsx)("div",{...use_block_props_useBlockProps(props,{__unstableIsHtml:isHtml}),children})}function BlockListBlock({block:{__unstableBlockSource},mode,isLocked,canRemove,clientId,isSelected,isSelectionEnabled,className,__unstableLayoutClassNames:layoutClassNames,name,isValid,attributes,wrapperProps,setAttributes,onReplace,onInsertBlocksAfter,onMerge,toggleSelection}){var _wrapperProps;const{mayDisplayControls,mayDisplayParentControls,themeSupportsLayout,...context}=(0,react.useContext)(PrivateBlockContext),{removeBlock}=(0,use_dispatch.A)(store_store),onRemove=(0,react.useCallback)((()=>removeBlock(clientId)),[clientId,removeBlock]),parentLayout=useLayout()||{};let blockEdit=(0,jsx_runtime.jsx)(BlockEdit,{name,isSelected,attributes,setAttributes,insertBlocksAfter:isLocked?void 0:onInsertBlocksAfter,onReplace:canRemove?onReplace:void 0,onRemove:canRemove?onRemove:void 0,mergeBlocks:canRemove?onMerge:void 0,clientId,isSelectionEnabled,toggleSelection,__unstableLayoutClassNames:layoutClassNames,__unstableParentLayout:Object.keys(parentLayout).length?parentLayout:void 0,mayDisplayControls,mayDisplayParentControls,blockEditingMode:context.blockEditingMode,isPreviewMode:context.isPreviewMode});const blockType=(0,build_module.E7)(name);blockType?.getEditWrapperProps&&(wrapperProps=function mergeWrapperProps(propsA,propsB){const newProps={...propsA,...propsB};return propsA?.hasOwnProperty("className")&&propsB?.hasOwnProperty("className")&&(newProps.className=(0,clsx.A)(propsA.className,propsB.className)),propsA?.hasOwnProperty("style")&&propsB?.hasOwnProperty("style")&&(newProps.style={...propsA.style,...propsB.style}),newProps}(wrapperProps,blockType.getEditWrapperProps(attributes)));const isAligned=wrapperProps&&!!wrapperProps["data-align"]&&!themeSupportsLayout,isSticky=className?.includes("is-position-sticky");let block;if(isAligned&&(blockEdit=(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("wp-block",isSticky&&className),"data-align":wrapperProps["data-align"],children:blockEdit})),isValid)block="html"===mode?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{display:"none"},children:blockEdit}),(0,jsx_runtime.jsx)(Block,{isHtml:!0,children:(0,jsx_runtime.jsx)(block_html,{clientId})})]}):blockType?.apiVersion>1?blockEdit:(0,jsx_runtime.jsx)(Block,{children:blockEdit});else{const saveContent=__unstableBlockSource?(0,build_module.Kx)(__unstableBlockSource):(0,build_module.Z9)(blockType,attributes);block=(0,jsx_runtime.jsxs)(Block,{className:"has-warning",children:[(0,jsx_runtime.jsx)(BlockInvalidWarning,{clientId}),(0,jsx_runtime.jsx)(raw_html.A,{children:(0,safe_html.A)(saveContent)})]})}const{"data-align":dataAlign,...restWrapperProps}=null!==(_wrapperProps=wrapperProps)&&void 0!==_wrapperProps?_wrapperProps:{},updatedWrapperProps={...restWrapperProps,className:(0,clsx.A)(restWrapperProps.className,dataAlign&&themeSupportsLayout&&`align${dataAlign}`,!(dataAlign&&isSticky)&&className)};return(0,jsx_runtime.jsx)(PrivateBlockContext.Provider,{value:{wrapperProps:updatedWrapperProps,isAligned,...context},children:(0,jsx_runtime.jsx)(block_crash_boundary,{fallback:(0,jsx_runtime.jsx)(Block,{className:"has-warning",children:(0,jsx_runtime.jsx)(block_crash_warning,{})}),children:block})})}const applyWithDispatch=(0,with_dispatch.A)(((dispatch,ownProps,registry)=>{const{updateBlockAttributes,insertBlocks,mergeBlocks,replaceBlocks,toggleSelection,__unstableMarkLastChangeAsPersistent,moveBlocksToPosition,removeBlock,selectBlock}=dispatch(store_store);return{setAttributes(newAttributes){const{getMultiSelectedBlockClientIds}=registry.select(store_store),multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(),{clientId}=ownProps,clientIds=multiSelectedBlockClientIds.length?multiSelectedBlockClientIds:[clientId];updateBlockAttributes(clientIds,newAttributes)},onInsertBlocks(blocks,index){const{rootClientId}=ownProps;insertBlocks(blocks,index,rootClientId)},onInsertBlocksAfter(blocks){const{clientId,rootClientId}=ownProps,{getBlockIndex}=registry.select(store_store),index=getBlockIndex(clientId);insertBlocks(blocks,index+1,rootClientId)},onMerge(forward){const{clientId,rootClientId}=ownProps,{getPreviousBlockClientId,getNextBlockClientId,getBlock,getBlockAttributes,getBlockName,getBlockOrder,getBlockIndex,getBlockRootClientId,canInsertBlockType}=registry.select(store_store);function switchToDefaultOrRemove(){const block=getBlock(clientId),defaultBlockName=(0,build_module.K$)();if(getBlockName(clientId)!==defaultBlockName){const replacement=(0,build_module.bh)(block,defaultBlockName);replacement&&replacement.length&&replaceBlocks(clientId,replacement)}else if((0,build_module.Xw)(block)){const nextBlockClientId=getNextBlockClientId(clientId);nextBlockClientId&&registry.batch((()=>{removeBlock(clientId),selectBlock(nextBlockClientId)}))}}function moveFirstItemUp(_clientId,changeSelection=!0){const targetRootClientId=getBlockRootClientId(_clientId),blockOrder=getBlockOrder(_clientId),[firstClientId]=blockOrder;1===blockOrder.length&&(0,build_module.C5)(getBlock(firstClientId))?removeBlock(_clientId):registry.batch((()=>{const firstBlock=getBlock(firstClientId),isFirstBlockContentUnmodified=isUnmodifiedBlockContent(firstBlock),defaultBlockName=(0,build_module.K$)(),replacement=(0,build_module.bh)(firstBlock,defaultBlockName),canTransformToDefaultBlock=!!replacement?.length&&replacement.every((block=>canInsertBlockType(block.name,_clientId)));if(isFirstBlockContentUnmodified&&canTransformToDefaultBlock)replaceBlocks(firstClientId,replacement,changeSelection);else if(isFirstBlockContentUnmodified&&firstBlock.name===defaultBlockName){removeBlock(firstClientId);const nextBlockClientId=getNextBlockClientId(clientId);nextBlockClientId&&selectBlock(nextBlockClientId)}else if(canInsertBlockType(firstBlock.name,targetRootClientId))moveBlocksToPosition([firstClientId],_clientId,targetRootClientId,getBlockIndex(_clientId));else{const canLiftAndTransformToDefaultBlock=!!replacement?.length&&replacement.every((block=>canInsertBlockType(block.name,targetRootClientId)));canLiftAndTransformToDefaultBlock?(insertBlocks(replacement,getBlockIndex(_clientId),targetRootClientId,changeSelection),removeBlock(firstClientId,!1)):switchToDefaultOrRemove()}!getBlockOrder(_clientId).length&&(0,build_module.C5)(getBlock(_clientId))&&removeBlock(_clientId,!1)}))}if(forward){if(rootClientId){const nextRootClientId=getNextBlockClientId(rootClientId);if(nextRootClientId){if(getBlockName(rootClientId)!==getBlockName(nextRootClientId))return void mergeBlocks(rootClientId,nextRootClientId);{const rootAttributes=getBlockAttributes(rootClientId),previousRootAttributes=getBlockAttributes(nextRootClientId);if(Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key])))return void registry.batch((()=>{moveBlocksToPosition(getBlockOrder(nextRootClientId),nextRootClientId,rootClientId),removeBlock(nextRootClientId,!1)}))}}}const nextBlockClientId=getNextBlockClientId(clientId);if(!nextBlockClientId)return;getBlockOrder(nextBlockClientId).length?moveFirstItemUp(nextBlockClientId,!1):mergeBlocks(clientId,nextBlockClientId)}else{const previousBlockClientId=getPreviousBlockClientId(clientId);if(previousBlockClientId)mergeBlocks(previousBlockClientId,clientId);else if(rootClientId){const previousRootClientId=getPreviousBlockClientId(rootClientId);if(previousRootClientId&&getBlockName(rootClientId)===getBlockName(previousRootClientId)){const rootAttributes=getBlockAttributes(rootClientId),previousRootAttributes=getBlockAttributes(previousRootClientId);if(Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key])))return void registry.batch((()=>{moveBlocksToPosition(getBlockOrder(rootClientId),rootClientId,previousRootClientId),removeBlock(rootClientId,!1)}))}moveFirstItemUp(rootClientId)}else switchToDefaultOrRemove()}},onReplace(blocks,indexToSelect,initialPosition){blocks.length&&!(0,build_module.Xw)(blocks[blocks.length-1])&&__unstableMarkLastChangeAsPersistent();const replacementBlocks=1===blocks?.length&&Array.isArray(blocks[0])?blocks[0]:blocks;replaceBlocks([ownProps.clientId],replacementBlocks,indexToSelect,initialPosition)},toggleSelection(selectionEnabled){toggleSelection(selectionEnabled)}}}));BlockListBlock=(0,compose.A)(applyWithDispatch,(0,with_filters.A)("editor.BlockListBlock"))(BlockListBlock);const block=(0,react.memo)((function BlockListBlockProvider(props){const{clientId,rootClientId}=props,selectedProps=(0,use_select.A)((select=>{const{isBlockSelected,getBlockMode,isSelectionEnabled,getTemplateLock,isSectionBlock:_isSectionBlock,getBlockWithoutAttributes,getBlockAttributes,canRemoveBlock,canMoveBlock,getSettings,getTemporarilyEditingAsBlocks,getBlockEditingMode,getBlockName,isFirstMultiSelectedBlock,getMultiSelectedBlockClientIds,hasSelectedInnerBlock,getBlocksByName,getBlockIndex,isBlockMultiSelected,isBlockSubtreeDisabled,isBlockHighlighted,__unstableIsFullySelected,__unstableSelectionHasUnmergeableBlock,isBlockBeingDragged,isDragging,__unstableHasActiveBlockOverlayActive,getSelectedBlocksInitialCaretPosition}=unlock(select(store_store)),blockWithoutAttributes=getBlockWithoutAttributes(clientId);if(!blockWithoutAttributes)return;const{hasBlockSupport:_hasBlockSupport,getActiveBlockVariation}=select(build_module.M_),attributes=getBlockAttributes(clientId),{name:blockName,isValid}=blockWithoutAttributes,blockType=(0,build_module.E7)(blockName),{supportsLayout,isPreviewMode}=getSettings(),hasLightBlockWrapper=blockType?.apiVersion>1,previewContext={isPreviewMode,blockWithoutAttributes,name:blockName,attributes,isValid,themeSupportsLayout:supportsLayout,index:getBlockIndex(clientId),isReusable:(0,build_module.tk)(blockType),className:hasLightBlockWrapper?attributes.className:void 0,defaultClassName:hasLightBlockWrapper?(0,build_module.KW)(blockName):void 0,blockTitle:blockType?.title};if(isPreviewMode)return previewContext;const _isSelected=isBlockSelected(clientId),canRemove=canRemoveBlock(clientId),canMove=canMoveBlock(clientId),match=getActiveBlockVariation(blockName,attributes),isMultiSelected=isBlockMultiSelected(clientId),isAncestorOfSelectedBlock=hasSelectedInnerBlock(clientId,!0),blockEditingMode=getBlockEditingMode(clientId),blocksWithSameName=(0,build_module.pN)(blockName,"multiple",!0)?[]:getBlocksByName(blockName),isInvalid=blocksWithSameName.length&&blocksWithSameName[0]!==clientId;return{...previewContext,mode:getBlockMode(clientId),isSelectionEnabled:isSelectionEnabled(),isLocked:!!getTemplateLock(rootClientId),isSectionBlock:_isSectionBlock(clientId),canRemove,canMove,isSelected:_isSelected,isTemporarilyEditingAsBlocks:getTemporarilyEditingAsBlocks()===clientId,blockEditingMode,mayDisplayControls:_isSelected||isFirstMultiSelectedBlock(clientId)&&getMultiSelectedBlockClientIds().every((id=>getBlockName(id)===blockName)),mayDisplayParentControls:_hasBlockSupport(getBlockName(clientId),"__experimentalExposeControlsToChildren",!1)&&hasSelectedInnerBlock(clientId),blockApiVersion:blockType?.apiVersion||1,blockTitle:match?.title||blockType?.title,isSubtreeDisabled:"disabled"===blockEditingMode&&isBlockSubtreeDisabled(clientId),hasOverlay:__unstableHasActiveBlockOverlayActive(clientId)&&!isDragging(),initialPosition:_isSelected?getSelectedBlocksInitialCaretPosition():void 0,isHighlighted:isBlockHighlighted(clientId),isMultiSelected,isPartiallySelected:isMultiSelected&&!__unstableIsFullySelected()&&!__unstableSelectionHasUnmergeableBlock(),isDragging:isBlockBeingDragged(clientId),hasChildSelected:isAncestorOfSelectedBlock,isEditingDisabled:"disabled"===blockEditingMode,hasEditableOutline:"disabled"!==blockEditingMode&&"disabled"===getBlockEditingMode(rootClientId),originalBlockClientId:!!isInvalid&&blocksWithSameName[0]}}),[clientId,rootClientId]),{isPreviewMode,mode="visual",isSelectionEnabled=!1,isLocked=!1,canRemove=!1,canMove=!1,blockWithoutAttributes,name,attributes,isValid,isSelected=!1,themeSupportsLayout,isTemporarilyEditingAsBlocks,blockEditingMode,mayDisplayControls,mayDisplayParentControls,index,blockApiVersion,blockTitle,isSubtreeDisabled,hasOverlay,initialPosition,isHighlighted,isMultiSelected,isPartiallySelected,isReusable,isDragging,hasChildSelected,isSectionBlock,isEditingDisabled,hasEditableOutline,className,defaultClassName,originalBlockClientId}=selectedProps,block=(0,react.useMemo)((()=>({...blockWithoutAttributes,attributes})),[blockWithoutAttributes,attributes]);if(!selectedProps)return null;const privateContext={isPreviewMode,clientId,className,index,mode,name,blockApiVersion,blockTitle,isSelected,isSubtreeDisabled,hasOverlay,initialPosition,blockEditingMode,isHighlighted,isMultiSelected,isPartiallySelected,isReusable,isDragging,hasChildSelected,isSectionBlock,isEditingDisabled,hasEditableOutline,isTemporarilyEditingAsBlocks,defaultClassName,mayDisplayControls,mayDisplayParentControls,originalBlockClientId,themeSupportsLayout};return(0,jsx_runtime.jsx)(PrivateBlockContext.Provider,{value:privateContext,children:(0,jsx_runtime.jsx)(BlockListBlock,{...props,mode,isSelectionEnabled,isLocked,canRemove,canMove,block,name,attributes,isValid,isSelected})})}));var html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js");const ZWNBSP="\ufeff";function DefaultBlockAppender({rootClientId}){const{showPrompt,isLocked,placeholder,isManualGrid}=(0,use_select.A)((select=>{const{getBlockCount,getSettings,getTemplateLock,getBlockAttributes}=select(store_store),isEmpty=!getBlockCount(rootClientId),{bodyPlaceholder}=getSettings();return{showPrompt:isEmpty,isLocked:!!getTemplateLock(rootClientId),placeholder:bodyPlaceholder,isManualGrid:getBlockAttributes(rootClientId)?.layout?.isManualPlacement}}),[rootClientId]),{insertDefaultBlock,startTyping}=(0,use_dispatch.A)(store_store);if(isLocked||isManualGrid)return null;const value=(0,html_entities_build_module.S)(placeholder)||(0,i18n_build_module.__)("Type / to choose a block"),onAppend=()=>{insertDefaultBlock(void 0,rootClientId),startTyping()};return(0,jsx_runtime.jsxs)("div",{"data-root-client-id":rootClientId||"",className:(0,clsx.A)("block-editor-default-block-appender",{"has-visible-prompt":showPrompt}),children:[(0,jsx_runtime.jsx)("p",{tabIndex:"0",role:"button","aria-label":(0,i18n_build_module.__)("Add default block"),className:"block-editor-default-block-appender__content",onKeyDown:event=>{keycodes_build_module.Fm!==event.keyCode&&keycodes_build_module.t6!==event.keyCode||onAppend()},onClick:()=>onAppend(),onFocus:()=>{showPrompt&&onAppend()},children:showPrompt?value:ZWNBSP}),(0,jsx_runtime.jsx)(inserter,{rootClientId,position:"bottom right",isAppender:!0,__experimentalIsQuick:!0})]})}function DefaultAppender({rootClientId}){return(0,use_select.A)((select=>select(store_store).canInsertBlockType((0,build_module.K$)(),rootClientId)))?(0,jsx_runtime.jsx)(DefaultBlockAppender,{rootClientId}):(0,jsx_runtime.jsx)(button_block_appender,{rootClientId,className:"block-list-appender__toggle"})}function BlockListAppender({rootClientId,CustomAppender,className,tagName:TagName="div"}){const isDragOver=(0,use_select.A)((select=>{const{getBlockInsertionPoint,isBlockInsertionPointVisible,getBlockCount}=select(store_store),insertionPoint=getBlockInsertionPoint();return isBlockInsertionPointVisible()&&rootClientId===insertionPoint?.rootClientId&&0===getBlockCount(rootClientId)}),[rootClientId]);return(0,jsx_runtime.jsx)(TagName,{tabIndex:-1,className:(0,clsx.A)("block-list-appender wp-block",className,{"is-drag-over":isDragOver}),contentEditable:!1,"data-block":!0,children:CustomAppender?(0,jsx_runtime.jsx)(CustomAppender,{}):(0,jsx_runtime.jsx)(DefaultAppender,{rootClientId})})}const inbetween_MAX_POPOVER_RECOMPUTE_COUNTER=Number.MAX_SAFE_INTEGER;(0,react.createContext)();const inbetween=function BlockPopoverInbetween({previousClientId,nextClientId,children,__unstablePopoverSlot,__unstableContentRef,operation="insert",nearestSide="right",...props}){const[popoverRecomputeCounter,forcePopoverRecompute]=(0,react.useReducer)((s=>(s+1)%inbetween_MAX_POPOVER_RECOMPUTE_COUNTER),0),{orientation,rootClientId,isVisible}=(0,use_select.A)((select=>{const{getBlockListSettings,getBlockRootClientId,isBlockVisible}=select(store_store),_rootClientId=getBlockRootClientId(null!=previousClientId?previousClientId:nextClientId);return{orientation:getBlockListSettings(_rootClientId)?.orientation||"vertical",rootClientId:_rootClientId,isVisible:isBlockVisible(previousClientId)&&isBlockVisible(nextClientId)}}),[previousClientId,nextClientId]),previousElement=useBlockElement(previousClientId),nextElement=useBlockElement(nextClientId),isVertical="vertical"===orientation,popoverAnchor=(0,react.useMemo)((()=>{if(popoverRecomputeCounter<0||!previousElement&&!nextElement||!isVisible)return;return{contextElement:"group"===operation?nextElement||previousElement:previousElement||nextElement,getBoundingClientRect(){const previousRect=previousElement?previousElement.getBoundingClientRect():null,nextRect=nextElement?nextElement.getBoundingClientRect():null;let left=0,top=0,width=0,height=0;if("group"===operation){const targetRect=nextRect||previousRect;top=targetRect.top,width=0,height=targetRect.bottom-targetRect.top,left="left"===nearestSide?targetRect.left-2:targetRect.right-2}else isVertical?(top=previousRect?previousRect.bottom:nextRect.top,width=previousRect?previousRect.width:nextRect.width,height=nextRect&&previousRect?nextRect.top-previousRect.bottom:0,left=previousRect?previousRect.left:nextRect.left):(top=previousRect?previousRect.top:nextRect.top,height=previousRect?previousRect.height:nextRect.height,(0,i18n_build_module.V8)()?(left=nextRect?nextRect.right:previousRect.left,width=previousRect&&nextRect?previousRect.left-nextRect.right:0):(left=previousRect?previousRect.right:nextRect.left,width=previousRect&&nextRect?nextRect.left-previousRect.right:0));return new window.DOMRect(left,top,width,height)}}}),[previousElement,nextElement,popoverRecomputeCounter,isVertical,isVisible,operation,nearestSide]),popoverScrollRef=use_popover_scroll(__unstableContentRef);return(0,react.useLayoutEffect)((()=>{if(!previousElement)return;const observer=new window.MutationObserver(forcePopoverRecompute);return observer.observe(previousElement,{attributes:!0}),()=>{observer.disconnect()}}),[previousElement]),(0,react.useLayoutEffect)((()=>{if(!nextElement)return;const observer=new window.MutationObserver(forcePopoverRecompute);return observer.observe(nextElement,{attributes:!0}),()=>{observer.disconnect()}}),[nextElement]),(0,react.useLayoutEffect)((()=>{if(previousElement)return previousElement.ownerDocument.defaultView.addEventListener("resize",forcePopoverRecompute),()=>{previousElement.ownerDocument.defaultView?.removeEventListener("resize",forcePopoverRecompute)}}),[previousElement]),(previousElement||nextElement)&&isVisible?(0,jsx_runtime.jsx)(popover.Ay,{ref:popoverScrollRef,animate:!1,anchor:popoverAnchor,focusOnMount:!1,__unstableSlotName:__unstablePopoverSlot,inline:!__unstablePopoverSlot,...props,className:(0,clsx.A)("block-editor-block-popover","block-editor-block-popover__inbetween",props.className),resize:!1,flip:!1,placement:"overlay",variant:"unstyled",children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-popover__inbetween-container",children})},nextClientId+"--"+rootClientId):null},animateVariants={hide:{opacity:0,scaleY:.75},show:{opacity:1,scaleY:1},exit:{opacity:0,scaleY:.9}};const block_popover_drop_zone=function BlockDropZonePopover({__unstablePopoverSlot,__unstableContentRef}){const{clientId}=(0,use_select.A)((select=>{const{getBlockOrder,getBlockInsertionPoint}=select(store_store),insertionPoint=getBlockInsertionPoint(),order=getBlockOrder(insertionPoint.rootClientId);return order.length?{clientId:order[insertionPoint.index]}:{}}),[]),reducedMotion=(0,use_reduced_motion.A)();return(0,jsx_runtime.jsx)(cover,{clientId,__unstablePopoverSlot,__unstableContentRef,className:"block-editor-block-popover__drop-zone",children:(0,jsx_runtime.jsx)(motion.P.div,{"data-testid":"block-popover-drop-zone",initial:reducedMotion?animateVariants.show:animateVariants.hide,animate:animateVariants.show,exit:reducedMotion?animateVariants.show:animateVariants.exit,className:"block-editor-block-popover__drop-zone-foreground"})})},insertion_point_InsertionPointOpenRef=(0,react.createContext)();function InbetweenInsertionPointPopover({__unstablePopoverSlot,__unstableContentRef,operation="insert",nearestSide="right"}){const{selectBlock,hideInsertionPoint}=(0,use_dispatch.A)(store_store),openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),ref=(0,react.useRef)(),{orientation,previousClientId,nextClientId,rootClientId,isInserterShown,isDistractionFree,isZoomOutMode}=(0,use_select.A)((select=>{const{getBlockOrder,getBlockListSettings,getBlockInsertionPoint,isBlockBeingDragged,getPreviousBlockClientId,getNextBlockClientId,getSettings,isZoomOut}=unlock(select(store_store)),insertionPoint=getBlockInsertionPoint(),order=getBlockOrder(insertionPoint.rootClientId);if(!order.length)return{};let _previousClientId=order[insertionPoint.index-1],_nextClientId=order[insertionPoint.index];for(;isBlockBeingDragged(_previousClientId);)_previousClientId=getPreviousBlockClientId(_previousClientId);for(;isBlockBeingDragged(_nextClientId);)_nextClientId=getNextBlockClientId(_nextClientId);const settings=getSettings();return{previousClientId:_previousClientId,nextClientId:_nextClientId,orientation:getBlockListSettings(insertionPoint.rootClientId)?.orientation||"vertical",rootClientId:insertionPoint.rootClientId,isDistractionFree:settings.isDistractionFree,isInserterShown:insertionPoint?.__unstableWithInserter,isZoomOutMode:isZoomOut()}}),[]),{getBlockEditingMode}=(0,use_select.A)(store_store),disableMotion=(0,use_reduced_motion.A)();const lineVariants={start:{opacity:0,scale:0},rest:{opacity:1,scale:1,transition:{delay:isInserterShown?.5:0,type:"tween"}},hover:{opacity:1,scale:1,transition:{delay:.5,type:"tween"}}},inserterVariants={start:{scale:disableMotion?1:0},rest:{scale:1,transition:{delay:.4,type:"tween"}}};if(isDistractionFree)return null;if(isZoomOutMode&&"insert"!==operation)return null;const orientationClassname="horizontal"===orientation||"group"===operation?"is-horizontal":"is-vertical",className=(0,clsx.A)("block-editor-block-list__insertion-point",orientationClassname);return(0,jsx_runtime.jsx)(inbetween,{previousClientId,nextClientId,__unstablePopoverSlot,__unstableContentRef,operation,nearestSide,children:(0,jsx_runtime.jsxs)(motion.P.div,{layout:!disableMotion,initial:disableMotion?"rest":"start",animate:"rest",whileHover:"hover",whileTap:"pressed",exit:"start",ref,tabIndex:-1,onClick:function onClick(event){event.target===ref.current&&nextClientId&&"disabled"!==getBlockEditingMode(nextClientId)&&selectBlock(nextClientId,-1)},onFocus:function onFocus(event){event.target!==ref.current&&(openRef.current=!0)},className:(0,clsx.A)(className,{"is-with-inserter":isInserterShown}),onHoverEnd:function maybeHideInserterPoint(event){event.target!==ref.current||openRef.current||hideInsertionPoint()},children:[(0,jsx_runtime.jsx)(motion.P.div,{variants:lineVariants,className:"block-editor-block-list__insertion-point-indicator","data-testid":"block-list-insertion-point-indicator"}),isInserterShown&&(0,jsx_runtime.jsx)(motion.P.div,{variants:inserterVariants,className:(0,clsx.A)("block-editor-block-list__insertion-point-inserter"),children:(0,jsx_runtime.jsx)(inserter,{position:"bottom center",clientId:nextClientId,rootClientId,__experimentalIsQuick:!0,onToggle:isOpen=>{openRef.current=isOpen},onSelectOrClose:()=>{openRef.current=!1}})})]})})}function InsertionPoint(props){const{insertionPoint,isVisible,isBlockListEmpty}=(0,use_select.A)((select=>{const{getBlockInsertionPoint,isBlockInsertionPointVisible,getBlockCount}=select(store_store),blockInsertionPoint=getBlockInsertionPoint();return{insertionPoint:blockInsertionPoint,isVisible:isBlockInsertionPointVisible(),isBlockListEmpty:0===getBlockCount(blockInsertionPoint?.rootClientId)}}),[]);return!isVisible||isBlockListEmpty?null:"replace"===insertionPoint.operation?(0,jsx_runtime.jsx)(block_popover_drop_zone,{...props},`${insertionPoint.rootClientId}-${insertionPoint.index}`):(0,jsx_runtime.jsx)(InbetweenInsertionPointPopover,{operation:insertionPoint.operation,nearestSide:insertionPoint.nearestSide,...props})}function useInBetweenInserter(){const openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),isInBetweenInserterDisabled=(0,use_select.A)((select=>select(store_store).getSettings().isDistractionFree||unlock(select(store_store)).isZoomOut()),[]),{getBlockListSettings,getBlockIndex,isMultiSelecting,getSelectedBlockClientIds,getSettings,getTemplateLock,__unstableIsWithinBlockOverlay,getBlockEditingMode,getBlockName,getBlockAttributes,getParentSectionBlock}=unlock((0,use_select.A)(store_store)),{showInsertionPoint,hideInsertionPoint}=(0,use_dispatch.A)(store_store);return(0,use_ref_effect.A)((node=>{if(!isInBetweenInserterDisabled)return node.addEventListener("mousemove",onMouseMove),()=>{node.removeEventListener("mousemove",onMouseMove)};function onMouseMove(event){if(void 0===openRef||openRef.current)return;if(event.target.nodeType===event.target.TEXT_NODE)return;if(isMultiSelecting())return;if(!event.target.classList.contains("block-editor-block-list__layout"))return void hideInsertionPoint();let rootClientId;if(!event.target.classList.contains("is-root-container")){rootClientId=(event.target.getAttribute("data-block")?event.target:event.target.closest("[data-block]")).getAttribute("data-block")}if(getTemplateLock(rootClientId)||"disabled"===getBlockEditingMode(rootClientId)||"core/block"===getBlockName(rootClientId)||rootClientId&&getBlockAttributes(rootClientId).layout?.isManualPlacement)return;const blockListSettings=getBlockListSettings(rootClientId),orientation=blockListSettings?.orientation||"vertical",captureToolbars=!!blockListSettings?.__experimentalCaptureToolbars,offsetTop=event.clientY,offsetLeft=event.clientX;let element=Array.from(event.target.children).find((blockEl=>{const blockElRect=blockEl.getBoundingClientRect();return blockEl.classList.contains("wp-block")&&"vertical"===orientation&&blockElRect.top>offsetTop||blockEl.classList.contains("wp-block")&&"horizontal"===orientation&&((0,i18n_build_module.V8)()?blockElRect.right<offsetLeft:blockElRect.left>offsetLeft)}));if(!element)return void hideInsertionPoint();if(!element.id&&(element=element.firstElementChild,!element))return void hideInsertionPoint();const clientId=element.id.slice(6);if(!clientId||__unstableIsWithinBlockOverlay(clientId)||getParentSectionBlock(clientId))return;if(getSelectedBlockClientIds().includes(clientId)&&"vertical"===orientation&&!captureToolbars&&!getSettings().hasFixedToolbar)return;const elementRect=element.getBoundingClientRect();if("horizontal"===orientation&&(event.clientY>elementRect.bottom||event.clientY<elementRect.top)||"vertical"===orientation&&(event.clientX>elementRect.right||event.clientX<elementRect.left))return void hideInsertionPoint();const index=getBlockIndex(clientId);0!==index?showInsertionPoint(rootClientId,index,{__unstableWithInserter:!0}):hideInsertionPoint()}}),[openRef,getBlockListSettings,getBlockIndex,isMultiSelecting,showInsertionPoint,hideInsertionPoint,getSelectedBlockClientIds,isInBetweenInserterDisabled])}function useBlockSelectionClearer(){const{getSettings,hasSelectedBlock,hasMultiSelection}=(0,use_select.A)(store_store),{clearSelectedBlock}=(0,use_dispatch.A)(store_store),{clearBlockSelection:isEnabled}=getSettings();return(0,use_ref_effect.A)((node=>{if(isEnabled)return node.addEventListener("mousedown",onMouseDown),()=>{node.removeEventListener("mousedown",onMouseDown)};function onMouseDown(event){(hasSelectedBlock()||hasMultiSelection())&&event.target===node&&clearSelectedBlock()}}),[hasSelectedBlock,hasMultiSelection,clearSelectedBlock,isEnabled])}const pendingSettingsUpdates=new WeakMap;function createShallowMemo(){let value;return newValue=>(void 0!==value&&(0,is_shallow_equal_build_module.Ay)(value,newValue)||(value=newValue),value)}function useShallowMemo(value){const[memo]=(0,react.useState)(createShallowMemo);return memo(value)}var use_throttle=__webpack_require__("./packages/compose/build-module/hooks/use-throttle/index.js"),data_transfer=__webpack_require__("./packages/dom/build-module/data-transfer.js");function onBlockDrop(targetRootClientId,targetBlockIndex,getBlockIndex,getClientIdsOfDescendants,moveBlocks,insertOrReplaceBlocks,clearSelectedBlock,operation,getBlock){return event=>{const{srcRootClientId:sourceRootClientId,srcClientIds:sourceClientIds,type:dropType,blocks}=function parseDropEvent(event){let result={srcRootClientId:null,srcClientIds:null,srcIndex:null,type:null,blocks:null};if(!event.dataTransfer)return result;try{result=Object.assign(result,JSON.parse(event.dataTransfer.getData("wp-blocks")))}catch(err){return result}return result}(event);if("inserter"===dropType){clearSelectedBlock();const blocksToInsert=blocks.map((block=>(0,build_module.JB)(block)));insertOrReplaceBlocks(blocksToInsert,!0,null)}if("block"===dropType){const sourceBlockIndex=getBlockIndex(sourceClientIds[0]);if(sourceRootClientId===targetRootClientId&&sourceBlockIndex===targetBlockIndex)return;if(sourceClientIds.includes(targetRootClientId)||getClientIdsOfDescendants(sourceClientIds).some((id=>id===targetRootClientId)))return;if("group"===operation){const blocksToInsert=sourceClientIds.map((clientId=>getBlock(clientId)));return void insertOrReplaceBlocks(blocksToInsert,!0,null,sourceClientIds)}const isAtSameLevel=sourceRootClientId===targetRootClientId,draggedBlockCount=sourceClientIds.length;moveBlocks(sourceClientIds,sourceRootClientId,isAtSameLevel&&sourceBlockIndex<targetBlockIndex?targetBlockIndex-draggedBlockCount:targetBlockIndex)}}}function useOnBlockDrop(targetRootClientId,targetBlockIndex,options={}){const{operation="insert",nearestSide="right"}=options,{canInsertBlockType,getBlockIndex,getClientIdsOfDescendants,getBlockOrder,getBlocksByClientId,getSettings,getBlock}=(0,use_select.A)(store_store),{getGroupingBlockName}=(0,use_select.A)(build_module.M_),{insertBlocks,moveBlocksToPosition,updateBlockAttributes,clearSelectedBlock,replaceBlocks,removeBlocks}=(0,use_dispatch.A)(store_store),registry=(0,use_registry.A)(),insertOrReplaceBlocks=(0,react.useCallback)(((blocks,updateSelection=!0,initialPosition=0,clientIdsToReplace=[])=>{Array.isArray(blocks)||(blocks=[blocks]);const clientId=getBlockOrder(targetRootClientId)[targetBlockIndex];if("replace"===operation)replaceBlocks(clientId,blocks,void 0,initialPosition);else if("group"===operation){const targetBlock=getBlock(clientId);"left"===nearestSide?blocks.push(targetBlock):blocks.unshift(targetBlock);const groupInnerBlocks=blocks.map((block=>(0,build_module.Wv)(block.name,block.attributes,block.innerBlocks))),areAllImages=blocks.every((block=>"core/image"===block.name)),galleryBlock=canInsertBlockType("core/gallery",targetRootClientId),wrappedBlocks=(0,build_module.Wv)(areAllImages&&galleryBlock?"core/gallery":getGroupingBlockName(),{layout:{type:"flex",flexWrap:areAllImages&&galleryBlock?null:"nowrap"}},groupInnerBlocks);replaceBlocks([clientId,...clientIdsToReplace],wrappedBlocks,void 0,initialPosition)}else insertBlocks(blocks,targetBlockIndex,targetRootClientId,updateSelection,initialPosition)}),[getBlockOrder,targetRootClientId,targetBlockIndex,operation,replaceBlocks,getBlock,nearestSide,canInsertBlockType,getGroupingBlockName,insertBlocks]),moveBlocks=(0,react.useCallback)(((sourceClientIds,sourceRootClientId,insertIndex)=>{if("replace"===operation){const sourceBlocks=getBlocksByClientId(sourceClientIds),targetBlockClientId=getBlockOrder(targetRootClientId)[targetBlockIndex];registry.batch((()=>{removeBlocks(sourceClientIds,!1),replaceBlocks(targetBlockClientId,sourceBlocks,void 0,0)}))}else moveBlocksToPosition(sourceClientIds,sourceRootClientId,targetRootClientId,insertIndex)}),[operation,getBlockOrder,getBlocksByClientId,moveBlocksToPosition,registry,removeBlocks,replaceBlocks,targetBlockIndex,targetRootClientId]),_onDrop=onBlockDrop(targetRootClientId,targetBlockIndex,getBlockIndex,getClientIdsOfDescendants,moveBlocks,insertOrReplaceBlocks,clearSelectedBlock,operation,getBlock),_onFilesDrop=function onFilesDrop(targetRootClientId,getSettings,updateBlockAttributes,canInsertBlockType,insertOrReplaceBlocks){return files=>{if(!getSettings().mediaUpload)return;const transformation=(0,build_module.wG)((0,build_module.XD)("from"),(transform=>"files"===transform.type&&canInsertBlockType(transform.blockName,targetRootClientId)&&transform.isMatch(files)));if(transformation){const blocks=transformation.transform(files,updateBlockAttributes);insertOrReplaceBlocks(blocks)}}}(targetRootClientId,getSettings,updateBlockAttributes,canInsertBlockType,insertOrReplaceBlocks),_onHTMLDrop=function onHTMLDrop(insertOrReplaceBlocks){return HTML=>{const blocks=(0,build_module.Gk)({HTML,mode:"BLOCKS"});blocks.length&&insertOrReplaceBlocks(blocks)}}(insertOrReplaceBlocks);return event=>{const files=(0,data_transfer.$)(event.dataTransfer),html=event.dataTransfer.getData("text/html");html?_onHTMLDrop(html):files.length?_onFilesDrop(files):_onDrop(event)}}function getDistanceToNearestEdge(point,rect,allowedEdges=["top","bottom","left","right"]){let candidateDistance,candidateEdge;return allowedEdges.forEach((edge=>{const distance=function getDistanceFromPointToEdge(point,rect,edge){const isHorizontal="top"===edge||"bottom"===edge,{x,y}=point,pointLateralPosition=isHorizontal?x:y,pointForwardPosition=isHorizontal?y:x,edgeStart=isHorizontal?rect.left:rect.top,edgeEnd=isHorizontal?rect.right:rect.bottom,edgeForwardPosition=rect[edge];let edgeLateralPosition;return edgeLateralPosition=pointLateralPosition>=edgeStart&&pointLateralPosition<=edgeEnd?pointLateralPosition:pointLateralPosition<edgeEnd?edgeStart:edgeEnd,Math.sqrt((pointLateralPosition-edgeLateralPosition)**2+(pointForwardPosition-edgeForwardPosition)**2)}(point,rect,edge);(void 0===candidateDistance||distance<candidateDistance)&&(candidateDistance=distance,candidateEdge=edge)})),[candidateDistance,candidateEdge]}function isPointContainedByRect(point,rect){return rect.left<=point.x&&rect.right>=point.x&&rect.top<=point.y&&rect.bottom>=point.y}const THRESHOLD_DISTANCE=30,MINIMUM_HEIGHT_FOR_THRESHOLD=120,MINIMUM_WIDTH_FOR_THRESHOLD=120;function isDropTargetValid(getBlockType,allowedBlocks,draggedBlockNames,targetBlockName){let areBlocksAllowed=!0;if(allowedBlocks){const allowedBlockNames=allowedBlocks?.map((({name})=>name));areBlocksAllowed=draggedBlockNames.every((name=>allowedBlockNames?.includes(name)))}const targetMatchesDraggedBlockParents=draggedBlockNames.map((name=>getBlockType(name))).every((block=>{const[allowedParentName]=block?.parent||[];return!allowedParentName||allowedParentName===targetBlockName}));return areBlocksAllowed&&targetMatchesDraggedBlockParents}function isInsertionPoint(targetToCheck,ownerDocument){const{defaultView}=ownerDocument;return!!(defaultView&&targetToCheck instanceof defaultView.HTMLElement&&targetToCheck.closest("[data-is-insertion-point]"))}function useBlockDropZone({dropZoneElement,rootClientId:targetRootClientId="",parentClientId:parentBlockClientId="",isDisabled=!1}={}){const registry=(0,use_registry.A)(),[dropTarget,setDropTarget]=(0,react.useState)({index:null,operation:"insert"}),{getBlockType,getBlockVariations,getGroupingBlockName}=(0,use_select.A)(build_module.M_),{canInsertBlockType,getBlockListSettings,getBlocks,getBlockIndex,getDraggedBlockClientIds,getBlockNamesByClientId,getAllowedBlocks,isDragging,isGroupable,isZoomOut,getSectionRootClientId}=unlock((0,use_select.A)(store_store)),{showInsertionPoint,hideInsertionPoint,startDragging,stopDragging}=unlock((0,use_dispatch.A)(store_store)),onBlockDrop=useOnBlockDrop("before"===dropTarget.operation||"after"===dropTarget.operation?parentBlockClientId:targetRootClientId,dropTarget.index,{operation:dropTarget.operation,nearestSide:dropTarget.nearestSide}),throttled=(0,use_throttle.A)((0,react.useCallback)(((event,ownerDocument)=>{isDragging()||startDragging();const allowedBlocks=getAllowedBlocks(targetRootClientId),targetBlockName=getBlockNamesByClientId([targetRootClientId])[0],draggedBlockNames=getBlockNamesByClientId(getDraggedBlockClientIds());if(!isDropTargetValid(getBlockType,allowedBlocks,draggedBlockNames,targetBlockName))return;const sectionRootClientId=getSectionRootClientId();if(isZoomOut()&&sectionRootClientId!==targetRootClientId)return;const blocks=getBlocks(targetRootClientId);if(0===blocks.length)return void registry.batch((()=>{setDropTarget({index:0,operation:"insert"}),showInsertionPoint(targetRootClientId,0,{operation:"insert"})}));const blocksData=blocks.map((block=>{const clientId=block.clientId;return{isUnmodifiedDefaultBlock:(0,build_module.Xw)(block),getBoundingClientRect:()=>ownerDocument.getElementById(`block-${clientId}`).getBoundingClientRect(),blockIndex:getBlockIndex(clientId),blockOrientation:getBlockListSettings(clientId)?.orientation}})),dropTargetPosition=function getDropTargetPosition(blocksData,position,orientation="vertical",options={}){const allowedEdges="horizontal"===orientation?["left","right"]:["top","bottom"];let nearestIndex=0,insertPosition="before",minDistance=1/0,targetBlockIndex=null,nearestSide="right";const{dropZoneElement,parentBlockOrientation,rootBlockIndex=0}=options;if(dropZoneElement&&"horizontal"!==parentBlockOrientation){const rect=dropZoneElement.getBoundingClientRect(),[distance,edge]=getDistanceToNearestEdge(position,rect,["top","bottom"]);if(rect.height>MINIMUM_HEIGHT_FOR_THRESHOLD&&distance<THRESHOLD_DISTANCE){if("top"===edge)return[rootBlockIndex,"before"];if("bottom"===edge)return[rootBlockIndex+1,"after"]}}const isRightToLeft=(0,i18n_build_module.V8)();if(dropZoneElement&&"horizontal"===parentBlockOrientation){const rect=dropZoneElement.getBoundingClientRect(),[distance,edge]=getDistanceToNearestEdge(position,rect,["left","right"]);if(rect.width>MINIMUM_WIDTH_FOR_THRESHOLD&&distance<THRESHOLD_DISTANCE){if(isRightToLeft&&"right"===edge||!isRightToLeft&&"left"===edge)return[rootBlockIndex,"before"];if(isRightToLeft&&"left"===edge||!isRightToLeft&&"right"===edge)return[rootBlockIndex+1,"after"]}}blocksData.forEach((({isUnmodifiedDefaultBlock,getBoundingClientRect,blockIndex,blockOrientation})=>{const rect=getBoundingClientRect();let[distance,edge]=getDistanceToNearestEdge(position,rect,allowedEdges);const[sideDistance,sideEdge]=getDistanceToNearestEdge(position,rect,["left","right"]),isPointInsideRect=isPointContainedByRect(position,rect);isUnmodifiedDefaultBlock&&isPointInsideRect?distance=0:"vertical"===orientation&&"horizontal"!==blockOrientation&&(isPointInsideRect&&sideDistance<THRESHOLD_DISTANCE||!isPointInsideRect&&function isPointWithinTopAndBottomBoundariesOfRect(point,rect){return rect.top<=point.y&&rect.bottom>=point.y}(position,rect))&&(targetBlockIndex=blockIndex,nearestSide=sideEdge),distance<minDistance&&(insertPosition="bottom"===edge||!isRightToLeft&&"right"===edge||isRightToLeft&&"left"===edge?"after":"before",minDistance=distance,nearestIndex=blockIndex)}));const adjacentIndex=nearestIndex+("after"===insertPosition?1:-1),isNearestBlockUnmodifiedDefaultBlock=!!blocksData[nearestIndex]?.isUnmodifiedDefaultBlock,isAdjacentBlockUnmodifiedDefaultBlock=!!blocksData[adjacentIndex]?.isUnmodifiedDefaultBlock;if(null!==targetBlockIndex)return[targetBlockIndex,"group",nearestSide];if(!isNearestBlockUnmodifiedDefaultBlock&&!isAdjacentBlockUnmodifiedDefaultBlock)return["after"===insertPosition?nearestIndex+1:nearestIndex,"insert"];return[isNearestBlockUnmodifiedDefaultBlock?nearestIndex:adjacentIndex,"replace"]}(blocksData,{x:event.clientX,y:event.clientY},getBlockListSettings(targetRootClientId)?.orientation,{dropZoneElement,parentBlockClientId,parentBlockOrientation:parentBlockClientId?getBlockListSettings(parentBlockClientId)?.orientation:void 0,rootBlockIndex:getBlockIndex(targetRootClientId)}),[targetIndex,operation,nearestSide]=dropTargetPosition;if(!isZoomOut()||"insert"===operation){if("group"===operation){const targetBlock=blocks[targetIndex],areAllImages=[targetBlock.name,...draggedBlockNames].every((name=>"core/image"===name)),canInsertGalleryBlock=canInsertBlockType("core/gallery",targetRootClientId),areGroupableBlocks=isGroupable([targetBlock.clientId,getDraggedBlockClientIds()]),groupBlockVariations=getBlockVariations(getGroupingBlockName(),"block"),canInsertRow=groupBlockVariations&&groupBlockVariations.find((({name})=>"group-row"===name));if(areAllImages&&!canInsertGalleryBlock&&(!areGroupableBlocks||!canInsertRow))return;if(!(areAllImages||areGroupableBlocks&&canInsertRow))return}registry.batch((()=>{setDropTarget({index:targetIndex,operation,nearestSide});const insertionPointClientId=["before","after"].includes(operation)?parentBlockClientId:targetRootClientId;showInsertionPoint(insertionPointClientId,targetIndex,{operation,nearestSide})}))}}),[isDragging,getAllowedBlocks,targetRootClientId,getBlockNamesByClientId,getDraggedBlockClientIds,getBlockType,getSectionRootClientId,isZoomOut,getBlocks,getBlockListSettings,dropZoneElement,parentBlockClientId,getBlockIndex,registry,startDragging,showInsertionPoint,canInsertBlockType,isGroupable,getBlockVariations,getGroupingBlockName]),200);return(0,use_drop_zone.A)({dropZoneElement,isDisabled,onDrop:onBlockDrop,onDragOver(event){throttled(event,event.currentTarget.ownerDocument)},onDragLeave(event){const{ownerDocument}=event.currentTarget;isInsertionPoint(event.relatedTarget,ownerDocument)||isInsertionPoint(event.target,ownerDocument)||(throttled.cancel(),hideInsertionPoint())},onDragEnd(){throttled.cancel(),stopDragging(),hideInsertionPoint()}})}const EMPTY_OBJECT={};function BlockContext({children,clientId}){const context=function useBlockContext(clientId){return(0,use_select.A)((select=>{const block=select(store_store).getBlock(clientId);if(!block)return;const blockType=select(build_module.M_).getBlockType(block.name);return blockType&&0!==Object.keys(blockType.providesContext).length?Object.fromEntries(Object.entries(blockType.providesContext).map((([contextName,attributeName])=>[contextName,block.attributes[attributeName]]))):void 0}),[clientId])}(clientId);return(0,jsx_runtime.jsx)(BlockContextProvider,{value:context,children})}const BlockListItemsMemo=(0,react.memo)(BlockListItems);function UncontrolledInnerBlocks(props){const{clientId,allowedBlocks,prioritizedInserterBlocks,defaultBlock,directInsert,__experimentalDefaultBlock,__experimentalDirectInsert,template,templateLock,wrapperRef,templateInsertUpdatesSelection,__experimentalCaptureToolbars:captureToolbars,__experimentalAppenderTagName,renderAppender,orientation,placeholder,layout,name,blockType,parentLock,defaultLayout}=props;!function useNestedSettingsUpdate(clientId,parentLock,allowedBlocks,prioritizedInserterBlocks,defaultBlock,directInsert,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,captureToolbars,orientation,layout){const registry=(0,use_registry.A)(),_allowedBlocks=useShallowMemo(allowedBlocks),_prioritizedInserterBlocks=useShallowMemo(prioritizedInserterBlocks),_templateLock=void 0===templateLock||"contentOnly"===parentLock?parentLock:templateLock;(0,react.useLayoutEffect)((()=>{const newSettings={allowedBlocks:_allowedBlocks,prioritizedInserterBlocks:_prioritizedInserterBlocks,templateLock:_templateLock};if(void 0!==captureToolbars&&(newSettings.__experimentalCaptureToolbars=captureToolbars),void 0!==orientation)newSettings.orientation=orientation;else{const layoutType=getLayoutType(layout?.type);newSettings.orientation=layoutType.getOrientation(layout)}void 0!==__experimentalDefaultBlock&&((0,deprecated_build_module.A)("__experimentalDefaultBlock",{alternative:"defaultBlock",since:"6.3",version:"6.4"}),newSettings.defaultBlock=__experimentalDefaultBlock),void 0!==defaultBlock&&(newSettings.defaultBlock=defaultBlock),void 0!==__experimentalDirectInsert&&((0,deprecated_build_module.A)("__experimentalDirectInsert",{alternative:"directInsert",since:"6.3",version:"6.4"}),newSettings.directInsert=__experimentalDirectInsert),void 0!==directInsert&&(newSettings.directInsert=directInsert),void 0!==newSettings.directInsert&&"boolean"!=typeof newSettings.directInsert&&(0,deprecated_build_module.A)("Using `Function` as a `directInsert` argument",{alternative:"`boolean` values",since:"6.5"}),pendingSettingsUpdates.get(registry)||pendingSettingsUpdates.set(registry,{}),pendingSettingsUpdates.get(registry)[clientId]=newSettings,window.queueMicrotask((()=>{const settings=pendingSettingsUpdates.get(registry);if(Object.keys(settings).length){const{updateBlockListSettings}=registry.dispatch(store_store);updateBlockListSettings(settings),pendingSettingsUpdates.set(registry,{})}}))}),[clientId,_allowedBlocks,_prioritizedInserterBlocks,_templateLock,defaultBlock,directInsert,__experimentalDefaultBlock,__experimentalDirectInsert,captureToolbars,orientation,layout,registry])}(clientId,parentLock,allowedBlocks,prioritizedInserterBlocks,defaultBlock,directInsert,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,captureToolbars,orientation,layout),function useInnerBlockTemplateSync(clientId,template,templateLock,templateInsertUpdatesSelection){const{getBlocks,getSelectedBlocksInitialCaretPosition,isBlockSelected}=(0,use_select.A)(store_store),{replaceInnerBlocks,__unstableMarkNextChangeAsNotPersistent}=(0,use_dispatch.A)(store_store),existingTemplateRef=(0,react.useRef)(null);(0,react.useLayoutEffect)((()=>{let isCancelled=!1;return window.queueMicrotask((()=>{if(isCancelled)return;const currentInnerBlocks=getBlocks(clientId),shouldApplyTemplate=0===currentInnerBlocks.length||"all"===templateLock||"contentOnly"===templateLock,hasTemplateChanged=!es6_default()(template,existingTemplateRef.current);if(!shouldApplyTemplate||!hasTemplateChanged)return;existingTemplateRef.current=template;const nextBlocks=(0,build_module.Nk)(currentInnerBlocks,template);es6_default()(nextBlocks,currentInnerBlocks)||(__unstableMarkNextChangeAsNotPersistent(),replaceInnerBlocks(clientId,nextBlocks,0===currentInnerBlocks.length&&templateInsertUpdatesSelection&&0!==nextBlocks.length&&isBlockSelected(clientId),getSelectedBlocksInitialCaretPosition()))})),()=>{isCancelled=!0}}),[template,templateLock,clientId])}(clientId,template,templateLock,templateInsertUpdatesSelection);const defaultLayoutBlockSupport=(0,build_module.bI)(name,"layout")||(0,build_module.bI)(name,"__experimentalLayout")||EMPTY_OBJECT,{allowSizingOnChildren=!1}=defaultLayoutBlockSupport,usedLayout=layout||defaultLayoutBlockSupport,memoedLayout=(0,react.useMemo)((()=>({...defaultLayout,...usedLayout,...allowSizingOnChildren&&{allowSizingOnChildren:!0}})),[defaultLayout,usedLayout,allowSizingOnChildren]),items=(0,jsx_runtime.jsx)(BlockListItemsMemo,{rootClientId:clientId,renderAppender,__experimentalAppenderTagName,layout:memoedLayout,wrapperRef,placeholder});return blockType?.providesContext&&0!==Object.keys(blockType.providesContext).length?(0,jsx_runtime.jsx)(BlockContext,{clientId,children:items}):items}function ControlledInnerBlocks(props){return useBlockSync(props),(0,jsx_runtime.jsx)(UncontrolledInnerBlocks,{...props})}const ForwardedInnerBlocks=(0,react.forwardRef)(((props,ref)=>{const innerBlocksProps=useInnerBlocksProps({ref},props);return(0,jsx_runtime.jsx)("div",{className:"block-editor-inner-blocks",children:(0,jsx_runtime.jsx)("div",{...innerBlocksProps})})}));function useInnerBlocksProps(props={},options={}){const{__unstableDisableLayoutClassNames,__unstableDisableDropZone,dropZoneElement}=options,{clientId,layout=null,__unstableLayoutClassNames:layoutClassNames=""}=useBlockEditContext(),selected=(0,use_select.A)((select=>{const{getBlockName,isZoomOut,getTemplateLock,getBlockRootClientId,getBlockEditingMode,getBlockSettings,getSectionRootClientId}=unlock(select(store_store));if(!clientId){const sectionRootClientId=getSectionRootClientId();return{isDropZoneDisabled:isZoomOut()&&""!==sectionRootClientId}}const{hasBlockSupport,getBlockType}=select(build_module.M_),blockName=getBlockName(clientId),blockEditingMode=getBlockEditingMode(clientId),parentClientId=getBlockRootClientId(clientId),[defaultLayout]=getBlockSettings(clientId,"layout");let _isDropZoneDisabled="disabled"===blockEditingMode;if(isZoomOut()){const sectionRootClientId=getSectionRootClientId();_isDropZoneDisabled=clientId!==sectionRootClientId}return{__experimentalCaptureToolbars:hasBlockSupport(blockName,"__experimentalExposeControlsToChildren",!1),name:blockName,blockType:getBlockType(blockName),parentLock:getTemplateLock(parentClientId),parentClientId,isDropZoneDisabled:_isDropZoneDisabled,defaultLayout}}),[clientId]),{__experimentalCaptureToolbars,name,blockType,parentLock,parentClientId,isDropZoneDisabled,defaultLayout}=selected,blockDropZoneRef=useBlockDropZone({dropZoneElement,rootClientId:clientId,parentClientId}),ref=(0,use_merge_refs.A)([props.ref,__unstableDisableDropZone||isDropZoneDisabled||layout?.isManualPlacement&&window.__experimentalEnableGridInteractivity?null:blockDropZoneRef]),innerBlocksProps={__experimentalCaptureToolbars,layout,name,blockType,parentLock,defaultLayout,...options},InnerBlocks=innerBlocksProps.value&&innerBlocksProps.onChange?ControlledInnerBlocks:UncontrolledInnerBlocks;return{...props,ref,className:(0,clsx.A)(props.className,"block-editor-block-list__layout",__unstableDisableLayoutClassNames?"":layoutClassNames),children:clientId?(0,jsx_runtime.jsx)(InnerBlocks,{...innerBlocksProps,clientId}):(0,jsx_runtime.jsx)(BlockListItems,{...options})}}useInnerBlocksProps.save=build_module.v9,ForwardedInnerBlocks.DefaultBlockAppender=function default_block_appender_DefaultBlockAppender(){const{clientId}=useBlockEditContext();return(0,jsx_runtime.jsx)(DefaultBlockAppender,{rootClientId:clientId})},ForwardedInnerBlocks.ButtonBlockAppender=function ButtonBlockAppender({showSeparator,isFloating,onAddBlock,isToggle}){const{clientId}=useBlockEditContext();return(0,jsx_runtime.jsx)(button_block_appender,{className:(0,clsx.A)({"block-list-appender__toggle":isToggle}),rootClientId:clientId,showSeparator,isFloating,onAddBlock})},ForwardedInnerBlocks.Content=()=>useInnerBlocksProps.save().children;const inner_blocks=ForwardedInnerBlocks,KEY_DOWN_ELIGIBLE_KEY_CODES=new Set([keycodes_build_module.UP,keycodes_build_module.NS,keycodes_build_module.PX,keycodes_build_module.M3,keycodes_build_module.Fm,keycodes_build_module.G_]);function useMouseMoveTypingReset(){const isTyping=(0,use_select.A)((select=>select(store_store).isTyping()),[]),{stopTyping}=(0,use_dispatch.A)(store_store);return(0,use_ref_effect.A)((node=>{if(!isTyping)return;const{ownerDocument}=node;let lastClientX,lastClientY;function stopTypingOnMouseMove(event){const{clientX,clientY}=event;lastClientX&&lastClientY&&(lastClientX!==clientX||lastClientY!==clientY)&&stopTyping(),lastClientX=clientX,lastClientY=clientY}return ownerDocument.addEventListener("mousemove",stopTypingOnMouseMove),()=>{ownerDocument.removeEventListener("mousemove",stopTypingOnMouseMove)}}),[isTyping,stopTyping])}function useTypingObserver(){const{isTyping}=(0,use_select.A)((select=>{const{isTyping:_isTyping}=select(store_store);return{isTyping:_isTyping()}}),[]),{startTyping,stopTyping}=(0,use_dispatch.A)(store_store),ref1=useMouseMoveTypingReset(),ref2=(0,use_ref_effect.A)((node=>{const{ownerDocument}=node,{defaultView}=ownerDocument,selection=defaultView.getSelection();if(isTyping){let timerId;function stopTypingOnNonTextField(event){const{target}=event;timerId=defaultView.setTimeout((()=>{(0,is_text_field.A)(target)||stopTyping()}))}function stopTypingOnEscapeKey(event){const{keyCode}=event;keyCode!==keycodes_build_module._f&&keyCode!==keycodes_build_module.wn||stopTyping()}function stopTypingOnSelectionUncollapse(){selection.isCollapsed||stopTyping()}return node.addEventListener("focus",stopTypingOnNonTextField),node.addEventListener("keydown",stopTypingOnEscapeKey),ownerDocument.addEventListener("selectionchange",stopTypingOnSelectionUncollapse),()=>{defaultView.clearTimeout(timerId),node.removeEventListener("focus",stopTypingOnNonTextField),node.removeEventListener("keydown",stopTypingOnEscapeKey),ownerDocument.removeEventListener("selectionchange",stopTypingOnSelectionUncollapse)}}function startTypingInTextField(event){const{type,target}=event;(0,is_text_field.A)(target)&&node.contains(target)&&("keydown"!==type||function isKeyDownEligibleForStartTyping(event){const{keyCode,shiftKey}=event;return!shiftKey&&KEY_DOWN_ELIGIBLE_KEY_CODES.has(keyCode)}(event))&&startTyping()}return node.addEventListener("keypress",startTypingInTextField),node.addEventListener("keydown",startTypingInTextField),()=>{node.removeEventListener("keypress",startTypingInTextField),node.removeEventListener("keydown",startTypingInTextField)}}),[isTyping,startTyping,stopTyping]);return(0,use_merge_refs.A)([ref1,ref2])}function ZoomOutSeparator({clientId,rootClientId="",position="top"}){const[isDraggedOver,setIsDraggedOver]=(0,react.useState)(!1),{sectionRootClientId,sectionClientIds,insertionPoint,blockInsertionPointVisible,blockInsertionPoint}=(0,use_select.A)((select=>{const{getInsertionPoint,getBlockOrder,getSectionRootClientId,isBlockInsertionPointVisible,getBlockInsertionPoint}=unlock(select(store_store)),root=getSectionRootClientId();return{sectionRootClientId:root,sectionClientIds:getBlockOrder(root),blockOrder:getBlockOrder(root),insertionPoint:getInsertionPoint(),blockInsertionPoint:getBlockInsertionPoint(),blockInsertionPointVisible:isBlockInsertionPointVisible()}}),[]),isReducedMotion=(0,use_reduced_motion.A)();if(!clientId)return;let isVisible=!1;if(!(rootClientId===sectionRootClientId&&sectionClientIds&&sectionClientIds.includes(clientId)))return null;const hasTopInsertionPoint=0===insertionPoint?.index&&clientId===sectionClientIds[insertionPoint.index],hasBottomInsertionPoint=insertionPoint&&insertionPoint.hasOwnProperty("index")&&clientId===sectionClientIds[insertionPoint.index-1];return"top"===position&&(isVisible=hasTopInsertionPoint||blockInsertionPointVisible&&0===blockInsertionPoint.index&&clientId===sectionClientIds[blockInsertionPoint.index]),"bottom"===position&&(isVisible=hasBottomInsertionPoint||blockInsertionPointVisible&&clientId===sectionClientIds[blockInsertionPoint.index-1]),(0,jsx_runtime.jsx)(AnimatePresence.N,{children:isVisible&&(0,jsx_runtime.jsx)(motion.P.div,{initial:{height:0},animate:{height:"calc(1 * var(--wp-block-editor-iframe-zoom-out-frame-size) / var(--wp-block-editor-iframe-zoom-out-scale)"},exit:{height:0},transition:{type:"tween",duration:isReducedMotion?0:.2,ease:[.6,0,.4,1]},className:(0,clsx.A)("block-editor-block-list__zoom-out-separator",{"is-dragged-over":isDraggedOver}),"data-is-insertion-point":"true",onDragOver:()=>setIsDraggedOver(!0),onDragLeave:()=>setIsDraggedOver(!1),children:(0,jsx_runtime.jsx)(motion.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{delay:-.125}},transition:{ease:"linear",duration:.1,delay:.125},children:(0,i18n_build_module.__)("Drop pattern.")})})})}const IntersectionObserver=(0,react.createContext)(),pendingBlockVisibilityUpdatesPerRegistry=new WeakMap;function block_list_Root({className,...settings}){const isLargeViewport=(0,use_viewport_match.A)("medium"),{isOutlineMode,isFocusMode,temporarilyEditingAsBlocks}=(0,use_select.A)((select=>{const{getSettings,getTemporarilyEditingAsBlocks,isTyping}=unlock(select(store_store)),{outlineMode,focusMode}=getSettings();return{isOutlineMode:outlineMode&&!isTyping(),isFocusMode:focusMode,temporarilyEditingAsBlocks:getTemporarilyEditingAsBlocks()}}),[]),registry=(0,use_registry.A)(),{setBlockVisibility}=(0,use_dispatch.A)(store_store),delayedBlockVisibilityUpdates=(0,use_debounce.A)((0,react.useCallback)((()=>{const updates={};pendingBlockVisibilityUpdatesPerRegistry.get(registry).forEach((([id,isIntersecting])=>{updates[id]=isIntersecting})),setBlockVisibility(updates)}),[registry]),300,{trailing:!0}),intersectionObserver=(0,react.useMemo)((()=>{const{IntersectionObserver:Observer}=window;if(Observer)return new Observer((entries=>{pendingBlockVisibilityUpdatesPerRegistry.get(registry)||pendingBlockVisibilityUpdatesPerRegistry.set(registry,[]);for(const entry of entries){const clientId=entry.target.getAttribute("data-block");pendingBlockVisibilityUpdatesPerRegistry.get(registry).push([clientId,entry.isIntersecting])}delayedBlockVisibilityUpdates()}))}),[]),innerBlocksProps=useInnerBlocksProps({ref:(0,use_merge_refs.A)([useBlockSelectionClearer(),useInBetweenInserter(),useTypingObserver()]),className:(0,clsx.A)("is-root-container",className,{"is-outline-mode":isOutlineMode,"is-focus-mode":isFocusMode&&isLargeViewport})},settings);return(0,jsx_runtime.jsxs)(IntersectionObserver.Provider,{value:intersectionObserver,children:[(0,jsx_runtime.jsx)("div",{...innerBlocksProps}),!!temporarilyEditingAsBlocks&&(0,jsx_runtime.jsx)(StopEditingAsBlocksOnOutsideSelect,{clientId:temporarilyEditingAsBlocks})]})}function StopEditingAsBlocksOnOutsideSelect({clientId}){const{stopEditingAsBlocks}=unlock((0,use_dispatch.A)(store_store)),isBlockOrDescendantSelected=(0,use_select.A)((select=>{const{isBlockSelected,hasSelectedInnerBlock}=select(store_store);return isBlockSelected(clientId)||hasSelectedInnerBlock(clientId,!0)}),[clientId]);return(0,react.useEffect)((()=>{isBlockOrDescendantSelected||stopEditingAsBlocks(clientId)}),[isBlockOrDescendantSelected,clientId,stopEditingAsBlocks]),null}function BlockList(settings){return(0,jsx_runtime.jsx)(Provider,{value:DEFAULT_BLOCK_EDIT_CONTEXT,children:(0,jsx_runtime.jsx)(block_list_Root,{...settings})})}const block_list_EMPTY_ARRAY=[],block_list_EMPTY_SET=new Set;function Items({placeholder,rootClientId,renderAppender:CustomAppender,__experimentalAppenderTagName,layout=defaultLayout}){const hasAppender=!1!==CustomAppender,hasCustomAppender=!!CustomAppender,{order,isZoomOut,selectedBlocks,visibleBlocks,shouldRenderAppender}=(0,use_select.A)((select=>{const{getSettings,getBlockOrder,getSelectedBlockClientId,getSelectedBlockClientIds,__unstableGetVisibleBlocks,getTemplateLock,getBlockEditingMode,isSectionBlock,isZoomOut:_isZoomOut}=unlock(select(store_store)),_order=getBlockOrder(rootClientId);if(getSettings().isPreviewMode)return{order:_order,selectedBlocks:block_list_EMPTY_ARRAY,visibleBlocks:block_list_EMPTY_SET};const selectedBlockClientId=getSelectedBlockClientId();return{order:_order,selectedBlocks:getSelectedBlockClientIds(),visibleBlocks:__unstableGetVisibleBlocks(),isZoomOut:_isZoomOut(),shouldRenderAppender:!isSectionBlock(rootClientId)&&"disabled"!==getBlockEditingMode(rootClientId)&&!getTemplateLock(rootClientId)&&hasAppender&&!_isZoomOut()&&(hasCustomAppender||rootClientId===selectedBlockClientId||!rootClientId&&!selectedBlockClientId&&!_order.length)}}),[rootClientId,hasAppender,hasCustomAppender]);return(0,jsx_runtime.jsxs)(LayoutProvider,{value:layout,children:[order.map((clientId=>(0,jsx_runtime.jsxs)(async_mode_provider_context.Ay,{value:!visibleBlocks.has(clientId)&&!selectedBlocks.includes(clientId),children:[isZoomOut&&(0,jsx_runtime.jsx)(ZoomOutSeparator,{clientId,rootClientId,position:"top"}),(0,jsx_runtime.jsx)(block,{rootClientId,clientId}),isZoomOut&&(0,jsx_runtime.jsx)(ZoomOutSeparator,{clientId,rootClientId,position:"bottom"})]},clientId))),order.length<1&&placeholder,shouldRenderAppender&&(0,jsx_runtime.jsx)(BlockListAppender,{tagName:__experimentalAppenderTagName,rootClientId,CustomAppender})]})}function BlockListItems(props){return(0,jsx_runtime.jsx)(async_mode_provider_context.Ay,{value:!1,children:(0,jsx_runtime.jsx)(Items,{...props})})}var react_dom=__webpack_require__("./node_modules/react-dom/index.js");function selector(select){const{isMultiSelecting,getMultiSelectedBlockClientIds,hasMultiSelection,getSelectedBlockClientId,getSelectedBlocksInitialCaretPosition,__unstableIsFullySelected}=select(store_store);return{isMultiSelecting:isMultiSelecting(),multiSelectedBlockClientIds:getMultiSelectedBlockClientIds(),hasMultiSelection:hasMultiSelection(),selectedBlockClientId:getSelectedBlockClientId(),initialPosition:getSelectedBlocksInitialCaretPosition(),isFullSelection:__unstableIsFullySelected()}}function useMultiSelection(){const{initialPosition,isMultiSelecting,multiSelectedBlockClientIds,hasMultiSelection,selectedBlockClientId,isFullSelection}=(0,use_select.A)(selector,[]);return(0,use_ref_effect.A)((node=>{const{ownerDocument}=node,{defaultView}=ownerDocument;if(null==initialPosition)return;if(!hasMultiSelection||isMultiSelecting)return;const{length}=multiSelectedBlockClientIds;length<2||isFullSelection&&(node.contentEditable=!0,node.focus(),defaultView.getSelection().removeAllRanges())}),[hasMultiSelection,isMultiSelecting,multiSelectedBlockClientIds,selectedBlockClientId,initialPosition,isFullSelection])}var is_vertical_edge=__webpack_require__("./packages/dom/build-module/dom/is-vertical-edge.js"),is_horizontal_edge=__webpack_require__("./packages/dom/build-module/dom/is-horizontal-edge.js"),compute_caret_rect=__webpack_require__("./packages/dom/build-module/dom/compute-caret-rect.js"),is_rtl=__webpack_require__("./packages/dom/build-module/dom/is-rtl.js"),place_caret_at_vertical_edge=__webpack_require__("./packages/dom/build-module/dom/place-caret-at-vertical-edge.js");function getClosestTabbable(target,isReverse,containerElement,onlyVertical){let targetRect,focusableNodes=dom_build_module.XC.focusable.find(containerElement);return isReverse&&focusableNodes.reverse(),focusableNodes=focusableNodes.slice(focusableNodes.indexOf(target)+1),onlyVertical&&(targetRect=target.getBoundingClientRect()),focusableNodes.find((function isTabCandidate(node){if(!(node.closest("[inert]")||1===node.children.length&&isInSameBlock(node,node.firstElementChild)&&"true"===node.firstElementChild.getAttribute("contenteditable"))){if(!dom_build_module.XC.tabbable.isTabbableIndex(node))return!1;if(node.isContentEditable&&"true"!==node.contentEditable)return!1;if(onlyVertical){const nodeRect=node.getBoundingClientRect();if(nodeRect.left>=targetRect.right||nodeRect.right<=targetRect.left)return!1}return!0}}))}function useArrowNav(){const{getMultiSelectedBlocksStartClientId,getMultiSelectedBlocksEndClientId,getSettings,hasMultiSelection,__unstableIsFullySelected}=(0,use_select.A)(store_store),{selectBlock}=(0,use_dispatch.A)(store_store);return(0,use_ref_effect.A)((node=>{let verticalRect;function onMouseDown(){verticalRect=null}function onKeyDown(event){if(event.defaultPrevented)return;const{keyCode,target,shiftKey,ctrlKey,altKey,metaKey}=event,isUp=keyCode===keycodes_build_module.UP,isDown=keyCode===keycodes_build_module.PX,isLeft=keyCode===keycodes_build_module.M3,isRight=keyCode===keycodes_build_module.NS,isReverse=isUp||isLeft,isHorizontal=isLeft||isRight,isVertical=isUp||isDown,isNav=isHorizontal||isVertical,hasModifier=shiftKey||ctrlKey||altKey||metaKey,isNavEdge=isVertical?is_vertical_edge.A:is_horizontal_edge.A,{ownerDocument}=node,{defaultView}=ownerDocument;if(!isNav)return;if(hasMultiSelection()){if(shiftKey)return;if(!__unstableIsFullySelected())return;return event.preventDefault(),void(isReverse?selectBlock(getMultiSelectedBlocksStartClientId()):selectBlock(getMultiSelectedBlocksEndClientId(),-1))}if(!function isNavigationCandidate(element,keyCode,hasModifier){const isVertical=keyCode===keycodes_build_module.UP||keyCode===keycodes_build_module.PX,{tagName}=element,elementType=element.getAttribute("type");if(isVertical&&!hasModifier)return"INPUT"!==tagName||!["date","datetime-local","month","number","range","time","week"].includes(elementType);if("INPUT"===tagName)return["button","checkbox","number","color","file","image","radio","reset","submit"].includes(elementType);return"TEXTAREA"!==tagName}(target,keyCode,hasModifier))return;isVertical?verticalRect||(verticalRect=(0,compute_caret_rect.A)(defaultView)):verticalRect=null;const isReverseDir=(0,is_rtl.A)(target)?!isReverse:isReverse,{keepCaretInsideBlock}=getSettings();if(shiftKey)(function isClosestTabbableABlock(target,isReverse){const closestTabbable=getClosestTabbable(target,isReverse,node);return closestTabbable&&getBlockClientId(closestTabbable)})(target,isReverse)&&isNavEdge(target,isReverse)&&(node.contentEditable=!0,node.focus());else if(!isVertical||!(0,is_vertical_edge.A)(target,isReverse)||altKey&&!(0,is_horizontal_edge.A)(target,isReverseDir)||keepCaretInsideBlock){if(isHorizontal&&defaultView.getSelection().isCollapsed&&(0,is_horizontal_edge.A)(target,isReverseDir)&&!keepCaretInsideBlock){const closestTabbable=getClosestTabbable(target,isReverseDir,node);(0,place_caret_at_horizontal_edge.A)(closestTabbable,isReverse),event.preventDefault()}}else{const closestTabbable=getClosestTabbable(target,isReverse,node,!0);closestTabbable&&((0,place_caret_at_vertical_edge.A)(closestTabbable,altKey?!isReverse:isReverse,altKey?void 0:verticalRect),event.preventDefault())}}return node.addEventListener("mousedown",onMouseDown),node.addEventListener("keydown",onKeyDown),()=>{node.removeEventListener("mousedown",onMouseDown),node.removeEventListener("keydown",onKeyDown)}}),[])}var is_entirely_selected=__webpack_require__("./packages/dom/build-module/dom/is-entirely-selected.js");function useSelectAll(){const{getBlockOrder,getSelectedBlockClientIds,getBlockRootClientId}=(0,use_select.A)(store_store),{multiSelect,selectBlock}=(0,use_dispatch.A)(store_store),isMatch=(0,keyboard_shortcuts_build_module.ZK)();return(0,use_ref_effect.A)((node=>{function onKeyDown(event){if(!isMatch("core/block-editor/select-all",event))return;const selectedClientIds=getSelectedBlockClientIds();if(selectedClientIds.length<2&&!(0,is_entirely_selected.A)(event.target))return;event.preventDefault();const[firstSelectedClientId]=selectedClientIds,rootClientId=getBlockRootClientId(firstSelectedClientId),blockClientIds=getBlockOrder(rootClientId);selectedClientIds.length!==blockClientIds.length?multiSelect(blockClientIds[0],blockClientIds[blockClientIds.length-1]):rootClientId&&(node.ownerDocument.defaultView.getSelection().removeAllRanges(),selectBlock(rootClientId))}return node.addEventListener("keydown",onKeyDown),()=>{node.removeEventListener("keydown",onKeyDown)}}),[])}function setContentEditableWrapper(node,value){node.contentEditable=value,value&&node.focus()}function useDragSelection(){const{startMultiSelect,stopMultiSelect}=(0,use_dispatch.A)(store_store),{isSelectionEnabled,hasSelectedBlock,isDraggingBlocks,isMultiSelecting}=(0,use_select.A)(store_store);return(0,use_ref_effect.A)((node=>{const{ownerDocument}=node,{defaultView}=ownerDocument;let anchorElement,rafId;function onMouseUp(){stopMultiSelect(),defaultView.removeEventListener("mouseup",onMouseUp),rafId=defaultView.requestAnimationFrame((()=>{if(!hasSelectedBlock())return;setContentEditableWrapper(node,!1);const selection=defaultView.getSelection();if(selection.rangeCount){const range=selection.getRangeAt(0),{commonAncestorContainer}=range,clonedRange=range.cloneRange();anchorElement.contains(commonAncestorContainer)&&(anchorElement.focus(),selection.removeAllRanges(),selection.addRange(clonedRange))}}))}function onMouseLeave({buttons,target,relatedTarget}){target.contains(relatedTarget)||isDraggingBlocks()||1===buttons&&(isMultiSelecting()||node!==target&&"true"===target.getAttribute("contenteditable")&&isSelectionEnabled()&&(anchorElement=target,startMultiSelect(),defaultView.addEventListener("mouseup",onMouseUp),setContentEditableWrapper(node,!0)))}return node.addEventListener("mouseout",onMouseLeave),()=>{node.removeEventListener("mouseout",onMouseLeave),defaultView.removeEventListener("mouseup",onMouseUp),defaultView.cancelAnimationFrame(rafId)}}),[startMultiSelect,stopMultiSelect,isSelectionEnabled,hasSelectedBlock])}var is_selection_forward=__webpack_require__("./packages/dom/build-module/dom/is-selection-forward.js");function use_selection_observer_setContentEditableWrapper(node,value){node.contentEditable!==String(value)&&(node.contentEditable=value,value&&node.focus())}function getRichTextElement(node){const element=node.nodeType===node.ELEMENT_NODE?node:node.parentElement;return element?.closest("[data-wp-block-attribute-key]")}function useSelectionObserver(){const{multiSelect,selectBlock,selectionChange}=(0,use_dispatch.A)(store_store),{getBlockParents,getBlockSelectionStart,isMultiSelecting}=(0,use_select.A)(store_store);return(0,use_ref_effect.A)((node=>{const{ownerDocument}=node,{defaultView}=ownerDocument;function onSelectionChange(event){const selection=defaultView.getSelection();if(!selection.rangeCount)return;const startNode=function extractSelectionStartNode(selection){const{anchorNode,anchorOffset}=selection;return anchorNode.nodeType===anchorNode.TEXT_NODE||0===anchorOffset?anchorNode:anchorNode.childNodes[anchorOffset-1]}(selection),endNode=function extractSelectionEndNode(selection){const{focusNode,focusOffset}=selection;return focusNode.nodeType===focusNode.TEXT_NODE||focusOffset===focusNode.childNodes.length?focusNode:0===focusOffset&&(0,is_selection_forward.A)(selection)?null!==(_focusNode$previousSi=focusNode.previousSibling)&&void 0!==_focusNode$previousSi?_focusNode$previousSi:focusNode.parentElement:focusNode.childNodes[focusOffset];var _focusNode$previousSi}(selection);if(!node.contains(startNode)||!node.contains(endNode))return;const isClickShift=event.shiftKey&&"mouseup"===event.type;if(selection.isCollapsed&&!isClickShift){if("true"===node.contentEditable&&!isMultiSelecting()){use_selection_observer_setContentEditableWrapper(node,!1);let element=startNode.nodeType===startNode.ELEMENT_NODE?startNode:startNode.parentElement;element=element?.closest("[contenteditable]"),element?.focus()}return}let startClientId=getBlockClientId(startNode),endClientId=getBlockClientId(endNode);if(isClickShift){const selectedClientId=getBlockSelectionStart(),clickedClientId=getBlockClientId(event.target),focusNodeIsNonSelectable=clickedClientId!==endClientId;(startClientId===endClientId&&selection.isCollapsed||!endClientId||focusNodeIsNonSelectable)&&(endClientId=clickedClientId),startClientId!==selectedClientId&&(startClientId=selectedClientId)}if(void 0===startClientId&&void 0===endClientId)return void use_selection_observer_setContentEditableWrapper(node,!1);if(startClientId===endClientId)isMultiSelecting()?multiSelect(startClientId,startClientId):selectBlock(startClientId);else{const startPath=[...getBlockParents(startClientId),startClientId],endPath=[...getBlockParents(endClientId),endClientId],depth=function findDepth(a,b){let depth=0;for(;a[depth]===b[depth];)depth++;return depth}(startPath,endPath);if(startPath[depth]!==startClientId||endPath[depth]!==endClientId)return void multiSelect(startPath[depth],endPath[depth]);const richTextElementStart=getRichTextElement(startNode),richTextElementEnd=getRichTextElement(endNode);if(richTextElementStart&&richTextElementEnd){var _richTextDataStart$st,_richTextDataEnd$star;const range=selection.getRangeAt(0),richTextDataStart=(0,rich_text_build_module.vt)({element:richTextElementStart,range,__unstableIsEditableTree:!0}),richTextDataEnd=(0,rich_text_build_module.vt)({element:richTextElementEnd,range,__unstableIsEditableTree:!0}),startOffset=null!==(_richTextDataStart$st=richTextDataStart.start)&&void 0!==_richTextDataStart$st?_richTextDataStart$st:richTextDataStart.end,endOffset=null!==(_richTextDataEnd$star=richTextDataEnd.start)&&void 0!==_richTextDataEnd$star?_richTextDataEnd$star:richTextDataEnd.end;selectionChange({start:{clientId:startClientId,attributeKey:richTextElementStart.dataset.wpBlockAttributeKey,offset:startOffset},end:{clientId:endClientId,attributeKey:richTextElementEnd.dataset.wpBlockAttributeKey,offset:endOffset}})}else multiSelect(startClientId,endClientId)}}return ownerDocument.addEventListener("selectionchange",onSelectionChange),defaultView.addEventListener("mouseup",onSelectionChange),()=>{ownerDocument.removeEventListener("selectionchange",onSelectionChange),defaultView.removeEventListener("mouseup",onSelectionChange)}}),[multiSelect,selectBlock,selectionChange,getBlockParents])}function useClickSelection(){const{selectBlock}=(0,use_dispatch.A)(store_store),{isSelectionEnabled,getBlockSelectionStart,hasMultiSelection}=(0,use_select.A)(store_store);return(0,use_ref_effect.A)((node=>{function onMouseDown(event){if(!isSelectionEnabled()||0!==event.button)return;const startClientId=getBlockSelectionStart(),clickedClientId=getBlockClientId(event.target);event.shiftKey?startClientId!==clickedClientId&&(node.contentEditable=!0,node.focus()):hasMultiSelection()&&selectBlock(clickedClientId)}return node.addEventListener("mousedown",onMouseDown),()=>{node.removeEventListener("mousedown",onMouseDown)}}),[selectBlock,isSelectionEnabled,getBlockSelectionStart,hasMultiSelection])}function useInput(){const{__unstableIsFullySelected,getSelectedBlockClientIds,getSelectedBlockClientId,__unstableIsSelectionMergeable,hasMultiSelection,getBlockName,canInsertBlockType,getBlockRootClientId,getSelectionStart,getSelectionEnd,getBlockAttributes}=(0,use_select.A)(store_store),{replaceBlocks,__unstableSplitSelection,removeBlocks,__unstableDeleteSelection,__unstableExpandSelection,__unstableMarkAutomaticChange}=(0,use_dispatch.A)(store_store);return(0,use_ref_effect.A)((node=>{function onBeforeInput(event){"true"===node.contentEditable&&event.preventDefault()}function onKeyDown(event){if(!event.defaultPrevented)if(hasMultiSelection())event.keyCode===keycodes_build_module.Fm?(node.contentEditable=!1,event.preventDefault(),__unstableIsFullySelected()?replaceBlocks(getSelectedBlockClientIds(),(0,build_module.Wv)((0,build_module.K$)())):__unstableSplitSelection()):event.keyCode===keycodes_build_module.G_||event.keyCode===keycodes_build_module.SJ?(node.contentEditable=!1,event.preventDefault(),__unstableIsFullySelected()?removeBlocks(getSelectedBlockClientIds()):__unstableIsSelectionMergeable()?__unstableDeleteSelection(event.keyCode===keycodes_build_module.SJ):__unstableExpandSelection()):1!==event.key.length||event.metaKey||event.ctrlKey||(node.contentEditable=!1,__unstableIsSelectionMergeable()?__unstableDeleteSelection(event.keyCode===keycodes_build_module.SJ):(event.preventDefault(),node.ownerDocument.defaultView.getSelection().removeAllRanges()));else if(event.keyCode===keycodes_build_module.Fm){if(event.shiftKey||__unstableIsFullySelected())return;const clientId=getSelectedBlockClientId(),blockName=getBlockName(clientId),selectionStart=getSelectionStart(),selectionEnd=getSelectionEnd();if(selectionStart.attributeKey===selectionEnd.attributeKey){const selectedAttributeValue=getBlockAttributes(clientId)[selectionStart.attributeKey],transforms=(0,build_module.XD)("from").filter((({type})=>"enter"===type)),transformation=(0,build_module.wG)(transforms,(item=>item.regExp.test(selectedAttributeValue)));if(transformation)return replaceBlocks(clientId,transformation.transform({content:selectedAttributeValue})),void __unstableMarkAutomaticChange()}if(!(0,build_module.pN)(blockName,"splitting",!1)&&!event.__deprecatedOnSplit)return;canInsertBlockType(blockName,getBlockRootClientId(clientId))&&(__unstableSplitSelection(),event.preventDefault())}}function onCompositionStart(event){hasMultiSelection()&&(node.contentEditable=!1,__unstableIsSelectionMergeable()?__unstableDeleteSelection():(event.preventDefault(),node.ownerDocument.defaultView.getSelection().removeAllRanges()))}return node.addEventListener("beforeinput",onBeforeInput),node.addEventListener("keydown",onKeyDown),node.addEventListener("compositionstart",onCompositionStart),()=>{node.removeEventListener("beforeinput",onBeforeInput),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("compositionstart",onCompositionStart)}}),[])}var document_has_uncollapsed_selection=__webpack_require__("./packages/dom/build-module/dom/document-has-uncollapsed-selection.js"),document_has_selection=__webpack_require__("./packages/dom/build-module/dom/document-has-selection.js");function useNotifyCopy(){const{getBlockName}=(0,use_select.A)(store_store),{getBlockType}=(0,use_select.A)(build_module.M_),{createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M);return(0,react.useCallback)(((eventType,selectedBlockClientIds)=>{let notice="";if(1===selectedBlockClientIds.length){const clientId=selectedBlockClientIds[0],title=getBlockType(getBlockName(clientId))?.title;notice="copy"===eventType?(0,i18n_build_module.nv)((0,i18n_build_module.__)('Copied "%s" to clipboard.'),title):(0,i18n_build_module.nv)((0,i18n_build_module.__)('Moved "%s" to clipboard.'),title)}else notice="copy"===eventType?(0,i18n_build_module.nv)((0,i18n_build_module._n)("Copied %d block to clipboard.","Copied %d blocks to clipboard.",selectedBlockClientIds.length),selectedBlockClientIds.length):(0,i18n_build_module.nv)((0,i18n_build_module._n)("Moved %d block to clipboard.","Moved %d blocks to clipboard.",selectedBlockClientIds.length),selectedBlockClientIds.length);createSuccessNotice(notice,{type:"snackbar"})}),[])}function getPasteEventData({clipboardData}){let plainText="",html="";try{plainText=clipboardData.getData("text/plain"),html=clipboardData.getData("text/html")}catch(error){return}html=function removeWindowsFragments(html){const startIdx=html.indexOf("\x3c!--StartFragment--\x3e");if(!(startIdx>-1))return html;const endIdx=(html=html.substring(startIdx+20)).indexOf("\x3c!--EndFragment--\x3e");return endIdx>-1&&(html=html.substring(0,endIdx)),html}(html),html=function removeCharsetMetaTag(html){const metaTag="<meta charset='utf-8'>";return html.startsWith(metaTag)?html.slice(22):html}(html);const files=(0,data_transfer.$)(clipboardData);return files.length&&!function shouldDismissPastedFiles(files,html){if(html&&1===files?.length&&0===files[0].type.indexOf("image/")){const IMAGE_TAG=/<\s*img\b/gi;if(1!==html.match(IMAGE_TAG)?.length)return!0;const IMG_WITH_LOCAL_SRC=/<\s*img\b[^>]*\bsrc="file:\/\//i;if(html.match(IMG_WITH_LOCAL_SRC))return!0}return!1}(files,html)?{files}:{html,plainText,files:[]}}const requiresWrapperOnCopy=Symbol("requiresWrapperOnCopy");function setClipboardBlocks(event,blocks,registry){let _blocks=blocks;const[firstBlock]=blocks;if(firstBlock){if(registry.select(build_module.M_).getBlockType(firstBlock.name)[requiresWrapperOnCopy]){const{getBlockRootClientId,getBlockName,getBlockAttributes}=registry.select(store_store),wrapperBlockClientId=getBlockRootClientId(firstBlock.clientId),wrapperBlockName=getBlockName(wrapperBlockClientId);wrapperBlockName&&(_blocks=(0,build_module.Wv)(wrapperBlockName,getBlockAttributes(wrapperBlockClientId),_blocks))}}const serialized=(0,build_module.lK)(_blocks);event.clipboardData.setData("text/plain",function toPlainText(html){html=html.replace(/<br>/g,"\n");return(0,strip_html.A)(html).trim().replace(/\n\n+/g,"\n\n")}(serialized)),event.clipboardData.setData("text/html",serialized)}function useClipboardHandler(){const registry=(0,use_registry.A)(),{getBlocksByClientId,getSelectedBlockClientIds,hasMultiSelection,getSettings,getBlockName,__unstableIsFullySelected,__unstableIsSelectionCollapsed,__unstableIsSelectionMergeable,__unstableGetSelectedBlocksWithPartialSelection,canInsertBlockType,getBlockRootClientId}=(0,use_select.A)(store_store),{flashBlock,removeBlocks,replaceBlocks,__unstableDeleteSelection,__unstableExpandSelection,__unstableSplitSelection}=(0,use_dispatch.A)(store_store),notifyCopy=useNotifyCopy();return(0,use_ref_effect.A)((node=>{function handler(event){if(event.defaultPrevented)return;const selectedBlockClientIds=getSelectedBlockClientIds();if(0===selectedBlockClientIds.length)return;if(!hasMultiSelection()){const{target}=event,{ownerDocument}=target;if("copy"===event.type||"cut"===event.type?(0,document_has_uncollapsed_selection.A)(ownerDocument):(0,document_has_selection.A)(ownerDocument)&&!ownerDocument.activeElement.isContentEditable)return}const{activeElement}=event.target.ownerDocument;if(!node.contains(activeElement))return;const isSelectionMergeable=__unstableIsSelectionMergeable(),shouldHandleWholeBlocks=__unstableIsSelectionCollapsed()||__unstableIsFullySelected(),expandSelectionIsNeeded=!shouldHandleWholeBlocks&&!isSelectionMergeable;if("copy"===event.type||"cut"===event.type)if(event.preventDefault(),1===selectedBlockClientIds.length&&flashBlock(selectedBlockClientIds[0]),expandSelectionIsNeeded)__unstableExpandSelection();else{let blocks;if(notifyCopy(event.type,selectedBlockClientIds),shouldHandleWholeBlocks)blocks=getBlocksByClientId(selectedBlockClientIds);else{const[head,tail]=__unstableGetSelectedBlocksWithPartialSelection();blocks=[head,...getBlocksByClientId(selectedBlockClientIds.slice(1,selectedBlockClientIds.length-1)),tail]}setClipboardBlocks(event,blocks,registry)}if("cut"===event.type)shouldHandleWholeBlocks&&!expandSelectionIsNeeded?removeBlocks(selectedBlockClientIds):(event.target.ownerDocument.activeElement.contentEditable=!1,__unstableDeleteSelection());else if("paste"===event.type){const{__experimentalCanUserUseUnfilteredHTML:canUserUseUnfilteredHTML}=getSettings();if("true"===event.clipboardData.getData("rich-text"))return;const{plainText,html,files}=getPasteEventData(event),isFullySelected=__unstableIsFullySelected();let blocks=[];if(files.length){const fromTransforms=(0,build_module.XD)("from");blocks=files.reduce(((accumulator,file)=>{const transformation=(0,build_module.wG)(fromTransforms,(transform=>"files"===transform.type&&transform.isMatch([file])));return transformation&&accumulator.push(transformation.transform([file])),accumulator}),[]).flat()}else blocks=(0,build_module.Gk)({HTML:html,plainText,mode:isFullySelected?"BLOCKS":"AUTO",canUserUseUnfilteredHTML});if("string"==typeof blocks)return;if(isFullySelected)return replaceBlocks(selectedBlockClientIds,blocks,blocks.length-1,-1),void event.preventDefault();if(!hasMultiSelection()&&!(0,build_module.pN)(getBlockName(selectedBlockClientIds[0]),"splitting",!1)&&!event.__deprecatedOnSplit)return;const[firstSelectedClientId]=selectedBlockClientIds,rootClientId=getBlockRootClientId(firstSelectedClientId),newBlocks=[];for(const block of blocks)if(canInsertBlockType(block.name,rootClientId))newBlocks.push(block);else{const rootBlockName=getBlockName(rootClientId),switchedBlocks=block.name!==rootBlockName?(0,build_module.bh)(block,rootBlockName):[block];if(!switchedBlocks)return;for(const switchedBlock of switchedBlocks)for(const innerBlock of switchedBlock.innerBlocks)newBlocks.push(innerBlock)}__unstableSplitSelection(newBlocks),event.preventDefault()}}return node.ownerDocument.addEventListener("copy",handler),node.ownerDocument.addEventListener("cut",handler),node.ownerDocument.addEventListener("paste",handler),()=>{node.ownerDocument.removeEventListener("copy",handler),node.ownerDocument.removeEventListener("cut",handler),node.ownerDocument.removeEventListener("paste",handler)}}),[])}function useWritingFlow(){const[before,ref,after]=function useTabNav(){const container=(0,react.useRef)(),focusCaptureBeforeRef=(0,react.useRef)(),focusCaptureAfterRef=(0,react.useRef)(),{hasMultiSelection,getSelectedBlockClientId,getBlockCount,getBlockOrder,getLastFocus,getSectionRootClientId,isZoomOut}=unlock((0,use_select.A)(store_store)),{setLastFocus}=unlock((0,use_dispatch.A)(store_store)),noCaptureRef=(0,react.useRef)();function onFocusCapture(event){if(noCaptureRef.current)noCaptureRef.current=null;else if(hasMultiSelection())container.current.focus();else if(getSelectedBlockClientId())getLastFocus()?.current?getLastFocus().current.focus():container.current.querySelector(`[data-block="${getSelectedBlockClientId()}"]`).focus();else if(isZoomOut()){const sectionRootClientId=getSectionRootClientId(),sectionBlocks=getBlockOrder(sectionRootClientId);sectionBlocks.length?container.current.querySelector(`[data-block="${sectionBlocks[0]}"]`).focus():container.current.querySelector(`[data-block="${sectionRootClientId}"]`).focus()}else{const canvasElement=container.current.ownerDocument===event.target.ownerDocument?container.current:container.current.ownerDocument.defaultView.frameElement,isBefore=event.target.compareDocumentPosition(canvasElement)&event.target.DOCUMENT_POSITION_FOLLOWING,tabbables=dom_build_module.XC.tabbable.find(container.current);tabbables.length&&(isBefore?tabbables[0]:tabbables[tabbables.length-1]).focus()}}const before=(0,jsx_runtime.jsx)("div",{ref:focusCaptureBeforeRef,tabIndex:"0",onFocus:onFocusCapture}),after=(0,jsx_runtime.jsx)("div",{ref:focusCaptureAfterRef,tabIndex:"0",onFocus:onFocusCapture}),ref=(0,use_ref_effect.A)((node=>{function onKeyDown(event){if(event.defaultPrevented)return;if(event.keyCode!==keycodes_build_module.wn)return;const isShift=event.shiftKey,direction=isShift?"findPrevious":"findNext",nextTabbable=dom_build_module.XC.tabbable[direction](event.target),currentBlock=event.target.closest("[data-block]"),isElementPartOfSelectedBlock=currentBlock&&nextTabbable&&(isInSameBlock(currentBlock,nextTabbable)||isInsideRootBlock(currentBlock,nextTabbable));if((0,is_form_element.A)(nextTabbable)&&isElementPartOfSelectedBlock)return;const next=isShift?focusCaptureBeforeRef:focusCaptureAfterRef;noCaptureRef.current=!0,next.current.focus({preventScroll:!0})}function onFocusOut(event){setLastFocus({...getLastFocus(),current:event.target});const{ownerDocument}=node;event.relatedTarget||ownerDocument.activeElement!==ownerDocument.body||0!==getBlockCount()||node.focus()}function preventScrollOnTab(event){if(event.keyCode!==keycodes_build_module.wn)return;if("region"===event.target?.getAttribute("role"))return;if(container.current===event.target)return;const direction=event.shiftKey?"findPrevious":"findNext",target=dom_build_module.XC.tabbable[direction](event.target);target!==focusCaptureBeforeRef.current&&target!==focusCaptureAfterRef.current||(event.preventDefault(),target.focus({preventScroll:!0}))}const{ownerDocument}=node,{defaultView}=ownerDocument;return defaultView.addEventListener("keydown",preventScrollOnTab),node.addEventListener("keydown",onKeyDown),node.addEventListener("focusout",onFocusOut),()=>{defaultView.removeEventListener("keydown",preventScrollOnTab),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("focusout",onFocusOut)}}),[]);return[before,(0,use_merge_refs.A)([container,ref]),after]}(),hasMultiSelection=(0,use_select.A)((select=>select(store_store).hasMultiSelection()),[]);return[before,(0,use_merge_refs.A)([ref,useClipboardHandler(),useInput(),useDragSelection(),useSelectionObserver(),useClickSelection(),useMultiSelection(),useSelectAll(),useArrowNav(),(0,use_ref_effect.A)((node=>(node.tabIndex=0,node.dataset.hasMultiSelection=hasMultiSelection,hasMultiSelection?(node.setAttribute("aria-label",(0,i18n_build_module.__)("Multiple selected blocks")),()=>{delete node.dataset.hasMultiSelection,node.removeAttribute("aria-label")}):()=>{delete node.dataset.hasMultiSelection})),[hasMultiSelection])]),after]}const writing_flow=(0,react.forwardRef)((function WritingFlow({children,...props},forwardedRef){const[before,ref,after]=useWritingFlow();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[before,(0,jsx_runtime.jsx)("div",{...props,ref:(0,use_merge_refs.A)([ref,forwardedRef]),className:(0,clsx.A)(props.className,"block-editor-writing-flow"),children}),after]})}));let compatibilityStyles=null;function bubbleEvent(event,Constructor,frame){const init={};for(const key in event)init[key]=event[key];if(event instanceof frame.contentDocument.defaultView.MouseEvent){const rect=frame.getBoundingClientRect();init.clientX+=rect.left,init.clientY+=rect.top}const newEvent=new Constructor(event.type,init);init.defaultPrevented&&newEvent.preventDefault();!frame.dispatchEvent(newEvent)&&event.preventDefault()}function useBubbleEvents(iframeDocument){return(0,use_ref_effect.A)((()=>{const{defaultView}=iframeDocument;if(!defaultView)return;const{frameElement}=defaultView,html=iframeDocument.documentElement,eventTypes=["dragover","mousemove"],handlers={};for(const name of eventTypes)handlers[name]=event=>{const constructorName=Object.getPrototypeOf(event).constructor.name;bubbleEvent(event,window[constructorName],frameElement)},html.addEventListener(name,handlers[name]);return()=>{for(const name of eventTypes)html.removeEventListener(name,handlers[name])}}))}function Iframe({contentRef,children,tabIndex=0,scale=1,frameSize=0,readonly,forwardedRef:ref,title=(0,i18n_build_module.__)("Editor canvas"),...props}){const{resolvedAssets,isPreviewMode}=(0,use_select.A)((select=>{const{getSettings}=select(store_store),settings=getSettings();return{resolvedAssets:settings.__unstableResolvedAssets,isPreviewMode:settings.isPreviewMode}}),[]),{styles="",scripts=""}=resolvedAssets,[iframeDocument,setIframeDocument]=(0,react.useState)(),initialContainerWidthRef=(0,react.useRef)(0),[bodyClasses,setBodyClasses]=(0,react.useState)([]),clearerRef=useBlockSelectionClearer(),[before,writingFlowRef,after]=useWritingFlow(),[contentResizeListener,{height:contentHeight}]=(0,use_resize_observer.A)(),[containerResizeListener,{width:containerWidth}]=(0,use_resize_observer.A)(),setRef=(0,use_ref_effect.A)((node=>{let iFrameDocument;function preventFileDropDefault(event){event.preventDefault()}function onLoad(){const{contentDocument,ownerDocument}=node,{documentElement}=contentDocument;iFrameDocument=contentDocument,documentElement.classList.add("block-editor-iframe__html"),clearerRef(documentElement),setBodyClasses(Array.from(ownerDocument.body.classList).filter((name=>name.startsWith("admin-color-")||name.startsWith("post-type-")||"wp-embed-responsive"===name))),contentDocument.dir=ownerDocument.dir;for(const compatStyle of function getCompatibilityStyles(){return compatibilityStyles||(compatibilityStyles=Array.from(document.styleSheets).reduce(((accumulator,styleSheet)=>{try{styleSheet.cssRules}catch(e){return accumulator}const{ownerNode,cssRules}=styleSheet;if(null===ownerNode)return accumulator;if(!cssRules)return accumulator;if(["wp-reset-editor-styles-css","wp-reset-editor-styles-rtl-css"].includes(ownerNode.id))return accumulator;if(!ownerNode.id)return accumulator;if(function matchFromRules(_cssRules){return Array.from(_cssRules).find((({selectorText,conditionText,cssRules:__cssRules})=>conditionText?matchFromRules(__cssRules):selectorText&&(selectorText.includes(".editor-styles-wrapper")||selectorText.includes(".wp-block"))))}(cssRules)){const isInline="STYLE"===ownerNode.tagName;if(isInline){const mainStylesCssId=ownerNode.id.replace("-inline-css","-css"),mainStylesElement=document.getElementById(mainStylesCssId);mainStylesElement&&accumulator.push(mainStylesElement.cloneNode(!0))}if(accumulator.push(ownerNode.cloneNode(!0)),!isInline){const inlineStylesCssId=ownerNode.id.replace("-css","-inline-css"),inlineStylesElement=document.getElementById(inlineStylesCssId);inlineStylesElement&&accumulator.push(inlineStylesElement.cloneNode(!0))}}return accumulator}),[]),compatibilityStyles)}())contentDocument.getElementById(compatStyle.id)||(contentDocument.head.appendChild(compatStyle.cloneNode(!0)),isPreviewMode||console.warn(`${compatStyle.id} was added to the iframe incorrectly. Please use block.json or enqueue_block_assets to add styles to the iframe.`,compatStyle));iFrameDocument.addEventListener("dragover",preventFileDropDefault,!1),iFrameDocument.addEventListener("drop",preventFileDropDefault,!1)}return node._load=()=>{setIframeDocument(node.contentDocument)},node.addEventListener("load",onLoad),()=>{delete node._load,node.removeEventListener("load",onLoad),iFrameDocument?.removeEventListener("dragover",preventFileDropDefault),iFrameDocument?.removeEventListener("drop",preventFileDropDefault)}}),[]),[iframeWindowInnerHeight,setIframeWindowInnerHeight]=(0,react.useState)(),iframeResizeRef=(0,use_ref_effect.A)((node=>{const nodeWindow=node.ownerDocument.defaultView;setIframeWindowInnerHeight(nodeWindow.innerHeight);const onResize=()=>{setIframeWindowInnerHeight(nodeWindow.innerHeight)};return nodeWindow.addEventListener("resize",onResize),()=>{nodeWindow.removeEventListener("resize",onResize)}}),[]),[windowInnerWidth,setWindowInnerWidth]=(0,react.useState)(),windowResizeRef=(0,use_ref_effect.A)((node=>{const nodeWindow=node.ownerDocument.defaultView;setWindowInnerWidth(nodeWindow.innerWidth);const onResize=()=>{setWindowInnerWidth(nodeWindow.innerWidth)};return nodeWindow.addEventListener("resize",onResize),()=>{nodeWindow.removeEventListener("resize",onResize)}}),[]),isZoomedOut=1!==scale;(0,react.useEffect)((()=>{isZoomedOut||(initialContainerWidthRef.current=containerWidth)}),[containerWidth,isZoomedOut]);const scaleContainerWidth=Math.max(initialContainerWidthRef.current,containerWidth),disabledRef=(0,use_disabled.A)({isDisabled:!readonly}),bodyRef=(0,use_merge_refs.A)([useBubbleEvents(iframeDocument),contentRef,clearerRef,writingFlowRef,disabledRef,isZoomedOut?iframeResizeRef:null]),html=`<!doctype html>\n<html>\n\t<head>\n\t\t<meta charset="utf-8">\n\t\t<script>window.frameElement._load()<\/script>\n\t\t<style>\n\t\t\thtml{\n\t\t\t\theight: auto !important;\n\t\t\t\tmin-height: 100%;\n\t\t\t}\n\t\t\t/* Lowest specificity to not override global styles */\n\t\t\t:where(body) {\n\t\t\t\tmargin: 0;\n\t\t\t\t/* Default background color in case zoom out mode background\n\t\t\t\tcolors the html element */\n\t\t\t\tbackground-color: white;\n\t\t\t}\n\t\t</style>\n\t\t${styles}\n\t\t${scripts}\n\t</head>\n\t<body>\n\t\t<script>document.currentScript.parentElement.remove()<\/script>\n\t</body>\n</html>`,[src,cleanup]=(0,react.useMemo)((()=>{const _src=URL.createObjectURL(new window.Blob([html],{type:"text/html"}));return[_src,()=>URL.revokeObjectURL(_src)]}),[html]);(0,react.useEffect)((()=>cleanup),[cleanup]);const zoomOutAnimationClassnameRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{if(!iframeDocument||!isZoomedOut)return;const handleZoomOutAnimationClassname=()=>{clearTimeout(zoomOutAnimationClassnameRef.current),iframeDocument.documentElement.classList.add("zoom-out-animation"),zoomOutAnimationClassnameRef.current=setTimeout((()=>{iframeDocument.documentElement.classList.remove("zoom-out-animation")}),400)};return handleZoomOutAnimationClassname(),iframeDocument.documentElement.classList.add("is-zoomed-out"),()=>{handleZoomOutAnimationClassname(),iframeDocument.documentElement.classList.remove("is-zoomed-out")}}),[iframeDocument,isZoomedOut]),(0,react.useEffect)((()=>{if(!iframeDocument||!isZoomedOut)return;return iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-scale","auto-scaled"===scale?(Math.min(containerWidth,750)-2*parseInt(frameSize))/scaleContainerWidth:scale),iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-frame-size","number"==typeof frameSize?`${frameSize}px`:frameSize),iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-content-height",`${contentHeight}px`),iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-inner-height",`${iframeWindowInnerHeight}px`),iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-container-width",`${containerWidth}px`),iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-scale-container-width",`${scaleContainerWidth}px`),()=>{iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-scale"),iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-frame-size"),iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-content-height"),iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-inner-height"),iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-container-width"),iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-scale-container-width")}}),[scale,frameSize,iframeDocument,iframeWindowInnerHeight,contentHeight,containerWidth,windowInnerWidth,isZoomedOut,scaleContainerWidth]);const shouldRenderFocusCaptureElements=tabIndex>=0&&!isPreviewMode,iframe=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[shouldRenderFocusCaptureElements&&before,(0,jsx_runtime.jsx)("iframe",{...props,style:{...props.style,height:props.style?.height,border:0},ref:(0,use_merge_refs.A)([ref,setRef]),tabIndex,src,title,onKeyDown:event=>{if(props.onKeyDown&&props.onKeyDown(event),event.currentTarget.ownerDocument!==event.target.ownerDocument){const{stopPropagation}=event.nativeEvent;event.nativeEvent.stopPropagation=()=>{},event.stopPropagation(),event.nativeEvent.stopPropagation=stopPropagation,bubbleEvent(event,window.KeyboardEvent,event.currentTarget)}},children:iframeDocument&&(0,react_dom.createPortal)((0,jsx_runtime.jsxs)("body",{ref:bodyRef,className:(0,clsx.A)("block-editor-iframe__body","editor-styles-wrapper",...bodyClasses),children:[contentResizeListener,(0,jsx_runtime.jsx)(style_provider.A,{document:iframeDocument,children})]}),iframeDocument.documentElement)}),shouldRenderFocusCaptureElements&&after]});return(0,jsx_runtime.jsxs)("div",{className:"block-editor-iframe__container",ref:windowResizeRef,children:[containerResizeListener,(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("block-editor-iframe__scale-container",isZoomedOut&&"is-zoomed-out"),style:{"--wp-block-editor-iframe-zoom-out-scale-container-width":isZoomedOut&&`${scaleContainerWidth}px`},children:iframe})]})}const iframe=(0,react.forwardRef)((function IframeIfReady(props,ref){return(0,use_select.A)((select=>select(store_store).getSettings().__internalIsInitialized),[])?(0,jsx_runtime.jsx)(Iframe,{...props,forwardedRef:ref}):null}));var parsel=__webpack_require__("./node_modules/parsel-js/dist/parsel.js"),postcss=__webpack_require__("./node_modules/postcss/lib/postcss.mjs"),postcss_prefix_selector=__webpack_require__("./node_modules/postcss-prefix-selector/index.js"),postcss_prefix_selector_default=__webpack_require__.n(postcss_prefix_selector),postcss_urlrebase=__webpack_require__("./packages/block-editor/node_modules/postcss-urlrebase/index.js"),postcss_urlrebase_default=__webpack_require__.n(postcss_urlrebase);const cacheByWrapperSelector=new Map,ROOT_SELECTOR_TOKENS=[{type:"type",content:"body"},{type:"type",content:"html"},{type:"pseudo-class",content:":root"},{type:"pseudo-class",content:":where(body)"},{type:"pseudo-class",content:":where(:root)"},{type:"pseudo-class",content:":where(html)"}];function transformStyle({css,ignoredSelectors=[],baseURL},wrapperSelector="",transformOptions){if(!wrapperSelector&&!baseURL)return css;try{var _transformOptions$ign;const excludedSelectors=[...ignoredSelectors,...null!==(_transformOptions$ign=transformOptions?.ignoredSelectors)&&void 0!==_transformOptions$ign?_transformOptions$ign:[],wrapperSelector];return(0,postcss.Ay)([wrapperSelector&&postcss_prefix_selector_default()({prefix:wrapperSelector,transform(prefix,selector,prefixedSelector){if(excludedSelectors.some((excludedSelector=>excludedSelector instanceof RegExp?selector.match(excludedSelector):selector.includes(excludedSelector))))return selector;return ROOT_SELECTOR_TOKENS.some((rootSelector=>selector.startsWith(rootSelector.content)))?function prefixRootSelector(prefix,selector){const tokenized=parsel.qw(selector);let insertionPoint=-1;for(let i=tokenized.findLastIndex((({content,type})=>ROOT_SELECTOR_TOKENS.some((rootSelector=>content===rootSelector.content&&type===rootSelector.type))))+1;i<tokenized.length;i++)if("combinator"===tokenized[i].type){insertionPoint=i;break}const tokenizedPrefix=parsel.qw(prefix);return tokenized.splice(-1===insertionPoint?tokenized.length:insertionPoint,0,{type:"combinator",content:" "},...tokenizedPrefix),parsel.As(tokenized)}(prefix,selector):prefixedSelector}}),baseURL&&postcss_urlrebase_default()({rootUrl:baseURL})].filter(Boolean)).process(css,{}).css}catch(error){return error instanceof postcss.Rf?console.warn("wp.blockEditor.transformStyles Failed to transform CSS.",error.message+"\n"+error.showSourceCode(!1)):console.warn("wp.blockEditor.transformStyles Failed to transform CSS.",error),null}}const transform_styles=(styles,wrapperSelector="",transformOptions)=>{let cache=cacheByWrapperSelector.get(wrapperSelector);return cache||(cache=new WeakMap,cacheByWrapperSelector.set(wrapperSelector,cache)),styles.map((style=>{let css=cache.get(style);return css||(css=transformStyle(style,wrapperSelector,transformOptions),cache.set(style,css)),css}))};function useDarkThemeBodyClassName(styles,scope){return(0,react.useCallback)((node=>{if(!node)return;const{ownerDocument}=node,{defaultView,body}=ownerDocument,canvas=scope?ownerDocument.querySelector(scope):body;let backgroundColor;if(canvas)backgroundColor=defaultView?.getComputedStyle(canvas,null).getPropertyValue("background-color");else{const tempCanvas=ownerDocument.createElement("div");tempCanvas.classList.add("editor-styles-wrapper"),body.appendChild(tempCanvas),backgroundColor=defaultView?.getComputedStyle(tempCanvas,null).getPropertyValue("background-color"),body.removeChild(tempCanvas)}const colordBackgroundColor=(0,colord.Mj)(backgroundColor);colordBackgroundColor.luminance()>.5||0===colordBackgroundColor.alpha()?body.classList.remove("is-dark-theme"):body.classList.add("is-dark-theme")}),[styles,scope])}(0,colord.X$)([names.A,a11y.A]);const editor_styles=(0,react.memo)((function EditorStyles({styles,scope,transformOptions}){const overrides=(0,use_select.A)((select=>unlock(select(store_store)).getStyleOverrides()),[]),[transformedStyles,transformedSvgs]=(0,react.useMemo)((()=>{const _styles=Object.values(null!=styles?styles:[]);for(const[id,override]of overrides){const index=_styles.findIndex((({id:_id})=>id===_id)),overrideWithId={...override,id};-1===index?_styles.push(overrideWithId):_styles[index]=overrideWithId}return[transform_styles(_styles.filter((style=>style?.css)),scope,transformOptions),_styles.filter((style=>"svgs"===style.__unstableType)).map((style=>style.assets)).join("")]}),[styles,overrides,scope,transformOptions]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{ref:useDarkThemeBodyClassName(transformedStyles,scope)}),transformedStyles.map(((css,index)=>(0,jsx_runtime.jsx)("style",{children:css},index))),(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 0 0",width:"0",height:"0",role:"none",style:{visibility:"hidden",position:"absolute",left:"-9999px",overflow:"hidden"},dangerouslySetInnerHTML:{__html:transformedSvgs}})]})})),MemoizedBlockList=(0,react.memo)(BlockList),MAX_HEIGHT=2e3,EMPTY_ADDITIONAL_STYLES=[];function ScaledBlockPreview({viewportWidth,containerWidth,minHeight,additionalStyles=EMPTY_ADDITIONAL_STYLES}){viewportWidth||(viewportWidth=containerWidth);const[contentResizeListener,{height:contentHeight}]=(0,use_resize_observer.A)(),{styles}=(0,use_select.A)((select=>({styles:select(store_store).getSettings().styles})),[]),editorStyles=(0,react.useMemo)((()=>styles?[...styles,{css:"body{height:auto;overflow:hidden;border:none;padding:0;}",__unstableType:"presets"},...additionalStyles]:styles),[styles,additionalStyles]),scale=containerWidth/viewportWidth,aspectRatio=contentHeight?containerWidth/(contentHeight*scale):0;return(0,jsx_runtime.jsx)(disabled.A,{className:"block-editor-block-preview__content",style:{transform:`scale(${scale})`,aspectRatio,maxHeight:contentHeight>MAX_HEIGHT?MAX_HEIGHT*scale:void 0,minHeight},children:(0,jsx_runtime.jsxs)(iframe,{contentRef:(0,use_ref_effect.A)((bodyElement=>{const{ownerDocument:{documentElement}}=bodyElement;documentElement.classList.add("block-editor-block-preview__content-iframe"),documentElement.style.position="absolute",documentElement.style.width="100%",bodyElement.style.boxSizing="border-box",bodyElement.style.position="absolute",bodyElement.style.width="100%"}),[]),"aria-hidden":!0,tabIndex:-1,style:{position:"absolute",width:viewportWidth,height:contentHeight,pointerEvents:"none",maxHeight:MAX_HEIGHT,minHeight:0!==scale&&scale<1&&minHeight?minHeight/scale:minHeight},children:[(0,jsx_runtime.jsx)(editor_styles,{styles:editorStyles}),contentResizeListener,(0,jsx_runtime.jsx)(MemoizedBlockList,{renderAppender:!1})]})})}function AutoBlockPreview(props){const[containerResizeListener,{width:containerWidth}]=(0,use_resize_observer.A)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{position:"relative",width:"100%",height:0},children:containerResizeListener}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-preview__container",children:!!containerWidth&&(0,jsx_runtime.jsx)(ScaledBlockPreview,{...props,containerWidth})})]})}const block_preview_EMPTY_ADDITIONAL_STYLES=[];const block_preview=(0,react.memo)((function BlockPreview({blocks,viewportWidth=1200,minHeight,additionalStyles=block_preview_EMPTY_ADDITIONAL_STYLES,__experimentalMinHeight,__experimentalPadding}){__experimentalMinHeight&&(minHeight=__experimentalMinHeight,(0,deprecated_build_module.A)("The __experimentalMinHeight prop",{since:"6.2",version:"6.4",alternative:"minHeight"})),__experimentalPadding&&(additionalStyles=[...additionalStyles,{css:`body { padding: ${__experimentalPadding}px; }`}],(0,deprecated_build_module.A)("The __experimentalPadding prop of BlockPreview",{since:"6.2",version:"6.4",alternative:"additionalStyles"}));const originalSettings=(0,use_select.A)((select=>select(store_store).getSettings()),[]),settings=(0,react.useMemo)((()=>({...originalSettings,focusMode:!1,isPreviewMode:!0})),[originalSettings]),renderedBlocks=(0,react.useMemo)((()=>Array.isArray(blocks)?blocks:[blocks]),[blocks]);return blocks&&0!==blocks.length?(0,jsx_runtime.jsx)(ExperimentalBlockEditorProvider,{value:renderedBlocks,settings,children:(0,jsx_runtime.jsx)(AutoBlockPreview,{viewportWidth,minHeight,additionalStyles})}):null}));function useBlockPreview({blocks,props={},layout}){const originalSettings=(0,use_select.A)((select=>select(store_store).getSettings()),[]),settings=(0,react.useMemo)((()=>({...originalSettings,styles:void 0,focusMode:!1,isPreviewMode:!0})),[originalSettings]),disabledRef=(0,use_disabled.A)(),ref=(0,use_merge_refs.A)([props.ref,disabledRef]),renderedBlocks=(0,react.useMemo)((()=>Array.isArray(blocks)?blocks:[blocks]),[blocks]),children=(0,jsx_runtime.jsxs)(ExperimentalBlockEditorProvider,{value:renderedBlocks,settings,children:[(0,jsx_runtime.jsx)(editor_styles,{}),(0,jsx_runtime.jsx)(BlockListItems,{renderAppender:!1,layout})]});return{...props,ref,className:(0,clsx.A)(props.className,"block-editor-block-preview__live-content","components-disabled"),children:blocks?.length?children:null}}const preview_panel=function InserterPreviewPanel({item}){var _example$viewportWidt;const{name,title,icon,description,initialAttributes,example}=item,isReusable=(0,build_module.tk)(item),blocks=(0,react.useMemo)((()=>example?(0,build_module.KL)(name,{attributes:{...example.attributes,...initialAttributes},innerBlocks:example.innerBlocks}):(0,build_module.Wv)(name,initialAttributes)),[name,example,initialAttributes]),viewportWidth=null!==(_example$viewportWidt=example?.viewportWidth)&&void 0!==_example$viewportWidt?_example$viewportWidt:500,scale=280/viewportWidth,minHeight=0!==scale&&scale<1?144/scale:144;return(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__preview-container",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview",children:isReusable||example?(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview-content",children:(0,jsx_runtime.jsx)(block_preview,{blocks,viewportWidth,minHeight:144,additionalStyles:[{css:`\n\t\t\t\t\t\t\t\t\t\tbody { \n\t\t\t\t\t\t\t\t\t\t\tpadding: 24px;\n\t\t\t\t\t\t\t\t\t\t\tmin-height:${Math.round(minHeight)}px;\n\t\t\t\t\t\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\t\t\t\t\t\talign-items:center;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t.is-root-container { width: 100%; }\n\t\t\t\t\t\t\t\t\t`}]})}):(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview-content-missing",children:(0,i18n_build_module.__)("No preview available.")})}),!isReusable&&(0,jsx_runtime.jsx)(block_card,{title,icon,description})]})};var use_async_list=__webpack_require__("./packages/compose/build-module/hooks/use-async-list/index.js"),build_module_platform=__webpack_require__("./packages/keycodes/build-module/platform.js");const inserter_listbox_item=(0,react.forwardRef)((function InserterListboxItem({isFirst,as:Component,children,...props},ref){return(0,jsx_runtime.jsx)(composite.e.Item,{ref,role:"option",accessibleWhenDisabled:!0,...props,render:htmlProps=>{const propsWithTabIndex={...htmlProps,tabIndex:isFirst?0:htmlProps.tabIndex};return Component?(0,jsx_runtime.jsx)(Component,{...propsWithTabIndex,children}):"function"==typeof children?children(propsWithTabIndex):(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,...propsWithTabIndex,children})}})}));var draggable=__webpack_require__("./packages/components/build-module/draggable/index.js"),drag_handle=__webpack_require__("./packages/icons/build-module/library/drag-handle.js");function BlockDraggableChip({count,icon,isPattern,fadeWhenDisabled}){const patternLabel=isPattern&&(0,i18n_build_module.__)("Pattern");return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-draggable-chip-wrapper",children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-draggable-chip","data-testid":"block-draggable-chip",children:(0,jsx_runtime.jsxs)(component.A,{justify:"center",className:"block-editor-block-draggable-chip__content",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:icon?(0,jsx_runtime.jsx)(block_icon,{icon}):patternLabel||(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d block","%d blocks",count),count)}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(block_icon,{icon:drag_handle.A})}),fadeWhenDisabled&&(0,jsx_runtime.jsx)(flex_item_component.A,{className:"block-editor-block-draggable-chip__disabled",children:(0,jsx_runtime.jsx)("span",{className:"block-editor-block-draggable-chip__disabled-icon"})})]})})})}const inserter_draggable_blocks=({isEnabled,blocks,icon,children,pattern})=>{const transferData={type:"inserter",blocks},blockTypeIcon=(0,use_select.A)((select=>{const{getBlockType}=select(build_module.M_);return 1===blocks.length&&getBlockType(blocks[0].name)?.icon}),[blocks]),{startDragging,stopDragging}=unlock((0,use_dispatch.A)(store_store));return isEnabled?(0,jsx_runtime.jsx)(draggable.A,{__experimentalTransferDataType:"wp-blocks",transferData,onDragStart:event=>{startDragging();const parsedBlocks=pattern?.type===INSERTER_PATTERN_TYPES.user&&"unsynced"!==pattern?.syncStatus?[(0,build_module.Wv)("core/block",{ref:pattern.id})]:blocks;event.dataTransfer.setData("text/html",(0,build_module.lK)(parsedBlocks))},onDragEnd:()=>{stopDragging()},__experimentalDragComponent:(0,jsx_runtime.jsx)(BlockDraggableChip,{count:blocks.length,icon:icon||!pattern&&blockTypeIcon,isPattern:!!pattern}),children:({onDraggableStart,onDraggableEnd})=>children({draggable:!0,onDragStart:onDraggableStart,onDragEnd:onDraggableEnd})}):children({draggable:!1,onDragStart:void 0,onDragEnd:void 0})};const inserter_list_item=(0,react.memo)((function InserterListItem({className,isFirst,item,onSelect,onHover,isDraggable,...props}){const isDraggingRef=(0,react.useRef)(!1),itemIconStyle=item.icon?{backgroundColor:item.icon.background,color:item.icon.foreground}:{},blocks=(0,react.useMemo)((()=>[(0,build_module.Wv)(item.name,item.initialAttributes,(0,build_module.to)(item.innerBlocks))]),[item.name,item.initialAttributes,item.innerBlocks]),isSynced=(0,build_module.tk)(item)&&"unsynced"!==item.syncStatus||(0,build_module.gc)(item);return(0,jsx_runtime.jsx)(inserter_draggable_blocks,{isEnabled:isDraggable&&!item.isDisabled,blocks,icon:item.icon,children:({draggable,onDragStart,onDragEnd})=>(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("block-editor-block-types-list__list-item",{"is-synced":isSynced}),draggable,onDragStart:event=>{isDraggingRef.current=!0,onDragStart&&(onHover(null),onDragStart(event))},onDragEnd:event=>{isDraggingRef.current=!1,onDragEnd&&onDragEnd(event)},children:(0,jsx_runtime.jsxs)(inserter_listbox_item,{isFirst,className:(0,clsx.A)("block-editor-block-types-list__item",className),disabled:item.isDisabled,onClick:event=>{event.preventDefault(),onSelect(item,(0,build_module_platform.H)()?event.metaKey:event.ctrlKey),onHover(null)},onKeyDown:event=>{const{keyCode}=event;keyCode===keycodes_build_module.Fm&&(event.preventDefault(),onSelect(item,(0,build_module_platform.H)()?event.metaKey:event.ctrlKey),onHover(null))},onMouseEnter:()=>{isDraggingRef.current||onHover(item)},onMouseLeave:()=>onHover(null),...props,children:[(0,jsx_runtime.jsx)("span",{className:"block-editor-block-types-list__item-icon",style:itemIconStyle,children:(0,jsx_runtime.jsx)(block_icon,{icon:item.icon,showColors:!0})}),(0,jsx_runtime.jsx)("span",{className:"block-editor-block-types-list__item-title",children:(0,jsx_runtime.jsx)(truncate_component.A,{numberOfLines:3,children:item.title})})]})})})}));const group=(0,react.forwardRef)((function InserterListboxGroup(props,ref){const[shouldSpeak,setShouldSpeak]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{shouldSpeak&&(0,a11y_build_module.L)((0,i18n_build_module.__)("Use left and right arrow keys to move through blocks"))}),[shouldSpeak]),(0,jsx_runtime.jsx)("div",{ref,role:"listbox","aria-orientation":"horizontal",onFocus:()=>{setShouldSpeak(!0)},onBlur:event=>{!event.currentTarget.contains(event.relatedTarget)&&setShouldSpeak(!1)},...props})}));const inserter_listbox_row=(0,react.forwardRef)((function InserterListboxRow(props,ref){return(0,jsx_runtime.jsx)(composite.e.Group,{role:"presentation",ref,...props})}));function chunk(array,size){const chunks=[];for(let i=0,j=array.length;i<j;i+=size)chunks.push(array.slice(i,i+size));return chunks}const block_types_list=function BlockTypesList({items=[],onSelect,onHover=()=>{},children,label,isDraggable=!0}){const className="block-editor-block-types-list",listId=(0,use_instance_id.A)(BlockTypesList,className);return(0,jsx_runtime.jsxs)(group,{className,"aria-label":label,children:[chunk(items,3).map(((row,i)=>(0,jsx_runtime.jsx)(inserter_listbox_row,{children:row.map(((item,j)=>(0,jsx_runtime.jsx)(inserter_list_item,{item,className:(0,build_module.HK)(item.id),onSelect,onHover,isDraggable:isDraggable&&!item.isDisabled,isFirst:0===i&&0===j,rowId:`${listId}-${i}`},item.id)))},i))),children]})};const panel=function InserterPanel({title,icon,children}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__panel-header",children:[(0,jsx_runtime.jsx)("h2",{className:"block-editor-inserter__panel-title",children:title}),(0,jsx_runtime.jsx)(components_build_module_icon.A,{icon})]}),(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__panel-content",children})]})},use_block_types_state=(rootClientId,onInsert,isQuick)=>{const options=(0,react.useMemo)((()=>({[isFiltered]:!!isQuick})),[isQuick]),[items]=(0,use_select.A)((select=>[select(store_store).getInserterItems(rootClientId,options)]),[rootClientId,options]),{getClosestAllowedInsertionPoint}=unlock((0,use_select.A)(store_store)),{createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M),[categories,collections]=(0,use_select.A)((select=>{const{getCategories,getCollections}=select(build_module.M_);return[getCategories(),getCollections()]}),[]);return[items,categories,collections,(0,react.useCallback)((({name,initialAttributes,innerBlocks,syncStatus,content},shouldFocusBlock)=>{const destinationClientId=getClosestAllowedInsertionPoint(name,rootClientId);if(null===destinationClientId){var _getBlockType$title;const title=null!==(_getBlockType$title=(0,build_module.E7)(name)?.title)&&void 0!==_getBlockType$title?_getBlockType$title:name;return void createErrorNotice((0,i18n_build_module.nv)((0,i18n_build_module.__)('Block "%s" can\'t be inserted.'),title),{type:"snackbar",id:"inserter-notice"})}const insertedBlock="unsynced"===syncStatus?(0,build_module.qg)(content,{__unstableSkipMigrationLogs:!0}):(0,build_module.Wv)(name,initialAttributes,(0,build_module.to)(innerBlocks));onInsert(insertedBlock,void 0,shouldFocusBlock,destinationClientId)}),[onInsert,getClosestAllowedInsertionPoint,rootClientId])]};const inserter_listbox=function InserterListbox({children}){return(0,jsx_runtime.jsx)(composite.e,{focusShift:!0,focusWrap:"horizontal",render:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),children})};const no_results=function InserterNoResults(){return(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__no-results",children:[(0,jsx_runtime.jsx)(build_module_icon.A,{className:"block-editor-inserter__no-results-icon",icon:block_default.A}),(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("No results found.")})]})},getBlockNamespace=item=>item.name.split("/")[0],MAX_SUGGESTED_ITEMS=6,block_types_tab_EMPTY_ARRAY=[];function BlockTypesTabPanel({items,collections,categories,onSelectItem,onHover,showMostUsedBlocks,className}){const suggestedItems=(0,react.useMemo)((()=>orderBy(items,"frecency","desc").slice(0,MAX_SUGGESTED_ITEMS)),[items]),uncategorizedItems=(0,react.useMemo)((()=>items.filter((item=>!item.category))),[items]),itemsPerCollection=(0,react.useMemo)((()=>{const result={...collections};return Object.keys(collections).forEach((namespace=>{result[namespace]=items.filter((item=>getBlockNamespace(item)===namespace)),0===result[namespace].length&&delete result[namespace]})),result}),[items,collections]);(0,react.useEffect)((()=>()=>onHover(null)),[]);const currentlyRenderedCategories=(0,use_async_list.A)(categories),didRenderAllCategories=categories.length===currentlyRenderedCategories.length,collectionEntries=(0,react.useMemo)((()=>Object.entries(collections)),[collections]),currentlyRenderedCollections=(0,use_async_list.A)(didRenderAllCategories?collectionEntries:block_types_tab_EMPTY_ARRAY);return(0,jsx_runtime.jsxs)("div",{className,children:[showMostUsedBlocks&&items.length>3&&!!suggestedItems.length&&(0,jsx_runtime.jsx)(panel,{title:(0,i18n_build_module._x)("Most used","blocks"),children:(0,jsx_runtime.jsx)(block_types_list,{items:suggestedItems,onSelect:onSelectItem,onHover,label:(0,i18n_build_module._x)("Most used","blocks")})}),currentlyRenderedCategories.map((category=>{const categoryItems=items.filter((item=>item.category===category.slug));return categoryItems&&categoryItems.length?(0,jsx_runtime.jsx)(panel,{title:category.title,icon:category.icon,children:(0,jsx_runtime.jsx)(block_types_list,{items:categoryItems,onSelect:onSelectItem,onHover,label:category.title})},category.slug):null})),didRenderAllCategories&&uncategorizedItems.length>0&&(0,jsx_runtime.jsx)(panel,{className:"block-editor-inserter__uncategorized-blocks-panel",title:(0,i18n_build_module.__)("Uncategorized"),children:(0,jsx_runtime.jsx)(block_types_list,{items:uncategorizedItems,onSelect:onSelectItem,onHover,label:(0,i18n_build_module.__)("Uncategorized")})}),currentlyRenderedCollections.map((([namespace,collection])=>{const collectionItems=itemsPerCollection[namespace];return collectionItems&&collectionItems.length?(0,jsx_runtime.jsx)(panel,{title:collection.title,icon:collection.icon,children:(0,jsx_runtime.jsx)(block_types_list,{items:collectionItems,onSelect:onSelectItem,onHover,label:collection.title})},namespace):null}))]})}const block_types_tab=(0,react.forwardRef)((function BlockTypesTab({rootClientId,onInsert,onHover,showMostUsedBlocks},ref){const[items,categories,collections,onSelectItem]=use_block_types_state(rootClientId,onInsert);if(!items.length)return(0,jsx_runtime.jsx)(no_results,{});const itemsForCurrentRoot=[],itemsRemaining=[];for(const item of items)"reusable"!==item.category&&(rootClientId&&item.isAllowedInCurrentRoot?itemsForCurrentRoot.push(item):itemsRemaining.push(item));return(0,jsx_runtime.jsx)(inserter_listbox,{children:(0,jsx_runtime.jsxs)("div",{ref,children:[!!itemsForCurrentRoot.length&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(BlockTypesTabPanel,{items:itemsForCurrentRoot,categories,collections,onSelectItem,onHover,showMostUsedBlocks,className:"block-editor-inserter__insertable-blocks-at-selection"})}),(0,jsx_runtime.jsx)(BlockTypesTabPanel,{items:itemsRemaining,categories,collections,onSelectItem,onHover,showMostUsedBlocks,className:"block-editor-inserter__all-blocks"})]})})}));function PatternCategoriesList({selectedCategory,patternCategories,onClickCategory}){const baseClassName="block-editor-block-patterns-explorer__sidebar";return(0,jsx_runtime.jsx)("div",{className:`${baseClassName}__categories-list`,children:patternCategories.map((({name,label})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,label,className:`${baseClassName}__categories-list__item`,isPressed:selectedCategory===name,onClick:()=>{onClickCategory(name)},children:label},name)))})}function PatternsExplorerSearch({searchValue,setSearchValue}){return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-patterns-explorer__search",children:(0,jsx_runtime.jsx)(search_control.A,{__nextHasNoMarginBottom:!0,onChange:setSearchValue,value:searchValue,label:(0,i18n_build_module.__)("Search"),placeholder:(0,i18n_build_module.__)("Search")})})}const pattern_explorer_sidebar=function PatternExplorerSidebar({selectedCategory,patternCategories,onClickCategory,searchValue,setSearchValue}){return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer__sidebar",children:[(0,jsx_runtime.jsx)(PatternsExplorerSearch,{searchValue,setSearchValue}),!searchValue&&(0,jsx_runtime.jsx)(PatternCategoriesList,{selectedCategory,patternCategories,onClickCategory})]})};function Pagination({currentPage,numPages,changePage,totalItems}){return(0,jsx_runtime.jsxs)(v_stack_component.A,{className:"block-editor-patterns__grid-pagination-wrapper",children:[(0,jsx_runtime.jsx)(text_component.A,{variant:"muted",children:(0,i18n_build_module.nv)((0,i18n_build_module._n)("%s item","%s items",totalItems),totalItems)}),numPages>1&&(0,jsx_runtime.jsxs)(h_stack_component.A,{expanded:!1,spacing:3,justify:"flex-start",className:"block-editor-patterns__grid-pagination",children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{expanded:!1,spacing:1,className:"block-editor-patterns__grid-pagination-previous",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:()=>changePage(1),disabled:1===currentPage,"aria-label":(0,i18n_build_module.__)("First page"),size:"compact",accessibleWhenDisabled:!0,className:"block-editor-patterns__grid-pagination-button",children:(0,jsx_runtime.jsx)("span",{children:"«"})}),(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:()=>changePage(currentPage-1),disabled:1===currentPage,"aria-label":(0,i18n_build_module.__)("Previous page"),size:"compact",accessibleWhenDisabled:!0,className:"block-editor-patterns__grid-pagination-button",children:(0,jsx_runtime.jsx)("span",{children:"‹"})})]}),(0,jsx_runtime.jsx)(text_component.A,{variant:"muted",children:(0,i18n_build_module.nv)((0,i18n_build_module._x)("%1$s of %2$s","paging"),currentPage,numPages)}),(0,jsx_runtime.jsxs)(h_stack_component.A,{expanded:!1,spacing:1,className:"block-editor-patterns__grid-pagination-next",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:()=>changePage(currentPage+1),disabled:currentPage===numPages,"aria-label":(0,i18n_build_module.__)("Next page"),size:"compact",accessibleWhenDisabled:!0,className:"block-editor-patterns__grid-pagination-button",children:(0,jsx_runtime.jsx)("span",{children:"›"})}),(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:()=>changePage(numPages),disabled:currentPage===numPages,"aria-label":(0,i18n_build_module.__)("Last page"),size:"compact",accessibleWhenDisabled:!0,className:"block-editor-patterns__grid-pagination-button",children:(0,jsx_runtime.jsx)("span",{children:"»"})})]})]})]})}const WithToolTip=({showTooltip,title,children})=>showTooltip?(0,jsx_runtime.jsx)(tooltip.Ay,{text:title,children}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children});function BlockPattern({id,isDraggable,pattern,onClick,onHover,showTitle=!0,showTooltip,category}){const[isDragging,setIsDragging]=(0,react.useState)(!1),{blocks,viewportWidth}=pattern,descriptionId=`block-editor-block-patterns-list__item-description-${(0,use_instance_id.A)(BlockPattern)}`,patternBlocks=(0,react.useMemo)((()=>category&&isDraggable?(null!=blocks?blocks:[]).map((block=>{const clonedBlock=(0,build_module.JB)(block);return clonedBlock.attributes.metadata?.categories?.includes(category)&&(clonedBlock.attributes.metadata.categories=[category]),clonedBlock})):blocks),[blocks,isDraggable,category]);return(0,jsx_runtime.jsx)(inserter_draggable_blocks,{isEnabled:isDraggable,blocks:patternBlocks,pattern,children:({draggable,onDragStart,onDragEnd})=>(0,jsx_runtime.jsx)("div",{className:"block-editor-block-patterns-list__list-item",draggable,onDragStart:event=>{setIsDragging(!0),onDragStart&&(onHover?.(null),onDragStart(event))},onDragEnd:event=>{setIsDragging(!1),onDragEnd&&onDragEnd(event)},children:(0,jsx_runtime.jsx)(WithToolTip,{showTooltip:showTooltip&&!pattern.type!==INSERTER_PATTERN_TYPES.user,title:pattern.title,children:(0,jsx_runtime.jsxs)(composite.e.Item,{render:(0,jsx_runtime.jsx)("div",{role:"option","aria-label":pattern.title,"aria-describedby":pattern.description?descriptionId:void 0,className:(0,clsx.A)("block-editor-block-patterns-list__item",{"block-editor-block-patterns-list__list-item-synced":pattern.type===INSERTER_PATTERN_TYPES.user&&!pattern.syncStatus})}),id,onClick:()=>{onClick(pattern,blocks),onHover?.(null)},onMouseEnter:()=>{isDragging||onHover?.(pattern)},onMouseLeave:()=>onHover?.(null),children:[(0,jsx_runtime.jsx)(block_preview,{blocks,viewportWidth}),showTitle&&(0,jsx_runtime.jsxs)(h_stack_component.A,{className:"block-editor-patterns__pattern-details",spacing:2,children:[pattern.type===INSERTER_PATTERN_TYPES.user&&!pattern.syncStatus&&(0,jsx_runtime.jsx)("div",{className:"block-editor-patterns__pattern-icon-wrapper",children:(0,jsx_runtime.jsx)(build_module_icon.A,{className:"block-editor-patterns__pattern-icon",icon:symbol.A})}),(!showTooltip||pattern.type===INSERTER_PATTERN_TYPES.user)&&(0,jsx_runtime.jsx)("div",{className:"block-editor-block-patterns-list__item-title",children:pattern.title})]}),!!pattern.description&&(0,jsx_runtime.jsx)(visually_hidden_component.A,{id:descriptionId,children:pattern.description})]})})})})}function BlockPatternPlaceholder(){return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-patterns-list__item is-placeholder"})}const block_patterns_list=(0,react.forwardRef)((function BlockPatternsList({isDraggable,blockPatterns,shownPatterns,onHover,onClickPattern,orientation,label=(0,i18n_build_module.__)("Block patterns"),category,showTitle=!0,showTitlesAsTooltip,pagingProps},ref){const[activeCompositeId,setActiveCompositeId]=(0,react.useState)(void 0);return(0,react.useEffect)((()=>{const firstCompositeItemId=blockPatterns.find((pattern=>shownPatterns.includes(pattern)))?.name;setActiveCompositeId(firstCompositeItemId)}),[shownPatterns,blockPatterns]),(0,jsx_runtime.jsxs)(composite.e,{orientation,activeId:activeCompositeId,setActiveId:setActiveCompositeId,role:"listbox",className:"block-editor-block-patterns-list","aria-label":label,ref,children:[blockPatterns.map((pattern=>shownPatterns.includes(pattern)?(0,jsx_runtime.jsx)(BlockPattern,{id:pattern.name,pattern,onClick:onClickPattern,onHover,isDraggable,showTitle,showTooltip:showTitlesAsTooltip,category},pattern.name):(0,jsx_runtime.jsx)(BlockPatternPlaceholder,{},pattern.name))),pagingProps&&(0,jsx_runtime.jsx)(Pagination,{...pagingProps})]})}));function getIndex({destinationRootClientId,destinationIndex,rootClientId,registry}){if(rootClientId===destinationRootClientId)return destinationIndex;const parents=["",...registry.select(store_store).getBlockParents(destinationRootClientId),destinationRootClientId],parentIndex=parents.indexOf(rootClientId);return-1!==parentIndex?registry.select(store_store).getBlockIndex(parents[parentIndex+1])+1:registry.select(store_store).getBlockOrder(rootClientId).length}const use_insertion_point=function useInsertionPoint({rootClientId="",insertionIndex,clientId,isAppender,onSelect,shouldFocusBlock=!0,selectBlockOnInsert=!0}){const registry=(0,use_registry.A)(),{getSelectedBlock,getClosestAllowedInsertionPoint,isBlockInsertionPointVisible}=unlock((0,use_select.A)(store_store)),{destinationRootClientId,destinationIndex}=(0,use_select.A)((select=>{const{getSelectedBlockClientId,getBlockRootClientId,getBlockIndex,getBlockOrder,getInsertionPoint}=unlock(select(store_store)),selectedBlockClientId=getSelectedBlockClientId();let _destinationIndex,_destinationRootClientId=rootClientId;const insertionPoint=getInsertionPoint();return void 0!==insertionIndex?_destinationIndex=insertionIndex:insertionPoint&&insertionPoint.hasOwnProperty("index")?(_destinationRootClientId=insertionPoint?.rootClientId?insertionPoint.rootClientId:rootClientId,_destinationIndex=insertionPoint.index):clientId?_destinationIndex=getBlockIndex(clientId):!isAppender&&selectedBlockClientId?(_destinationRootClientId=getBlockRootClientId(selectedBlockClientId),_destinationIndex=getBlockIndex(selectedBlockClientId)+1):_destinationIndex=getBlockOrder(_destinationRootClientId).length,{destinationRootClientId:_destinationRootClientId,destinationIndex:_destinationIndex}}),[rootClientId,insertionIndex,clientId,isAppender]),{replaceBlocks,insertBlocks,showInsertionPoint,hideInsertionPoint,setLastFocus}=unlock((0,use_dispatch.A)(store_store)),onInsertBlocks=(0,react.useCallback)(((blocks,meta,shouldForceFocusBlock=!1,_rootClientId)=>{(shouldForceFocusBlock||shouldFocusBlock||selectBlockOnInsert)&&setLastFocus(null);const selectedBlock=getSelectedBlock();!isAppender&&selectedBlock&&(0,build_module.Xw)(selectedBlock)?replaceBlocks(selectedBlock.clientId,blocks,null,shouldFocusBlock||shouldForceFocusBlock?0:null,meta):insertBlocks(blocks,isAppender||void 0===_rootClientId?destinationIndex:getIndex({destinationRootClientId,destinationIndex,rootClientId:_rootClientId,registry}),isAppender||void 0===_rootClientId?destinationRootClientId:_rootClientId,selectBlockOnInsert,shouldFocusBlock||shouldForceFocusBlock?0:null,meta);const blockLength=Array.isArray(blocks)?blocks.length:1,message=(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d block added.","%d blocks added.",blockLength),blockLength);(0,a11y_build_module.L)(message),onSelect&&onSelect(blocks)}),[isAppender,getSelectedBlock,replaceBlocks,insertBlocks,destinationRootClientId,destinationIndex,onSelect,shouldFocusBlock,selectBlockOnInsert]),onToggleInsertionPoint=(0,react.useCallback)((item=>{if(item&&!isBlockInsertionPointVisible()){const allowedDestinationRootClientId=getClosestAllowedInsertionPoint(item.name,destinationRootClientId);null!==allowedDestinationRootClientId&&showInsertionPoint(allowedDestinationRootClientId,getIndex({destinationRootClientId,destinationIndex,rootClientId:allowedDestinationRootClientId,registry}))}else hideInsertionPoint()}),[getClosestAllowedInsertionPoint,isBlockInsertionPointVisible,showInsertionPoint,hideInsertionPoint,destinationRootClientId,destinationIndex]);return[destinationRootClientId,onInsertBlocks,onToggleInsertionPoint]},use_patterns_state=(onInsert,rootClientId,selectedCategory,isQuick)=>{const options=(0,react.useMemo)((()=>({[isFiltered]:!!isQuick})),[isQuick]),{patternCategories,patterns,userPatternCategories}=(0,use_select.A)((select=>{const{getSettings,__experimentalGetAllowedPatterns}=unlock(select(store_store)),{__experimentalUserPatternCategories,__experimentalBlockPatternCategories}=getSettings();return{patterns:__experimentalGetAllowedPatterns(rootClientId,options),userPatternCategories:__experimentalUserPatternCategories,patternCategories:__experimentalBlockPatternCategories}}),[rootClientId,options]),{getClosestAllowedInsertionPointForPattern}=unlock((0,use_select.A)(store_store)),allCategories=(0,react.useMemo)((()=>{const categories=[...patternCategories];return userPatternCategories?.forEach((userCategory=>{categories.find((existingCategory=>existingCategory.name===userCategory.name))||categories.push(userCategory)})),categories}),[patternCategories,userPatternCategories]),{createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M),onClickPattern=(0,react.useCallback)(((pattern,blocks)=>{const destinationRootClientId=isQuick?rootClientId:getClosestAllowedInsertionPointForPattern(pattern,rootClientId);if(null===destinationRootClientId)return;const patternBlocks=pattern.type===INSERTER_PATTERN_TYPES.user&&"unsynced"!==pattern.syncStatus?[(0,build_module.Wv)("core/block",{ref:pattern.id})]:blocks;onInsert((null!=patternBlocks?patternBlocks:[]).map((block=>{const clonedBlock=(0,build_module.JB)(block);return clonedBlock.attributes.metadata?.categories?.includes(selectedCategory)&&(clonedBlock.attributes.metadata.categories=[selectedCategory]),clonedBlock})),pattern.name,!1,destinationRootClientId),createSuccessNotice((0,i18n_build_module.nv)((0,i18n_build_module.__)('Block pattern "%s" inserted.'),pattern.title),{type:"snackbar",id:"inserter-notice"})}),[createSuccessNotice,onInsert,selectedCategory,rootClientId,getClosestAllowedInsertionPointForPattern,isQuick]);return[patterns,allCategories,onClickPattern]};var remove_accents=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents_default=__webpack_require__.n(remove_accents),dist_es2015=__webpack_require__("./node_modules/no-case/dist.es2015/index.js");const defaultGetName=item=>item.name||"",defaultGetTitle=item=>item.title,defaultGetDescription=item=>item.description||"",defaultGetKeywords=item=>item.keywords||[],defaultGetCategory=item=>item.category,defaultGetCollection=()=>null,splitRegexp=[/([\p{Ll}\p{Lo}\p{N}])([\p{Lu}\p{Lt}])/gu,/([\p{Lu}\p{Lt}])([\p{Lu}\p{Lt}][\p{Ll}\p{Lo}])/gu],stripRegexp=/(\p{C}|\p{P}|\p{S})+/giu,extractedWords=new Map,normalizedStrings=new Map;function extractWords(input=""){if(extractedWords.has(input))return extractedWords.get(input);const result=(0,dist_es2015.W)(input,{splitRegexp,stripRegexp}).split(" ").filter(Boolean);return extractedWords.set(input,result),result}function normalizeString(input=""){if(normalizedStrings.has(input))return normalizedStrings.get(input);let result=remove_accents_default()(input);return result=result.replace(/^\//,""),result=result.toLowerCase(),normalizedStrings.set(input,result),result}const getNormalizedSearchTerms=(input="")=>extractWords(normalizeString(input)),searchBlockItems=(items,categories,collections,searchInput)=>{if(0===getNormalizedSearchTerms(searchInput).length)return items;const config={getCategory:item=>categories.find((({slug})=>slug===item.category))?.title,getCollection:item=>collections[item.name.split("/")[0]]?.title};return searchItems(items,searchInput,config)},searchItems=(items=[],searchInput="",config={})=>{if(0===getNormalizedSearchTerms(searchInput).length)return items;const rankedItems=items.map((item=>[item,getItemSearchRank(item,searchInput,config)])).filter((([,rank])=>rank>0));return rankedItems.sort((([,rank1],[,rank2])=>rank2-rank1)),rankedItems.map((([item])=>item))};function getItemSearchRank(item,searchTerm,config={}){const{getName=defaultGetName,getTitle=defaultGetTitle,getDescription=defaultGetDescription,getKeywords=defaultGetKeywords,getCategory=defaultGetCategory,getCollection=defaultGetCollection}=config,name=getName(item),title=getTitle(item),description=getDescription(item),keywords=getKeywords(item),category=getCategory(item),collection=getCollection(item),normalizedSearchInput=normalizeString(searchTerm),normalizedTitle=normalizeString(title);let rank=0;if(normalizedSearchInput===normalizedTitle)rank+=30;else if(normalizedTitle.startsWith(normalizedSearchInput))rank+=20;else{const terms=[name,title,description,...keywords,category,collection].join(" ");0===((unmatchedTerms,unprocessedTerms)=>unmatchedTerms.filter((term=>!getNormalizedSearchTerms(unprocessedTerms).some((unprocessedTerm=>unprocessedTerm.includes(term))))))(extractWords(normalizedSearchInput),terms).length&&(rank+=10)}if(0!==rank&&name.startsWith("core/")){rank+=name!==item.id?1:2}return rank}const PAGE_SIZE=20,INITIAL_INSERTER_RESULTS=5;function usePatternsPaging(currentCategoryPatterns,currentCategory,scrollContainerRef,currentFilter=""){const[currentPage,setCurrentPage]=(0,react.useState)(1),previousCategory=(0,use_previous.A)(currentCategory),previousFilter=(0,use_previous.A)(currentFilter);previousCategory===currentCategory&&previousFilter===currentFilter||1===currentPage||setCurrentPage(1);const totalItems=currentCategoryPatterns.length,pageIndex=currentPage-1,categoryPatterns=(0,react.useMemo)((()=>currentCategoryPatterns.slice(pageIndex*PAGE_SIZE,pageIndex*PAGE_SIZE+PAGE_SIZE)),[pageIndex,currentCategoryPatterns]),categoryPatternsAsyncList=(0,use_async_list.A)(categoryPatterns,{step:INITIAL_INSERTER_RESULTS}),numPages=Math.ceil(currentCategoryPatterns.length/PAGE_SIZE);return(0,react.useEffect)((function scrollToTopOnCategoryChange(){const scrollContainer=(0,get_scroll_container.A)(scrollContainerRef?.current);scrollContainer?.scrollTo(0,0)}),[currentCategory,scrollContainerRef]),{totalItems,categoryPatterns,categoryPatternsAsyncList,numPages,changePage:page=>{const scrollContainer=(0,get_scroll_container.A)(scrollContainerRef?.current);scrollContainer?.scrollTo(0,0),setCurrentPage(page)},currentPage}}function PatternsListHeader({filterValue,filteredBlockPatternsLength}){return filterValue?(0,jsx_runtime.jsx)(heading_component.A,{level:2,lineHeight:"48px",className:"block-editor-block-patterns-explorer__search-results-count",children:(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d pattern found","%d patterns found",filteredBlockPatternsLength),filteredBlockPatternsLength)}):null}const pattern_list=function PatternList({searchValue,selectedCategory,patternCategories,rootClientId}){const container=(0,react.useRef)(),debouncedSpeak=(0,use_debounce.A)(a11y_build_module.L,500),[destinationRootClientId,onInsertBlocks]=use_insertion_point({rootClientId,shouldFocusBlock:!0}),[patterns,,onClickPattern]=use_patterns_state(onInsertBlocks,destinationRootClientId,selectedCategory),registeredPatternCategories=(0,react.useMemo)((()=>patternCategories.map((patternCategory=>patternCategory.name))),[patternCategories]),filteredBlockPatterns=(0,react.useMemo)((()=>{const filteredPatterns=patterns.filter((pattern=>{if(selectedCategory===allPatternsCategory.name)return!0;if(selectedCategory===myPatternsCategory.name&&pattern.type===INSERTER_PATTERN_TYPES.user)return!0;if("uncategorized"===selectedCategory){const hasKnownCategory=pattern.categories.some((category=>registeredPatternCategories.includes(category)));return!pattern.categories?.length||!hasKnownCategory}return pattern.categories?.includes(selectedCategory)}));return searchValue?searchItems(filteredPatterns,searchValue):filteredPatterns}),[searchValue,patterns,selectedCategory,registeredPatternCategories]);(0,react.useEffect)((()=>{if(!searchValue)return;const count=filteredBlockPatterns.length,resultsFoundMessage=(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[searchValue,debouncedSpeak,filteredBlockPatterns.length]);const pagingProps=usePatternsPaging(filteredBlockPatterns,selectedCategory,container),[previousSearchValue,setPreviousSearchValue]=(0,react.useState)(searchValue);searchValue!==previousSearchValue&&(setPreviousSearchValue(searchValue),pagingProps.changePage(1));const hasItems=!!filteredBlockPatterns?.length;return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer__list",ref:container,children:[(0,jsx_runtime.jsx)(PatternsListHeader,{filterValue:searchValue,filteredBlockPatternsLength:filteredBlockPatterns.length}),(0,jsx_runtime.jsx)(inserter_listbox,{children:hasItems&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_patterns_list,{shownPatterns:pagingProps.categoryPatternsAsyncList,blockPatterns:pagingProps.categoryPatterns,onClickPattern,isDraggable:!1}),(0,jsx_runtime.jsx)(Pagination,{...pagingProps})]})})]})};function usePatternCategories(rootClientId,sourceFilter="all"){const[patterns,allCategories]=use_patterns_state(void 0,rootClientId),filteredPatterns=(0,react.useMemo)((()=>"all"===sourceFilter?patterns:patterns.filter((pattern=>!isPatternFiltered(pattern,sourceFilter)))),[sourceFilter,patterns]),populatedCategories=(0,react.useMemo)((()=>{const categories=allCategories.filter((category=>filteredPatterns.some((pattern=>pattern.categories?.includes(category.name))))).sort(((a,b)=>a.label.localeCompare(b.label)));return filteredPatterns.some((pattern=>!function hasRegisteredCategory(pattern,allCategories){return!(!pattern.categories||!pattern.categories.length)&&pattern.categories.some((cat=>allCategories.some((category=>category.name===cat))))}(pattern,allCategories)))&&!categories.find((category=>"uncategorized"===category.name))&&categories.push({name:"uncategorized",label:(0,i18n_build_module._x)("Uncategorized")}),filteredPatterns.some((pattern=>pattern.type===INSERTER_PATTERN_TYPES.user))&&categories.unshift(myPatternsCategory),filteredPatterns.length>0&&categories.unshift({name:allPatternsCategory.name,label:allPatternsCategory.label}),(0,a11y_build_module.L)((0,i18n_build_module.nv)((0,i18n_build_module._n)("%d category button displayed.","%d category buttons displayed.",categories.length),categories.length)),categories}),[allCategories,filteredPatterns]);return populatedCategories}function PatternsExplorer({initialCategory,rootClientId}){const[searchValue,setSearchValue]=(0,react.useState)(""),[selectedCategory,setSelectedCategory]=(0,react.useState)(initialCategory?.name),patternCategories=usePatternCategories(rootClientId);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer",children:[(0,jsx_runtime.jsx)(pattern_explorer_sidebar,{selectedCategory,patternCategories,onClickCategory:setSelectedCategory,searchValue,setSearchValue}),(0,jsx_runtime.jsx)(pattern_list,{searchValue,selectedCategory,patternCategories,rootClientId})]})}const block_patterns_explorer=function PatternsExplorerModal({onModalClose,...restProps}){return(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Patterns"),onRequestClose:onModalClose,isFullScreen:!0,children:(0,jsx_runtime.jsx)(PatternsExplorer,{...restProps})})};var build_module_navigator=__webpack_require__("./packages/components/build-module/navigator/index.js"),item_component=__webpack_require__("./packages/components/build-module/item-group/item/component.js"),flex_block_component=__webpack_require__("./packages/components/build-module/flex/flex-block/component.js");function ScreenHeader({title}){return(0,jsx_runtime.jsx)(v_stack_component.A,{spacing:0,children:(0,jsx_runtime.jsx)(view_component.A,{children:(0,jsx_runtime.jsx)(spacer_component.A,{marginBottom:0,paddingX:4,paddingY:3,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{spacing:2,children:[(0,jsx_runtime.jsx)(build_module_navigator.m.BackButton,{style:{minWidth:24,padding:0},icon:(0,i18n_build_module.V8)()?chevron_right.A:chevron_left.A,size:"small",label:(0,i18n_build_module.__)("Back")}),(0,jsx_runtime.jsx)(spacer_component.A,{children:(0,jsx_runtime.jsx)(heading_component.A,{level:5,children:title})})]})})})})}function MobileTabNavigation({categories,children}){return(0,jsx_runtime.jsxs)(build_module_navigator.m,{initialPath:"/",className:"block-editor-inserter__mobile-tab-navigation",children:[(0,jsx_runtime.jsx)(build_module_navigator.m.Screen,{path:"/",children:(0,jsx_runtime.jsx)(item_group_component.A,{children:categories.map((category=>(0,jsx_runtime.jsx)(build_module_navigator.m.Button,{path:`/category/${category.name}`,as:item_component.A,isAction:!0,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{children:[(0,jsx_runtime.jsx)(flex_block_component.A,{children:category.label}),(0,jsx_runtime.jsx)(build_module_icon.A,{icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A})]})},category.name)))})}),categories.map((category=>(0,jsx_runtime.jsxs)(build_module_navigator.m.Screen,{path:`/category/${category.name}`,children:[(0,jsx_runtime.jsx)(ScreenHeader,{title:(0,i18n_build_module.__)("Back")}),children(category)]},category.name)))]})}var menu_items_choice=__webpack_require__("./packages/components/build-module/menu-items-choice/index.js");const getShouldDisableSyncFilter=sourceFilter=>"all"!==sourceFilter&&"user"!==sourceFilter,getShouldHideSourcesFilter=category=>category.name===myPatternsCategory.name,PATTERN_SOURCE_MENU_OPTIONS=[{value:"all",label:(0,i18n_build_module._x)("All","patterns")},{value:INSERTER_PATTERN_TYPES.directory,label:(0,i18n_build_module.__)("Pattern Directory")},{value:INSERTER_PATTERN_TYPES.theme,label:(0,i18n_build_module.__)("Theme & Plugins")},{value:INSERTER_PATTERN_TYPES.user,label:(0,i18n_build_module.__)("User")}];function PatternsFilter({setPatternSyncFilter,setPatternSourceFilter,patternSyncFilter,patternSourceFilter,scrollContainerRef,category}){const currentPatternSourceFilter=category.name===myPatternsCategory.name?INSERTER_PATTERN_TYPES.user:patternSourceFilter,shouldDisableSyncFilter=getShouldDisableSyncFilter(currentPatternSourceFilter),shouldHideSourcesFilter=getShouldHideSourcesFilter(category),patternSyncMenuOptions=(0,react.useMemo)((()=>[{value:"all",label:(0,i18n_build_module._x)("All","patterns")},{value:INSERTER_SYNC_TYPES.full,label:(0,i18n_build_module._x)("Synced","patterns"),disabled:shouldDisableSyncFilter},{value:INSERTER_SYNC_TYPES.unsynced,label:(0,i18n_build_module._x)("Not synced","patterns"),disabled:shouldDisableSyncFilter}]),[shouldDisableSyncFilter]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(dropdown_menu.A,{popoverProps:{placement:"right-end"},label:(0,i18n_build_module.__)("Filter patterns"),toggleProps:{size:"compact"},icon:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:(0,jsx_runtime.jsx)(svg.t4,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z",fill:"currentColor"})})}),children:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!shouldHideSourcesFilter&&(0,jsx_runtime.jsx)(menu_group.A,{label:(0,i18n_build_module.__)("Source"),children:(0,jsx_runtime.jsx)(menu_items_choice.A,{choices:PATTERN_SOURCE_MENU_OPTIONS,onSelect:value=>{!function handleSetSourceFilterChange(newSourceFilter){setPatternSourceFilter(newSourceFilter),getShouldDisableSyncFilter(newSourceFilter)&&setPatternSyncFilter("all")}(value),scrollContainerRef.current?.scrollTo(0,0)},value:currentPatternSourceFilter})}),(0,jsx_runtime.jsx)(menu_group.A,{label:(0,i18n_build_module.__)("Type"),children:(0,jsx_runtime.jsx)(menu_items_choice.A,{choices:patternSyncMenuOptions,onSelect:value=>{setPatternSyncFilter(value),scrollContainerRef.current?.scrollTo(0,0)},value:patternSyncFilter})}),(0,jsx_runtime.jsx)("div",{className:"block-editor-tool-selector__help",children:(0,create_interpolate_element.A)((0,i18n_build_module.__)("Patterns are available from the <Link>WordPress.org Pattern Directory</Link>, bundled in the active theme, or created by users on this site. Only patterns created on this site can be synced."),{Link:(0,jsx_runtime.jsx)(external_link.A,{href:(0,i18n_build_module.__)("https://wordpress.org/patterns/")})})})]})})})}const pattern_category_previews_noop=()=>{};function PatternCategoryPreviews({rootClientId,onInsert,onHover=pattern_category_previews_noop,category,showTitlesAsTooltip}){const isZoomOutMode=(0,use_select.A)((select=>unlock(select(store_store)).isZoomOut()),[]),[allPatterns,,onClickPattern]=use_patterns_state(onInsert,rootClientId,category?.name),[patternSyncFilter,setPatternSyncFilter]=(0,react.useState)("all"),[patternSourceFilter,setPatternSourceFilter]=(0,react.useState)("all"),availableCategories=usePatternCategories(rootClientId,patternSourceFilter),scrollContainerRef=(0,react.useRef)(),currentCategoryPatterns=(0,react.useMemo)((()=>allPatterns.filter((pattern=>!isPatternFiltered(pattern,patternSourceFilter,patternSyncFilter)&&(category.name===allPatternsCategory.name||(category.name===myPatternsCategory.name&&pattern.type===INSERTER_PATTERN_TYPES.user||("uncategorized"===category.name?!pattern.categories||!pattern.categories.some((catName=>availableCategories.some((c=>c.name===catName)))):pattern.categories?.includes(category.name))))))),[allPatterns,availableCategories,category.name,patternSourceFilter,patternSyncFilter]),pagingProps=usePatternsPaging(currentCategoryPatterns,category,scrollContainerRef),{changePage}=pagingProps;(0,react.useEffect)((()=>()=>onHover(null)),[]);const onSetPatternSyncFilter=(0,react.useCallback)((value=>{setPatternSyncFilter(value),changePage(1)}),[setPatternSyncFilter,changePage]),onSetPatternSourceFilter=(0,react.useCallback)((value=>{setPatternSourceFilter(value),changePage(1)}),[setPatternSourceFilter,changePage]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:2,className:"block-editor-inserter__patterns-category-panel-header",children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{children:[(0,jsx_runtime.jsx)(flex_block_component.A,{children:(0,jsx_runtime.jsx)(heading_component.A,{className:"block-editor-inserter__patterns-category-panel-title",size:13,level:4,as:"div",children:category.label})}),(0,jsx_runtime.jsx)(PatternsFilter,{patternSyncFilter,patternSourceFilter,setPatternSyncFilter:onSetPatternSyncFilter,setPatternSourceFilter:onSetPatternSourceFilter,scrollContainerRef,category})]}),!currentCategoryPatterns.length&&(0,jsx_runtime.jsx)(text_component.A,{variant:"muted",className:"block-editor-inserter__patterns-category-no-results",children:(0,i18n_build_module.__)("No results found")})]}),currentCategoryPatterns.length>0&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isZoomOutMode&&(0,jsx_runtime.jsx)(text_component.A,{size:"12",as:"p",className:"block-editor-inserter__help-text",children:(0,i18n_build_module.__)("Drag and drop patterns into the canvas.")}),(0,jsx_runtime.jsx)(block_patterns_list,{ref:scrollContainerRef,shownPatterns:pagingProps.categoryPatternsAsyncList,blockPatterns:pagingProps.categoryPatterns,onClickPattern,onHover,label:category.label,orientation:"vertical",category:category.name,isDraggable:!0,showTitlesAsTooltip,patternFilter:patternSourceFilter,pagingProps})]})]})}const{Tabs:category_tabs_Tabs}=unlock(private_apis.j);const category_tabs=function CategoryTabs({categories,selectedCategory,onSelectCategory,children}){const defaultTransition={type:"tween",duration:(0,use_reduced_motion.A)()?0:.25,ease:[.6,0,.4,1]},previousSelectedCategory=(0,use_previous.A)(selectedCategory);return(0,jsx_runtime.jsxs)(category_tabs_Tabs,{selectOnMove:!1,selectedTabId:selectedCategory?selectedCategory.name:null,orientation:"vertical",onSelect:categoryId=>{onSelectCategory(categories.find((category=>category.name===categoryId)))},children:[(0,jsx_runtime.jsx)(category_tabs_Tabs.TabList,{className:"block-editor-inserter__category-tablist",children:categories.map((category=>(0,jsx_runtime.jsx)(category_tabs_Tabs.Tab,{tabId:category.name,"aria-label":category.label,"aria-current":category===selectedCategory?"true":void 0,children:category.label},category.name)))}),categories.map((category=>(0,jsx_runtime.jsx)(category_tabs_Tabs.TabPanel,{tabId:category.name,focusable:!1,children:(0,jsx_runtime.jsx)(motion.P.div,{className:"block-editor-inserter__category-panel",initial:previousSelectedCategory?"open":"closed",animate:"open",variants:{open:{transform:"translateX( 0 )",transitionEnd:{zIndex:"1"}},closed:{transform:"translateX( -100% )",zIndex:"-1"}},transition:defaultTransition,children})},category.name)))]})};const block_patterns_tab=function BlockPatternsTab({onSelectCategory,selectedCategory,onInsert,rootClientId,children}){const[showPatternsExplorer,setShowPatternsExplorer]=(0,react.useState)(!1),categories=usePatternCategories(rootClientId),isMobile=(0,use_viewport_match.A)("medium","<");return(0,use_select.A)((select=>unlock(select(store_store)).isResolvingPatterns()),[])?(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__patterns-loading",children:(0,jsx_runtime.jsx)(spinner.Ay,{})}):categories.length?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isMobile&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__block-patterns-tabs-container",children:[(0,jsx_runtime.jsx)(category_tabs,{categories,selectedCategory,onSelectCategory,children}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"block-editor-inserter__patterns-explore-button",onClick:()=>setShowPatternsExplorer(!0),variant:"secondary",children:(0,i18n_build_module.__)("Explore all patterns")})]}),isMobile&&(0,jsx_runtime.jsx)(MobileTabNavigation,{categories,children:category=>(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__category-panel",children:(0,jsx_runtime.jsx)(PatternCategoryPreviews,{onInsert,rootClientId,category,showTitlesAsTooltip:!1},category.name)})}),showPatternsExplorer&&(0,jsx_runtime.jsx)(block_patterns_explorer,{initialCategory:selectedCategory||categories[0],patternCategories:categories,onModalClose:()=>setShowPatternsExplorer(!1),rootClientId})]}):(0,jsx_runtime.jsx)(no_results,{})};var external=__webpack_require__("./packages/icons/build-module/library/external.js");const mediaTypeTag={image:"img",video:"video",audio:"audio"};function getBlockAndPreviewFromMedia(media,mediaType){const attributes={id:media.id||void 0,caption:media.caption||void 0},mediaSrc=media.url,alt=media.alt||void 0;"image"===mediaType?(attributes.url=mediaSrc,attributes.alt=alt):["video","audio"].includes(mediaType)&&(attributes.src=mediaSrc);const PreviewTag=mediaTypeTag[mediaType],preview=(0,jsx_runtime.jsx)(PreviewTag,{src:media.previewUrl||mediaSrc,alt,controls:"audio"===mediaType||void 0,inert:"true",onError:({currentTarget})=>{currentTarget.src===media.previewUrl&&(currentTarget.src=mediaSrc)}});return[(0,build_module.Wv)(`core/${mediaType}`,attributes),preview]}const ALLOWED_MEDIA_TYPES=["image"],MAXIMUM_TITLE_LENGTH=25,MEDIA_OPTIONS_POPOVER_PROPS={position:"bottom left",className:"block-editor-inserter__media-list__item-preview-options__popover"};function MediaPreviewOptions({category,media}){if(!category.getReportUrl)return null;const reportUrl=category.getReportUrl(media);return(0,jsx_runtime.jsx)(dropdown_menu.A,{className:"block-editor-inserter__media-list__item-preview-options",label:(0,i18n_build_module.__)("Options"),popoverProps:MEDIA_OPTIONS_POPOVER_PROPS,icon:more_vertical.A,children:()=>(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>window.open(reportUrl,"_blank").focus(),icon:external.A,children:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Report %s"),category.mediaType)})})})}function InsertExternalImageModal({onClose,onSubmit}){return(0,jsx_runtime.jsxs)(modal.A,{title:(0,i18n_build_module.__)("Insert external image"),onRequestClose:onClose,className:"block-editor-inserter-media-tab-media-preview-inserter-external-image-modal",children:[(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:3,children:[(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("This image cannot be uploaded to your Media Library, but it can still be inserted as an external image.")}),(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("External images can be removed by the external provider without warning and could even have legal compliance issues related to privacy legislation.")})]}),(0,jsx_runtime.jsxs)(component.A,{className:"block-editor-block-lock-modal__actions",justify:"flex-end",expanded:!1,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:onClose,children:(0,i18n_build_module.__)("Cancel")})}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",onClick:onSubmit,children:(0,i18n_build_module.__)("Insert")})})]})]})}function MediaPreview({media,onClick,category}){const[showExternalUploadModal,setShowExternalUploadModal]=(0,react.useState)(!1),[isHovered,setIsHovered]=(0,react.useState)(!1),[isInserting,setIsInserting]=(0,react.useState)(!1),[block,preview]=(0,react.useMemo)((()=>getBlockAndPreviewFromMedia(media,category.mediaType)),[media,category.mediaType]),{createErrorNotice,createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M),{getSettings,getBlock}=(0,use_select.A)(store_store),{updateBlockAttributes}=(0,use_dispatch.A)(store_store),onMediaInsert=(0,react.useCallback)((previewBlock=>{if(isInserting)return;const settings=getSettings(),clonedBlock=(0,build_module.JB)(previewBlock),{id,url,caption}=clonedBlock.attributes;id||settings.mediaUpload?id?onClick(clonedBlock):(setIsInserting(!0),window.fetch(url).then((response=>response.blob())).then((blob=>{const fileName=(0,get_filename.e)(url)||"image.jpg",file=new File([blob],fileName,{type:blob.type});settings.mediaUpload({filesList:[file],additionalData:{caption},onFileChange([img]){(0,blob_build_module.H8)(img.url)||(getBlock(clonedBlock.clientId)?updateBlockAttributes(clonedBlock.clientId,{...clonedBlock.attributes,id:img.id,url:img.url}):(onClick({...clonedBlock,attributes:{...clonedBlock.attributes,id:img.id,url:img.url}}),createSuccessNotice((0,i18n_build_module.__)("Image uploaded and inserted."),{type:"snackbar",id:"inserter-notice"})),setIsInserting(!1))},allowedTypes:ALLOWED_MEDIA_TYPES,onError(message){createErrorNotice(message,{type:"snackbar",id:"inserter-notice"}),setIsInserting(!1)}})})).catch((()=>{setShowExternalUploadModal(!0),setIsInserting(!1)}))):setShowExternalUploadModal(!0)}),[isInserting,getSettings,onClick,createSuccessNotice,updateBlockAttributes,createErrorNotice,getBlock]),title="string"==typeof media.title?media.title:media.title?.rendered||(0,i18n_build_module.__)("no title");let truncatedTitle;if(title.length>MAXIMUM_TITLE_LENGTH){const omission="...";truncatedTitle=title.slice(0,MAXIMUM_TITLE_LENGTH-omission.length)+omission}const onMouseEnter=(0,react.useCallback)((()=>setIsHovered(!0)),[]),onMouseLeave=(0,react.useCallback)((()=>setIsHovered(!1)),[]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(inserter_draggable_blocks,{isEnabled:!0,blocks:[block],children:({draggable,onDragStart,onDragEnd})=>(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("block-editor-inserter__media-list__list-item",{"is-hovered":isHovered}),draggable,onDragStart,onDragEnd,children:(0,jsx_runtime.jsxs)("div",{onMouseEnter,onMouseLeave,children:[(0,jsx_runtime.jsx)(tooltip.Ay,{text:truncatedTitle||title,children:(0,jsx_runtime.jsx)(composite.e.Item,{render:(0,jsx_runtime.jsx)("div",{"aria-label":title,role:"option",className:"block-editor-inserter__media-list__item"}),onClick:()=>onMediaInsert(block),children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__media-list__item-preview",children:[preview,isInserting&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__media-list__item-preview-spinner",children:(0,jsx_runtime.jsx)(spinner.Ay,{})})]})})}),!isInserting&&(0,jsx_runtime.jsx)(MediaPreviewOptions,{category,media})]})})}),showExternalUploadModal&&(0,jsx_runtime.jsx)(InsertExternalImageModal,{onClose:()=>setShowExternalUploadModal(!1),onSubmit:()=>{onClick((0,build_module.JB)(block)),createSuccessNotice((0,i18n_build_module.__)("Image inserted."),{type:"snackbar",id:"inserter-notice"}),setShowExternalUploadModal(!1)}})]})}const media_list=function MediaList({mediaList,category,onClick,label=(0,i18n_build_module.__)("Media List")}){return(0,jsx_runtime.jsx)(composite.e,{role:"listbox",className:"block-editor-inserter__media-list","aria-label":label,children:mediaList.map(((media,index)=>(0,jsx_runtime.jsx)(MediaPreview,{media,category,onClick},media.id||media.sourceId||index)))})};const INITIAL_MEDIA_ITEMS_PER_PAGE=10;function MediaCategoryPanel({rootClientId,onInsert,category}){const[search,setSearch,debouncedSearch]=(0,use_debounced_input.A)(),{mediaList,isLoading}=function useMediaResults(category,query={}){const[mediaList,setMediaList]=(0,react.useState)(),[isLoading,setIsLoading]=(0,react.useState)(!1),lastRequestRef=(0,react.useRef)();return(0,react.useEffect)((()=>{(async()=>{const key=JSON.stringify({category:category.name,...query});lastRequestRef.current=key,setIsLoading(!0),setMediaList([]);const _media=await(category.fetch?.(query));key===lastRequestRef.current&&(setMediaList(_media),setIsLoading(!1))})()}),[category.name,...Object.values(query)]),{mediaList,isLoading}}(category,{per_page:debouncedSearch?20:INITIAL_MEDIA_ITEMS_PER_PAGE,search:debouncedSearch}),baseCssClass="block-editor-inserter__media-panel",searchLabel=category.labels.search_items||(0,i18n_build_module.__)("Search");return(0,jsx_runtime.jsxs)("div",{className:baseCssClass,children:[(0,jsx_runtime.jsx)(search_control.A,{__nextHasNoMarginBottom:!0,className:`${baseCssClass}-search`,onChange:setSearch,value:search,label:searchLabel,placeholder:searchLabel}),isLoading&&(0,jsx_runtime.jsx)("div",{className:`${baseCssClass}-spinner`,children:(0,jsx_runtime.jsx)(spinner.Ay,{})}),!isLoading&&!mediaList?.length&&(0,jsx_runtime.jsx)(no_results,{}),!isLoading&&!!mediaList?.length&&(0,jsx_runtime.jsx)(media_list,{rootClientId,onClick:onInsert,mediaList,category})]})}const media_tab_ALLOWED_MEDIA_TYPES=["image","video","audio"];const media_tab=function MediaTab({rootClientId,selectedCategory,onSelectCategory,onInsert,children}){const mediaCategories=function useMediaCategories(rootClientId){const[categories,setCategories]=(0,react.useState)([]),inserterMediaCategories=(0,use_select.A)((select=>unlock(select(store_store)).getInserterMediaCategories()),[]),{canInsertImage,canInsertVideo,canInsertAudio}=(0,use_select.A)((select=>{const{canInsertBlockType}=select(store_store);return{canInsertImage:canInsertBlockType("core/image",rootClientId),canInsertVideo:canInsertBlockType("core/video",rootClientId),canInsertAudio:canInsertBlockType("core/audio",rootClientId)}}),[rootClientId]);return(0,react.useEffect)((()=>{(async()=>{const _categories=[];if(!inserterMediaCategories)return;const categoriesHaveMedia=new Map(await Promise.all(inserterMediaCategories.map((async category=>{if(category.isExternalResource)return[category.name,!0];let results=[];try{results=await category.fetch({per_page:1})}catch(e){}return[category.name,!!results.length]})))),canInsertMediaType={image:canInsertImage,video:canInsertVideo,audio:canInsertAudio};inserterMediaCategories.forEach((category=>{canInsertMediaType[category.mediaType]&&categoriesHaveMedia.get(category.name)&&_categories.push(category)})),_categories.length&&setCategories(_categories)})()}),[canInsertImage,canInsertVideo,canInsertAudio,inserterMediaCategories]),categories}(rootClientId),isMobile=(0,use_viewport_match.A)("medium","<"),onSelectMedia=(0,react.useCallback)((media=>{if(!media?.url)return;const[block]=getBlockAndPreviewFromMedia(media,media.type);onInsert(block)}),[onInsert]),categories=(0,react.useMemo)((()=>mediaCategories.map((mediaCategory=>({...mediaCategory,label:mediaCategory.labels.name})))),[mediaCategories]);return categories.length?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isMobile&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__media-tabs-container",children:[(0,jsx_runtime.jsx)(category_tabs,{categories,selectedCategory,onSelectCategory,children}),(0,jsx_runtime.jsx)(check,{children:(0,jsx_runtime.jsx)(media_upload,{multiple:!1,onSelect:onSelectMedia,allowedTypes:media_tab_ALLOWED_MEDIA_TYPES,render:({open})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,onClick:event=>{event.target.focus(),open()},className:"block-editor-inserter__media-library-button",variant:"secondary","data-unstable-ignore-focus-outside-for-relatedtarget":".media-modal",children:(0,i18n_build_module.__)("Open Media Library")})})})]}),isMobile&&(0,jsx_runtime.jsx)(MobileTabNavigation,{categories,children:category=>(0,jsx_runtime.jsx)(MediaCategoryPanel,{onInsert,rootClientId,category})})]}):(0,jsx_runtime.jsx)(no_results,{})},{Fill:__unstableInserterMenuExtension,Slot}=(0,slot_fill.QJ)("__unstableInserterMenuExtension");__unstableInserterMenuExtension.Slot=Slot;const inserter_menu_extension=__unstableInserterMenuExtension,orderInserterBlockItems=(items,priority)=>priority?(items.sort((({id:aName},{id:bName})=>{let aIndex=priority.indexOf(aName),bIndex=priority.indexOf(bName);return aIndex<0&&(aIndex=priority.length),bIndex<0&&(bIndex=priority.length),aIndex-bIndex})),items):items,search_results_EMPTY_ARRAY=[];const search_results=function InserterSearchResults({filterValue,onSelect,onHover,onHoverPattern,rootClientId,clientId,isAppender,__experimentalInsertionIndex,maxBlockPatterns,maxBlockTypes,showBlockDirectory=!1,isDraggable=!0,shouldFocusBlock=!0,prioritizePatterns,selectBlockOnInsert,isQuick}){const debouncedSpeak=(0,use_debounce.A)(a11y_build_module.L,500),{prioritizedBlocks}=(0,use_select.A)((select=>{const blockListSettings=select(store_store).getBlockListSettings(rootClientId);return{prioritizedBlocks:blockListSettings?.prioritizedInserterBlocks||search_results_EMPTY_ARRAY}}),[rootClientId]),[destinationRootClientId,onInsertBlocks]=use_insertion_point({onSelect,rootClientId,clientId,isAppender,insertionIndex:__experimentalInsertionIndex,shouldFocusBlock,selectBlockOnInsert}),[blockTypes,blockTypeCategories,blockTypeCollections,onSelectBlockType]=use_block_types_state(destinationRootClientId,onInsertBlocks,isQuick),[patterns,,onClickPattern]=use_patterns_state(onInsertBlocks,destinationRootClientId),filteredBlockPatterns=(0,react.useMemo)((()=>{if(0===maxBlockPatterns)return[];const results=searchItems(patterns,filterValue);return void 0!==maxBlockPatterns?results.slice(0,maxBlockPatterns):results}),[filterValue,patterns,maxBlockPatterns]);let maxBlockTypesToShow=maxBlockTypes;prioritizePatterns&&filteredBlockPatterns.length>2&&(maxBlockTypesToShow=0);const filteredBlockTypes=(0,react.useMemo)((()=>{if(0===maxBlockTypesToShow)return[];let orderedItems=orderBy(blockTypes.filter((blockType=>"core/block"!==blockType.name)),"frecency","desc");!filterValue&&prioritizedBlocks.length&&(orderedItems=orderInserterBlockItems(orderedItems,prioritizedBlocks));const results=searchBlockItems(orderedItems,blockTypeCategories,blockTypeCollections,filterValue);return void 0!==maxBlockTypesToShow?results.slice(0,maxBlockTypesToShow):results}),[filterValue,blockTypes,blockTypeCategories,blockTypeCollections,maxBlockTypesToShow,prioritizedBlocks]);(0,react.useEffect)((()=>{if(!filterValue)return;const count=filteredBlockTypes.length+filteredBlockPatterns.length,resultsFoundMessage=(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[filterValue,debouncedSpeak,filteredBlockTypes,filteredBlockPatterns]);const currentShownBlockTypes=(0,use_async_list.A)(filteredBlockTypes,{step:9}),currentShownPatterns=(0,use_async_list.A)(currentShownBlockTypes.length===filteredBlockTypes.length?filteredBlockPatterns:search_results_EMPTY_ARRAY),hasItems=filteredBlockTypes.length>0||filteredBlockPatterns.length>0,blocksUI=!!filteredBlockTypes.length&&(0,jsx_runtime.jsx)(panel,{title:(0,jsx_runtime.jsx)(visually_hidden_component.A,{children:(0,i18n_build_module.__)("Blocks")}),children:(0,jsx_runtime.jsx)(block_types_list,{items:currentShownBlockTypes,onSelect:onSelectBlockType,onHover,label:(0,i18n_build_module.__)("Blocks"),isDraggable})}),patternsUI=!!filteredBlockPatterns.length&&(0,jsx_runtime.jsx)(panel,{title:(0,jsx_runtime.jsx)(visually_hidden_component.A,{children:(0,i18n_build_module.__)("Block patterns")}),children:(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-patterns",children:(0,jsx_runtime.jsx)(block_patterns_list,{shownPatterns:currentShownPatterns,blockPatterns:filteredBlockPatterns,onClickPattern,onHover:onHoverPattern,isDraggable})})});return(0,jsx_runtime.jsxs)(inserter_listbox,{children:[!showBlockDirectory&&!hasItems&&(0,jsx_runtime.jsx)(no_results,{}),prioritizePatterns?patternsUI:blocksUI,!!filteredBlockTypes.length&&!!filteredBlockPatterns.length&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-separator"}),prioritizePatterns?blocksUI:patternsUI,showBlockDirectory&&(0,jsx_runtime.jsx)(inserter_menu_extension.Slot,{fillProps:{onSelect:onSelectBlockType,onHover,filterValue,hasItems,rootClientId:destinationRootClientId},children:fills=>fills.length?fills:hasItems?null:(0,jsx_runtime.jsx)(no_results,{})})]})};var close_small=__webpack_require__("./packages/icons/build-module/library/close-small.js");const{Tabs:tabbed_sidebar_Tabs}=unlock(private_apis.j);const tabbed_sidebar=(0,react.forwardRef)((function TabbedSidebar({defaultTabId,onClose,onSelect,selectedTab,tabs,closeButtonLabel},ref){return(0,jsx_runtime.jsx)("div",{className:"block-editor-tabbed-sidebar",children:(0,jsx_runtime.jsxs)(tabbed_sidebar_Tabs,{selectOnMove:!1,defaultTabId,onSelect,selectedTabId:selectedTab,children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-tabbed-sidebar__tablist-and-close-button",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"block-editor-tabbed-sidebar__close-button",icon:close_small.A,label:closeButtonLabel,onClick:()=>onClose(),size:"small"}),(0,jsx_runtime.jsx)(tabbed_sidebar_Tabs.TabList,{className:"block-editor-tabbed-sidebar__tablist",ref,children:tabs.map((tab=>(0,jsx_runtime.jsx)(tabbed_sidebar_Tabs.Tab,{tabId:tab.name,className:"block-editor-tabbed-sidebar__tab",children:tab.title},tab.name)))})]}),tabs.map((tab=>(0,jsx_runtime.jsx)(tabbed_sidebar_Tabs.TabPanel,{tabId:tab.name,focusable:!1,className:"block-editor-tabbed-sidebar__tabpanel",ref:tab.panelRef,children:tab.panel},tab.name)))]})})}));function useZoomOut(zoomOut=!0){const{setZoomLevel,resetZoomLevel}=unlock((0,use_dispatch.A)(store_store)),{isZoomOut}=unlock((0,use_select.A)(store_store)),isWideViewport=(0,use_viewport_match.A)("large");(0,react.useEffect)((()=>{const isZoomOutOnMount=isZoomOut();return()=>{isZoomOutOnMount&&isWideViewport?setZoomLevel("auto-scaled"):resetZoomLevel()}}),[]),(0,react.useEffect)((()=>{zoomOut&&isWideViewport?setZoomLevel("auto-scaled"):resetZoomLevel()}),[zoomOut,setZoomLevel,resetZoomLevel,isWideViewport])}const NOOP=()=>{};const PrivateInserterMenu=(0,react.forwardRef)((function InserterMenu({rootClientId,clientId,isAppender,__experimentalInsertionIndex,onSelect,showInserterHelpPanel,showMostUsedBlocks,__experimentalFilterValue="",shouldFocusBlock=!0,onPatternCategorySelection,onClose,__experimentalInitialTab,__experimentalInitialCategory},ref){const isZoomOutMode=(0,use_select.A)((select=>unlock(select(store_store)).isZoomOut()),[]),[filterValue,setFilterValue,delayedFilterValue]=(0,use_debounced_input.A)(__experimentalFilterValue),[hoveredItem,setHoveredItem]=(0,react.useState)(null),[selectedPatternCategory,setSelectedPatternCategory]=(0,react.useState)(__experimentalInitialCategory),[patternFilter,setPatternFilter]=(0,react.useState)("all"),[selectedMediaCategory,setSelectedMediaCategory]=(0,react.useState)(null),[selectedTab,setSelectedTab]=(0,react.useState)(function getInitialTab(){return __experimentalInitialTab||(isZoomOutMode?"patterns":void 0)}());useZoomOut("patterns"===selectedTab||"media"===selectedTab);const[destinationRootClientId,onInsertBlocks,onToggleInsertionPoint]=use_insertion_point({rootClientId,clientId,isAppender,insertionIndex:__experimentalInsertionIndex,shouldFocusBlock}),blockTypesTabRef=(0,react.useRef)(),onInsert=(0,react.useCallback)(((blocks,meta,shouldForceFocusBlock,_rootClientId)=>{onInsertBlocks(blocks,meta,shouldForceFocusBlock,_rootClientId),onSelect(blocks),window.requestAnimationFrame((()=>{shouldFocusBlock||blockTypesTabRef.current?.contains(ref.current.ownerDocument.activeElement)||blockTypesTabRef.current?.querySelector("button").focus()}))}),[onInsertBlocks,onSelect,shouldFocusBlock]),onInsertPattern=(0,react.useCallback)(((blocks,patternName,...args)=>{onToggleInsertionPoint(!1),onInsertBlocks(blocks,{patternName},...args),onSelect()}),[onInsertBlocks,onSelect]),onHover=(0,react.useCallback)((item=>{onToggleInsertionPoint(item),setHoveredItem(item)}),[onToggleInsertionPoint,setHoveredItem]),onClickPatternCategory=(0,react.useCallback)(((patternCategory,filter)=>{setSelectedPatternCategory(patternCategory),setPatternFilter(filter),onPatternCategorySelection?.()}),[setSelectedPatternCategory,onPatternCategorySelection]),showPatternPanel="patterns"===selectedTab&&!delayedFilterValue&&!!selectedPatternCategory,showMediaPanel="media"===selectedTab&&!!selectedMediaCategory,inserterSearch=(0,react.useMemo)((()=>"media"===selectedTab?null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(search_control.A,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",onChange:value=>{hoveredItem&&setHoveredItem(null),setFilterValue(value)},value:filterValue,label:(0,i18n_build_module.__)("Search"),placeholder:(0,i18n_build_module.__)("Search")}),!!delayedFilterValue&&(0,jsx_runtime.jsx)(search_results,{filterValue:delayedFilterValue,onSelect,onHover,rootClientId,clientId,isAppender,__experimentalInsertionIndex,showBlockDirectory:!0,shouldFocusBlock,prioritizePatterns:"patterns"===selectedTab})]})),[selectedTab,hoveredItem,setHoveredItem,setFilterValue,filterValue,delayedFilterValue,onSelect,onHover,shouldFocusBlock,clientId,rootClientId,__experimentalInsertionIndex,isAppender]),blocksTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__block-list",children:(0,jsx_runtime.jsx)(block_types_tab,{ref:blockTypesTabRef,rootClientId:destinationRootClientId,onInsert,onHover,showMostUsedBlocks})}),showInserterHelpPanel&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__tips",children:[(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"h2",children:(0,i18n_build_module.__)("A tip for using the block editor")}),(0,jsx_runtime.jsx)(tips,{})]})]})),[destinationRootClientId,onInsert,onHover,showMostUsedBlocks,showInserterHelpPanel]),patternsTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(block_patterns_tab,{rootClientId:destinationRootClientId,onInsert:onInsertPattern,onSelectCategory:onClickPatternCategory,selectedCategory:selectedPatternCategory,children:showPatternPanel&&(0,jsx_runtime.jsx)(PatternCategoryPreviews,{rootClientId:destinationRootClientId,onInsert:onInsertPattern,category:selectedPatternCategory,patternFilter,showTitlesAsTooltip:!0})})),[destinationRootClientId,onInsertPattern,onClickPatternCategory,patternFilter,selectedPatternCategory,showPatternPanel]),mediaTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(media_tab,{rootClientId:destinationRootClientId,selectedCategory:selectedMediaCategory,onSelectCategory:setSelectedMediaCategory,onInsert,children:showMediaPanel&&(0,jsx_runtime.jsx)(MediaCategoryPanel,{rootClientId:destinationRootClientId,onInsert,category:selectedMediaCategory})})),[destinationRootClientId,onInsert,selectedMediaCategory,setSelectedMediaCategory,showMediaPanel]),tabsRef=(0,react.useRef)();return(0,react.useLayoutEffect)((()=>{tabsRef.current&&window.requestAnimationFrame((()=>{tabsRef.current.querySelector('[role="tab"][aria-selected="true"]')?.focus()}))}),[]),(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("block-editor-inserter__menu",{"show-panel":showPatternPanel||showMediaPanel,"is-zoom-out":isZoomOutMode}),ref,children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__main-area",children:(0,jsx_runtime.jsx)(tabbed_sidebar,{ref:tabsRef,onSelect:value=>{"patterns"!==value&&setSelectedPatternCategory(null),setSelectedTab(value)},onClose,selectedTab,closeButtonLabel:(0,i18n_build_module.__)("Close Block Inserter"),tabs:[{name:"blocks",title:(0,i18n_build_module.__)("Blocks"),panel:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[inserterSearch,"blocks"===selectedTab&&!delayedFilterValue&&blocksTab]})},{name:"patterns",title:(0,i18n_build_module.__)("Patterns"),panel:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[inserterSearch,"patterns"===selectedTab&&!delayedFilterValue&&patternsTab]})},{name:"media",title:(0,i18n_build_module.__)("Media"),panel:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[inserterSearch,mediaTab]})}]})}),showInserterHelpPanel&&hoveredItem&&(0,jsx_runtime.jsx)(popover.Ay,{className:"block-editor-inserter__preview-container__popover",placement:"right-start",offset:16,focusOnMount:!1,animate:!1,children:(0,jsx_runtime.jsx)(preview_panel,{item:hoveredItem})})]})}));const inserter_menu=(0,react.forwardRef)((function PublicInserterMenu(props,ref){return(0,jsx_runtime.jsx)(PrivateInserterMenu,{...props,onPatternCategorySelection:NOOP,ref})}));function QuickInserter({onSelect,rootClientId,clientId,isAppender,prioritizePatterns,selectBlockOnInsert,hasSearch=!0}){const[filterValue,setFilterValue]=(0,react.useState)(""),[destinationRootClientId,onInsertBlocks]=use_insertion_point({onSelect,rootClientId,clientId,isAppender,selectBlockOnInsert}),[blockTypes]=use_block_types_state(destinationRootClientId,onInsertBlocks,!0),[patterns]=use_patterns_state(onInsertBlocks,destinationRootClientId,void 0,!0),{setInserterIsOpened,insertionIndex}=(0,use_select.A)((select=>{const{getSettings,getBlockIndex,getBlockCount}=select(store_store),settings=getSettings(),index=getBlockIndex(clientId),blockCount=getBlockCount();return{setInserterIsOpened:settings.__experimentalSetIsInserterOpened,insertionIndex:-1===index?blockCount:index}}),[clientId]),showPatterns=patterns.length&&(!!filterValue||prioritizePatterns),showSearch=hasSearch&&(showPatterns&&patterns.length>6||blockTypes.length>6);(0,react.useEffect)((()=>{setInserterIsOpened&&setInserterIsOpened(!1)}),[setInserterIsOpened]);let maxBlockPatterns=0;return showPatterns&&(maxBlockPatterns=prioritizePatterns?4:2),(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("block-editor-inserter__quick-inserter",{"has-search":showSearch,"has-expand":setInserterIsOpened}),children:[showSearch&&(0,jsx_runtime.jsx)(search_control.A,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",value:filterValue,onChange:value=>{setFilterValue(value)},label:(0,i18n_build_module.__)("Search"),placeholder:(0,i18n_build_module.__)("Search")}),(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-results",children:(0,jsx_runtime.jsx)(search_results,{filterValue,onSelect,rootClientId,clientId,isAppender,maxBlockPatterns,maxBlockTypes:6,isDraggable:!1,prioritizePatterns,selectBlockOnInsert,isQuick:!0})}),setInserterIsOpened&&(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"block-editor-inserter__quick-inserter-expand",onClick:()=>{setInserterIsOpened({filterValue,onSelect,rootClientId,insertionIndex})},"aria-label":(0,i18n_build_module.__)("Browse all. This will open the main inserter panel in the editor toolbar."),children:(0,i18n_build_module.__)("Browse all")})]})}const defaultRenderToggle=({onToggle,disabled,isOpen,blockTitle,hasSingleBlockType,toggleProps={},prioritizePatterns})=>{const{as:Wrapper=build_module_button.Ay,label:labelProp,onClick,...rest}=toggleProps;let label=labelProp;return!label&&hasSingleBlockType?label=(0,i18n_build_module.nv)((0,i18n_build_module._x)("Add %s","directly add the only allowed block"),blockTitle):!label&&prioritizePatterns?label=(0,i18n_build_module.__)("Add pattern"):label||(label=(0,i18n_build_module._x)("Add block","Generic label for block inserter button")),(0,jsx_runtime.jsx)(Wrapper,{icon:plus.A,label,tooltipPosition:"bottom",onClick:function handleClick(event){onToggle&&onToggle(event),onClick&&onClick(event)},className:"block-editor-inserter__toggle","aria-haspopup":!hasSingleBlockType&&"true","aria-expanded":!hasSingleBlockType&&isOpen,disabled,...rest})};class Inserter extends react.Component{constructor(){super(...arguments),this.onToggle=this.onToggle.bind(this),this.renderToggle=this.renderToggle.bind(this),this.renderContent=this.renderContent.bind(this)}onToggle(isOpen){const{onToggle}=this.props;onToggle&&onToggle(isOpen)}renderToggle({onToggle,isOpen}){const{disabled,blockTitle,hasSingleBlockType,directInsertBlock,toggleProps,hasItems,renderToggle=defaultRenderToggle,prioritizePatterns}=this.props;return renderToggle({onToggle,isOpen,disabled:disabled||!hasItems,blockTitle,hasSingleBlockType,directInsertBlock,toggleProps,prioritizePatterns})}renderContent({onClose}){const{rootClientId,clientId,isAppender,showInserterHelpPanel,__experimentalIsQuick:isQuick,prioritizePatterns,onSelectOrClose,selectBlockOnInsert}=this.props;return isQuick?(0,jsx_runtime.jsx)(QuickInserter,{onSelect:blocks=>{const firstBlock=Array.isArray(blocks)&&blocks?.length?blocks[0]:blocks;onSelectOrClose&&"function"==typeof onSelectOrClose&&onSelectOrClose(firstBlock),onClose()},rootClientId,clientId,isAppender,prioritizePatterns,selectBlockOnInsert}):(0,jsx_runtime.jsx)(inserter_menu,{onSelect:()=>{onClose()},rootClientId,clientId,isAppender,showInserterHelpPanel})}render(){const{position,hasSingleBlockType,directInsertBlock,insertOnlyAllowedBlock,__experimentalIsQuick:isQuick,onSelectOrClose}=this.props;return hasSingleBlockType||directInsertBlock?this.renderToggle({onToggle:insertOnlyAllowedBlock}):(0,jsx_runtime.jsx)(dropdown.A,{className:"block-editor-inserter",contentClassName:(0,clsx.A)("block-editor-inserter__popover",{"is-quick":isQuick}),popoverProps:{position,shift:!0},onToggle:this.onToggle,expandOnMobile:!0,headerTitle:(0,i18n_build_module.__)("Add a block"),renderToggle:this.renderToggle,renderContent:this.renderContent,onClose:onSelectOrClose})}}Inserter.displayName="Inserter";const inserter=(0,compose.A)([(0,with_select.A)(((select,{clientId,rootClientId,shouldDirectInsert=!0})=>{const{getBlockRootClientId,hasInserterItems,getAllowedBlocks,getDirectInsertBlock,getSettings}=select(store_store),{getBlockVariations}=select(build_module.M_),allowedBlocks=getAllowedBlocks(rootClientId=rootClientId||getBlockRootClientId(clientId)||void 0),directInsertBlock=shouldDirectInsert&&getDirectInsertBlock(rootClientId),settings=getSettings(),hasSingleBlockType=1===allowedBlocks?.length&&0===getBlockVariations(allowedBlocks[0].name,"inserter")?.length;let allowedBlockType=!1;return hasSingleBlockType&&(allowedBlockType=allowedBlocks[0]),{hasItems:hasInserterItems(rootClientId),hasSingleBlockType,blockTitle:allowedBlockType?allowedBlockType.title:"",allowedBlockType,directInsertBlock,rootClientId,prioritizePatterns:settings.__experimentalPreferPatternsOnRoot&&!rootClientId}})),(0,with_dispatch.A)(((dispatch,ownProps,{select})=>({insertOnlyAllowedBlock(){const{rootClientId,clientId,isAppender,hasSingleBlockType,allowedBlockType,directInsertBlock,onSelectOrClose,selectBlockOnInsert}=ownProps;if(!hasSingleBlockType&&!directInsertBlock)return;const{insertBlock}=dispatch(store_store);let blockToInsert;if(directInsertBlock){const newAttributes=function getAdjacentBlockAttributes(attributesToCopy){const{getBlock,getPreviousBlockClientId}=select(store_store);if(!attributesToCopy||!clientId&&!rootClientId)return{};const result={};let adjacentAttributes={};if(clientId){const currentBlock=getBlock(clientId),previousBlock=getBlock(getPreviousBlockClientId(clientId));currentBlock?.name===previousBlock?.name&&(adjacentAttributes=previousBlock?.attributes||{})}else{const parentBlock=getBlock(rootClientId);if(parentBlock?.innerBlocks?.length){const lastInnerBlock=parentBlock.innerBlocks[parentBlock.innerBlocks.length-1];directInsertBlock&&directInsertBlock?.name===lastInnerBlock.name&&(adjacentAttributes=lastInnerBlock.attributes)}}return attributesToCopy.forEach((attribute=>{adjacentAttributes.hasOwnProperty(attribute)&&(result[attribute]=adjacentAttributes[attribute])})),result}(directInsertBlock.attributesToCopy);blockToInsert=(0,build_module.Wv)(directInsertBlock.name,{...directInsertBlock.attributes||{},...newAttributes})}else blockToInsert=(0,build_module.Wv)(allowedBlockType.name);insertBlock(blockToInsert,function getInsertionIndex(){const{getBlockIndex,getBlockSelectionEnd,getBlockOrder,getBlockRootClientId}=select(store_store);if(clientId)return getBlockIndex(clientId);const end=getBlockSelectionEnd();return!isAppender&&end&&getBlockRootClientId(end)===rootClientId?getBlockIndex(end)+1:getBlockOrder(rootClientId).length}(),rootClientId,selectBlockOnInsert),onSelectOrClose&&onSelectOrClose({clientId:blockToInsert?.clientId});const message=(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s block added"),allowedBlockType.title);(0,a11y_build_module.L)(message)}}))),(0,if_condition.A)((({hasItems,isAppender,rootClientId,clientId})=>hasItems||!isAppender&&!rootClientId&&!clientId))])(Inserter);function button_block_appender_ButtonBlockAppender({rootClientId,className,onFocus,tabIndex,onSelect},ref){const inserterButtonRef=(0,react.useRef)(),mergedInserterButtonRef=(0,use_merge_refs.A)([inserterButtonRef,ref]);return(0,jsx_runtime.jsx)(inserter,{position:"bottom center",rootClientId,__experimentalIsQuick:!0,onSelectOrClose:(...args)=>{onSelect&&"function"==typeof onSelect&&onSelect(...args),inserterButtonRef.current?.focus()},renderToggle:({onToggle,disabled,isOpen,blockTitle,hasSingleBlockType})=>{const isToggleButton=!hasSingleBlockType,label=hasSingleBlockType?(0,i18n_build_module.nv)((0,i18n_build_module._x)("Add %s","directly add the only allowed block"),blockTitle):(0,i18n_build_module._x)("Add block","Generic label for block inserter button");return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,ref:mergedInserterButtonRef,onFocus,tabIndex,className:(0,clsx.A)(className,"block-editor-button-block-appender"),onClick:onToggle,"aria-haspopup":isToggleButton?"true":void 0,"aria-expanded":isToggleButton?isOpen:void 0,disabled,label,showTooltip:!0,children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:plus.A})})},isAppender:!0})}(0,react.forwardRef)(((props,ref)=>((0,deprecated_build_module.A)("wp.blockEditor.ButtonBlockerAppender",{alternative:"wp.blockEditor.ButtonBlockAppender",since:"5.9"}),button_block_appender_ButtonBlockAppender(props,ref))));const button_block_appender=(0,react.forwardRef)(button_block_appender_ButtonBlockAppender);function GridVisualizer({clientId,contentRef,parentLayout}){const isDistractionFree=(0,use_select.A)((select=>select(store_store).getSettings().isDistractionFree),[]),gridElement=useBlockElement(clientId);if(isDistractionFree||!gridElement)return null;const isManualGrid=parentLayout?.isManualPlacement&&window.__experimentalEnableGridInteractivity;return(0,jsx_runtime.jsx)(GridVisualizerGrid,{gridClientId:clientId,gridElement,isManualGrid,ref:contentRef})}const GridVisualizerGrid=(0,react.forwardRef)((({gridClientId,gridElement,isManualGrid},ref)=>{const[gridInfo,setGridInfo]=(0,react.useState)((()=>getGridInfo(gridElement))),[isDroppingAllowed,setIsDroppingAllowed]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{const observers=[];for(const element of[gridElement,...gridElement.children]){const observer=new window.ResizeObserver((()=>{setGridInfo(getGridInfo(gridElement))}));observer.observe(element),observers.push(observer)}return()=>{for(const observer of observers)observer.disconnect()}}),[gridElement]),(0,react.useEffect)((()=>{function onGlobalDrag(){setIsDroppingAllowed(!0)}function onGlobalDragEnd(){setIsDroppingAllowed(!1)}return document.addEventListener("drag",onGlobalDrag),document.addEventListener("dragend",onGlobalDragEnd),()=>{document.removeEventListener("drag",onGlobalDrag),document.removeEventListener("dragend",onGlobalDragEnd)}}),[]),(0,jsx_runtime.jsx)(cover,{className:(0,clsx.A)("block-editor-grid-visualizer",{"is-dropping-allowed":isDroppingAllowed}),clientId:gridClientId,__unstablePopoverSlot:"__unstable-block-tools-after",children:(0,jsx_runtime.jsx)("div",{ref,className:"block-editor-grid-visualizer__grid",style:gridInfo.style,children:isManualGrid?(0,jsx_runtime.jsx)(ManualGridVisualizer,{gridClientId,gridInfo}):Array.from({length:gridInfo.numItems},((_,i)=>(0,jsx_runtime.jsx)(GridVisualizerCell,{color:gridInfo.currentColor},i)))})})}));function ManualGridVisualizer({gridClientId,gridInfo}){const[highlightedRect,setHighlightedRect]=(0,react.useState)(null),gridItemStyles=(0,use_select.A)((select=>{const{getBlockOrder,getBlockStyles}=unlock(select(store_store));return getBlockStyles(getBlockOrder(gridClientId))}),[gridClientId]),occupiedRects=(0,react.useMemo)((()=>{const rects=[];for(const style of Object.values(gridItemStyles)){var _style$layout;const{columnStart,rowStart,columnSpan=1,rowSpan=1}=null!==(_style$layout=style?.layout)&&void 0!==_style$layout?_style$layout:{};columnStart&&rowStart&&rects.push(new GridRect({columnStart,rowStart,columnSpan,rowSpan}))}return rects}),[gridItemStyles]);return range(1,gridInfo.numRows).map((row=>range(1,gridInfo.numColumns).map((column=>{var _highlightedRect$cont;const isCellOccupied=occupiedRects.some((rect=>rect.contains(column,row))),isHighlighted=null!==(_highlightedRect$cont=highlightedRect?.contains(column,row))&&void 0!==_highlightedRect$cont&&_highlightedRect$cont;return(0,jsx_runtime.jsx)(GridVisualizerCell,{color:gridInfo.currentColor,className:isHighlighted&&"is-highlighted",children:isCellOccupied?(0,jsx_runtime.jsx)(GridVisualizerDropZone,{column,row,gridClientId,gridInfo,setHighlightedRect}):(0,jsx_runtime.jsx)(GridVisualizerAppender,{column,row,gridClientId,gridInfo,setHighlightedRect})},`${row}-${column}`)}))))}function GridVisualizerCell({color,children,className}){return(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("block-editor-grid-visualizer__cell",className),style:{boxShadow:`inset 0 0 0 1px color-mix(in srgb, ${color} 20%, #0000)`,color},children})}function useGridVisualizerDropZone(column,row,gridClientId,gridInfo,setHighlightedRect){const{getBlockAttributes,getBlockRootClientId,canInsertBlockType,getBlockName}=(0,use_select.A)(store_store),{updateBlockAttributes,moveBlocksToPosition,__unstableMarkNextChangeAsNotPersistent}=(0,use_dispatch.A)(store_store),getNumberOfBlocksBeforeCell=useGetNumberOfBlocksBeforeCell(gridClientId,gridInfo.numColumns);return function useDropZoneWithValidation({validateDrag,onDragEnter,onDragLeave,onDrop}){const{getDraggedBlockClientIds}=(0,use_select.A)(store_store);return(0,use_drop_zone.A)({onDragEnter(){const[srcClientId]=getDraggedBlockClientIds();srcClientId&&validateDrag(srcClientId)&&onDragEnter(srcClientId)},onDragLeave(){onDragLeave()},onDrop(){const[srcClientId]=getDraggedBlockClientIds();srcClientId&&validateDrag(srcClientId)&&onDrop(srcClientId)}})}({validateDrag(srcClientId){const blockName=getBlockName(srcClientId);if(!canInsertBlockType(blockName,gridClientId))return!1;const attributes=getBlockAttributes(srcClientId),rect=new GridRect({columnStart:column,rowStart:row,columnSpan:attributes.style?.layout?.columnSpan,rowSpan:attributes.style?.layout?.rowSpan});return new GridRect({columnSpan:gridInfo.numColumns,rowSpan:gridInfo.numRows}).containsRect(rect)},onDragEnter(srcClientId){const attributes=getBlockAttributes(srcClientId);setHighlightedRect(new GridRect({columnStart:column,rowStart:row,columnSpan:attributes.style?.layout?.columnSpan,rowSpan:attributes.style?.layout?.rowSpan}))},onDragLeave(){setHighlightedRect((prevHighlightedRect=>prevHighlightedRect?.columnStart===column&&prevHighlightedRect?.rowStart===row?null:prevHighlightedRect))},onDrop(srcClientId){setHighlightedRect(null);const attributes=getBlockAttributes(srcClientId);updateBlockAttributes(srcClientId,{style:{...attributes.style,layout:{...attributes.style?.layout,columnStart:column,rowStart:row}}}),__unstableMarkNextChangeAsNotPersistent(),moveBlocksToPosition([srcClientId],getBlockRootClientId(srcClientId),gridClientId,getNumberOfBlocksBeforeCell(column,row))}})}function GridVisualizerDropZone({column,row,gridClientId,gridInfo,setHighlightedRect}){return(0,jsx_runtime.jsx)("div",{className:"block-editor-grid-visualizer__drop-zone",ref:useGridVisualizerDropZone(column,row,gridClientId,gridInfo,setHighlightedRect)})}function GridVisualizerAppender({column,row,gridClientId,gridInfo,setHighlightedRect}){const{updateBlockAttributes,moveBlocksToPosition,__unstableMarkNextChangeAsNotPersistent}=(0,use_dispatch.A)(store_store),getNumberOfBlocksBeforeCell=useGetNumberOfBlocksBeforeCell(gridClientId,gridInfo.numColumns);return(0,jsx_runtime.jsx)(button_block_appender,{rootClientId:gridClientId,className:"block-editor-grid-visualizer__appender",ref:useGridVisualizerDropZone(column,row,gridClientId,gridInfo,setHighlightedRect),style:{color:gridInfo.currentColor},onSelect:block=>{block&&(updateBlockAttributes(block.clientId,{style:{layout:{columnStart:column,rowStart:row}}}),__unstableMarkNextChangeAsNotPersistent(),moveBlocksToPosition([block.clientId],gridClientId,gridClientId,getNumberOfBlocksBeforeCell(column,row)))}})}var resizable_box=__webpack_require__("./packages/components/build-module/resizable-box/index.js");function GridItemResizer({clientId,bounds,onChange,parentLayout}){const blockElement=useBlockElement(clientId),rootBlockElement=blockElement?.parentElement,{isManualPlacement}=parentLayout;return blockElement&&rootBlockElement?(0,jsx_runtime.jsx)(GridItemResizerInner,{clientId,bounds,blockElement,rootBlockElement,onChange,isManualGrid:isManualPlacement&&window.__experimentalEnableGridInteractivity}):null}function GridItemResizerInner({clientId,bounds,blockElement,rootBlockElement,onChange,isManualGrid}){const[resizeDirection,setResizeDirection]=(0,react.useState)(null),[enableSide,setEnableSide]=(0,react.useState)({top:!1,bottom:!1,left:!1,right:!1});(0,react.useEffect)((()=>{const observer=new window.ResizeObserver((()=>{const blockClientRect=blockElement.getBoundingClientRect(),rootBlockClientRect=rootBlockElement.getBoundingClientRect();setEnableSide({top:blockClientRect.top>rootBlockClientRect.top,bottom:blockClientRect.bottom<rootBlockClientRect.bottom,left:blockClientRect.left>rootBlockClientRect.left,right:blockClientRect.right<rootBlockClientRect.right})}));return observer.observe(blockElement),()=>observer.disconnect()}),[blockElement,rootBlockElement]);const justification={right:"left",left:"right"},alignment={top:"flex-end",bottom:"flex-start"},styles={display:"flex",justifyContent:"center",alignItems:"center",...justification[resizeDirection]&&{justifyContent:justification[resizeDirection]},...alignment[resizeDirection]&&{alignItems:alignment[resizeDirection]}};return(0,jsx_runtime.jsx)(cover,{className:"block-editor-grid-item-resizer",clientId,__unstablePopoverSlot:"__unstable-block-tools-after",additionalStyles:styles,children:(0,jsx_runtime.jsx)(resizable_box.A,{className:"block-editor-grid-item-resizer__box",size:{width:"100%",height:"100%"},enable:{bottom:enableSide.bottom,bottomLeft:!1,bottomRight:!1,left:enableSide.left,right:enableSide.right,top:enableSide.top,topLeft:!1,topRight:!1},bounds,boundsByDirection:!0,onPointerDown:({target,pointerId})=>{target.setPointerCapture(pointerId)},onResizeStart:(event,direction)=>{setResizeDirection(direction)},onResizeStop:(event,direction,boxElement)=>{const columnGap=parseFloat(utils_getComputedCSS(rootBlockElement,"column-gap")),rowGap=parseFloat(utils_getComputedCSS(rootBlockElement,"row-gap")),gridColumnTracks=getGridTracks(utils_getComputedCSS(rootBlockElement,"grid-template-columns"),columnGap),gridRowTracks=getGridTracks(utils_getComputedCSS(rootBlockElement,"grid-template-rows"),rowGap),rect=new window.DOMRect(blockElement.offsetLeft+boxElement.offsetLeft,blockElement.offsetTop+boxElement.offsetTop,boxElement.offsetWidth,boxElement.offsetHeight),columnStart=getClosestTrack(gridColumnTracks,rect.left)+1,rowStart=getClosestTrack(gridRowTracks,rect.top)+1,columnEnd=getClosestTrack(gridColumnTracks,rect.right,"end")+1,rowEnd=getClosestTrack(gridRowTracks,rect.bottom,"end")+1;onChange({columnSpan:columnEnd-columnStart+1,rowSpan:rowEnd-rowStart+1,columnStart:isManualGrid?columnStart:void 0,rowStart:isManualGrid?rowStart:void 0})}})})}var chevron_up=__webpack_require__("./packages/icons/build-module/library/chevron-up.js"),library_chevron_down=__webpack_require__("./packages/icons/build-module/library/chevron-down.js");function GridItemMovers({layout,parentLayout,onChange,gridClientId,blockClientId}){var _layout$columnStart,_layout$rowStart,_layout$columnSpan,_layout$rowSpan;const{moveBlocksToPosition,__unstableMarkNextChangeAsNotPersistent}=(0,use_dispatch.A)(store_store),columnStart=null!==(_layout$columnStart=layout?.columnStart)&&void 0!==_layout$columnStart?_layout$columnStart:1,rowStart=null!==(_layout$rowStart=layout?.rowStart)&&void 0!==_layout$rowStart?_layout$rowStart:1,columnSpan=null!==(_layout$columnSpan=layout?.columnSpan)&&void 0!==_layout$columnSpan?_layout$columnSpan:1,rowSpan=null!==(_layout$rowSpan=layout?.rowSpan)&&void 0!==_layout$rowSpan?_layout$rowSpan:1,columnEnd=columnStart+columnSpan-1,rowEnd=rowStart+rowSpan-1,columnCount=parentLayout?.columnCount,rowCount=parentLayout?.rowCount,getNumberOfBlocksBeforeCell=useGetNumberOfBlocksBeforeCell(gridClientId,columnCount);return(0,jsx_runtime.jsx)(block_controls,{group:"parent",children:(0,jsx_runtime.jsxs)(toolbar_group.A,{className:"block-editor-grid-item-mover__move-button-container",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-grid-item-mover__move-horizontal-button-container is-left",children:(0,jsx_runtime.jsx)(GridItemMover,{icon:(0,i18n_build_module.V8)()?chevron_right.A:chevron_left.A,label:(0,i18n_build_module.__)("Move left"),description:(0,i18n_build_module.__)("Move left"),isDisabled:columnStart<=1,onClick:()=>{onChange({columnStart:columnStart-1}),__unstableMarkNextChangeAsNotPersistent(),moveBlocksToPosition([blockClientId],gridClientId,gridClientId,getNumberOfBlocksBeforeCell(columnStart-1,rowStart))}})}),(0,jsx_runtime.jsxs)("div",{className:"block-editor-grid-item-mover__move-vertical-button-container",children:[(0,jsx_runtime.jsx)(GridItemMover,{className:"is-up-button",icon:chevron_up.A,label:(0,i18n_build_module.__)("Move up"),description:(0,i18n_build_module.__)("Move up"),isDisabled:rowStart<=1,onClick:()=>{onChange({rowStart:rowStart-1}),__unstableMarkNextChangeAsNotPersistent(),moveBlocksToPosition([blockClientId],gridClientId,gridClientId,getNumberOfBlocksBeforeCell(columnStart,rowStart-1))}}),(0,jsx_runtime.jsx)(GridItemMover,{className:"is-down-button",icon:library_chevron_down.A,label:(0,i18n_build_module.__)("Move down"),description:(0,i18n_build_module.__)("Move down"),isDisabled:rowCount&&rowEnd>=rowCount,onClick:()=>{onChange({rowStart:rowStart+1}),__unstableMarkNextChangeAsNotPersistent(),moveBlocksToPosition([blockClientId],gridClientId,gridClientId,getNumberOfBlocksBeforeCell(columnStart,rowStart+1))}})]}),(0,jsx_runtime.jsx)("div",{className:"block-editor-grid-item-mover__move-horizontal-button-container is-right",children:(0,jsx_runtime.jsx)(GridItemMover,{icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A,label:(0,i18n_build_module.__)("Move right"),description:(0,i18n_build_module.__)("Move right"),isDisabled:columnCount&&columnEnd>=columnCount,onClick:()=>{onChange({columnStart:columnStart+1}),__unstableMarkNextChangeAsNotPersistent(),moveBlocksToPosition([blockClientId],gridClientId,gridClientId,getNumberOfBlocksBeforeCell(columnStart+1,rowStart))}})})]})})}function GridItemMover({className,icon,label,isDisabled,onClick,description}){const descriptionId=`block-editor-grid-item-mover-button__description-${(0,use_instance_id.A)(GridItemMover)}`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(toolbar_button.A,{className:(0,clsx.A)("block-editor-grid-item-mover-button",className),icon,label,"aria-describedby":descriptionId,onClick:isDisabled?null:onClick,disabled:isDisabled,accessibleWhenDisabled:!0}),(0,jsx_runtime.jsx)(visually_hidden_component.A,{id:descriptionId,children:description})]})}const LAYOUT_CHILD_BLOCK_PROPS_REFERENCE={};function GridTools({clientId,style,setAttributes,allowSizingOnChildren,isManualPlacement,parentLayout}){const{rootClientId,isVisible}=(0,use_select.A)((select=>{const{getBlockRootClientId,getBlockEditingMode,getTemplateLock}=select(store_store),_rootClientId=getBlockRootClientId(clientId);return getTemplateLock(_rootClientId)||"default"!==getBlockEditingMode(_rootClientId)?{rootClientId:_rootClientId,isVisible:!1}:{rootClientId:_rootClientId,isVisible:!0}}),[clientId]),[resizerBounds,setResizerBounds]=(0,react.useState)();if(!isVisible)return null;function updateLayout(layout){setAttributes({style:{...style,layout:{...style?.layout,...layout}}})}return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(GridVisualizer,{clientId:rootClientId,contentRef:setResizerBounds,parentLayout}),allowSizingOnChildren&&(0,jsx_runtime.jsx)(GridItemResizer,{clientId,bounds:resizerBounds,onChange:updateLayout,parentLayout}),isManualPlacement&&window.__experimentalEnableGridInteractivity&&(0,jsx_runtime.jsx)(GridItemMovers,{layout:style?.layout,parentLayout,onChange:updateLayout,gridClientId:rootClientId,blockClientId:clientId})]})}const layout_child={useBlockProps:function useBlockPropsChildLayoutStyles({style}){var _style$layout;const shouldRenderChildLayoutStyles=(0,use_select.A)((select=>!select(store_store).getSettings().disableLayoutStyles)),layout=null!==(_style$layout=style?.layout)&&void 0!==_style$layout?_style$layout:{},{selfStretch,flexSize,columnStart,rowStart,columnSpan,rowSpan}=layout,parentLayout=useLayout()||{},{columnCount,minimumColumnWidth}=parentLayout,id=(0,use_instance_id.A)(LAYOUT_CHILD_BLOCK_PROPS_REFERENCE),selector=`.wp-container-content-${id}`;let css="";if(shouldRenderChildLayoutStyles&&("fixed"===selfStretch&&flexSize?css=`${selector} {\n\t\t\t\tflex-basis: ${flexSize};\n\t\t\t\tbox-sizing: border-box;\n\t\t\t}`:"fill"===selfStretch?css=`${selector} {\n\t\t\t\tflex-grow: 1;\n\t\t\t}`:columnStart&&columnSpan?css=`${selector} {\n\t\t\t\tgrid-column: ${columnStart} / span ${columnSpan};\n\t\t\t}`:columnStart?css=`${selector} {\n\t\t\t\tgrid-column: ${columnStart};\n\t\t\t}`:columnSpan&&(css=`${selector} {\n\t\t\t\tgrid-column: span ${columnSpan};\n\t\t\t}`),rowStart&&rowSpan?css+=`${selector} {\n\t\t\t\tgrid-row: ${rowStart} / span ${rowSpan};\n\t\t\t}`:rowStart?css+=`${selector} {\n\t\t\t\tgrid-row: ${rowStart};\n\t\t\t}`:rowSpan&&(css+=`${selector} {\n\t\t\t\tgrid-row: span ${rowSpan};\n\t\t\t}`),(columnSpan||columnStart)&&(minimumColumnWidth||!columnCount))){let parentColumnValue=parseFloat(minimumColumnWidth);isNaN(parentColumnValue)&&(parentColumnValue=12);let parentColumnUnit=minimumColumnWidth?.replace(parentColumnValue,"");["px","rem","em"].includes(parentColumnUnit)||(parentColumnUnit="rem");let numColsToBreakAt=2;numColsToBreakAt=columnSpan&&columnStart?columnSpan+columnStart-1:columnSpan||columnStart;const defaultGapValue="px"===parentColumnUnit?24:1.5,containerQueryValue=numColsToBreakAt*parentColumnValue+(numColsToBreakAt-1)*defaultGapValue,minimumContainerQueryValue=2*parentColumnValue+defaultGapValue-1,gridColumnValue=columnSpan&&columnSpan>1?"1/-1":"auto";css+=`@container (max-width: ${Math.max(containerQueryValue,minimumContainerQueryValue)}${parentColumnUnit}) {\n\t\t\t\t${selector} {\n\t\t\t\t\tgrid-column: ${gridColumnValue};\n\t\t\t\t\tgrid-row: auto;\n\t\t\t\t}\n\t\t\t}`}if(useStyleOverride({css}),css)return{className:`wp-container-content-${id}`}},edit:function ChildLayoutControlsPure({clientId,style,setAttributes}){const parentLayout=useLayout()||{},{type:parentLayoutType="default",allowSizingOnChildren=!1,isManualPlacement}=parentLayout;return"grid"!==parentLayoutType?null:(0,jsx_runtime.jsx)(GridTools,{clientId,style,setAttributes,allowSizingOnChildren,isManualPlacement,parentLayout})},attributeKeys:["style"],hasSupport:()=>!0};const content_lock_ui={edit:function ContentLockControlsPure({clientId}){const{templateLock,isLockedByParent,isEditingAsBlocks}=(0,use_select.A)((select=>{const{getContentLockingParent,getTemplateLock,getTemporarilyEditingAsBlocks}=unlock(select(store_store));return{templateLock:getTemplateLock(clientId),isLockedByParent:!!getContentLockingParent(clientId),isEditingAsBlocks:getTemporarilyEditingAsBlocks()===clientId}}),[clientId]),{stopEditingAsBlocks}=unlock((0,use_dispatch.A)(store_store)),isContentLocked=!isLockedByParent&&"contentOnly"===templateLock,stopEditingAsBlockCallback=(0,react.useCallback)((()=>{stopEditingAsBlocks(clientId)}),[clientId,stopEditingAsBlocks]);return isContentLocked||isEditingAsBlocks?isEditingAsBlocks&&!isContentLocked&&(0,jsx_runtime.jsx)(block_controls,{group:"other",children:(0,jsx_runtime.jsx)(toolbar_button.A,{onClick:stopEditingAsBlockCallback,children:(0,i18n_build_module.__)("Done")})}):null},hasSupport:()=>!0},META_ATTRIBUTE_NAME="metadata";(0,hooks_build_module.U2)("blocks.registerBlockType","core/metadata/addMetaAttribute",(function addMetaAttribute(blockTypeSettings){return blockTypeSettings?.attributes?.metadata?.type||(blockTypeSettings.attributes={...blockTypeSettings.attributes,[META_ATTRIBUTE_NAME]:{type:"object"}}),blockTypeSettings}));const block_hooks_EMPTY_OBJECT={};const block_hooks={edit:function BlockHooksControlPure({name,clientId,metadata:{ignoredHookedBlocks=[]}={}}){const blockTypes=(0,use_select.A)((select=>select(build_module.M_).getBlockTypes()),[]),hookedBlocksForCurrentBlock=(0,react.useMemo)((()=>blockTypes?.filter((({name:blockName,blockHooks})=>blockHooks&&name in blockHooks||ignoredHookedBlocks.includes(blockName)))),[blockTypes,name,ignoredHookedBlocks]),hookedBlockClientIds=(0,use_select.A)((select=>{const{getBlocks,getBlockRootClientId,getGlobalBlockCount}=select(store_store),rootClientId=getBlockRootClientId(clientId),_hookedBlockClientIds=hookedBlocksForCurrentBlock.reduce(((clientIds,block)=>{if(0===getGlobalBlockCount(block.name))return clientIds;const relativePosition=block?.blockHooks?.[name];let candidates;switch(relativePosition){case"before":case"after":candidates=getBlocks(rootClientId);break;case"first_child":case"last_child":candidates=getBlocks(clientId);break;case void 0:candidates=[...getBlocks(rootClientId),...getBlocks(clientId)]}const hookedBlock=candidates?.find((candidate=>candidate.name===block.name));return hookedBlock?{...clientIds,[block.name]:hookedBlock.clientId}:clientIds}),{});return Object.values(_hookedBlockClientIds).length>0?_hookedBlockClientIds:block_hooks_EMPTY_OBJECT}),[hookedBlocksForCurrentBlock,name,clientId]),{getBlockIndex,getBlockCount,getBlockRootClientId}=(0,use_select.A)(store_store),{insertBlock,removeBlock}=(0,use_dispatch.A)(store_store);if(!hookedBlocksForCurrentBlock.length)return null;const groupedHookedBlocks=hookedBlocksForCurrentBlock.reduce(((groups,block)=>{const[namespace]=block.name.split("/");return groups[namespace]||(groups[namespace]=[]),groups[namespace].push(block),groups}),{});return(0,jsx_runtime.jsx)(inspector_controls,{children:(0,jsx_runtime.jsxs)(body.Ay,{className:"block-editor-hooks__block-hooks",title:(0,i18n_build_module.__)("Plugins"),initialOpen:!0,children:[(0,jsx_runtime.jsx)("p",{className:"block-editor-hooks__block-hooks-helptext",children:(0,i18n_build_module.__)("Manage the inclusion of blocks added automatically by plugins.")}),Object.keys(groupedHookedBlocks).map((vendor=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("h3",{children:vendor}),groupedHookedBlocks[vendor].map((block=>{const checked=block.name in hookedBlockClientIds;return(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,checked,label:block.title,onChange:()=>{if(checked)removeBlock(hookedBlockClientIds[block.name],!1);else{const relativePosition=block.blockHooks[name];((block,relativePosition)=>{const blockIndex=getBlockIndex(clientId),innerBlocksLength=getBlockCount(clientId),rootClientId=getBlockRootClientId(clientId);switch(relativePosition){case"before":case"after":insertBlock(block,"after"===relativePosition?blockIndex+1:blockIndex,rootClientId,!1);break;case"first_child":case"last_child":insertBlock(block,"first_child"===relativePosition?0:innerBlocksLength,clientId,!1);break;case void 0:insertBlock(block,blockIndex+1,rootClientId,!1)}})((0,build_module.Wv)(block.name),relativePosition)}}},block.title)}))]},vendor)))]})})},attributeKeys:["metadata"],hasSupport:()=>!0};function isObjectEmpty(object){return!object||0===Object.keys(object).length}function useBlockBindingsUtils(clientId){const{clientId:contextClientId}=useBlockEditContext(),blockClientId=clientId||contextClientId,{updateBlockAttributes}=(0,use_dispatch.A)(store_store),{getBlockAttributes}=(0,use_registry.A)().select(store_store);return{updateBlockBindings:bindings=>{const{metadata:{bindings:currentBindings,...metadata}={}}=getBlockAttributes(blockClientId),newBindings={...currentBindings};Object.entries(bindings).forEach((([attribute,binding])=>{binding||!newBindings[attribute]?newBindings[attribute]=binding:delete newBindings[attribute]}));const newMetadata={...metadata,bindings:newBindings};isObjectEmpty(newMetadata.bindings)&&delete newMetadata.bindings,updateBlockAttributes(blockClientId,{metadata:isObjectEmpty(newMetadata)?void 0:newMetadata})},removeAllBlockBindings:()=>{const{metadata:{bindings,...metadata}={}}=getBlockAttributes(blockClientId);updateBlockAttributes(blockClientId,{metadata:isObjectEmpty(metadata)?void 0:metadata})}}}const{DropdownMenuV2}=unlock(private_apis.j),block_bindings_EMPTY_OBJECT={};function BlockBindingsPanelDropdown({fieldsList,attribute,binding}){const{clientId}=useBlockEditContext(),registeredSources=(0,build_module.WW)(),{updateBlockBindings}=useBlockBindingsUtils(),currentKey=binding?.args?.key,attributeType=(0,use_select.A)((select=>{const{name:blockName}=select(store_store).getBlock(clientId),_attributeType=(0,build_module.E7)(blockName).attributes?.[attribute]?.type;return"rich-text"===_attributeType?"string":_attributeType}),[clientId,attribute]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object.entries(fieldsList).map((([name,fields],i)=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsxs)(DropdownMenuV2.Group,{children:[Object.keys(fieldsList).length>1&&(0,jsx_runtime.jsx)(DropdownMenuV2.GroupLabel,{children:registeredSources[name].label}),Object.entries(fields).filter((([,args])=>args?.type===attributeType)).map((([key,args])=>(0,jsx_runtime.jsxs)(DropdownMenuV2.RadioItem,{onChange:()=>updateBlockBindings({[attribute]:{source:name,args:{key}}}),name:attribute+"-binding",value:key,checked:key===currentKey,children:[(0,jsx_runtime.jsx)(DropdownMenuV2.ItemLabel,{children:args?.label}),(0,jsx_runtime.jsx)(DropdownMenuV2.ItemHelpText,{children:args?.value})]},key)))]}),i!==Object.keys(fieldsList).length-1&&(0,jsx_runtime.jsx)(DropdownMenuV2.Separator,{})]},name)))})}function BlockBindingsAttribute({attribute,binding,fieldsList}){const{source:sourceName,args}=binding||{},sourceProps=(0,build_module.Xm)(sourceName),isSourceInvalid=!sourceProps;return(0,jsx_runtime.jsxs)(v_stack_component.A,{className:"block-editor-bindings__item",spacing:0,children:[(0,jsx_runtime.jsx)(text_component.A,{truncate:!0,children:attribute}),!!binding&&(0,jsx_runtime.jsx)(text_component.A,{truncate:!0,variant:!isSourceInvalid&&"muted",isDestructive:isSourceInvalid,children:isSourceInvalid?(0,i18n_build_module.__)("Invalid source"):fieldsList?.[sourceName]?.[args?.key]?.label||sourceProps?.label||sourceName})]})}function ReadOnlyBlockBindingsPanelItems({bindings,fieldsList}){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object.entries(bindings).map((([attribute,binding])=>(0,jsx_runtime.jsx)(item_component.A,{children:(0,jsx_runtime.jsx)(BlockBindingsAttribute,{attribute,binding,fieldsList})},attribute)))})}function EditableBlockBindingsPanelItems({attributes,bindings,fieldsList}){const{updateBlockBindings}=useBlockBindingsUtils(),isMobile=(0,use_viewport_match.A)("medium","<");return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:attributes.map((attribute=>{const binding=bindings[attribute];return(0,jsx_runtime.jsx)(tools_panel_item_component.A,{hasValue:()=>!!binding,label:attribute,onDeselect:()=>{updateBlockBindings({[attribute]:void 0})},children:(0,jsx_runtime.jsx)(DropdownMenuV2,{placement:isMobile?"bottom-start":"left-start",gutter:isMobile?8:36,trigger:(0,jsx_runtime.jsx)(item_component.A,{children:(0,jsx_runtime.jsx)(BlockBindingsAttribute,{attribute,binding,fieldsList})}),children:(0,jsx_runtime.jsx)(BlockBindingsPanelDropdown,{fieldsList,attribute,binding})})},attribute)}))})}const block_bindings={edit:({name:blockName,metadata})=>{const blockContext=(0,react.useContext)(block_context),{removeAllBlockBindings}=useBlockBindingsUtils(),bindableAttributes=function getBindableAttributes(blockName){return BLOCK_BINDINGS_ALLOWED_BLOCKS[blockName]}(blockName),dropdownMenuProps=(0,use_viewport_match.A)("medium","<")?{}:{popoverProps:{placement:"left-start",offset:259}},_fieldsList={},{fieldsList,canUpdateBlockBindings}=(0,use_select.A)((select=>{if(!bindableAttributes||0===bindableAttributes.length)return block_bindings_EMPTY_OBJECT;const registeredSources=(0,build_module.WW)();return Object.entries(registeredSources).forEach((([sourceName,{getFieldsList,usesContext}])=>{if(getFieldsList){const context={};if(usesContext?.length)for(const key of usesContext)context[key]=blockContext[key];const sourceList=getFieldsList({select,context});Object.keys(sourceList||{}).length&&(_fieldsList[sourceName]={...sourceList})}})),{fieldsList:Object.values(_fieldsList).length>0?_fieldsList:block_bindings_EMPTY_OBJECT,canUpdateBlockBindings:select(store_store).getSettings().canUpdateBlockBindings}}),[blockContext,bindableAttributes]);if(!bindableAttributes||0===bindableAttributes.length)return null;const{bindings}=metadata||{},filteredBindings={...bindings};Object.keys(filteredBindings).forEach((key=>{canBindAttribute(blockName,key)&&"core/pattern-overrides"!==filteredBindings[key].source||delete filteredBindings[key]}));const readOnly=!canUpdateBlockBindings||!Object.keys(fieldsList).length;return readOnly&&0===Object.keys(filteredBindings).length?null:(0,jsx_runtime.jsx)(inspector_controls,{group:"bindings",children:(0,jsx_runtime.jsxs)(tools_panel_component.A,{label:(0,i18n_build_module.__)("Attributes"),resetAll:()=>{removeAllBlockBindings()},dropdownMenuProps,className:"block-editor-bindings__panel",children:[(0,jsx_runtime.jsx)(item_group_component.A,{isBordered:!0,isSeparated:!0,children:readOnly?(0,jsx_runtime.jsx)(ReadOnlyBlockBindingsPanelItems,{bindings:filteredBindings,fieldsList}):(0,jsx_runtime.jsx)(EditableBlockBindingsPanelItems,{attributes:bindableAttributes,bindings:filteredBindings,fieldsList})}),(0,jsx_runtime.jsx)(item_group_component.A,{children:(0,jsx_runtime.jsx)(text_component.A,{variant:"muted",children:(0,i18n_build_module.__)("Attributes connected to custom fields or other dynamic data.")})})]})})},attributeKeys:["metadata"],hasSupport:()=>!0};function placeBlock(occupiedRects,gridColumnCount,blockColumnSpan,blockRowSpan,startColumn=1,startRow=1){for(let row=startRow;;row++)for(let column=row===startRow?startColumn:1;column<=gridColumnCount;column++){const candidateRect=new GridRect({columnStart:column,rowStart:row,columnSpan:blockColumnSpan,rowSpan:blockRowSpan});if(!occupiedRects.some((r=>r.intersectsRect(candidateRect))))return[column,row]}}function GridLayoutSync(props){!function useGridLayoutSync({clientId:gridClientId}){const{gridLayout,blockOrder,selectedBlockLayout}=(0,use_select.A)((select=>{var _getBlockAttributes$l;const{getBlockAttributes,getBlockOrder}=select(store_store),selectedBlock=select(store_store).getSelectedBlock();return{gridLayout:null!==(_getBlockAttributes$l=getBlockAttributes(gridClientId).layout)&&void 0!==_getBlockAttributes$l?_getBlockAttributes$l:{},blockOrder:getBlockOrder(gridClientId),selectedBlockLayout:selectedBlock?.attributes.style?.layout}}),[gridClientId]),{getBlockAttributes,getBlockRootClientId}=(0,use_select.A)(store_store),{updateBlockAttributes,__unstableMarkNextChangeAsNotPersistent}=(0,use_dispatch.A)(store_store),selectedBlockRect=(0,react.useMemo)((()=>selectedBlockLayout?new GridRect(selectedBlockLayout):null),[selectedBlockLayout]),previouslySelectedBlockRect=(0,use_previous.A)(selectedBlockRect),previousIsManualPlacement=(0,use_previous.A)(gridLayout.isManualPlacement),previousBlockOrder=(0,use_previous.A)(blockOrder);(0,react.useEffect)((()=>{const updates={};if(gridLayout.isManualPlacement){const occupiedRects=[];for(const clientId of blockOrder){var _getBlockAttributes$s;const{columnStart,rowStart,columnSpan=1,rowSpan=1}=null!==(_getBlockAttributes$s=getBlockAttributes(clientId).style?.layout)&&void 0!==_getBlockAttributes$s?_getBlockAttributes$s:{};columnStart&&rowStart&&occupiedRects.push(new GridRect({columnStart,rowStart,columnSpan,rowSpan}))}for(const clientId of blockOrder){var _attributes$style$lay;const attributes=getBlockAttributes(clientId),{columnStart,rowStart,columnSpan=1,rowSpan=1}=null!==(_attributes$style$lay=attributes.style?.layout)&&void 0!==_attributes$style$lay?_attributes$style$lay:{};if(columnStart&&rowStart)continue;const[newColumnStart,newRowStart]=placeBlock(occupiedRects,gridLayout.columnCount,columnSpan,rowSpan,previouslySelectedBlockRect?.columnEnd,previouslySelectedBlockRect?.rowEnd);occupiedRects.push(new GridRect({columnStart:newColumnStart,rowStart:newRowStart,columnSpan,rowSpan})),updates[clientId]={style:{...attributes.style,layout:{...attributes.style?.layout,columnStart:newColumnStart,rowStart:newRowStart}}}}const bottomMostRow=Math.max(...occupiedRects.map((r=>r.rowEnd)));(!gridLayout.rowCount||gridLayout.rowCount<bottomMostRow)&&(updates[gridClientId]={layout:{...gridLayout,rowCount:bottomMostRow}});for(const clientId of null!=previousBlockOrder?previousBlockOrder:[])if(!blockOrder.includes(clientId)){var _attributes$style$lay2;const rootClientId=getBlockRootClientId(clientId);if(null===rootClientId)continue;const rootAttributes=getBlockAttributes(rootClientId);if("grid"===rootAttributes?.layout?.type)continue;const attributes=getBlockAttributes(clientId),{columnStart,rowStart,columnSpan,rowSpan,...layout}=null!==(_attributes$style$lay2=attributes.style?.layout)&&void 0!==_attributes$style$lay2?_attributes$style$lay2:{};if(columnStart||rowStart||columnSpan||rowSpan){const hasEmptyLayoutAttribute=0===Object.keys(layout).length;updates[clientId]=setImmutably(attributes,["style","layout"],hasEmptyLayoutAttribute?void 0:layout)}}}else{if(!0===previousIsManualPlacement)for(const clientId of blockOrder){var _attributes$style$lay3;const attributes=getBlockAttributes(clientId),{columnStart,rowStart,...layout}=null!==(_attributes$style$lay3=attributes.style?.layout)&&void 0!==_attributes$style$lay3?_attributes$style$lay3:{};if(columnStart||rowStart){const hasEmptyLayoutAttribute=0===Object.keys(layout).length;updates[clientId]=setImmutably(attributes,["style","layout"],hasEmptyLayoutAttribute?void 0:layout)}}gridLayout.rowCount&&(updates[gridClientId]={layout:{...gridLayout,rowCount:void 0}})}Object.keys(updates).length&&(__unstableMarkNextChangeAsNotPersistent(),updateBlockAttributes(Object.keys(updates),updates,!0))}),[gridClientId,gridLayout,previousBlockOrder,blockOrder,previouslySelectedBlockRect,previousIsManualPlacement,__unstableMarkNextChangeAsNotPersistent,getBlockAttributes,getBlockRootClientId,updateBlockAttributes])}(props)}function grid_visualizer_GridTools({clientId,layout}){const isVisible=(0,use_select.A)((select=>{const{isBlockSelected,isDraggingBlocks,getTemplateLock,getBlockEditingMode}=select(store_store);return!(!isDraggingBlocks()&&!isBlockSelected(clientId)||getTemplateLock(clientId)||"default"!==getBlockEditingMode(clientId))}),[clientId]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(GridLayoutSync,{clientId}),isVisible&&(0,jsx_runtime.jsx)(GridVisualizer,{clientId,parentLayout:layout})]})}(0,hooks_build_module.U2)("blocks.registerBlockType","core/metadata/addLabelCallback",(function addLabelCallback(settings){return settings.__experimentalLabel||(0,build_module.pN)(settings,"renaming",!0)&&(settings.__experimentalLabel=(attributes,{context})=>{const{metadata}=attributes;if("list-view"===context&&metadata?.name)return metadata.name}),settings}));const addGridVisualizerToBlockEdit=(0,create_higher_order_component.f)((BlockEdit=>props=>"grid"!==props.attributes.layout?.type?(0,jsx_runtime.jsx)(BlockEdit,{...props},"edit"):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(grid_visualizer_GridTools,{clientId:props.clientId,layout:props.attributes.layout}),(0,jsx_runtime.jsx)(BlockEdit,{...props},"edit")]})),"addGridVisualizerToBlockEdit");function getBorderClassesAndStyles(attributes){const border=attributes.style?.border||{};return{className:getBorderClasses(attributes)||void 0,style:getInlineStyles({border})}}function useBorderProps(attributes){const{colors}=useMultipleOriginColorsAndGradients(),borderProps=getBorderClassesAndStyles(attributes),{borderColor}=attributes;if(borderColor){const borderColorObject=getMultiOriginColor({colors,namedColor:borderColor});borderProps.style.borderColor=borderColorObject.color}return borderProps}function getShadowClassesAndStyles(attributes){return{style:getInlineStyles({shadow:attributes.style?.shadow||""})}}function getColorClassesAndStyles(attributes){const{backgroundColor,textColor,gradient,style}=attributes,backgroundClass=getColorClassName("background-color",backgroundColor),textClass=getColorClassName("color",textColor),gradientClass=__experimentalGetGradientClass(gradient),hasGradient=gradientClass||style?.color?.gradient;return{className:(0,clsx.A)(textClass,gradientClass,{[backgroundClass]:!hasGradient&&!!backgroundClass,"has-text-color":textColor||style?.color?.text,"has-background":backgroundColor||style?.color?.background||gradient||style?.color?.gradient,"has-link-color":style?.elements?.link?.color})||void 0,style:getInlineStyles({color:style?.color||{}})}}function useColorProps(attributes){const{backgroundColor,textColor,gradient}=attributes,[userPalette,themePalette,defaultPalette,userGradients,themeGradients,defaultGradients]=use_settings_useSettings("color.palette.custom","color.palette.theme","color.palette.default","color.gradients.custom","color.gradients.theme","color.gradients.default"),colors=(0,react.useMemo)((()=>[...userPalette||[],...themePalette||[],...defaultPalette||[]]),[userPalette,themePalette,defaultPalette]),gradients=(0,react.useMemo)((()=>[...userGradients||[],...themeGradients||[],...defaultGradients||[]]),[userGradients,themeGradients,defaultGradients]),colorProps=getColorClassesAndStyles(attributes);if(backgroundColor){const backgroundColorObject=getColorObjectByAttributeValues(colors,backgroundColor);colorProps.style.backgroundColor=backgroundColorObject.color}if(gradient&&(colorProps.style.background=getGradientValueBySlug(gradients,gradient)),textColor){const textColorObject=getColorObjectByAttributeValues(colors,textColor);colorProps.style.color=textColorObject.color}return colorProps}function getSpacingClassesAndStyles(attributes){const{style}=attributes;return{style:getInlineStyles({spacing:style?.spacing||{}})}}(0,hooks_build_module.U2)("editor.BlockEdit","core/editor/grid-visualizer",addGridVisualizerToBlockEdit);const{kebabCase:use_typography_props_kebabCase}=unlock(private_apis.j);function getTypographyClassesAndStyles(attributes,settings){let typographyStyles=attributes?.style?.typography||{};typographyStyles={...typographyStyles,fontSize:getTypographyFontSizeValue({size:attributes?.style?.typography?.fontSize},settings)};const style=getInlineStyles({typography:typographyStyles}),fontFamilyClassName=attributes?.fontFamily?`has-${use_typography_props_kebabCase(attributes.fontFamily)}-font-family`:"",textAlignClassName=attributes?.style?.typography?.textAlign?`has-text-align-${attributes?.style?.typography?.textAlign}`:"";return{className:(0,clsx.A)(fontFamilyClassName,textAlignClassName,getFontSizeClass(attributes?.fontSize)),style}}!function createBlockEditFilter(features){features=features.map((settings=>({...settings,Edit:(0,react.memo)(settings.edit)})));const withBlockEditHooks=(0,create_higher_order_component.f)((OriginalBlockEdit=>props=>{const context=useBlockEditContext();return[...features.map(((feature,i)=>{const{Edit,hasSupport,attributeKeys=[],shareWithChildBlocks}=feature;if(!(context[mayDisplayControlsKey]||context[mayDisplayParentControlsKey]&&shareWithChildBlocks)||!hasSupport(props.name))return null;const neededProps={};for(const key of attributeKeys)props.attributes[key]&&(neededProps[key]=props.attributes[key]);return(0,jsx_runtime.jsx)(Edit,{name:props.name,isSelected:props.isSelected,clientId:props.clientId,setAttributes:props.setAttributes,__unstableParentLayout:props.__unstableParentLayout,...neededProps},i)})),(0,jsx_runtime.jsx)(OriginalBlockEdit,{...props},"edit")]}),"withBlockEditHooks");(0,hooks_build_module.U2)("editor.BlockEdit","core/editor/hooks",withBlockEditHooks)}([align,text_align,hooks_anchor,custom_class_name,style,duotone,position,layout,content_lock_ui,block_hooks,block_bindings,layout_child].filter(Boolean)),function createBlockListBlockFilter(features){const withBlockListBlockHooks=(0,create_higher_order_component.f)((BlockListBlock=>props=>{const[allWrapperProps,setAllWrapperProps]=(0,react.useState)(Array(features.length).fill(void 0));return[...features.map(((feature,i)=>{const{hasSupport,attributeKeys=[],useBlockProps,isMatch}=feature,neededProps={};for(const key of attributeKeys)props.attributes[key]&&(neededProps[key]=props.attributes[key]);return!Object.keys(neededProps).length||!hasSupport(props.name)||isMatch&&!isMatch(neededProps)?null:(0,jsx_runtime.jsx)(BlockPropsPure,{index:i,useBlockProps,setAllWrapperProps,name:props.name,clientId:props.clientId,...neededProps},i)})),(0,jsx_runtime.jsx)(BlockListBlock,{...props,wrapperProps:allWrapperProps.filter(Boolean).reduce(((acc,wrapperProps)=>({...acc,...wrapperProps,className:(0,clsx.A)(acc.className,wrapperProps.className),style:{...acc.style,...wrapperProps.style}})),props.wrapperProps||{})},"edit")]}),"withBlockListBlockHooks");(0,hooks_build_module.U2)("editor.BlockListBlock","core/editor/hooks",withBlockListBlockHooks)}([align,text_align,background,style,color,dimensions,duotone,font_family,font_size,border,position,block_style_variation,layout_child]),function createBlockSaveFilter(features){(0,hooks_build_module.U2)("blocks.getSaveContent.extraProps","core/editor/hooks",(function extraPropsFromHooks(props,name,attributes){return features.reduce(((accu,feature)=>{const{hasSupport,attributeKeys=[],addSaveProps}=feature,neededAttributes={};for(const key of attributeKeys)attributes[key]&&(neededAttributes[key]=attributes[key]);return Object.keys(neededAttributes).length&&hasSupport(name)?addSaveProps(accu,name,neededAttributes):accu}),props)}),0),(0,hooks_build_module.U2)("blocks.getSaveContent.extraProps","core/editor/hooks",(props=>(props.hasOwnProperty("className")&&!props.className&&delete props.className,props)))}([align,text_align,hooks_anchor,aria_label,custom_class_name,border,color,style,font_family,font_size]);const{kebabCase:with_colors_kebabCase}=unlock(private_apis.j),upperFirst=([firstLetter,...rest])=>firstLetter.toUpperCase()+rest.join(""),withEditorColorPalette=()=>(0,create_higher_order_component.f)((WrappedComponent=>props=>{const[userPalette,themePalette,defaultPalette]=use_settings_useSettings("color.palette.custom","color.palette.theme","color.palette.default"),allColors=(0,react.useMemo)((()=>[...userPalette||[],...themePalette||[],...defaultPalette||[]]),[userPalette,themePalette,defaultPalette]);return(0,jsx_runtime.jsx)(WrappedComponent,{...props,colors:allColors})}),"withEditorColorPalette");function createColorHOC(colorTypes,withColorPalette){const colorMap=colorTypes.reduce(((colorObject,colorType)=>({...colorObject,..."string"==typeof colorType?{[colorType]:with_colors_kebabCase(colorType)}:colorType})),{});return(0,compose.A)([withColorPalette,WrappedComponent=>class extends react.Component{constructor(props){super(props),this.setters=this.createSetters(),this.colorUtils={getMostReadableColor:this.getMostReadableColor.bind(this)},this.state={}}getMostReadableColor(colorValue){const{colors}=this.props;return function getMostReadableColor(colors,colorValue){const colordColor=(0,colord.Mj)(colorValue),getColorContrast=({color})=>colordColor.contrast(color),maxContrast=Math.max(...colors.map(getColorContrast));return colors.find((color=>getColorContrast(color)===maxContrast)).color}(colors,colorValue)}createSetters(){return Object.keys(colorMap).reduce(((settersAccumulator,colorAttributeName)=>{const upperFirstColorAttributeName=upperFirst(colorAttributeName),customColorAttributeName=`custom${upperFirstColorAttributeName}`;return settersAccumulator[`set${upperFirstColorAttributeName}`]=this.createSetColor(colorAttributeName,customColorAttributeName),settersAccumulator}),{})}createSetColor(colorAttributeName,customColorAttributeName){return colorValue=>{const colorObject=getColorObjectByColorValue(this.props.colors,colorValue);this.props.setAttributes({[colorAttributeName]:colorObject&&colorObject.slug?colorObject.slug:void 0,[customColorAttributeName]:colorObject&&colorObject.slug?void 0:colorValue})}}static getDerivedStateFromProps({attributes,colors},previousState){return Object.entries(colorMap).reduce(((newState,[colorAttributeName,colorContext])=>{const colorObject=getColorObjectByAttributeValues(colors,attributes[colorAttributeName],attributes[`custom${upperFirst(colorAttributeName)}`]),previousColorObject=previousState[colorAttributeName],previousColor=previousColorObject?.color;return previousColor===colorObject.color&&previousColorObject?newState[colorAttributeName]=previousColorObject:newState[colorAttributeName]={...colorObject,class:getColorClassName(colorContext,colorObject.slug)},newState}),{})}render(){return(0,jsx_runtime.jsx)(WrappedComponent,{...this.props,colors:void 0,...this.state,...this.setters,colorUtils:this.colorUtils})}}])}function withColors(...colorTypes){const withColorPalette=withEditorColorPalette();return(0,create_higher_order_component.f)(createColorHOC(colorTypes,withColorPalette),"withColors")}var fullscreen=__webpack_require__("./packages/icons/build-module/library/fullscreen.js");const block_full_height_alignment_control=function BlockFullHeightAlignmentControl({isActive,label=(0,i18n_build_module.__)("Toggle full height"),onToggle,isDisabled}){return(0,jsx_runtime.jsx)(toolbar_button.A,{isActive,icon:fullscreen.A,label,onClick:()=>onToggle(!isActive),disabled:isDisabled})},GRID=[["top left","top center","top right"],["center left","center center","center right"],["bottom left","bottom center","bottom right"]],ALIGNMENT_LABEL={"top left":(0,i18n_build_module.__)("Top Left"),"top center":(0,i18n_build_module.__)("Top Center"),"top right":(0,i18n_build_module.__)("Top Right"),"center left":(0,i18n_build_module.__)("Center Left"),"center center":(0,i18n_build_module.__)("Center"),center:(0,i18n_build_module.__)("Center"),"center right":(0,i18n_build_module.__)("Center Right"),"bottom left":(0,i18n_build_module.__)("Bottom Left"),"bottom center":(0,i18n_build_module.__)("Bottom Center"),"bottom right":(0,i18n_build_module.__)("Bottom Right")},ALIGNMENTS=GRID.flat();function normalize(value){const normalized="center"===value?"center center":value,transformed=normalized?.replace("-"," ");return ALIGNMENTS.includes(transformed)?transformed:void 0}function getItemId(prefixId,value){const normalized=normalize(value);if(!normalized)return;return`${prefixId}-${normalized.replace(" ","-")}`}const rootBase=({size=92})=>(0,emotion_react_browser_esm.AH)("direction:ltr;display:grid;grid-template-columns:repeat( 3, 1fr );grid-template-rows:repeat( 3, 1fr );box-sizing:border-box;width:",size,"px;aspect-ratio:1;border-radius:",config_values.A.radiusMedium,";outline:none;","","","");var _ref={name:"e0dnmk",styles:"cursor:pointer"};const GridContainer=(0,emotion_styled_base_browser_esm.A)("div",{target:"e1r95csn3"})(rootBase," border:1px solid transparent;",(props=>props.disablePointerEvents?(0,emotion_react_browser_esm.AH)("","","",""):_ref),";"),GridRow=(0,emotion_styled_base_browser_esm.A)("div",{target:"e1r95csn2"})({name:"1fbxn64",styles:"grid-column:1/-1;box-sizing:border-box;display:grid;grid-template-columns:repeat( 3, 1fr )"}),Cell=(0,emotion_styled_base_browser_esm.A)("span",{target:"e1r95csn1"})({name:"e2kws5",styles:"position:relative;display:flex;align-items:center;justify-content:center;box-sizing:border-box;margin:0;padding:0;appearance:none;border:none;outline:none"}),Point=(0,emotion_styled_base_browser_esm.A)("span",{target:"e1r95csn0"})("display:block;contain:strict;box-sizing:border-box;width:",6,"px;aspect-ratio:1;margin:auto;color:",colors_values.l.theme.gray[400],";border:",3,"px solid currentColor;",Cell,"[data-active-item] &{color:",colors_values.l.gray[900],";transform:scale( calc( 5 / 3 ) );}",Cell,":not([data-active-item]):hover &{color:",colors_values.l.theme.accent,";}",Cell,"[data-focus-visible] &{outline:1px solid ",colors_values.l.theme.accent,";outline-offset:1px;}@media not ( prefers-reduced-motion ){transition-property:color,transform;transition-duration:120ms;transition-timing-function:linear;}");function cell_Cell({id,value,...props}){return(0,jsx_runtime.jsx)(tooltip.Ay,{text:ALIGNMENT_LABEL[value],children:(0,jsx_runtime.jsxs)(composite.e.Item,{id,render:(0,jsx_runtime.jsx)(Cell,{...props,role:"gridcell"}),children:[(0,jsx_runtime.jsx)(visually_hidden_component.A,{children:value}),(0,jsx_runtime.jsx)(Point,{role:"presentation"})]})})}const icon=function AlignmentMatrixControlIcon({className,disablePointerEvents=!0,size,width,height,style={},value="center",...props}){var _ref,_ref2;return(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:null!==(_ref=null!=size?size:width)&&void 0!==_ref?_ref:24,height:null!==(_ref2=null!=size?size:height)&&void 0!==_ref2?_ref2:24,role:"presentation",className:(0,clsx.A)("component-alignment-matrix-control-icon",className),style:{pointerEvents:disablePointerEvents?"none":void 0,...style},...props,children:ALIGNMENTS.map(((align,index)=>{const dotSize=function getAlignmentIndex(alignment="center"){const normalized=normalize(alignment);if(!normalized)return;const index=ALIGNMENTS.indexOf(normalized);return index>-1?index:void 0}(value)===index?4:2;return(0,jsx_runtime.jsx)(svg.rw,{x:1.5+index%3*7+(7-dotSize)/2,y:1.5+7*Math.floor(index/3)+(7-dotSize)/2,width:dotSize,height:dotSize,fill:"currentColor"},align)}))})};const AlignmentMatrixControl=Object.assign((function UnforwardedAlignmentMatrixControl({className,id,label=(0,i18n_build_module.__)("Alignment Matrix Control"),defaultValue="center center",value,onChange,width=92,...props}){const baseId=(0,use_instance_id.A)(UnforwardedAlignmentMatrixControl,"alignment-matrix-control",id),setActiveId=(0,react.useCallback)((nextActiveId=>{const nextValue=function getItemValue(prefixId,id){const value=id?.replace(prefixId+"-","");return normalize(value)}(baseId,nextActiveId);nextValue&&onChange?.(nextValue)}),[baseId,onChange]),classes=(0,clsx.A)("component-alignment-matrix-control",className);return(0,jsx_runtime.jsx)(composite.e,{defaultActiveId:getItemId(baseId,defaultValue),activeId:getItemId(baseId,value),setActiveId,rtl:(0,i18n_build_module.V8)(),render:(0,jsx_runtime.jsx)(GridContainer,{...props,"aria-label":label,className:classes,id:baseId,role:"grid",size:width}),children:GRID.map(((cells,index)=>(0,jsx_runtime.jsx)(composite.e.Row,{render:(0,jsx_runtime.jsx)(GridRow,{role:"row"}),children:cells.map((cell=>(0,jsx_runtime.jsx)(cell_Cell,{id:getItemId(baseId,cell),value:cell},cell)))},index)))})}),{Icon:Object.assign(icon,{displayName:"AlignmentMatrixControl.Icon"})}),alignment_matrix_control=AlignmentMatrixControl,block_alignment_matrix_control_noop=()=>{};const block_alignment_matrix_control=function BlockAlignmentMatrixControl(props){const{label=(0,i18n_build_module.__)("Change matrix alignment"),onChange=block_alignment_matrix_control_noop,value="center",isDisabled}=props,icon=(0,jsx_runtime.jsx)(alignment_matrix_control.Icon,{value});return(0,jsx_runtime.jsx)(dropdown.A,{popoverProps:{placement:"bottom-start"},renderToggle:({onToggle,isOpen})=>(0,jsx_runtime.jsx)(toolbar_button.A,{onClick:onToggle,"aria-haspopup":"true","aria-expanded":isOpen,onKeyDown:event=>{isOpen||event.keyCode!==keycodes_build_module.PX||(event.preventDefault(),onToggle())},label,icon,showTooltip:!0,disabled:isDisabled}),renderContent:()=>(0,jsx_runtime.jsx)(alignment_matrix_control,{hasFocusBorder:!1,onChange,value})})};function useBlockDisplayTitle({clientId,maximumLength,context}){const blockTitle=(0,use_select.A)((select=>{if(!clientId)return null;const{getBlockName,getBlockAttributes}=select(store_store),{getBlockType,getActiveBlockVariation}=select(build_module.M_),blockName=getBlockName(clientId),blockType=getBlockType(blockName);if(!blockType)return null;const attributes=getBlockAttributes(clientId),label=(0,build_module.Y0)(blockType,attributes,context);if(label!==blockType.title)return label;const match=getActiveBlockVariation(blockName,attributes);return match?.title||blockType.title}),[clientId,context]);if(!blockTitle)return null;if(maximumLength&&maximumLength>0&&blockTitle.length>maximumLength){const omission="...";return blockTitle.slice(0,maximumLength-omission.length)+omission}return blockTitle}function BlockTitle({clientId,maximumLength,context}){return useBlockDisplayTitle({clientId,maximumLength,context})}const block_breadcrumb=function BlockBreadcrumb({rootLabelText}){const{selectBlock,clearSelectedBlock}=(0,use_dispatch.A)(store_store),{clientId,parents,hasSelection}=(0,use_select.A)((select=>{const{getSelectionStart,getSelectedBlockClientId,getEnabledBlockParents}=unlock(select(store_store)),selectedBlockClientId=getSelectedBlockClientId();return{parents:getEnabledBlockParents(selectedBlockClientId),clientId:selectedBlockClientId,hasSelection:!!getSelectionStart().clientId}}),[]),rootLabel=rootLabelText||(0,i18n_build_module.__)("Document"),blockRef=(0,react.useRef)();return useBlockElementRef(clientId,blockRef),(0,jsx_runtime.jsxs)("ul",{className:"block-editor-block-breadcrumb",role:"list","aria-label":(0,i18n_build_module.__)("Block breadcrumb"),children:[(0,jsx_runtime.jsxs)("li",{className:hasSelection?void 0:"block-editor-block-breadcrumb__current","aria-current":hasSelection?void 0:"true",children:[hasSelection&&(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",className:"block-editor-block-breadcrumb__button",onClick:()=>{const blockEditor=blockRef.current?.closest(".editor-styles-wrapper");clearSelectedBlock(),function getEditorRegion(editor){var _Array$from$find,_editorCanvas$closest;if(!editor)return null;const editorCanvas=null!==(_Array$from$find=Array.from(document.querySelectorAll('iframe[name="editor-canvas"]').values()).find((iframe=>(iframe.contentDocument||iframe.contentWindow.document)===editor.ownerDocument)))&&void 0!==_Array$from$find?_Array$from$find:editor;return null!==(_editorCanvas$closest=editorCanvas?.closest('[role="region"]'))&&void 0!==_editorCanvas$closest?_editorCanvas$closest:editorCanvas}(blockEditor)?.focus()},children:rootLabel}),!hasSelection&&rootLabel,!!clientId&&(0,jsx_runtime.jsx)(build_module_icon.A,{icon:chevron_right_small.A,className:"block-editor-block-breadcrumb__separator"})]}),parents.map((parentClientId=>(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",className:"block-editor-block-breadcrumb__button",onClick:()=>selectBlock(parentClientId),children:(0,jsx_runtime.jsx)(BlockTitle,{clientId:parentClientId,maximumLength:35})}),(0,jsx_runtime.jsx)(build_module_icon.A,{icon:chevron_right_small.A,className:"block-editor-block-breadcrumb__separator"})]},parentClientId))),!!clientId&&(0,jsx_runtime.jsx)("li",{className:"block-editor-block-breadcrumb__current","aria-current":"true",children:(0,jsx_runtime.jsx)(BlockTitle,{clientId,maximumLength:35})})]})},COMMON_PROPS={placement:"top-start"},DEFAULT_PROPS={...COMMON_PROPS,flip:!1,shift:!0},RESTRICTED_HEIGHT_PROPS={...COMMON_PROPS,flip:!0,shift:!1};function getProps(contentElement,selectedBlockElement,scrollContainer,toolbarHeight,isSticky){if(!contentElement||!selectedBlockElement)return DEFAULT_PROPS;const scrollTop=scrollContainer?.scrollTop||0,blockRect=getVisibleElementBounds(selectedBlockElement),topOfContentElementInViewport=scrollTop+contentElement.getBoundingClientRect().top,viewportHeight=contentElement.ownerDocument.documentElement.clientHeight,restrictedTopArea=topOfContentElementInViewport+toolbarHeight,hasSpaceForToolbarAbove=blockRect.top>restrictedTopArea,isBlockTallerThanViewport=blockRect.height>viewportHeight-toolbarHeight;return isSticky||!hasSpaceForToolbarAbove&&!isBlockTallerThanViewport?RESTRICTED_HEIGHT_PROPS:DEFAULT_PROPS}function useBlockToolbarPopoverProps({contentElement,clientId}){const selectedBlockElement=useBlockElement(clientId),[toolbarHeight,setToolbarHeight]=(0,react.useState)(0),{blockIndex,isSticky}=(0,use_select.A)((select=>{const{getBlockIndex,getBlockAttributes}=select(store_store);return{blockIndex:getBlockIndex(clientId),isSticky:hasStickyOrFixedPositionValue(getBlockAttributes(clientId))}}),[clientId]),scrollContainer=(0,react.useMemo)((()=>{if(contentElement)return(0,get_scroll_container.A)(contentElement)}),[contentElement]),[props,setProps]=(0,react.useState)((()=>getProps(contentElement,selectedBlockElement,scrollContainer,toolbarHeight,isSticky))),popoverRef=(0,use_ref_effect.A)((popoverNode=>{setToolbarHeight(popoverNode.offsetHeight)}),[]),updateProps=(0,react.useCallback)((()=>setProps(getProps(contentElement,selectedBlockElement,scrollContainer,toolbarHeight,isSticky))),[contentElement,selectedBlockElement,scrollContainer,toolbarHeight]);return(0,react.useLayoutEffect)(updateProps,[blockIndex,updateProps]),(0,react.useLayoutEffect)((()=>{if(!contentElement||!selectedBlockElement)return;const contentView=contentElement?.ownerDocument?.defaultView;let resizeObserver;contentView?.addEventHandler?.("resize",updateProps);const blockView=selectedBlockElement?.ownerDocument?.defaultView;return blockView.ResizeObserver&&(resizeObserver=new blockView.ResizeObserver(updateProps),resizeObserver.observe(selectedBlockElement)),()=>{contentView?.removeEventHandler?.("resize",updateProps),resizeObserver&&resizeObserver.disconnect()}}),[updateProps,contentElement,selectedBlockElement]),{...props,ref:popoverRef}}function useSelectedBlockToolProps(clientId){const selectedBlockProps=(0,use_select.A)((select=>{const{getBlockRootClientId,getBlockParents,__experimentalGetBlockListSettingsForBlocks,isBlockInsertionPointVisible,getBlockInsertionPoint,getBlockOrder,hasMultiSelection,getLastMultiSelectedBlockClientId}=select(store_store),blockParentsClientIds=getBlockParents(clientId),parentBlockListSettings=__experimentalGetBlockListSettingsForBlocks(blockParentsClientIds),capturingClientId=blockParentsClientIds.find((parentClientId=>parentBlockListSettings[parentClientId]?.__experimentalCaptureToolbars));let isInsertionPointVisible=!1;if(isBlockInsertionPointVisible()){const insertionPoint=getBlockInsertionPoint();isInsertionPointVisible=getBlockOrder(insertionPoint.rootClientId)[insertionPoint.index]===clientId}return{capturingClientId,isInsertionPointVisible,lastClientId:hasMultiSelection()?getLastMultiSelectedBlockClientId():null,rootClientId:getBlockRootClientId(clientId)}}),[clientId]);return selectedBlockProps}function EmptyBlockInserter({clientId,__unstableContentRef}){const{capturingClientId,isInsertionPointVisible,lastClientId,rootClientId}=useSelectedBlockToolProps(clientId),popoverProps=useBlockToolbarPopoverProps({contentElement:__unstableContentRef?.current,clientId});return(0,jsx_runtime.jsx)(cover,{clientId:capturingClientId||clientId,bottomClientId:lastClientId,className:(0,clsx.A)("block-editor-block-list__block-side-inserter-popover",{"is-insertion-point-visible":isInsertionPointVisible}),__unstableContentRef,...popoverProps,children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-list__empty-block-inserter",children:(0,jsx_runtime.jsx)(inserter,{position:"bottom right",rootClientId,clientId,__experimentalIsQuick:!0})})})}var toolbar_item=__webpack_require__("./packages/components/build-module/toolbar/toolbar-item/index.js"),throttle=__webpack_require__("./packages/compose/build-module/utils/throttle/index.js");const block_draggable=({appendToOwnerDocument,children,clientIds,cloneClassname,elementId,onDragStart,onDragEnd,fadeWhenDisabled=!1,dragComponent})=>{const{srcRootClientId,isDraggable,icon,visibleInserter,getBlockType}=(0,use_select.A)((select=>{const{canMoveBlocks,getBlockRootClientId,getBlockName,getBlockAttributes,isBlockInsertionPointVisible}=select(store_store),{getBlockType:_getBlockType,getActiveBlockVariation}=select(build_module.M_),rootClientId=getBlockRootClientId(clientIds[0]),blockName=getBlockName(clientIds[0]),variation=getActiveBlockVariation(blockName,getBlockAttributes(clientIds[0]));return{srcRootClientId:rootClientId,isDraggable:canMoveBlocks(clientIds),icon:variation?.icon||_getBlockType(blockName)?.icon,visibleInserter:isBlockInsertionPointVisible(),getBlockType:_getBlockType}}),[clientIds]),isDraggingRef=(0,react.useRef)(!1),[startScrolling,scrollOnDragOver,stopScrolling]=function useScrollWhenDragging(){const dragStartYRef=(0,react.useRef)(null),velocityYRef=(0,react.useRef)(null),scrollParentYRef=(0,react.useRef)(null),scrollEditorIntervalRef=(0,react.useRef)(null);return(0,react.useEffect)((()=>()=>{scrollEditorIntervalRef.current&&(clearInterval(scrollEditorIntervalRef.current),scrollEditorIntervalRef.current=null)}),[]),[(0,react.useCallback)((event=>{dragStartYRef.current=event.clientY,scrollParentYRef.current=(0,get_scroll_container.A)(event.target),scrollEditorIntervalRef.current=setInterval((()=>{if(scrollParentYRef.current&&velocityYRef.current){const newTop=scrollParentYRef.current.scrollTop+velocityYRef.current;scrollParentYRef.current.scroll({top:newTop})}}),25)}),[]),(0,react.useCallback)((event=>{if(!scrollParentYRef.current)return;const scrollParentHeight=scrollParentYRef.current.offsetHeight,offsetDragStartPosition=dragStartYRef.current-scrollParentYRef.current.offsetTop,offsetDragPosition=event.clientY-scrollParentYRef.current.offsetTop;if(event.clientY>offsetDragStartPosition){const moveableDistance=Math.max(scrollParentHeight-offsetDragStartPosition-50,0),dragDistance=Math.max(offsetDragPosition-offsetDragStartPosition-50,0),distancePercentage=0===moveableDistance||0===dragDistance?0:dragDistance/moveableDistance;velocityYRef.current=25*distancePercentage}else if(event.clientY<offsetDragStartPosition){const moveableDistance=Math.max(offsetDragStartPosition-50,0),dragDistance=Math.max(offsetDragStartPosition-offsetDragPosition-50,0),distancePercentage=0===moveableDistance||0===dragDistance?0:dragDistance/moveableDistance;velocityYRef.current=-25*distancePercentage}else velocityYRef.current=0}),[]),()=>{dragStartYRef.current=null,scrollParentYRef.current=null,scrollEditorIntervalRef.current&&(clearInterval(scrollEditorIntervalRef.current),scrollEditorIntervalRef.current=null)}]}(),{getAllowedBlocks,getBlockNamesByClientId,getBlockRootClientId}=(0,use_select.A)(store_store),{startDraggingBlocks,stopDraggingBlocks}=(0,use_dispatch.A)(store_store);(0,react.useEffect)((()=>()=>{isDraggingRef.current&&stopDraggingBlocks()}),[]);const blockEl=useBlockElement(clientIds[0]),editorRoot=blockEl?.closest("body");if((0,react.useEffect)((()=>{if(!editorRoot||!fadeWhenDisabled)return;const throttledOnDragOver=(0,throttle.n)((event=>{if(!event.target.closest("[data-block]"))return;const draggedBlockNames=getBlockNamesByClientId(clientIds),targetClientId=event.target.closest("[data-block]").getAttribute("data-block"),allowedBlocks=getAllowedBlocks(targetClientId),targetBlockName=getBlockNamesByClientId([targetClientId])[0];let dropTargetValid;if(0===allowedBlocks?.length){const targetRootClientId=getBlockRootClientId(targetClientId),targetRootBlockName=getBlockNamesByClientId([targetRootClientId])[0],rootAllowedBlocks=getAllowedBlocks(targetRootClientId);dropTargetValid=isDropTargetValid(getBlockType,rootAllowedBlocks,draggedBlockNames,targetRootBlockName)}else dropTargetValid=isDropTargetValid(getBlockType,allowedBlocks,draggedBlockNames,targetBlockName);dropTargetValid||visibleInserter?window?.document?.body?.classList?.remove("block-draggable-invalid-drag-token"):window?.document?.body?.classList?.add("block-draggable-invalid-drag-token")}),200);return editorRoot.addEventListener("dragover",throttledOnDragOver),()=>{editorRoot.removeEventListener("dragover",throttledOnDragOver)}}),[clientIds,editorRoot,fadeWhenDisabled,getAllowedBlocks,getBlockNamesByClientId,getBlockRootClientId,getBlockType,visibleInserter]),!isDraggable)return children({draggable:!1});const transferData={type:"block",srcClientIds:clientIds,srcRootClientId};return(0,jsx_runtime.jsx)(draggable.A,{appendToOwnerDocument,cloneClassname,__experimentalTransferDataType:"wp-blocks",transferData,onDragStart:event=>{window.requestAnimationFrame((()=>{startDraggingBlocks(clientIds),isDraggingRef.current=!0,startScrolling(event),onDragStart&&onDragStart()}))},onDragOver:scrollOnDragOver,onDragEnd:()=>{stopDraggingBlocks(),isDraggingRef.current=!1,stopScrolling(),onDragEnd&&onDragEnd()},__experimentalDragComponent:void 0!==dragComponent?dragComponent:(0,jsx_runtime.jsx)(BlockDraggableChip,{count:clientIds.length,icon,fadeWhenDisabled:!0}),elementId,children:({onDraggableStart,onDraggableEnd})=>children({draggable:!0,onDragStart:onDraggableStart,onDragEnd:onDraggableEnd})})},getMovementDirection=(moveDirection,orientation)=>"up"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.V8)()?"right":"left":"up":"down"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.V8)()?"left":"right":"down":null;function getBlockMoverDescription(selectedCount,type,firstIndex,isFirst,isLast,dir,orientation){const position=firstIndex+1;if(selectedCount>1)return function getMultiBlockMoverDescription(selectedCount,firstIndex,isFirst,isLast,dir,orientation){const position=firstIndex+1;if(isFirst&&isLast)return(0,i18n_build_module.__)("All blocks are selected, and cannot be moved");if(dir>0&&!isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d down by one place"),selectedCount,position);if("left"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d left by one place"),selectedCount,position);if("right"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d right by one place"),selectedCount,position)}if(dir>0&&isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved down as they are already at the bottom");if("left"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved left as they are already are at the leftmost position");if("right"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved right as they are already are at the rightmost position")}if(dir<0&&!isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d up by one place"),selectedCount,position);if("left"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d left by one place"),selectedCount,position);if("right"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$d blocks from position %2$d right by one place"),selectedCount,position)}if(dir<0&&isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved up as they are already at the top");if("left"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved left as they are already are at the leftmost position");if("right"===movementDirection)return(0,i18n_build_module.__)("Blocks cannot be moved right as they are already are at the rightmost position")}}(selectedCount,firstIndex,isFirst,isLast,dir,orientation);if(isFirst&&isLast)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Block %s is the only block, and cannot be moved"),type);if(dir>0&&!isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$s block from position %2$d down to position %3$d"),type,position,position+1);if("left"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$s block from position %2$d left to position %3$d"),type,position,position+1);if("right"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$s block from position %2$d right to position %3$d"),type,position,position+1)}if(dir>0&&isLast){const movementDirection=getMovementDirection("down",orientation);if("down"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Block %1$s is at the end of the content and can’t be moved down"),type);if("left"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Block %1$s is at the end of the content and can’t be moved left"),type);if("right"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Block %1$s is at the end of the content and can’t be moved right"),type)}if(dir<0&&!isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$s block from position %2$d up to position %3$d"),type,position,position-1);if("left"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$s block from position %2$d left to position %3$d"),type,position,position-1);if("right"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Move %1$s block from position %2$d right to position %3$d"),type,position,position-1)}if(dir<0&&isFirst){const movementDirection=getMovementDirection("up",orientation);if("up"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Block %1$s is at the beginning of the content and can’t be moved up"),type);if("left"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Block %1$s is at the beginning of the content and can’t be moved left"),type);if("right"===movementDirection)return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Block %1$s is at the beginning of the content and can’t be moved right"),type)}}const getArrowIcon=(direction,orientation)=>"up"===direction?"horizontal"===orientation?(0,i18n_build_module.V8)()?chevron_right.A:chevron_left.A:chevron_up.A:"down"===direction?"horizontal"===orientation?(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A:library_chevron_down.A:null,getMovementDirectionLabel=(moveDirection,orientation)=>"up"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.V8)()?(0,i18n_build_module.__)("Move right"):(0,i18n_build_module.__)("Move left"):(0,i18n_build_module.__)("Move up"):"down"===moveDirection?"horizontal"===orientation?(0,i18n_build_module.V8)()?(0,i18n_build_module.__)("Move left"):(0,i18n_build_module.__)("Move right"):(0,i18n_build_module.__)("Move down"):null,BlockMoverButton=(0,react.forwardRef)((({clientIds,direction,orientation:moverOrientation,...props},ref)=>{const instanceId=(0,use_instance_id.A)(BlockMoverButton),normalizedClientIds=Array.isArray(clientIds)?clientIds:[clientIds],blocksCount=normalizedClientIds.length,{disabled}=props,{blockType,isDisabled,rootClientId,isFirst,isLast,firstIndex,orientation="vertical"}=(0,use_select.A)((select=>{const{getBlockIndex,getBlockRootClientId,getBlockOrder,getBlock,getBlockListSettings}=select(store_store),firstClientId=normalizedClientIds[0],blockRootClientId=getBlockRootClientId(firstClientId),firstBlockIndex=getBlockIndex(firstClientId),lastBlockIndex=getBlockIndex(normalizedClientIds[normalizedClientIds.length-1]),blockOrder=getBlockOrder(blockRootClientId),block=getBlock(firstClientId),isFirstBlock=0===firstBlockIndex,isLastBlock=lastBlockIndex===blockOrder.length-1,{orientation:blockListOrientation}=getBlockListSettings(blockRootClientId)||{};return{blockType:block?(0,build_module.E7)(block.name):null,isDisabled:disabled||("up"===direction?isFirstBlock:isLastBlock),rootClientId:blockRootClientId,firstIndex:firstBlockIndex,isFirst:isFirstBlock,isLast:isLastBlock,orientation:moverOrientation||blockListOrientation}}),[clientIds,direction]),{moveBlocksDown,moveBlocksUp}=(0,use_dispatch.A)(store_store),moverFunction="up"===direction?moveBlocksUp:moveBlocksDown,descriptionId=`block-editor-block-mover-button__description-${instanceId}`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,ref,className:(0,clsx.A)("block-editor-block-mover-button",`is-${direction}-button`),icon:getArrowIcon(direction,orientation),label:getMovementDirectionLabel(direction,orientation),"aria-describedby":descriptionId,...props,onClick:isDisabled?null:event=>{moverFunction(clientIds,rootClientId),props.onClick&&props.onClick(event)},disabled:isDisabled,accessibleWhenDisabled:!0}),(0,jsx_runtime.jsx)(visually_hidden_component.A,{id:descriptionId,children:getBlockMoverDescription(blocksCount,blockType&&blockType.title,firstIndex,isFirst,isLast,"up"===direction?-1:1,orientation)})]})})),BlockMoverUpButton=(0,react.forwardRef)(((props,ref)=>(0,jsx_runtime.jsx)(BlockMoverButton,{direction:"up",ref,...props}))),BlockMoverDownButton=(0,react.forwardRef)(((props,ref)=>(0,jsx_runtime.jsx)(BlockMoverButton,{direction:"down",ref,...props})));const block_mover=function BlockMover({clientIds,hideDragHandle,isBlockMoverUpButtonDisabled,isBlockMoverDownButtonDisabled}){const{canMove,rootClientId,isFirst,isLast,orientation,isManualGrid}=(0,use_select.A)((select=>{var _getBlockAttributes;const{getBlockIndex,getBlockListSettings,canMoveBlocks,getBlockOrder,getBlockRootClientId,getBlockAttributes}=select(store_store),normalizedClientIds=Array.isArray(clientIds)?clientIds:[clientIds],firstClientId=normalizedClientIds[0],_rootClientId=getBlockRootClientId(firstClientId),firstIndex=getBlockIndex(firstClientId),lastIndex=getBlockIndex(normalizedClientIds[normalizedClientIds.length-1]),blockOrder=getBlockOrder(_rootClientId),{layout={}}=null!==(_getBlockAttributes=getBlockAttributes(_rootClientId))&&void 0!==_getBlockAttributes?_getBlockAttributes:{};return{canMove:canMoveBlocks(clientIds),rootClientId:_rootClientId,isFirst:0===firstIndex,isLast:lastIndex===blockOrder.length-1,orientation:getBlockListSettings(_rootClientId)?.orientation,isManualGrid:"grid"===layout.type&&layout.isManualPlacement&&window.__experimentalEnableGridInteractivity}}),[clientIds]);return!canMove||isFirst&&isLast&&!rootClientId||hideDragHandle&&isManualGrid?null:(0,jsx_runtime.jsxs)(toolbar_group.A,{className:(0,clsx.A)("block-editor-block-mover",{"is-horizontal":"horizontal"===orientation}),children:[!hideDragHandle&&(0,jsx_runtime.jsx)(block_draggable,{clientIds,fadeWhenDisabled:!0,children:draggableProps=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,icon:drag_handle.A,className:"block-editor-block-mover__drag-handle",label:(0,i18n_build_module.__)("Drag"),tabIndex:"-1",...draggableProps})}),!isManualGrid&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-mover__move-button-container",children:[(0,jsx_runtime.jsx)(toolbar_item.A,{children:itemProps=>(0,jsx_runtime.jsx)(BlockMoverUpButton,{disabled:isBlockMoverUpButtonDisabled,clientIds,...itemProps})}),(0,jsx_runtime.jsx)(toolbar_item.A,{children:itemProps=>(0,jsx_runtime.jsx)(BlockMoverDownButton,{disabled:isBlockMoverDownButtonDisabled,clientIds,...itemProps})})]})]})},{clearTimeout:utils_clearTimeout,setTimeout:utils_setTimeout}=window,DEBOUNCE_TIMEOUT=200;function useDebouncedShowGestures({ref,isFocused,highlightParent,debounceTimeout=DEBOUNCE_TIMEOUT}){const{getSelectedBlockClientId,getBlockRootClientId}=(0,use_select.A)(store_store),{toggleBlockHighlight}=(0,use_dispatch.A)(store_store),timeoutRef=(0,react.useRef)(),isDistractionFree=(0,use_select.A)((select=>select(store_store).getSettings().isDistractionFree),[]),handleOnChange=nextIsFocused=>{if(nextIsFocused&&isDistractionFree)return;const selectedBlockClientId=getSelectedBlockClientId(),clientId=highlightParent?getBlockRootClientId(selectedBlockClientId):selectedBlockClientId;toggleBlockHighlight(clientId,nextIsFocused)},shouldHideGestures=()=>{const isHovered=ref?.current&&ref.current.matches(":hover");return!isFocused&&!isHovered},clearTimeoutRef=()=>{const timeout=timeoutRef.current;timeout&&utils_clearTimeout&&utils_clearTimeout(timeout)};return(0,react.useEffect)((()=>()=>{handleOnChange(!1),clearTimeoutRef()}),[]),{debouncedShowGestures:event=>{event&&event.stopPropagation(),clearTimeoutRef(),handleOnChange(!0)},debouncedHideGestures:event=>{event&&event.stopPropagation(),clearTimeoutRef(),timeoutRef.current=utils_setTimeout((()=>{shouldHideGestures()&&handleOnChange(!1)}),debounceTimeout)}}}function useShowHoveredOrFocusedGestures({ref,highlightParent=!1,debounceTimeout=DEBOUNCE_TIMEOUT}){const[isFocused,setIsFocused]=(0,react.useState)(!1),{debouncedShowGestures,debouncedHideGestures}=useDebouncedShowGestures({ref,debounceTimeout,isFocused,highlightParent}),registerRef=(0,react.useRef)(!1),isFocusedWithin=()=>ref?.current&&ref.current.contains(ref.current.ownerDocument.activeElement);return(0,react.useEffect)((()=>{const node=ref.current,handleOnFocus=()=>{isFocusedWithin()&&(setIsFocused(!0),debouncedShowGestures())},handleOnBlur=()=>{isFocusedWithin()||(setIsFocused(!1),debouncedHideGestures())};return node&&!registerRef.current&&(node.addEventListener("focus",handleOnFocus,!0),node.addEventListener("blur",handleOnBlur,!0),registerRef.current=!0),()=>{node&&(node.removeEventListener("focus",handleOnFocus),node.removeEventListener("blur",handleOnBlur))}}),[ref,registerRef,setIsFocused,debouncedShowGestures,debouncedHideGestures]),{onMouseMove:debouncedShowGestures,onMouseLeave:debouncedHideGestures}}function BlockParentSelector(){const{selectBlock}=(0,use_dispatch.A)(store_store),{parentClientId,isVisible}=(0,use_select.A)((select=>{const{getBlockName,getBlockParents,getSelectedBlockClientId,getBlockEditingMode,getParentSectionBlock}=unlock(select(store_store)),{hasBlockSupport}=select(build_module.M_),selectedBlockClientId=getSelectedBlockClientId(),parentSection=getParentSectionBlock(selectedBlockClientId),parents=getBlockParents(selectedBlockClientId),_parentClientId=null!=parentSection?parentSection:parents[parents.length-1],parentBlockName=getBlockName(_parentClientId),_parentBlockType=(0,build_module.E7)(parentBlockName);return{parentClientId:_parentClientId,isVisible:_parentClientId&&"disabled"!==getBlockEditingMode(_parentClientId)&&hasBlockSupport(_parentBlockType,"__experimentalParentSelector",!0)}}),[]),blockInformation=useBlockDisplayInformation(parentClientId),nodeRef=(0,react.useRef)(),showHoveredOrFocusedGestures=useShowHoveredOrFocusedGestures({ref:nodeRef,highlightParent:!0});return isVisible?(0,jsx_runtime.jsx)("div",{className:"block-editor-block-parent-selector",ref:nodeRef,...showHoveredOrFocusedGestures,children:(0,jsx_runtime.jsx)(toolbar_button.A,{className:"block-editor-block-parent-selector__button",onClick:()=>selectBlock(parentClientId),label:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Select parent block: %s"),blockInformation?.title),showTooltip:!0,icon:(0,jsx_runtime.jsx)(block_icon,{icon:blockInformation?.icon})})},parentClientId):null}var copy=__webpack_require__("./packages/icons/build-module/library/copy.js");function PreviewBlockPopover({blocks}){return(0,use_viewport_match.A)("medium","<")?null:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__popover-preview-container",children:(0,jsx_runtime.jsx)(popover.Ay,{className:"block-editor-block-switcher__popover-preview",placement:"right-start",focusOnMount:!1,offset:16,children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-switcher__preview",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__preview-title",children:(0,i18n_build_module.__)("Preview")}),(0,jsx_runtime.jsx)(block_preview,{viewportWidth:500,blocks})]})})})}const block_variation_transformations_EMPTY_OBJECT={};function BlockVariationTranformationItem({item,onSelect,setHoveredTransformItemName}){const{name,icon,title}=item;return(0,jsx_runtime.jsxs)(menu_item.A,{className:(0,build_module.HK)(name),onClick:event=>{event.preventDefault(),onSelect(name)},onMouseLeave:()=>setHoveredTransformItemName(null),onMouseEnter:()=>setHoveredTransformItemName(name),children:[(0,jsx_runtime.jsx)(block_icon,{icon,showColors:!0}),title]})}const block_variation_transformations=({transformations,onSelect,blocks})=>{const[hoveredTransformItemName,setHoveredTransformItemName]=(0,react.useState)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[hoveredTransformItemName&&(0,jsx_runtime.jsx)(PreviewBlockPopover,{blocks:(0,build_module.JB)(blocks[0],transformations.find((({name})=>name===hoveredTransformItemName)).attributes)}),transformations?.map((item=>(0,jsx_runtime.jsx)(BlockVariationTranformationItem,{item,onSelect,setHoveredTransformItemName},item.name)))]})};function RestTransformationItems({restTransformations,onSelect,setHoveredTransformItemName}){return restTransformations.map((item=>(0,jsx_runtime.jsx)(BlockTranformationItem,{item,onSelect,setHoveredTransformItemName},item.name)))}function BlockTranformationItem({item,onSelect,setHoveredTransformItemName}){const{name,icon,title,isDisabled}=item;return(0,jsx_runtime.jsxs)(menu_item.A,{className:(0,build_module.HK)(name),onClick:event=>{event.preventDefault(),onSelect(name)},disabled:isDisabled,onMouseLeave:()=>setHoveredTransformItemName(null),onMouseEnter:()=>setHoveredTransformItemName(name),children:[(0,jsx_runtime.jsx)(block_icon,{icon,showColors:!0}),title]})}const block_transformations_menu=({className,possibleBlockTransformations,possibleBlockVariationTransformations,onSelect,onSelectVariation,blocks})=>{const[hoveredTransformItemName,setHoveredTransformItemName]=(0,react.useState)(),{priorityTextTransformations,restTransformations}=function useGroupedTransforms(possibleBlockTransformations){const priorityContentTranformationBlocks={"core/paragraph":1,"core/heading":2,"core/list":3,"core/quote":4},transformations=(0,react.useMemo)((()=>{const priorityTextTranformsNames=Object.keys(priorityContentTranformationBlocks),groupedPossibleTransforms=possibleBlockTransformations.reduce(((accumulator,item)=>{const{name}=item;return priorityTextTranformsNames.includes(name)?accumulator.priorityTextTransformations.push(item):accumulator.restTransformations.push(item),accumulator}),{priorityTextTransformations:[],restTransformations:[]});if(1===groupedPossibleTransforms.priorityTextTransformations.length&&"core/quote"===groupedPossibleTransforms.priorityTextTransformations[0].name){const singleQuote=groupedPossibleTransforms.priorityTextTransformations.pop();groupedPossibleTransforms.restTransformations.push(singleQuote)}return groupedPossibleTransforms}),[possibleBlockTransformations]);return transformations.priorityTextTransformations.sort((({name:currentName},{name:nextName})=>priorityContentTranformationBlocks[currentName]<priorityContentTranformationBlocks[nextName]?-1:1)),transformations}(possibleBlockTransformations),hasBothContentTransformations=priorityTextTransformations.length&&restTransformations.length,restTransformItems=!!restTransformations.length&&(0,jsx_runtime.jsx)(RestTransformationItems,{restTransformations,onSelect,setHoveredTransformItemName});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu_group.A,{label:(0,i18n_build_module.__)("Transform to"),className,children:[hoveredTransformItemName&&(0,jsx_runtime.jsx)(PreviewBlockPopover,{blocks:(0,build_module.bh)(blocks,hoveredTransformItemName)}),!!possibleBlockVariationTransformations?.length&&(0,jsx_runtime.jsx)(block_variation_transformations,{transformations:possibleBlockVariationTransformations,blocks,onSelect:onSelectVariation}),priorityTextTransformations.map((item=>(0,jsx_runtime.jsx)(BlockTranformationItem,{item,onSelect,setHoveredTransformItemName},item.name))),!hasBothContentTransformations&&restTransformItems]}),!!hasBothContentTransformations&&(0,jsx_runtime.jsx)(menu_group.A,{className,children:restTransformItems})]})};function replaceActiveStyle(className,activeStyle,newStyle){const list=new TokenList(className);return activeStyle&&list.remove("is-style-"+activeStyle.name),list.add("is-style-"+newStyle.name),list.value}function getDefaultStyle(styles){return styles?.find((style=>style.isDefault))}function useStylesForBlocks({clientId,onSwitch}){const{styles,block,blockType,className}=(0,use_select.A)((select=>{const{getBlock}=select(store_store),block=getBlock(clientId);if(!block)return{};const blockType=(0,build_module.E7)(block.name),{getBlockStyles}=select(build_module.M_);return{block,blockType,styles:getBlockStyles(block.name),className:block.attributes.className||""}}),[clientId]),{updateBlockAttributes}=(0,use_dispatch.A)(store_store),stylesToRender=function getRenderedStyles(styles){return styles&&0!==styles.length?getDefaultStyle(styles)?styles:[{name:"default",label:(0,i18n_build_module._x)("Default","block style"),isDefault:!0},...styles]:[]}(styles),activeStyle=function getActiveStyle(styles,className){for(const style of new TokenList(className).values()){if(-1===style.indexOf("is-style-"))continue;const potentialStyleName=style.substring(9),activeStyle=styles?.find((({name})=>name===potentialStyleName));if(activeStyle)return activeStyle}return getDefaultStyle(styles)}(stylesToRender,className),genericPreviewBlock=function useGenericPreviewBlock(block,type){return(0,react.useMemo)((()=>{const example=type?.example,blockName=type?.name;return example&&blockName?(0,build_module.KL)(blockName,{attributes:example.attributes,innerBlocks:example.innerBlocks}):block?(0,build_module.JB)(block):void 0}),[type?.example?block?.name:block,type])}(block,blockType);return{onSelect:style=>{const styleClassName=replaceActiveStyle(className,activeStyle,style);updateBlockAttributes(clientId,{className:styleClassName}),onSwitch()},stylesToRender,activeStyle,genericPreviewBlock,className}}const menu_items_noop=()=>{};function BlockStylesMenuItems({clientId,onSwitch=menu_items_noop}){const{onSelect,stylesToRender,activeStyle}=useStylesForBlocks({clientId,onSwitch});return stylesToRender&&0!==stylesToRender.length?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:stylesToRender.map((style=>{const menuItemText=style.label||style.name;return(0,jsx_runtime.jsx)(menu_item.A,{icon:activeStyle.name===style.name?library_check.A:null,onClick:()=>onSelect(style),children:(0,jsx_runtime.jsx)(text_component.A,{as:"span",limit:18,ellipsizeMode:"tail",truncate:!0,children:menuItemText})},style.name)}))}):null}function BlockStylesMenu({hoveredBlock,onSwitch}){const{clientId}=hoveredBlock;return(0,jsx_runtime.jsx)(menu_group.A,{label:(0,i18n_build_module.__)("Styles"),className:"block-editor-block-switcher__styles__menugroup",children:(0,jsx_runtime.jsx)(BlockStylesMenuItems,{clientId,onSwitch})})}const getMatchingBlockByName=(block,selectedBlockName,consumedBlocks=new Set)=>{const{clientId,name,innerBlocks=[]}=block;if(!consumedBlocks.has(clientId)){if(name===selectedBlockName)return block;for(const innerBlock of innerBlocks){const match=getMatchingBlockByName(innerBlock,selectedBlockName,consumedBlocks);if(match)return match}}},transformMatchingBlock=(match,selectedBlock)=>{const retainedBlockAttributes=((name,attributes)=>{const contentAttributes=(0,build_module.oA)(name,"content");return contentAttributes?.length?contentAttributes.reduce(((_accumulator,attribute)=>(attributes[attribute]&&(_accumulator[attribute]=attributes[attribute]),_accumulator)),{}):attributes})(selectedBlock.name,selectedBlock.attributes);match.attributes={...match.attributes,...retainedBlockAttributes}},use_transformed_patterns=(patterns,selectedBlocks)=>(0,react.useMemo)((()=>patterns.reduce(((accumulator,_pattern)=>{const transformedBlocks=((selectedBlocks,patternBlocks)=>{const _patternBlocks=patternBlocks.map((block=>(0,build_module.JB)(block))),consumedBlocks=new Set;for(const selectedBlock of selectedBlocks){let isMatch=!1;for(const patternBlock of _patternBlocks){const match=getMatchingBlockByName(patternBlock,selectedBlock.name,consumedBlocks);if(match){isMatch=!0,consumedBlocks.add(match.clientId),transformMatchingBlock(match,selectedBlock);break}}if(!isMatch)return}return _patternBlocks})(selectedBlocks,_pattern.blocks);return transformedBlocks&&accumulator.push({..._pattern,transformedBlocks}),accumulator}),[])),[patterns,selectedBlocks]);function PreviewPatternsPopover({patterns,onSelect}){const isMobile=(0,use_viewport_match.A)("medium","<");return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__popover-preview-container",children:(0,jsx_runtime.jsx)(popover.Ay,{className:"block-editor-block-switcher__popover-preview",placement:isMobile?"bottom":"right-start",offset:16,children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-switcher__preview is-pattern-list-preview",children:(0,jsx_runtime.jsx)(pattern_transformations_menu_BlockPatternsList,{patterns,onSelect})})})})}function pattern_transformations_menu_BlockPatternsList({patterns,onSelect}){return(0,jsx_runtime.jsx)(composite.e,{role:"listbox",className:"block-editor-block-switcher__preview-patterns-container","aria-label":(0,i18n_build_module.__)("Patterns list"),children:patterns.map((pattern=>(0,jsx_runtime.jsx)(pattern_transformations_menu_BlockPattern,{pattern,onSelect},pattern.name)))})}function pattern_transformations_menu_BlockPattern({pattern,onSelect}){const baseClassName="block-editor-block-switcher__preview-patterns-container",descriptionId=(0,use_instance_id.A)(pattern_transformations_menu_BlockPattern,`${baseClassName}-list__item-description`);return(0,jsx_runtime.jsxs)("div",{className:`${baseClassName}-list__list-item`,children:[(0,jsx_runtime.jsxs)(composite.e.Item,{render:(0,jsx_runtime.jsx)("div",{role:"option","aria-label":pattern.title,"aria-describedby":pattern.description?descriptionId:void 0,className:`${baseClassName}-list__item`}),onClick:()=>onSelect(pattern.transformedBlocks),children:[(0,jsx_runtime.jsx)(block_preview,{blocks:pattern.transformedBlocks,viewportWidth:pattern.viewportWidth||500}),(0,jsx_runtime.jsx)("div",{className:`${baseClassName}-list__item-title`,children:pattern.title})]}),!!pattern.description&&(0,jsx_runtime.jsx)(visually_hidden_component.A,{id:descriptionId,children:pattern.description})]})}const pattern_transformations_menu=function PatternTransformationsMenu({blocks,patterns:statePatterns,onSelect}){const[showTransforms,setShowTransforms]=(0,react.useState)(!1),patterns=use_transformed_patterns(statePatterns,blocks);return patterns.length?(0,jsx_runtime.jsxs)(menu_group.A,{className:"block-editor-block-switcher__pattern__transforms__menugroup",children:[showTransforms&&(0,jsx_runtime.jsx)(PreviewPatternsPopover,{patterns,onSelect}),(0,jsx_runtime.jsx)(menu_item.A,{onClick:event=>{event.preventDefault(),setShowTransforms(!showTransforms)},icon:chevron_right.A,children:(0,i18n_build_module.__)("Patterns")})]}):null};function BlockSwitcherDropdownMenuContents({onClose,clientIds,hasBlockStyles,canRemove}){const{replaceBlocks,multiSelect,updateBlockAttributes}=(0,use_dispatch.A)(store_store),{possibleBlockTransformations,patterns,blocks,isUsingBindings}=(0,use_select.A)((select=>{const{getBlockAttributes,getBlocksByClientId,getBlockRootClientId,getBlockTransformItems,__experimentalGetPatternTransformItems}=select(store_store),rootClientId=getBlockRootClientId(clientIds[0]),_blocks=getBlocksByClientId(clientIds);return{blocks:_blocks,possibleBlockTransformations:getBlockTransformItems(_blocks,rootClientId),patterns:__experimentalGetPatternTransformItems(_blocks,rootClientId),isUsingBindings:clientIds.every((clientId=>!!getBlockAttributes(clientId)?.metadata?.bindings))}}),[clientIds]),blockVariationTransformations=function useBlockVariationTransforms({clientIds,blocks}){const{activeBlockVariation,blockVariationTransformations}=(0,use_select.A)((select=>{const{getBlockAttributes,canRemoveBlocks}=select(store_store),{getActiveBlockVariation,getBlockVariations}=select(build_module.M_),canRemove=canRemoveBlocks(clientIds);if(1!==blocks.length||!canRemove)return block_variation_transformations_EMPTY_OBJECT;const[firstBlock]=blocks;return{blockVariationTransformations:getBlockVariations(firstBlock.name,"transform"),activeBlockVariation:getActiveBlockVariation(firstBlock.name,getBlockAttributes(firstBlock.clientId))}}),[clientIds,blocks]);return(0,react.useMemo)((()=>blockVariationTransformations?.filter((({name})=>name!==activeBlockVariation?.name))),[blockVariationTransformations,activeBlockVariation])}({clientIds,blocks});function selectForMultipleBlocks(insertedBlocks){insertedBlocks.length>1&&multiSelect(insertedBlocks[0].clientId,insertedBlocks[insertedBlocks.length-1].clientId)}const isSingleBlock=1===blocks.length,isTemplate=isSingleBlock&&(0,build_module.gc)(blocks[0]),hasPossibleBlockTransformations=!!possibleBlockTransformations.length&&canRemove&&!isTemplate,hasPossibleBlockVariationTransformations=!!blockVariationTransformations?.length,hasPatternTransformation=!!patterns?.length&&canRemove,hasBlockOrBlockVariationTransforms=hasPossibleBlockTransformations||hasPossibleBlockVariationTransformations;if(!(hasBlockStyles||hasBlockOrBlockVariationTransforms||hasPatternTransformation))return(0,jsx_runtime.jsx)("p",{className:"block-editor-block-switcher__no-transforms",children:(0,i18n_build_module.__)("No transforms.")});const connectedBlockDescription=isSingleBlock?(0,i18n_build_module._x)("This block is connected.","block toolbar button label and description"):(0,i18n_build_module._x)("These blocks are connected.","block toolbar button label and description");return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-switcher__container",children:[hasPatternTransformation&&(0,jsx_runtime.jsx)(pattern_transformations_menu,{blocks,patterns,onSelect:transformedBlocks=>{!function onPatternTransform(transformedBlocks){replaceBlocks(clientIds,transformedBlocks),selectForMultipleBlocks(transformedBlocks)}(transformedBlocks),onClose()}}),hasBlockOrBlockVariationTransforms&&(0,jsx_runtime.jsx)(block_transformations_menu,{className:"block-editor-block-switcher__transforms__menugroup",possibleBlockTransformations,possibleBlockVariationTransformations:blockVariationTransformations,blocks,onSelect:name=>{!function onBlockTransform(name){const newBlocks=(0,build_module.bh)(blocks,name);replaceBlocks(clientIds,newBlocks),selectForMultipleBlocks(newBlocks)}(name),onClose()},onSelectVariation:name=>{!function onBlockVariationTransform(name){updateBlockAttributes(blocks[0].clientId,{...blockVariationTransformations.find((({name:variationName})=>variationName===name)).attributes})}(name),onClose()}}),hasBlockStyles&&(0,jsx_runtime.jsx)(BlockStylesMenu,{hoveredBlock:blocks[0],onSwitch:onClose}),isUsingBindings&&(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(text_component.A,{className:"block-editor-block-switcher__binding-indicator",children:connectedBlockDescription})})]})}const BlockIndicator=({icon,showTitle,blockTitle})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_icon,{className:"block-editor-block-switcher__toggle",icon,showColors:!0}),showTitle&&blockTitle&&(0,jsx_runtime.jsx)("span",{className:"block-editor-block-switcher__toggle-text",children:blockTitle})]}),block_switcher=({clientIds})=>{const{hasContentOnlyLocking,canRemove,hasBlockStyles,icon,invalidBlocks,isReusable,isTemplate,isDisabled}=(0,use_select.A)((select=>{const{getTemplateLock,getBlocksByClientId,getBlockAttributes,canRemoveBlocks,getBlockEditingMode}=select(store_store),{getBlockStyles,getBlockType,getActiveBlockVariation}=select(build_module.M_),_blocks=getBlocksByClientId(clientIds);if(!_blocks.length||_blocks.some((block=>!block)))return{invalidBlocks:!0};const[{name:firstBlockName}]=_blocks,_isSingleBlockSelected=1===_blocks.length,blockType=getBlockType(firstBlockName),editingMode=getBlockEditingMode(clientIds[0]);let _icon,_hasTemplateLock;if(_isSingleBlockSelected){const match=getActiveBlockVariation(firstBlockName,getBlockAttributes(clientIds[0]));_icon=match?.icon||blockType.icon,_hasTemplateLock="contentOnly"===getTemplateLock(clientIds[0])}else{const isSelectionOfSameType=1===new Set(_blocks.map((({name})=>name))).size;_hasTemplateLock=clientIds.some((id=>"contentOnly"===getTemplateLock(id))),_icon=isSelectionOfSameType?blockType.icon:copy.A}return{canRemove:canRemoveBlocks(clientIds),hasBlockStyles:_isSingleBlockSelected&&!!getBlockStyles(firstBlockName)?.length,icon:_icon,isReusable:_isSingleBlockSelected&&(0,build_module.tk)(_blocks[0]),isTemplate:_isSingleBlockSelected&&(0,build_module.gc)(_blocks[0]),hasContentOnlyLocking:_hasTemplateLock,isDisabled:"default"!==editingMode}}),[clientIds]),blockTitle=useBlockDisplayTitle({clientId:clientIds?.[0],maximumLength:35});if(invalidBlocks)return null;const isSingleBlock=1===clientIds.length,blockSwitcherLabel=isSingleBlock?blockTitle:(0,i18n_build_module.__)("Multiple blocks selected");if(isDisabled||!hasBlockStyles&&!canRemove||hasContentOnlyLocking)return(0,jsx_runtime.jsx)(toolbar_group.A,{children:(0,jsx_runtime.jsx)(toolbar_button.A,{disabled:!0,className:"block-editor-block-switcher__no-switcher-icon",title:blockSwitcherLabel,icon:(0,jsx_runtime.jsx)(BlockIndicator,{icon,showTitle:isReusable||isTemplate,blockTitle})})});const blockSwitcherDescription=isSingleBlock?(0,i18n_build_module.__)("Change block type or style"):(0,i18n_build_module.nv)((0,i18n_build_module._n)("Change type of %d block","Change type of %d blocks",clientIds.length),clientIds.length);return(0,jsx_runtime.jsx)(toolbar_group.A,{children:(0,jsx_runtime.jsx)(toolbar_item.A,{children:toggleProps=>(0,jsx_runtime.jsx)(dropdown_menu.A,{className:"block-editor-block-switcher",label:blockSwitcherLabel,popoverProps:{placement:"bottom-start",className:"block-editor-block-switcher__popover"},icon:(0,jsx_runtime.jsx)(BlockIndicator,{icon,showTitle:isReusable||isTemplate,blockTitle}),toggleProps:{description:blockSwitcherDescription,...toggleProps},menuProps:{orientation:"both"},children:({onClose})=>(0,jsx_runtime.jsx)(BlockSwitcherDropdownMenuContents,{onClose,clientIds,hasBlockStyles,canRemove})})})})},{Fill:__unstableBlockToolbarLastItem,Slot:block_toolbar_last_item_Slot}=(0,slot_fill.QJ)("__unstableBlockToolbarLastItem");__unstableBlockToolbarLastItem.Slot=block_toolbar_last_item_Slot;const block_toolbar_last_item=__unstableBlockToolbarLastItem,supports_styleSupportKeys=["shadow",...["typography.lineHeight","typography.fontSize","typography.__experimentalFontStyle","typography.__experimentalFontWeight","typography.__experimentalFontFamily","typography.textAlign","typography.textColumns","typography.__experimentalTextDecoration","typography.__experimentalTextTransform","typography.__experimentalWritingMode","typography.__experimentalLetterSpacing"],"__experimentalBorder","color","spacing"];const STYLE_ATTRIBUTES={align:nameOrType=>(0,build_module.pN)(nameOrType,"align"),borderColor:nameOrType=>function supports_hasBorderSupport(nameOrType,feature="any"){if("web"!==platform.A.OS)return!1;const support=(0,build_module.bI)(nameOrType,"__experimentalBorder");return!0===support||("any"===feature?!!(support?.color||support?.radius||support?.width||support?.style):!!support?.[feature])}(nameOrType,"color"),backgroundColor:nameOrType=>{const colorSupport=(0,build_module.bI)(nameOrType,"color");return colorSupport&&!1!==colorSupport.background},textAlign:nameOrType=>(0,build_module.pN)(nameOrType,"typography.textAlign"),textColor:nameOrType=>{const colorSupport=(0,build_module.bI)(nameOrType,"color");return colorSupport&&!1!==colorSupport.text},gradient:nameOrType=>{const colorSupport=(0,build_module.bI)(nameOrType,"color");return null!==colorSupport&&"object"==typeof colorSupport&&!!colorSupport.gradients},className:nameOrType=>(0,build_module.pN)(nameOrType,"customClassName",!0),fontFamily:nameOrType=>(0,build_module.pN)(nameOrType,"typography.__experimentalFontFamily"),fontSize:nameOrType=>(0,build_module.pN)(nameOrType,"typography.fontSize"),layout:nameOrType=>(0,build_module.pN)(nameOrType,"layout"),style:nameOrType=>supports_styleSupportKeys.some((key=>(0,build_module.pN)(nameOrType,key)))};function getStyleAttributes(sourceBlock,targetBlock){return Object.entries(STYLE_ATTRIBUTES).reduce(((attributes,[attributeKey,hasSupport])=>(hasSupport(sourceBlock.name)&&hasSupport(targetBlock.name)&&(attributes[attributeKey]=sourceBlock.attributes[attributeKey]),attributes)),{})}function recursivelyUpdateBlockAttributes(targetBlocks,sourceBlocks,updateBlockAttributes){for(let index=0;index<Math.min(sourceBlocks.length,targetBlocks.length);index+=1)updateBlockAttributes(targetBlocks[index].clientId,getStyleAttributes(sourceBlocks[index],targetBlocks[index])),recursivelyUpdateBlockAttributes(targetBlocks[index].innerBlocks,sourceBlocks[index].innerBlocks,updateBlockAttributes)}function usePasteStyles(){const registry=(0,use_registry.A)(),{updateBlockAttributes}=(0,use_dispatch.A)(store_store),{createSuccessNotice,createWarningNotice,createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M);return(0,react.useCallback)((async targetBlocks=>{let html="";try{if(!window.navigator.clipboard)return void createErrorNotice((0,i18n_build_module.__)("Unable to paste styles. This feature is only available on secure (https) sites in supporting browsers."),{type:"snackbar"});html=await window.navigator.clipboard.readText()}catch(error){return void createErrorNotice((0,i18n_build_module.__)("Unable to paste styles. Please allow browser clipboard permissions before continuing."),{type:"snackbar"})}if(!html||!function hasSerializedBlocks(text){try{const blocks=(0,build_module.qg)(text,{__unstableSkipMigrationLogs:!0,__unstableSkipAutop:!0});return 1!==blocks.length||"core/freeform"!==blocks[0].name}catch(err){return!1}}(html))return void createWarningNotice((0,i18n_build_module.__)("Unable to paste styles. Block styles couldn't be found within the copied content."),{type:"snackbar"});const copiedBlocks=(0,build_module.qg)(html);if(1===copiedBlocks.length?registry.batch((()=>{recursivelyUpdateBlockAttributes(targetBlocks,targetBlocks.map((()=>copiedBlocks[0])),updateBlockAttributes)})):registry.batch((()=>{recursivelyUpdateBlockAttributes(targetBlocks,copiedBlocks,updateBlockAttributes)})),1===targetBlocks.length){const title=(0,build_module.E7)(targetBlocks[0].name)?.title;createSuccessNotice((0,i18n_build_module.nv)((0,i18n_build_module.__)("Pasted styles to %s."),title),{type:"snackbar"})}else createSuccessNotice((0,i18n_build_module.nv)((0,i18n_build_module.__)("Pasted styles to %d blocks."),targetBlocks.length),{type:"snackbar"})}),[registry.batch,updateBlockAttributes,createSuccessNotice,createWarningNotice,createErrorNotice])}function BlockActions({clientIds,children,__experimentalUpdateSelection:updateSelection}){const{getDefaultBlockName,getGroupingBlockName}=(0,use_select.A)(build_module.M_),selected=(0,use_select.A)((select=>{const{canInsertBlockType,getBlockRootClientId,getBlocksByClientId,getDirectInsertBlock,canRemoveBlocks}=select(store_store),blocks=getBlocksByClientId(clientIds),rootClientId=getBlockRootClientId(clientIds[0]),canInsertDefaultBlock=canInsertBlockType(getDefaultBlockName(),rootClientId),directInsertBlock=rootClientId?getDirectInsertBlock(rootClientId):null;return{canRemove:canRemoveBlocks(clientIds),canInsertBlock:canInsertDefaultBlock||!!directInsertBlock,canCopyStyles:blocks.every((block=>!!block&&((0,build_module.pN)(block.name,"color")||(0,build_module.pN)(block.name,"typography")))),canDuplicate:blocks.every((block=>!!block&&(0,build_module.pN)(block.name,"multiple",!0)&&canInsertBlockType(block.name,rootClientId)))}}),[clientIds,getDefaultBlockName]),{getBlocksByClientId,getBlocks}=(0,use_select.A)(store_store),{canRemove,canInsertBlock,canCopyStyles,canDuplicate}=selected,{removeBlocks,replaceBlocks,duplicateBlocks,insertAfterBlock,insertBeforeBlock,flashBlock}=(0,use_dispatch.A)(store_store),notifyCopy=useNotifyCopy(),pasteStyles=usePasteStyles();return children({canCopyStyles,canDuplicate,canInsertBlock,canRemove,onDuplicate:()=>duplicateBlocks(clientIds,updateSelection),onRemove:()=>removeBlocks(clientIds,updateSelection),onInsertBefore(){insertBeforeBlock(clientIds[0])},onInsertAfter(){insertAfterBlock(clientIds[clientIds.length-1])},onGroup(){if(!clientIds.length)return;const groupingBlockName=getGroupingBlockName(),newBlocks=(0,build_module.bh)(getBlocksByClientId(clientIds),groupingBlockName);newBlocks&&replaceBlocks(clientIds,newBlocks)},onUngroup(){if(!clientIds.length)return;const innerBlocks=getBlocks(clientIds[0]);innerBlocks.length&&replaceBlocks(clientIds,innerBlocks)},onCopy(){1===clientIds.length&&flashBlock(clientIds[0]),notifyCopy("copy",clientIds)},async onPasteStyles(){await pasteStyles(getBlocksByClientId(clientIds))}})}const{Fill:__unstableCommentIconFill,Slot:block_comment_icon_slot_Slot}=(0,slot_fill.QJ)("__unstableCommentIconFill");__unstableCommentIconFill.Slot=block_comment_icon_slot_Slot;const block_comment_icon_slot=__unstableCommentIconFill;const block_html_convert_button=function BlockHTMLConvertButton({clientId}){const block=(0,use_select.A)((select=>select(store_store).getBlock(clientId)),[clientId]),{replaceBlocks}=(0,use_dispatch.A)(store_store);return block&&"core/html"===block.name?(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>replaceBlocks(clientId,(0,build_module.lh)({HTML:(0,build_module.F8)(block)})),children:(0,i18n_build_module.__)("Convert to Blocks")}):null},{Fill:__unstableBlockSettingsMenuFirstItem,Slot:block_settings_menu_first_item_Slot}=(0,slot_fill.QJ)("__unstableBlockSettingsMenuFirstItem");__unstableBlockSettingsMenuFirstItem.Slot=block_settings_menu_first_item_Slot;const block_settings_menu_first_item=__unstableBlockSettingsMenuFirstItem;function useConvertToGroupButtonProps(selectedClientIds){return(0,use_select.A)((select=>{const{getBlocksByClientId,getSelectedBlockClientIds,isUngroupable,isGroupable}=select(store_store),{getGroupingBlockName,getBlockType}=select(build_module.M_),clientIds=selectedClientIds?.length?selectedClientIds:getSelectedBlockClientIds(),blocksSelection=getBlocksByClientId(clientIds),[firstSelectedBlock]=blocksSelection,_isUngroupable=1===clientIds.length&&isUngroupable(clientIds[0]);return{clientIds,isGroupable:isGroupable(clientIds),isUngroupable:_isUngroupable,blocksSelection,groupingBlockName:getGroupingBlockName(),onUngroup:_isUngroupable&&getBlockType(firstSelectedBlock.name)?.transforms?.ungroup}}),[selectedClientIds])}function ConvertToGroupButton({clientIds,isGroupable,isUngroupable,onUngroup,blocksSelection,groupingBlockName,onClose=()=>{}}){const{getSelectedBlockClientIds}=(0,use_select.A)(store_store),{replaceBlocks}=(0,use_dispatch.A)(store_store);if(!isGroupable&&!isUngroupable)return null;const selectedBlockClientIds=getSelectedBlockClientIds();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isGroupable&&(0,jsx_runtime.jsx)(menu_item.A,{shortcut:selectedBlockClientIds.length>1?keycodes_build_module.dz.primary("g"):void 0,onClick:()=>{(()=>{const newBlocks=(0,build_module.bh)(blocksSelection,groupingBlockName);newBlocks&&replaceBlocks(clientIds,newBlocks)})(),onClose()},children:(0,i18n_build_module._x)("Group","verb")}),isUngroupable&&(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{(()=>{let innerBlocks=blocksSelection[0].innerBlocks;innerBlocks.length&&(onUngroup&&(innerBlocks=onUngroup(blocksSelection[0].attributes,blocksSelection[0].innerBlocks)),replaceBlocks(clientIds,innerBlocks))})(),onClose()},children:(0,i18n_build_module._x)("Ungroup","Ungrouping blocks from within a grouping block back into individual blocks within the Editor")})]})}function useBlockLock(clientId){return(0,use_select.A)((select=>{const{canEditBlock,canMoveBlock,canRemoveBlock,canLockBlockType,getBlockName,getTemplateLock}=select(store_store),canEdit=canEditBlock(clientId),canMove=canMoveBlock(clientId),canRemove=canRemoveBlock(clientId);return{canEdit,canMove,canRemove,canLock:canLockBlockType(getBlockName(clientId)),isContentLocked:"contentOnly"===getTemplateLock(clientId),isLocked:!canEdit||!canMove||!canRemove}}),[clientId])}const library_unlock=(0,jsx_runtime.jsx)(svg.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8h1.5c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1z"})}),lock_outline=(0,jsx_runtime.jsx)(svg.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zM9.8 7c0-1.2 1-2.2 2.2-2.2 1.2 0 2.2 1 2.2 2.2v3H9.8V7zm6.7 11.5h-9v-7h9v7z"})}),library_lock=(0,jsx_runtime.jsx)(svg.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-2.8 0H9.8V7c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3z"})}),ALLOWS_EDIT_LOCKING=["core/block","core/navigation"];function getTemplateLockValue(lock){return lock.remove&&lock.move?"all":!(!lock.remove||lock.move)&&"insert"}function BlockLockModal({clientId,onClose}){const[lock,setLock]=(0,react.useState)({move:!1,remove:!1}),{canEdit,canMove,canRemove}=useBlockLock(clientId),{allowsEditLocking,templateLock,hasTemplateLock}=(0,use_select.A)((select=>{const{getBlockName,getBlockAttributes}=select(store_store),blockName=getBlockName(clientId),blockType=(0,build_module.E7)(blockName);return{allowsEditLocking:ALLOWS_EDIT_LOCKING.includes(blockName),templateLock:getBlockAttributes(clientId)?.templateLock,hasTemplateLock:!!blockType?.attributes?.templateLock}}),[clientId]),[applyTemplateLock,setApplyTemplateLock]=(0,react.useState)(!!templateLock),{updateBlockAttributes}=(0,use_dispatch.A)(store_store),blockInformation=useBlockDisplayInformation(clientId);(0,react.useEffect)((()=>{setLock({move:!canMove,remove:!canRemove,...allowsEditLocking?{edit:!canEdit}:{}})}),[canEdit,canMove,canRemove,allowsEditLocking]);const isAllChecked=Object.values(lock).every(Boolean),isMixed=Object.values(lock).some(Boolean)&&!isAllChecked;return(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Lock %s"),blockInformation.title),overlayClassName:"block-editor-block-lock-modal",onRequestClose:onClose,children:(0,jsx_runtime.jsxs)("form",{onSubmit:event=>{event.preventDefault(),updateBlockAttributes([clientId],{lock,templateLock:applyTemplateLock?getTemplateLockValue(lock):void 0}),onClose()},children:[(0,jsx_runtime.jsxs)("fieldset",{className:"block-editor-block-lock-modal__options",children:[(0,jsx_runtime.jsx)("legend",{children:(0,i18n_build_module.__)("Choose specific attributes to restrict or lock all available options.")}),(0,jsx_runtime.jsx)("ul",{role:"list",className:"block-editor-block-lock-modal__checklist",children:(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,className:"block-editor-block-lock-modal__options-all",label:(0,i18n_build_module.__)("Lock all"),checked:isAllChecked,indeterminate:isMixed,onChange:newValue=>setLock({move:newValue,remove:newValue,...allowsEditLocking?{edit:newValue}:{}})}),(0,jsx_runtime.jsxs)("ul",{role:"list",className:"block-editor-block-lock-modal__checklist",children:[allowsEditLocking&&(0,jsx_runtime.jsxs)("li",{className:"block-editor-block-lock-modal__checklist-item",children:[(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Restrict editing"),checked:!!lock.edit,onChange:edit=>setLock((prevLock=>({...prevLock,edit})))}),(0,jsx_runtime.jsx)(components_build_module_icon.A,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.edit?library_lock:library_unlock})]}),(0,jsx_runtime.jsxs)("li",{className:"block-editor-block-lock-modal__checklist-item",children:[(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Disable movement"),checked:lock.move,onChange:move=>setLock((prevLock=>({...prevLock,move})))}),(0,jsx_runtime.jsx)(components_build_module_icon.A,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.move?library_lock:library_unlock})]}),(0,jsx_runtime.jsxs)("li",{className:"block-editor-block-lock-modal__checklist-item",children:[(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Prevent removal"),checked:lock.remove,onChange:remove=>setLock((prevLock=>({...prevLock,remove})))}),(0,jsx_runtime.jsx)(components_build_module_icon.A,{className:"block-editor-block-lock-modal__lock-icon",icon:lock.remove?library_lock:library_unlock})]})]})]})}),hasTemplateLock&&(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,className:"block-editor-block-lock-modal__template-lock",label:(0,i18n_build_module.__)("Apply to all blocks inside"),checked:applyTemplateLock,disabled:lock.move&&!lock.remove,onChange:()=>setApplyTemplateLock(!applyTemplateLock)})]}),(0,jsx_runtime.jsxs)(component.A,{className:"block-editor-block-lock-modal__actions",justify:"flex-end",expanded:!1,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:onClose,__next40pxDefaultSize:!0,children:(0,i18n_build_module.__)("Cancel")})}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"primary",type:"submit",__next40pxDefaultSize:!0,children:(0,i18n_build_module.__)("Apply")})})]})]})})}function BlockLockMenuItem({clientId}){const{canLock,isLocked}=useBlockLock(clientId),[isModalOpen,toggleModal]=(0,react.useReducer)((isActive=>!isActive),!1);if(!canLock)return null;const label=isLocked?(0,i18n_build_module.__)("Unlock"):(0,i18n_build_module.__)("Lock");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.A,{icon:isLocked?library_unlock:lock_outline,onClick:toggleModal,"aria-expanded":isModalOpen,"aria-haspopup":"dialog",children:label}),isModalOpen&&(0,jsx_runtime.jsx)(BlockLockModal,{clientId,onClose:toggleModal})]})}const block_mode_toggle_noop=()=>{};function BlockModeToggle({clientId,onToggle=block_mode_toggle_noop}){const{blockType,mode,isCodeEditingEnabled}=(0,use_select.A)((select=>{const{getBlock,getBlockMode,getSettings}=select(store_store),block=getBlock(clientId);return{mode:getBlockMode(clientId),blockType:block?(0,build_module.E7)(block.name):null,isCodeEditingEnabled:getSettings().codeEditingEnabled}}),[clientId]),{toggleBlockMode}=(0,use_dispatch.A)(store_store);if(!blockType||!(0,build_module.pN)(blockType,"html",!0)||!isCodeEditingEnabled)return null;const label="visual"===mode?(0,i18n_build_module.__)("Edit as HTML"):(0,i18n_build_module.__)("Edit visually");return(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{toggleBlockMode(clientId),onToggle()},children:label})}function ModifyContentLockMenuItem({clientId,onClose}){const{templateLock,isLockedByParent,isEditingAsBlocks}=(0,use_select.A)((select=>{const{getContentLockingParent,getTemplateLock,getTemporarilyEditingAsBlocks}=unlock(select(store_store));return{templateLock:getTemplateLock(clientId),isLockedByParent:!!getContentLockingParent(clientId),isEditingAsBlocks:getTemporarilyEditingAsBlocks()===clientId}}),[clientId]),blockEditorActions=(0,use_dispatch.A)(store_store),isContentLocked=!isLockedByParent&&"contentOnly"===templateLock;if(!isContentLocked&&!isEditingAsBlocks)return null;const{modifyContentLockBlock}=unlock(blockEditorActions);return!isEditingAsBlocks&&isContentLocked&&(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{modifyContentLockBlock(clientId),onClose()},children:(0,i18n_build_module._x)("Modify","Unlock content locked blocks")})}function isEmptyString(testString){return 0===testString?.trim()?.length}function BlockRenameModal({blockName,originalBlockName,onClose,onSave,hasOverridesWarning}){const[editedBlockName,setEditedBlockName]=(0,react.useState)(blockName),nameHasChanged=editedBlockName!==blockName,nameIsOriginal=editedBlockName===originalBlockName,nameIsEmpty=isEmptyString(editedBlockName),isNameValid=nameHasChanged||nameIsOriginal;return(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Rename"),onRequestClose:onClose,overlayClassName:"block-editor-block-rename-modal",focusOnMount:"firstContentElement",size:"small",children:(0,jsx_runtime.jsx)("form",{onSubmit:e=>{e.preventDefault(),isNameValid&&(()=>{const message=nameIsOriginal||nameIsEmpty?(0,i18n_build_module.nv)((0,i18n_build_module.__)('Block name reset to: "%s".'),editedBlockName):(0,i18n_build_module.nv)((0,i18n_build_module.__)('Block name changed to: "%s".'),editedBlockName);(0,a11y_build_module.L)(message,"assertive"),onSave(editedBlockName),onClose()})()},children:(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:"3",children:[(0,jsx_runtime.jsx)(text_control.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:editedBlockName,label:(0,i18n_build_module.__)("Name"),help:hasOverridesWarning?(0,i18n_build_module.__)("This block allows overrides. Changing the name can cause problems with content entered into instances of this pattern."):void 0,placeholder:originalBlockName,onChange:setEditedBlockName,onFocus:event=>event.target.select()}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:onClose,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,"aria-disabled":!isNameValid,variant:"primary",type:"submit",children:(0,i18n_build_module.__)("Save")})]})]})})})}function BlockRenameControl({clientId}){const[renamingBlock,setRenamingBlock]=(0,react.useState)(!1),{metadata}=(0,use_select.A)((select=>{const{getBlockAttributes}=select(store_store),_metadata=getBlockAttributes(clientId)?.metadata;return{metadata:_metadata}}),[clientId]),{updateBlockAttributes}=(0,use_dispatch.A)(store_store),customName=metadata?.name,hasPatternOverrides=!!customName&&!!metadata?.bindings&&Object.values(metadata.bindings).some((binding=>"core/pattern-overrides"===binding.source));const blockInformation=useBlockDisplayInformation(clientId);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{setRenamingBlock(!0)},"aria-expanded":renamingBlock,"aria-haspopup":"dialog",children:(0,i18n_build_module.__)("Rename")}),renamingBlock&&(0,jsx_runtime.jsx)(BlockRenameModal,{blockName:customName||"",originalBlockName:blockInformation?.title,hasOverridesWarning:hasPatternOverrides,onClose:()=>setRenamingBlock(!1),onSave:newName=>{(newName===blockInformation?.title||isEmptyString(newName))&&(newName=void 0),function onChange(newName){updateBlockAttributes([clientId],{metadata:{...metadata,name:newName}})}(newName)}})]})}const{Fill,Slot:block_settings_menu_controls_Slot}=(0,slot_fill.QJ)("BlockSettingsMenuControls");function BlockSettingsMenuControls({...props}){return(0,jsx_runtime.jsx)(style_provider.A,{document,children:(0,jsx_runtime.jsx)(Fill,{...props})})}BlockSettingsMenuControls.Slot=({fillProps,clientIds=null})=>{const{selectedBlocks,selectedClientIds,isContentOnly}=(0,use_select.A)((select=>{const{getBlockNamesByClientId,getSelectedBlockClientIds,getBlockEditingMode}=select(store_store),ids=null!==clientIds?clientIds:getSelectedBlockClientIds();return{selectedBlocks:getBlockNamesByClientId(ids),selectedClientIds:ids,isContentOnly:"contentOnly"===getBlockEditingMode(ids[0])}}),[clientIds]),{canLock}=useBlockLock(selectedClientIds[0]),{canRename}=function useBlockRename(name){return{canRename:(0,build_module.bI)(name,"renaming",!0)}}(selectedBlocks[0]),showLockButton=1===selectedClientIds.length&&canLock&&!isContentOnly,showRenameButton=1===selectedClientIds.length&&canRename&&!isContentOnly,convertToGroupButtonProps=useConvertToGroupButtonProps(selectedClientIds),{isGroupable,isUngroupable}=convertToGroupButtonProps,showConvertToGroupButton=isGroupable||isUngroupable;return(0,jsx_runtime.jsx)(block_settings_menu_controls_Slot,{fillProps:{...fillProps,selectedBlocks,selectedClientIds},children:fills=>!fills?.length>0&&!showConvertToGroupButton&&!showLockButton?null:(0,jsx_runtime.jsxs)(menu_group.A,{children:[showConvertToGroupButton&&(0,jsx_runtime.jsx)(ConvertToGroupButton,{...convertToGroupButtonProps,onClose:fillProps?.onClose}),showLockButton&&(0,jsx_runtime.jsx)(BlockLockMenuItem,{clientId:selectedClientIds[0]}),showRenameButton&&(0,jsx_runtime.jsx)(BlockRenameControl,{clientId:selectedClientIds[0]}),fills,1===selectedClientIds.length&&(0,jsx_runtime.jsx)(ModifyContentLockMenuItem,{clientId:selectedClientIds[0],onClose:fillProps?.onClose}),1===fillProps?.count&&!isContentOnly&&(0,jsx_runtime.jsx)(BlockModeToggle,{clientId:fillProps?.firstBlockClientId,onToggle:fillProps?.onClose})]})})};const block_settings_menu_controls=BlockSettingsMenuControls;function BlockParentSelectorMenuItem({parentClientId,parentBlockType}){const isSmallViewport=(0,use_viewport_match.A)("medium","<"),{selectBlock}=(0,use_dispatch.A)(store_store),menuItemRef=(0,react.useRef)(),gesturesProps=useShowHoveredOrFocusedGestures({ref:menuItemRef,highlightParent:!0});return isSmallViewport?(0,jsx_runtime.jsx)(menu_item.A,{...gesturesProps,ref:menuItemRef,icon:(0,jsx_runtime.jsx)(block_icon,{icon:parentBlockType.icon}),onClick:()=>selectBlock(parentClientId),children:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Select parent block (%s)"),parentBlockType.title)}):null}const block_settings_dropdown_POPOVER_PROPS={className:"block-editor-block-settings-menu__popover",placement:"bottom-start"};function CopyMenuItem({clientIds,onCopy,label,shortcut}){const{getBlocksByClientId}=(0,use_select.A)(store_store),ref=(0,use_copy_to_clipboard.A)((()=>(0,build_module.lK)(getBlocksByClientId(clientIds))),onCopy),copyMenuItemLabel=label||(0,i18n_build_module.__)("Copy");return(0,jsx_runtime.jsx)(menu_item.A,{ref,shortcut,children:copyMenuItemLabel})}function BlockSettingsDropdown({block,clientIds,children,__experimentalSelectBlock,...props}){const currentClientId=block?.clientId,count=clientIds.length,firstBlockClientId=clientIds[0],{firstParentClientId,parentBlockType,previousBlockClientId,selectedBlockClientIds,openedBlockSettingsMenu,isContentOnly}=(0,use_select.A)((select=>{const{getBlockName,getBlockRootClientId,getPreviousBlockClientId,getSelectedBlockClientIds,getBlockAttributes,getOpenedBlockSettingsMenu,getBlockEditingMode}=unlock(select(store_store)),{getActiveBlockVariation}=select(build_module.M_),_firstParentClientId=getBlockRootClientId(firstBlockClientId),parentBlockName=_firstParentClientId&&getBlockName(_firstParentClientId);return{firstParentClientId:_firstParentClientId,parentBlockType:_firstParentClientId&&(getActiveBlockVariation(parentBlockName,getBlockAttributes(_firstParentClientId))||(0,build_module.E7)(parentBlockName)),previousBlockClientId:getPreviousBlockClientId(firstBlockClientId),selectedBlockClientIds:getSelectedBlockClientIds(),openedBlockSettingsMenu:getOpenedBlockSettingsMenu(),isContentOnly:"contentOnly"===getBlockEditingMode(firstBlockClientId)}}),[firstBlockClientId]),{getBlockOrder,getSelectedBlockClientIds}=(0,use_select.A)(store_store),{setOpenedBlockSettingsMenu}=unlock((0,use_dispatch.A)(store_store)),shortcuts=(0,use_select.A)((select=>{const{getShortcutRepresentation}=select(keyboard_shortcuts_build_module.M_);return{duplicate:getShortcutRepresentation("core/block-editor/duplicate"),remove:getShortcutRepresentation("core/block-editor/remove"),insertAfter:getShortcutRepresentation("core/block-editor/insert-after"),insertBefore:getShortcutRepresentation("core/block-editor/insert-before")}}),[]),hasSelectedBlocks=selectedBlockClientIds.length>0;async function updateSelectionAfterDuplicate(clientIdsPromise){if(!__experimentalSelectBlock)return;const ids=await clientIdsPromise;ids&&ids[0]&&__experimentalSelectBlock(ids[0],!1)}function updateSelectionAfterRemove(){if(!__experimentalSelectBlock)return;let blockToFocus=previousBlockClientId||firstParentClientId;blockToFocus||(blockToFocus=getBlockOrder()[0]);const shouldUpdateSelection=hasSelectedBlocks&&0===getSelectedBlockClientIds().length;__experimentalSelectBlock(blockToFocus,shouldUpdateSelection)}const parentBlockIsSelected=selectedBlockClientIds?.includes(firstParentClientId),open=currentClientId?openedBlockSettingsMenu===currentClientId||!1:void 0;function onToggle(localOpen){localOpen&&openedBlockSettingsMenu!==currentClientId?setOpenedBlockSettingsMenu(currentClientId):!localOpen&&openedBlockSettingsMenu&&openedBlockSettingsMenu===currentClientId&&setOpenedBlockSettingsMenu(void 0)}const shouldShowBlockParentMenuItem=!parentBlockIsSelected&&!!firstParentClientId;return(0,jsx_runtime.jsx)(BlockActions,{clientIds,__experimentalUpdateSelection:!__experimentalSelectBlock,children:({canCopyStyles,canDuplicate,canInsertBlock,canRemove,onDuplicate,onInsertAfter,onInsertBefore,onRemove,onCopy,onPasteStyles})=>!canRemove&&!canDuplicate&&!canInsertBlock&&isContentOnly?null:(0,jsx_runtime.jsx)(dropdown_menu.A,{icon:more_vertical.A,label:(0,i18n_build_module.__)("Options"),className:"block-editor-block-settings-menu",popoverProps:block_settings_dropdown_POPOVER_PROPS,open,onToggle,noIcons:!0,...props,children:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu_group.A,{children:[(0,jsx_runtime.jsx)(block_settings_menu_first_item.Slot,{fillProps:{onClose}}),shouldShowBlockParentMenuItem&&(0,jsx_runtime.jsx)(BlockParentSelectorMenuItem,{parentClientId:firstParentClientId,parentBlockType}),1===count&&(0,jsx_runtime.jsx)(block_html_convert_button,{clientId:firstBlockClientId}),!isContentOnly&&(0,jsx_runtime.jsx)(CopyMenuItem,{clientIds,onCopy,shortcut:keycodes_build_module.dz.primary("c")}),canDuplicate&&(0,jsx_runtime.jsx)(menu_item.A,{onClick:(0,pipe.h)(onClose,onDuplicate,updateSelectionAfterDuplicate),shortcut:shortcuts.duplicate,children:(0,i18n_build_module.__)("Duplicate")}),canInsertBlock&&!isContentOnly&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.A,{onClick:(0,pipe.h)(onClose,onInsertBefore),shortcut:shortcuts.insertBefore,children:(0,i18n_build_module.__)("Add before")}),(0,jsx_runtime.jsx)(menu_item.A,{onClick:(0,pipe.h)(onClose,onInsertAfter),shortcut:shortcuts.insertAfter,children:(0,i18n_build_module.__)("Add after")})]}),(0,jsx_runtime.jsx)(block_comment_icon_slot.Slot,{fillProps:{onClose}})]}),canCopyStyles&&!isContentOnly&&(0,jsx_runtime.jsxs)(menu_group.A,{children:[(0,jsx_runtime.jsx)(CopyMenuItem,{clientIds,onCopy,label:(0,i18n_build_module.__)("Copy styles")}),(0,jsx_runtime.jsx)(menu_item.A,{onClick:onPasteStyles,children:(0,i18n_build_module.__)("Paste styles")})]}),(0,jsx_runtime.jsx)(block_settings_menu_controls.Slot,{fillProps:{onClose,count,firstBlockClientId},clientIds}),"function"==typeof children?children({onClose}):react.Children.map((child=>(0,react.cloneElement)(child,{onClose}))),canRemove&&(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(menu_item.A,{onClick:(0,pipe.h)(onClose,onRemove,updateSelectionAfterRemove),shortcut:shortcuts.remove,children:(0,i18n_build_module.__)("Delete")})})]})})})}const block_settings_dropdown=BlockSettingsDropdown,{Fill:__unstableCommentIconToolbarFill,Slot:block_comment_icon_toolbar_slot_Slot}=(0,slot_fill.QJ)("__unstableCommentIconToolbarFill");__unstableCommentIconToolbarFill.Slot=block_comment_icon_toolbar_slot_Slot;const block_comment_icon_toolbar_slot=__unstableCommentIconToolbarFill;const block_settings_menu=function BlockSettingsMenu({clientIds,...props}){return(0,jsx_runtime.jsxs)(toolbar_group.A,{children:[(0,jsx_runtime.jsx)(block_comment_icon_toolbar_slot.Slot,{}),(0,jsx_runtime.jsx)(toolbar_item.A,{children:toggleProps=>(0,jsx_runtime.jsx)(block_settings_dropdown,{clientIds,toggleProps,...props})})]})};function BlockLockToolbar({clientId}){const{canLock,isLocked}=useBlockLock(clientId),[isModalOpen,toggleModal]=(0,react.useReducer)((isActive=>!isActive),!1),hasLockButtonShownRef=(0,react.useRef)(!1);if((0,react.useEffect)((()=>{isLocked&&(hasLockButtonShownRef.current=!0)}),[isLocked]),!isLocked&&!hasLockButtonShownRef.current)return null;let label=isLocked?(0,i18n_build_module.__)("Unlock"):(0,i18n_build_module.__)("Lock");return!canLock&&isLocked&&(label=(0,i18n_build_module.__)("Locked")),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(toolbar_group.A,{className:"block-editor-block-lock-toolbar",children:(0,jsx_runtime.jsx)(toolbar_button.A,{disabled:!canLock,icon:isLocked?library_lock:library_unlock,label,onClick:toggleModal,"aria-expanded":isModalOpen,"aria-haspopup":"dialog"})}),isModalOpen&&(0,jsx_runtime.jsx)(BlockLockModal,{clientId,onClose:toggleModal})]})}var library_group=__webpack_require__("./packages/icons/build-module/library/group.js"),row=__webpack_require__("./packages/icons/build-module/library/row.js"),stack=__webpack_require__("./packages/icons/build-module/library/stack.js"),library_grid=__webpack_require__("./packages/icons/build-module/library/grid.js");const layouts={group:{type:"constrained"},row:{type:"flex",flexWrap:"nowrap"},stack:{type:"flex",orientation:"vertical"},grid:{type:"grid"}};const toolbar=function BlockGroupToolbar(){const{blocksSelection,clientIds,groupingBlockName,isGroupable}=useConvertToGroupButtonProps(),{replaceBlocks}=(0,use_dispatch.A)(store_store),{canRemove,variations}=(0,use_select.A)((select=>{const{canRemoveBlocks}=select(store_store),{getBlockVariations}=select(build_module.M_);return{canRemove:canRemoveBlocks(clientIds),variations:getBlockVariations(groupingBlockName,"transform")}}),[clientIds,groupingBlockName]),onConvertToGroup=layout=>{const newBlocks=(0,build_module.bh)(blocksSelection,groupingBlockName);"string"!=typeof layout&&(layout="group"),newBlocks&&newBlocks.length>0&&(newBlocks[0].attributes.layout=layouts[layout],replaceBlocks(clientIds,newBlocks))};if(!isGroupable||!canRemove)return null;const canInsertRow=!!variations.find((({name})=>"group-row"===name)),canInsertStack=!!variations.find((({name})=>"group-stack"===name)),canInsertGrid=!!variations.find((({name})=>"group-grid"===name));return(0,jsx_runtime.jsxs)(toolbar_group.A,{children:[(0,jsx_runtime.jsx)(toolbar_button.A,{icon:library_group.A,label:(0,i18n_build_module._x)("Group","action: convert blocks to group"),onClick:onConvertToGroup}),canInsertRow&&(0,jsx_runtime.jsx)(toolbar_button.A,{icon:row.A,label:(0,i18n_build_module._x)("Row","action: convert blocks to row"),onClick:()=>onConvertToGroup("row")}),canInsertStack&&(0,jsx_runtime.jsx)(toolbar_button.A,{icon:stack.A,label:(0,i18n_build_module._x)("Stack","action: convert blocks to stack"),onClick:()=>onConvertToGroup("stack")}),canInsertGrid&&(0,jsx_runtime.jsx)(toolbar_button.A,{icon:library_grid.A,label:(0,i18n_build_module._x)("Grid","action: convert blocks to grid"),onClick:()=>onConvertToGroup("grid")})]})};function BlockEditVisuallyButton({clientIds}){const clientId=1===clientIds.length?clientIds[0]:void 0,canEditVisually=(0,use_select.A)((select=>!!clientId&&"html"===select(store_store).getBlockMode(clientId)),[clientId]),{toggleBlockMode}=(0,use_dispatch.A)(store_store);return canEditVisually?(0,jsx_runtime.jsx)(toolbar_group.A,{children:(0,jsx_runtime.jsx)(toolbar_button.A,{onClick:()=>{toggleBlockMode(clientId)},children:(0,i18n_build_module.__)("Edit visually")})}):null}const block_name_context=(0,react.createContext)("");var toolbar_toolbar=__webpack_require__("./packages/components/build-module/toolbar/toolbar/index.js");function getAllFocusableToolbarItemsIn(container){return Array.from(container.querySelectorAll("[data-toolbar-item]:not([disabled])"))}function hasFocusWithin(container){return container.contains(container.ownerDocument.activeElement)}function useToolbarFocus({toolbarRef,focusOnMount,isAccessibleToolbar,defaultIndex,onIndexChange,shouldUseKeyboardFocusShortcut,focusEditorOnEscape}){const[initialFocusOnMount]=(0,react.useState)(focusOnMount),[initialIndex]=(0,react.useState)(defaultIndex),focusToolbar=(0,react.useCallback)((()=>{!function focusFirstTabbableIn(container){const[firstTabbable]=dom_build_module.XC.tabbable.find(container);firstTabbable&&firstTabbable.focus({preventScroll:!0})}(toolbarRef.current)}),[toolbarRef]);(0,keyboard_shortcuts_build_module.wk)("core/block-editor/focus-toolbar",(()=>{shouldUseKeyboardFocusShortcut&&focusToolbar()})),(0,react.useEffect)((()=>{initialFocusOnMount&&focusToolbar()}),[isAccessibleToolbar,initialFocusOnMount,focusToolbar]),(0,react.useEffect)((()=>{const navigableToolbarRef=toolbarRef.current;let raf=0;return initialFocusOnMount||hasFocusWithin(navigableToolbarRef)||(raf=window.requestAnimationFrame((()=>{const items=getAllFocusableToolbarItemsIn(navigableToolbarRef),index=initialIndex||0;items[index]&&hasFocusWithin(navigableToolbarRef)&&items[index].focus({preventScroll:!0})}))),()=>{if(window.cancelAnimationFrame(raf),!onIndexChange||!navigableToolbarRef)return;const index=getAllFocusableToolbarItemsIn(navigableToolbarRef).findIndex((item=>0===item.tabIndex));onIndexChange(index)}}),[initialIndex,initialFocusOnMount,onIndexChange,toolbarRef]);const{getLastFocus}=unlock((0,use_select.A)(store_store));(0,react.useEffect)((()=>{const navigableToolbarRef=toolbarRef.current;if(focusEditorOnEscape){const handleKeyDown=event=>{const lastFocus=getLastFocus();event.keyCode===keycodes_build_module._f&&lastFocus?.current&&(event.preventDefault(),lastFocus.current.focus())};return navigableToolbarRef.addEventListener("keydown",handleKeyDown),()=>{navigableToolbarRef.removeEventListener("keydown",handleKeyDown)}}}),[focusEditorOnEscape,getLastFocus,toolbarRef])}function NavigableToolbar({children,focusOnMount,focusEditorOnEscape=!1,shouldUseKeyboardFocusShortcut=!0,__experimentalInitialIndex:initialIndex,__experimentalOnIndexChange:onIndexChange,orientation="horizontal",...props}){const toolbarRef=(0,react.useRef)(),isAccessibleToolbar=function useIsAccessibleToolbar(toolbarRef){const[isAccessibleToolbar,setIsAccessibleToolbar]=(0,react.useState)(!0),determineIsAccessibleToolbar=(0,react.useCallback)((()=>{const onlyToolbarItem=function hasOnlyToolbarItem(elements){return!elements.some((element=>!("toolbarItem"in element.dataset)))}(dom_build_module.XC.tabbable.find(toolbarRef.current));onlyToolbarItem||(0,deprecated_build_module.A)("Using custom components as toolbar controls",{since:"5.6",alternative:"ToolbarItem, ToolbarButton or ToolbarDropdownMenu components",link:"https://developer.wordpress.org/block-editor/components/toolbar-button/#inside-blockcontrols"}),setIsAccessibleToolbar(onlyToolbarItem)}),[toolbarRef]);return(0,react.useLayoutEffect)((()=>{const observer=new window.MutationObserver(determineIsAccessibleToolbar);return observer.observe(toolbarRef.current,{childList:!0,subtree:!0}),()=>observer.disconnect()}),[determineIsAccessibleToolbar,isAccessibleToolbar,toolbarRef]),isAccessibleToolbar}(toolbarRef);return useToolbarFocus({toolbarRef,focusOnMount,defaultIndex:initialIndex,onIndexChange,isAccessibleToolbar,shouldUseKeyboardFocusShortcut,focusEditorOnEscape}),isAccessibleToolbar?(0,jsx_runtime.jsx)(toolbar_toolbar.A,{label:props["aria-label"],ref:toolbarRef,orientation,...props,children}):(0,jsx_runtime.jsx)(menu.Ay,{orientation,role:"toolbar",ref:toolbarRef,...props,children})}function useHasBlockToolbar(){const{isToolbarEnabled,isBlockDisabled}=(0,use_select.A)((select=>{const{getBlockEditingMode,getBlockName,getBlockSelectionStart}=select(store_store),selectedBlockClientId=getBlockSelectionStart(),blockType=selectedBlockClientId&&(0,build_module.E7)(getBlockName(selectedBlockClientId));return{isToolbarEnabled:blockType&&(0,build_module.pN)(blockType,"__experimentalToolbar",!0),isBlockDisabled:"disabled"===getBlockEditingMode(selectedBlockClientId)}}),[]);return!(!isToolbarEnabled||isBlockDisabled)}var shuffle=__webpack_require__("./packages/icons/build-module/library/shuffle.js");const shuffle_EMPTY_ARRAY=[];function shuffle_Container(props){return(0,jsx_runtime.jsx)(toolbar_group.A,{children:(0,jsx_runtime.jsx)(toolbar_button.A,{...props})})}function Shuffle({clientId,as=shuffle_Container}){const{categories,patterns,patternName}=(0,use_select.A)((select=>{const{getBlockAttributes,getBlockRootClientId,__experimentalGetAllowedPatterns}=select(store_store),attributes=getBlockAttributes(clientId),_categories=attributes?.metadata?.categories||shuffle_EMPTY_ARRAY,_patternName=attributes?.metadata?.patternName,rootBlock=getBlockRootClientId(clientId);return{categories:_categories,patterns:_categories.length>0?__experimentalGetAllowedPatterns(rootBlock):shuffle_EMPTY_ARRAY,patternName:_patternName}}),[clientId]),{replaceBlocks}=(0,use_dispatch.A)(store_store),sameCategoryPatternsWithSingleWrapper=(0,react.useMemo)((()=>0!==categories.length&&patterns&&0!==patterns.length?patterns.filter((pattern=>{const isCorePattern="core"===pattern.source||pattern.source?.startsWith("pattern-directory")&&"pattern-directory/theme"!==pattern.source;return 1===pattern.blocks.length&&!isCorePattern&&pattern.categories?.some((category=>categories.includes(category)))&&("unsynced"===pattern.syncStatus||!pattern.id)})):shuffle_EMPTY_ARRAY),[categories,patterns]);if(sameCategoryPatternsWithSingleWrapper.length<2)return null;const ComponentToUse=as;return(0,jsx_runtime.jsx)(ComponentToUse,{label:(0,i18n_build_module.__)("Shuffle"),icon:shuffle.A,className:"block-editor-block-toolbar-shuffle",onClick:()=>{const nextPattern=function getNextPattern(){const numberOfPatterns=sameCategoryPatternsWithSingleWrapper.length,patternIndex=sameCategoryPatternsWithSingleWrapper.findIndex((({name})=>name===patternName));return sameCategoryPatternsWithSingleWrapper[patternIndex+1<numberOfPatterns?patternIndex+1:0]}();nextPattern.blocks[0].attributes={...nextPattern.blocks[0].attributes,metadata:{...nextPattern.blocks[0].attributes.metadata,categories}},replaceBlocks(clientId,nextPattern.blocks)}})}function PrivateBlockToolbar({hideDragHandle,focusOnMount,__experimentalInitialIndex,__experimentalOnIndexChange,variant="unstyled"}){const{blockClientId,blockClientIds,isDefaultEditingMode,blockType,toolbarKey,shouldShowVisualToolbar,showParentSelector,isUsingBindings,hasParentPattern,hasContentOnlyLocking,showShuffleButton,showSlots,showGroupButtons,showLockButtons}=(0,use_select.A)((select=>{const{getBlockName,getBlockMode,getBlockParents,getSelectedBlockClientIds,isBlockValid,getBlockEditingMode,getBlockAttributes,getBlockParentsByBlockName,getTemplateLock,getParentSectionBlock,isZoomOut}=unlock(select(store_store)),selectedBlockClientIds=getSelectedBlockClientIds(),selectedBlockClientId=selectedBlockClientIds[0],parents=getBlockParents(selectedBlockClientId),parentSection=getParentSectionBlock(selectedBlockClientId),parentClientId=null!=parentSection?parentSection:parents[parents.length-1],parentBlockName=getBlockName(parentClientId),parentBlockType=(0,build_module.E7)(parentBlockName),_isDefaultEditingMode="default"===getBlockEditingMode(selectedBlockClientId),_blockName=getBlockName(selectedBlockClientId),isValid=selectedBlockClientIds.every((id=>isBlockValid(id))),isVisual=selectedBlockClientIds.every((id=>"visual"===getBlockMode(id))),_isUsingBindings=selectedBlockClientIds.every((clientId=>!!getBlockAttributes(clientId)?.metadata?.bindings)),_hasParentPattern=selectedBlockClientIds.every((clientId=>getBlockParentsByBlockName(clientId,"core/block",!0).length>0)),_hasTemplateLock=selectedBlockClientIds.some((id=>"contentOnly"===getTemplateLock(id)));return{blockClientId:selectedBlockClientId,blockClientIds:selectedBlockClientIds,isDefaultEditingMode:_isDefaultEditingMode,blockType:selectedBlockClientId&&(0,build_module.E7)(_blockName),shouldShowVisualToolbar:isValid&&isVisual,toolbarKey:`${selectedBlockClientId}${parentClientId}`,showParentSelector:!isZoomOut()&&parentBlockType&&"disabled"!==getBlockEditingMode(parentClientId)&&(0,build_module.pN)(parentBlockType,"__experimentalParentSelector",!0)&&1===selectedBlockClientIds.length,isUsingBindings:_isUsingBindings,hasParentPattern:_hasParentPattern,hasContentOnlyLocking:_hasTemplateLock,showShuffleButton:isZoomOut(),showSlots:!isZoomOut(),showGroupButtons:!isZoomOut(),showLockButtons:!isZoomOut()}}),[]),toolbarWrapperRef=(0,react.useRef)(null),nodeRef=(0,react.useRef)(),showHoveredOrFocusedGestures=useShowHoveredOrFocusedGestures({ref:nodeRef}),isLargeViewport=!(0,use_viewport_match.A)("medium","<");if(!useHasBlockToolbar())return null;const isMultiToolbar=blockClientIds.length>1,isSynced=(0,build_module.tk)(blockType)||(0,build_module.gc)(blockType),classes=(0,clsx.A)("block-editor-block-contextual-toolbar",{"has-parent":showParentSelector}),innerClasses=(0,clsx.A)("block-editor-block-toolbar",{"is-synced":isSynced,"is-connected":isUsingBindings});return(0,jsx_runtime.jsx)(NavigableToolbar,{focusEditorOnEscape:!0,className:classes,"aria-label":(0,i18n_build_module.__)("Block tools"),variant:"toolbar"===variant?void 0:variant,focusOnMount,__experimentalInitialIndex,__experimentalOnIndexChange,children:(0,jsx_runtime.jsxs)("div",{ref:toolbarWrapperRef,className:innerClasses,children:[showParentSelector&&!isMultiToolbar&&isLargeViewport&&(0,jsx_runtime.jsx)(BlockParentSelector,{}),(shouldShowVisualToolbar||isMultiToolbar)&&!hasParentPattern&&(0,jsx_runtime.jsx)("div",{ref:nodeRef,...showHoveredOrFocusedGestures,children:(0,jsx_runtime.jsxs)(toolbar_group.A,{className:"block-editor-block-toolbar__block-controls",children:[(0,jsx_runtime.jsx)(block_switcher,{clientIds:blockClientIds}),!isMultiToolbar&&isDefaultEditingMode&&showLockButtons&&(0,jsx_runtime.jsx)(BlockLockToolbar,{clientId:blockClientId}),(0,jsx_runtime.jsx)(block_mover,{clientIds:blockClientIds,hideDragHandle})]})}),!hasContentOnlyLocking&&shouldShowVisualToolbar&&isMultiToolbar&&showGroupButtons&&(0,jsx_runtime.jsx)(toolbar,{}),showShuffleButton&&(0,jsx_runtime.jsx)(toolbar_group.A,{children:(0,jsx_runtime.jsx)(Shuffle,{clientId:blockClientIds[0],as:toolbar_button.A})}),shouldShowVisualToolbar&&showSlots&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_controls.Slot,{group:"parent",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{group:"block",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{group:"inline",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_controls.Slot,{group:"other",className:"block-editor-block-toolbar__slot"}),(0,jsx_runtime.jsx)(block_name_context.Provider,{value:blockType?.name,children:(0,jsx_runtime.jsx)(block_toolbar_last_item.Slot,{})})]}),(0,jsx_runtime.jsx)(BlockEditVisuallyButton,{clientIds:blockClientIds}),(0,jsx_runtime.jsx)(block_settings_menu,{clientIds:blockClientIds})]})},toolbarKey)}function BlockToolbar({hideDragHandle,variant}){return(0,jsx_runtime.jsx)(PrivateBlockToolbar,{hideDragHandle,variant,focusOnMount:void 0,__experimentalInitialIndex:void 0,__experimentalOnIndexChange:void 0})}function BlockToolbarPopover({clientId,isTyping,__unstableContentRef}){const{capturingClientId,isInsertionPointVisible,lastClientId}=useSelectedBlockToolProps(clientId),initialToolbarItemIndexRef=(0,react.useRef)();(0,react.useEffect)((()=>{initialToolbarItemIndexRef.current=void 0}),[clientId]);const{stopTyping}=(0,use_dispatch.A)(store_store),isToolbarForcedRef=(0,react.useRef)(!1);(0,keyboard_shortcuts_build_module.wk)("core/block-editor/focus-toolbar",(()=>{isToolbarForcedRef.current=!0,stopTyping(!0)})),(0,react.useEffect)((()=>{isToolbarForcedRef.current=!1}));const clientIdToPositionOver=capturingClientId||clientId,popoverProps=useBlockToolbarPopoverProps({contentElement:__unstableContentRef?.current,clientId:clientIdToPositionOver});return!isTyping&&(0,jsx_runtime.jsx)(block_popover,{clientId:clientIdToPositionOver,bottomClientId:lastClientId,className:(0,clsx.A)("block-editor-block-list__block-popover",{"is-insertion-point-visible":isInsertionPointVisible}),resize:!1,...popoverProps,children:(0,jsx_runtime.jsx)(PrivateBlockToolbar,{focusOnMount:isToolbarForcedRef.current,__experimentalInitialIndex:initialToolbarItemIndexRef.current,__experimentalOnIndexChange:index=>{initialToolbarItemIndexRef.current=index},variant:"toolbar"})})}const zoom_out_mode_inserter_button=function ZoomOutModeInserterButton({onClick}){return(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"primary",icon:plus.A,size:"compact",className:(0,clsx.A)("block-editor-button-pattern-inserter__button","block-editor-block-tools__zoom-out-mode-inserter-button"),onClick,label:(0,i18n_build_module._x)("Add pattern","Generic label for pattern inserter button")})};const zoom_out_mode_inserters=function ZoomOutModeInserters(){const[isReady,setIsReady]=(0,react.useState)(!1),{hasSelection,blockOrder,setInserterIsOpened,sectionRootClientId,selectedBlockClientId}=(0,use_select.A)((select=>{const{getSettings,getBlockOrder,getSelectionStart,getSelectedBlockClientId,getSectionRootClientId}=unlock(select(store_store)),root=getSectionRootClientId();return{hasSelection:!!getSelectionStart().clientId,blockOrder:getBlockOrder(root),sectionRootClientId:root,setInserterIsOpened:getSettings().__experimentalSetIsInserterOpened,selectedBlockClientId:getSelectedBlockClientId()}}),[]),{showInsertionPoint}=unlock((0,use_dispatch.A)(store_store));if((0,react.useEffect)((()=>{const timeout=setTimeout((()=>{setIsReady(!0)}),500);return()=>{clearTimeout(timeout)}}),[]),!isReady||!hasSelection)return null;const previousClientId=selectedBlockClientId,index=blockOrder.findIndex((clientId=>selectedBlockClientId===clientId)),nextClientId=blockOrder[index+1];return(0,jsx_runtime.jsx)(inbetween,{previousClientId,nextClientId,children:(0,jsx_runtime.jsx)(zoom_out_mode_inserter_button,{onClick:()=>{setInserterIsOpened({rootClientId:sectionRootClientId,insertionIndex:index+1,tab:"patterns",category:"all"}),showInsertionPoint(sectionRootClientId,index+1,{operation:"insert"})}})})};function block_tools_selector(select){const{getSelectedBlockClientId,getFirstMultiSelectedBlockClientId,getSettings,isTyping,isDragging,isZoomOut}=unlock(select(store_store));return{clientId:getSelectedBlockClientId()||getFirstMultiSelectedBlockClientId(),hasFixedToolbar:getSettings().hasFixedToolbar,isTyping:isTyping(),isZoomOutMode:isZoomOut(),isDragging:isDragging()}}function BlockTools({children,__unstableContentRef,...props}){const{clientId,hasFixedToolbar,isTyping,isZoomOutMode,isDragging}=(0,use_select.A)(block_tools_selector,[]),isMatch=(0,keyboard_shortcuts_build_module.ZK)(),{getBlocksByClientId,getSelectedBlockClientIds,getBlockRootClientId,isGroupable}=(0,use_select.A)(store_store),{getGroupingBlockName}=(0,use_select.A)(build_module.M_),{showEmptyBlockSideInserter,showBlockToolbarPopover}=function useShowBlockTools(){return(0,use_select.A)((select=>{const{getSelectedBlockClientId,getFirstMultiSelectedBlockClientId,getBlock,getBlockMode,getSettings,__unstableGetEditorMode,isTyping}=unlock(select(store_store)),clientId=getSelectedBlockClientId()||getFirstMultiSelectedBlockClientId(),block=getBlock(clientId),editorMode=__unstableGetEditorMode(),hasSelectedBlock=!!clientId&&!!block,isEmptyDefaultBlock=hasSelectedBlock&&(0,build_module.Xw)(block)&&"html"!==getBlockMode(clientId),_showEmptyBlockSideInserter=clientId&&!isTyping()&&"edit"===editorMode&&isEmptyDefaultBlock;return{showEmptyBlockSideInserter:_showEmptyBlockSideInserter,showBlockToolbarPopover:!getSettings().hasFixedToolbar&&!_showEmptyBlockSideInserter&&hasSelectedBlock&&!isEmptyDefaultBlock}}),[])}(),{duplicateBlocks,removeBlocks,replaceBlocks,insertAfterBlock,insertBeforeBlock,selectBlock,moveBlocksUp,moveBlocksDown,expandBlock}=unlock((0,use_dispatch.A)(store_store));const blockToolbarRef=use_popover_scroll(__unstableContentRef),blockToolbarAfterRef=use_popover_scroll(__unstableContentRef);return(0,jsx_runtime.jsx)("div",{...props,onKeyDown:function onKeyDown(event){if(!event.defaultPrevented)if(isMatch("core/block-editor/move-up",event)){const clientIds=getSelectedBlockClientIds();if(clientIds.length){event.preventDefault();const rootClientId=getBlockRootClientId(clientIds[0]);moveBlocksUp(clientIds,rootClientId)}}else if(isMatch("core/block-editor/move-down",event)){const clientIds=getSelectedBlockClientIds();if(clientIds.length){event.preventDefault();const rootClientId=getBlockRootClientId(clientIds[0]);moveBlocksDown(clientIds,rootClientId)}}else if(isMatch("core/block-editor/duplicate",event)){const clientIds=getSelectedBlockClientIds();clientIds.length&&(event.preventDefault(),duplicateBlocks(clientIds))}else if(isMatch("core/block-editor/remove",event)){const clientIds=getSelectedBlockClientIds();clientIds.length&&(event.preventDefault(),removeBlocks(clientIds))}else if(isMatch("core/block-editor/insert-after",event)){const clientIds=getSelectedBlockClientIds();clientIds.length&&(event.preventDefault(),insertAfterBlock(clientIds[clientIds.length-1]))}else if(isMatch("core/block-editor/insert-before",event)){const clientIds=getSelectedBlockClientIds();clientIds.length&&(event.preventDefault(),insertBeforeBlock(clientIds[0]))}else if(isMatch("core/block-editor/unselect",event)){if(event.target.closest("[role=toolbar]"))return;const clientIds=getSelectedBlockClientIds();clientIds.length>1&&(event.preventDefault(),selectBlock(clientIds[0]))}else if(isMatch("core/block-editor/collapse-list-view",event)){if((0,is_text_field.A)(event.target)||(0,is_text_field.A)(event.target?.contentWindow?.document?.activeElement))return;event.preventDefault(),expandBlock(clientId)}else if(isMatch("core/block-editor/group",event)){const clientIds=getSelectedBlockClientIds();if(clientIds.length>1&&isGroupable(clientIds)){event.preventDefault();const blocks=getBlocksByClientId(clientIds),groupingBlockName=getGroupingBlockName(),newBlocks=(0,build_module.bh)(blocks,groupingBlockName);replaceBlocks(clientIds,newBlocks),(0,a11y_build_module.L)((0,i18n_build_module.__)("Selected blocks are grouped."))}}},children:(0,jsx_runtime.jsxs)(insertion_point_InsertionPointOpenRef.Provider,{value:(0,react.useRef)(!1),children:[!isTyping&&!isZoomOutMode&&(0,jsx_runtime.jsx)(InsertionPoint,{__unstableContentRef}),showEmptyBlockSideInserter&&(0,jsx_runtime.jsx)(EmptyBlockInserter,{__unstableContentRef,clientId}),showBlockToolbarPopover&&(0,jsx_runtime.jsx)(BlockToolbarPopover,{__unstableContentRef,clientId,isTyping}),!isZoomOutMode&&!hasFixedToolbar&&(0,jsx_runtime.jsx)(popover.Ay.Slot,{name:"block-toolbar",ref:blockToolbarRef}),children,(0,jsx_runtime.jsx)(popover.Ay.Slot,{name:"__unstable-block-tools-after",ref:blockToolbarAfterRef}),isZoomOutMode&&!isDragging&&(0,jsx_runtime.jsx)(zoom_out_mode_inserters,{__unstableContentRef})]})})}var commands_build_module=__webpack_require__("./packages/commands/build-module/index.js");const library_ungroup=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M18 4h-7c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 9c0 .3-.2.5-.5.5h-7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5v7zm-5 5c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-7c0-.3.2-.5.5-.5h1V9H6c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2v-1h-1.5v1z"})});var trash=__webpack_require__("./packages/icons/build-module/library/trash.js");const useTransformCommands=()=>{const{replaceBlocks,multiSelect}=(0,use_dispatch.A)(store_store),{blocks,clientIds,canRemove,possibleBlockTransformations,invalidSelection}=(0,use_select.A)((select=>{const{getBlockRootClientId,getBlockTransformItems,getSelectedBlockClientIds,getBlocksByClientId,canRemoveBlocks}=select(store_store),selectedBlockClientIds=getSelectedBlockClientIds(),selectedBlocks=getBlocksByClientId(selectedBlockClientIds);if(selectedBlocks.filter((block=>!block)).length>0)return{invalidSelection:!0};return{blocks:selectedBlocks,clientIds:selectedBlockClientIds,possibleBlockTransformations:getBlockTransformItems(selectedBlocks,getBlockRootClientId(selectedBlockClientIds[0])),canRemove:canRemoveBlocks(selectedBlockClientIds),invalidSelection:!1}}),[]);if(invalidSelection)return{isLoading:!1,commands:[]};const isTemplate=1===blocks.length&&(0,build_module.gc)(blocks[0]);function onBlockTransform(name){const newBlocks=(0,build_module.bh)(blocks,name);replaceBlocks(clientIds,newBlocks),function selectForMultipleBlocks(insertedBlocks){insertedBlocks.length>1&&multiSelect(insertedBlocks[0].clientId,insertedBlocks[insertedBlocks.length-1].clientId)}(newBlocks)}const hasPossibleBlockTransformations=!!possibleBlockTransformations.length&&canRemove&&!isTemplate;if(!clientIds||clientIds.length<1||!hasPossibleBlockTransformations)return{isLoading:!1,commands:[]};const commands=possibleBlockTransformations.map((transformation=>{const{name,title,icon}=transformation;return{name:"core/block-editor/transform-to-"+name.replace("/","-"),label:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Transform to %s"),title),icon:(0,jsx_runtime.jsx)(block_icon,{icon}),callback:({close})=>{onBlockTransform(name),close()}}}));return{isLoading:!1,commands}},useQuickActionsCommands=()=>{const{clientIds,isUngroupable,isGroupable}=(0,use_select.A)((select=>{const{getSelectedBlockClientIds,isUngroupable:_isUngroupable,isGroupable:_isGroupable}=select(store_store);return{clientIds:getSelectedBlockClientIds(),isUngroupable:_isUngroupable(),isGroupable:_isGroupable()}}),[]),{canInsertBlockType,getBlockRootClientId,getBlocksByClientId,canRemoveBlocks}=(0,use_select.A)(store_store),{getDefaultBlockName,getGroupingBlockName}=(0,use_select.A)(build_module.M_),blocks=getBlocksByClientId(clientIds),{removeBlocks,replaceBlocks,duplicateBlocks,insertAfterBlock,insertBeforeBlock}=(0,use_dispatch.A)(store_store),onGroup=()=>{if(!blocks.length)return;const groupingBlockName=getGroupingBlockName(),newBlocks=(0,build_module.bh)(blocks,groupingBlockName);newBlocks&&replaceBlocks(clientIds,newBlocks)},onUngroup=()=>{if(!blocks.length)return;const innerBlocks=blocks[0].innerBlocks;innerBlocks.length&&replaceBlocks(clientIds,innerBlocks)};if(!clientIds||clientIds.length<1)return{isLoading:!1,commands:[]};const rootClientId=getBlockRootClientId(clientIds[0]),canInsertDefaultBlock=canInsertBlockType(getDefaultBlockName(),rootClientId),canDuplicate=blocks.every((block=>!!block&&(0,build_module.pN)(block.name,"multiple",!0)&&canInsertBlockType(block.name,rootClientId))),canRemove=canRemoveBlocks(clientIds),commands=[];return canDuplicate&&commands.push({name:"duplicate",label:(0,i18n_build_module.__)("Duplicate"),callback:()=>duplicateBlocks(clientIds,!0),icon:copy.A}),canInsertDefaultBlock&&commands.push({name:"add-before",label:(0,i18n_build_module.__)("Add before"),callback:()=>{const clientId=Array.isArray(clientIds)?clientIds[0]:clientId;insertBeforeBlock(clientId)},icon:plus.A},{name:"add-after",label:(0,i18n_build_module.__)("Add after"),callback:()=>{const clientId=Array.isArray(clientIds)?clientIds[clientIds.length-1]:clientId;insertAfterBlock(clientId)},icon:plus.A}),isGroupable&&commands.push({name:"Group",label:(0,i18n_build_module.__)("Group"),callback:onGroup,icon:library_group.A}),isUngroupable&&commands.push({name:"ungroup",label:(0,i18n_build_module.__)("Ungroup"),callback:onUngroup,icon:library_ungroup}),canRemove&&commands.push({name:"remove",label:(0,i18n_build_module.__)("Delete"),callback:()=>removeBlocks(clientIds,!0),icon:trash.A}),{isLoading:!1,commands:commands.map((command=>({...command,name:"core/block-editor/action-"+command.name,callback:({close})=>{command.callback(),close()}})))}},useBlockCommands=()=>{(0,commands_build_module.ml)({name:"core/block-editor/blockTransforms",hook:useTransformCommands}),(0,commands_build_module.ml)({name:"core/block-editor/blockQuickActions",hook:useQuickActionsCommands,context:"block-selection-edit"})},EDITOR_STYLE_TRANSFORM_OPTIONS={ignoredSelectors:[/\.editor-styles-wrapper/gi]};function ExperimentalBlockCanvas({shouldIframe=!0,height="300px",children=(0,jsx_runtime.jsx)(BlockList,{}),styles,contentRef:contentRefProp,iframeProps}){useBlockCommands();const isTabletViewport=(0,use_viewport_match.A)("medium","<"),resetTypingRef=useMouseMoveTypingReset(),clearerRef=useBlockSelectionClearer(),localRef=(0,react.useRef)(),contentRef=(0,use_merge_refs.A)([contentRefProp,clearerRef,localRef]),zoomLevel=(0,use_select.A)((select=>unlock(select(store_store)).getZoomLevel()),[]),zoomOutIframeProps=100===zoomLevel||isTabletViewport?{}:{scale:zoomLevel,frameSize:"40px"};return shouldIframe?(0,jsx_runtime.jsx)(BlockTools,{__unstableContentRef:localRef,style:{height,display:"flex"},children:(0,jsx_runtime.jsxs)(iframe,{...iframeProps,...zoomOutIframeProps,ref:resetTypingRef,contentRef,style:{...iframeProps?.style},name:"editor-canvas",children:[(0,jsx_runtime.jsx)(editor_styles,{styles}),children]})}):(0,jsx_runtime.jsxs)(BlockTools,{__unstableContentRef:localRef,style:{height,display:"flex"},children:[(0,jsx_runtime.jsx)(editor_styles,{styles,scope:":where(.editor-styles-wrapper)",transformOptions:EDITOR_STYLE_TRANSFORM_OPTIONS}),(0,jsx_runtime.jsx)(writing_flow,{ref:contentRef,className:"editor-styles-wrapper",tabIndex:-1,style:{height:"100%",width:"100%"},children})]})}const block_canvas=function BlockCanvas({children,height,styles}){return(0,jsx_runtime.jsx)(ExperimentalBlockCanvas,{height,styles,children})};var paragraph=__webpack_require__("./packages/icons/build-module/library/paragraph.js");const heading_level_1=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M17.6 7c-.6.9-1.5 1.7-2.6 2v1h2v7h2V7h-1.4zM11 11H7V7H5v10h2v-4h4v4h2V7h-2v4z"})}),heading_level_2=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M9 11.1H5v-4H3v10h2v-4h4v4h2v-10H9v4zm8 4c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6v1.5h8v-2H17z"})}),heading_level_3=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M9 11H5V7H3v10h2v-4h4v4h2V7H9v4zm11.3 1.7c-.4-.4-1-.7-1.6-.8v-.1c.6-.2 1.1-.5 1.5-.9.3-.4.5-.8.5-1.3 0-.4-.1-.8-.3-1.1-.2-.3-.5-.6-.8-.8-.4-.2-.8-.4-1.2-.5-.6-.1-1.1-.2-1.6-.2-.6 0-1.3.1-1.8.3s-1.1.5-1.6.9l1.2 1.4c.4-.2.7-.4 1.1-.6.3-.2.7-.3 1.1-.3.4 0 .8.1 1.1.3.3.2.4.5.4.8 0 .4-.2.7-.6.9-.7.3-1.5.5-2.2.4v1.6c.5 0 1 0 1.5.1.3.1.7.2 1 .3.2.1.4.2.5.4s.1.4.1.6c0 .3-.2.7-.5.8-.4.2-.9.3-1.4.3s-1-.1-1.4-.3c-.4-.2-.8-.4-1.2-.7L13 15.6c.5.4 1 .8 1.6 1 .7.3 1.5.4 2.3.4.6 0 1.1-.1 1.6-.2.4-.1.9-.2 1.3-.5.4-.2.7-.5.9-.9.2-.4.3-.8.3-1.2 0-.6-.3-1.1-.7-1.5z"})}),heading_level_4=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M20 13V7h-3l-4 6v2h5v2h2v-2h1v-2h-1zm-2 0h-2.8L18 9v4zm-9-2H5V7H3v10h2v-4h4v4h2V7H9v4z"})}),heading_level_5=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M9 11H5V7H3v10h2v-4h4v4h2V7H9v4zm11.7 1.2c-.2-.3-.5-.7-.8-.9-.3-.3-.7-.5-1.1-.6-.5-.1-.9-.2-1.4-.2-.2 0-.5.1-.7.1-.2.1-.5.1-.7.2l.1-1.9h4.3V7H14l-.3 5 1 .6.5-.2.4-.1c.1-.1.3-.1.4-.1h.5c.5 0 1 .1 1.4.4.4.2.6.7.6 1.1 0 .4-.2.8-.6 1.1-.4.3-.9.4-1.4.4-.4 0-.9-.1-1.3-.3-.4-.2-.7-.4-1.1-.7 0 0-1.1 1.4-1 1.5.5.4 1 .8 1.6 1 .7.3 1.5.4 2.3.4.5 0 1-.1 1.5-.3s.9-.4 1.3-.7c.4-.3.7-.7.9-1.1s.3-.9.3-1.4-.1-1-.3-1.4z"})}),heading_level_6=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M20.7 12.4c-.2-.3-.4-.6-.7-.9s-.6-.5-1-.6c-.4-.2-.8-.2-1.2-.2-.5 0-.9.1-1.3.3s-.8.5-1.2.8c0-.5 0-.9.2-1.4l.6-.9c.2-.2.5-.4.8-.5.6-.2 1.3-.2 1.9 0 .3.1.6.3.8.5 0 0 1.3-1.3 1.3-1.4-.4-.3-.9-.6-1.4-.8-.6-.2-1.3-.3-2-.3-.6 0-1.1.1-1.7.4-.5.2-1 .5-1.4.9-.4.4-.8 1-1 1.6-.3.7-.4 1.5-.4 2.3s.1 1.5.3 2.1c.2.6.6 1.1 1 1.5.4.4.9.7 1.4.9 1 .3 2 .3 3 0 .4-.1.8-.3 1.2-.6.3-.3.6-.6.8-1 .2-.5.3-.9.3-1.4s-.1-.9-.3-1.3zm-2 2.1c-.1.2-.3.4-.4.5-.1.1-.3.2-.5.2-.2.1-.4.1-.6.1-.2.1-.5 0-.7-.1-.2 0-.3-.2-.5-.3-.1-.2-.3-.4-.4-.6-.2-.3-.3-.7-.3-1 .3-.3.6-.5 1-.7.3-.1.7-.2 1-.2.4 0 .8.1 1.1.3.3.3.4.7.4 1.1 0 .2 0 .5-.1.7zM9 11H5V7H3v10h2v-4h4v4h2V7H9v4z"})}),LEVEL_TO_PATH={0:paragraph.A,1:heading_level_1,2:heading_level_2,3:heading_level_3,4:heading_level_4,5:heading_level_5,6:heading_level_6};function HeadingLevelIcon({level}){return LEVEL_TO_PATH[level]?(0,jsx_runtime.jsx)(components_build_module_icon.A,{icon:LEVEL_TO_PATH[level]}):null}const HEADING_LEVELS=[1,2,3,4,5,6],block_heading_level_dropdown_POPOVER_PROPS={className:"block-library-heading-level-dropdown"};function HeadingLevelDropdown({options=HEADING_LEVELS,value,onChange}){const validOptions=options.filter((option=>0===option||HEADING_LEVELS.includes(option))).sort(((a,b)=>a-b));return(0,jsx_runtime.jsx)(toolbar_dropdown_menu.A,{popoverProps:block_heading_level_dropdown_POPOVER_PROPS,icon:(0,jsx_runtime.jsx)(HeadingLevelIcon,{level:value}),label:(0,i18n_build_module.__)("Change level"),controls:validOptions.map((targetLevel=>{const isActive=targetLevel===value;return{icon:(0,jsx_runtime.jsx)(HeadingLevelIcon,{level:targetLevel}),title:0===targetLevel?(0,i18n_build_module.__)("Paragraph"):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Heading %d"),targetLevel),isActive,onClick(){onChange(targetLevel)},role:"menuitemradio"}}))})}var library_layout=__webpack_require__("./packages/icons/build-module/library/layout.js");const block_variation_picker=function BlockVariationPicker({icon=library_layout.A,label=(0,i18n_build_module.__)("Choose variation"),instructions=(0,i18n_build_module.__)("Select a variation to start with:"),variations,onSelect,allowSkip}){const classes=(0,clsx.A)("block-editor-block-variation-picker",{"has-many-variations":variations.length>4});return(0,jsx_runtime.jsxs)(build_module_placeholder.A,{icon,label,instructions,className:classes,children:[(0,jsx_runtime.jsx)("ul",{className:"block-editor-block-variation-picker__variations",role:"list","aria-label":(0,i18n_build_module.__)("Block variations"),children:variations.map((variation=>(0,jsx_runtime.jsxs)("li",{children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",icon:variation.icon&&variation.icon.src?variation.icon.src:variation.icon,iconSize:48,onClick:()=>onSelect(variation),className:"block-editor-block-variation-picker__variation",label:variation.description||variation.title}),(0,jsx_runtime.jsx)("span",{className:"block-editor-block-variation-picker__variation-label",children:variation.title})]},variation.name)))}),allowSkip&&(0,jsx_runtime.jsx)("div",{className:"block-editor-block-variation-picker__skip",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"link",onClick:()=>onSelect(),children:(0,i18n_build_module.__)("Skip")})})]})},components_color_palette=(0,create_higher_order_component.f)((WrappedComponent=>props=>{const[colorsFeature,enableCustomColors]=use_settings_useSettings("color.palette","color.custom"),{colors=colorsFeature,disableCustomColors=!enableCustomColors}=props,hasColorsToChoose=colors&&colors.length>0||!disableCustomColors;return(0,jsx_runtime.jsx)(WrappedComponent,{...props,colors,disableCustomColors,hasColorsToChoose})}),"withColorContext")(color_palette.Ay);var date_build_module=__webpack_require__("./packages/date/build-module/index.js");const exampleDate=new Date;function DateFormatPicker({format,defaultFormat,onChange}){return(0,jsx_runtime.jsxs)("fieldset",{className:"block-editor-date-format-picker",children:[(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"legend",children:(0,i18n_build_module.__)("Date format")}),(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Default format"),help:`${(0,i18n_build_module.__)("Example:")}  ${(0,date_build_module.b5)(defaultFormat,exampleDate)}`,checked:!format,onChange:checked=>onChange(checked?null:defaultFormat)}),format&&(0,jsx_runtime.jsx)(NonDefaultControls,{format,onChange})]})}function NonDefaultControls({format,onChange}){var _suggestedOptions$fin;const suggestedOptions=[...[...new Set(["Y-m-d",(0,i18n_build_module._x)("n/j/Y","short date format"),(0,i18n_build_module._x)("n/j/Y g:i A","short date format with time"),(0,i18n_build_module._x)("M j, Y","medium date format"),(0,i18n_build_module._x)("M j, Y g:i A","medium date format with time"),(0,i18n_build_module._x)("F j, Y","long date format"),(0,i18n_build_module._x)("M j","short date format without the year")])].map(((suggestedFormat,index)=>({key:`suggested-${index}`,name:(0,date_build_module.b5)(suggestedFormat,exampleDate),format:suggestedFormat}))),{key:"human-diff",name:(0,date_build_module.mk)(exampleDate),format:"human-diff"}],customOption={key:"custom",name:(0,i18n_build_module.__)("Custom"),className:"block-editor-date-format-picker__custom-format-select-control__custom-option",hint:(0,i18n_build_module.__)("Enter your own date format")},[isCustom,setIsCustom]=(0,react.useState)((()=>!!format&&!suggestedOptions.some((option=>option.format===format))));return(0,jsx_runtime.jsxs)(v_stack_component.A,{children:[(0,jsx_runtime.jsx)(custom_select_control,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Choose a format"),options:[...suggestedOptions,customOption],value:isCustom?customOption:null!==(_suggestedOptions$fin=suggestedOptions.find((option=>option.format===format)))&&void 0!==_suggestedOptions$fin?_suggestedOptions$fin:customOption,onChange:({selectedItem})=>{selectedItem===customOption?setIsCustom(!0):(setIsCustom(!1),onChange(selectedItem.format))}}),isCustom&&(0,jsx_runtime.jsx)(text_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Custom format"),hideLabelFromVision:!0,help:(0,create_interpolate_element.A)((0,i18n_build_module.__)("Enter a date or time <Link>format string</Link>."),{Link:(0,jsx_runtime.jsx)(external_link.A,{href:(0,i18n_build_module.__)("https://wordpress.org/documentation/article/customize-date-and-time-format/")})}),value:format,onChange:value=>onChange(value)})]})}exampleDate.setDate(20),exampleDate.setMonth(exampleDate.getMonth()-3),4===exampleDate.getMonth()&&exampleDate.setMonth(3);const WithToolsPanelItem=({setting,children,panelId,...props})=>(0,jsx_runtime.jsx)(tools_panel_item_component.A,{hasValue:()=>!!setting.colorValue||!!setting.gradientValue,label:setting.label,onDeselect:()=>{setting.colorValue?setting.onColorChange():setting.gradientValue&&setting.onGradientChange()},isShownByDefault:void 0===setting.isShownByDefault||setting.isShownByDefault,...props,className:"block-editor-tools-panel-color-gradient-settings__item",panelId,resetAllFilter:setting.resetAllFilter,children}),dropdown_LabeledColorIndicator=({colorValue,label})=>(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-start",children:[(0,jsx_runtime.jsx)(color_indicator.A,{className:"block-editor-panel-color-gradient-settings__color-indicator",colorValue}),(0,jsx_runtime.jsx)(flex_item_component.A,{className:"block-editor-panel-color-gradient-settings__color-name",title:label,children:label})]}),renderToggle=settings=>({onToggle,isOpen})=>{const{colorValue,label}=settings,toggleProps={onClick:onToggle,className:(0,clsx.A)("block-editor-panel-color-gradient-settings__dropdown",{"is-open":isOpen}),"aria-expanded":isOpen};return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,...toggleProps,children:(0,jsx_runtime.jsx)(dropdown_LabeledColorIndicator,{colorValue,label})})};function ColorGradientSettingsDropdown({colors,disableCustomColors,disableCustomGradients,enableAlpha,gradients,settings,__experimentalIsRenderedInSidebar,...props}){let popoverProps;return __experimentalIsRenderedInSidebar&&(popoverProps={placement:"left-start",offset:36,shift:!0}),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:settings.map(((setting,index)=>{var _setting$gradientValu;const controlProps={clearable:!1,colorValue:setting.colorValue,colors,disableCustomColors,disableCustomGradients,enableAlpha,gradientValue:setting.gradientValue,gradients,label:setting.label,onColorChange:setting.onColorChange,onGradientChange:setting.onGradientChange,showTitle:!1,__experimentalIsRenderedInSidebar,...setting},toggleSettings={colorValue:null!==(_setting$gradientValu=setting.gradientValue)&&void 0!==_setting$gradientValu?_setting$gradientValu:setting.colorValue,label:setting.label};return setting&&(0,jsx_runtime.jsx)(WithToolsPanelItem,{setting,...props,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,className:"block-editor-tools-panel-color-gradient-settings__dropdown",renderToggle:renderToggle(toggleSettings),renderContent:()=>(0,jsx_runtime.jsx)(dropdown_content_wrapper.A,{paddingSize:"none",children:(0,jsx_runtime.jsx)("div",{className:"block-editor-panel-color-gradient-settings__dropdown-content",children:(0,jsx_runtime.jsx)(control,{...controlProps})})})})},index)}))})}const aspect_ratio=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M18.5 5.5h-13c-1.1 0-2 .9-2 2v9c0 1.1.9 2 2 2h13c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2zm.5 11c0 .3-.2.5-.5.5h-13c-.3 0-.5-.2-.5-.5v-9c0-.3.2-.5.5-.5h13c.3 0 .5.2.5.5v9zM6.5 12H8v-2h2V8.5H6.5V12zm9.5 2h-2v1.5h3.5V12H16v2z"})}),MIN_ZOOM=100,MAX_ZOOM=300,constants_POPOVER_PROPS={placement:"bottom-start"};var api_fetch_build_module=__webpack_require__("./packages/api-fetch/build-module/index.js");const ImageEditingContext=(0,react.createContext)({}),useImageEditingContext=()=>(0,react.useContext)(ImageEditingContext);function ImageEditingProvider({id,url,naturalWidth,naturalHeight,onFinishEditing,onSaveImage,children}){const transformImage=function useTransformImage({url,naturalWidth,naturalHeight}){const[editedUrl,setEditedUrl]=(0,react.useState)(),[crop,setCrop]=(0,react.useState)(),[position,setPosition]=(0,react.useState)({x:0,y:0}),[zoom,setZoom]=(0,react.useState)(100),[rotation,setRotation]=(0,react.useState)(0),defaultAspect=naturalWidth/naturalHeight,[aspect,setAspect]=(0,react.useState)(defaultAspect),rotateClockwise=(0,react.useCallback)((()=>{const angle=(rotation+90)%360;let naturalAspectRatio=defaultAspect;if(rotation%180==90&&(naturalAspectRatio=1/defaultAspect),0===angle)return setEditedUrl(),setRotation(angle),setAspect(defaultAspect),void setPosition((prevPosition=>({x:-prevPosition.y*naturalAspectRatio,y:prevPosition.x*naturalAspectRatio})));const el=new window.Image;el.src=url,el.onload=function editImage(event){const canvas=document.createElement("canvas");let translateX=0,translateY=0;angle%180?(canvas.width=event.target.height,canvas.height=event.target.width):(canvas.width=event.target.width,canvas.height=event.target.height),90!==angle&&180!==angle||(translateX=canvas.width),270!==angle&&180!==angle||(translateY=canvas.height);const context=canvas.getContext("2d");context.translate(translateX,translateY),context.rotate(angle*Math.PI/180),context.drawImage(event.target,0,0),canvas.toBlob((blob=>{setEditedUrl(URL.createObjectURL(blob)),setRotation(angle),setAspect(canvas.width/canvas.height),setPosition((prevPosition=>({x:-prevPosition.y*naturalAspectRatio,y:prevPosition.x*naturalAspectRatio})))}))};const imgCrossOrigin=(0,hooks_build_module.W5)("media.crossOrigin",void 0,url);"string"==typeof imgCrossOrigin&&(el.crossOrigin=imgCrossOrigin)}),[rotation,defaultAspect,url]);return(0,react.useMemo)((()=>({editedUrl,setEditedUrl,crop,setCrop,position,setPosition,zoom,setZoom,rotation,setRotation,rotateClockwise,aspect,setAspect,defaultAspect})),[editedUrl,crop,position,zoom,rotation,rotateClockwise,aspect,defaultAspect])}({url,naturalWidth,naturalHeight}),saveImage=function useSaveImage({crop,rotation,url,id,onSaveImage,onFinishEditing}){const{createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M),[isInProgress,setIsInProgress]=(0,react.useState)(!1),cancel=(0,react.useCallback)((()=>{setIsInProgress(!1),onFinishEditing()}),[onFinishEditing]),apply=(0,react.useCallback)((()=>{setIsInProgress(!0);const modifiers=[];if(rotation>0&&modifiers.push({type:"rotate",args:{angle:rotation}}),(crop.width<99.9||crop.height<99.9)&&modifiers.push({type:"crop",args:{left:crop.x,top:crop.y,width:crop.width,height:crop.height}}),0===modifiers.length)return setIsInProgress(!1),void onFinishEditing();(0,api_fetch_build_module.A)({path:`/wp/v2/media/${id}/edit`,method:"POST",data:{src:url,modifiers}}).then((response=>{onSaveImage({id:response.id,url:response.source_url})})).catch((error=>{createErrorNotice((0,i18n_build_module.nv)((0,i18n_build_module.__)("Could not edit image. %s"),(0,strip_html.A)(error.message)),{id:"image-editing-error",type:"snackbar"})})).finally((()=>{setIsInProgress(!1),onFinishEditing()}))}),[crop,rotation,id,url,onSaveImage,createErrorNotice,onFinishEditing]);return(0,react.useMemo)((()=>({isInProgress,apply,cancel})),[isInProgress,apply,cancel])}({id,url,onSaveImage,onFinishEditing,...transformImage}),providerValue=(0,react.useMemo)((()=>({...transformImage,...saveImage})),[transformImage,saveImage]);return(0,jsx_runtime.jsx)(ImageEditingContext.Provider,{value:providerValue,children})}function AspectRatioGroup({aspectRatios,isDisabled,label,onClick,value}){return(0,jsx_runtime.jsx)(menu_group.A,{label,children:aspectRatios.map((({name,slug,ratio})=>(0,jsx_runtime.jsx)(menu_item.A,{disabled:isDisabled,onClick:()=>{onClick(ratio)},role:"menuitemradio",isSelected:ratio===value,icon:ratio===value?library_check.A:void 0,children:name},slug)))})}function ratioToNumber(str){const[a,b,...rest]=str.split("/").map(Number);return a<=0||b<=0||Number.isNaN(a)||Number.isNaN(b)||rest.length?NaN:b?a/b:a}function presetRatioAsNumber({ratio,...rest}){return{ratio:ratioToNumber(ratio),...rest}}function AspectRatioDropdown({toggleProps}){const{isInProgress,aspect,setAspect,defaultAspect}=useImageEditingContext(),[defaultRatios,themeRatios,showDefaultRatios]=use_settings_useSettings("dimensions.aspectRatios.default","dimensions.aspectRatios.theme","dimensions.defaultAspectRatios");return(0,jsx_runtime.jsx)(dropdown_menu.A,{icon:aspect_ratio,label:(0,i18n_build_module.__)("Aspect Ratio"),popoverProps:constants_POPOVER_PROPS,toggleProps,children:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(AspectRatioGroup,{isDisabled:isInProgress,onClick:newAspect=>{setAspect(newAspect),onClose()},value:aspect,aspectRatios:[{slug:"original",name:(0,i18n_build_module.__)("Original"),aspect:defaultAspect},...showDefaultRatios?defaultRatios.map(presetRatioAsNumber).filter((({ratio})=>1===ratio)):[]]}),themeRatios?.length>0&&(0,jsx_runtime.jsx)(AspectRatioGroup,{label:(0,i18n_build_module.__)("Theme"),isDisabled:isInProgress,onClick:newAspect=>{setAspect(newAspect),onClose()},value:aspect,aspectRatios:themeRatios}),showDefaultRatios&&(0,jsx_runtime.jsx)(AspectRatioGroup,{label:(0,i18n_build_module.__)("Landscape"),isDisabled:isInProgress,onClick:newAspect=>{setAspect(newAspect),onClose()},value:aspect,aspectRatios:defaultRatios.map(presetRatioAsNumber).filter((({ratio})=>ratio>1))}),showDefaultRatios&&(0,jsx_runtime.jsx)(AspectRatioGroup,{label:(0,i18n_build_module.__)("Portrait"),isDisabled:isInProgress,onClick:newAspect=>{setAspect(newAspect),onClose()},value:aspect,aspectRatios:defaultRatios.map(presetRatioAsNumber).filter((({ratio})=>ratio<1))})]})})}var index_module=__webpack_require__("./packages/block-editor/node_modules/react-easy-crop/index.module.js");function ImageCropper({url,width,height,naturalHeight,naturalWidth,borderProps}){const{isInProgress,editedUrl,position,zoom,aspect,setPosition,setCrop,setZoom,rotation}=useImageEditingContext(),[contentResizeListener,{width:clientWidth}]=(0,use_resize_observer.A)();let editedHeight=height||clientWidth*naturalHeight/naturalWidth;rotation%180==90&&(editedHeight=clientWidth*naturalWidth/naturalHeight);const area=(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("wp-block-image__crop-area",borderProps?.className,{"is-applying":isInProgress}),style:{...borderProps?.style,width:width||clientWidth,height:editedHeight},children:[(0,jsx_runtime.jsx)(index_module.Ay,{image:editedUrl||url,disabled:isInProgress,minZoom:MIN_ZOOM/100,maxZoom:MAX_ZOOM/100,crop:position,zoom:zoom/100,aspect,onCropChange:pos=>{setPosition(pos)},onCropComplete:newCropPercent=>{setCrop(newCropPercent)},onZoomChange:newZoom=>{setZoom(100*newZoom)}}),isInProgress&&(0,jsx_runtime.jsx)(spinner.Ay,{})]});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[contentResizeListener,area]})}var search=__webpack_require__("./packages/icons/build-module/library/search.js");function ZoomDropdown(){const{isInProgress,zoom,setZoom}=useImageEditingContext();return(0,jsx_runtime.jsx)(dropdown.A,{contentClassName:"wp-block-image__zoom",popoverProps:constants_POPOVER_PROPS,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(toolbar_button.A,{icon:search.A,label:(0,i18n_build_module.__)("Zoom"),onClick:onToggle,"aria-expanded":isOpen,disabled:isInProgress}),renderContent:()=>(0,jsx_runtime.jsx)(dropdown_content_wrapper.A,{paddingSize:"medium",children:(0,jsx_runtime.jsx)(range_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Zoom"),min:MIN_ZOOM,max:MAX_ZOOM,value:Math.round(zoom),onChange:setZoom})})})}const rotate_right=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M15.1 4.8l-3-2.5V4c-4.4 0-8 3.6-8 8 0 3.7 2.5 6.9 6 7.7.3.1.6.1 1 .2l.2-1.5c-.4 0-.7-.1-1.1-.2l-.1.2v-.2c-2.6-.8-4.5-3.3-4.5-6.2 0-3.6 2.9-6.5 6.5-6.5v1.8l3-2.5zM20 11c-.2-1.4-.7-2.7-1.6-3.8l-1.2.8c.7.9 1.1 2 1.3 3.1L20 11zm-1.5 1.8c-.1.5-.2 1.1-.4 1.6s-.5 1-.8 1.5l1.2.9c.4-.5.8-1.1 1-1.8s.5-1.3.5-2l-1.5-.2zm-5.6 5.6l.2 1.5c1.4-.2 2.7-.7 3.8-1.6l-.9-1.1c-.9.7-2 1.1-3.1 1.2z"})});function RotationButton(){const{isInProgress,rotateClockwise}=useImageEditingContext();return(0,jsx_runtime.jsx)(toolbar_button.A,{icon:rotate_right,label:(0,i18n_build_module.__)("Rotate"),onClick:rotateClockwise,disabled:isInProgress})}function FormControls(){const{isInProgress,apply,cancel}=useImageEditingContext();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(toolbar_button.A,{onClick:apply,disabled:isInProgress,children:(0,i18n_build_module.__)("Apply")}),(0,jsx_runtime.jsx)(toolbar_button.A,{onClick:cancel,children:(0,i18n_build_module.__)("Cancel")})]})}function ImageEditor({id,url,width,height,naturalHeight,naturalWidth,onSaveImage,onFinishEditing,borderProps}){return(0,jsx_runtime.jsxs)(ImageEditingProvider,{id,url,naturalWidth,naturalHeight,onSaveImage,onFinishEditing,children:[(0,jsx_runtime.jsx)(ImageCropper,{borderProps,url,width,height,naturalHeight,naturalWidth}),(0,jsx_runtime.jsxs)(block_controls,{children:[(0,jsx_runtime.jsxs)(toolbar_group.A,{children:[(0,jsx_runtime.jsx)(ZoomDropdown,{}),(0,jsx_runtime.jsx)(toolbar_item.A,{children:toggleProps=>(0,jsx_runtime.jsx)(AspectRatioDropdown,{toggleProps})}),(0,jsx_runtime.jsx)(RotationButton,{})]}),(0,jsx_runtime.jsx)(toolbar_group.A,{children:(0,jsx_runtime.jsx)(FormControls,{})})]})]})}var button_group=__webpack_require__("./packages/components/build-module/button-group/index.js");const IMAGE_SIZE_PRESETS=[25,50,75,100],image_size_control_noop=()=>{};function ImageSizeControl({imageSizeHelp,imageWidth,imageHeight,imageSizeOptions=[],isResizable=!0,slug,width,height,onChange,onChangeImage=image_size_control_noop}){const{currentHeight,currentWidth,updateDimension,updateDimensions}=function useDimensionHandler(customHeight,customWidth,defaultHeight,defaultWidth,onChange){var _ref,_ref2;const[currentWidth,setCurrentWidth]=(0,react.useState)(null!==(_ref=null!=customWidth?customWidth:defaultWidth)&&void 0!==_ref?_ref:""),[currentHeight,setCurrentHeight]=(0,react.useState)(null!==(_ref2=null!=customHeight?customHeight:defaultHeight)&&void 0!==_ref2?_ref2:"");return(0,react.useEffect)((()=>{void 0===customWidth&&void 0!==defaultWidth&&setCurrentWidth(defaultWidth),void 0===customHeight&&void 0!==defaultHeight&&setCurrentHeight(defaultHeight)}),[defaultWidth,defaultHeight]),(0,react.useEffect)((()=>{void 0!==customWidth&&Number.parseInt(customWidth)!==Number.parseInt(currentWidth)&&setCurrentWidth(customWidth),void 0!==customHeight&&Number.parseInt(customHeight)!==Number.parseInt(currentHeight)&&setCurrentHeight(customHeight)}),[customWidth,customHeight]),{currentHeight,currentWidth,updateDimension:(dimension,value)=>{const parsedValue=""===value?void 0:parseInt(value,10);"width"===dimension?setCurrentWidth(parsedValue):setCurrentHeight(parsedValue),onChange({[dimension]:parsedValue})},updateDimensions:(nextHeight,nextWidth)=>{setCurrentHeight(null!=nextHeight?nextHeight:defaultHeight),setCurrentWidth(null!=nextWidth?nextWidth:defaultWidth),onChange({height:nextHeight,width:nextWidth})}}}(height,width,imageHeight,imageWidth,onChange);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[imageSizeOptions&&imageSizeOptions.length>0&&(0,jsx_runtime.jsx)(select_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Resolution"),value:slug,options:imageSizeOptions,onChange:onChangeImage,help:imageSizeHelp,size:"__unstable-large"}),isResizable&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-image-size-control",children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{align:"baseline",spacing:"3",children:[(0,jsx_runtime.jsx)(number_control.A,{className:"block-editor-image-size-control__width",label:(0,i18n_build_module.__)("Width"),value:currentWidth,min:1,onChange:value=>updateDimension("width",value),size:"__unstable-large"}),(0,jsx_runtime.jsx)(number_control.A,{className:"block-editor-image-size-control__height",label:(0,i18n_build_module.__)("Height"),value:currentHeight,min:1,onChange:value=>updateDimension("height",value),size:"__unstable-large"})]}),(0,jsx_runtime.jsxs)(h_stack_component.A,{children:[(0,jsx_runtime.jsx)(button_group.A,{"aria-label":(0,i18n_build_module.__)("Image size presets"),children:IMAGE_SIZE_PRESETS.map((scale=>{const scaledWidth=Math.round(imageWidth*(scale/100)),scaledHeight=Math.round(imageHeight*(scale/100)),isCurrent=currentWidth===scaledWidth&&currentHeight===scaledHeight;return(0,jsx_runtime.jsxs)(build_module_button.Ay,{size:"small",variant:isCurrent?"primary":void 0,isPressed:isCurrent,onClick:()=>updateDimensions(scaledHeight,scaledWidth),children:[scale,"%"]},scale)}))}),(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",onClick:()=>updateDimensions(),children:(0,i18n_build_module.__)("Reset")})]})]})]})}const DEFAULT_INIT_WINDOW_SIZE=30;const RovingTabIndexContext=(0,react.createContext)(void 0),RovingTabIndexProvider=RovingTabIndexContext.Provider;function RovingTabIndex({children}){const[lastFocusedElement,setLastFocusedElement]=(0,react.useState)(),providerValue=(0,react.useMemo)((()=>({lastFocusedElement,setLastFocusedElement})),[lastFocusedElement]);return(0,jsx_runtime.jsx)(RovingTabIndexProvider,{value:providerValue,children})}function getRowFocusables(rowElement){return dom_build_module.XC.focusable.find(rowElement,{sequential:!0}).filter((focusable=>focusable.closest('[role="row"]')===rowElement))}const tree_grid=(0,react.forwardRef)((function UnforwardedTreeGrid({children,onExpandRow=()=>{},onCollapseRow=()=>{},onFocusRow=()=>{},applicationAriaLabel,...props},ref){const onKeyDown=(0,react.useCallback)((event=>{const{keyCode,metaKey,ctrlKey,altKey}=event;if(metaKey||ctrlKey||altKey||![keycodes_build_module.UP,keycodes_build_module.PX,keycodes_build_module.M3,keycodes_build_module.NS,keycodes_build_module.yZ,keycodes_build_module.Kp].includes(keyCode))return;event.stopPropagation();const{activeElement}=document,{currentTarget:treeGridElement}=event;if(!activeElement||!treeGridElement.contains(activeElement))return;const activeRow=activeElement.closest('[role="row"]');if(!activeRow)return;const focusablesInRow=getRowFocusables(activeRow),currentColumnIndex=focusablesInRow.indexOf(activeElement),canExpandCollapse=0===currentColumnIndex,cannotFocusNextColumn=canExpandCollapse&&("false"===activeRow.getAttribute("data-expanded")||"false"===activeRow.getAttribute("aria-expanded"))&&keyCode===keycodes_build_module.NS;if([keycodes_build_module.M3,keycodes_build_module.NS].includes(keyCode)){let nextIndex;if(nextIndex=keyCode===keycodes_build_module.M3?Math.max(0,currentColumnIndex-1):Math.min(currentColumnIndex+1,focusablesInRow.length-1),canExpandCollapse){if(keyCode===keycodes_build_module.M3){var _activeRow$getAttribu;if("true"===activeRow.getAttribute("data-expanded")||"true"===activeRow.getAttribute("aria-expanded"))return onCollapseRow(activeRow),void event.preventDefault();const level=Math.max(parseInt(null!==(_activeRow$getAttribu=activeRow?.getAttribute("aria-level"))&&void 0!==_activeRow$getAttribu?_activeRow$getAttribu:"1",10)-1,1),rows=Array.from(treeGridElement.querySelectorAll('[role="row"]'));let parentRow=activeRow;for(let i=rows.indexOf(activeRow);i>=0;i--){const ariaLevel=rows[i].getAttribute("aria-level");if(null!==ariaLevel&&parseInt(ariaLevel,10)===level){parentRow=rows[i];break}}getRowFocusables(parentRow)?.[0]?.focus()}if(keyCode===keycodes_build_module.NS){if("false"===activeRow.getAttribute("data-expanded")||"false"===activeRow.getAttribute("aria-expanded"))return onExpandRow(activeRow),void event.preventDefault();const focusableItems=getRowFocusables(activeRow);focusableItems.length>0&&focusableItems[nextIndex]?.focus()}return void event.preventDefault()}if(cannotFocusNextColumn)return;focusablesInRow[nextIndex].focus(),event.preventDefault()}else if([keycodes_build_module.UP,keycodes_build_module.PX].includes(keyCode)){const rows=Array.from(treeGridElement.querySelectorAll('[role="row"]')),currentRowIndex=rows.indexOf(activeRow);let nextRowIndex;if(nextRowIndex=keyCode===keycodes_build_module.UP?Math.max(0,currentRowIndex-1):Math.min(currentRowIndex+1,rows.length-1),nextRowIndex===currentRowIndex)return void event.preventDefault();const focusablesInNextRow=getRowFocusables(rows[nextRowIndex]);if(!focusablesInNextRow||!focusablesInNextRow.length)return void event.preventDefault();focusablesInNextRow[Math.min(currentColumnIndex,focusablesInNextRow.length-1)].focus(),onFocusRow(event,activeRow,rows[nextRowIndex]),event.preventDefault()}else if([keycodes_build_module.yZ,keycodes_build_module.Kp].includes(keyCode)){const rows=Array.from(treeGridElement.querySelectorAll('[role="row"]')),currentRowIndex=rows.indexOf(activeRow);let nextRowIndex;if(nextRowIndex=keyCode===keycodes_build_module.yZ?0:rows.length-1,nextRowIndex===currentRowIndex)return void event.preventDefault();const focusablesInNextRow=getRowFocusables(rows[nextRowIndex]);if(!focusablesInNextRow||!focusablesInNextRow.length)return void event.preventDefault();focusablesInNextRow[Math.min(currentColumnIndex,focusablesInNextRow.length-1)].focus(),onFocusRow(event,activeRow,rows[nextRowIndex]),event.preventDefault()}}),[onExpandRow,onCollapseRow,onFocusRow]);return(0,jsx_runtime.jsx)(RovingTabIndex,{children:(0,jsx_runtime.jsx)("div",{role:"application","aria-label":applicationAriaLabel,children:(0,jsx_runtime.jsx)("table",{...props,role:"treegrid",onKeyDown,ref,children:(0,jsx_runtime.jsx)("tbody",{children})})})})}));const tree_grid_row=(0,react.forwardRef)((function UnforwardedTreeGridRow({children,level,positionInSet,setSize,isExpanded,...props},ref){return(0,jsx_runtime.jsx)("tr",{...props,ref,role:"row","aria-level":level,"aria-posinset":positionInSet,"aria-setsize":setSize,"aria-expanded":isExpanded,children})})),roving_tab_index_item=(0,react.forwardRef)((function UnforwardedRovingTabIndexItem({children,as:Component,...props},forwardedRef){const localRef=(0,react.useRef)(),ref=forwardedRef||localRef,{lastFocusedElement,setLastFocusedElement}=(0,react.useContext)(RovingTabIndexContext);let tabIndex;lastFocusedElement&&(tabIndex=lastFocusedElement===("current"in ref?ref.current:void 0)?0:-1);const allProps={ref,tabIndex,onFocus:event=>setLastFocusedElement?.(event.target),...props};return"function"==typeof children?children(allProps):Component?(0,jsx_runtime.jsx)(Component,{...allProps,children}):null}));const tree_grid_item=(0,react.forwardRef)((function UnforwardedTreeGridItem({children,...props},ref){return(0,jsx_runtime.jsx)(roving_tab_index_item,{ref,...props,children})}));const cell=(0,react.forwardRef)((function UnforwardedTreeGridCell({children,withoutGridItem=!1,...props},ref){return(0,jsx_runtime.jsx)("td",{...props,role:"gridcell",children:withoutGridItem?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children}):(0,jsx_runtime.jsx)(tree_grid_item,{ref,children})})})),ListViewContext=(0,react.createContext)({}),useListViewContext=()=>(0,react.useContext)(ListViewContext);function AriaReferencedText({children,...props}){const ref=(0,react.useRef)();return(0,react.useEffect)((()=>{ref.current&&(ref.current.textContent=ref.current.textContent)}),[children]),(0,jsx_runtime.jsx)("div",{hidden:!0,...props,ref,children})}const Appender=(0,react.forwardRef)((({nestingLevel,blockCount,clientId,...props},ref)=>{const{insertedBlock,setInsertedBlock}=useListViewContext(),instanceId=(0,use_instance_id.A)(Appender),hideInserter=(0,use_select.A)((select=>{const{getTemplateLock,isZoomOut}=unlock(select(store_store));return!!getTemplateLock(clientId)||isZoomOut()}),[clientId]),blockTitle=useBlockDisplayTitle({clientId,context:"list-view"}),insertedBlockTitle=useBlockDisplayTitle({clientId:insertedBlock?.clientId,context:"list-view"});if((0,react.useEffect)((()=>{insertedBlockTitle?.length&&(0,a11y_build_module.L)((0,i18n_build_module.nv)((0,i18n_build_module.__)("%s block inserted"),insertedBlockTitle),"assertive")}),[insertedBlockTitle]),hideInserter)return null;const descriptionId=`list-view-appender__${instanceId}`,description=(0,i18n_build_module.nv)((0,i18n_build_module.__)("Append to %1$s block at position %2$d, Level %3$d"),blockTitle,blockCount+1,nestingLevel);return(0,jsx_runtime.jsxs)("div",{className:"list-view-appender",children:[(0,jsx_runtime.jsx)(inserter,{ref,rootClientId:clientId,position:"bottom right",isAppender:!0,selectBlockOnInsert:!1,shouldDirectInsert:!1,__experimentalIsQuick:!0,...props,toggleProps:{"aria-describedby":descriptionId},onSelectOrClose:maybeInsertedBlock=>{maybeInsertedBlock?.clientId&&setInsertedBlock(maybeInsertedBlock)}}),(0,jsx_runtime.jsx)(AriaReferencedText,{id:descriptionId,children:description})]})})),AnimatedTreeGridRow=(0,react_spring_web_esm.animated)(tree_grid_row),ListViewLeaf=(0,react.forwardRef)((({isDragged,isSelected,position,level,rowCount,children,className,path,...props},ref)=>{const animationRef=use_moving_animation({clientId:props["data-block"],enableAnimation:!0,triggerAnimationOnChange:path}),mergedRef=(0,use_merge_refs.A)([ref,animationRef]);return(0,jsx_runtime.jsx)(AnimatedTreeGridRow,{ref:mergedRef,className:(0,clsx.A)("block-editor-list-view-leaf",className),level,positionInSet:position,setSize:rowCount,isExpanded:void 0,...props,children})})),leaf=ListViewLeaf;const pin_small=(0,jsx_runtime.jsx)(svg.t4,{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M10.97 10.159a3.382 3.382 0 0 0-2.857.955l1.724 1.723-2.836 2.913L7 17h1.25l2.913-2.837 1.723 1.723a3.38 3.38 0 0 0 .606-.825c.33-.63.446-1.343.35-2.032L17 10.695 13.305 7l-2.334 3.159Z"})}),lock_small=(0,jsx_runtime.jsx)(svg.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)(svg.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M15 11h-.2V9c0-1.5-1.2-2.8-2.8-2.8S9.2 7.5 9.2 9v2H9c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1h6c.6 0 1-.4 1-1v-4c0-.6-.4-1-1-1zm-1.8 0h-2.5V9c0-.7.6-1.2 1.2-1.2s1.2.6 1.2 1.2v2z"})});function ListViewExpander({onClick}){return(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view__expander",onClick:event=>onClick(event,{forceToggle:!0}),"aria-hidden":"true","data-testid":"list-view-expander",children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:(0,i18n_build_module.V8)()?chevron_left_small.A:chevron_right_small.A})})}const MAX_IMAGES=3;function getImage(block){if("core/image"===block.name)return block.attributes?.url?{url:block.attributes.url,alt:block.attributes.alt,clientId:block.clientId}:void 0}function getImagesFromBlock(block,isExpanded){const img=getImage(block);return img?[img]:isExpanded?[]:function getImagesFromGallery(block){if("core/gallery"!==block.name||!block.innerBlocks)return[];const images=[];for(const innerBlock of block.innerBlocks){const img=getImage(innerBlock);if(img&&images.push(img),images.length>=MAX_IMAGES)return images}return images}(block)}const block_select_button=(0,react.forwardRef)((function ListViewBlockSelectButton({className,block:{clientId},onClick,onContextMenu,onMouseDown,onToggleExpanded,tabIndex,onFocus,onDragStart,onDragEnd,draggable,isExpanded,ariaDescribedBy},ref){const blockInformation=useBlockDisplayInformation(clientId),blockTitle=useBlockDisplayTitle({clientId,context:"list-view"}),{isLocked}=useBlockLock(clientId),{isContentOnly}=(0,use_select.A)((select=>({isContentOnly:"contentOnly"===select(store_store).getBlockEditingMode(clientId)})),[clientId]),shouldShowLockIcon=isLocked&&!isContentOnly,isSticky="sticky"===blockInformation?.positionType,images=function useListViewImages({clientId,isExpanded}){const{block}=(0,use_select.A)((select=>({block:select(store_store).getBlock(clientId)})),[clientId]);return(0,react.useMemo)((()=>getImagesFromBlock(block,isExpanded)),[block,isExpanded])}({clientId,isExpanded});return(0,jsx_runtime.jsxs)("a",{className:(0,clsx.A)("block-editor-list-view-block-select-button",className),onClick,onContextMenu,onKeyDown:function onKeyDown(event){event.keyCode!==keycodes_build_module.Fm&&event.keyCode!==keycodes_build_module.t6||onClick(event)},onMouseDown,ref,tabIndex,onFocus,onDragStart:event=>{event.dataTransfer.clearData(),onDragStart?.(event)},onDragEnd,draggable,href:`#block-${clientId}`,"aria-describedby":ariaDescribedBy,"aria-expanded":isExpanded,children:[(0,jsx_runtime.jsx)(ListViewExpander,{onClick:onToggleExpanded}),(0,jsx_runtime.jsx)(block_icon,{icon:blockInformation?.icon,showColors:!0,context:"list-view"}),(0,jsx_runtime.jsxs)(h_stack_component.A,{alignment:"center",className:"block-editor-list-view-block-select-button__label-wrapper",justify:"flex-start",spacing:1,children:[(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view-block-select-button__title",children:(0,jsx_runtime.jsx)(truncate_component.A,{ellipsizeMode:"auto",children:blockTitle})}),blockInformation?.anchor&&(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view-block-select-button__anchor-wrapper",children:(0,jsx_runtime.jsx)(truncate_component.A,{className:"block-editor-list-view-block-select-button__anchor",ellipsizeMode:"auto",children:blockInformation.anchor})}),isSticky&&(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view-block-select-button__sticky",children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:pin_small})}),images.length?(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view-block-select-button__images","aria-hidden":!0,children:images.map(((image,index)=>(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view-block-select-button__image",style:{backgroundImage:`url(${image.url})`,zIndex:images.length-index}},image.clientId)))}):null,shouldShowLockIcon&&(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view-block-select-button__lock",children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:lock_small})})]})]})})),ListViewBlockContents=(0,react.forwardRef)((({onClick,onToggleExpanded,block,isSelected,position,siblingBlockCount,level,isExpanded,selectedClientIds,...props},ref)=>{const{clientId}=block,{AdditionalBlockContent,insertedBlock,setInsertedBlock}=useListViewContext(),draggableClientIds=selectedClientIds.includes(clientId)?selectedClientIds:[clientId];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[AdditionalBlockContent&&(0,jsx_runtime.jsx)(AdditionalBlockContent,{block,insertedBlock,setInsertedBlock}),(0,jsx_runtime.jsx)(block_draggable,{appendToOwnerDocument:!0,clientIds:draggableClientIds,cloneClassname:"block-editor-list-view-draggable-chip",children:({draggable,onDragStart,onDragEnd})=>(0,jsx_runtime.jsx)(block_select_button,{ref,className:"block-editor-list-view-block-contents",block,onClick,onToggleExpanded,isSelected,position,siblingBlockCount,level,draggable,onDragStart,onDragEnd,isExpanded,...props})})]})})),block_contents=ListViewBlockContents;function focusListItem(focusClientId,treeGridElement){const getFocusElement=()=>{const row=treeGridElement?.querySelector(`[role=row][data-block="${focusClientId}"]`);return row?dom_build_module.XC.focusable.find(row)[0]:null};let focusElement=getFocusElement();focusElement?focusElement.focus():window.requestAnimationFrame((()=>{focusElement=getFocusElement(),focusElement&&focusElement.focus()}))}const list_view_block=(0,react.memo)((function ListViewBlock({block:{clientId},displacement,isAfterDraggedBlocks,isDragged,isNesting,isSelected,isBranchSelected,selectBlock,position,level,rowCount,siblingBlockCount,showBlockMovers,path,isExpanded,selectedClientIds,isSyncedBranch}){const cellRef=(0,react.useRef)(null),rowRef=(0,react.useRef)(null),settingsRef=(0,react.useRef)(null),[isHovered,setIsHovered]=(0,react.useState)(!1),[settingsAnchorRect,setSettingsAnchorRect]=(0,react.useState)(),{isLocked,canEdit,canMove}=useBlockLock(clientId),isFirstSelectedBlock=isSelected&&selectedClientIds[0]===clientId,isLastSelectedBlock=isSelected&&selectedClientIds[selectedClientIds.length-1]===clientId,{toggleBlockHighlight,duplicateBlocks,multiSelect,replaceBlocks,removeBlocks,insertAfterBlock,insertBeforeBlock,setOpenedBlockSettingsMenu}=unlock((0,use_dispatch.A)(store_store)),{canInsertBlockType,getSelectedBlockClientIds,getPreviousBlockClientId,getBlockRootClientId,getBlockOrder,getBlockParents,getBlocksByClientId,canRemoveBlocks,isGroupable}=(0,use_select.A)(store_store),{getGroupingBlockName}=(0,use_select.A)(build_module.M_),blockInformation=useBlockDisplayInformation(clientId),{block,blockName,allowRightClickOverrides}=(0,use_select.A)((select=>{const{getBlock,getBlockName,getSettings}=select(store_store);return{block:getBlock(clientId),blockName:getBlockName(clientId),allowRightClickOverrides:getSettings().allowRightClickOverrides}}),[clientId]),showBlockActions=(0,build_module.pN)(blockName,"__experimentalToolbar",!0),descriptionId=`list-view-block-select-button__description-${(0,use_instance_id.A)(ListViewBlock)}`,{expand,collapse,collapseAll,BlockSettingsMenu,listViewInstanceId,expandedState,setInsertedBlock,treeGridElementRef,rootClientId}=useListViewContext(),isMatch=(0,keyboard_shortcuts_build_module.ZK)();function getBlocksToUpdate(){const selectedBlockClientIds=getSelectedBlockClientIds(),isUpdatingSelectedBlocks=selectedBlockClientIds.includes(clientId),firstBlockClientId=isUpdatingSelectedBlocks?selectedBlockClientIds[0]:clientId,firstBlockRootClientId=getBlockRootClientId(firstBlockClientId);return{blocksToUpdate:isUpdatingSelectedBlocks?selectedBlockClientIds:[clientId],firstBlockClientId,firstBlockRootClientId,selectedBlockClientIds}}const onMouseEnter=(0,react.useCallback)((()=>{setIsHovered(!0),toggleBlockHighlight(clientId,!0)}),[clientId,setIsHovered,toggleBlockHighlight]),onMouseLeave=(0,react.useCallback)((()=>{setIsHovered(!1),toggleBlockHighlight(clientId,!1)}),[clientId,setIsHovered,toggleBlockHighlight]),selectEditorBlock=(0,react.useCallback)((event=>{selectBlock(event,clientId),event.preventDefault()}),[clientId,selectBlock]),updateFocusAndSelection=(0,react.useCallback)(((focusClientId,shouldSelectBlock)=>{shouldSelectBlock&&selectBlock(void 0,focusClientId,null,null),focusListItem(focusClientId,treeGridElementRef?.current)}),[selectBlock,treeGridElementRef]),toggleExpanded=(0,react.useCallback)((event=>{event.preventDefault(),event.stopPropagation(),!0===isExpanded?collapse(clientId):!1===isExpanded&&expand(clientId)}),[clientId,expand,collapse,isExpanded]),onContextMenu=(0,react.useCallback)((event=>{showBlockActions&&allowRightClickOverrides&&(settingsRef.current?.click(),setSettingsAnchorRect(new window.DOMRect(event.clientX,event.clientY,0,0)),event.preventDefault())}),[allowRightClickOverrides,settingsRef,showBlockActions]),onMouseDown=(0,react.useCallback)((event=>{allowRightClickOverrides&&2===event.button&&event.preventDefault()}),[allowRightClickOverrides]),settingsPopoverAnchor=(0,react.useMemo)((()=>{const{ownerDocument}=rowRef?.current||{};if(settingsAnchorRect&&ownerDocument)return{ownerDocument,getBoundingClientRect:()=>settingsAnchorRect}}),[settingsAnchorRect]),clearSettingsAnchorRect=(0,react.useCallback)((()=>{setSettingsAnchorRect(void 0)}),[setSettingsAnchorRect]);if(function useListViewScrollIntoView({isSelected,selectedClientIds,rowItemRef}){const isSingleSelection=1===selectedClientIds.length;(0,react.useLayoutEffect)((()=>{if(!isSelected||!isSingleSelection||!rowItemRef.current)return;const scrollContainer=(0,get_scroll_container.A)(rowItemRef.current),{ownerDocument}=rowItemRef.current;if(scrollContainer===ownerDocument.body||scrollContainer===ownerDocument.documentElement||!scrollContainer)return;const rowRect=rowItemRef.current.getBoundingClientRect(),scrollContainerRect=scrollContainer.getBoundingClientRect();(rowRect.top<scrollContainerRect.top||rowRect.bottom>scrollContainerRect.bottom)&&rowItemRef.current.scrollIntoView()}),[isSelected,isSingleSelection,rowItemRef])}({isSelected,rowItemRef:rowRef,selectedClientIds}),!block)return null;const blockPositionDescription=((position,siblingCount,level)=>(0,i18n_build_module.nv)((0,i18n_build_module.__)("Block %1$d of %2$d, Level %3$d."),position,siblingCount,level))(position,siblingBlockCount,level),blockPropertiesDescription=((blockInformation,isLocked)=>[blockInformation?.positionLabel?`${(0,i18n_build_module.nv)((0,i18n_build_module.__)("Position: %s"),blockInformation.positionLabel)}.`:void 0,isLocked?(0,i18n_build_module.__)("This block is locked."):void 0].filter(Boolean).join(" "))(blockInformation,isLocked),hasRenderedMovers=showBlockMovers&&siblingBlockCount>0,moverCellClassName=(0,clsx.A)("block-editor-list-view-block__mover-cell",{"is-visible":isHovered||isSelected}),listViewBlockSettingsClassName=(0,clsx.A)("block-editor-list-view-block__menu-cell",{"is-visible":isHovered||isFirstSelectedBlock});let colSpan;hasRenderedMovers?colSpan=2:showBlockActions||(colSpan=3);const classes=(0,clsx.A)({"is-selected":isSelected,"is-first-selected":isFirstSelectedBlock,"is-last-selected":isLastSelectedBlock,"is-branch-selected":isBranchSelected,"is-synced-branch":isSyncedBranch,"is-dragging":isDragged,"has-single-cell":!showBlockActions,"is-synced":blockInformation?.isSynced,"is-draggable":canMove,"is-displacement-normal":"normal"===displacement,"is-displacement-up":"up"===displacement,"is-displacement-down":"down"===displacement,"is-after-dragged-blocks":isAfterDraggedBlocks,"is-nesting":isNesting}),dropdownClientIds=selectedClientIds.includes(clientId)?selectedClientIds:[clientId],currentlyEditingBlockInCanvas=isSelected&&1===selectedClientIds.length;return(0,jsx_runtime.jsxs)(leaf,{className:classes,isDragged,onKeyDown:async function onKeyDown(event){if(event.defaultPrevented)return;if(event.target.closest("[role=dialog]"))return;const isDeleteKey=[keycodes_build_module.G_,keycodes_build_module.SJ].includes(event.keyCode);if(isMatch("core/block-editor/unselect",event)&&selectedClientIds.length>0)event.stopPropagation(),event.preventDefault(),selectBlock(event,void 0);else if(isDeleteKey||isMatch("core/block-editor/remove",event)){var _getPreviousBlockClie;const{blocksToUpdate:blocksToDelete,firstBlockClientId,firstBlockRootClientId,selectedBlockClientIds}=getBlocksToUpdate();if(!canRemoveBlocks(blocksToDelete))return;let blockToFocus=null!==(_getPreviousBlockClie=getPreviousBlockClientId(firstBlockClientId))&&void 0!==_getPreviousBlockClie?_getPreviousBlockClie:firstBlockRootClientId;removeBlocks(blocksToDelete,!1);const shouldUpdateSelection=selectedBlockClientIds.length>0&&0===getSelectedBlockClientIds().length;blockToFocus||(blockToFocus=getBlockOrder()[0]),updateFocusAndSelection(blockToFocus,shouldUpdateSelection)}else if(isMatch("core/block-editor/duplicate",event)){event.preventDefault();const{blocksToUpdate,firstBlockRootClientId}=getBlocksToUpdate();if(getBlocksByClientId(blocksToUpdate).every((blockToUpdate=>!!blockToUpdate&&(0,build_module.pN)(blockToUpdate.name,"multiple",!0)&&canInsertBlockType(blockToUpdate.name,firstBlockRootClientId)))){const updatedBlocks=await duplicateBlocks(blocksToUpdate,!1);updatedBlocks?.length&&updateFocusAndSelection(updatedBlocks[0],!1)}}else if(isMatch("core/block-editor/insert-before",event)){event.preventDefault();const{blocksToUpdate}=getBlocksToUpdate();await insertBeforeBlock(blocksToUpdate[0]);const newlySelectedBlocks=getSelectedBlockClientIds();setOpenedBlockSettingsMenu(void 0),updateFocusAndSelection(newlySelectedBlocks[0],!1)}else if(isMatch("core/block-editor/insert-after",event)){event.preventDefault();const{blocksToUpdate}=getBlocksToUpdate();await insertAfterBlock(blocksToUpdate.at(-1));const newlySelectedBlocks=getSelectedBlockClientIds();setOpenedBlockSettingsMenu(void 0),updateFocusAndSelection(newlySelectedBlocks[0],!1)}else if(isMatch("core/block-editor/select-all",event)){event.preventDefault();const{firstBlockRootClientId,selectedBlockClientIds}=getBlocksToUpdate(),blockClientIds=getBlockOrder(firstBlockRootClientId);if(!blockClientIds.length)return;if((0,is_shallow_equal_build_module.Ay)(selectedBlockClientIds,blockClientIds)&&firstBlockRootClientId&&firstBlockRootClientId!==rootClientId)return void updateFocusAndSelection(firstBlockRootClientId,!0);multiSelect(blockClientIds[0],blockClientIds[blockClientIds.length-1],null)}else if(isMatch("core/block-editor/collapse-list-view",event)){event.preventDefault();const{firstBlockClientId}=getBlocksToUpdate(),blockParents=getBlockParents(firstBlockClientId,!1);collapseAll(),expand(blockParents)}else if(isMatch("core/block-editor/group",event)){const{blocksToUpdate}=getBlocksToUpdate();if(blocksToUpdate.length>1&&isGroupable(blocksToUpdate)){event.preventDefault();const blocks=getBlocksByClientId(blocksToUpdate),groupingBlockName=getGroupingBlockName(),newBlocks=(0,build_module.bh)(blocks,groupingBlockName);replaceBlocks(blocksToUpdate,newBlocks),(0,a11y_build_module.L)((0,i18n_build_module.__)("Selected blocks are grouped."));const newlySelectedBlocks=getSelectedBlockClientIds();setOpenedBlockSettingsMenu(void 0),updateFocusAndSelection(newlySelectedBlocks[0],!1)}}},onMouseEnter,onMouseLeave,onFocus:onMouseEnter,onBlur:onMouseLeave,level,position,rowCount,path,id:`list-view-${listViewInstanceId}-block-${clientId}`,"data-block":clientId,"data-expanded":canEdit?isExpanded:void 0,ref:rowRef,children:[(0,jsx_runtime.jsx)(cell,{className:"block-editor-list-view-block__contents-cell",colSpan,ref:cellRef,"aria-selected":!!isSelected,children:({ref,tabIndex,onFocus})=>(0,jsx_runtime.jsxs)("div",{className:"block-editor-list-view-block__contents-container",children:[(0,jsx_runtime.jsx)(block_contents,{block,onClick:selectEditorBlock,onContextMenu,onMouseDown,onToggleExpanded:toggleExpanded,isSelected,position,siblingBlockCount,level,ref,tabIndex:currentlyEditingBlockInCanvas?0:tabIndex,onFocus,isExpanded:canEdit?isExpanded:void 0,selectedClientIds,ariaDescribedBy:descriptionId}),(0,jsx_runtime.jsx)(AriaReferencedText,{id:descriptionId,children:[blockPositionDescription,blockPropertiesDescription].filter(Boolean).join(" ")})]})}),hasRenderedMovers&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(cell,{className:moverCellClassName,withoutGridItem:!0,children:[(0,jsx_runtime.jsx)(tree_grid_item,{children:({ref,tabIndex,onFocus})=>(0,jsx_runtime.jsx)(BlockMoverUpButton,{orientation:"vertical",clientIds:[clientId],ref,tabIndex,onFocus})}),(0,jsx_runtime.jsx)(tree_grid_item,{children:({ref,tabIndex,onFocus})=>(0,jsx_runtime.jsx)(BlockMoverDownButton,{orientation:"vertical",clientIds:[clientId],ref,tabIndex,onFocus})})]})}),showBlockActions&&BlockSettingsMenu&&(0,jsx_runtime.jsx)(cell,{className:listViewBlockSettingsClassName,"aria-selected":!!isSelected,ref:settingsRef,children:({ref,tabIndex,onFocus})=>(0,jsx_runtime.jsx)(BlockSettingsMenu,{clientIds:dropdownClientIds,block,icon:more_vertical.A,label:(0,i18n_build_module.__)("Options"),popoverProps:{anchor:settingsPopoverAnchor},toggleProps:{ref,className:"block-editor-list-view-block__menu",tabIndex,onClick:clearSettingsAnchorRect,onFocus},disableOpenOnArrowDown:!0,expand,expandedState,setInsertedBlock,__experimentalSelectBlock:updateFocusAndSelection})})]})}));function countBlocks(block,expandedState,draggedClientIds,isExpandedByDefault){var _expandedState$block$;const isDragged=draggedClientIds?.includes(block.clientId);if(isDragged)return 0;return(null!==(_expandedState$block$=expandedState[block.clientId])&&void 0!==_expandedState$block$?_expandedState$block$:isExpandedByDefault)?1+block.innerBlocks.reduce(countReducer(expandedState,draggedClientIds,isExpandedByDefault),0):1}const countReducer=(expandedState,draggedClientIds,isExpandedByDefault)=>(count,block)=>{var _expandedState$block$2;const isDragged=draggedClientIds?.includes(block.clientId);if(isDragged)return count;return(null!==(_expandedState$block$2=expandedState[block.clientId])&&void 0!==_expandedState$block$2?_expandedState$block$2:isExpandedByDefault)&&block.innerBlocks.length>0?count+countBlocks(block,expandedState,draggedClientIds,isExpandedByDefault):count+1},branch_noop=()=>{};const branch=(0,react.memo)((function ListViewBranch(props){const{blocks,selectBlock=branch_noop,showBlockMovers,selectedClientIds,level=1,path="",isBranchSelected=!1,listPosition=0,fixedListWindow,isExpanded,parentId,shouldShowInnerBlocks=!0,isSyncedBranch=!1,showAppender:showAppenderProp=!0}=props,parentBlockInformation=useBlockDisplayInformation(parentId),syncedBranch=isSyncedBranch||!!parentBlockInformation?.isSynced,canParentExpand=(0,use_select.A)((select=>!parentId||select(store_store).canEditBlock(parentId)),[parentId]),{blockDropPosition,blockDropTargetIndex,firstDraggedBlockIndex,blockIndexes,expandedState,draggedClientIds}=useListViewContext(),nextPositionRef=(0,react.useRef)();if(!canParentExpand)return null;const showAppender=showAppenderProp&&1===level,filteredBlocks=blocks.filter(Boolean),blockCount=filteredBlocks.length,rowCount=showAppender?blockCount+1:blockCount;return nextPositionRef.current=listPosition,(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[filteredBlocks.map(((block,index)=>{var _expandedState$client;const{clientId,innerBlocks}=block;index>0&&(nextPositionRef.current+=countBlocks(filteredBlocks[index-1],expandedState,draggedClientIds,isExpanded));const isDragged=!!draggedClientIds?.includes(clientId),{displacement,isAfterDraggedBlocks,isNesting}=function getDragDisplacementValues({blockIndexes,blockDropTargetIndex,blockDropPosition,clientId,firstDraggedBlockIndex,isDragged}){let displacement,isNesting,isAfterDraggedBlocks;if(!isDragged){isNesting=!1;const thisBlockIndex=blockIndexes[clientId];isAfterDraggedBlocks=thisBlockIndex>firstDraggedBlockIndex,null!=blockDropTargetIndex&&void 0!==firstDraggedBlockIndex?void 0!==thisBlockIndex&&(displacement=thisBlockIndex>=firstDraggedBlockIndex&&thisBlockIndex<blockDropTargetIndex?"up":thisBlockIndex<firstDraggedBlockIndex&&thisBlockIndex>=blockDropTargetIndex?"down":"normal",isNesting="number"==typeof blockDropTargetIndex&&blockDropTargetIndex-1===thisBlockIndex&&"inside"===blockDropPosition):null===blockDropTargetIndex&&void 0!==firstDraggedBlockIndex?displacement=void 0!==thisBlockIndex&&thisBlockIndex>=firstDraggedBlockIndex?"up":"normal":null!=blockDropTargetIndex&&void 0===firstDraggedBlockIndex?void 0!==thisBlockIndex&&(displacement=thisBlockIndex<blockDropTargetIndex?"normal":"down"):null===blockDropTargetIndex&&(displacement="normal")}return{displacement,isNesting,isAfterDraggedBlocks}}({blockIndexes,blockDropTargetIndex,blockDropPosition,clientId,firstDraggedBlockIndex,isDragged}),{itemInView}=fixedListWindow,blockInView=itemInView(nextPositionRef.current),position=index+1,updatedPath=path.length>0?`${path}_${position}`:`${position}`,hasNestedBlocks=!!innerBlocks?.length,shouldExpand=hasNestedBlocks&&shouldShowInnerBlocks?null!==(_expandedState$client=expandedState[clientId])&&void 0!==_expandedState$client?_expandedState$client:isExpanded:void 0,isSelected=((clientId,selectedBlockClientIds)=>Array.isArray(selectedBlockClientIds)&&selectedBlockClientIds.length?-1!==selectedBlockClientIds.indexOf(clientId):selectedBlockClientIds===clientId)(clientId,selectedClientIds),isSelectedBranch=isBranchSelected||isSelected&&hasNestedBlocks,showBlock=isDragged||blockInView||isSelected&&clientId===selectedClientIds[0]||0===index||index===blockCount-1;return(0,jsx_runtime.jsxs)(async_mode_provider_context.Ay,{value:!isSelected,children:[showBlock&&(0,jsx_runtime.jsx)(list_view_block,{block,selectBlock,isSelected,isBranchSelected:isSelectedBranch,isDragged,level,position,rowCount,siblingBlockCount:blockCount,showBlockMovers,path:updatedPath,isExpanded:!isDragged&&shouldExpand,listPosition:nextPositionRef.current,selectedClientIds,isSyncedBranch:syncedBranch,displacement,isAfterDraggedBlocks,isNesting}),!showBlock&&(0,jsx_runtime.jsx)("tr",{children:(0,jsx_runtime.jsx)("td",{className:"block-editor-list-view-placeholder"})}),hasNestedBlocks&&shouldExpand&&!isDragged&&(0,jsx_runtime.jsx)(ListViewBranch,{parentId:clientId,blocks:innerBlocks,selectBlock,showBlockMovers,level:level+1,path:updatedPath,listPosition:nextPositionRef.current+1,fixedListWindow,isBranchSelected:isSelectedBranch,selectedClientIds,isExpanded,isSyncedBranch:syncedBranch})]},clientId)})),showAppender&&(0,jsx_runtime.jsx)(tree_grid_row,{level,setSize:rowCount,positionInSet:rowCount,isExpanded:!0,children:(0,jsx_runtime.jsx)(cell,{children:treeGridCellProps=>(0,jsx_runtime.jsx)(Appender,{clientId:parentId,nestingLevel:level,blockCount,...treeGridCellProps})})})]})}));function ListViewDropIndicatorPreview({draggedBlockClientId,listViewRef,blockDropTarget}){const blockInformation=useBlockDisplayInformation(draggedBlockClientId),blockTitle=useBlockDisplayTitle({clientId:draggedBlockClientId,context:"list-view"}),{rootClientId,clientId,dropPosition}=blockDropTarget||{},[rootBlockElement,blockElement]=(0,react.useMemo)((()=>{if(!listViewRef.current)return[];return[rootClientId?listViewRef.current.querySelector(`[data-block="${rootClientId}"]`):void 0,clientId?listViewRef.current.querySelector(`[data-block="${clientId}"]`):void 0]}),[listViewRef,rootClientId,clientId]),targetElement=blockElement||rootBlockElement,rtl=(0,i18n_build_module.V8)(),getDropIndicatorWidth=(0,react.useCallback)(((targetElementRect,indent)=>{if(!targetElement)return 0;let width=targetElement.offsetWidth;const scrollContainer=(0,get_scroll_container.A)(targetElement,"horizontal"),ownerDocument=targetElement.ownerDocument,windowScroll=scrollContainer===ownerDocument.body||scrollContainer===ownerDocument.documentElement;if(scrollContainer&&!windowScroll){const scrollContainerRect=scrollContainer.getBoundingClientRect(),distanceBetweenContainerAndTarget=(0,i18n_build_module.V8)()?scrollContainerRect.right-targetElementRect.right:targetElementRect.left-scrollContainerRect.left,scrollContainerWidth=scrollContainer.clientWidth;if(scrollContainerWidth<width+distanceBetweenContainerAndTarget&&(width=scrollContainerWidth-distanceBetweenContainerAndTarget),!rtl&&targetElementRect.left+indent<scrollContainerRect.left)return width-=scrollContainerRect.left-targetElementRect.left,width;if(rtl&&targetElementRect.right-indent>scrollContainerRect.right)return width-=targetElementRect.right-scrollContainerRect.right,width}return width-indent}),[rtl,targetElement]),style=(0,react.useMemo)((()=>{if(!targetElement)return{};const targetElementRect=targetElement.getBoundingClientRect();return{width:getDropIndicatorWidth(targetElementRect,0)}}),[getDropIndicatorWidth,targetElement]),horizontalScrollOffsetStyle=(0,react.useMemo)((()=>{if(!targetElement)return{};const scrollContainer=(0,get_scroll_container.A)(targetElement),ownerDocument=targetElement.ownerDocument,windowScroll=scrollContainer===ownerDocument.body||scrollContainer===ownerDocument.documentElement;if(scrollContainer&&!windowScroll){const scrollContainerRect=scrollContainer.getBoundingClientRect(),targetElementRect=targetElement.getBoundingClientRect(),distanceBetweenContainerAndTarget=rtl?scrollContainerRect.right-targetElementRect.right:targetElementRect.left-scrollContainerRect.left;if(!rtl&&scrollContainerRect.left>targetElementRect.left)return{transform:`translateX( ${distanceBetweenContainerAndTarget}px )`};if(rtl&&scrollContainerRect.right<targetElementRect.right)return{transform:`translateX( ${-1*distanceBetweenContainerAndTarget}px )`}}return{}}),[rtl,targetElement]),ariaLevel=(0,react.useMemo)((()=>{if(!rootBlockElement)return 1;const _ariaLevel=parseInt(rootBlockElement.getAttribute("aria-level"),10);return _ariaLevel?_ariaLevel+1:1}),[rootBlockElement]),hasAdjacentSelectedBranch=(0,react.useMemo)((()=>!!targetElement&&targetElement.classList.contains("is-branch-selected")),[targetElement]),popoverAnchor=(0,react.useMemo)((()=>{if(targetElement&&("top"===dropPosition||"bottom"===dropPosition||"inside"===dropPosition))return{contextElement:targetElement,getBoundingClientRect(){const rect=targetElement.getBoundingClientRect();let left=rect.left,top=0;const scrollContainer=(0,get_scroll_container.A)(targetElement,"horizontal"),doc=targetElement.ownerDocument,windowScroll=scrollContainer===doc.body||scrollContainer===doc.documentElement;if(scrollContainer&&!windowScroll){const scrollContainerRect=scrollContainer.getBoundingClientRect(),scrollbarWidth=rtl?scrollContainer.offsetWidth-scrollContainer.clientWidth:0;left<scrollContainerRect.left+scrollbarWidth&&(left=scrollContainerRect.left+scrollbarWidth)}top="top"===dropPosition?rect.top-2*rect.height:rect.top;const width=getDropIndicatorWidth(rect,0),height=rect.height;return new window.DOMRect(left,top,width,height)}}}),[targetElement,dropPosition,getDropIndicatorWidth,rtl]);return targetElement?(0,jsx_runtime.jsx)(popover.Ay,{animate:!1,anchor:popoverAnchor,focusOnMount:!1,className:"block-editor-list-view-drop-indicator--preview",variant:"unstyled",flip:!1,resize:!0,children:(0,jsx_runtime.jsx)("div",{style,className:(0,clsx.A)("block-editor-list-view-drop-indicator__line",{"block-editor-list-view-drop-indicator__line--darker":hasAdjacentSelectedBranch}),children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-list-view-leaf","aria-level":ariaLevel,children:[(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("block-editor-list-view-block-select-button","block-editor-list-view-block-contents"),style:horizontalScrollOffsetStyle,children:[(0,jsx_runtime.jsx)(ListViewExpander,{onClick:()=>{}}),(0,jsx_runtime.jsx)(block_icon,{icon:blockInformation?.icon,showColors:!0,context:"list-view"}),(0,jsx_runtime.jsx)(h_stack_component.A,{alignment:"center",className:"block-editor-list-view-block-select-button__label-wrapper",justify:"flex-start",spacing:1,children:(0,jsx_runtime.jsx)("span",{className:"block-editor-list-view-block-select-button__title",children:(0,jsx_runtime.jsx)(truncate_component.A,{ellipsizeMode:"auto",children:blockTitle})})})]}),(0,jsx_runtime.jsx)("div",{className:"block-editor-list-view-block__menu-cell"})]})})}):null}function useBlockSelection(){const{clearSelectedBlock,multiSelect,selectBlock}=(0,use_dispatch.A)(store_store),{getBlockName,getBlockParents,getBlockSelectionStart,getSelectedBlockClientIds,hasMultiSelection,hasSelectedBlock}=(0,use_select.A)(store_store),{getBlockType}=(0,use_select.A)(build_module.M_);return{updateBlockSelection:(0,react.useCallback)((async(event,clientId,destinationClientId,focusPosition)=>{if(!event?.shiftKey&&event?.keyCode!==keycodes_build_module._f)return void selectBlock(clientId,focusPosition);event.preventDefault();const isOnlyDeselection="keydown"===event.type&&event.keyCode===keycodes_build_module._f,isKeyPress="keydown"===event.type&&(event.keyCode===keycodes_build_module.UP||event.keyCode===keycodes_build_module.PX||event.keyCode===keycodes_build_module.yZ||event.keyCode===keycodes_build_module.Kp);if(!isKeyPress&&!hasSelectedBlock()&&!hasMultiSelection())return void selectBlock(clientId,null);const selectedBlocks=getSelectedBlockClientIds(),clientIdWithParents=[...getBlockParents(clientId),clientId];if((isOnlyDeselection||isKeyPress&&!selectedBlocks.some((blockId=>clientIdWithParents.includes(blockId))))&&await clearSelectedBlock(),!isOnlyDeselection){let startTarget=getBlockSelectionStart(),endTarget=clientId;isKeyPress&&(hasSelectedBlock()||hasMultiSelection()||(startTarget=clientId),destinationClientId&&(endTarget=destinationClientId));const startParents=getBlockParents(startTarget),endParents=getBlockParents(endTarget),{start,end}=function getCommonDepthClientIds(startId,endId,startParents,endParents){const startPath=[...startParents,startId],endPath=[...endParents,endId],depth=Math.min(startPath.length,endPath.length)-1;return{start:startPath[depth],end:endPath[depth]}}(startTarget,endTarget,startParents,endParents);await multiSelect(start,end,null)}const updatedSelectedBlocks=getSelectedBlockClientIds();if((event.keyCode===keycodes_build_module.yZ||event.keyCode===keycodes_build_module.Kp)&&updatedSelectedBlocks.length>1)return;const selectionDiff=selectedBlocks.filter((blockId=>!updatedSelectedBlocks.includes(blockId)));let label;if(1===selectionDiff.length){const title=getBlockType(getBlockName(selectionDiff[0]))?.title;title&&(label=(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s deselected."),title))}else selectionDiff.length>1&&(label=(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s blocks deselected."),selectionDiff.length));label&&(0,a11y_build_module.L)(label,"assertive")}),[clearSelectedBlock,getBlockName,getBlockType,getBlockParents,getBlockSelectionStart,getSelectedBlockClientIds,hasMultiSelection,hasSelectedBlock,multiSelect,selectBlock])}}const NESTING_LEVEL_INDENTATION=24;function getNextNonDraggedBlock(blocksData,index){const nextBlockData=blocksData[index+1];return nextBlockData&&nextBlockData.isDraggedBlock?getNextNonDraggedBlock(blocksData,index+1):nextBlockData}const ALLOWED_DROP_EDGES=["top","bottom"];function getListViewDropTarget(blocksData,position,rtl=!1){let candidateEdge,candidateBlockData,candidateDistance,candidateRect,candidateBlockIndex;for(let i=0;i<blocksData.length;i++){const blockData=blocksData[i];if(blockData.isDraggedBlock)continue;const rect=blockData.element.getBoundingClientRect(),[distance,edge]=getDistanceToNearestEdge(position,rect,ALLOWED_DROP_EDGES),isCursorWithinBlock=isPointContainedByRect(position,rect);if(void 0===candidateDistance||distance<candidateDistance||isCursorWithinBlock){candidateDistance=distance;const index=blocksData.indexOf(blockData),previousBlockData=blocksData[index-1];if("top"===edge&&previousBlockData&&previousBlockData.rootClientId===blockData.rootClientId&&!previousBlockData.isDraggedBlock?(candidateBlockData=previousBlockData,candidateEdge="bottom",candidateRect=previousBlockData.element.getBoundingClientRect(),candidateBlockIndex=index-1):(candidateBlockData=blockData,candidateEdge=edge,candidateRect=rect,candidateBlockIndex=index),isCursorWithinBlock)break}}if(!candidateBlockData)return;const candidateBlockParents=function getCandidateBlockParents(candidateBlockData,blocksData){const candidateBlockParents=[];let currentBlockData=candidateBlockData;for(;currentBlockData;)candidateBlockParents.push({...currentBlockData}),currentBlockData=blocksData.find((blockData=>blockData.clientId===currentBlockData.rootClientId));return candidateBlockParents}(candidateBlockData,blocksData),isDraggingBelow="bottom"===candidateEdge;if(isDraggingBelow&&candidateBlockData.canInsertDraggedBlocksAsChild&&(candidateBlockData.innerBlockCount>0&&candidateBlockData.isExpanded||function isNestingGesture(point,rect,nestingLevel=1,rtl=!1){const blockIndentPosition=rtl?rect.right-nestingLevel*NESTING_LEVEL_INDENTATION:rect.left+nestingLevel*NESTING_LEVEL_INDENTATION;return(rtl?point.x<blockIndentPosition-NESTING_LEVEL_INDENTATION:point.x>blockIndentPosition+NESTING_LEVEL_INDENTATION)&&point.y<rect.bottom}(position,candidateRect,candidateBlockParents.length,rtl))){const newBlockIndex=candidateBlockData.isExpanded?0:candidateBlockData.innerBlockCount||0;return{rootClientId:candidateBlockData.clientId,clientId:candidateBlockData.clientId,blockIndex:newBlockIndex,dropPosition:"inside"}}if(isDraggingBelow&&candidateBlockData.rootClientId&&function isUpGesture(point,rect,nestingLevel=1,rtl=!1){const blockIndentPosition=rtl?rect.right-nestingLevel*NESTING_LEVEL_INDENTATION:rect.left+nestingLevel*NESTING_LEVEL_INDENTATION;return rtl?point.x>blockIndentPosition:point.x<blockIndentPosition}(position,candidateRect,candidateBlockParents.length,rtl)){const nextBlock=getNextNonDraggedBlock(blocksData,candidateBlockIndex),currentLevel=candidateBlockData.nestingLevel,nextLevel=nextBlock?nextBlock.nestingLevel:1;if(currentLevel&&nextLevel){const desiredRelativeLevel=function getDesiredRelativeParentLevel(point,rect,nestingLevel=1,rtl=!1){const blockIndentPosition=rtl?rect.right-nestingLevel*NESTING_LEVEL_INDENTATION:rect.left+nestingLevel*NESTING_LEVEL_INDENTATION,distanceBetweenPointAndBlockIndentPosition=rtl?blockIndentPosition-point.x:point.x-blockIndentPosition,desiredParentLevel=Math.round(distanceBetweenPointAndBlockIndentPosition/NESTING_LEVEL_INDENTATION);return Math.abs(desiredParentLevel)}(position,candidateRect,candidateBlockParents.length,rtl),targetParentIndex=Math.max(Math.min(desiredRelativeLevel,currentLevel-nextLevel),0);if(candidateBlockParents[targetParentIndex]){let newBlockIndex=candidateBlockData.blockIndex;if(candidateBlockParents[targetParentIndex].nestingLevel===nextBlock?.nestingLevel)newBlockIndex=nextBlock?.blockIndex;else for(let i=candidateBlockIndex;i>=0;i--){const blockData=blocksData[i];if(blockData.rootClientId===candidateBlockParents[targetParentIndex].rootClientId){newBlockIndex=blockData.blockIndex+1;break}}return{rootClientId:candidateBlockParents[targetParentIndex].rootClientId,clientId:candidateBlockData.clientId,blockIndex:newBlockIndex,dropPosition:candidateEdge}}}}if(!candidateBlockData.canInsertDraggedBlocksAsSibling)return;const offset=isDraggingBelow?1:0;return{rootClientId:candidateBlockData.rootClientId,clientId:candidateBlockData.clientId,blockIndex:candidateBlockData.blockIndex+offset,dropPosition:candidateEdge}}const EXPAND_THROTTLE_OPTIONS={leading:!1,trailing:!0};function use_clipboard_handler_useClipboardHandler({selectBlock}){const registry=(0,use_registry.A)(),{getBlockOrder,getBlockRootClientId,getBlocksByClientId,getPreviousBlockClientId,getSelectedBlockClientIds,getSettings,canInsertBlockType,canRemoveBlocks}=(0,use_select.A)(store_store),{flashBlock,removeBlocks,replaceBlocks,insertBlocks}=(0,use_dispatch.A)(store_store),notifyCopy=useNotifyCopy();return(0,use_ref_effect.A)((node=>{function updateFocusAndSelection(focusClientId,shouldSelectBlock){shouldSelectBlock&&selectBlock(void 0,focusClientId,null,null),focusListItem(focusClientId,node)}function handler(event){if(event.defaultPrevented)return;if(!node.contains(event.target.ownerDocument.activeElement))return;const listViewRow=event.target.ownerDocument.activeElement?.closest("[role=row]"),clientId=listViewRow?.dataset?.block;if(!clientId)return;const{blocksToUpdate:selectedBlockClientIds,firstBlockClientId,firstBlockRootClientId,originallySelectedBlockClientIds}=function getBlocksToUpdate(clientId){const selectedBlockClientIds=getSelectedBlockClientIds(),isUpdatingSelectedBlocks=selectedBlockClientIds.includes(clientId),firstBlockClientId=isUpdatingSelectedBlocks?selectedBlockClientIds[0]:clientId;return{blocksToUpdate:isUpdatingSelectedBlocks?selectedBlockClientIds:[clientId],firstBlockClientId,firstBlockRootClientId:getBlockRootClientId(firstBlockClientId),originallySelectedBlockClientIds:selectedBlockClientIds}}(clientId);if(0!==selectedBlockClientIds.length){if(event.preventDefault(),"copy"===event.type||"cut"===event.type){1===selectedBlockClientIds.length&&flashBlock(selectedBlockClientIds[0]),notifyCopy(event.type,selectedBlockClientIds);setClipboardBlocks(event,getBlocksByClientId(selectedBlockClientIds),registry)}if("cut"===event.type){var _getPreviousBlockClie;if(!canRemoveBlocks(selectedBlockClientIds))return;let blockToFocus=null!==(_getPreviousBlockClie=getPreviousBlockClientId(firstBlockClientId))&&void 0!==_getPreviousBlockClie?_getPreviousBlockClie:firstBlockRootClientId;removeBlocks(selectedBlockClientIds,!1);const shouldUpdateSelection=originallySelectedBlockClientIds.length>0&&0===getSelectedBlockClientIds().length;blockToFocus||(blockToFocus=getBlockOrder()[0]),updateFocusAndSelection(blockToFocus,shouldUpdateSelection)}else if("paste"===event.type){const{__experimentalCanUserUseUnfilteredHTML:canUserUseUnfilteredHTML}=getSettings(),blocks=function getPasteBlocks(event,canUserUseUnfilteredHTML){const{plainText,html,files}=getPasteEventData(event);let blocks=[];if(files.length){const fromTransforms=(0,build_module.XD)("from");blocks=files.reduce(((accumulator,file)=>{const transformation=(0,build_module.wG)(fromTransforms,(transform=>"files"===transform.type&&transform.isMatch([file])));return transformation&&accumulator.push(transformation.transform([file])),accumulator}),[]).flat()}else blocks=(0,build_module.Gk)({HTML:html,plainText,mode:"BLOCKS",canUserUseUnfilteredHTML});return blocks}(event,canUserUseUnfilteredHTML);if(1===selectedBlockClientIds.length){const[selectedBlockClientId]=selectedBlockClientIds;if(blocks.every((block=>canInsertBlockType(block.name,selectedBlockClientId))))return insertBlocks(blocks,void 0,selectedBlockClientId),void updateFocusAndSelection(blocks[0]?.clientId,!1)}replaceBlocks(selectedBlockClientIds,blocks,blocks.length-1,-1),updateFocusAndSelection(blocks[0]?.clientId,!1)}}}return node.ownerDocument.addEventListener("copy",handler),node.ownerDocument.addEventListener("cut",handler),node.ownerDocument.addEventListener("paste",handler),()=>{node.ownerDocument.removeEventListener("copy",handler),node.ownerDocument.removeEventListener("cut",handler),node.ownerDocument.removeEventListener("paste",handler)}}),[])}const expanded=(state,action)=>"clear"===action.type?{}:Array.isArray(action.clientIds)?{...state,...action.clientIds.reduce(((newState,id)=>({...newState,[id]:"expand"===action.type})),{})}:state;const PrivateListView=(0,react.forwardRef)((function ListViewComponent({id,blocks,dropZoneElement,showBlockMovers=!1,isExpanded=!1,showAppender=!1,blockSettingsMenu:BlockSettingsMenu=BlockSettingsDropdown,rootClientId,description,onSelect,additionalBlockContent:AdditionalBlockContent},ref){blocks&&(0,deprecated_build_module.A)("`blocks` property in `wp.blockEditor.__experimentalListView`",{since:"6.3",alternative:"`rootClientId` property"});const instanceId=(0,use_instance_id.A)(ListViewComponent),{clientIdsTree,draggedClientIds,selectedClientIds}=function useListViewClientIds({blocks,rootClientId}){return(0,use_select.A)((select=>{const{getDraggedBlockClientIds,getSelectedBlockClientIds,getEnabledClientIdsTree}=unlock(select(store_store));return{selectedClientIds:getSelectedBlockClientIds(),draggedClientIds:getDraggedBlockClientIds(),clientIdsTree:null!=blocks?blocks:getEnabledClientIdsTree(rootClientId)}}),[blocks,rootClientId])}({blocks,rootClientId}),blockIndexes=function useListViewBlockIndexes(blocks){const blockIndexes=(0,react.useMemo)((()=>{const indexes={};let currentGlobalIndex=0;const traverseBlocks=blockList=>{blockList.forEach((block=>{indexes[block.clientId]=currentGlobalIndex,currentGlobalIndex++,block.innerBlocks.length>0&&traverseBlocks(block.innerBlocks)}))};return traverseBlocks(blocks),indexes}),[blocks]);return blockIndexes}(clientIdsTree),{getBlock}=(0,use_select.A)(store_store),{visibleBlockCount}=(0,use_select.A)((select=>{const{getGlobalBlockCount,getClientIdsOfDescendants}=select(store_store),draggedBlockCount=draggedClientIds?.length>0?getClientIdsOfDescendants(draggedClientIds).length+1:0;return{visibleBlockCount:getGlobalBlockCount()-draggedBlockCount}}),[draggedClientIds]),{updateBlockSelection}=useBlockSelection(),[expandedState,setExpandedState]=(0,react.useReducer)(expanded,{}),[insertedBlock,setInsertedBlock]=(0,react.useState)(null),{setSelectedTreeId}=function useListViewExpandSelectedItem({firstSelectedBlockClientId,setExpandedState}){const[selectedTreeId,setSelectedTreeId]=(0,react.useState)(null),{selectedBlockParentClientIds}=(0,use_select.A)((select=>{const{getBlockParents}=select(store_store);return{selectedBlockParentClientIds:getBlockParents(firstSelectedBlockClientId,!1)}}),[firstSelectedBlockClientId]);return(0,react.useEffect)((()=>{selectedTreeId!==firstSelectedBlockClientId&&selectedBlockParentClientIds?.length&&setExpandedState({type:"expand",clientIds:selectedBlockParentClientIds})}),[firstSelectedBlockClientId,selectedBlockParentClientIds,selectedTreeId,setExpandedState]),{setSelectedTreeId}}({firstSelectedBlockClientId:selectedClientIds[0],setExpandedState}),selectEditorBlock=(0,react.useCallback)(((event,blockClientId,focusPosition)=>{updateBlockSelection(event,blockClientId,null,focusPosition),setSelectedTreeId(blockClientId),onSelect&&onSelect(getBlock(blockClientId))}),[setSelectedTreeId,updateBlockSelection,onSelect,getBlock]),{ref:dropZoneRef,target:blockDropTarget}=function useListViewDropZone({dropZoneElement,expandedState,setExpandedState}){const{getBlockRootClientId,getBlockIndex,getBlockCount,getDraggedBlockClientIds,canInsertBlocks}=(0,use_select.A)(store_store),[target,setTarget]=(0,react.useState)(),{rootClientId:targetRootClientId,blockIndex:targetBlockIndex}=target||{},onBlockDrop=useOnBlockDrop(targetRootClientId,targetBlockIndex),rtl=(0,i18n_build_module.V8)(),previousRootClientId=(0,use_previous.A)(targetRootClientId),maybeExpandBlock=(0,react.useCallback)(((_expandedState,_target)=>{const{rootClientId}=_target||{};rootClientId&&("inside"!==_target?.dropPosition||_expandedState[rootClientId]||setExpandedState({type:"expand",clientIds:[rootClientId]}))}),[setExpandedState]),throttledMaybeExpandBlock=(0,use_throttle.A)(maybeExpandBlock,500,EXPAND_THROTTLE_OPTIONS);(0,react.useEffect)((()=>{"inside"===target?.dropPosition&&previousRootClientId===target?.rootClientId?throttledMaybeExpandBlock(expandedState,target):throttledMaybeExpandBlock.cancel()}),[expandedState,previousRootClientId,target,throttledMaybeExpandBlock]);const draggedBlockClientIds=getDraggedBlockClientIds(),throttled=(0,use_throttle.A)((0,react.useCallback)(((event,currentTarget)=>{const position={x:event.clientX,y:event.clientY},isBlockDrag=!!draggedBlockClientIds?.length,newTarget=getListViewDropTarget(Array.from(currentTarget.querySelectorAll("[data-block]")).map((blockElement=>{const clientId=blockElement.dataset.block,isExpanded="true"===blockElement.dataset.expanded,isDraggedBlock=blockElement.classList.contains("is-dragging"),nestingLevel=parseInt(blockElement.getAttribute("aria-level"),10),rootClientId=getBlockRootClientId(clientId);return{clientId,isExpanded,rootClientId,blockIndex:getBlockIndex(clientId),element:blockElement,nestingLevel:nestingLevel||void 0,isDraggedBlock:!!isBlockDrag&&isDraggedBlock,innerBlockCount:getBlockCount(clientId),canInsertDraggedBlocksAsSibling:!isBlockDrag||canInsertBlocks(draggedBlockClientIds,rootClientId),canInsertDraggedBlocksAsChild:!isBlockDrag||canInsertBlocks(draggedBlockClientIds,clientId)}})),position,rtl);newTarget&&setTarget(newTarget)}),[canInsertBlocks,draggedBlockClientIds,getBlockCount,getBlockIndex,getBlockRootClientId,rtl]),50);return{ref:(0,use_drop_zone.A)({dropZoneElement,onDrop(event){throttled.cancel(),target&&onBlockDrop(event),setTarget(void 0)},onDragLeave(){throttled.cancel(),setTarget(null)},onDragOver(event){throttled(event,event.currentTarget)},onDragEnd(){throttled.cancel(),setTarget(void 0)}}),target}}({dropZoneElement,expandedState,setExpandedState}),elementRef=(0,react.useRef)(),clipBoardRef=use_clipboard_handler_useClipboardHandler({selectBlock:selectEditorBlock}),treeGridRef=(0,use_merge_refs.A)([clipBoardRef,elementRef,dropZoneRef,ref]);(0,react.useEffect)((()=>{selectedClientIds?.length&&focusListItem(selectedClientIds[0],elementRef?.current)}),[]);const expand=(0,react.useCallback)((clientId=>{if(!clientId)return;const clientIds=Array.isArray(clientId)?clientId:[clientId];setExpandedState({type:"expand",clientIds})}),[setExpandedState]),collapse=(0,react.useCallback)((clientId=>{clientId&&setExpandedState({type:"collapse",clientIds:[clientId]})}),[setExpandedState]),collapseAll=(0,react.useCallback)((()=>{setExpandedState({type:"clear"})}),[setExpandedState]),expandRow=(0,react.useCallback)((row=>{expand(row?.dataset?.block)}),[expand]),collapseRow=(0,react.useCallback)((row=>{collapse(row?.dataset?.block)}),[collapse]),focusRow=(0,react.useCallback)(((event,startRow,endRow)=>{event.shiftKey&&updateBlockSelection(event,startRow?.dataset?.block,endRow?.dataset?.block)}),[updateBlockSelection]);!function useListViewCollapseItems({collapseAll,expand}){const{expandedBlock,getBlockParents}=(0,use_select.A)((select=>{const{getBlockParents:_getBlockParents,getExpandedBlock}=unlock(select(store_store));return{expandedBlock:getExpandedBlock(),getBlockParents:_getBlockParents}}),[]);(0,react.useEffect)((()=>{if(expandedBlock){const blockParents=getBlockParents(expandedBlock,!1);collapseAll(),expand(blockParents)}}),[collapseAll,expand,expandedBlock,getBlockParents])}({collapseAll,expand});const firstDraggedBlockClientId=draggedClientIds?.[0],{blockDropTargetIndex,blockDropPosition,firstDraggedBlockIndex}=(0,react.useMemo)((()=>{let _blockDropTargetIndex,_firstDraggedBlockIndex;if(blockDropTarget?.clientId){const foundBlockIndex=blockIndexes[blockDropTarget.clientId];_blockDropTargetIndex=void 0===foundBlockIndex||"top"===blockDropTarget?.dropPosition?foundBlockIndex:foundBlockIndex+1}else null===blockDropTarget&&(_blockDropTargetIndex=null);if(firstDraggedBlockClientId){const foundBlockIndex=blockIndexes[firstDraggedBlockClientId];_firstDraggedBlockIndex=void 0===foundBlockIndex||"top"===blockDropTarget?.dropPosition?foundBlockIndex:foundBlockIndex+1}return{blockDropTargetIndex:_blockDropTargetIndex,blockDropPosition:blockDropTarget?.dropPosition,firstDraggedBlockIndex:_firstDraggedBlockIndex}}),[blockDropTarget,blockIndexes,firstDraggedBlockClientId]),contextValue=(0,react.useMemo)((()=>({blockDropPosition,blockDropTargetIndex,blockIndexes,draggedClientIds,expandedState,expand,firstDraggedBlockIndex,collapse,collapseAll,BlockSettingsMenu,listViewInstanceId:instanceId,AdditionalBlockContent,insertedBlock,setInsertedBlock,treeGridElementRef:elementRef,rootClientId})),[blockDropPosition,blockDropTargetIndex,blockIndexes,draggedClientIds,expandedState,expand,firstDraggedBlockIndex,collapse,collapseAll,BlockSettingsMenu,instanceId,AdditionalBlockContent,insertedBlock,setInsertedBlock,rootClientId]),[fixedListWindow]=function useFixedWindowList(elementRef,itemHeight,totalItems,options){var _options$initWindowSi,_options$useWindowing;const initWindowSize=null!==(_options$initWindowSi=options?.initWindowSize)&&void 0!==_options$initWindowSi?_options$initWindowSi:DEFAULT_INIT_WINDOW_SIZE,useWindowing=null===(_options$useWindowing=options?.useWindowing)||void 0===_options$useWindowing||_options$useWindowing,[fixedListWindow,setFixedListWindow]=(0,react.useState)({visibleItems:initWindowSize,start:0,end:initWindowSize,itemInView:index=>index>=0&&index<=initWindowSize});return(0,react.useLayoutEffect)((()=>{if(!useWindowing)return;const scrollContainer=(0,get_scroll_container.A)(elementRef.current),measureWindow=initRender=>{var _options$windowOversc;if(!scrollContainer)return;const visibleItems=Math.ceil(scrollContainer.clientHeight/itemHeight),windowOverscan=initRender?visibleItems:null!==(_options$windowOversc=options?.windowOverscan)&&void 0!==_options$windowOversc?_options$windowOversc:visibleItems,firstViewableIndex=Math.floor(scrollContainer.scrollTop/itemHeight),start=Math.max(0,firstViewableIndex-windowOverscan),end=Math.min(totalItems-1,firstViewableIndex+visibleItems+windowOverscan);setFixedListWindow((lastWindow=>{const nextWindow={visibleItems,start,end,itemInView:index=>start<=index&&index<=end};return lastWindow.start!==nextWindow.start||lastWindow.end!==nextWindow.end||lastWindow.visibleItems!==nextWindow.visibleItems?nextWindow:lastWindow}))};measureWindow(!0);const debounceMeasureList=(0,debounce.s)((()=>{measureWindow()}),16);return scrollContainer?.addEventListener("scroll",debounceMeasureList),scrollContainer?.ownerDocument?.defaultView?.addEventListener("resize",debounceMeasureList),scrollContainer?.ownerDocument?.defaultView?.addEventListener("resize",debounceMeasureList),()=>{scrollContainer?.removeEventListener("scroll",debounceMeasureList),scrollContainer?.ownerDocument?.defaultView?.removeEventListener("resize",debounceMeasureList)}}),[itemHeight,elementRef,totalItems,options?.expandedState,options?.windowOverscan,useWindowing]),(0,react.useLayoutEffect)((()=>{if(!useWindowing)return;const scrollContainer=(0,get_scroll_container.A)(elementRef.current),handleKeyDown=event=>{switch(event.keyCode){case keycodes_build_module.yZ:return scrollContainer?.scrollTo({top:0});case keycodes_build_module.Kp:return scrollContainer?.scrollTo({top:totalItems*itemHeight});case keycodes_build_module.Nx:return scrollContainer?.scrollTo({top:scrollContainer.scrollTop-fixedListWindow.visibleItems*itemHeight});case keycodes_build_module.W3:return scrollContainer?.scrollTo({top:scrollContainer.scrollTop+fixedListWindow.visibleItems*itemHeight})}};return scrollContainer?.ownerDocument?.defaultView?.addEventListener("keydown",handleKeyDown),()=>{scrollContainer?.ownerDocument?.defaultView?.removeEventListener("keydown",handleKeyDown)}}),[totalItems,itemHeight,elementRef,fixedListWindow.visibleItems,useWindowing,options?.expandedState]),[fixedListWindow,setFixedListWindow]}(elementRef,32,visibleBlockCount,{expandedState,useWindowing:!0,windowOverscan:40});if(!clientIdsTree.length&&!showAppender)return null;const describedById=description&&`block-editor-list-view-description-${instanceId}`;return(0,jsx_runtime.jsxs)(async_mode_provider_context.Ay,{value:!0,children:[(0,jsx_runtime.jsx)(ListViewDropIndicatorPreview,{draggedBlockClientId:firstDraggedBlockClientId,listViewRef:elementRef,blockDropTarget}),description&&(0,jsx_runtime.jsx)(visually_hidden_component.A,{id:describedById,children:description}),(0,jsx_runtime.jsx)(tree_grid,{id,className:(0,clsx.A)("block-editor-list-view-tree",{"is-dragging":draggedClientIds?.length>0&&void 0!==blockDropTargetIndex}),"aria-label":(0,i18n_build_module.__)("Block navigation structure"),ref:treeGridRef,onCollapseRow:collapseRow,onExpandRow:expandRow,onFocusRow:focusRow,applicationAriaLabel:(0,i18n_build_module.__)("Block navigation structure"),"aria-describedby":describedById,style:{"--wp-admin--list-view-dragged-items-height":draggedClientIds?.length?32*(draggedClientIds.length-1)+"px":null},children:(0,jsx_runtime.jsx)(ListViewContext.Provider,{value:contextValue,children:(0,jsx_runtime.jsx)(branch,{blocks:clientIdsTree,parentId:rootClientId,selectBlock:selectEditorBlock,showBlockMovers,fixedListWindow,selectedClientIds,isExpanded,showAppender})})})]})})),list_view=(0,react.forwardRef)(((props,ref)=>(0,jsx_runtime.jsx)(PrivateListView,{ref,...props,showAppender:!1,rootClientId:null,onSelect:null,additionalBlockContent:null,blockSettingsMenu:void 0})));function LinkViewerURL({url,urlLabel,className}){const linkClassName=(0,clsx.A)(className,"block-editor-url-popover__link-viewer-url");return url?(0,jsx_runtime.jsx)(external_link.A,{className:linkClassName,href:url,children:urlLabel||(0,filter_url_for_display.r)((0,safe_decode_uri.S)(url))}):(0,jsx_runtime.jsx)("span",{className:linkClassName})}const{__experimentalPopoverLegacyPositionToPlacement}=unlock(private_apis.j),URLPopover=(0,react.forwardRef)((({additionalControls,children,renderSettings,placement,focusOnMount="firstElement",position,...popoverProps},ref)=>{let computedPlacement;void 0!==position&&(0,deprecated_build_module.A)("`position` prop in wp.blockEditor.URLPopover",{since:"6.2",alternative:"`placement` prop"}),void 0!==placement?computedPlacement=placement:void 0!==position&&(computedPlacement=__experimentalPopoverLegacyPositionToPlacement(position)),computedPlacement=computedPlacement||"bottom";const[isSettingsExpanded,setIsSettingsExpanded]=(0,react.useState)(!1),showSettings=!!renderSettings&&isSettingsExpanded;return(0,jsx_runtime.jsxs)(popover.Ay,{ref,role:"dialog","aria-modal":"true","aria-label":(0,i18n_build_module.__)("Edit URL"),className:"block-editor-url-popover",focusOnMount,placement:computedPlacement,shift:!0,variant:"toolbar",...popoverProps,children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-url-popover__input-container",children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-url-popover__row",children:[children,!!renderSettings&&(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"block-editor-url-popover__settings-toggle",icon:library_chevron_down.A,label:(0,i18n_build_module.__)("Link settings"),onClick:()=>{setIsSettingsExpanded(!isSettingsExpanded)},"aria-expanded":isSettingsExpanded,size:"compact"})]})}),showSettings&&(0,jsx_runtime.jsx)("div",{className:"block-editor-url-popover__settings",children:renderSettings()}),additionalControls&&!showSettings&&(0,jsx_runtime.jsx)("div",{className:"block-editor-url-popover__additional-controls",children:additionalControls})]})}));URLPopover.LinkEditor=function LinkEditor({autocompleteRef,className,onChangeInputValue,value,...props}){return(0,jsx_runtime.jsxs)("form",{className:(0,clsx.A)("block-editor-url-popover__link-editor",className),...props,children:[(0,jsx_runtime.jsx)(url_input,{value,onChange:onChangeInputValue,autocompleteRef}),(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:keyboard_return.A,label:(0,i18n_build_module.__)("Apply"),type:"submit",size:"compact"})]})},URLPopover.LinkViewer=function LinkViewer({className,linkClassName,onEditLinkClick,url,urlLabel,...props}){return(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("block-editor-url-popover__link-viewer",className),...props,children:[(0,jsx_runtime.jsx)(LinkViewerURL,{url,urlLabel,className:linkClassName}),onEditLinkClick&&(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:edit.A,label:(0,i18n_build_module.__)("Edit"),onClick:onEditLinkClick,size:"compact"})]})};const url_popover=URLPopover,media_placeholder_noop=()=>{},InsertFromURLPopover=({src,onChange,onSubmit,onClose,popoverAnchor})=>(0,jsx_runtime.jsx)(url_popover,{anchor:popoverAnchor,onClose,children:(0,jsx_runtime.jsx)("form",{className:"block-editor-media-placeholder__url-input-form",onSubmit,children:(0,jsx_runtime.jsx)(input_control.Ay,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("URL"),hideLabelFromVision:!0,placeholder:(0,i18n_build_module.__)("Paste or type URL"),onChange,value:src,suffix:(0,jsx_runtime.jsx)(input_suffix_wrapper.A,{variant:"control",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",icon:keyboard_return.A,label:(0,i18n_build_module.__)("Apply"),type:"submit"})})})})}),URLSelectionUI=({src,onChangeSrc,onSelectURL})=>{const[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),[isURLInputVisible,setIsURLInputVisible]=(0,react.useState)(!1),closeURLInput=()=>{setIsURLInputVisible(!1),popoverAnchor?.focus()};return(0,jsx_runtime.jsxs)("div",{className:"block-editor-media-placeholder__url-input-container",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"block-editor-media-placeholder__button",onClick:()=>{setIsURLInputVisible(!0)},isPressed:isURLInputVisible,variant:"secondary","aria-haspopup":"dialog",ref:setPopoverAnchor,children:(0,i18n_build_module.__)("Insert from URL")}),isURLInputVisible&&(0,jsx_runtime.jsx)(InsertFromURLPopover,{src,onChange:onChangeSrc,onSubmit:event=>{event.preventDefault(),src&&onSelectURL&&(onSelectURL(src),closeURLInput())},onClose:closeURLInput,popoverAnchor})]})};const media_placeholder=(0,with_filters.A)("editor.MediaPlaceholder")((function MediaPlaceholder({value={},allowedTypes,className,icon,labels={},mediaPreview,notices,isAppender,accept,addToGallery,multiple=!1,handleUpload=!0,disableDropZone,disableMediaButtons,onError,onSelect,onCancel,onSelectURL,onToggleFeaturedImage,onDoubleClick,onFilesPreUpload=media_placeholder_noop,onHTMLDrop:deprecatedOnHTMLDrop,children,mediaLibraryButton,placeholder,style}){deprecatedOnHTMLDrop&&(0,deprecated_build_module.A)("wp.blockEditor.MediaPlaceholder onHTMLDrop prop",{since:"6.2",version:"6.4"});const mediaUpload=(0,use_select.A)((select=>{const{getSettings}=select(store_store);return getSettings().mediaUpload}),[]),[src,setSrc]=(0,react.useState)("");(0,react.useEffect)((()=>{var _value$src;setSrc(null!==(_value$src=value?.src)&&void 0!==_value$src?_value$src:"")}),[value?.src]);const onFilesUpload=files=>{if(!handleUpload||"function"==typeof handleUpload&&!handleUpload(files))return onSelect(files);let setMedia;if(onFilesPreUpload(files),multiple)if(addToGallery){let lastMediaPassed=[];setMedia=newMedia=>{const filteredMedia=(null!=value?value:[]).filter((item=>item.id?!lastMediaPassed.some((({id})=>Number(id)===Number(item.id))):!lastMediaPassed.some((({urlSlug})=>item.url.includes(urlSlug)))));onSelect(filteredMedia.concat(newMedia)),lastMediaPassed=newMedia.map((media=>{const cutOffIndex=media.url.lastIndexOf("."),urlSlug=media.url.slice(0,cutOffIndex);return{id:media.id,urlSlug}}))}}else setMedia=onSelect;else setMedia=([media])=>onSelect(media);mediaUpload({allowedTypes,filesList:files,onFileChange:setMedia,onError})};async function onHTMLDrop(HTML){const blocks=(0,build_module.Gk)({HTML});return await async function handleBlocksDrop(blocks){if(!blocks||!Array.isArray(blocks))return;const mediaBlocks=function recursivelyFindMediaFromBlocks(_blocks){return _blocks.flatMap((block=>"core/image"!==block.name&&"core/audio"!==block.name&&"core/video"!==block.name||!block.attributes.url?recursivelyFindMediaFromBlocks(block.innerBlocks):[block]))}(blocks);if(!mediaBlocks.length)return;const uploadedMediaList=await Promise.all(mediaBlocks.map((block=>block.attributes.id?block.attributes:new Promise(((resolve,reject)=>{window.fetch(block.attributes.url).then((response=>response.blob())).then((blob=>mediaUpload({filesList:[blob],additionalData:{title:block.attributes.title,alt_text:block.attributes.alt,caption:block.attributes.caption},onFileChange:([media])=>{media.id&&resolve(media)},allowedTypes,onError:reject}))).catch((()=>resolve(block.attributes.url)))}))))).catch((err=>onError(err)));onSelect(multiple?uploadedMediaList:uploadedMediaList[0])}(blocks)}const onUpload=event=>{onFilesUpload(event.target.files)},renderPlaceholder=null!=placeholder?placeholder:content=>{let{instructions,title}=labels;if(mediaUpload||onSelectURL||(instructions=(0,i18n_build_module.__)("To edit this block, you need permission to upload media.")),void 0===instructions||void 0===title){const typesAllowed=null!=allowedTypes?allowedTypes:[],[firstAllowedType]=typesAllowed,isOneType=1===typesAllowed.length,isAudio=isOneType&&"audio"===firstAllowedType,isImage=isOneType&&"image"===firstAllowedType,isVideo=isOneType&&"video"===firstAllowedType;void 0===instructions&&mediaUpload&&(instructions=(0,i18n_build_module.__)("Upload a media file or pick one from your media library."),isAudio?instructions=(0,i18n_build_module.__)("Upload or drag an audio file here, or pick one from your library."):isImage?instructions=(0,i18n_build_module.__)("Upload or drag an image file here, or pick one from your library."):isVideo&&(instructions=(0,i18n_build_module.__)("Upload or drag a video file here, or pick one from your library."))),void 0===title&&(title=(0,i18n_build_module.__)("Media"),isAudio?title=(0,i18n_build_module.__)("Audio"):isImage?title=(0,i18n_build_module.__)("Image"):isVideo&&(title=(0,i18n_build_module.__)("Video")))}const placeholderClassName=(0,clsx.A)("block-editor-media-placeholder",className,{"is-appender":isAppender});return(0,jsx_runtime.jsxs)(build_module_placeholder.A,{icon,label:title,instructions,className:placeholderClassName,notices,onDoubleClick,preview:mediaPreview,style,children:[content,children]})},renderDropZone=()=>disableDropZone?null:(0,jsx_runtime.jsx)(drop_zone.A,{onFilesDrop:onFilesUpload,onHTMLDrop}),renderCancelLink=()=>onCancel&&(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"block-editor-media-placeholder__cancel-button",title:(0,i18n_build_module.__)("Cancel"),variant:"link",onClick:onCancel,children:(0,i18n_build_module.__)("Cancel")}),renderUrlSelectionUI=()=>onSelectURL&&(0,jsx_runtime.jsx)(URLSelectionUI,{src,onChangeSrc:setSrc,onSelectURL}),renderFeaturedImageToggle=()=>onToggleFeaturedImage&&(0,jsx_runtime.jsx)("div",{className:"block-editor-media-placeholder__url-input-container",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"block-editor-media-placeholder__button",onClick:onToggleFeaturedImage,variant:"secondary",children:(0,i18n_build_module.__)("Use featured image")})});return disableMediaButtons?(0,jsx_runtime.jsx)(check,{children:renderDropZone()}):(0,jsx_runtime.jsx)(check,{fallback:renderPlaceholder(renderUrlSelectionUI()),children:(()=>{const libraryButton=null!=mediaLibraryButton?mediaLibraryButton:({open})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",onClick:()=>{open()},children:(0,i18n_build_module.__)("Media Library")}),uploadMediaLibraryButton=(0,jsx_runtime.jsx)(media_upload,{addToGallery,gallery:multiple&&!(!allowedTypes||0===allowedTypes.length)&&allowedTypes.every((allowedType=>"image"===allowedType||allowedType.startsWith("image/"))),multiple,onSelect,allowedTypes,mode:"browse",value:Array.isArray(value)?value.map((({id})=>id)):value.id,render:libraryButton});if(mediaUpload&&isAppender)return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[renderDropZone(),(0,jsx_runtime.jsx)(form_file_upload.A,{onChange:onUpload,accept,multiple:!!multiple,render:({openFileDialog})=>{const content=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",className:(0,clsx.A)("block-editor-media-placeholder__button","block-editor-media-placeholder__upload-button"),onClick:openFileDialog,children:(0,i18n_build_module.__)("Upload")}),uploadMediaLibraryButton,renderUrlSelectionUI(),renderFeaturedImageToggle(),renderCancelLink()]});return renderPlaceholder(content)}})]});if(mediaUpload){const content=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[renderDropZone(),(0,jsx_runtime.jsx)(form_file_upload.A,{render:({openFileDialog})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,onClick:openFileDialog,variant:"primary",className:(0,clsx.A)("block-editor-media-placeholder__button","block-editor-media-placeholder__upload-button"),children:(0,i18n_build_module.__)("Upload")}),onChange:onUpload,accept,multiple:!!multiple}),uploadMediaLibraryButton,renderUrlSelectionUI(),renderFeaturedImageToggle(),renderCancelLink()]});return renderPlaceholder(content)}return renderPlaceholder(uploadMediaLibraryButton)})()})}));var serialize=__webpack_require__("./packages/element/build-module/serialize.js");function getDefaultUseItems(autocompleter){return filterValue=>{const[items,setItems]=(0,react.useState)([]);return(0,react.useLayoutEffect)((()=>{const{options,isDebounced}=autocompleter,loadOptions=(0,debounce.s)((()=>{const promise=Promise.resolve("function"==typeof options?options(filterValue):options).then((optionsData=>{if(promise.canceled)return;const keyedOptions=optionsData.map(((optionData,optionIndex)=>({key:`${autocompleter.name}-${optionIndex}`,value:optionData,label:autocompleter.getOptionLabel(optionData),keywords:autocompleter.getOptionKeywords?autocompleter.getOptionKeywords(optionData):[],isDisabled:!!autocompleter.isOptionDisabled&&autocompleter.isOptionDisabled(optionData)}))),search=new RegExp("(?:\\b|\\s|^)"+(0,strings.Nt)(filterValue),"i");setItems(function filterOptions(search,options=[],maxResults=10){const filtered=[];for(let i=0;i<options.length;i++){const option=options[i];let{keywords=[]}=option;if("string"==typeof option.label&&(keywords=[...keywords,option.label]),keywords.some((keyword=>search.test(remove_accents_default()(keyword))))&&(filtered.push(option),filtered.length===maxResults))break}return filtered}(search,keyedOptions))}));return promise}),isDebounced?250:0),promise=loadOptions();return()=>{loadOptions.cancel(),promise&&(promise.canceled=!0)}}),[filterValue]),[items]}}function ListBox({items,onSelect,selectedIndex,instanceId,listBoxId,className,Component="div"}){return(0,jsx_runtime.jsx)(Component,{id:listBoxId,role:"listbox",className:"components-autocomplete__results",children:items.map(((option,index)=>(0,jsx_runtime.jsx)(build_module_button.Ay,{id:`components-autocomplete-item-${instanceId}-${option.key}`,role:"option","aria-selected":index===selectedIndex,accessibleWhenDisabled:!0,disabled:option.isDisabled,className:(0,clsx.A)("components-autocomplete__result",className,{"is-selected":index===selectedIndex}),variant:index===selectedIndex?"primary":void 0,onClick:()=>onSelect(option),children:option.label},option.key)))})}function getAutoCompleterUI(autocompleter){var _autocompleter$useIte;const useItems=null!==(_autocompleter$useIte=autocompleter.useItems)&&void 0!==_autocompleter$useIte?_autocompleter$useIte:getDefaultUseItems(autocompleter);return function AutocompleterUI({filterValue,instanceId,listBoxId,className,selectedIndex,onChangeOptions,onSelect,onReset,reset,contentRef}){const[items]=useItems(filterValue),popoverAnchor=(0,rich_text_build_module.d6)({editableContentElement:contentRef.current}),[needsA11yCompat,setNeedsA11yCompat]=(0,react.useState)(!1),popoverRef=(0,react.useRef)(null),popoverRefs=(0,use_merge_refs.A)([popoverRef,(0,use_ref_effect.A)((node=>{contentRef.current&&setNeedsA11yCompat(node.ownerDocument!==contentRef.current.ownerDocument)}),[contentRef])]);!function useOnClickOutside(ref,handler){(0,react.useEffect)((()=>{const listener=event=>{ref.current&&!ref.current.contains(event.target)&&handler(event)};return document.addEventListener("mousedown",listener),document.addEventListener("touchstart",listener),()=>{document.removeEventListener("mousedown",listener),document.removeEventListener("touchstart",listener)}}),[handler])}(popoverRef,reset);const debouncedSpeak=(0,use_debounce.A)(a11y_build_module.L,500);return(0,react.useLayoutEffect)((()=>{onChangeOptions(items),function announce(options){debouncedSpeak&&(options.length?debouncedSpeak(filterValue?(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",options.length),options.length):(0,i18n_build_module.nv)((0,i18n_build_module._n)("Initial %d result loaded. Type to filter all available results. Use up and down arrow keys to navigate.","Initial %d results loaded. Type to filter all available results. Use up and down arrow keys to navigate.",options.length),options.length),"assertive"):debouncedSpeak((0,i18n_build_module.__)("No results."),"assertive"))}(items)}),[items]),0===items.length?null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(popover.Ay,{focusOnMount:!1,onClose:onReset,placement:"top-start",className:"components-autocomplete__popover",anchor:popoverAnchor,ref:popoverRefs,children:(0,jsx_runtime.jsx)(ListBox,{items,onSelect,selectedIndex,instanceId,listBoxId,className})}),contentRef.current&&needsA11yCompat&&(0,react_dom.createPortal)((0,jsx_runtime.jsx)(ListBox,{items,onSelect,selectedIndex,instanceId,listBoxId,className,Component:visually_hidden_component.A}),contentRef.current.ownerDocument.body)]})}}var with_ignore_ime_events=__webpack_require__("./packages/components/build-module/utils/with-ignore-ime-events.js");const getNodeText=node=>{if(null===node)return"";switch(typeof node){case"string":case"number":return node.toString();case"boolean":default:return"";case"object":if(node instanceof Array)return node.map(getNodeText).join("");if("props"in node)return getNodeText(node.props.children)}return""},EMPTY_FILTERED_OPTIONS=[],AUTOCOMPLETE_HOOK_REFERENCE={};function useAutocomplete({record,onChange,onReplace,completers,contentRef}){const instanceId=(0,use_instance_id.A)(AUTOCOMPLETE_HOOK_REFERENCE),[selectedIndex,setSelectedIndex]=(0,react.useState)(0),[filteredOptions,setFilteredOptions]=(0,react.useState)(EMPTY_FILTERED_OPTIONS),[filterValue,setFilterValue]=(0,react.useState)(""),[autocompleter,setAutocompleter]=(0,react.useState)(null),[AutocompleterUI,setAutocompleterUI]=(0,react.useState)(null),backspacing=(0,react.useRef)(!1);function select(option){const{getOptionCompletion}=autocompleter||{};if(!option.isDisabled){if(getOptionCompletion){const completion=getOptionCompletion(option.value,filterValue),completionObject=(obj=>null!==obj&&"object"==typeof obj&&"action"in obj&&void 0!==obj.action&&"value"in obj&&void 0!==obj.value)(completion)?completion:{action:"insert-at-caret",value:completion};if("replace"===completionObject.action)return void onReplace([completionObject.value]);"insert-at-caret"===completionObject.action&&function insertCompletion(replacement){if(null===autocompleter)return;const end=record.start,start=end-autocompleter.triggerPrefix.length-filterValue.length,toInsert=(0,rich_text_build_module.vt)({html:(0,serialize.Ay)(replacement)});onChange((0,rich_text_build_module.Yr)(record,toInsert,start,end))}(completionObject.value)}reset()}}function reset(){setSelectedIndex(0),setFilteredOptions(EMPTY_FILTERED_OPTIONS),setFilterValue(""),setAutocompleter(null),setAutocompleterUI(null)}const textContent=(0,react.useMemo)((()=>(0,rich_text_build_module.kW)(record)?(0,rich_text_build_module.rf)((0,rich_text_build_module.di)(record,0)):""),[record]);(0,react.useEffect)((()=>{if(!textContent)return void(autocompleter&&reset());const completer=completers.reduce(((lastTrigger,currentCompleter)=>textContent.lastIndexOf(currentCompleter.triggerPrefix)>(null!==lastTrigger?textContent.lastIndexOf(lastTrigger.triggerPrefix):-1)?currentCompleter:lastTrigger),null);if(!completer)return void(autocompleter&&reset());const{allowContext,triggerPrefix}=completer,triggerIndex=textContent.lastIndexOf(triggerPrefix),textWithoutTrigger=textContent.slice(triggerIndex+triggerPrefix.length);if(textWithoutTrigger.length>50)return;const mismatch=0===filteredOptions.length,wordsFromTrigger=textWithoutTrigger.split(/\s/),hasOneTriggerWord=1===wordsFromTrigger.length,matchingWhileBackspacing=backspacing.current&&wordsFromTrigger.length<=3;if(mismatch&&!matchingWhileBackspacing&&!hasOneTriggerWord)return void(autocompleter&&reset());const textAfterSelection=(0,rich_text_build_module.rf)((0,rich_text_build_module.di)(record,void 0,(0,rich_text_build_module.rf)(record).length));if(allowContext&&!allowContext(textContent.slice(0,triggerIndex),textAfterSelection))return void(autocompleter&&reset());if(/^\s/.test(textWithoutTrigger)||/\s\s+$/.test(textWithoutTrigger))return void(autocompleter&&reset());if(!/[\u0000-\uFFFF]*$/.test(textWithoutTrigger))return void(autocompleter&&reset());const safeTrigger=(0,strings.Nt)(completer.triggerPrefix),text=remove_accents_default()(textContent),match=text.slice(text.lastIndexOf(completer.triggerPrefix)).match(new RegExp(`${safeTrigger}([\0-￿]*)$`)),query=match&&match[1];setAutocompleter(completer),setAutocompleterUI((()=>completer!==autocompleter?getAutoCompleterUI(completer):AutocompleterUI)),setFilterValue(null===query?"":query)}),[textContent]);const{key:selectedKey=""}=filteredOptions[selectedIndex]||{},{className}=autocompleter||{},isExpanded=!!autocompleter&&filteredOptions.length>0,listBoxId=isExpanded?`components-autocomplete-listbox-${instanceId}`:void 0,activeId=isExpanded?`components-autocomplete-item-${instanceId}-${selectedKey}`:null,hasSelection=void 0!==record.start;return{listBoxId,activeId,onKeyDown:(0,with_ignore_ime_events.n)((function handleKeyDown(event){if(backspacing.current="Backspace"===event.key,autocompleter&&0!==filteredOptions.length&&!event.defaultPrevented){switch(event.key){case"ArrowUp":{const newIndex=(0===selectedIndex?filteredOptions.length:selectedIndex)-1;setSelectedIndex(newIndex),(0,build_module_platform.H)()&&(0,a11y_build_module.L)(getNodeText(filteredOptions[newIndex].label),"assertive");break}case"ArrowDown":{const newIndex=(selectedIndex+1)%filteredOptions.length;setSelectedIndex(newIndex),(0,build_module_platform.H)()&&(0,a11y_build_module.L)(getNodeText(filteredOptions[newIndex].label),"assertive");break}case"Escape":setAutocompleter(null),setAutocompleterUI(null),event.preventDefault();break;case"Enter":select(filteredOptions[selectedIndex]);break;case"ArrowLeft":case"ArrowRight":return void reset();default:return}event.preventDefault()}})),popover:hasSelection&&AutocompleterUI&&(0,jsx_runtime.jsx)(AutocompleterUI,{className,filterValue,instanceId,listBoxId,selectedIndex,onChangeOptions:function onChangeOptions(options){setSelectedIndex(options.length===filteredOptions.length?selectedIndex:0),setFilteredOptions(options)},onSelect:select,value:record,contentRef,reset})}}function useAutocompleteProps(options){const ref=(0,react.useRef)(null),onKeyDownRef=(0,react.useRef)(),{record}=options,previousRecord=function useLastDifferentValue(value){const history=(0,react.useRef)(new Set);return history.current.add(value),history.current.size>2&&history.current.delete(Array.from(history.current)[0]),Array.from(history.current)[0]}(record),{popover,listBoxId,activeId,onKeyDown}=useAutocomplete({...options,contentRef:ref});onKeyDownRef.current=onKeyDown;const mergedRefs=(0,use_merge_refs.A)([ref,(0,use_ref_effect.A)((element=>{function _onKeyDown(event){onKeyDownRef.current?.(event)}return element.addEventListener("keydown",_onKeyDown),()=>{element.removeEventListener("keydown",_onKeyDown)}}),[])]);return record.text!==previousRecord?.text?{ref:mergedRefs,children:popover,"aria-autocomplete":listBoxId?"list":void 0,"aria-owns":listBoxId,"aria-activedescendant":activeId}:{ref:mergedRefs}}const block_noop=()=>{};const autocompleters_block=function createBlockCompleter(){return{name:"blocks",className:"block-editor-autocompleters__block",triggerPrefix:"/",useItems(filterValue){const{rootClientId,selectedBlockName,prioritizedBlocks}=(0,use_select.A)((select=>{const{getSelectedBlockClientId,getBlockName,getBlockListSettings,getBlockRootClientId}=select(store_store),selectedBlockClientId=getSelectedBlockClientId(),_rootClientId=getBlockRootClientId(selectedBlockClientId);return{selectedBlockName:selectedBlockClientId?getBlockName(selectedBlockClientId):null,rootClientId:_rootClientId,prioritizedBlocks:getBlockListSettings(_rootClientId)?.prioritizedInserterBlocks}}),[]),[items,categories,collections]=use_block_types_state(rootClientId,block_noop,!0),filteredItems=(0,react.useMemo)((()=>(filterValue.trim()?searchBlockItems(items,categories,collections,filterValue):orderInserterBlockItems(orderBy(items,"frecency","desc"),prioritizedBlocks)).filter((item=>item.name!==selectedBlockName)).slice(0,9)),[filterValue,selectedBlockName,items,categories,collections,prioritizedBlocks]),options=(0,react.useMemo)((()=>filteredItems.map((blockItem=>{const{title,icon,isDisabled}=blockItem;return{key:`block-${blockItem.id}`,value:blockItem,label:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_icon,{icon,showColors:!0},"icon"),title]}),isDisabled}}))),[filteredItems]);return[options]},allowContext:(before,after)=>!(/\S/.test(before)||/\S/.test(after)),getOptionCompletion(inserterItem){const{name,initialAttributes,innerBlocks,syncStatus,content}=inserterItem;return{action:"replace",value:"unsynced"===syncStatus?(0,build_module.qg)(content,{__unstableSkipMigrationLogs:!0}):(0,build_module.Wv)(name,initialAttributes,(0,build_module.to)(innerBlocks))}}}}();var add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js");const library_post=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"m7.3 9.7 1.4 1.4c.2-.2.3-.3.4-.5 0 0 0-.1.1-.1.3-.5.4-1.1.3-1.6L12 7 9 4 7.2 6.5c-.6-.1-1.1 0-1.6.3 0 0-.1 0-.1.1-.3.1-.4.2-.6.4l1.4 1.4L4 11v1h1l2.3-2.3zM4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4z"})});const autocompleters_link=function createLinkCompleter(){return{name:"links",className:"block-editor-autocompleters__link",triggerPrefix:"[[",options:async letters=>{let options=await(0,api_fetch_build_module.A)({path:(0,add_query_args.F)("/wp/v2/search",{per_page:10,search:letters,type:"post",order_by:"menu_order"})});return options=options.filter((option=>""!==option.title)),options},getOptionKeywords:item=>[...item.title.split(/\s+/)],getOptionLabel:item=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_icon.A,{icon:"page"===item.subtype?page.A:library_post},"icon"),(0,html_entities_build_module.S)(item.title)]}),getOptionCompletion:item=>(0,jsx_runtime.jsx)("a",{href:item.url,children:item.title})}}(),autocomplete_EMPTY_ARRAY=[];function useCompleters({completers=autocomplete_EMPTY_ARRAY}){const{name}=useBlockEditContext();return(0,react.useMemo)((()=>{let filteredCompleters=[...completers,autocompleters_link];return(name===(0,build_module.K$)()||(0,build_module.bI)(name,"__experimentalSlashInserter",!1))&&(filteredCompleters=[...filteredCompleters,autocompleters_block]),(0,hooks_build_module.FC)("editor.Autocomplete.completers")&&(filteredCompleters===completers&&(filteredCompleters=filteredCompleters.map((completer=>({...completer})))),filteredCompleters=(0,hooks_build_module.W5)("editor.Autocomplete.completers",filteredCompleters,name)),filteredCompleters}),[completers,name])}const format_toolbar_POPOVER_PROPS={placement:"bottom-start"},format_toolbar=()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[["bold","italic","link","unknown"].map((format=>(0,jsx_runtime.jsx)(slot_fill.DX,{name:`RichText.ToolbarControls.${format}`},format))),(0,jsx_runtime.jsx)(slot_fill.DX,{name:"RichText.ToolbarControls",children:fills=>{if(!fills.length)return null;const hasActive=fills.map((([{props}])=>props)).some((({isActive})=>isActive));return(0,jsx_runtime.jsx)(toolbar_item.A,{children:toggleProps=>(0,jsx_runtime.jsx)(dropdown_menu.A,{icon:library_chevron_down.A,label:(0,i18n_build_module.__)("More"),toggleProps:{...toggleProps,className:(0,clsx.A)(toggleProps.className,{"is-pressed":hasActive}),description:(0,i18n_build_module.__)("Displays more block tools")},controls:orderBy(fills.map((([{props}])=>props)),"title"),popoverProps:format_toolbar_POPOVER_PROPS})})}})]});function InlineToolbar({popoverAnchor}){return(0,jsx_runtime.jsx)(popover.Ay,{placement:"top",focusOnMount:!1,anchor:popoverAnchor,className:"block-editor-rich-text__inline-format-toolbar",__unstableSlotName:"block-toolbar",children:(0,jsx_runtime.jsx)(NavigableToolbar,{className:"block-editor-rich-text__inline-format-toolbar-group","aria-label":(0,i18n_build_module.__)("Format tools"),children:(0,jsx_runtime.jsx)(toolbar_group.A,{children:(0,jsx_runtime.jsx)(format_toolbar,{})})})})}const format_toolbar_container=({inline,editableContentElement})=>inline?(0,jsx_runtime.jsx)(InlineToolbar,{popoverAnchor:editableContentElement}):(0,jsx_runtime.jsx)(block_controls,{group:"inline",children:(0,jsx_runtime.jsx)(format_toolbar,{})});function formatTypesSelector(select){return select(rich_text_build_module.M_).getFormatTypes()}const interactiveContentTags=new Set(["a","audio","button","details","embed","iframe","input","label","select","textarea","video"]);function getPrefixedSelectKeys(selected,prefix){return selected[prefix]?selected[prefix]:Object.keys(selected).filter((key=>key.startsWith(prefix+"."))).reduce(((accumulator,key)=>(accumulator[key.slice(prefix.length+1)]=selected[key],accumulator)),{})}const wrapSelectionSettings=["`",'"',"'","“”","‘’"];function findSelection(blocks){let i=blocks.length;for(;i--;){const attributeKey=retrieveSelectedAttribute(blocks[i].attributes);if(attributeKey)return blocks[i].attributes[attributeKey]=blocks[i].attributes[attributeKey].toString().replace(START_OF_SELECTED_AREA,""),[blocks[i].clientId,attributeKey,0,0];const nestedSelection=findSelection(blocks[i].innerBlocks);if(nestedSelection)return nestedSelection}return[]}function getMultilineTag(multiline){if(!0===multiline||"p"===multiline||"li"===multiline)return!0===multiline?"p":multiline}function getAllowedFormats({allowedFormats,disableFormats}){return disableFormats?getAllowedFormats.EMPTY_ARRAY:allowedFormats}getAllowedFormats.EMPTY_ARRAY=[];const allEventListeners=[props=>element=>{function onInput(event){const{inputType,data}=event,{value,onChange,registry}=props.current;if("insertText"!==inputType)return;if((0,rich_text_build_module.kW)(value))return;const pair=(0,hooks_build_module.W5)("blockEditor.wrapSelectionSettings",wrapSelectionSettings).find((([startChar,endChar])=>startChar===data||endChar===data));if(!pair)return;const[startChar,endChar=startChar]=pair,start=value.start,end=value.end+startChar.length;let newValue=(0,rich_text_build_module.Yr)(value,startChar,start,start);newValue=(0,rich_text_build_module.Yr)(newValue,endChar,end,end);const{__unstableMarkLastChangeAsPersistent,__unstableMarkAutomaticChange}=registry.dispatch(store_store);__unstableMarkLastChangeAsPersistent(),onChange(newValue),__unstableMarkAutomaticChange();const init={};for(const key in event)init[key]=event[key];init.data=endChar;const{ownerDocument}=element,{defaultView}=ownerDocument,newEvent=new defaultView.InputEvent("input",init);window.queueMicrotask((()=>{event.target.dispatchEvent(newEvent)})),event.preventDefault()}return element.addEventListener("beforeinput",onInput),()=>{element.removeEventListener("beforeinput",onInput)}},props=>element=>{function inputRule(){const{getValue,onReplace,selectionChange,registry}=props.current;if(!onReplace)return;const value=getValue(),{start,text}=value;if(" "!==text.slice(start-1,start))return;const trimmedTextBefore=text.slice(0,start).trim(),prefixTransforms=(0,build_module.XD)("from").filter((({type})=>"prefix"===type)),transformation=(0,build_module.wG)(prefixTransforms,(({prefix})=>trimmedTextBefore===prefix));if(!transformation)return;const content=(0,rich_text_build_module.Ky)({value:(0,rich_text_build_module.Yr)(value,START_OF_SELECTED_AREA,0,start)}),block=transformation.transform(content);return selectionChange(...findSelection([block])),onReplace([block]),registry.dispatch(store_store).__unstableMarkAutomaticChange(),!0}function onInput(event){const{inputType,type}=event,{getValue,onChange,__unstableAllowPrefixTransformations,formatTypes,registry}=props.current;if("insertText"!==inputType&&"compositionend"!==type)return;if(__unstableAllowPrefixTransformations&&inputRule())return;const value=getValue(),transformed=formatTypes.reduce(((accumlator,{__unstableInputRule})=>(__unstableInputRule&&(accumlator=__unstableInputRule(accumlator)),accumlator)),function preventEventDiscovery(value){const{start,text}=value;return start<18||"tales of gutenberg"!==text.slice(start-18,start).toLowerCase()?value:(0,rich_text_build_module.Yr)(value," 🐡🐢🦀🐤🦋🐘🐧🐹🦁🦄🦍🐼🐿🎃🐴🐝🐆🦕🦔🌱🍇π🍌🐉💧🥨🌌🍂🍠🥦🥚🥝🎟🥥🥒🛵🥖🍒🍯🎾🎲🐺🐚🐮⌛️")}(value)),{__unstableMarkLastChangeAsPersistent,__unstableMarkAutomaticChange}=registry.dispatch(store_store);transformed!==value&&(__unstableMarkLastChangeAsPersistent(),onChange({...transformed,activeFormats:value.activeFormats}),__unstableMarkAutomaticChange())}return element.addEventListener("input",onInput),element.addEventListener("compositionend",onInput),()=>{element.removeEventListener("input",onInput),element.removeEventListener("compositionend",onInput)}},props=>element=>{function onInput(event){if("insertReplacementText"!==event.inputType)return;const{registry}=props.current;registry.dispatch(store_store).__unstableMarkLastChangeAsPersistent()}return element.addEventListener("beforeinput",onInput),()=>{element.removeEventListener("beforeinput",onInput)}},()=>node=>{function onKeydown(event){(keycodes_build_module.kx.primary(event,"z")||keycodes_build_module.kx.primary(event,"y")||keycodes_build_module.kx.primaryShift(event,"z"))&&event.preventDefault()}return node.addEventListener("keydown",onKeydown),()=>{node.removeEventListener("keydown",onKeydown)}},props=>element=>{const{keyboardShortcuts}=props.current;function onKeyDown(event){for(const keyboardShortcut of keyboardShortcuts.current)keyboardShortcut(event)}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}},props=>element=>{const{inputEvents}=props.current;function onInput(event){for(const keyboardShortcut of inputEvents.current)keyboardShortcut(event)}return element.addEventListener("input",onInput),()=>{element.removeEventListener("input",onInput)}},props=>element=>{function onKeyDown(event){const{keyCode}=event;if(event.defaultPrevented)return;if(keyCode!==keycodes_build_module.G_&&keyCode!==keycodes_build_module._f)return;const{registry}=props.current,{didAutomaticChange,getSettings}=registry.select(store_store),{__experimentalUndo}=getSettings();__experimentalUndo&&didAutomaticChange()&&(event.preventDefault(),__experimentalUndo())}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}},props=>element=>{function _onPaste(event){const{disableFormats,onChange,value,formatTypes,tagName,onReplace,__unstableEmbedURLOnPaste,preserveWhiteSpace,pastePlainText}=props.current;if(!element.contains(event.target))return;if(event.defaultPrevented)return;const{plainText,html}=getPasteEventData(event);if(event.preventDefault(),window.console.log("Received HTML:\n\n",html),window.console.log("Received plain text:\n\n",plainText),disableFormats)return void onChange((0,rich_text_build_module.Yr)(value,plainText));function pasteInline(content){const transformed=formatTypes.reduce(((accumulator,{__unstablePasteRule})=>(__unstablePasteRule&&accumulator===value&&(accumulator=__unstablePasteRule(value,{html,plainText})),accumulator)),value);if(transformed!==value)onChange(transformed);else{const valueToInsert=(0,rich_text_build_module.vt)({html:content});!function addActiveFormats(value,activeFormats){if(activeFormats?.length){let index=value.formats.length;for(;index--;)value.formats[index]=[...activeFormats,...value.formats[index]||[]]}}(valueToInsert,value.activeFormats),onChange((0,rich_text_build_module.Yr)(value,valueToInsert))}}if("true"===event.clipboardData.getData("rich-text"))return void pasteInline(html);if(pastePlainText)return void onChange((0,rich_text_build_module.Yr)(value,(0,rich_text_build_module.vt)({text:plainText})));let mode="INLINE";const trimmedPlainText=plainText.trim();__unstableEmbedURLOnPaste&&(0,rich_text_build_module.Im)(value)&&(0,is_url.m)(trimmedPlainText)&&/^https?:/.test(trimmedPlainText)&&(mode="BLOCKS");const content=(0,build_module.Gk)({HTML:html,plainText,mode,tagName,preserveWhiteSpace});"string"==typeof content?pasteInline(content):content.length>0&&onReplace&&(0,rich_text_build_module.Im)(value)&&onReplace(content,content.length-1,-1)}const{defaultView}=element.ownerDocument;return defaultView.addEventListener("paste",_onPaste),()=>{defaultView.removeEventListener("paste",_onPaste)}},props=>element=>{function onKeyDown(event){const{keyCode}=event;if(event.defaultPrevented)return;const{value,onMerge,onRemove}=props.current;if(keyCode===keycodes_build_module.SJ||keyCode===keycodes_build_module.G_){const{start,end,text}=value,isReverse=keyCode===keycodes_build_module.G_,hasActiveFormats=value.activeFormats&&!!value.activeFormats.length;if(!(0,rich_text_build_module.kW)(value)||hasActiveFormats||isReverse&&0!==start||!isReverse&&end!==text.length)return;onMerge?onMerge(!isReverse):onRemove&&(0,rich_text_build_module.Im)(value)&&isReverse&&onRemove(!isReverse),event.preventDefault()}}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}},props=>element=>{function onKeyDownDeprecated(event){if(event.keyCode!==keycodes_build_module.Fm)return;const{onReplace,onSplit}=props.current;onReplace&&onSplit&&(event.__deprecatedOnSplit=!0)}function onKeyDown(event){if(event.defaultPrevented)return;if(event.target!==element)return;if(event.keyCode!==keycodes_build_module.Fm)return;const{value,onChange,disableLineBreaks,onSplitAtEnd,onSplitAtDoubleLineEnd,registry}=props.current;event.preventDefault();const{text,start,end}=value;event.shiftKey?disableLineBreaks||onChange((0,rich_text_build_module.Yr)(value,"\n")):onSplitAtEnd&&start===end&&end===text.length?onSplitAtEnd():onSplitAtDoubleLineEnd&&start===end&&end===text.length&&"\n\n"===text.slice(-2)?registry.batch((()=>{const _value={...value};_value.start=_value.end-2,onChange((0,rich_text_build_module.TF)(_value)),onSplitAtDoubleLineEnd()})):disableLineBreaks||onChange((0,rich_text_build_module.Yr)(value,"\n"))}const{defaultView}=element.ownerDocument;return defaultView.addEventListener("keydown",onKeyDown),element.addEventListener("keydown",onKeyDownDeprecated),()=>{defaultView.removeEventListener("keydown",onKeyDown),element.removeEventListener("keydown",onKeyDownDeprecated)}},props=>element=>{function onFocus(){const{registry}=props.current;if(!registry.select(store_store).isMultiSelecting())return;const parentEditable=element.parentElement.closest('[contenteditable="true"]');parentEditable&&parentEditable.focus()}return element.addEventListener("focus",onFocus),()=>{element.removeEventListener("focus",onFocus)}}];function useEventListeners(props){const propsRef=(0,react.useRef)(props);propsRef.current=props;const refEffects=(0,react.useMemo)((()=>allEventListeners.map((refEffect=>refEffect(propsRef)))),[propsRef]);return(0,use_ref_effect.A)((element=>{if(!props.isSelected)return;const cleanups=refEffects.map((effect=>effect(element)));return()=>{cleanups.forEach((cleanup=>cleanup()))}}),[refEffects,props.isSelected])}const format_edit_DEFAULT_BLOCK_CONTEXT={},usesContextKey=Symbol("usesContext");function format_edit_Edit({onChange,onFocus,value,forwardedRef,settings}){const{name,edit:EditFunction,[usesContextKey]:usesContext}=settings,blockContext=(0,react.useContext)(block_context),context=(0,react.useMemo)((()=>usesContext?Object.fromEntries(Object.entries(blockContext).filter((([key])=>usesContext.includes(key)))):format_edit_DEFAULT_BLOCK_CONTEXT),[usesContext,blockContext]);if(!EditFunction)return null;const activeFormat=(0,rich_text_build_module.SX)(value,name),isActive=void 0!==activeFormat,activeObject=(0,rich_text_build_module.o_)(value),isObjectActive=void 0!==activeObject&&activeObject.type===name;return(0,jsx_runtime.jsx)(EditFunction,{isActive,activeAttributes:isActive&&activeFormat.attributes||{},isObjectActive,activeObjectAttributes:isObjectActive&&activeObject.attributes||{},value,onChange,onFocus,contentRef:forwardedRef,context},name)}function FormatEdit({formatTypes,...props}){return formatTypes.map((settings=>(0,react.createElement)(format_edit_Edit,{settings,...props,key:settings.name})))}function valueToHTMLString(value,multiline){if(rich_text.isEmpty(value)){const multilineTag=getMultilineTag(multiline);return multilineTag?`<${multilineTag}></${multilineTag}>`:""}return Array.isArray(value)?((0,deprecated_build_module.A)("wp.blockEditor.RichText value prop as children type",{since:"6.1",version:"6.3",alternative:"value prop as string",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),build_module.Y_.toHTML(value)):"string"==typeof value?value:value.toHTMLString()}function Content({value,tagName:Tag,multiline,format,...props}){return value=(0,jsx_runtime.jsx)(raw_html.A,{children:valueToHTMLString(value,multiline)}),Tag?(0,jsx_runtime.jsx)(Tag,{...props,children:value}):value}const multiline=(0,react.forwardRef)((function RichTextMultiline({children,identifier,tagName:TagName="div",value="",onChange,multiline,...props},forwardedRef){(0,deprecated_build_module.A)("wp.blockEditor.RichText multiline prop",{since:"6.1",version:"6.3",alternative:"nested blocks (InnerBlocks)",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/nested-blocks-inner-blocks/"});const{clientId}=useBlockEditContext(),{getSelectionStart,getSelectionEnd}=(0,use_select.A)(store_store),{selectionChange}=(0,use_dispatch.A)(store_store),multilineTagName=getMultilineTag(multiline),values=`</${multilineTagName}>${value=value||`<${multilineTagName}></${multilineTagName}>`}<${multilineTagName}>`.split(`</${multilineTagName}><${multilineTagName}>`);function _onChange(newValues){onChange(`<${multilineTagName}>${newValues.join(`</${multilineTagName}><${multilineTagName}>`)}</${multilineTagName}>`)}return values.shift(),values.pop(),(0,jsx_runtime.jsx)(TagName,{ref:forwardedRef,children:values.map(((_value,index)=>(0,jsx_runtime.jsx)(RichTextWrapper,{identifier:`${identifier}-${index}`,tagName:multilineTagName,value:_value,onChange:newValue=>{const newValues=values.slice();newValues[index]=newValue,_onChange(newValues)},isSelected:void 0,onKeyDown:event=>{if(event.keyCode!==keycodes_build_module.Fm)return;event.preventDefault();const{offset:start}=getSelectionStart(),{offset:end}=getSelectionEnd();if("number"!=typeof start||"number"!=typeof end)return;const richTextValue=(0,rich_text_build_module.vt)({html:_value});richTextValue.start=start,richTextValue.end=end;const array=(0,rich_text_build_module.lD)(richTextValue).map((v=>(0,rich_text_build_module.Ky)({value:v}))),newValues=values.slice();newValues.splice(index,1,...array),_onChange(newValues),selectionChange(clientId,`${identifier}-${index+1}`,0,0)},onMerge:forward=>{const newValues=values.slice();let offset=0;if(forward){if(!newValues[index+1])return;newValues.splice(index,2,newValues[index]+newValues[index+1]),offset=newValues[index].length-1}else{if(!newValues[index-1])return;newValues.splice(index-1,2,newValues[index-1]+newValues[index]),offset=newValues[index-1].length-1}_onChange(newValues),selectionChange(clientId,`${identifier}-${index-(forward?0:1)}`,offset,offset)},...props},index)))})}));const keyboardShortcutContext=(0,react.createContext)(),inputEventContext=(0,react.createContext)(),instanceIdKey=Symbol("instanceId");function removeNativeProps(props){const{__unstableMobileNoFocusOnMount,deleteEnter,placeholderTextColor,textAlign,selectionColor,tagsToEliminate,disableEditingMenu,fontSize,fontFamily,fontWeight,fontStyle,minWidth,maxWidth,disableSuggestions,disableAutocorrection,...restProps}=props;return restProps}function RichTextWrapper({children,tagName="div",value:adjustedValue="",onChange:adjustedOnChange,isSelected:originalIsSelected,multiline,inlineToolbar,wrapperClassName,autocompleters,onReplace,placeholder,allowedFormats,withoutInteractiveFormatting,onRemove,onMerge,onSplit,__unstableOnSplitAtEnd:onSplitAtEnd,__unstableOnSplitAtDoubleLineEnd:onSplitAtDoubleLineEnd,identifier,preserveWhiteSpace,__unstablePastePlainText:pastePlainText,__unstableEmbedURLOnPaste,__unstableDisableFormats:disableFormats,disableLineBreaks,__unstableAllowPrefixTransformations,readOnly,...props},forwardedRef){props=removeNativeProps(props),onSplit&&(0,deprecated_build_module.A)("wp.blockEditor.RichText onSplit prop",{since:"6.4",alternative:'block.json support key: "splitting"'});const instanceId=(0,use_instance_id.A)(RichTextWrapper),anchorRef=(0,react.useRef)(),context=useBlockEditContext(),{clientId,isSelected:isBlockSelected,name:blockName}=context,blockBindings=context[blockBindingsKey],blockContext=(0,react.useContext)(block_context),registry=(0,use_registry.A)(),{selectionStart,selectionEnd,isSelected}=(0,use_select.A)((select=>{if(!isBlockSelected)return{isSelected:!1};const{getSelectionStart,getSelectionEnd}=select(store_store),selectionStart=getSelectionStart(),selectionEnd=getSelectionEnd();let isSelected;return void 0===originalIsSelected?isSelected=selectionStart.clientId===clientId&&selectionEnd.clientId===clientId&&(identifier?selectionStart.attributeKey===identifier:selectionStart[instanceIdKey]===instanceId):originalIsSelected&&(isSelected=selectionStart.clientId===clientId),{selectionStart:isSelected?selectionStart.offset:void 0,selectionEnd:isSelected?selectionEnd.offset:void 0,isSelected}}),[clientId,identifier,instanceId,originalIsSelected,isBlockSelected]),{disableBoundBlock,bindingsPlaceholder,bindingsLabel}=(0,use_select.A)((select=>{var _fieldsList$relatedBi;if(!blockBindings?.[identifier]||!canBindBlock(blockName))return{};const relatedBinding=blockBindings[identifier],blockBindingsSource=(0,build_module.Xm)(relatedBinding.source),blockBindingsContext={};if(blockBindingsSource?.usesContext?.length)for(const key of blockBindingsSource.usesContext)blockBindingsContext[key]=blockContext[key];const _disableBoundBlock=!blockBindingsSource?.canUserEditValue?.({select,context:blockBindingsContext,args:relatedBinding.args});if(adjustedValue.length>0)return{disableBoundBlock:_disableBoundBlock,bindingsPlaceholder:null,bindingsLabel:null};const{getBlockAttributes}=select(store_store),blockAttributes=getBlockAttributes(clientId),fieldsList=blockBindingsSource?.getFieldsList?.({select,context:blockBindingsContext}),bindingKey=null!==(_fieldsList$relatedBi=fieldsList?.[relatedBinding?.args?.key]?.label)&&void 0!==_fieldsList$relatedBi?_fieldsList$relatedBi:blockBindingsSource?.label,_bindingsPlaceholder=_disableBoundBlock?bindingKey:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Add %s"),bindingKey),_bindingsLabel=_disableBoundBlock?relatedBinding?.args?.key||blockBindingsSource?.label:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Empty %s; start writing to edit its value"),relatedBinding?.args?.key||blockBindingsSource?.label);return{disableBoundBlock:_disableBoundBlock,bindingsPlaceholder:blockAttributes?.placeholder||_bindingsPlaceholder,bindingsLabel:_bindingsLabel}}),[blockBindings,identifier,blockName,blockContext,adjustedValue]),shouldDisableEditing=readOnly||disableBoundBlock,{getSelectionStart,getSelectionEnd,getBlockRootClientId}=(0,use_select.A)(store_store),{selectionChange}=(0,use_dispatch.A)(store_store),adjustedAllowedFormats=getAllowedFormats({allowedFormats,disableFormats}),hasFormats=!adjustedAllowedFormats||adjustedAllowedFormats.length>0,onSelectionChange=(0,react.useCallback)(((start,end)=>{const selection={},unset=void 0===start&&void 0===end,baseSelection={clientId,[identifier?"attributeKey":instanceIdKey]:identifier||instanceId};if("number"==typeof start||unset){if(void 0===end&&getBlockRootClientId(clientId)!==getBlockRootClientId(getSelectionEnd().clientId))return;selection.start={...baseSelection,offset:start}}if("number"==typeof end||unset){if(void 0===start&&getBlockRootClientId(clientId)!==getBlockRootClientId(getSelectionStart().clientId))return;selection.end={...baseSelection,offset:end}}selectionChange(selection)}),[clientId,getBlockRootClientId,getSelectionEnd,getSelectionStart,identifier,instanceId,selectionChange]),{formatTypes,prepareHandlers,valueHandlers,changeHandlers,dependencies}=function useFormatTypes({clientId,identifier,withoutInteractiveFormatting,allowedFormats}){const allFormatTypes=(0,use_select.A)(formatTypesSelector,[]),formatTypes=(0,react.useMemo)((()=>allFormatTypes.filter((({name,interactive,tagName})=>!(allowedFormats&&!allowedFormats.includes(name)||withoutInteractiveFormatting&&(interactive||interactiveContentTags.has(tagName)))))),[allFormatTypes,allowedFormats,withoutInteractiveFormatting]),keyedSelected=(0,use_select.A)((select=>formatTypes.reduce(((accumulator,type)=>{return type.__experimentalGetPropsForEditableTreePreparation?{...accumulator,...(selected=type.__experimentalGetPropsForEditableTreePreparation(select,{richTextIdentifier:identifier,blockClientId:clientId}),prefix=type.name,"object"!=typeof selected?{[prefix]:selected}:Object.fromEntries(Object.entries(selected).map((([key,value])=>[`${prefix}.${key}`,value]))))}:accumulator;var selected,prefix}),{})),[formatTypes,clientId,identifier]),dispatch=(0,use_dispatch.A)(),prepareHandlers=[],valueHandlers=[],changeHandlers=[],dependencies=[];for(const key in keyedSelected)dependencies.push(keyedSelected[key]);return formatTypes.forEach((type=>{if(type.__experimentalCreatePrepareEditableTree){const handler=type.__experimentalCreatePrepareEditableTree(getPrefixedSelectKeys(keyedSelected,type.name),{richTextIdentifier:identifier,blockClientId:clientId});type.__experimentalCreateOnChangeEditableValue?valueHandlers.push(handler):prepareHandlers.push(handler)}if(type.__experimentalCreateOnChangeEditableValue){let dispatchers={};type.__experimentalGetPropsForEditableTreeChangeHandler&&(dispatchers=type.__experimentalGetPropsForEditableTreeChangeHandler(dispatch,{richTextIdentifier:identifier,blockClientId:clientId}));const selected=getPrefixedSelectKeys(keyedSelected,type.name);changeHandlers.push(type.__experimentalCreateOnChangeEditableValue({..."object"==typeof selected?selected:{},...dispatchers},{richTextIdentifier:identifier,blockClientId:clientId}))}})),{formatTypes,prepareHandlers,valueHandlers,changeHandlers,dependencies}}({clientId,identifier,withoutInteractiveFormatting,allowedFormats:adjustedAllowedFormats});function removeEditorOnlyFormats(value){return formatTypes.forEach((formatType=>{formatType.__experimentalCreatePrepareEditableTree&&(value=(0,rich_text_build_module.k2)(value,formatType.name,0,value.text.length))})),value.formats}const{value,getValue,onChange,ref:richTextRef}=(0,rich_text_build_module.lL)({value:adjustedValue,onChange(html,{__unstableFormats,__unstableText}){adjustedOnChange(html),Object.values(changeHandlers).forEach((changeHandler=>{changeHandler(__unstableFormats,__unstableText)}))},selectionStart,selectionEnd,onSelectionChange,placeholder:bindingsPlaceholder||placeholder,__unstableIsSelected:isSelected,__unstableDisableFormats:disableFormats,preserveWhiteSpace,__unstableDependencies:[...dependencies,tagName],__unstableAfterParse:function addEditorOnlyFormats(value){return valueHandlers.reduce(((accumulator,fn)=>fn(accumulator,value.text)),value.formats)},__unstableBeforeSerialize:removeEditorOnlyFormats,__unstableAddInvisibleFormats:function addInvisibleFormats(value){return prepareHandlers.reduce(((accumulator,fn)=>fn(accumulator,value.text)),value.formats)}}),autocompleteProps=function useBlockEditorAutocompleteProps(props){return useAutocompleteProps({...props,completers:useCompleters(props)})}({onReplace,completers:autocompleters,record:value,onChange});!function useMarkPersistent({html,value}){const previousTextRef=(0,react.useRef)(),hasActiveFormats=!!value.activeFormats?.length,{__unstableMarkLastChangeAsPersistent}=(0,use_dispatch.A)(store_store);(0,react.useLayoutEffect)((()=>{if(previousTextRef.current){if(previousTextRef.current!==value.text){const timeout=window.setTimeout((()=>{__unstableMarkLastChangeAsPersistent()}),1e3);return previousTextRef.current=value.text,()=>{window.clearTimeout(timeout)}}__unstableMarkLastChangeAsPersistent()}else previousTextRef.current=value.text}),[html,hasActiveFormats])}({html:adjustedValue,value});const keyboardShortcuts=(0,react.useRef)(new Set),inputEvents=(0,react.useRef)(new Set);function onFocus(){anchorRef.current?.focus()}const TagName=tagName;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isSelected&&(0,jsx_runtime.jsx)(keyboardShortcutContext.Provider,{value:keyboardShortcuts,children:(0,jsx_runtime.jsx)(inputEventContext.Provider,{value:inputEvents,children:(0,jsx_runtime.jsxs)(popover.Ay.__unstableSlotNameProvider,{value:"__unstable-block-tools-after",children:[children&&children({value,onChange,onFocus}),(0,jsx_runtime.jsx)(FormatEdit,{value,onChange,onFocus,formatTypes,forwardedRef:anchorRef})]})})}),isSelected&&hasFormats&&(0,jsx_runtime.jsx)(format_toolbar_container,{inline:inlineToolbar,editableContentElement:anchorRef.current}),(0,jsx_runtime.jsx)(TagName,{role:"textbox","aria-multiline":!disableLineBreaks,"aria-readonly":shouldDisableEditing,...props,"aria-label":bindingsLabel||props["aria-label"]||placeholder,...autocompleteProps,ref:(0,use_merge_refs.A)([richTextRef,forwardedRef,autocompleteProps.ref,props.ref,useEventListeners({registry,getValue,onChange,__unstableAllowPrefixTransformations,formatTypes,onReplace,selectionChange,isSelected,disableFormats,value,tagName,onSplit,__unstableEmbedURLOnPaste,pastePlainText,onMerge,onRemove,removeEditorOnlyFormats,disableLineBreaks,onSplitAtEnd,onSplitAtDoubleLineEnd,keyboardShortcuts,inputEvents}),anchorRef]),contentEditable:!shouldDisableEditing,suppressContentEditableWarning:!0,className:(0,clsx.A)("block-editor-rich-text__editable",props.className,"rich-text"),tabIndex:0!==props.tabIndex||shouldDisableEditing?props.tabIndex:null,"data-wp-block-attribute-key":identifier})]})}const PrivateRichText=function withDeprecations(Component){return(0,react.forwardRef)(((props,ref)=>{let value=props.value,onChange=props.onChange;Array.isArray(value)&&((0,deprecated_build_module.A)("wp.blockEditor.RichText value prop as children type",{since:"6.1",version:"6.3",alternative:"value prop as string",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),value=build_module.Y_.toHTML(props.value),onChange=newValue=>props.onChange(build_module.Y_.fromDOM((0,rich_text_build_module.Ng)(document,newValue).childNodes)));const NewComponent=props.multiline?multiline:Component;return(0,jsx_runtime.jsx)(NewComponent,{...props,value,onChange,ref})}))}((0,react.forwardRef)(RichTextWrapper));PrivateRichText.Content=Content,PrivateRichText.isEmpty=value=>!value||0===value.length;const PublicForwardedRichTextContainer=(0,react.forwardRef)(((props,ref)=>{if(useBlockEditContext()[isPreviewModeKey]){const{children,tagName:Tag="div",value,onChange,isSelected,multiline,inlineToolbar,wrapperClassName,autocompleters,onReplace,placeholder,allowedFormats,withoutInteractiveFormatting,onRemove,onMerge,onSplit,__unstableOnSplitAtEnd,__unstableOnSplitAtDoubleLineEnd,identifier,preserveWhiteSpace,__unstablePastePlainText,__unstableEmbedURLOnPaste,__unstableDisableFormats,disableLineBreaks,__unstableAllowPrefixTransformations,readOnly,...contentProps}=removeNativeProps(props);return(0,jsx_runtime.jsx)(Tag,{...contentProps,dangerouslySetInnerHTML:{__html:valueToHTMLString(value,multiline)}})}return(0,jsx_runtime.jsx)(PrivateRichText,{ref,...props,readOnly:!1})}));PublicForwardedRichTextContainer.Content=Content,PublicForwardedRichTextContainer.isEmpty=value=>!value||0===value.length;const rich_text=PublicForwardedRichTextContainer,EditableText=(0,react.forwardRef)(((props,ref)=>(0,jsx_runtime.jsx)(rich_text,{ref,...props,__unstableDisableFormats:!0})));EditableText.Content=({value="",tagName:Tag="div",...props})=>(0,jsx_runtime.jsx)(Tag,{...props,children:value});const editable_text=EditableText,plain_text=(0,react.forwardRef)((({__experimentalVersion,...props},ref)=>{if(2===__experimentalVersion)return(0,jsx_runtime.jsx)(editable_text,{ref,...props});const{className,onChange,...remainingProps}=props;return(0,jsx_runtime.jsx)(lib.A,{ref,className:(0,clsx.A)("block-editor-plain-text",className),onChange:event=>onChange(event.target.value),...remainingProps})}));function RichTextShortcut({character,type,onUse}){const keyboardShortcuts=(0,react.useContext)(keyboardShortcutContext),onUseRef=(0,react.useRef)();return onUseRef.current=onUse,(0,react.useEffect)((()=>{function callback(event){keycodes_build_module.kx[type](event,character)&&(onUseRef.current(),event.preventDefault())}return keyboardShortcuts.current.add(callback),()=>{keyboardShortcuts.current.delete(callback)}}),[character,type]),null}function RichTextToolbarButton({name,shortcutType,shortcutCharacter,...props}){let shortcut,fillName="RichText.ToolbarControls";return name&&(fillName+=`.${name}`),shortcutType&&shortcutCharacter&&(shortcut=keycodes_build_module.dz[shortcutType](shortcutCharacter)),(0,jsx_runtime.jsx)(slot_fill.SQ,{name:fillName,children:(0,jsx_runtime.jsx)(toolbar_button.A,{...props,shortcut})})}function __unstableRichTextInputEvent({inputType,onInput}){const callbacks=(0,react.useContext)(inputEventContext),onInputRef=(0,react.useRef)();return onInputRef.current=onInput,(0,react.useEffect)((()=>{function callback(event){event.inputType===inputType&&(onInputRef.current(),event.preventDefault())}return callbacks.current.add(callback),()=>{callbacks.current.delete(callback)}}),[inputType]),null}const selectIcon=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M9.4 20.5L5.2 3.8l14.6 9-2 .3c-.2 0-.4.1-.7.1-.9.2-1.6.3-2.2.5-.8.3-1.4.5-1.8.8-.4.3-.8.8-1.3 1.5-.4.5-.8 1.2-1.2 2l-.3.6-.9 1.9zM7.6 7.1l2.4 9.3c.2-.4.5-.8.7-1.1.6-.8 1.1-1.4 1.6-1.8.5-.4 1.3-.8 2.2-1.1l1.2-.3-8.1-5z"})});const tool_selector=(0,react.forwardRef)((function ToolSelector(props,ref){const mode=(0,use_select.A)((select=>select(store_store).__unstableGetEditorMode()),[]),{__unstableSetEditorMode}=(0,use_dispatch.A)(store_store);return(0,jsx_runtime.jsx)(dropdown.A,{renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",...props,ref,icon:"navigation"===mode?edit.A:selectIcon,"aria-expanded":isOpen,"aria-haspopup":"true",onClick:onToggle,label:(0,i18n_build_module.__)("Tools")}),popoverProps:{placement:"bottom-start"},renderContent:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu.Ay,{className:"block-editor-tool-selector__menu",role:"menu","aria-label":(0,i18n_build_module.__)("Tools"),children:(0,jsx_runtime.jsx)(menu_items_choice.A,{value:"navigation"===mode?"navigation":"edit",onSelect:newMode=>{__unstableSetEditorMode(newMode)},choices:[{value:"navigation",label:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_icon.A,{icon:edit.A}),(0,i18n_build_module.__)("Write")]}),info:(0,i18n_build_module.__)("Focus on content."),"aria-label":(0,i18n_build_module.__)("Write")},{value:"edit",label:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[selectIcon,(0,i18n_build_module.__)("Design")]}),info:(0,i18n_build_module.__)("Edit layout and styles."),"aria-label":(0,i18n_build_module.__)("Design")}]})}),(0,jsx_runtime.jsx)("div",{className:"block-editor-tool-selector__help",children:(0,i18n_build_module.__)("Tools provide different sets of interactions for blocks. Toggle between simplified content tools (Write) and advanced visual editing tools (Design).")})]})})}));var library_image=__webpack_require__("./packages/icons/build-module/library/image.js");const NEW_TAB_REL=["noreferrer","noopener"],ImageURLInputUI=({linkDestination,onChangeUrl,url,mediaType="image",mediaUrl,mediaLink,linkTarget,linkClass,rel,showLightboxSetting,lightboxEnabled,onSetLightbox,resetLightbox})=>{const[isOpen,setIsOpen]=(0,react.useState)(!1),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),[isEditingLink,setIsEditingLink]=(0,react.useState)(!1),[urlInput,setUrlInput]=(0,react.useState)(null),autocompleteRef=(0,react.useRef)(null),wrapperRef=(0,react.useRef)();(0,react.useEffect)((()=>{if(!wrapperRef.current)return;(dom_build_module.XC.focusable.find(wrapperRef.current)[0]||wrapperRef.current).focus()}),[isEditingLink,url,lightboxEnabled]);const startEditLink=()=>{"media"!==linkDestination&&"attachment"!==linkDestination||setUrlInput(""),setIsEditingLink(!0)},stopEditLink=()=>{setIsEditingLink(!1)},getLinkDestinations=()=>{const linkDestinations=[{linkDestination:"media",title:(0,i18n_build_module.__)("Link to image file"),url:"image"===mediaType?mediaUrl:void 0,icon:library_image.A}];return"image"===mediaType&&mediaLink&&linkDestinations.push({linkDestination:"attachment",title:(0,i18n_build_module.__)("Link to attachment page"),url:"image"===mediaType?mediaLink:void 0,icon:page.A}),linkDestinations},advancedOptions=(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:"3",children:[(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Open in new tab"),onChange:value=>{const updatedLinkTarget=(value=>{const newLinkTarget=value?"_blank":void 0;let updatedRel;if(newLinkTarget){const rels=(null!=rel?rel:"").split(" ");NEW_TAB_REL.forEach((relVal=>{rels.includes(relVal)||rels.push(relVal)})),updatedRel=rels.join(" ")}else{const rels=(null!=rel?rel:"").split(" ").filter((relVal=>!1===NEW_TAB_REL.includes(relVal)));updatedRel=rels.length?rels.join(" "):void 0}return{linkTarget:newLinkTarget,rel:updatedRel}})(value);onChangeUrl(updatedLinkTarget)},checked:"_blank"===linkTarget}),(0,jsx_runtime.jsx)(text_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Link rel"),value:null!=rel?rel:"",onChange:value=>{onChangeUrl({rel:value})}}),(0,jsx_runtime.jsx)(text_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Link CSS class"),value:linkClass||"",onChange:value=>{onChangeUrl({linkClass:value})}})]}),linkEditorValue=null!==urlInput?urlInput:url,hideLightboxPanel=!lightboxEnabled||lightboxEnabled&&!showLightboxSetting,showLinkEditor=!linkEditorValue&&hideLightboxPanel,urlLabel=(getLinkDestinations().find((destination=>destination.linkDestination===linkDestination))||{}).title;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(toolbar_button.A,{icon:library_link.A,className:"components-toolbar__control",label:(0,i18n_build_module.__)("Link"),"aria-expanded":isOpen,onClick:()=>{setIsOpen(!0)},ref:setPopoverAnchor,isActive:!!url||lightboxEnabled&&showLightboxSetting}),isOpen&&(0,jsx_runtime.jsx)(url_popover,{ref:wrapperRef,anchor:popoverAnchor,onFocusOutside:event=>{const autocompleteElement=autocompleteRef.current;autocompleteElement&&autocompleteElement.contains(event.target)||(setIsOpen(!1),setUrlInput(null),stopEditLink())},onClose:()=>{setUrlInput(null),stopEditLink(),setIsOpen(!1)},renderSettings:hideLightboxPanel?()=>advancedOptions:null,additionalControls:showLinkEditor&&(0,jsx_runtime.jsxs)(menu.Ay,{children:[getLinkDestinations().map((link=>(0,jsx_runtime.jsx)(menu_item.A,{icon:link.icon,iconPosition:"left",onClick:()=>{setUrlInput(null),(value=>{const linkDestinations=getLinkDestinations();let linkDestinationInput;linkDestinationInput=value?(linkDestinations.find((destination=>destination.url===value))||{linkDestination:"custom"}).linkDestination:"none",onChangeUrl({linkDestination:linkDestinationInput,href:value})})(link.url),stopEditLink()},children:link.title},link.linkDestination))),showLightboxSetting&&(0,jsx_runtime.jsx)(menu_item.A,{className:"block-editor-url-popover__expand-on-click",icon:fullscreen.A,info:(0,i18n_build_module.__)("Scale the image with a lightbox effect."),iconPosition:"left",onClick:()=>{setUrlInput(null),onChangeUrl({linkDestination:"none",href:""}),onSetLightbox?.(!0),stopEditLink()},children:(0,i18n_build_module.__)("Expand on click")},"expand-on-click")]}),offset:13,children:lightboxEnabled&&showLightboxSetting&&!url&&!isEditingLink?(0,jsx_runtime.jsxs)("div",{className:"block-editor-url-popover__expand-on-click",children:[(0,jsx_runtime.jsx)(build_module_icon.A,{icon:fullscreen.A}),(0,jsx_runtime.jsxs)("div",{className:"text",children:[(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("Expand on click")}),(0,jsx_runtime.jsx)("p",{className:"description",children:(0,i18n_build_module.__)("Scales the image with a lightbox effect")})]}),(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:link_off.A,label:(0,i18n_build_module.__)("Disable expand on click"),onClick:()=>{onSetLightbox?.(!1)},size:"compact"})]}):!url||isEditingLink?(0,jsx_runtime.jsx)(url_popover.LinkEditor,{className:"block-editor-format-toolbar__link-container-content",value:linkEditorValue,onChangeInputValue:setUrlInput,onSubmit:event=>{if(urlInput){const selectedDestination=getLinkDestinations().find((destination=>destination.url===urlInput))?.linkDestination||"custom";onChangeUrl({href:urlInput,linkDestination:selectedDestination,lightbox:{enabled:!1}})}stopEditLink(),setUrlInput(null),event.preventDefault()},autocompleteRef}):url&&!isEditingLink?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(url_popover.LinkViewer,{className:"block-editor-format-toolbar__link-container-content",url,onEditLinkClick:startEditLink,urlLabel}),(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:link_off.A,label:(0,i18n_build_module.__)("Remove link"),onClick:()=>{onChangeUrl({linkDestination:"none",href:""}),resetLightbox?.()},size:"compact"})]}):void 0})]})};function useResizeCanvas(deviceType){const[actualWidth,updateActualWidth]=(0,react.useState)(window.innerWidth);(0,react.useEffect)((()=>{if("Desktop"===deviceType)return;const resizeListener=()=>updateActualWidth(window.innerWidth);return window.addEventListener("resize",resizeListener),()=>{window.removeEventListener("resize",resizeListener)}}),[deviceType]);const getCanvasWidth=device=>{let deviceWidth;switch(device){case"Tablet":deviceWidth=780;break;case"Mobile":deviceWidth=360;break;default:return null}return deviceWidth<actualWidth?deviceWidth:actualWidth};return(device=>{const height="Mobile"===device?"768px":"1024px";switch(device){case"Tablet":case"Mobile":return{width:getCanvasWidth(device),marginTop:"40px",marginBottom:"40px",marginLeft:"auto",marginRight:"auto",height,overflowY:"auto"};default:return{marginLeft:"auto",marginRight:"auto"}}})(deviceType)}function SkipToSelectedBlock(){const selectedBlockClientId=(0,use_select.A)((select=>select(store_store).getBlockSelectionStart()),[]),ref=(0,react.useRef)();useBlockElementRef(selectedBlockClientId,ref);return selectedBlockClientId?(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",className:"block-editor-skip-to-selected-block",onClick:()=>{ref.current?.focus()},children:(0,i18n_build_module.__)("Skip to the selected block")}):null}var wordcount_build_module=__webpack_require__("./packages/wordcount/build-module/index.js");function MultiSelectionInspector(){const{blocks}=(0,use_select.A)((select=>{const{getMultiSelectedBlocks}=select(store_store);return{blocks:getMultiSelectedBlocks()}}),[]),words=(0,wordcount_build_module.U)((0,build_module.lK)(blocks),"words");return(0,jsx_runtime.jsxs)("div",{className:"block-editor-multi-selection-inspector__card",children:[(0,jsx_runtime.jsx)(block_icon,{icon:copy.A,showColors:!0}),(0,jsx_runtime.jsxs)("div",{className:"block-editor-multi-selection-inspector__card-content",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-multi-selection-inspector__card-title",children:(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d Block","%d Blocks",blocks.length),blocks.length)}),(0,jsx_runtime.jsx)("div",{className:"block-editor-multi-selection-inspector__card-description",children:(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d word selected.","%d words selected.",words),words)})]})]})}function VariationsButtons({className,onSelectVariation,selectedValue,variations}){return(0,jsx_runtime.jsxs)("fieldset",{className,children:[(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"legend",children:(0,i18n_build_module.__)("Transform to variation")}),variations.map((variation=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,size:"compact",icon:(0,jsx_runtime.jsx)(block_icon,{icon:variation.icon,showColors:!0}),isPressed:selectedValue===variation.name,label:selectedValue===variation.name?variation.title:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Transform to %s"),variation.title),onClick:()=>onSelectVariation(variation.name),"aria-label":variation.title,showTooltip:!0},variation.name)))]})}function VariationsDropdown({className,onSelectVariation,selectedValue,variations}){const selectOptions=variations.map((({name,title,description})=>({value:name,label:title,info:description})));return(0,jsx_runtime.jsx)(dropdown_menu.A,{className,label:(0,i18n_build_module.__)("Transform to variation"),text:(0,i18n_build_module.__)("Transform to variation"),popoverProps:{position:"bottom center",className:`${className}__popover`},icon:library_chevron_down.A,toggleProps:{iconPosition:"right"},children:()=>(0,jsx_runtime.jsx)("div",{className:`${className}__container`,children:(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(menu_items_choice.A,{choices:selectOptions,value:selectedValue,onSelect:onSelectVariation})})})})}function VariationsToggleGroupControl({className,onSelectVariation,selectedValue,variations}){return(0,jsx_runtime.jsx)("div",{className,children:(0,jsx_runtime.jsx)(toggle_group_control_component.A,{label:(0,i18n_build_module.__)("Transform to variation"),value:selectedValue,hideLabelFromVision:!0,onChange:onSelectVariation,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,children:variations.map((variation=>(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{icon:(0,jsx_runtime.jsx)(block_icon,{icon:variation.icon,showColors:!0}),value:variation.name,label:selectedValue===variation.name?variation.title:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Transform to %s"),variation.title)},variation.name)))})})}const block_variation_transforms=function __experimentalBlockVariationTransforms({blockClientId}){const{updateBlockAttributes}=(0,use_dispatch.A)(store_store),{activeBlockVariation,variations,isContentOnly}=(0,use_select.A)((select=>{const{getActiveBlockVariation,getBlockVariations}=select(build_module.M_),{getBlockName,getBlockAttributes,getBlockEditingMode}=select(store_store),name=blockClientId&&getBlockName(blockClientId),{hasContentRoleAttribute}=unlock(select(build_module.M_)),isContentBlock=hasContentRoleAttribute(name);return{activeBlockVariation:getActiveBlockVariation(name,getBlockAttributes(blockClientId)),variations:name&&getBlockVariations(name,"transform"),isContentOnly:"contentOnly"===getBlockEditingMode(blockClientId)&&!isContentBlock}}),[blockClientId]),selectedValue=activeBlockVariation?.name,hasUniqueIcons=(0,react.useMemo)((()=>{const variationIcons=new Set;return!!variations&&(variations.forEach((variation=>{variation.icon&&variationIcons.add(variation.icon?.src||variation.icon)})),variationIcons.size===variations.length)}),[variations]);if(!variations?.length||isContentOnly)return null;const showButtons=variations.length>5,Component=hasUniqueIcons?showButtons?VariationsButtons:VariationsToggleGroupControl:VariationsDropdown;return(0,jsx_runtime.jsx)(Component,{className:"block-editor-block-variation-transforms",onSelectVariation:variationName=>{updateBlockAttributes(blockClientId,{...variations.find((({name})=>name===variationName)).attributes})},selectedValue,variations})};function BlockStylesPreviewPanel({genericPreviewBlock,style,className,activeStyle}){const example=(0,build_module.E7)(genericPreviewBlock.name)?.example,styleClassName=replaceActiveStyle(className,activeStyle,style),previewBlocks=(0,react.useMemo)((()=>({...genericPreviewBlock,title:style.label||style.name,description:style.description,initialAttributes:{...genericPreviewBlock.attributes,className:styleClassName+" block-editor-block-styles__block-preview-container"},example})),[genericPreviewBlock,styleClassName]);return(0,jsx_runtime.jsx)(preview_panel,{item:previewBlocks})}const block_styles_noop=()=>{};const block_styles=function BlockStyles({clientId,onSwitch=block_styles_noop,onHoverClassName=block_styles_noop}){const{onSelect,stylesToRender,activeStyle,genericPreviewBlock,className:previewClassName}=useStylesForBlocks({clientId,onSwitch}),[hoveredStyle,setHoveredStyle]=(0,react.useState)(null),isMobileViewport=(0,use_viewport_match.A)("medium","<");if(!stylesToRender||0===stylesToRender.length)return null;const debouncedSetHoveredStyle=(0,debounce.s)(setHoveredStyle,250),styleItemHandler=item=>{var _item$name;hoveredStyle!==item?(debouncedSetHoveredStyle(item),onHoverClassName(null!==(_item$name=item?.name)&&void 0!==_item$name?_item$name:null)):debouncedSetHoveredStyle.cancel()};return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-styles",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-block-styles__variants",children:stylesToRender.map((style=>{const buttonText=style.label||style.name;return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:(0,clsx.A)("block-editor-block-styles__item",{"is-active":activeStyle.name===style.name}),variant:"secondary",label:buttonText,onMouseEnter:()=>styleItemHandler(style),onFocus:()=>styleItemHandler(style),onMouseLeave:()=>styleItemHandler(null),onBlur:()=>styleItemHandler(null),onClick:()=>(style=>{onSelect(style),onHoverClassName(null),setHoveredStyle(null),debouncedSetHoveredStyle.cancel()})(style),"aria-current":activeStyle.name===style.name,children:(0,jsx_runtime.jsx)(truncate_component.A,{numberOfLines:1,className:"block-editor-block-styles__item-text",children:buttonText})},style.name)}))}),hoveredStyle&&!isMobileViewport&&(0,jsx_runtime.jsx)(popover.Ay,{placement:"left-start",offset:34,focusOnMount:!1,children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-styles__preview-panel",onMouseLeave:()=>styleItemHandler(null),children:(0,jsx_runtime.jsx)(BlockStylesPreviewPanel,{activeStyle,className:previewClassName,genericPreviewBlock,style:hoveredStyle})})})]})};var cog=__webpack_require__("./packages/icons/build-module/library/cog.js"),styles=__webpack_require__("./packages/icons/build-module/library/styles.js"),library_list_view=__webpack_require__("./packages/icons/build-module/library/list-view.js");const TAB_SETTINGS={name:"settings",title:(0,i18n_build_module.__)("Settings"),value:"settings",icon:cog.A},TAB_STYLES={name:"styles",title:(0,i18n_build_module.__)("Styles"),value:"styles",icon:styles.A},TAB_LIST_VIEW={name:"list",title:(0,i18n_build_module.__)("List View"),value:"list-view",icon:library_list_view.A},advanced_controls_panel=()=>{const fills=(0,use_slot_fills.A)(InspectorAdvancedControls.slotName);return Boolean(fills&&fills.length)?(0,jsx_runtime.jsx)(body.Ay,{className:"block-editor-block-inspector__advanced",title:(0,i18n_build_module.__)("Advanced"),initialOpen:!1,children:(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"advanced"})}):null},PositionControlsPanel=()=>{const[initialOpen,setInitialOpen]=(0,react.useState)(),{multiSelectedBlocks}=(0,use_select.A)((select=>{const{getBlocksByClientId,getSelectedBlockClientIds}=select(store_store);return{multiSelectedBlocks:getBlocksByClientId(getSelectedBlockClientIds())}}),[]);return(0,react.useLayoutEffect)((()=>{void 0===initialOpen&&setInitialOpen(multiSelectedBlocks.some((({attributes})=>!!attributes?.style?.position?.type)))}),[initialOpen,multiSelectedBlocks,setInitialOpen]),(0,jsx_runtime.jsx)(body.Ay,{className:"block-editor-block-inspector__position",title:(0,i18n_build_module.__)("Position"),initialOpen:null!=initialOpen&&initialOpen,children:(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"position"})})},position_controls_panel=()=>{const fills=(0,use_slot_fills.A)(inspector_controls_groups.position.Slot.__unstableName);return Boolean(fills&&fills.length)?(0,jsx_runtime.jsx)(PositionControlsPanel,{}):null},settings_tab=({showAdvancedControls=!1})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(inspector_controls.Slot,{}),(0,jsx_runtime.jsx)(position_controls_panel,{}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"bindings"}),showAdvancedControls&&(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(advanced_controls_panel,{})})]}),styles_tab=({blockName,clientId,hasBlockStyles})=>{const borderPanelLabel=useBorderPanelLabel({blockName});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[hasBlockStyles&&(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(body.Ay,{title:(0,i18n_build_module.__)("Styles"),children:(0,jsx_runtime.jsx)(block_styles,{clientId})})}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"color",label:(0,i18n_build_module.__)("Color"),className:"color-block-support-panel__inner-wrapper"}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"background",label:(0,i18n_build_module.__)("Background image")}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"filter"}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"typography",label:(0,i18n_build_module.__)("Typography")}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"dimensions",label:(0,i18n_build_module.__)("Dimensions")}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"border",label:borderPanelLabel}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"styles"})]})},allowlist=["core/navigation"],use_is_list_view_tab_disabled=blockName=>!allowlist.includes(blockName),{Tabs:inspector_controls_tabs_Tabs}=unlock(private_apis.j);function InspectorControlsTabs({blockName,clientId,hasBlockStyles,tabs}){const showIconLabels=(0,use_select.A)((select=>select(store.M).get("core","showIconLabels")),[]),initialTabName=use_is_list_view_tab_disabled(blockName)?void 0:TAB_LIST_VIEW.name;return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-inspector__tabs",children:(0,jsx_runtime.jsxs)(inspector_controls_tabs_Tabs,{defaultTabId:initialTabName,children:[(0,jsx_runtime.jsx)(inspector_controls_tabs_Tabs.TabList,{children:tabs.map((tab=>showIconLabels?(0,jsx_runtime.jsx)(inspector_controls_tabs_Tabs.Tab,{tabId:tab.name,children:tab.title},tab.name):(0,jsx_runtime.jsx)(tooltip.Ay,{text:tab.title,children:(0,jsx_runtime.jsx)(inspector_controls_tabs_Tabs.Tab,{tabId:tab.name,"aria-label":tab.title,children:(0,jsx_runtime.jsx)(components_build_module_icon.A,{icon:tab.icon})})},tab.name)))}),(0,jsx_runtime.jsx)(inspector_controls_tabs_Tabs.TabPanel,{tabId:TAB_SETTINGS.name,focusable:!1,children:(0,jsx_runtime.jsx)(settings_tab,{showAdvancedControls:!!blockName})}),(0,jsx_runtime.jsx)(inspector_controls_tabs_Tabs.TabPanel,{tabId:TAB_STYLES.name,focusable:!1,children:(0,jsx_runtime.jsx)(styles_tab,{blockName,clientId,hasBlockStyles})}),(0,jsx_runtime.jsx)(inspector_controls_tabs_Tabs.TabPanel,{tabId:TAB_LIST_VIEW.name,focusable:!1,children:(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"list"})})]},clientId)})}const use_inspector_controls_tabs_EMPTY_ARRAY=[];function useInspectorControlsTabs(blockName){const tabs=[],{bindings:bindingsGroup,border:borderGroup,color:colorGroup,default:defaultGroup,dimensions:dimensionsGroup,list:listGroup,position:positionGroup,styles:stylesGroup,typography:typographyGroup,effects:effectsGroup}=inspector_controls_groups,listViewDisabled=use_is_list_view_tab_disabled(blockName),listFills=(0,use_slot_fills.A)(listGroup.Slot.__unstableName),hasListFills=!listViewDisabled&&!!listFills&&listFills.length,hasStyleFills=[...(0,use_slot_fills.A)(borderGroup.Slot.__unstableName)||[],...(0,use_slot_fills.A)(colorGroup.Slot.__unstableName)||[],...(0,use_slot_fills.A)(dimensionsGroup.Slot.__unstableName)||[],...(0,use_slot_fills.A)(stylesGroup.Slot.__unstableName)||[],...(0,use_slot_fills.A)(typographyGroup.Slot.__unstableName)||[],...(0,use_slot_fills.A)(effectsGroup.Slot.__unstableName)||[]].length,advancedFills=[...(0,use_slot_fills.A)(InspectorAdvancedControls.slotName)||[],...(0,use_slot_fills.A)(bindingsGroup.Slot.__unstableName)||[]],settingsFills=[...(0,use_slot_fills.A)(defaultGroup.Slot.__unstableName)||[],...(0,use_slot_fills.A)(positionGroup.Slot.__unstableName)||[],...hasListFills&&hasStyleFills>1?advancedFills:[]];hasListFills&&tabs.push(TAB_LIST_VIEW),settingsFills.length&&tabs.push(TAB_SETTINGS),hasStyleFills&&tabs.push(TAB_STYLES);const showTabs=function getShowTabs(blockName,tabSettings={}){return void 0!==tabSettings[blockName]?tabSettings[blockName]:void 0===tabSettings.default||tabSettings.default}(blockName,(0,use_select.A)((select=>select(store_store).getSettings().blockInspectorTabs),[]));return showTabs?tabs:use_inspector_controls_tabs_EMPTY_ARRAY}const{createPrivateSlotFill}=unlock(private_apis.j),{Fill:block_info_slot_fill_Fill,Slot:block_info_slot_fill_Slot}=createPrivateSlotFill("BlockInformation"),BlockInfo=props=>useBlockEditContext()[mayDisplayControlsKey]?(0,jsx_runtime.jsx)(block_info_slot_fill_Fill,{...props}):null;BlockInfo.Slot=props=>(0,jsx_runtime.jsx)(block_info_slot_fill_Slot,{...props});const block_info_slot_fill=BlockInfo;function BlockQuickNavigation({clientIds,onSelect}){return clientIds.length?(0,jsx_runtime.jsx)(v_stack_component.A,{spacing:1,children:clientIds.map((clientId=>(0,jsx_runtime.jsx)(BlockQuickNavigationItem,{onSelect,clientId},clientId)))}):null}function BlockQuickNavigationItem({clientId,onSelect}){const blockInformation=useBlockDisplayInformation(clientId),blockTitle=useBlockDisplayTitle({clientId,context:"list-view"}),{isSelected}=(0,use_select.A)((select=>{const{isBlockSelected,hasSelectedInnerBlock}=select(store_store);return{isSelected:isBlockSelected(clientId)||hasSelectedInnerBlock(clientId,!0)}}),[clientId]),{selectBlock}=(0,use_dispatch.A)(store_store);return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,isPressed:isSelected,onClick:async()=>{await selectBlock(clientId),onSelect&&onSelect(clientId)},children:(0,jsx_runtime.jsxs)(component.A,{children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(block_icon,{icon:blockInformation?.icon})}),(0,jsx_runtime.jsx)(flex_block_component.A,{style:{textAlign:"left"},children:(0,jsx_runtime.jsx)(truncate_component.A,{children:blockTitle})})]})})}function BlockStylesPanel({clientId}){return(0,jsx_runtime.jsx)(body.Ay,{title:(0,i18n_build_module.__)("Styles"),children:(0,jsx_runtime.jsx)(block_styles,{clientId})})}const BlockInspectorSingleBlockWrapper=({animate,wrapper,children})=>animate?wrapper(children):children,AnimatedContainer=({blockInspectorAnimationSettings,selectedBlockClientId,children})=>{const animationOrigin=blockInspectorAnimationSettings&&"leftToRight"===blockInspectorAnimationSettings.enterDirection?-50:50;return(0,jsx_runtime.jsx)(motion.P.div,{animate:{x:0,opacity:1,transition:{ease:"easeInOut",duration:.14}},initial:{x:animationOrigin,opacity:0},children},selectedBlockClientId)},BlockInspectorSingleBlock=({clientId,blockName,isSectionBlock})=>{const availableTabs=useInspectorControlsTabs(blockName),showTabs=!isSectionBlock&&availableTabs?.length>1,hasBlockStyles=(0,use_select.A)((select=>{const{getBlockStyles}=select(build_module.M_),blockStyles=getBlockStyles(blockName);return blockStyles&&blockStyles.length>0}),[blockName]),blockInformation=useBlockDisplayInformation(clientId),borderPanelLabel=useBorderPanelLabel({blockName}),contentClientIds=(0,use_select.A)((select=>{if(!isSectionBlock)return;const{getClientIdsOfDescendants,getBlockName,getBlockEditingMode}=select(store_store);return getClientIdsOfDescendants(clientId).filter((current=>"core/list-item"!==getBlockName(current)&&"contentOnly"===getBlockEditingMode(current)))}),[isSectionBlock,clientId]);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-inspector",children:[(0,jsx_runtime.jsx)(block_card,{...blockInformation,className:blockInformation.isSynced&&"is-synced"}),(0,jsx_runtime.jsx)(block_variation_transforms,{blockClientId:clientId}),(0,jsx_runtime.jsx)(block_info_slot_fill.Slot,{}),showTabs&&(0,jsx_runtime.jsx)(InspectorControlsTabs,{hasBlockStyles,clientId,blockName,tabs:availableTabs}),!showTabs&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[hasBlockStyles&&(0,jsx_runtime.jsx)(BlockStylesPanel,{clientId}),contentClientIds&&contentClientIds?.length>0&&(0,jsx_runtime.jsx)(body.Ay,{title:(0,i18n_build_module.__)("Content"),children:(0,jsx_runtime.jsx)(BlockQuickNavigation,{clientIds:contentClientIds})}),!isSectionBlock&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(inspector_controls.Slot,{}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"list"}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"color",label:(0,i18n_build_module.__)("Color"),className:"color-block-support-panel__inner-wrapper"}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"background",label:(0,i18n_build_module.__)("Background image")}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"typography",label:(0,i18n_build_module.__)("Typography")}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"dimensions",label:(0,i18n_build_module.__)("Dimensions")}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"border",label:borderPanelLabel}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"styles"}),(0,jsx_runtime.jsx)(position_controls_panel,{}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"bindings"}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(advanced_controls_panel,{})})]})]}),(0,jsx_runtime.jsx)(SkipToSelectedBlock,{},"back")]})},block_inspector=({showNoBlockSelectedMessage=!0})=>{const{count,selectedBlockName,selectedBlockClientId,blockType,isSectionBlock}=(0,use_select.A)((select=>{const{getSelectedBlockClientId,getSelectedBlockCount,getBlockName,getParentSectionBlock,isSectionBlock:_isSectionBlock}=unlock(select(store_store)),renderedBlockClientId=getParentSectionBlock(getSelectedBlockClientId())||getSelectedBlockClientId(),_selectedBlockName=renderedBlockClientId&&getBlockName(renderedBlockClientId),_blockType=_selectedBlockName&&(0,build_module.E7)(_selectedBlockName);return{count:getSelectedBlockCount(),selectedBlockClientId:renderedBlockClientId,selectedBlockName:_selectedBlockName,blockType:_blockType,isSectionBlock:_isSectionBlock(renderedBlockClientId)}}),[]),availableTabs=useInspectorControlsTabs(blockType?.name),showTabs=availableTabs?.length>1,blockInspectorAnimationSettings=function useBlockInspectorAnimationSettings(blockType){return(0,use_select.A)((select=>{if(blockType){const globalBlockInspectorAnimationSettings=select(store_store).getSettings().blockInspectorAnimation,animationParent=globalBlockInspectorAnimationSettings?.animationParent,{getSelectedBlockClientId,getBlockParentsByBlockName}=select(store_store);return getBlockParentsByBlockName(getSelectedBlockClientId(),animationParent,!0)[0]||blockType.name===animationParent?globalBlockInspectorAnimationSettings?.[blockType.name]:null}return null}),[blockType])}(blockType),borderPanelLabel=useBorderPanelLabel({blockName:selectedBlockName});if(count>1&&!isSectionBlock)return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-inspector",children:[(0,jsx_runtime.jsx)(MultiSelectionInspector,{}),showTabs?(0,jsx_runtime.jsx)(InspectorControlsTabs,{tabs:availableTabs}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(inspector_controls.Slot,{}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"color",label:(0,i18n_build_module.__)("Color"),className:"color-block-support-panel__inner-wrapper"}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"background",label:(0,i18n_build_module.__)("Background image")}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"typography",label:(0,i18n_build_module.__)("Typography")}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"dimensions",label:(0,i18n_build_module.__)("Dimensions")}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"border",label:borderPanelLabel}),(0,jsx_runtime.jsx)(inspector_controls.Slot,{group:"styles"})]})]});const isSelectedBlockUnregistered=selectedBlockName===(0,build_module.Lq)();return blockType&&selectedBlockClientId&&!isSelectedBlockUnregistered?(0,jsx_runtime.jsx)(BlockInspectorSingleBlockWrapper,{animate:blockInspectorAnimationSettings,wrapper:children=>(0,jsx_runtime.jsx)(AnimatedContainer,{blockInspectorAnimationSettings,selectedBlockClientId,children}),children:(0,jsx_runtime.jsx)(BlockInspectorSingleBlock,{clientId:selectedBlockClientId,blockName:blockType.name,isSectionBlock})}):showNoBlockSelectedMessage?(0,jsx_runtime.jsx)("span",{className:"block-editor-block-inspector__no-blocks",children:(0,i18n_build_module.__)("No block selected.")}):null},arrowKeyCodes=(window.navigator.userAgent.indexOf("Trident"),new Set([keycodes_build_module.UP,keycodes_build_module.PX,keycodes_build_module.M3,keycodes_build_module.NS])),initialTriggerPercentage=.75;function useTypewriter(){const hasSelectedBlock=(0,use_select.A)((select=>select(store_store).hasSelectedBlock()),[]);return(0,use_ref_effect.A)((node=>{if(!hasSelectedBlock)return;const{ownerDocument}=node,{defaultView}=ownerDocument;let scrollResizeRafId,onKeyDownRafId,caretRect;function onScrollResize(){scrollResizeRafId||(scrollResizeRafId=defaultView.requestAnimationFrame((()=>{computeCaretRectangle(),scrollResizeRafId=null})))}function onKeyDown(event){onKeyDownRafId&&defaultView.cancelAnimationFrame(onKeyDownRafId),onKeyDownRafId=defaultView.requestAnimationFrame((()=>{maintainCaretPosition(event),onKeyDownRafId=null}))}function maintainCaretPosition({keyCode}){if(!isSelectionEligibleForScroll())return;const currentCaretRect=(0,compute_caret_rect.A)(defaultView);if(!currentCaretRect)return;if(!caretRect)return void(caretRect=currentCaretRect);if(arrowKeyCodes.has(keyCode))return void(caretRect=currentCaretRect);const diff=currentCaretRect.top-caretRect.top;if(0===diff)return;const scrollContainer=(0,get_scroll_container.A)(node);if(!scrollContainer)return;const windowScroll=scrollContainer===ownerDocument.body||scrollContainer===ownerDocument.documentElement,scrollY=windowScroll?defaultView.scrollY:scrollContainer.scrollTop,scrollContainerY=windowScroll?0:scrollContainer.getBoundingClientRect().top,relativeScrollPosition=windowScroll?caretRect.top/defaultView.innerHeight:(caretRect.top-scrollContainerY)/(defaultView.innerHeight-scrollContainerY);if(0===scrollY&&relativeScrollPosition<initialTriggerPercentage&&function isLastEditableNode(){const editableNodes=node.querySelectorAll('[contenteditable="true"]');return editableNodes[editableNodes.length-1]===ownerDocument.activeElement}())return void(caretRect=currentCaretRect);const scrollContainerHeight=windowScroll?defaultView.innerHeight:scrollContainer.clientHeight;caretRect.top+caretRect.height>scrollContainerY+scrollContainerHeight||caretRect.top<scrollContainerY?caretRect=currentCaretRect:windowScroll?defaultView.scrollBy(0,diff):scrollContainer.scrollTop+=diff}function addSelectionChangeListener(){ownerDocument.addEventListener("selectionchange",computeCaretRectOnSelectionChange)}function computeCaretRectOnSelectionChange(){ownerDocument.removeEventListener("selectionchange",computeCaretRectOnSelectionChange),computeCaretRectangle()}function computeCaretRectangle(){isSelectionEligibleForScroll()&&(caretRect=(0,compute_caret_rect.A)(defaultView))}function isSelectionEligibleForScroll(){return node.contains(ownerDocument.activeElement)&&ownerDocument.activeElement.isContentEditable}return defaultView.addEventListener("scroll",onScrollResize,!0),defaultView.addEventListener("resize",onScrollResize,!0),node.addEventListener("keydown",onKeyDown),node.addEventListener("keyup",maintainCaretPosition),node.addEventListener("mousedown",addSelectionChangeListener),node.addEventListener("touchstart",addSelectionChangeListener),()=>{defaultView.removeEventListener("scroll",onScrollResize,!0),defaultView.removeEventListener("resize",onScrollResize,!0),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("keyup",maintainCaretPosition),node.removeEventListener("mousedown",addSelectionChangeListener),node.removeEventListener("touchstart",addSelectionChangeListener),ownerDocument.removeEventListener("selectionchange",computeCaretRectOnSelectionChange),defaultView.cancelAnimationFrame(scrollResizeRafId),defaultView.cancelAnimationFrame(onKeyDownRafId)}}),[hasSelectedBlock])}const RenderedRefsContext=(0,react.createContext)({});function RecursionProvider({children,uniqueId,blockName=""}){const previouslyRenderedBlocks=(0,react.useContext)(RenderedRefsContext),{name}=useBlockEditContext();blockName=blockName||name;const newRenderedBlocks=(0,react.useMemo)((()=>function addToBlockType(renderedBlocks,blockName,uniqueId){const result={...renderedBlocks,[blockName]:renderedBlocks[blockName]?new Set(renderedBlocks[blockName]):new Set};return result[blockName].add(uniqueId),result}(previouslyRenderedBlocks,blockName,uniqueId)),[previouslyRenderedBlocks,blockName,uniqueId]);return(0,jsx_runtime.jsx)(RenderedRefsContext.Provider,{value:newRenderedBlocks,children})}function useHasRecursion(uniqueId,blockName=""){const previouslyRenderedBlocks=(0,react.useContext)(RenderedRefsContext),{name}=useBlockEditContext();return blockName=blockName||name,Boolean(previouslyRenderedBlocks[blockName]?.has(uniqueId))}var time=__webpack_require__("./packages/components/build-module/date-time/time/index.js"),startOfDay=__webpack_require__("./node_modules/date-fns/startOfDay.mjs"),subMonths=__webpack_require__("./node_modules/date-fns/subMonths.mjs"),format=__webpack_require__("./node_modules/date-fns/format.mjs"),addMonths=__webpack_require__("./node_modules/date-fns/addMonths.mjs"),isSameMonth=__webpack_require__("./node_modules/date-fns/isSameMonth.mjs"),isEqual=__webpack_require__("./node_modules/date-fns/isEqual.mjs"),isSameDay=__webpack_require__("./node_modules/date-fns/isSameDay.mjs"),addDays=__webpack_require__("./node_modules/date-fns/addDays.mjs"),subWeeks=__webpack_require__("./node_modules/date-fns/subWeeks.mjs"),addWeeks=__webpack_require__("./node_modules/date-fns/addWeeks.mjs"),startOfWeek=__webpack_require__("./node_modules/date-fns/startOfWeek.mjs"),endOfWeek=__webpack_require__("./node_modules/date-fns/endOfWeek.mjs"),arrow_left=__webpack_require__("./packages/icons/build-module/library/arrow-left.js"),isAfter=__webpack_require__("./node_modules/date-fns/isAfter.mjs"),isBefore=__webpack_require__("./node_modules/date-fns/isBefore.mjs"),set=__webpack_require__("./node_modules/date-fns/set.mjs"),startOfToday=__webpack_require__("./node_modules/date-fns/startOfToday.mjs"),setMonth=__webpack_require__("./node_modules/date-fns/setMonth.mjs"),setYear=__webpack_require__("./node_modules/date-fns/setYear.mjs"),subYears=__webpack_require__("./node_modules/date-fns/subYears.mjs"),addYears=__webpack_require__("./node_modules/date-fns/addYears.mjs"),eachDayOfInterval=__webpack_require__("./node_modules/date-fns/eachDayOfInterval.mjs"),eachMonthOfInterval=__webpack_require__("./node_modules/date-fns/eachMonthOfInterval.mjs"),startOfMonth=__webpack_require__("./node_modules/date-fns/startOfMonth.mjs"),endOfMonth=__webpack_require__("./node_modules/date-fns/endOfMonth.mjs"),eachWeekOfInterval=__webpack_require__("./node_modules/date-fns/eachWeekOfInterval.mjs");let Day=function(Day){return Day[Day.SUNDAY=0]="SUNDAY",Day[Day.MONDAY=1]="MONDAY",Day[Day.TUESDAY=2]="TUESDAY",Day[Day.WEDNESDAY=3]="WEDNESDAY",Day[Day.THURSDAY=4]="THURSDAY",Day[Day.FRIDAY=5]="FRIDAY",Day[Day.SATURDAY=6]="SATURDAY",Day}({});const inRange=(date,min,max)=>((0,isEqual.n)(date,min)||(0,isAfter.d)(date,min))&&((0,isEqual.n)(date,max)||(0,isBefore.Y)(date,max)),clearTime=date=>(0,set.h)(date,{hours:0,minutes:0,seconds:0,milliseconds:0}),Wrapper=(0,emotion_styled_base_browser_esm.A)("div",{target:"e105ri6r5"})(box_sizing.r,";"),Navigator=(0,emotion_styled_base_browser_esm.A)(h_stack_component.A,{target:"e105ri6r4"})("margin-bottom:",(0,space.x)(4),";"),NavigatorHeading=(0,emotion_styled_base_browser_esm.A)(heading_component.A,{target:"e105ri6r3"})("font-size:",config_values.A.fontSize,";font-weight:",config_values.A.fontWeight,";strong{font-weight:",config_values.A.fontWeightHeading,";}"),Calendar=(0,emotion_styled_base_browser_esm.A)("div",{target:"e105ri6r2"})("column-gap:",(0,space.x)(2),";display:grid;grid-template-columns:0.5fr repeat( 5, 1fr ) 0.5fr;justify-items:center;row-gap:",(0,space.x)(2),";"),DayOfWeek=(0,emotion_styled_base_browser_esm.A)("div",{target:"e105ri6r1"})("color:",colors_values.l.theme.gray[700],";font-size:",config_values.A.fontSize,";line-height:",config_values.A.fontLineHeightBase,";&:nth-of-type( 1 ){justify-self:start;}&:nth-of-type( 7 ){justify-self:end;}"),DayButton=(0,emotion_styled_base_browser_esm.A)(build_module_button.Ay,{shouldForwardProp:prop=>!["column","isSelected","isToday","hasEvents"].includes(prop),target:"e105ri6r0"})("grid-column:",(props=>props.column),";position:relative;justify-content:center;",(props=>1===props.column&&"\n\t\tjustify-self: start;\n\t\t")," ",(props=>7===props.column&&"\n\t\tjustify-self: end;\n\t\t")," ",(props=>props.disabled&&"\n\t\tpointer-events: none;\n\t\t")," &&&{border-radius:",config_values.A.radiusRound,";height:",(0,space.x)(7),";width:",(0,space.x)(7),";",(props=>props.isSelected&&`\n\t\t\t\tbackground: ${colors_values.l.theme.accent};\n\n\t\t\t\t&,\n\t\t\t\t&:hover:not(:disabled, [aria-disabled=true]) {\n\t\t\t\t\tcolor: ${colors_values.l.theme.accentInverted};\n\t\t\t\t}\n\n\t\t\t\t&:focus:not(:disabled),\n\t\t\t\t&:focus:not(:disabled) {\n\t\t\t\t\tborder: ${config_values.A.borderWidthFocus} solid currentColor;\n\t\t\t\t}\n\n\t\t\t\t/* Highlight the selected day for high-contrast mode */\n\t\t\t\t&::after {\n\t\t\t\t\tcontent: '';\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tpointer-events: none;\n\t\t\t\t\tinset: 0;\n\t\t\t\t\tborder-radius: inherit;\n\t\t\t\t\tborder: 1px solid transparent;\n\t\t\t\t}\n\t\t\t`)," ",(props=>!props.isSelected&&props.isToday&&`\n\t\t\tbackground: ${colors_values.l.theme.gray[200]};\n\t\t\t`),";}",(props=>props.hasEvents&&`\n\t\t::before {\n\t\t\tborder: 2px solid ${props.isSelected?colors_values.l.theme.accentInverted:colors_values.l.theme.accent};\n\t\t\tborder-radius: ${config_values.A.radiusRound};\n\t\t\tcontent: " ";\n\t\t\tleft: 50%;\n\t\t\tposition: absolute;\n\t\t\ttransform: translate(-50%, 9px);\n\t\t}\n\t\t`),";");var date_time_utils=__webpack_require__("./packages/components/build-module/date-time/utils.js"),constants=__webpack_require__("./packages/components/build-module/date-time/constants.js");function date_Day({day,column,isSelected,isFocusable,isFocusAllowed,isToday,isInvalid,numEvents,onClick,onKeyDown}){const ref=(0,react.useRef)();return(0,react.useEffect)((()=>{ref.current&&isFocusable&&isFocusAllowed&&ref.current.focus()}),[isFocusable]),(0,jsx_runtime.jsx)(DayButton,{ref,className:"components-datetime__date__day",disabled:isInvalid,tabIndex:isFocusable?0:-1,"aria-label":getDayLabel(day,isSelected,numEvents),column,isSelected,isToday,hasEvents:numEvents>0,onClick,onKeyDown,children:(0,date_build_module.b5)("j",day,-day.getTimezoneOffset())})}function getDayLabel(date,isSelected,numEvents){const{formats}=(0,date_build_module.mt)(),localizedDate=(0,date_build_module.b5)(formats.date,date,-date.getTimezoneOffset());return isSelected&&numEvents>0?(0,i18n_build_module.nv)((0,i18n_build_module._n)("%1$s. Selected. There is %2$d event","%1$s. Selected. There are %2$d events",numEvents),localizedDate,numEvents):isSelected?(0,i18n_build_module.nv)((0,i18n_build_module.__)("%1$s. Selected"),localizedDate):numEvents>0?(0,i18n_build_module.nv)((0,i18n_build_module._n)("%1$s. There is %2$d event","%1$s. There are %2$d events",numEvents),localizedDate,numEvents):localizedDate}const date=function DatePicker({currentDate,onChange,events=[],isInvalidDate,onMonthPreviewed,startOfWeek:weekStartsOn=0}){const date=currentDate?(0,date_time_utils.Ch)(currentDate):new Date,{calendar,viewing,setSelected,setViewing,isSelected,viewPreviousMonth,viewNextMonth}=(({weekStartsOn=Day.SUNDAY,viewing:initialViewing=new Date,selected:initialSelected=[],numberOfMonths=1}={})=>{const[viewing,setViewing]=(0,react.useState)(initialViewing),viewToday=(0,react.useCallback)((()=>setViewing((0,startOfToday.R)())),[setViewing]),viewMonth=(0,react.useCallback)((month=>setViewing((v=>(0,setMonth.Z)(v,month)))),[]),viewPreviousMonth=(0,react.useCallback)((()=>setViewing((v=>(0,subMonths.a)(v,1)))),[]),viewNextMonth=(0,react.useCallback)((()=>setViewing((v=>(0,addMonths.P)(v,1)))),[]),viewYear=(0,react.useCallback)((year=>setViewing((v=>(0,setYear.i)(v,year)))),[]),viewPreviousYear=(0,react.useCallback)((()=>setViewing((v=>(0,subYears.d)(v,1)))),[]),viewNextYear=(0,react.useCallback)((()=>setViewing((v=>(0,addYears.e)(v,1)))),[]),[selected,setSelected]=(0,react.useState)(initialSelected.map(clearTime)),isSelected=(0,react.useCallback)((date=>selected.findIndex((s=>(0,isEqual.n)(s,date)))>-1),[selected]),select=(0,react.useCallback)(((date,replaceExisting)=>{setSelected(replaceExisting?Array.isArray(date)?date:[date]:selectedItems=>selectedItems.concat(Array.isArray(date)?date:[date]))}),[]),deselect=(0,react.useCallback)((date=>setSelected((selectedItems=>Array.isArray(date)?selectedItems.filter((s=>!date.map((d=>d.getTime())).includes(s.getTime()))):selectedItems.filter((s=>!(0,isEqual.n)(s,date)))))),[]),toggle=(0,react.useCallback)(((date,replaceExisting)=>isSelected(date)?deselect(date):select(date,replaceExisting)),[deselect,isSelected,select]),selectRange=(0,react.useCallback)(((start,end,replaceExisting)=>{setSelected(replaceExisting?(0,eachDayOfInterval.k)({start,end}):selectedItems=>selectedItems.concat((0,eachDayOfInterval.k)({start,end})))}),[]),deselectRange=(0,react.useCallback)(((start,end)=>{setSelected((selectedItems=>selectedItems.filter((s=>!(0,eachDayOfInterval.k)({start,end}).map((d=>d.getTime())).includes(s.getTime())))))}),[]),calendar=(0,react.useMemo)((()=>(0,eachMonthOfInterval.i)({start:(0,startOfMonth.w)(viewing),end:(0,endOfMonth.p)((0,addMonths.P)(viewing,numberOfMonths-1))}).map((month=>(0,eachWeekOfInterval.Y)({start:(0,startOfMonth.w)(month),end:(0,endOfMonth.p)(month)},{weekStartsOn}).map((week=>(0,eachDayOfInterval.k)({start:(0,startOfWeek.k)(week,{weekStartsOn}),end:(0,endOfWeek.$)(week,{weekStartsOn})})))))),[viewing,weekStartsOn,numberOfMonths]);return{clearTime,inRange,viewing,setViewing,viewToday,viewMonth,viewPreviousMonth,viewNextMonth,viewYear,viewPreviousYear,viewNextYear,selected,setSelected,clearSelected:()=>setSelected([]),isSelected,select,deselect,toggle,selectRange,deselectRange,calendar}})({selected:[(0,startOfDay.o)(date)],viewing:(0,startOfDay.o)(date),weekStartsOn}),[focusable,setFocusable]=(0,react.useState)((0,startOfDay.o)(date)),[isFocusWithinCalendar,setIsFocusWithinCalendar]=(0,react.useState)(!1),[prevCurrentDate,setPrevCurrentDate]=(0,react.useState)(currentDate);return currentDate!==prevCurrentDate&&(setPrevCurrentDate(currentDate),setSelected([(0,startOfDay.o)(date)]),setViewing((0,startOfDay.o)(date)),setFocusable((0,startOfDay.o)(date))),(0,jsx_runtime.jsxs)(Wrapper,{className:"components-datetime__date",role:"application","aria-label":(0,i18n_build_module.__)("Calendar"),children:[(0,jsx_runtime.jsxs)(Navigator,{children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:(0,i18n_build_module.V8)()?arrow_right.A:arrow_left.A,variant:"tertiary","aria-label":(0,i18n_build_module.__)("View previous month"),onClick:()=>{viewPreviousMonth(),setFocusable((0,subMonths.a)(focusable,1)),onMonthPreviewed?.((0,format.GP)((0,subMonths.a)(viewing,1),constants.T))},size:"compact"}),(0,jsx_runtime.jsxs)(NavigatorHeading,{level:3,children:[(0,jsx_runtime.jsx)("strong",{children:(0,date_build_module.b5)("F",viewing,-viewing.getTimezoneOffset())})," ",(0,date_build_module.b5)("Y",viewing,-viewing.getTimezoneOffset())]}),(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:(0,i18n_build_module.V8)()?arrow_left.A:arrow_right.A,variant:"tertiary","aria-label":(0,i18n_build_module.__)("View next month"),onClick:()=>{viewNextMonth(),setFocusable((0,addMonths.P)(focusable,1)),onMonthPreviewed?.((0,format.GP)((0,addMonths.P)(viewing,1),constants.T))},size:"compact"})]}),(0,jsx_runtime.jsxs)(Calendar,{onFocus:()=>setIsFocusWithinCalendar(!0),onBlur:()=>setIsFocusWithinCalendar(!1),children:[calendar[0][0].map((day=>(0,jsx_runtime.jsx)(DayOfWeek,{children:(0,date_build_module.b5)("D",day,-day.getTimezoneOffset())},day.toString()))),calendar[0].map((week=>week.map(((day,index)=>(0,isSameMonth.t)(day,viewing)?(0,jsx_runtime.jsx)(date_Day,{day,column:index+1,isSelected:isSelected(day),isFocusable:(0,isEqual.n)(day,focusable),isFocusAllowed:isFocusWithinCalendar,isToday:(0,isSameDay.r)(day,new Date),isInvalid:!!isInvalidDate&&isInvalidDate(day),numEvents:events.filter((event=>(0,isSameDay.r)(event.date,day))).length,onClick:()=>{setSelected([day]),setFocusable(day),onChange?.((0,format.GP)(new Date(day.getFullYear(),day.getMonth(),day.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()),constants.T))},onKeyDown:event=>{let nextFocusable;"ArrowLeft"===event.key&&(nextFocusable=(0,addDays.f)(day,(0,i18n_build_module.V8)()?1:-1)),"ArrowRight"===event.key&&(nextFocusable=(0,addDays.f)(day,(0,i18n_build_module.V8)()?-1:1)),"ArrowUp"===event.key&&(nextFocusable=(0,subWeeks.k)(day,1)),"ArrowDown"===event.key&&(nextFocusable=(0,addWeeks.J)(day,1)),"PageUp"===event.key&&(nextFocusable=(0,subMonths.a)(day,1)),"PageDown"===event.key&&(nextFocusable=(0,addMonths.P)(day,1)),"Home"===event.key&&(nextFocusable=(0,startOfWeek.k)(day)),"End"===event.key&&(nextFocusable=(0,startOfDay.o)((0,endOfWeek.$)(day))),nextFocusable&&(event.preventDefault(),setFocusable(nextFocusable),(0,isSameMonth.t)(nextFocusable,viewing)||(setViewing(nextFocusable),onMonthPreviewed?.((0,format.GP)(nextFocusable,constants.T))))}},day.toString()):null))))]})]})};const styles_Wrapper=(0,emotion_styled_base_browser_esm.A)(v_stack_component.A,{target:"e1p5onf00"})({name:"1khn195",styles:"box-sizing:border-box"}),date_time_noop=()=>{};const DateTimePicker=(0,react.forwardRef)((function UnforwardedDateTimePicker({currentDate,is12Hour,dateOrder,isInvalidDate,onMonthPreviewed=date_time_noop,onChange,events,startOfWeek},ref){return(0,jsx_runtime.jsx)(styles_Wrapper,{ref,className:"components-datetime",spacing:4,children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(time.h,{currentTime:currentDate,onChange,is12Hour,dateOrder}),(0,jsx_runtime.jsx)(date,{currentDate,onChange,isInvalidDate,events,onMonthPreviewed,startOfWeek})]})})})),build_module_date_time=DateTimePicker;function InspectorPopoverHeader({title,help,actions=[],onClose}){return(0,jsx_runtime.jsxs)(v_stack_component.A,{className:"block-editor-inspector-popover-header",spacing:4,children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{alignment:"center",children:[(0,jsx_runtime.jsx)(heading_component.A,{className:"block-editor-inspector-popover-header__heading",level:2,size:13,children:title}),(0,jsx_runtime.jsx)(spacer_component.A,{}),actions.map((({label,icon,onClick})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",className:"block-editor-inspector-popover-header__action",label,icon,variant:!icon&&"tertiary",onClick,children:!icon&&label},label))),onClose&&(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",className:"block-editor-inspector-popover-header__action",label:(0,i18n_build_module.__)("Close"),icon:close_small.A,onClick:onClose})]}),help&&(0,jsx_runtime.jsx)(text_component.A,{children:help})]})}const PrivatePublishDateTimePicker=(0,react.forwardRef)((function PublishDateTimePicker({onClose,onChange,showPopoverHeaderActions,isCompact,currentDate,...additionalProps},ref){const datePickerProps={startOfWeek:(0,date_build_module.mt)().l10n.startOfWeek,onChange,currentDate:isCompact?void 0:currentDate,currentTime:isCompact?currentDate:void 0,...additionalProps},DatePickerComponent=isCompact?time.h:build_module_date_time;return(0,jsx_runtime.jsxs)("div",{ref,className:"block-editor-publish-date-time-picker",children:[(0,jsx_runtime.jsx)(InspectorPopoverHeader,{title:(0,i18n_build_module.__)("Publish"),actions:showPopoverHeaderActions?[{label:(0,i18n_build_module.__)("Now"),onClick:()=>onChange?.(null)}]:void 0,onClose}),(0,jsx_runtime.jsx)(DatePickerComponent,{...datePickerProps})]})}));const publish_date_time_picker=(0,react.forwardRef)((function PublicPublishDateTimePicker(props,ref){return(0,jsx_runtime.jsx)(PrivatePublishDateTimePicker,{...props,showPopoverHeaderActions:!0,isCompact:!1,ref})})),elements_ELEMENT_CLASS_NAMES={button:"wp-element-button",caption:"wp-element-caption"},__experimentalGetElementClassName=element=>elements_ELEMENT_CLASS_NAMES[element]?elements_ELEMENT_CLASS_NAMES[element]:"";function useHasImageSettingsPanel(name,value,inheritedValue){return"core/image"===name&&inheritedValue?.lightbox?.allowEditing||!!value?.lightbox}function ImageSettingsPanel({onChange,value,inheritedValue,panelId}){const dropdownMenuProps=useToolsPanelDropdownMenuProps(),resetLightbox=()=>{onChange(void 0)};let lightboxChecked=!1;return inheritedValue?.lightbox?.enabled&&(lightboxChecked=inheritedValue.lightbox.enabled),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(tools_panel_component.A,{label:(0,i18n_build_module._x)("Settings","Image settings"),resetAll:resetLightbox,panelId,dropdownMenuProps,children:(0,jsx_runtime.jsx)(tools_panel_item_component.A,{hasValue:()=>!!value?.lightbox,label:(0,i18n_build_module.__)("Expand on click"),onDeselect:resetLightbox,isShownByDefault:!0,panelId,children:(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Expand on click"),checked:lightboxChecked,onChange:newSetting=>{onChange({enabled:newSetting})}})})})})}var textarea_control=__webpack_require__("./packages/components/build-module/textarea-control/index.js");function AdvancedPanel({value,onChange,inheritedValue=value}){const[cssError,setCSSError]=(0,react.useState)(null),customCSS=inheritedValue?.css;return(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:3,children:[cssError&&(0,jsx_runtime.jsx)(notice.A,{status:"error",onRemove:()=>setCSSError(null),children:cssError}),(0,jsx_runtime.jsx)(textarea_control.A,{label:(0,i18n_build_module.__)("Additional CSS"),__nextHasNoMarginBottom:!0,value:customCSS,onChange:newValue=>function handleOnChange(newValue){if(onChange({...value,css:newValue}),cssError){const[transformed]=transform_styles([{css:newValue}],".for-validation-only");transformed&&setCSSError(null)}}(newValue),onBlur:function handleOnBlur(event){if(!event?.target?.value)return void setCSSError(null);const[transformed]=transform_styles([{css:event.target.value}],".for-validation-only");setCSSError(null===transformed?(0,i18n_build_module.__)("There is an error with your CSS structure."):null)},className:"block-editor-global-styles-advanced-panel__custom-css-input",spellCheck:!1})]})}var dist=__webpack_require__("./node_modules/memize/dist/index.js");const globalStylesChangesCache=new Map,get_global_styles_changes_EMPTY_ARRAY=[],translationMap={caption:(0,i18n_build_module.__)("Caption"),link:(0,i18n_build_module.__)("Link"),button:(0,i18n_build_module.__)("Button"),heading:(0,i18n_build_module.__)("Heading"),h1:(0,i18n_build_module.__)("H1"),h2:(0,i18n_build_module.__)("H2"),h3:(0,i18n_build_module.__)("H3"),h4:(0,i18n_build_module.__)("H4"),h5:(0,i18n_build_module.__)("H5"),h6:(0,i18n_build_module.__)("H6"),"settings.color":(0,i18n_build_module.__)("Color"),"settings.typography":(0,i18n_build_module.__)("Typography"),"styles.color":(0,i18n_build_module.__)("Colors"),"styles.spacing":(0,i18n_build_module.__)("Spacing"),"styles.background":(0,i18n_build_module.__)("Background"),"styles.typography":(0,i18n_build_module.__)("Typography")},getBlockNames=(0,dist.A)((()=>(0,build_module.li)().reduce(((accumulator,{name,title})=>(accumulator[name]=title,accumulator)),{}))),isObject=obj=>null!==obj&&"object"==typeof obj;function deepCompare(changedObject,originalObject,parentPath=""){if(!isObject(changedObject)&&!isObject(originalObject))return changedObject!==originalObject?parentPath.split(".").slice(0,2).join("."):void 0;changedObject=isObject(changedObject)?changedObject:{},originalObject=isObject(originalObject)?originalObject:{};const allKeys=new Set([...Object.keys(changedObject),...Object.keys(originalObject)]);let diffs=[];for(const key of allKeys){const path=parentPath?parentPath+"."+key:key,changedPath=deepCompare(changedObject[key],originalObject[key],path);changedPath&&(diffs=diffs.concat(changedPath))}return diffs}function getGlobalStylesChangelist(next,previous){const cacheKey=JSON.stringify({next,previous});if(globalStylesChangesCache.has(cacheKey))return globalStylesChangesCache.get(cacheKey);const changedValueTree=deepCompare({styles:{background:next?.styles?.background,color:next?.styles?.color,typography:next?.styles?.typography,spacing:next?.styles?.spacing},blocks:next?.styles?.blocks,elements:next?.styles?.elements,settings:next?.settings},{styles:{background:previous?.styles?.background,color:previous?.styles?.color,typography:previous?.styles?.typography,spacing:previous?.styles?.spacing},blocks:previous?.styles?.blocks,elements:previous?.styles?.elements,settings:previous?.settings});if(!changedValueTree.length)return globalStylesChangesCache.set(cacheKey,get_global_styles_changes_EMPTY_ARRAY),get_global_styles_changes_EMPTY_ARRAY;const result=[...new Set(changedValueTree)].reduce(((acc,curr)=>{const translation=function getTranslation(key){if(translationMap[key])return translationMap[key];const keyArray=key.split(".");if("blocks"===keyArray?.[0]){const blockName=getBlockNames()?.[keyArray[1]];return blockName||keyArray[1]}return"elements"===keyArray?.[0]?translationMap[keyArray[1]]||keyArray[1]:void 0}(curr);return translation&&acc.push([curr.split(".")[0],translation]),acc}),[]);return globalStylesChangesCache.set(cacheKey,result),result}function getGlobalStylesChanges(next,previous,options={}){let changeList=getGlobalStylesChangelist(next,previous);const changesLength=changeList.length,{maxResults}=options;return changesLength?(maxResults&&changesLength>maxResults&&(changeList=changeList.slice(0,maxResults)),Object.entries(changeList.reduce(((acc,curr)=>{const group=acc[curr[0]]||[];return group.includes(curr[1])||(acc[curr[0]]=[...group,curr[1]]),acc}),{})).map((([key,changeValues])=>{const changeValuesLength=changeValues.length,joinedChangesValue=changeValues.join((0,i18n_build_module.__)(", "));switch(key){case"blocks":return(0,i18n_build_module.nv)((0,i18n_build_module._n)("%s block.","%s blocks.",changeValuesLength),joinedChangesValue);case"elements":return(0,i18n_build_module.nv)((0,i18n_build_module._n)("%s element.","%s elements.",changeValuesLength),joinedChangesValue);case"settings":return(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s settings."),joinedChangesValue);case"styles":return(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s styles."),joinedChangesValue);default:return(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s."),joinedChangesValue)}}))):get_global_styles_changes_EMPTY_ARRAY}function addValuesForElement(element,values,innerBlocks){if(null==element||!1===element)return;if(Array.isArray(element))return addValuesForElements(element,values,innerBlocks);switch(typeof element){case"string":case"number":return}const{type,props}=element;switch(type){case react.StrictMode:case react.Fragment:return addValuesForElements(props.children,values,innerBlocks);case raw_html.A:return;case inner_blocks.Content:return addValuesForBlocks(values,innerBlocks);case Content:return void values.push(props.value)}switch(typeof type){case"string":return void 0!==props.children?addValuesForElements(props.children,values,innerBlocks):void 0;case"function":return addValuesForElement(type.prototype&&"function"==typeof type.prototype.render?new type(props).render():type(props),values,innerBlocks)}}function addValuesForElements(children,...args){children=Array.isArray(children)?children:[children];for(let i=0;i<children.length;i++)addValuesForElement(children[i],...args)}function addValuesForBlocks(values,blocks){for(let i=0;i<blocks.length;i++){const{name,attributes,innerBlocks}=blocks[i];addValuesForElement((0,build_module.GD)(name,attributes,(0,jsx_runtime.jsx)(inner_blocks.Content,{})),values,innerBlocks)}}const DEFAULT_SCALE_OPTIONS=[{value:"fill",label:(0,i18n_build_module._x)("Fill","Scale option for dimensions control"),help:(0,i18n_build_module.__)("Fill the space by stretching the content.")},{value:"contain",label:(0,i18n_build_module._x)("Contain","Scale option for dimensions control"),help:(0,i18n_build_module.__)("Fit the content to the space without clipping.")},{value:"cover",label:(0,i18n_build_module._x)("Cover","Scale option for dimensions control"),help:(0,i18n_build_module.__)("Fill the space by clipping what doesn't fit.")},{value:"none",label:(0,i18n_build_module._x)("None","Scale option for dimensions control"),help:(0,i18n_build_module.__)("Do not adjust the sizing of the content. Content that is too large will be clipped, and content that is too small will have additional padding.")},{value:"scale-down",label:(0,i18n_build_module._x)("Scale down","Scale option for dimensions control"),help:(0,i18n_build_module.__)("Scale down the content to fit the space if it is too big. Content that is too small will have additional padding.")}];function ScaleTool({panelId,value,onChange,options=DEFAULT_SCALE_OPTIONS,defaultValue=DEFAULT_SCALE_OPTIONS[0].value,isShownByDefault=!0}){const displayValue=null!=value?value:"fill",scaleHelp=(0,react.useMemo)((()=>options.reduce(((acc,option)=>(acc[option.value]=option.help,acc)),{})),[options]);return(0,jsx_runtime.jsx)(tools_panel_item_component.A,{label:(0,i18n_build_module.__)("Scale"),isShownByDefault,hasValue:()=>displayValue!==defaultValue,onDeselect:()=>onChange(defaultValue),panelId,children:(0,jsx_runtime.jsx)(toggle_group_control_component.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Scale"),isBlock:!0,help:scaleHelp[displayValue],value:displayValue,onChange,size:"__unstable-large",children:options.map((option=>(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{...option},option.value)))})})}const SingleColumnToolsPanelItem=(0,emotion_styled_base_browser_esm.A)(tools_panel_item_component.A,{target:"ef8pe3d0"})({name:"957xgf",styles:"grid-column:span 1"});function WidthHeightTool({panelId,value={},onChange=()=>{},units,isShownByDefault=!0}){var _value$width,_value$height;const width="auto"===value.width?"":null!==(_value$width=value.width)&&void 0!==_value$width?_value$width:"",height="auto"===value.height?"":null!==(_value$height=value.height)&&void 0!==_value$height?_value$height:"",onDimensionChange=dimension=>nextDimension=>{const nextValue={...value};nextDimension?nextValue[dimension]=nextDimension:delete nextValue[dimension],onChange(nextValue)};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SingleColumnToolsPanelItem,{label:(0,i18n_build_module.__)("Width"),isShownByDefault,hasValue:()=>""!==width,onDeselect:onDimensionChange("width"),panelId,children:(0,jsx_runtime.jsx)(unit_control.Ay,{label:(0,i18n_build_module.__)("Width"),placeholder:(0,i18n_build_module.__)("Auto"),labelPosition:"top",units,min:0,value:width,onChange:onDimensionChange("width"),size:"__unstable-large"})}),(0,jsx_runtime.jsx)(SingleColumnToolsPanelItem,{label:(0,i18n_build_module.__)("Height"),isShownByDefault,hasValue:()=>""!==height,onDeselect:onDimensionChange("height"),panelId,children:(0,jsx_runtime.jsx)(unit_control.Ay,{label:(0,i18n_build_module.__)("Height"),placeholder:(0,i18n_build_module.__)("Auto"),labelPosition:"top",units,min:0,value:height,onChange:onDimensionChange("height"),size:"__unstable-large"})})]})}const dimensions_tool=function DimensionsTool({panelId,value={},onChange=()=>{},aspectRatioOptions,defaultAspectRatio="auto",scaleOptions,defaultScale="fill",unitsOptions,tools=["aspectRatio","widthHeight","scale"]}){const width=void 0===value.width||"auto"===value.width?null:value.width,height=void 0===value.height||"auto"===value.height?null:value.height,aspectRatio=void 0===value.aspectRatio||"auto"===value.aspectRatio?null:value.aspectRatio,scale=void 0===value.scale||"fill"===value.scale?null:value.scale,[lastScale,setLastScale]=(0,react.useState)(scale),[lastAspectRatio,setLastAspectRatio]=(0,react.useState)(aspectRatio),aspectRatioValue=width&&height?"custom":lastAspectRatio,showScaleControl=aspectRatio||width&&height;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[tools.includes("aspectRatio")&&(0,jsx_runtime.jsx)(AspectRatioTool,{panelId,options:aspectRatioOptions,defaultValue:defaultAspectRatio,value:aspectRatioValue,onChange:nextAspectRatio=>{const nextValue={...value};setLastAspectRatio(nextAspectRatio="auto"===nextAspectRatio?null:nextAspectRatio),nextAspectRatio?nextValue.aspectRatio=nextAspectRatio:delete nextValue.aspectRatio,nextAspectRatio?lastScale?nextValue.scale=lastScale:(nextValue.scale=defaultScale,setLastScale(defaultScale)):delete nextValue.scale,"custom"!==nextAspectRatio&&width&&height&&delete nextValue.height,onChange(nextValue)}}),tools.includes("widthHeight")&&(0,jsx_runtime.jsx)(WidthHeightTool,{panelId,units:unitsOptions,value:{width,height},onChange:({width:nextWidth,height:nextHeight})=>{const nextValue={...value};nextHeight="auto"===nextHeight?null:nextHeight,(nextWidth="auto"===nextWidth?null:nextWidth)?nextValue.width=nextWidth:delete nextValue.width,nextHeight?nextValue.height=nextHeight:delete nextValue.height,nextWidth&&nextHeight?delete nextValue.aspectRatio:lastAspectRatio&&(nextValue.aspectRatio=lastAspectRatio),lastAspectRatio||!!nextWidth==!!nextHeight?lastScale?nextValue.scale=lastScale:(nextValue.scale=defaultScale,setLastScale(defaultScale)):delete nextValue.scale,onChange(nextValue)}}),tools.includes("scale")&&showScaleControl&&(0,jsx_runtime.jsx)(ScaleTool,{panelId,options:scaleOptions,defaultValue:defaultScale,value:lastScale,onChange:nextScale=>{const nextValue={...value};setLastScale(nextScale="fill"===nextScale?null:nextScale),nextScale?nextValue.scale=nextScale:delete nextValue.scale,onChange(nextValue)}})]})},DEFAULT_SIZE_OPTIONS=[{label:(0,i18n_build_module._x)("Thumbnail","Image size option for resolution control"),value:"thumbnail"},{label:(0,i18n_build_module._x)("Medium","Image size option for resolution control"),value:"medium"},{label:(0,i18n_build_module._x)("Large","Image size option for resolution control"),value:"large"},{label:(0,i18n_build_module._x)("Full Size","Image size option for resolution control"),value:"full"}];const library_noop=()=>{};const PrivateInserterLibrary=(0,react.forwardRef)((function InserterLibrary({rootClientId,clientId,isAppender,showInserterHelpPanel,showMostUsedBlocks=!1,__experimentalInsertionIndex,__experimentalInitialTab,__experimentalInitialCategory,__experimentalFilterValue,onPatternCategorySelection,onSelect=library_noop,shouldFocusBlock=!1,onClose},ref){const{destinationRootClientId}=(0,use_select.A)((select=>{const{getBlockRootClientId}=select(store_store);return{destinationRootClientId:rootClientId||getBlockRootClientId(clientId)||void 0}}),[clientId,rootClientId]);return(0,jsx_runtime.jsx)(PrivateInserterMenu,{onSelect,rootClientId:destinationRootClientId,clientId,isAppender,showInserterHelpPanel,showMostUsedBlocks,__experimentalInsertionIndex,__experimentalFilterValue,onPatternCategorySelection,__experimentalInitialTab,__experimentalInitialCategory,shouldFocusBlock,ref,onClose})}));(0,react.forwardRef)((function PublicInserterLibrary(props,ref){return(0,jsx_runtime.jsx)(PrivateInserterLibrary,{...props,onPatternCategorySelection:void 0,ref})}));const privateApis={};lock(privateApis,{...global_styles_namespaceObject,ExperimentalBlockCanvas,ExperimentalBlockEditorProvider,getDuotoneFilter,getRichTextValues:function getRichTextValues(blocks=[]){build_module.cV.skipFilters=!0;const values=[];return addValuesForBlocks(values,blocks),build_module.cV.skipFilters=!1,values.map((value=>value instanceof rich_text_build_module.EF?value:rich_text_build_module.EF.fromHTMLString(value)))},PrivateQuickInserter:QuickInserter,extractWords,getNormalizedSearchTerms,normalizeString,PrivateListView,ResizableBoxPopover:function ResizableBoxPopover({clientId,resizableBoxProps,...props}){return(0,jsx_runtime.jsx)(cover,{clientId,__unstablePopoverSlot:"block-toolbar",...props,children:(0,jsx_runtime.jsx)(resizable_box.A,{...resizableBoxProps})})},BlockInfo:block_info_slot_fill,useHasBlockToolbar,cleanEmptyObject:utils_cleanEmptyObject,BlockQuickNavigation,LayoutStyle:function LayoutStyle({layout={},css,...props}){const layoutType=getLayoutType(layout.type),[blockGapSupport]=use_settings_useSettings("spacing.blockGap"),hasBlockGapSupport=null!==blockGapSupport;if(layoutType){if(css)return(0,jsx_runtime.jsx)("style",{children:css});const layoutStyle=layoutType.getLayoutStyle?.({hasBlockGapSupport,layout,...props});if(layoutStyle)return(0,jsx_runtime.jsx)("style",{children:layoutStyle})}return null},BlockRemovalWarningModal:function BlockRemovalWarningModal({rules}){const{clientIds,selectPrevious,message}=(0,use_select.A)((select=>unlock(select(store_store)).getRemovalPromptData())),{clearBlockRemovalPrompt,setBlockRemovalRules,privateRemoveBlocks}=unlock((0,use_dispatch.A)(store_store));if((0,react.useEffect)((()=>(setBlockRemovalRules(rules),()=>{setBlockRemovalRules()})),[rules,setBlockRemovalRules]),!message)return;return(0,jsx_runtime.jsxs)(modal.A,{title:(0,i18n_build_module.__)("Be careful!"),onRequestClose:clearBlockRemovalPrompt,size:"medium",children:[(0,jsx_runtime.jsx)("p",{children:message}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:clearBlockRemovalPrompt,__next40pxDefaultSize:!0,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"primary",onClick:()=>{privateRemoveBlocks(clientIds,selectPrevious,!0),clearBlockRemovalPrompt()},__next40pxDefaultSize:!0,children:(0,i18n_build_module.__)("Delete")})]})]})},useLayoutClasses,useLayoutStyles:function useLayoutStyles(blockAttributes={},blockName,selector){const{layout={},style={}}=blockAttributes,usedLayout=layout?.inherit||layout?.contentSize||layout?.wideSize?{...layout,type:"constrained"}:layout||{},fullLayoutType=getLayoutType(usedLayout?.type||"default"),[blockGapSupport]=use_settings_useSettings("spacing.blockGap"),hasBlockGapSupport=null!==blockGapSupport;return fullLayoutType?.getLayoutStyle?.({blockName,selector,layout,style,hasBlockGapSupport})},DimensionsTool:dimensions_tool,ResolutionTool:function ResolutionTool({panelId,value,onChange,options=DEFAULT_SIZE_OPTIONS,defaultValue=DEFAULT_SIZE_OPTIONS[0].value,isShownByDefault=!0}){const displayValue=null!=value?value:defaultValue;return(0,jsx_runtime.jsx)(tools_panel_item_component.A,{hasValue:()=>displayValue!==defaultValue,label:(0,i18n_build_module.__)("Resolution"),onDeselect:()=>onChange(defaultValue),isShownByDefault,panelId,children:(0,jsx_runtime.jsx)(select_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Resolution"),value:displayValue,options,onChange,help:(0,i18n_build_module.__)("Select the size of the source image."),size:"__unstable-large"})})},TabbedSidebar:tabbed_sidebar,TextAlignmentControl,usesContextKey,useFlashEditableBlocks,useZoomOut,globalStylesDataKey,globalStylesLinksDataKey,selectBlockPatternsKey,requiresWrapperOnCopy,PrivateRichText,PrivateInserterLibrary,reusableBlocksSelectKey,PrivateBlockPopover,PrivatePublishDateTimePicker,useSpacingSizes,useBlockDisplayTitle,__unstableBlockStyleVariationOverridesWithConfig:function __unstableBlockStyleVariationOverridesWithConfig({config}){const{getBlockStyles,overrides}=(0,use_select.A)((select=>({getBlockStyles:select(build_module.M_).getBlockStyles,overrides:unlock(select(store_store)).getStyleOverrides()})),[]),{getBlockName}=(0,use_select.A)(store_store),overridesWithConfig=(0,react.useMemo)((()=>{if(!overrides?.length)return;const newOverrides=[],overriddenClientIds=[];for(const[,override]of overrides)if(override?.variation&&override?.clientId&&!overriddenClientIds.includes(override.clientId)){const blockName=getBlockName(override.clientId),configStyles=config?.styles?.blocks?.[blockName]?.variations?.[override.variation];if(configStyles){const variationConfig={settings:config?.settings,styles:{blocks:{[blockName]:{variations:{[`${override.variation}-${override.clientId}`]:configStyles}}}}},blockSelectors=getBlockSelectors((0,build_module.li)(),getBlockStyles,override.clientId),variationStyles=toStyles(variationConfig,blockSelectors,!1,!0,!0,!0,{blockGap:!1,blockStyles:!0,layoutStyles:!1,marginReset:!1,presets:!1,rootPadding:!1,variationStyles:!0});newOverrides.push({id:`${override.variation}-${override.clientId}`,css:variationStyles,__unstableType:"variation",variation:override.variation,clientId:override.clientId}),overriddenClientIds.push(override.clientId)}}return newOverrides}),[config,overrides,getBlockStyles,getBlockName]);if(overridesWithConfig&&overridesWithConfig.length)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:overridesWithConfig.map((override=>(0,jsx_runtime.jsx)(OverrideStyles,{override},override.id)))})},setBackgroundStyleDefaults,sectionRootClientIdKey,__unstableCommentIconFill:block_comment_icon_slot,__unstableCommentIconToolbarFill:block_comment_icon_toolbar_slot})},"./packages/commands/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M_:()=>store,ml:()=>useCommandLoader});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{close:()=>actions_close,open:()=>actions_open,registerCommand:()=>registerCommand,registerCommandLoader:()=>registerCommandLoader,unregisterCommand:()=>unregisterCommand,unregisterCommandLoader:()=>unregisterCommandLoader});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{getCommandLoaders:()=>getCommandLoaders,getCommands:()=>getCommands,getContext:()=>getContext,isOpen:()=>selectors_isOpen});var private_actions_namespaceObject={};__webpack_require__.r(private_actions_namespaceObject),__webpack_require__.d(private_actions_namespaceObject,{setContext:()=>setContext});var build_module=__webpack_require__("./packages/i18n/build-module/index.js"),redux_store=(__webpack_require__("./packages/keyboard-shortcuts/build-module/index.js"),__webpack_require__("./packages/data/build-module/redux-store/index.js")),data_build_module=__webpack_require__("./packages/data/build-module/index.js");const store_reducer=(0,data_build_module.HY)({commands:function commands(state={},action){switch(action.type){case"REGISTER_COMMAND":return{...state,[action.name]:{name:action.name,label:action.label,searchLabel:action.searchLabel,context:action.context,callback:action.callback,icon:action.icon}};case"UNREGISTER_COMMAND":{const{[action.name]:_,...remainingState}=state;return remainingState}}return state},commandLoaders:function commandLoaders(state={},action){switch(action.type){case"REGISTER_COMMAND_LOADER":return{...state,[action.name]:{name:action.name,context:action.context,hook:action.hook}};case"UNREGISTER_COMMAND_LOADER":{const{[action.name]:_,...remainingState}=state;return remainingState}}return state},isOpen:function isOpen(state=!1,action){switch(action.type){case"OPEN":return!0;case"CLOSE":return!1}return state},context:function context(state="root",action){return"SET_CONTEXT"===action.type?action.context:state}});function registerCommand(config){return{type:"REGISTER_COMMAND",...config}}function unregisterCommand(name){return{type:"UNREGISTER_COMMAND",name}}function registerCommandLoader(config){return{type:"REGISTER_COMMAND_LOADER",...config}}function unregisterCommandLoader(name){return{type:"UNREGISTER_COMMAND_LOADER",name}}function actions_open(){return{type:"OPEN"}}function actions_close(){return{type:"CLOSE"}}var rememo=__webpack_require__("./node_modules/rememo/rememo.js");const getCommands=(0,rememo.A)(((state,contextual=!1)=>Object.values(state.commands).filter((command=>{const isContextual=command.context&&command.context===state.context;return contextual?isContextual:!isContextual}))),(state=>[state.commands,state.context])),getCommandLoaders=(0,rememo.A)(((state,contextual=!1)=>Object.values(state.commandLoaders).filter((loader=>{const isContextual=loader.context&&loader.context===state.context;return contextual?isContextual:!isContextual}))),(state=>[state.commandLoaders,state.context]));function selectors_isOpen(state){return state.isOpen}function getContext(state){return state.context}function setContext(context){return{type:"SET_CONTEXT",context}}var implementation=__webpack_require__("./packages/private-apis/build-module/implementation.js");const{lock,unlock}=(0,implementation.yf)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/commands"),store=(0,redux_store.A)("core/commands",{reducer:store_reducer,actions:actions_namespaceObject,selectors:selectors_namespaceObject});(0,data_build_module.kz)(store),unlock(store).registerPrivateActions(private_actions_namespaceObject);__webpack_require__("./node_modules/react/jsx-runtime.js");(0,build_module.__)("Search commands and settings");var react=__webpack_require__("./node_modules/react/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js");function useCommandLoader(loader){const{registerCommandLoader,unregisterCommandLoader}=(0,use_dispatch.A)(store);(0,react.useEffect)((()=>{if(!loader.disabled)return registerCommandLoader({name:loader.name,hook:loader.hook,context:loader.context}),()=>{unregisterCommandLoader(loader.name)}}),[loader.name,loader.hook,loader.context,loader.disabled,registerCommandLoader,unregisterCommandLoader])}lock({},{useCommandContext:function useCommandContext(context){const{getContext}=(0,use_select.A)(store),initialContext=(0,react.useRef)(getContext()),{setContext}=unlock((0,use_dispatch.A)(store));(0,react.useEffect)((()=>{setContext(context)}),[context,setContext]),(0,react.useEffect)((()=>{const initialContextRef=initialContext.current;return()=>setContext(initialContextRef)}),[setContext])}})},"./packages/components/build-module/animate/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L9:()=>getAnimateClassName});var clsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs");function getDefaultOrigin(type){return"appear"===type?"top":"left"}function getAnimateClassName(options){if("loading"===options.type)return"components-animate__loading";const{type,origin=getDefaultOrigin(type)}=options;if("appear"===type){const[yAxis,xAxis="center"]=origin.split(" ");return(0,clsx__WEBPACK_IMPORTED_MODULE_0__.A)("components-animate__appear",{["is-from-"+xAxis]:"center"!==xAxis,["is-from-"+yAxis]:"middle"!==yAxis})}return"slide-in"===type?(0,clsx__WEBPACK_IMPORTED_MODULE_0__.A)("components-animate__slide-in","is-from-"+origin):void 0}},"./packages/components/build-module/border-box-control/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{KP:()=>getBorderDiff,uO:()=>getCommonBorder,mS:()=>getSplitBorders,xY:()=>hasMixedBorders,wN:()=>hasSplitBorders,KM:()=>isCompleteBorder,yO:()=>isDefinedBorder,AN:()=>isEmptyBorder});const UNITED_VALUE_REGEX=/^([\d.\-+]*)\s*(fr|cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|vw|vh|vmin|vmax|%|cap|ic|rlh|vi|vb|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx|svw|lvw|dvw|svh|lvh|dvh|svi|lvi|dvi|svb|lvb|dvb|svmin|lvmin|dvmin|svmax|lvmax|dvmax)?$/;const sides=["top","right","bottom","left"],borderProps=["color","style","width"],isEmptyBorder=border=>!border||!borderProps.some((prop=>void 0!==border[prop])),isDefinedBorder=border=>{if(!border)return!1;if(hasSplitBorders(border)){return!sides.every((side=>isEmptyBorder(border[side])))}return!isEmptyBorder(border)},isCompleteBorder=border=>!!border&&borderProps.every((prop=>void 0!==border[prop])),hasSplitBorders=(border={})=>Object.keys(border).some((side=>-1!==sides.indexOf(side))),hasMixedBorders=borders=>{if(!hasSplitBorders(borders))return!1;const shorthandBorders=sides.map((side=>getShorthandBorderStyle(borders?.[side])));return!shorthandBorders.every((border=>border===shorthandBorders[0]))},getSplitBorders=border=>{if(border&&!isEmptyBorder(border))return{top:border,right:border,bottom:border,left:border}},getBorderDiff=(original,updated)=>{const diff={};return original.color!==updated.color&&(diff.color=updated.color),original.style!==updated.style&&(diff.style=updated.style),original.width!==updated.width&&(diff.width=updated.width),diff},getCommonBorder=borders=>{if(!borders)return;const colors=[],styles=[],widths=[];sides.forEach((side=>{colors.push(borders[side]?.color),styles.push(borders[side]?.style),widths.push(borders[side]?.width)}));const allColorsMatch=colors.every((value=>value===colors[0])),allStylesMatch=styles.every((value=>value===styles[0])),allWidthsMatch=widths.every((value=>value===widths[0]));return{color:allColorsMatch?colors[0]:void 0,style:allStylesMatch?styles[0]:void 0,width:allWidthsMatch?widths[0]:getMostCommonUnit(widths)}},getShorthandBorderStyle=(border,fallbackBorder)=>{if(isEmptyBorder(border))return fallbackBorder;const{color:fallbackColor,style:fallbackStyle,width:fallbackWidth}=fallbackBorder||{},{color=fallbackColor,style=fallbackStyle,width=fallbackWidth}=border;return[width,!!width&&"0"!==width||!!color?style||"solid":style,color].filter(Boolean).join(" ")},getMostCommonUnit=values=>function mode(values){if(0===values.length)return;const map={};let currentMode,maxCount=0;return values.forEach((value=>{map[value]=void 0===map[value]?1:map[value]+1,map[value]>maxCount&&(currentMode=value,maxCount=map[value])})),currentMode}(values.map((value=>void 0===value?void 0:function parseCSSUnitValue(toParse){const matched=toParse.trim().match(UNITED_VALUE_REGEX);if(!matched)return[void 0,void 0];const[,num,unit]=matched;let numParsed=parseFloat(num);return numParsed=Number.isNaN(numParsed)?void 0:numParsed,[numParsed,unit]}(`${value}`)[1])).filter((value=>void 0!==value)))},"./packages/components/build-module/button-group/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)((function UnforwardedButtonGroup(props,ref){const{className,...restProps}=props,classes=(0,clsx__WEBPACK_IMPORTED_MODULE_1__.A)("components-button-group",className);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,role:"group",className:classes,...restProps})}))},"./packages/components/build-module/checkbox-control/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/deprecated/build-module/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/icons/build-module/icon/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/icons/build-module/library/reset.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/icons/build-module/library/check.js"),_base_control__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/build-module/base-control/index.js"),_h_stack__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/build-module/h-stack/component.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=function CheckboxControl(props){const{__nextHasNoMarginBottom,label,className,heading,checked,indeterminate,help,id:idProp,onChange,...additionalProps}=props;heading&&(0,_wordpress_deprecated__WEBPACK_IMPORTED_MODULE_1__.A)("`heading` prop in `CheckboxControl`",{alternative:"a separate element to implement a heading",since:"5.8"});const[showCheckedIcon,setShowCheckedIcon]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),[showIndeterminateIcon,setShowIndeterminateIcon]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),ref=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__.A)((node=>{node&&(node.indeterminate=!!indeterminate,setShowCheckedIcon(node.matches(":checked")),setShowIndeterminateIcon(node.matches(":indeterminate")))}),[checked,indeterminate]),id=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_4__.A)(CheckboxControl,"inspector-checkbox-control",idProp);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_base_control__WEBPACK_IMPORTED_MODULE_5__.Ay,{__nextHasNoMarginBottom,__associatedWPComponentName:"CheckboxControl",label:heading,id,help:help&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"components-checkbox-control__help",children:help}),className:(0,clsx__WEBPACK_IMPORTED_MODULE_6__.A)("components-checkbox-control",className),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_h_stack__WEBPACK_IMPORTED_MODULE_7__.A,{spacing:0,justify:"start",alignment:"top",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"components-checkbox-control__input-container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{ref,id,className:"components-checkbox-control__input",type:"checkbox",value:"1",onChange:event=>onChange(event.target.checked),checked,"aria-describedby":help?id+"__help":void 0,...additionalProps}),showIndeterminateIcon?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_icons__WEBPACK_IMPORTED_MODULE_8__.A,{icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__.A,className:"components-checkbox-control__indeterminate",role:"presentation"}):null,showCheckedIcon?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_icons__WEBPACK_IMPORTED_MODULE_8__.A,{icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_10__.A,className:"components-checkbox-control__checked",role:"presentation"}):null]}),label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"components-checkbox-control__label",htmlFor:id,children:label})]})})}},"./packages/components/build-module/circular-option-picker/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>build_module_circular_option_picker});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),react=__webpack_require__("./node_modules/react/index.js");const CircularOptionPickerContext=(0,react.createContext)({});var composite=__webpack_require__("./packages/components/build-module/composite/index.js"),icon=__webpack_require__("./packages/icons/build-module/icon/index.js"),check=__webpack_require__("./packages/icons/build-module/library/check.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),tooltip=__webpack_require__("./packages/components/build-module/tooltip/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const OptionAsButton=(0,react.forwardRef)((function UnforwardedOptionAsButton(props,forwardedRef){const{isPressed,...additionalProps}=props;return(0,jsx_runtime.jsx)(build_module_button.Ay,{...additionalProps,"aria-pressed":isPressed,ref:forwardedRef})}));const OptionAsOption=(0,react.forwardRef)((function UnforwardedOptionAsOption(props,forwardedRef){const{id,isSelected,...additionalProps}=props,{setActiveId,activeId}=(0,react.useContext)(CircularOptionPickerContext);return(0,react.useEffect)((()=>{isSelected&&!activeId&&window.setTimeout((()=>setActiveId?.(id)),0)}),[isSelected,setActiveId,activeId,id]),(0,jsx_runtime.jsx)(composite.e.Item,{render:(0,jsx_runtime.jsx)(build_module_button.Ay,{...additionalProps,role:"option","aria-selected":!!isSelected,ref:forwardedRef}),id})}));var dropdown=__webpack_require__("./packages/components/build-module/dropdown/index.js");function ListboxCircularOptionPicker(props){const{actions,options,baseId,className,loop=!0,children,...additionalProps}=props,[activeId,setActiveId]=(0,react.useState)(void 0),contextValue=(0,react.useMemo)((()=>({baseId,activeId,setActiveId})),[baseId,activeId,setActiveId]);return(0,jsx_runtime.jsx)("div",{className,children:(0,jsx_runtime.jsxs)(CircularOptionPickerContext.Provider,{value:contextValue,children:[(0,jsx_runtime.jsx)(composite.e,{...additionalProps,id:baseId,focusLoop:loop,rtl:(0,build_module.V8)(),role:"listbox",activeId,setActiveId,children:options}),children,actions]})})}function ButtonsCircularOptionPicker(props){const{actions,options,children,baseId,...additionalProps}=props,contextValue=(0,react.useMemo)((()=>({baseId})),[baseId]);return(0,jsx_runtime.jsx)("div",{...additionalProps,id:baseId,children:(0,jsx_runtime.jsxs)(CircularOptionPickerContext.Provider,{value:contextValue,children:[options,children,actions]})})}function CircularOptionPicker(props){const{asButtons,actions:actionsProp,options:optionsProp,children,className,...additionalProps}=props,baseId=(0,use_instance_id.A)(CircularOptionPicker,"components-circular-option-picker",additionalProps.id),OptionPickerImplementation=asButtons?ButtonsCircularOptionPicker:ListboxCircularOptionPicker,actions=actionsProp?(0,jsx_runtime.jsx)("div",{className:"components-circular-option-picker__custom-clear-wrapper",children:actionsProp}):void 0,options=(0,jsx_runtime.jsx)("div",{className:"components-circular-option-picker__swatches",children:optionsProp});return(0,jsx_runtime.jsx)(OptionPickerImplementation,{...additionalProps,baseId,className:(0,clsx.A)("components-circular-option-picker",className),actions,options,children})}CircularOptionPicker.Option=function Option({className,isSelected,selectedIconProps={},tooltipText,...additionalProps}){const{baseId,setActiveId}=(0,react.useContext)(CircularOptionPickerContext),commonProps={id:(0,use_instance_id.A)(Option,baseId||"components-circular-option-picker__option"),className:"components-circular-option-picker__option",...additionalProps},optionControl=void 0!==setActiveId?(0,jsx_runtime.jsx)(OptionAsOption,{...commonProps,isSelected}):(0,jsx_runtime.jsx)(OptionAsButton,{...commonProps,isPressed:isSelected});return(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)(className,"components-circular-option-picker__option-wrapper"),children:[tooltipText?(0,jsx_runtime.jsx)(tooltip.Ay,{text:tooltipText,children:optionControl}):optionControl,isSelected&&(0,jsx_runtime.jsx)(icon.A,{icon:check.A,...selectedIconProps})]})},CircularOptionPicker.OptionGroup=function OptionGroup({className,options,...additionalProps}){const role="aria-label"in additionalProps||"aria-labelledby"in additionalProps?"group":void 0;return(0,jsx_runtime.jsx)("div",{...additionalProps,role,className:(0,clsx.A)("components-circular-option-picker__option-group","components-circular-option-picker__swatches",className),children:options})},CircularOptionPicker.ButtonAction=function ButtonAction({className,children,...additionalProps}){return(0,jsx_runtime.jsx)(build_module_button.Ay,{className:(0,clsx.A)("components-circular-option-picker__clear",className),variant:"tertiary",...additionalProps,children})},CircularOptionPicker.DropdownLinkAction=function DropdownLinkAction({buttonProps,className,dropdownProps,linkText}){return(0,jsx_runtime.jsx)(dropdown.A,{className:(0,clsx.A)("components-circular-option-picker__dropdown-link-action",className),renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{"aria-expanded":isOpen,"aria-haspopup":"true",onClick:onToggle,variant:"link",...buttonProps,children:linkText}),...dropdownProps})};const build_module_circular_option_picker=CircularOptionPicker},"./packages/components/build-module/color-indicator/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)((function UnforwardedColorIndicator(props,forwardedRef){const{className,colorValue,...additionalProps}=props;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_1__.A)("component-color-indicator",className),style:{background:colorValue},ref:forwardedRef,...additionalProps})}))},"./packages/components/build-module/color-palette/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,c2:()=>CustomColorPickerDropdown});var colord__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/colord/index.mjs"),colord_plugins_names__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/colord/plugins/names.mjs"),colord_plugins_a11y__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/colord/plugins/a11y.mjs"),clsx__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/index.js"),_dropdown__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/components/build-module/dropdown/index.js"),_color_picker__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/components/build-module/color-picker/legacy-adapter.js"),_circular_option_picker__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/build-module/circular-option-picker/index.js"),_v_stack__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/components/build-module/v-stack/component.js"),_truncate__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/components/build-module/truncate/component.js"),_styles__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/components/build-module/color-palette/styles.js"),_dropdown_dropdown_content_wrapper__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/components/build-module/dropdown/dropdown-content-wrapper.js"),_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/components/build-module/color-palette/utils.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function SinglePalette({className,clearColor,colors,onChange,value,...additionalProps}){const colorOptions=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useMemo)((()=>colors.map((({color,name},index)=>{const colordColor=(0,colord__WEBPACK_IMPORTED_MODULE_2__.Mj)(color),isSelected=value===color;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_circular_option_picker__WEBPACK_IMPORTED_MODULE_6__.Ay.Option,{isSelected,selectedIconProps:isSelected?{fill:colordColor.contrast()>colordColor.contrast("#000")?"#fff":"#000"}:{},tooltipText:name||(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Color code: %s"),color),style:{backgroundColor:color,color},onClick:isSelected?clearColor:()=>onChange(color,index),"aria-label":name?(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Color: %s"),name):(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Color code: %s"),color)},`${color}-${index}`)}))),[colors,value,onChange,clearColor]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_circular_option_picker__WEBPACK_IMPORTED_MODULE_6__.Ay.OptionGroup,{className,options:colorOptions,...additionalProps})}function MultiplePalettes({className,clearColor,colors,onChange,value,headingLevel}){const instanceId=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_7__.A)(MultiplePalettes,"color-palette");return 0===colors.length?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_v_stack__WEBPACK_IMPORTED_MODULE_8__.A,{spacing:3,className,children:colors.map((({name,colors:colorPalette},index)=>{const id=`${instanceId}-${index}`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_v_stack__WEBPACK_IMPORTED_MODULE_8__.A,{spacing:2,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_styles__WEBPACK_IMPORTED_MODULE_9__._,{id,level:headingLevel,children:name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(SinglePalette,{clearColor,colors:colorPalette,onChange:newColor=>onChange(newColor,index),value,"aria-labelledby":id})]},index)}))})}function CustomColorPickerDropdown({isRenderedInSidebar,popoverProps:receivedPopoverProps,...props}){const popoverProps=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useMemo)((()=>({shift:!0,resize:!1,...isRenderedInSidebar?{placement:"left-start",offset:34}:{placement:"bottom",offset:8},...receivedPopoverProps})),[isRenderedInSidebar,receivedPopoverProps]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_dropdown__WEBPACK_IMPORTED_MODULE_10__.A,{contentClassName:"components-color-palette__custom-color-dropdown-content",popoverProps,...props})}(0,colord__WEBPACK_IMPORTED_MODULE_2__.X$)([colord_plugins_names__WEBPACK_IMPORTED_MODULE_3__.A,colord_plugins_a11y__WEBPACK_IMPORTED_MODULE_4__.A]);const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.forwardRef)((function UnforwardedColorPalette(props,forwardedRef){const{asButtons,loop,clearable=!0,colors=[],disableCustomColors=!1,enableAlpha=!1,onChange,value,__experimentalIsRenderedInSidebar=!1,headingLevel=2,"aria-label":ariaLabel,"aria-labelledby":ariaLabelledby,...additionalProps}=props,[normalizedColorValue,setNormalizedColorValue]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useState)(value),clearColor=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useCallback)((()=>onChange(void 0)),[onChange]),customColorPaletteCallbackRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useCallback)((node=>{setNormalizedColorValue((0,_utils__WEBPACK_IMPORTED_MODULE_11__.K6)(value,node))}),[value]),hasMultipleColorOrigins=(0,_utils__WEBPACK_IMPORTED_MODULE_11__.HB)(colors),buttonLabelName=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useMemo)((()=>(0,_utils__WEBPACK_IMPORTED_MODULE_11__.Go)(value,colors,hasMultipleColorOrigins)),[value,colors,hasMultipleColorOrigins]),isHex=value?.startsWith("#"),displayValue=value?.replace(/^var\((.+)\)$/,"$1"),customColorAccessibleLabel=displayValue?(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)('Custom color picker. The currently selected color is called "%1$s" and has a value of "%2$s".'),buttonLabelName,displayValue):(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Custom color picker."),paletteCommonProps={clearColor,onChange,value},actions=!!clearable&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_circular_option_picker__WEBPACK_IMPORTED_MODULE_6__.Ay.ButtonAction,{onClick:clearColor,children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Clear")});let metaProps;if(asButtons)metaProps={asButtons:!0};else{const _metaProps={asButtons:!1,loop};metaProps=ariaLabel?{..._metaProps,"aria-label":ariaLabel}:ariaLabelledby?{..._metaProps,"aria-labelledby":ariaLabelledby}:{..._metaProps,"aria-label":(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Custom color picker.")}}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_v_stack__WEBPACK_IMPORTED_MODULE_8__.A,{spacing:3,ref:forwardedRef,...additionalProps,children:[!disableCustomColors&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(CustomColorPickerDropdown,{isRenderedInSidebar:__experimentalIsRenderedInSidebar,renderContent:()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_dropdown_dropdown_content_wrapper__WEBPACK_IMPORTED_MODULE_12__.A,{paddingSize:"none",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_color_picker__WEBPACK_IMPORTED_MODULE_13__.V,{color:normalizedColorValue,onChange:color=>onChange(color),enableAlpha})}),renderToggle:({isOpen,onToggle})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_v_stack__WEBPACK_IMPORTED_MODULE_8__.A,{className:"components-color-palette__custom-color-wrapper",spacing:0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("button",{ref:customColorPaletteCallbackRef,className:"components-color-palette__custom-color-button","aria-expanded":isOpen,"aria-haspopup":"true",onClick:onToggle,"aria-label":customColorAccessibleLabel,style:{background:value},type:"button"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_v_stack__WEBPACK_IMPORTED_MODULE_8__.A,{className:"components-color-palette__custom-color-text-wrapper",spacing:.5,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_truncate__WEBPACK_IMPORTED_MODULE_14__.A,{className:"components-color-palette__custom-color-name",children:value?buttonLabelName:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("No color selected")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_truncate__WEBPACK_IMPORTED_MODULE_14__.A,{className:(0,clsx__WEBPACK_IMPORTED_MODULE_15__.A)("components-color-palette__custom-color-value",{"components-color-palette__custom-color-value--is-hex":isHex}),children:displayValue})]})]})}),(colors.length>0||actions)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_circular_option_picker__WEBPACK_IMPORTED_MODULE_6__.Ay,{...metaProps,actions,options:hasMultipleColorOrigins?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MultiplePalettes,{...paletteCommonProps,headingLevel,colors,value}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(SinglePalette,{...paletteCommonProps,colors,value})})]})}))},"./packages/components/build-module/color-palette/styles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>ColorHeading});var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),_heading__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/build-module/heading/component.js");const ColorHeading=(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__.A)(_heading__WEBPACK_IMPORTED_MODULE_1__.A,{target:"ev9wop70"})({name:"13lxv2o",styles:"text-transform:uppercase;line-height:24px;font-weight:500;&&&{font-size:11px;margin-bottom:0;}"})},"./packages/components/build-module/color-palette/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Go:()=>extractColorNameFromCurrentValue,HB:()=>isMultiplePaletteArray,K6:()=>normalizeColorValue});var colord__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/colord/index.mjs"),colord_plugins_names__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/colord/plugins/names.mjs"),colord_plugins_a11y__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/colord/plugins/a11y.mjs"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js");(0,colord__WEBPACK_IMPORTED_MODULE_1__.X$)([colord_plugins_names__WEBPACK_IMPORTED_MODULE_2__.A,colord_plugins_a11y__WEBPACK_IMPORTED_MODULE_3__.A]);const isSimpleCSSColor=value=>{const valueIsCssVariable=/var\(/.test(null!=value?value:""),valueIsColorMix=/color-mix\(/.test(null!=value?value:"");return!valueIsCssVariable&&!valueIsColorMix},extractColorNameFromCurrentValue=(currentValue,colors=[],showMultiplePalettes=!1)=>{if(!currentValue)return"";const currentValueIsSimpleColor=!!currentValue&&isSimpleCSSColor(currentValue),normalizedCurrentValue=currentValueIsSimpleColor?(0,colord__WEBPACK_IMPORTED_MODULE_1__.Mj)(currentValue).toHex():currentValue,colorPalettes=showMultiplePalettes?colors:[{colors}];for(const{colors:paletteColors}of colorPalettes)for(const{name:colorName,color:colorValue}of paletteColors){if(normalizedCurrentValue===(currentValueIsSimpleColor?(0,colord__WEBPACK_IMPORTED_MODULE_1__.Mj)(colorValue).toHex():colorValue))return colorName}return(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Custom")},isMultiplePaletteArray=arr=>arr.length>0&&arr.every((colorObj=>{return obj=colorObj,Array.isArray(obj.colors)&&!("color"in obj);var obj})),normalizeColorValue=(value,element)=>{if(!value||!element||isSimpleCSSColor(value))return value;const{ownerDocument}=element,{defaultView}=ownerDocument,computedBackgroundColor=defaultView?.getComputedStyle(element).backgroundColor;return computedBackgroundColor?(0,colord__WEBPACK_IMPORTED_MODULE_1__.Mj)(computedBackgroundColor).toHex():value}},"./packages/components/build-module/color-picker/legacy-adapter.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V:()=>LegacyAdapter});var colord=__webpack_require__("./node_modules/colord/index.mjs"),names=__webpack_require__("./node_modules/colord/plugins/names.mjs"),react=__webpack_require__("./node_modules/react/index.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js"),context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),number_control=__webpack_require__("./packages/components/build-module/number-control/index.js"),select_control=__webpack_require__("./packages/components/build-module/select-control/index.js"),range_control=__webpack_require__("./packages/components/build-module/range-control/index.js"),space=__webpack_require__("./packages/components/build-module/utils/space.js"),box_sizing=__webpack_require__("./packages/components/build-module/utils/box-sizing.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),h_stack_component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),config_values=__webpack_require__("./packages/components/build-module/utils/config-values.js");const NumberControlWrapper=(0,emotion_styled_base_browser_esm.A)(number_control.A,{target:"ez9hsf47"})("width:",(0,space.x)(24),";"),SelectControl=(0,emotion_styled_base_browser_esm.A)(select_control.A,{target:"ez9hsf46"})("margin-left:",(0,space.x)(-2),";width:5em;"),RangeControl=(0,emotion_styled_base_browser_esm.A)(range_control.A,{target:"ez9hsf45"})("flex:1;margin-right:",(0,space.x)(2),";"),interactiveHueStyles=`\n.react-colorful__interactive {\n\twidth: calc( 100% - ${(0,space.x)(2)} );\n\tmargin-left: ${(0,space.x)(1)};\n}`,AuxiliaryColorArtefactWrapper=(0,emotion_styled_base_browser_esm.A)("div",{target:"ez9hsf44"})("padding-top:",(0,space.x)(2),";padding-right:0;padding-left:0;padding-bottom:0;"),AuxiliaryColorArtefactHStackHeader=(0,emotion_styled_base_browser_esm.A)(h_stack_component.A,{target:"ez9hsf43"})("padding-left:",(0,space.x)(4),";padding-right:",(0,space.x)(4),";"),ColorInputWrapper=(0,emotion_styled_base_browser_esm.A)(component.A,{target:"ez9hsf42"})("padding-top:",(0,space.x)(4),";padding-left:",(0,space.x)(4),";padding-right:",(0,space.x)(3),";padding-bottom:",(0,space.x)(5),";"),ColorfulWrapper=(0,emotion_styled_base_browser_esm.A)("div",{target:"ez9hsf41"})(box_sizing.r,";width:216px;.react-colorful{display:flex;flex-direction:column;align-items:center;width:216px;height:auto;}.react-colorful__saturation{width:100%;border-radius:0;height:216px;margin-bottom:",(0,space.x)(4),";border-bottom:none;}.react-colorful__hue,.react-colorful__alpha{width:184px;height:16px;border-radius:",config_values.A.radiusFull,";margin-bottom:",(0,space.x)(2),";}.react-colorful__pointer{height:16px;width:16px;border:none;box-shadow:0 0 2px 0 rgba( 0, 0, 0, 0.25 );outline:2px solid transparent;}.react-colorful__pointer-fill{box-shadow:inset 0 0 0 ",config_values.A.borderWidthFocus," #fff;}",interactiveHueStyles,";"),CopyButton=(0,emotion_styled_base_browser_esm.A)(build_module_button.Ay,{target:"ez9hsf40"})("&&&&&{min-width:",(0,space.x)(6),";padding:0;>svg{margin-right:0;}}");var use_copy_to_clipboard=__webpack_require__("./packages/compose/build-module/hooks/use-copy-to-clipboard/index.js"),copy=__webpack_require__("./packages/icons/build-module/library/copy.js"),tooltip=__webpack_require__("./packages/components/build-module/tooltip/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ColorCopyButton=props=>{const{color,colorType}=props,[copiedColor,setCopiedColor]=(0,react.useState)(null),copyTimerRef=(0,react.useRef)(),copyRef=(0,use_copy_to_clipboard.A)((()=>{switch(colorType){case"hsl":return color.toHslString();case"rgb":return color.toRgbString();default:return color.toHex()}}),(()=>{copyTimerRef.current&&clearTimeout(copyTimerRef.current),setCopiedColor(color.toHex()),copyTimerRef.current=setTimeout((()=>{setCopiedColor(null),copyTimerRef.current=void 0}),3e3)}));return(0,react.useEffect)((()=>()=>{copyTimerRef.current&&clearTimeout(copyTimerRef.current)}),[]),(0,jsx_runtime.jsx)(tooltip.Ay,{delay:0,hideOnClick:!1,text:copiedColor===color.toHex()?(0,build_module.__)("Copied!"):(0,build_module.__)("Copy"),children:(0,jsx_runtime.jsx)(CopyButton,{size:"small",ref:copyRef,icon:copy.A,showTooltip:!1})})};var text_component=__webpack_require__("./packages/components/build-module/text/component.js"),colors_values=__webpack_require__("./packages/components/build-module/utils/colors-values.js"),input_prefix_wrapper=__webpack_require__("./packages/components/build-module/input-control/input-prefix-wrapper.js");const InputWithSlider=({min,max,label,abbreviation,onChange,value})=>(0,jsx_runtime.jsxs)(h_stack_component.A,{spacing:4,children:[(0,jsx_runtime.jsx)(NumberControlWrapper,{min,max,label,hideLabelFromVision:!0,value,onChange:newValue=>{onChange(newValue?"string"!=typeof newValue?newValue:parseInt(newValue,10):0)},prefix:(0,jsx_runtime.jsx)(input_prefix_wrapper.A,{children:(0,jsx_runtime.jsx)(text_component.A,{color:colors_values.l.theme.accent,lineHeight:1,children:abbreviation})}),spinControls:"none",size:"__unstable-large"}),(0,jsx_runtime.jsx)(RangeControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label,hideLabelFromVision:!0,min,max,value,onChange,withInputField:!1})]}),RgbInput=({color,onChange,enableAlpha})=>{const{r,g,b,a}=color.toRgb();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(InputWithSlider,{min:0,max:255,label:"Red",abbreviation:"R",value:r,onChange:nextR=>onChange((0,colord.Mj)({r:nextR,g,b,a}))}),(0,jsx_runtime.jsx)(InputWithSlider,{min:0,max:255,label:"Green",abbreviation:"G",value:g,onChange:nextG=>onChange((0,colord.Mj)({r,g:nextG,b,a}))}),(0,jsx_runtime.jsx)(InputWithSlider,{min:0,max:255,label:"Blue",abbreviation:"B",value:b,onChange:nextB=>onChange((0,colord.Mj)({r,g,b:nextB,a}))}),enableAlpha&&(0,jsx_runtime.jsx)(InputWithSlider,{min:0,max:100,label:"Alpha",abbreviation:"A",value:Math.trunc(100*a),onChange:nextA=>onChange((0,colord.Mj)({r,g,b,a:nextA/100}))})]})},HslInput=({color,onChange,enableAlpha})=>{const colorPropHSLA=(0,react.useMemo)((()=>color.toHsl()),[color]),[internalHSLA,setInternalHSLA]=(0,react.useState)({...colorPropHSLA}),isInternalColorSameAsReceivedColor=color.isEqual((0,colord.Mj)(internalHSLA));(0,react.useEffect)((()=>{isInternalColorSameAsReceivedColor||setInternalHSLA(colorPropHSLA)}),[colorPropHSLA,isInternalColorSameAsReceivedColor]);const colorValue=isInternalColorSameAsReceivedColor?internalHSLA:colorPropHSLA,updateHSLAValue=partialNewValue=>{const nextOnChangeValue=(0,colord.Mj)({...colorValue,...partialNewValue});color.isEqual(nextOnChangeValue)?setInternalHSLA((prevHSLA=>({...prevHSLA,...partialNewValue}))):onChange(nextOnChangeValue)};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(InputWithSlider,{min:0,max:359,label:"Hue",abbreviation:"H",value:colorValue.h,onChange:nextH=>{updateHSLAValue({h:nextH})}}),(0,jsx_runtime.jsx)(InputWithSlider,{min:0,max:100,label:"Saturation",abbreviation:"S",value:colorValue.s,onChange:nextS=>{updateHSLAValue({s:nextS})}}),(0,jsx_runtime.jsx)(InputWithSlider,{min:0,max:100,label:"Lightness",abbreviation:"L",value:colorValue.l,onChange:nextL=>{updateHSLAValue({l:nextL})}}),enableAlpha&&(0,jsx_runtime.jsx)(InputWithSlider,{min:0,max:100,label:"Alpha",abbreviation:"A",value:Math.trunc(100*colorValue.a),onChange:nextA=>{updateHSLAValue({a:nextA/100})}})]})};var input_control=__webpack_require__("./packages/components/build-module/input-control/index.js");const HexInput=({color,onChange,enableAlpha})=>(0,jsx_runtime.jsx)(input_control.ey,{prefix:(0,jsx_runtime.jsx)(input_prefix_wrapper.A,{children:(0,jsx_runtime.jsx)(text_component.A,{color:colors_values.l.theme.accent,lineHeight:1,children:"#"})}),value:color.toHex().slice(1).toUpperCase(),onChange:nextValue=>{if(!nextValue)return;const hexValue=nextValue.startsWith("#")?nextValue:"#"+nextValue;onChange((0,colord.Mj)(hexValue))},maxLength:enableAlpha?9:7,label:(0,build_module.__)("Hex color"),hideLabelFromVision:!0,size:"__unstable-large",__unstableStateReducer:(state,action)=>{const nativeEvent=action.payload?.event?.nativeEvent;if("insertFromPaste"!==nativeEvent?.inputType)return{...state};const value=state.value?.startsWith("#")?state.value.slice(1).toUpperCase():state.value?.toUpperCase();return{...state,value}},__unstableInputWidth:"9em"}),ColorInput=({colorType,color,onChange,enableAlpha})=>{const props={color,onChange,enableAlpha};switch(colorType){case"hsl":return(0,jsx_runtime.jsx)(HslInput,{...props});case"rgb":return(0,jsx_runtime.jsx)(RgbInput,{...props});default:return(0,jsx_runtime.jsx)(HexInput,{...props})}};var index_module=__webpack_require__("./node_modules/react-colorful/dist/index.module.js");const Picker=({color,enableAlpha,onChange})=>{const Component=enableAlpha?index_module.p9:index_module.gy,rgbColor=(0,react.useMemo)((()=>color.toRgbString()),[color]);return(0,jsx_runtime.jsx)(Component,{color:rgbColor,onChange:nextColor=>{onChange((0,colord.Mj)(nextColor))},onPointerDown:({currentTarget,pointerId})=>{currentTarget.setPointerCapture(pointerId)},onPointerUp:({currentTarget,pointerId})=>{currentTarget.releasePointerCapture(pointerId)}})};var use_controlled_value=__webpack_require__("./packages/components/build-module/utils/hooks/use-controlled-value.js");(0,colord.X$)([names.A]);const options=[{label:"RGB",value:"rgb"},{label:"HSL",value:"hsl"},{label:"Hex",value:"hex"}],color_picker_component=(0,context_connect.KZ)(((props,forwardedRef)=>{const{enableAlpha=!1,color:colorProp,onChange,defaultValue="#fff",copyFormat,...divProps}=(0,use_context_system.A)(props,"ColorPicker"),[color,setColor]=(0,use_controlled_value.j)({onChange,value:colorProp,defaultValue}),safeColordColor=(0,react.useMemo)((()=>(0,colord.Mj)(color||"")),[color]),debouncedSetColor=(0,use_debounce.A)(setColor),handleChange=(0,react.useCallback)((nextValue=>{debouncedSetColor(nextValue.toHex())}),[debouncedSetColor]),[colorType,setColorType]=(0,react.useState)(copyFormat||"hex");return(0,jsx_runtime.jsxs)(ColorfulWrapper,{ref:forwardedRef,...divProps,children:[(0,jsx_runtime.jsx)(Picker,{onChange:handleChange,color:safeColordColor,enableAlpha}),(0,jsx_runtime.jsxs)(AuxiliaryColorArtefactWrapper,{children:[(0,jsx_runtime.jsxs)(AuxiliaryColorArtefactHStackHeader,{justify:"space-between",children:[(0,jsx_runtime.jsx)(SelectControl,{__nextHasNoMarginBottom:!0,options,value:colorType,onChange:nextColorType=>setColorType(nextColorType),label:(0,build_module.__)("Color format"),hideLabelFromVision:!0,variant:"minimal"}),(0,jsx_runtime.jsx)(ColorCopyButton,{color:safeColordColor,colorType:copyFormat||colorType})]}),(0,jsx_runtime.jsx)(ColorInputWrapper,{direction:"column",gap:2,children:(0,jsx_runtime.jsx)(ColorInput,{colorType,color:safeColordColor,onChange:handleChange,enableAlpha})})]})]})}),"ColorPicker");function getColorFromLegacyProps(color){if(void 0!==color)return"string"==typeof color?color:color.hex?color.hex:void 0}const transformColorStringToLegacyColor=(0,__webpack_require__("./node_modules/memize/dist/index.js").A)((color=>{const colordColor=(0,colord.Mj)(color),hex=colordColor.toHex(),rgb=colordColor.toRgb(),hsv=colordColor.toHsv(),hsl=colordColor.toHsl();return{hex,rgb,hsv,hsl,source:"hex",oldHue:hsl.h}}));function useDeprecatedProps(props){const{onChangeComplete}=props,legacyChangeHandler=(0,react.useCallback)((color=>{onChangeComplete(transformColorStringToLegacyColor(color))}),[onChangeComplete]);return function isLegacyProps(props){return void 0!==props.onChangeComplete||void 0!==props.disableAlpha||"string"==typeof props.color?.hex}(props)?{color:getColorFromLegacyProps(props.color),enableAlpha:!props.disableAlpha,onChange:legacyChangeHandler}:{...props,color:props.color,enableAlpha:props.enableAlpha,onChange:props.onChange}}const LegacyAdapter=props=>(0,jsx_runtime.jsx)(color_picker_component,{...useDeprecatedProps(props)})},"./packages/components/build-module/combobox-control/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>combobox_control});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),react=__webpack_require__("./node_modules/react/index.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),close_small=__webpack_require__("./packages/icons/build-module/library/close-small.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),space=__webpack_require__("./packages/components/build-module/utils/space.js");const deprecatedDefaultSize=({__next40pxDefaultSize})=>!__next40pxDefaultSize&&(0,emotion_react_browser_esm.AH)("height:28px;padding-left:",(0,space.x)(1),";padding-right:",(0,space.x)(1),";","","",""),InputWrapperFlex=(0,emotion_styled_base_browser_esm.A)(component.A,{target:"evuatpg0"})("height:38px;padding-left:",(0,space.x)(2),";padding-right:",(0,space.x)(2),";",deprecatedDefaultSize,";");var token_input=__webpack_require__("./packages/components/build-module/form-token-field/token-input.js"),suggestions_list=__webpack_require__("./packages/components/build-module/form-token-field/suggestions-list.js"),base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),flex_block_component=__webpack_require__("./packages/components/build-module/flex/flex-block/component.js"),flex_item_component=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),create_higher_order_component=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),use_focus_outside=__webpack_require__("./packages/compose/build-module/hooks/use-focus-outside/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const with_focus_outside=(0,create_higher_order_component.f)((WrappedComponent=>props=>{const[handleFocusOutside,setHandleFocusOutside]=(0,react.useState)(void 0),bindFocusOutsideHandler=(0,react.useCallback)((node=>setHandleFocusOutside((()=>node?.handleFocusOutside?node.handleFocusOutside.bind(node):void 0))),[]);return(0,jsx_runtime.jsx)("div",{...(0,use_focus_outside.A)(handleFocusOutside),children:(0,jsx_runtime.jsx)(WrappedComponent,{ref:bindFocusOutsideHandler,...props})})}),"withFocusOutside");var use_controlled_value=__webpack_require__("./packages/components/build-module/utils/hooks/use-controlled-value.js"),strings=__webpack_require__("./packages/components/build-module/utils/strings.js"),use_deprecated_props=__webpack_require__("./packages/components/build-module/utils/use-deprecated-props.js"),with_ignore_ime_events=__webpack_require__("./packages/components/build-module/utils/with-ignore-ime-events.js");const noop=()=>{},DetectOutside=with_focus_outside(class extends react.Component{handleFocusOutside(event){this.props.onFocusOutside(event)}render(){return this.props.children}}),getIndexOfMatchingSuggestion=(selectedSuggestion,matchingSuggestions)=>null===selectedSuggestion?-1:matchingSuggestions.indexOf(selectedSuggestion);const combobox_control=function ComboboxControl(props){var _currentOption$label;const{__nextHasNoMarginBottom=!1,__next40pxDefaultSize=!1,value:valueProp,label,options,onChange:onChangeProp,onFilterValueChange=noop,hideLabelFromVision,help,allowReset=!0,className,messages={selected:(0,build_module.__)("Item selected.")},__experimentalRenderItem,expandOnFocus=!0,placeholder}=(0,use_deprecated_props.R)(props),[value,setValue]=(0,use_controlled_value.j)({value:valueProp,onChange:onChangeProp}),currentOption=options.find((option=>option.value===value)),currentLabel=null!==(_currentOption$label=currentOption?.label)&&void 0!==_currentOption$label?_currentOption$label:"",instanceId=(0,use_instance_id.A)(ComboboxControl,"combobox-control"),[selectedSuggestion,setSelectedSuggestion]=(0,react.useState)(currentOption||null),[isExpanded,setIsExpanded]=(0,react.useState)(!1),[inputHasFocus,setInputHasFocus]=(0,react.useState)(!1),[inputValue,setInputValue]=(0,react.useState)(""),inputContainer=(0,react.useRef)(null),matchingSuggestions=(0,react.useMemo)((()=>{const startsWithMatch=[],containsMatch=[],match=(0,strings.Aq)(inputValue);return options.forEach((option=>{const index=(0,strings.Aq)(option.label).indexOf(match);0===index?startsWithMatch.push(option):index>0&&containsMatch.push(option)})),startsWithMatch.concat(containsMatch)}),[inputValue,options]),onSuggestionSelected=newSelectedSuggestion=>{newSelectedSuggestion.disabled||(setValue(newSelectedSuggestion.value),(0,a11y_build_module.L)(messages.selected,"assertive"),setSelectedSuggestion(newSelectedSuggestion),setInputValue(""),setIsExpanded(!1))},handleArrowNavigation=(offset=1)=>{let nextIndex=getIndexOfMatchingSuggestion(selectedSuggestion,matchingSuggestions)+offset;nextIndex<0?nextIndex=matchingSuggestions.length-1:nextIndex>=matchingSuggestions.length&&(nextIndex=0),setSelectedSuggestion(matchingSuggestions[nextIndex]),setIsExpanded(!0)},onKeyDown=(0,with_ignore_ime_events.n)((event=>{let preventDefault=!1;if(!event.defaultPrevented){switch(event.code){case"Enter":selectedSuggestion&&(onSuggestionSelected(selectedSuggestion),preventDefault=!0);break;case"ArrowUp":handleArrowNavigation(-1),preventDefault=!0;break;case"ArrowDown":handleArrowNavigation(1),preventDefault=!0;break;case"Escape":setIsExpanded(!1),setSelectedSuggestion(null),preventDefault=!0}preventDefault&&event.preventDefault()}}));return(0,react.useEffect)((()=>{const hasMatchingSuggestions=matchingSuggestions.length>0,hasSelectedMatchingSuggestions=getIndexOfMatchingSuggestion(selectedSuggestion,matchingSuggestions)>0;hasMatchingSuggestions&&!hasSelectedMatchingSuggestions&&setSelectedSuggestion(matchingSuggestions[0])}),[matchingSuggestions,selectedSuggestion]),(0,react.useEffect)((()=>{const hasMatchingSuggestions=matchingSuggestions.length>0;if(isExpanded){const message=hasMatchingSuggestions?(0,build_module.nv)((0,build_module._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",matchingSuggestions.length),matchingSuggestions.length):(0,build_module.__)("No results.");(0,a11y_build_module.L)(message,"polite")}}),[matchingSuggestions,isExpanded]),(0,jsx_runtime.jsx)(DetectOutside,{onFocusOutside:()=>{setIsExpanded(!1)},children:(0,jsx_runtime.jsx)(base_control.Ay,{__nextHasNoMarginBottom,__associatedWPComponentName:"ComboboxControl",className:(0,clsx.A)(className,"components-combobox-control"),label,id:`components-form-token-input-${instanceId}`,hideLabelFromVision,help,children:(0,jsx_runtime.jsxs)("div",{className:"components-combobox-control__suggestions-container",tabIndex:-1,onKeyDown,children:[(0,jsx_runtime.jsxs)(InputWrapperFlex,{__next40pxDefaultSize,children:[(0,jsx_runtime.jsx)(flex_block_component.A,{children:(0,jsx_runtime.jsx)(token_input.Ay,{className:"components-combobox-control__input",instanceId,ref:inputContainer,placeholder,value:isExpanded?inputValue:currentLabel,onFocus:()=>{setInputHasFocus(!0),expandOnFocus&&setIsExpanded(!0),onFilterValueChange(""),setInputValue("")},onBlur:()=>{setInputHasFocus(!1)},onClick:()=>{setIsExpanded(!0)},isExpanded,selectedSuggestionIndex:getIndexOfMatchingSuggestion(selectedSuggestion,matchingSuggestions),onChange:event=>{const text=event.value;setInputValue(text),onFilterValueChange(text),inputHasFocus&&setIsExpanded(!0)}})}),allowReset&&(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"components-combobox-control__reset",icon:close_small.A,disabled:!value,onClick:()=>{setValue(null),inputContainer.current?.focus()},onKeyDown:event=>{event.stopPropagation()},label:(0,build_module.__)("Reset")})})]}),isExpanded&&(0,jsx_runtime.jsx)(suggestions_list.A,{instanceId,match:{label:inputValue,value:""},displayTransform:suggestion=>suggestion.label,suggestions:matchingSuggestions,selectedIndex:getIndexOfMatchingSuggestion(selectedSuggestion,matchingSuggestions),onHover:setSelectedSuggestion,onSelect:onSuggestionSelected,scrollIntoView:!0,__experimentalRenderItem})]})})})}},"./packages/components/build-module/confirm-dialog/component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>confirm_dialog_component});var build_module=__webpack_require__("./packages/i18n/build-module/index.js"),react=__webpack_require__("./node_modules/react/index.js"),modal=__webpack_require__("./packages/components/build-module/modal/index.js"),use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js"),context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),text_component=__webpack_require__("./packages/components/build-module/text/component.js"),v_stack_component=__webpack_require__("./packages/components/build-module/v-stack/component.js");const wrapper={name:"7g5ii0",styles:"&&{z-index:1000001;}"};var use_cx=__webpack_require__("./packages/components/build-module/utils/hooks/use-cx.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const confirm_dialog_component=(0,context_connect.KZ)(((props,forwardedRef)=>{const{isOpen:isOpenProp,onConfirm,onCancel,children,confirmButtonText,cancelButtonText,...otherProps}=(0,use_context_system.A)(props,"ConfirmDialog"),wrapperClassName=(0,use_cx.l)()(wrapper),cancelButtonRef=(0,react.useRef)(),confirmButtonRef=(0,react.useRef)(),[isOpen,setIsOpen]=(0,react.useState)(),[shouldSelfClose,setShouldSelfClose]=(0,react.useState)();(0,react.useEffect)((()=>{const isIsOpenSet=void 0!==isOpenProp;setIsOpen(!isIsOpenSet||isOpenProp),setShouldSelfClose(!isIsOpenSet)}),[isOpenProp]);const handleEvent=(0,react.useCallback)((callback=>event=>{callback?.(event),shouldSelfClose&&setIsOpen(!1)}),[shouldSelfClose,setIsOpen]),handleEnter=(0,react.useCallback)((event=>{event.target===cancelButtonRef.current||event.target===confirmButtonRef.current||"Enter"!==event.key||handleEvent(onConfirm)(event)}),[handleEvent,onConfirm]),cancelLabel=null!=cancelButtonText?cancelButtonText:(0,build_module.__)("Cancel"),confirmLabel=null!=confirmButtonText?confirmButtonText:(0,build_module.__)("OK");return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:isOpen&&(0,jsx_runtime.jsx)(modal.A,{onRequestClose:handleEvent(onCancel),onKeyDown:handleEnter,closeButtonLabel:cancelLabel,isDismissible:!0,ref:forwardedRef,overlayClassName:wrapperClassName,__experimentalHideHeader:!0,...otherProps,children:(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:8,children:[(0,jsx_runtime.jsx)(text_component.A,{children}),(0,jsx_runtime.jsxs)(component.A,{direction:"row",justify:"flex-end",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,ref:cancelButtonRef,variant:"tertiary",onClick:handleEvent(onCancel),children:cancelLabel}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,ref:confirmButtonRef,variant:"primary",onClick:handleEvent(onConfirm),children:confirmLabel})]})]})})})}),"ConfirmDialog")},"./packages/components/build-module/custom-gradient-picker/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ER:()=>GRADIENT_OPTIONS,ZP:()=>DIRECTIONAL_ORIENTATION_ANGLE_MAP,rk:()=>HORIZONTAL_GRADIENT_ORIENTATION,t5:()=>DEFAULT_LINEAR_GRADIENT_ANGLE,vK:()=>DEFAULT_GRADIENT});var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js");const DEFAULT_GRADIENT="linear-gradient(135deg, rgba(6, 147, 227, 1) 0%, rgb(155, 81, 224) 100%)",DEFAULT_LINEAR_GRADIENT_ANGLE=180,HORIZONTAL_GRADIENT_ORIENTATION={type:"angular",value:"90"},GRADIENT_OPTIONS=[{value:"linear-gradient",label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Linear")},{value:"radial-gradient",label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Radial")}],DIRECTIONAL_ORIENTATION_ANGLE_MAP={top:0,"top right":45,"right top":45,right:90,"right bottom":135,"bottom right":135,bottom:180,"bottom left":225,"left bottom":225,left:270,"top left":315,"left top":315}},"./packages/components/build-module/custom-gradient-picker/gradient-bar/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>CustomGradientBar});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react=__webpack_require__("./node_modules/react/index.js"),colord=__webpack_require__("./node_modules/colord/index.mjs"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),legacy_adapter=__webpack_require__("./packages/components/build-module/color-picker/legacy-adapter.js"),visually_hidden_component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),color_palette=__webpack_require__("./packages/components/build-module/color-palette/index.js");const MINIMUM_DISTANCE_BETWEEN_INSERTER_AND_POINT=10,MINIMUM_DISTANCE_BETWEEN_POINTS=0,KEYBOARD_CONTROL_POINT_VARIATION=MINIMUM_DISTANCE_BETWEEN_INSERTER_AND_POINT;function clampPercent(value){return Math.max(0,Math.min(100,value))}function updateControlPoint(points,index,newPoint){const newValue=points.slice();return newValue[index]=newPoint,newValue}function updateControlPointPosition(points,index,newPosition){if(function isOverlapping(value,initialIndex,newPosition,minDistance=MINIMUM_DISTANCE_BETWEEN_POINTS){const initialPosition=value[initialIndex].position,minPosition=Math.min(initialPosition,newPosition),maxPosition=Math.max(initialPosition,newPosition);return value.some((({position},index)=>index!==initialIndex&&(Math.abs(position-newPosition)<minDistance||minPosition<position&&position<maxPosition)))}(points,index,newPosition))return points;return updateControlPoint(points,index,{...points[index],position:newPosition})}function updateControlPointColor(points,index,newColor){return updateControlPoint(points,index,{...points[index],color:newColor})}function getHorizontalRelativeGradientPosition(mouseXCoordinate,containerElement){if(!containerElement)return;const{x,width}=containerElement.getBoundingClientRect(),absolutePositionValue=mouseXCoordinate-x;return Math.round(clampPercent(100*absolutePositionValue/width))}var dropdown_content_wrapper=__webpack_require__("./packages/components/build-module/dropdown/dropdown-content-wrapper.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ControlPointButton({isOpen,position,color,...additionalProps}){const descriptionId=`components-custom-gradient-picker__control-point-button-description-${(0,use_instance_id.A)(ControlPointButton)}`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{"aria-label":(0,build_module.nv)((0,build_module.__)("Gradient control point at position %1$s%% with color code %2$s."),position,color),"aria-describedby":descriptionId,"aria-haspopup":"true","aria-expanded":isOpen,className:(0,clsx.A)("components-custom-gradient-picker__control-point-button",{"is-active":isOpen}),...additionalProps}),(0,jsx_runtime.jsx)(visually_hidden_component.A,{id:descriptionId,children:(0,build_module.__)("Use your left or right arrow keys or drag and drop with the mouse to change the gradient position. Press the button to change the color or remove the control point.")})]})}function GradientColorPickerDropdown({isRenderedInSidebar,className,...props}){const popoverProps=(0,react.useMemo)((()=>({placement:"bottom",offset:8,resize:!1})),[]),mergedClassName=(0,clsx.A)("components-custom-gradient-picker__control-point-dropdown",className);return(0,jsx_runtime.jsx)(color_palette.c2,{isRenderedInSidebar,popoverProps,className:mergedClassName,...props})}function ControlPoints({disableRemove,disableAlpha,gradientPickerDomRef,ignoreMarkerPosition,value:controlPoints,onChange,onStartControlPointChange,onStopControlPointChange,__experimentalIsRenderedInSidebar}){const controlPointMoveStateRef=(0,react.useRef)(),onMouseMove=event=>{if(void 0===controlPointMoveStateRef.current||null===gradientPickerDomRef.current)return;const relativePosition=getHorizontalRelativeGradientPosition(event.clientX,gradientPickerDomRef.current),{initialPosition,index,significantMoveHappened}=controlPointMoveStateRef.current;!significantMoveHappened&&Math.abs(initialPosition-relativePosition)>=5&&(controlPointMoveStateRef.current.significantMoveHappened=!0),onChange(updateControlPointPosition(controlPoints,index,relativePosition))},cleanEventListeners=()=>{window&&window.removeEventListener&&controlPointMoveStateRef.current&&controlPointMoveStateRef.current.listenersActivated&&(window.removeEventListener("mousemove",onMouseMove),window.removeEventListener("mouseup",cleanEventListeners),onStopControlPointChange(),controlPointMoveStateRef.current.listenersActivated=!1)},cleanEventListenersRef=(0,react.useRef)();return cleanEventListenersRef.current=cleanEventListeners,(0,react.useEffect)((()=>()=>{cleanEventListenersRef.current?.()}),[]),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:controlPoints.map(((point,index)=>{const initialPosition=point?.position;return ignoreMarkerPosition!==initialPosition&&(0,jsx_runtime.jsx)(GradientColorPickerDropdown,{isRenderedInSidebar:__experimentalIsRenderedInSidebar,onClose:onStopControlPointChange,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(ControlPointButton,{onClick:()=>{controlPointMoveStateRef.current&&controlPointMoveStateRef.current.significantMoveHappened||(isOpen?onStopControlPointChange():onStartControlPointChange(),onToggle())},onMouseDown:()=>{window&&window.addEventListener&&(controlPointMoveStateRef.current={initialPosition,index,significantMoveHappened:!1,listenersActivated:!0},onStartControlPointChange(),window.addEventListener("mousemove",onMouseMove),window.addEventListener("mouseup",cleanEventListeners))},onKeyDown:event=>{"ArrowLeft"===event.code?(event.stopPropagation(),onChange(updateControlPointPosition(controlPoints,index,clampPercent(point.position-KEYBOARD_CONTROL_POINT_VARIATION)))):"ArrowRight"===event.code&&(event.stopPropagation(),onChange(updateControlPointPosition(controlPoints,index,clampPercent(point.position+KEYBOARD_CONTROL_POINT_VARIATION))))},isOpen,position:point.position,color:point.color},index),renderContent:({onClose})=>(0,jsx_runtime.jsxs)(dropdown_content_wrapper.A,{paddingSize:"none",children:[(0,jsx_runtime.jsx)(legacy_adapter.V,{enableAlpha:!disableAlpha,color:point.color,onChange:color=>{onChange(updateControlPointColor(controlPoints,index,(0,colord.Mj)(color).toRgbString()))}}),!disableRemove&&controlPoints.length>2&&(0,jsx_runtime.jsx)(component.A,{className:"components-custom-gradient-picker__remove-control-point-wrapper",alignment:"center",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{onClick:()=>{onChange(function removeControlPoint(points,index){return points.filter(((_point,pointIndex)=>pointIndex!==index))}(controlPoints,index)),onClose()},variant:"link",children:(0,build_module.__)("Remove Control Point")})})]}),style:{left:`${point.position}%`,transform:"translateX( -50% )"}},index)}))})}ControlPoints.InsertPoint=function InsertPoint({value:controlPoints,onChange,onOpenInserter,onCloseInserter,insertPosition,disableAlpha,__experimentalIsRenderedInSidebar}){const[alreadyInsertedPoint,setAlreadyInsertedPoint]=(0,react.useState)(!1);return(0,jsx_runtime.jsx)(GradientColorPickerDropdown,{isRenderedInSidebar:__experimentalIsRenderedInSidebar,className:"components-custom-gradient-picker__inserter",onClose:()=>{onCloseInserter()},renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{"aria-expanded":isOpen,"aria-haspopup":"true",onClick:()=>{isOpen?onCloseInserter():(setAlreadyInsertedPoint(!1),onOpenInserter()),onToggle()},className:"components-custom-gradient-picker__insert-point-dropdown",icon:plus.A}),renderContent:()=>(0,jsx_runtime.jsx)(dropdown_content_wrapper.A,{paddingSize:"none",children:(0,jsx_runtime.jsx)(legacy_adapter.V,{enableAlpha:!disableAlpha,onChange:color=>{alreadyInsertedPoint?onChange(function updateControlPointColorByPosition(points,position,newColor){const index=points.findIndex((point=>point.position===position));return updateControlPointColor(points,index,newColor)}(controlPoints,insertPosition,(0,colord.Mj)(color).toRgbString())):(onChange(function addControlPoint(points,position,color){const nextIndex=points.findIndex((point=>point.position>position)),newPoint={color,position},newPoints=points.slice();return newPoints.splice(nextIndex-1,0,newPoint),newPoints}(controlPoints,insertPosition,(0,colord.Mj)(color).toRgbString())),setAlreadyInsertedPoint(!0))}})}),style:null!==insertPosition?{left:`${insertPosition}%`,transform:"translateX( -50% )"}:void 0})};const control_points=ControlPoints,customGradientBarReducer=(state,action)=>{switch(action.type){case"MOVE_INSERTER":if("IDLE"===state.id||"MOVING_INSERTER"===state.id)return{id:"MOVING_INSERTER",insertPosition:action.insertPosition};break;case"STOP_INSERTER_MOVE":if("MOVING_INSERTER"===state.id)return{id:"IDLE"};break;case"OPEN_INSERTER":if("MOVING_INSERTER"===state.id)return{id:"INSERTING_CONTROL_POINT",insertPosition:state.insertPosition};break;case"CLOSE_INSERTER":if("INSERTING_CONTROL_POINT"===state.id)return{id:"IDLE"};break;case"START_CONTROL_CHANGE":if("IDLE"===state.id)return{id:"MOVING_CONTROL_POINT"};break;case"STOP_CONTROL_CHANGE":if("MOVING_CONTROL_POINT"===state.id)return{id:"IDLE"}}return state},customGradientBarReducerInitialState={id:"IDLE"};function CustomGradientBar({background,hasGradient,value:controlPoints,onChange,disableInserter=!1,disableAlpha=!1,__experimentalIsRenderedInSidebar=!1}){const gradientMarkersContainerDomRef=(0,react.useRef)(null),[gradientBarState,gradientBarStateDispatch]=(0,react.useReducer)(customGradientBarReducer,customGradientBarReducerInitialState),onMouseEnterAndMove=event=>{if(!gradientMarkersContainerDomRef.current)return;const insertPosition=getHorizontalRelativeGradientPosition(event.clientX,gradientMarkersContainerDomRef.current);controlPoints.some((({position})=>Math.abs(insertPosition-position)<MINIMUM_DISTANCE_BETWEEN_INSERTER_AND_POINT))?"MOVING_INSERTER"===gradientBarState.id&&gradientBarStateDispatch({type:"STOP_INSERTER_MOVE"}):gradientBarStateDispatch({type:"MOVE_INSERTER",insertPosition})},isMovingInserter="MOVING_INSERTER"===gradientBarState.id,isInsertingControlPoint="INSERTING_CONTROL_POINT"===gradientBarState.id;return(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("components-custom-gradient-picker__gradient-bar",{"has-gradient":hasGradient}),onMouseEnter:onMouseEnterAndMove,onMouseMove:onMouseEnterAndMove,onMouseLeave:()=>{gradientBarStateDispatch({type:"STOP_INSERTER_MOVE"})},children:[(0,jsx_runtime.jsx)("div",{className:"components-custom-gradient-picker__gradient-bar-background",style:{background,opacity:hasGradient?1:.4}}),(0,jsx_runtime.jsxs)("div",{ref:gradientMarkersContainerDomRef,className:"components-custom-gradient-picker__markers-container",children:[!disableInserter&&(isMovingInserter||isInsertingControlPoint)&&(0,jsx_runtime.jsx)(control_points.InsertPoint,{__experimentalIsRenderedInSidebar,disableAlpha,insertPosition:gradientBarState.insertPosition,value:controlPoints,onChange,onOpenInserter:()=>{gradientBarStateDispatch({type:"OPEN_INSERTER"})},onCloseInserter:()=>{gradientBarStateDispatch({type:"CLOSE_INSERTER"})}}),(0,jsx_runtime.jsx)(control_points,{__experimentalIsRenderedInSidebar,disableAlpha,disableRemove:disableInserter,gradientPickerDomRef:gradientMarkersContainerDomRef,ignoreMarkerPosition:isInsertingControlPoint?gradientBarState.insertPosition:void 0,value:controlPoints,onChange,onStartControlPointChange:()=>{gradientBarStateDispatch({type:"START_CONTROL_CHANGE"})},onStopControlPointChange:()=>{gradientBarStateDispatch({type:"STOP_CONTROL_CHANGE"})}})]})]})}},"./packages/components/build-module/custom-gradient-picker/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>custom_gradient_picker});var build_module=__webpack_require__("./packages/i18n/build-module/index.js"),clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react=__webpack_require__("./node_modules/react/index.js"),component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),flex_block_component=__webpack_require__("./packages/components/build-module/flex/flex-block/component.js"),spacer_component=__webpack_require__("./packages/components/build-module/spacer/component.js"),number_control=__webpack_require__("./packages/components/build-module/number-control/index.js"),use_dragging=__webpack_require__("./packages/compose/build-module/hooks/use-dragging/index.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),colors_values=__webpack_require__("./packages/components/build-module/utils/colors-values.js"),space=__webpack_require__("./packages/components/build-module/utils/space.js"),text_component=__webpack_require__("./packages/components/build-module/text/component.js"),config_values=__webpack_require__("./packages/components/build-module/utils/config-values.js");const CircleRoot=(0,emotion_styled_base_browser_esm.A)("div",{target:"eln3bjz3"})("border-radius:",config_values.A.radiusRound,";border:",config_values.A.borderWidth," solid ",colors_values.l.ui.border,";box-sizing:border-box;cursor:grab;height:",32,"px;overflow:hidden;width:",32,"px;:active{cursor:grabbing;}"),CircleIndicatorWrapper=(0,emotion_styled_base_browser_esm.A)("div",{target:"eln3bjz2"})({name:"1r307gh",styles:"box-sizing:border-box;position:relative;width:100%;height:100%;:focus-visible{outline:none;}"}),CircleIndicator=(0,emotion_styled_base_browser_esm.A)("div",{target:"eln3bjz1"})("background:",colors_values.l.theme.accent,";border-radius:",config_values.A.radiusRound,";box-sizing:border-box;display:block;left:50%;top:4px;transform:translateX( -50% );position:absolute;width:",6,"px;height:",6,"px;"),UnitText=(0,emotion_styled_base_browser_esm.A)(text_component.A,{target:"eln3bjz0"})("color:",colors_values.l.theme.accent,";margin-right:",(0,space.x)(3),";");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const angle_circle=function AngleCircle({value,onChange,...props}){const angleCircleRef=(0,react.useRef)(null),angleCircleCenterRef=(0,react.useRef)(),previousCursorValueRef=(0,react.useRef)(),changeAngleToPosition=event=>{if(void 0!==event&&(event.preventDefault(),event.target?.focus(),void 0!==angleCircleCenterRef.current&&void 0!==onChange)){const{x:centerX,y:centerY}=angleCircleCenterRef.current;onChange(function getAngle(centerX,centerY,pointX,pointY){const y=pointY-centerY,x=pointX-centerX,angleInRadians=Math.atan2(y,x),angleInDeg=Math.round(angleInRadians*(180/Math.PI))+90;if(angleInDeg<0)return 360+angleInDeg;return angleInDeg}(centerX,centerY,event.clientX,event.clientY))}},{startDrag,isDragging}=(0,use_dragging.A)({onDragStart:event=>{(()=>{if(null===angleCircleRef.current)return;const rect=angleCircleRef.current.getBoundingClientRect();angleCircleCenterRef.current={x:rect.x+rect.width/2,y:rect.y+rect.height/2}})(),changeAngleToPosition(event)},onDragMove:changeAngleToPosition,onDragEnd:changeAngleToPosition});return(0,react.useEffect)((()=>{isDragging?(void 0===previousCursorValueRef.current&&(previousCursorValueRef.current=document.body.style.cursor),document.body.style.cursor="grabbing"):(document.body.style.cursor=previousCursorValueRef.current||"",previousCursorValueRef.current=void 0)}),[isDragging]),(0,jsx_runtime.jsx)(CircleRoot,{ref:angleCircleRef,onMouseDown:startDrag,className:"components-angle-picker-control__angle-circle",...props,children:(0,jsx_runtime.jsx)(CircleIndicatorWrapper,{style:value?{transform:`rotate(${value}deg)`}:void 0,className:"components-angle-picker-control__angle-circle-indicator-wrapper",tabIndex:-1,children:(0,jsx_runtime.jsx)(CircleIndicator,{className:"components-angle-picker-control__angle-circle-indicator"})})})};const angle_picker_control=(0,react.forwardRef)((function UnforwardedAnglePickerControl(props,ref){const{className,label=(0,build_module.__)("Angle"),onChange,value,...restProps}=props,classes=(0,clsx.A)("components-angle-picker-control",className),unitText=(0,jsx_runtime.jsx)(UnitText,{children:"°"}),[prefixedUnitText,suffixedUnitText]=(0,build_module.V8)()?[unitText,null]:[null,unitText];return(0,jsx_runtime.jsxs)(component.A,{...restProps,ref,className:classes,gap:2,children:[(0,jsx_runtime.jsx)(flex_block_component.A,{children:(0,jsx_runtime.jsx)(number_control.A,{label,className:"components-angle-picker-control__input-field",max:360,min:0,onChange:unprocessedValue=>{if(void 0===onChange)return;const inputValue=void 0!==unprocessedValue&&""!==unprocessedValue?parseInt(unprocessedValue,10):0;onChange(inputValue)},size:"__unstable-large",step:"1",value,spinControls:"none",prefix:prefixedUnitText,suffix:suffixedUnitText})}),(0,jsx_runtime.jsx)(spacer_component.A,{marginBottom:"1",marginTop:"auto",children:(0,jsx_runtime.jsx)(angle_circle,{"aria-hidden":"true",value,onChange})})]})}));var gradient_bar=__webpack_require__("./packages/components/build-module/custom-gradient-picker/gradient-bar/index.js"),select_control=__webpack_require__("./packages/components/build-module/select-control/index.js"),v_stack_component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),node=__webpack_require__("./node_modules/gradient-parser/build/node.js"),colord=__webpack_require__("./node_modules/colord/index.mjs"),names=__webpack_require__("./node_modules/colord/plugins/names.mjs"),constants=__webpack_require__("./packages/components/build-module/custom-gradient-picker/constants.js");function serializeGradientColorStop({type,value,length}){return`${function serializeGradientColor({type,value}){return"literal"===type?value:"hex"===type?`#${value}`:`${type}(${value.join(",")})`}({type,value})} ${function serializeGradientPosition(position){if(!position)return"";const{value,type}=position;return`${value}${type}`}(length)}`}function serializeGradient({type,orientation,colorStops}){const serializedOrientation=function serializeGradientOrientation(orientation){if(!Array.isArray(orientation)&&orientation&&"angular"===orientation.type)return`${orientation.value}deg`}(orientation);return`${type}(${[serializedOrientation,...colorStops.sort(((colorStop1,colorStop2)=>{const getNumericStopValue=colorStop=>void 0===colorStop?.length?.value?0:parseInt(colorStop.length.value);return getNumericStopValue(colorStop1)-getNumericStopValue(colorStop2)})).map(serializeGradientColorStop)].filter(Boolean).join(",")})`}function hasUnsupportedLength(item){return void 0===item.length||"%"!==item.length.type}function getStopCssColor(colorStop){switch(colorStop.type){case"hex":return`#${colorStop.value}`;case"literal":return colorStop.value;case"rgb":case"rgba":return`${colorStop.type}(${colorStop.value.join(",")})`;default:return"transparent"}}(0,colord.X$)([names.A]);const SelectWrapper=(0,emotion_styled_base_browser_esm.A)(flex_block_component.A,{target:"e10bzpgi1"})({name:"1gvx10y",styles:"flex-grow:5"}),AccessoryWrapper=(0,emotion_styled_base_browser_esm.A)(flex_block_component.A,{target:"e10bzpgi0"})({name:"1gvx10y",styles:"flex-grow:5"}),GradientAnglePicker=({gradientAST,hasGradient,onChange})=>{var _gradientAST$orientat;const angle=null!==(_gradientAST$orientat=gradientAST?.orientation?.value)&&void 0!==_gradientAST$orientat?_gradientAST$orientat:constants.t5;return(0,jsx_runtime.jsx)(angle_picker_control,{onChange:newAngle=>{onChange(serializeGradient({...gradientAST,orientation:{type:"angular",value:`${newAngle}`}}))},value:hasGradient?angle:""})},GradientTypePicker=({gradientAST,hasGradient,onChange})=>{const{type}=gradientAST;return(0,jsx_runtime.jsx)(select_control.A,{__nextHasNoMarginBottom:!0,className:"components-custom-gradient-picker__type-picker",label:(0,build_module.__)("Type"),labelPosition:"top",onChange:next=>{"linear-gradient"===next&&onChange(serializeGradient({...gradientAST,orientation:gradientAST.orientation?void 0:constants.rk,type:"linear-gradient"})),"radial-gradient"===next&&(()=>{const{orientation,...restGradientAST}=gradientAST;onChange(serializeGradient({...restGradientAST,type:"radial-gradient"}))})()},options:constants.ER,size:"__unstable-large",value:hasGradient?type:void 0})};const custom_gradient_picker=function CustomGradientPicker({value,onChange,__experimentalIsRenderedInSidebar=!1}){const{gradientAST,hasGradient}=function getGradientAstWithDefault(value){let gradientAST,hasGradient=!!value;const valueToParse=null!=value?value:constants.vK;try{gradientAST=node.parse(valueToParse)[0]}catch(error){console.warn("wp.components.CustomGradientPicker failed to parse the gradient with error",error),gradientAST=node.parse(constants.vK)[0],hasGradient=!1}if(Array.isArray(gradientAST.orientation)||"directional"!==gradientAST.orientation?.type||(gradientAST.orientation={type:"angular",value:constants.ZP[gradientAST.orientation.value].toString()}),gradientAST.colorStops.some(hasUnsupportedLength)){const{colorStops}=gradientAST,step=100/(colorStops.length-1);colorStops.forEach(((stop,index)=>{stop.length={value:""+step*index,type:"%"}}))}return{gradientAST,hasGradient}}(value),background=function getLinearGradientRepresentation(gradientAST){return serializeGradient({type:"linear-gradient",orientation:constants.rk,colorStops:gradientAST.colorStops})}(gradientAST),controlPoints=gradientAST.colorStops.map((colorStop=>({color:getStopCssColor(colorStop),position:parseInt(colorStop.length.value)})));return(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:4,className:"components-custom-gradient-picker",children:[(0,jsx_runtime.jsx)(gradient_bar.A,{__experimentalIsRenderedInSidebar,background,hasGradient,value:controlPoints,onChange:newControlPoints=>{onChange(serializeGradient(function getGradientAstWithControlPoints(gradientAST,newControlPoints){return{...gradientAST,colorStops:newControlPoints.map((({position,color})=>{const{r,g,b,a}=(0,colord.Mj)(color).toRgb();return{length:{type:"%",value:position?.toString()},type:a<1?"rgba":"rgb",value:a<1?[`${r}`,`${g}`,`${b}`,`${a}`]:[`${r}`,`${g}`,`${b}`]}}))}}(gradientAST,newControlPoints)))}}),(0,jsx_runtime.jsxs)(component.A,{gap:3,className:"components-custom-gradient-picker__ui-line",children:[(0,jsx_runtime.jsx)(SelectWrapper,{children:(0,jsx_runtime.jsx)(GradientTypePicker,{gradientAST,hasGradient,onChange})}),(0,jsx_runtime.jsx)(AccessoryWrapper,{children:"linear-gradient"===gradientAST.type&&(0,jsx_runtime.jsx)(GradientAnglePicker,{gradientAST,hasGradient,onChange})})]})]})}},"./packages/components/build-module/drop-zone/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/icons/build-module/icon/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/icons/build-module/library/upload.js"),_wordpress_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/dom/build-module/data-transfer.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/compose/build-module/hooks/use-drop-zone/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=function DropZoneComponent({className,label,onFilesDrop,onHTMLDrop,onDrop,...restProps}){const[isDraggingOverDocument,setIsDraggingOverDocument]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(),[isDraggingOverElement,setIsDraggingOverElement]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(),[type,setType]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useState)(),ref=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__.A)({onDrop(event){const files=event.dataTransfer?(0,_wordpress_dom__WEBPACK_IMPORTED_MODULE_4__.$)(event.dataTransfer):[],html=event.dataTransfer?.getData("text/html");html&&onHTMLDrop?onHTMLDrop(html):files.length&&onFilesDrop?onFilesDrop(files):onDrop&&onDrop(event)},onDragStart(event){setIsDraggingOverDocument(!0);let _type="default";event.dataTransfer?.types.includes("text/html")?_type="html":(event.dataTransfer?.types.includes("Files")||(event.dataTransfer?(0,_wordpress_dom__WEBPACK_IMPORTED_MODULE_4__.$)(event.dataTransfer):[]).length>0)&&(_type="file"),setType(_type)},onDragEnd(){setIsDraggingOverElement(!1),setIsDraggingOverDocument(!1),setType(void 0)},onDragEnter(){setIsDraggingOverElement(!0)},onDragLeave(){setIsDraggingOverElement(!1)}}),classes=(0,clsx__WEBPACK_IMPORTED_MODULE_5__.A)("components-drop-zone",className,{"is-active":(isDraggingOverDocument||isDraggingOverElement)&&("file"===type&&onFilesDrop||"html"===type&&onHTMLDrop||"default"===type&&onDrop),"is-dragging-over-document":isDraggingOverDocument,"is-dragging-over-element":isDraggingOverElement,[`is-dragging-${type}`]:!!type});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{...restProps,ref,className:classes,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"components-drop-zone__content",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"components-drop-zone__content-inner",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_icons__WEBPACK_IMPORTED_MODULE_6__.A,{icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_7__.A,className:"components-drop-zone__content-icon"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{className:"components-drop-zone__content-text",children:label||(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Drop files to upload")})]})})})}},"./packages/components/build-module/dropdown/dropdown-content-wrapper.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>dropdown_content_wrapper});var use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js"),context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),space=__webpack_require__("./packages/components/build-module/utils/space.js");const padding=({paddingSize="small"})=>{if("none"===paddingSize)return;const paddingValues={small:(0,space.x)(2),medium:(0,space.x)(4)};return(0,emotion_react_browser_esm.AH)("padding:",paddingValues[paddingSize]||paddingValues.small,";","","","")},DropdownContentWrapperDiv=(0,emotion_styled_base_browser_esm.A)("div",{target:"eovvns30"})("margin-left:",(0,space.x)(-2),";margin-right:",(0,space.x)(-2),";&:first-of-type{margin-top:",(0,space.x)(-2),";}&:last-of-type{margin-bottom:",(0,space.x)(-2),";}",padding,";");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const dropdown_content_wrapper=(0,context_connect.KZ)((function UnconnectedDropdownContentWrapper(props,forwardedRef){const{paddingSize="small",...derivedProps}=(0,use_context_system.A)(props,"DropdownContentWrapper");return(0,jsx_runtime.jsx)(DropdownContentWrapperDiv,{...derivedProps,paddingSize,ref:forwardedRef})}),"DropdownContentWrapper")},"./packages/components/build-module/duotone-picker/duotone-picker.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>duotone_picker});var es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6),react=__webpack_require__("./node_modules/react/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),swatch=__webpack_require__("./packages/icons/build-module/library/swatch.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),color_palette=__webpack_require__("./packages/components/build-module/color-palette/index.js"),color_indicator=__webpack_require__("./packages/components/build-module/color-indicator/index.js"),icon=__webpack_require__("./packages/components/build-module/icon/index.js"),component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ColorOption({label,value,colors,disableCustomColors,enableAlpha,onChange}){const[isOpen,setIsOpen]=(0,react.useState)(!1),idRoot=(0,use_instance_id.A)(ColorOption,"color-list-picker-option"),labelId=`${idRoot}__label`,contentId=`${idRoot}__content`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"components-color-list-picker__swatch-button",onClick:()=>setIsOpen((prev=>!prev)),"aria-expanded":isOpen,"aria-controls":contentId,children:(0,jsx_runtime.jsxs)(component.A,{justify:"flex-start",spacing:2,children:[value?(0,jsx_runtime.jsx)(color_indicator.A,{colorValue:value,className:"components-color-list-picker__swatch-color"}):(0,jsx_runtime.jsx)(icon.A,{icon:swatch.A}),(0,jsx_runtime.jsx)("span",{id:labelId,children:label})]})}),(0,jsx_runtime.jsx)("div",{role:"group",id:contentId,"aria-labelledby":labelId,"aria-hidden":!isOpen,children:isOpen&&(0,jsx_runtime.jsx)(color_palette.Ay,{"aria-label":(0,build_module.__)("Color options"),className:"components-color-list-picker__color-picker",colors,value,clearable:!1,onChange,disableCustomColors,enableAlpha})})]})}const color_list_picker=function ColorListPicker({colors,labels,value=[],disableCustomColors,enableAlpha,onChange}){return(0,jsx_runtime.jsx)("div",{className:"components-color-list-picker",children:labels.map(((label,index)=>(0,jsx_runtime.jsx)(ColorOption,{label,value:value[index],colors,disableCustomColors,enableAlpha,onChange:newColor=>{const newColors=value.slice();newColors[index]=newColor,onChange(newColors)}},index)))})};var circular_option_picker=__webpack_require__("./packages/components/build-module/circular-option-picker/index.js"),v_stack_component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),gradient_bar=__webpack_require__("./packages/components/build-module/custom-gradient-picker/gradient-bar/index.js"),utils=__webpack_require__("./packages/components/build-module/duotone-picker/utils.js");const PLACEHOLDER_VALUES=["#333","#CCC"];function CustomDuotoneBar({value,onChange}){const hasGradient=!!value,values=hasGradient?value:PLACEHOLDER_VALUES,background=(0,utils.yb)(values),controlPoints=(0,utils.ri)(values);return(0,jsx_runtime.jsx)(gradient_bar.A,{disableInserter:!0,background,hasGradient,value:controlPoints,onChange:newColorStops=>{const newValue=(0,utils.lX)(newColorStops);onChange(newValue)}})}var spacer_component=__webpack_require__("./packages/components/build-module/spacer/component.js");const duotone_picker=function DuotonePicker({asButtons,loop,clearable=!0,unsetable=!0,colorPalette,duotonePalette,disableCustomColors,disableCustomDuotone,value,onChange,"aria-label":ariaLabel,"aria-labelledby":ariaLabelledby,...otherProps}){const[defaultDark,defaultLight]=(0,react.useMemo)((()=>(0,utils.OY)(colorPalette)),[colorPalette]),isUnset="unset"===value,unsetOptionLabel=(0,build_module.__)("Unset"),unsetOption=(0,jsx_runtime.jsx)(circular_option_picker.Ay.Option,{value:"unset",isSelected:isUnset,tooltipText:unsetOptionLabel,"aria-label":unsetOptionLabel,className:"components-duotone-picker__color-indicator",onClick:()=>{onChange(isUnset?void 0:"unset")}},"unset"),duotoneOptions=duotonePalette.map((({colors,slug,name})=>{const style={background:(0,utils.yb)(colors,"135deg"),color:"transparent"},tooltipText=null!=name?name:(0,build_module.nv)((0,build_module.__)("Duotone code: %s"),slug),label=name?(0,build_module.nv)((0,build_module.__)("Duotone: %s"),name):tooltipText,isSelected=es6_default()(colors,value);return(0,jsx_runtime.jsx)(circular_option_picker.Ay.Option,{value:colors,isSelected,"aria-label":label,tooltipText,style,onClick:()=>{onChange(isSelected?void 0:colors)}},slug)}));let metaProps;if(asButtons)metaProps={asButtons:!0};else{const _metaProps={asButtons:!1,loop};metaProps=ariaLabel?{..._metaProps,"aria-label":ariaLabel}:ariaLabelledby?{..._metaProps,"aria-labelledby":ariaLabelledby}:{..._metaProps,"aria-label":(0,build_module.__)("Custom color picker.")}}const options=unsetable?[unsetOption,...duotoneOptions]:duotoneOptions;return(0,jsx_runtime.jsx)(circular_option_picker.Ay,{...otherProps,...metaProps,options,actions:!!clearable&&(0,jsx_runtime.jsx)(circular_option_picker.Ay.ButtonAction,{onClick:()=>onChange(void 0),children:(0,build_module.__)("Clear")}),children:(0,jsx_runtime.jsx)(spacer_component.A,{paddingTop:0===options.length?0:4,children:(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:3,children:[!disableCustomColors&&!disableCustomDuotone&&(0,jsx_runtime.jsx)(CustomDuotoneBar,{value:isUnset?void 0:value,onChange}),!disableCustomDuotone&&(0,jsx_runtime.jsx)(color_list_picker,{labels:[(0,build_module.__)("Shadows"),(0,build_module.__)("Highlights")],colors:colorPalette,value:isUnset?void 0:value,disableCustomColors,enableAlpha:!0,onChange:newColors=>{newColors[0]||(newColors[0]=defaultDark),newColors[1]||(newColors[1]=defaultLight);const newValue=newColors.length>=2?newColors:void 0;onChange(newValue)}})]})})})}},"./packages/components/build-module/duotone-picker/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{OY:()=>getDefaultColors,lX:()=>getColorsFromColorStops,ri:()=>getColorStopsFromColors,yb:()=>getGradientFromCSSColors});var colord__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/colord/index.mjs"),colord_plugins_names__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/colord/plugins/names.mjs");function getDefaultColors(palette){return!palette||palette.length<2?["#000","#fff"]:palette.map((({color})=>({color,brightness:(0,colord__WEBPACK_IMPORTED_MODULE_0__.Mj)(color).brightness()}))).reduce((([min,max],current)=>[current.brightness<=min.brightness?current:min,current.brightness>=max.brightness?current:max]),[{brightness:1,color:""},{brightness:0,color:""}]).map((({color})=>color))}function getGradientFromCSSColors(colors=[],angle="90deg"){const l=100/colors.length;return`linear-gradient( ${angle}, ${colors.map(((c,i)=>`${c} ${i*l}%, ${c} ${(i+1)*l}%`)).join(", ")} )`}function getColorStopsFromColors(colors){return colors.map(((color,i)=>({position:100*i/(colors.length-1),color})))}function getColorsFromColorStops(colorStops=[]){return colorStops.map((({color})=>color))}(0,colord__WEBPACK_IMPORTED_MODULE_0__.X$)([colord_plugins_names__WEBPACK_IMPORTED_MODULE_1__.A])},"./packages/components/build-module/focal-point-picker/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>focal_point_picker});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),react=__webpack_require__("./node_modules/react/index.js"),use_dragging=__webpack_require__("./packages/compose/build-module/hooks/use-dragging/index.js"),use_isomorphic_layout_effect=__webpack_require__("./packages/compose/build-module/hooks/use-isomorphic-layout-effect/index.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),unit_control=__webpack_require__("./packages/components/build-module/unit-control/index.js"),config_values=__webpack_require__("./packages/components/build-module/utils/config-values.js"),colors_values=__webpack_require__("./packages/components/build-module/utils/colors-values.js");const INITIAL_BOUNDS={width:200,height:170},VIDEO_EXTENSIONS=["avi","mpg","mpeg","mov","mp4","m4v","ogg","ogv","webm","wmv"];function fractionToPercentage(fraction){return Math.round(100*fraction)}const MediaWrapper=(0,emotion_styled_base_browser_esm.A)("div",{target:"eeew7dm8"})({name:"jqnsxy",styles:"background-color:transparent;display:flex;text-align:center;width:100%"}),MediaContainer=(0,emotion_styled_base_browser_esm.A)("div",{target:"eeew7dm7"})("align-items:center;border-radius:",config_values.A.radiusSmall,";cursor:pointer;display:inline-flex;justify-content:center;margin:auto;position:relative;height:100%;&:after{border-radius:inherit;bottom:0;box-shadow:inset 0 0 0 1px rgba( 0, 0, 0, 0.1 );content:'';left:0;pointer-events:none;position:absolute;right:0;top:0;}img,video{border-radius:inherit;box-sizing:border-box;display:block;height:auto;margin:0;max-height:100%;max-width:100%;pointer-events:none;user-select:none;width:auto;}"),MediaPlaceholder=(0,emotion_styled_base_browser_esm.A)("div",{target:"eeew7dm6"})("background:",colors_values.l.gray[100],";border-radius:inherit;box-sizing:border-box;height:",INITIAL_BOUNDS.height,"px;max-width:280px;min-width:",INITIAL_BOUNDS.width,"px;width:100%;"),StyledUnitControl=(0,emotion_styled_base_browser_esm.A)(unit_control.Ay,{target:"eeew7dm5"})({name:"1d3w5wq",styles:"width:100%"});var _ref2={name:"1mn7kwb",styles:"padding-bottom:1em"};const deprecatedBottomMargin=({__nextHasNoMarginBottom})=>__nextHasNoMarginBottom?void 0:_ref2;var _ref={name:"1mn7kwb",styles:"padding-bottom:1em"};const extraHelpTextMargin=({hasHelpText=!1})=>hasHelpText?_ref:void 0,ControlWrapper=(0,emotion_styled_base_browser_esm.A)(component.A,{target:"eeew7dm4"})("max-width:320px;padding-top:1em;",extraHelpTextMargin," ",deprecatedBottomMargin,";"),GridView=(0,emotion_styled_base_browser_esm.A)("div",{target:"eeew7dm3"})("left:50%;overflow:hidden;pointer-events:none;position:absolute;top:50%;transform:translate3d( -50%, -50%, 0 );z-index:1;@media not ( prefers-reduced-motion ){transition:opacity 100ms linear;}opacity:",(({showOverlay})=>showOverlay?1:0),";"),GridLine=(0,emotion_styled_base_browser_esm.A)("div",{target:"eeew7dm2"})({name:"1yzbo24",styles:"background:rgba( 255, 255, 255, 0.4 );backdrop-filter:blur( 16px ) saturate( 180% );position:absolute;transform:translateZ( 0 )"}),GridLineX=(0,emotion_styled_base_browser_esm.A)(GridLine,{target:"eeew7dm1"})({name:"1sw8ur",styles:"height:1px;left:1px;right:1px"}),GridLineY=(0,emotion_styled_base_browser_esm.A)(GridLine,{target:"eeew7dm0"})({name:"188vg4t",styles:"width:1px;top:1px;bottom:1px"});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const TEXTCONTROL_MIN=0,TEXTCONTROL_MAX=100,noop=()=>{};function FocalPointPickerControls({__nextHasNoMarginBottom,hasHelpText,onChange=noop,point={x:.5,y:.5}}){const valueX=fractionToPercentage(point.x),valueY=fractionToPercentage(point.y),handleChange=(value,axis)=>{if(void 0===value)return;const num=parseInt(value,10);isNaN(num)||onChange({...point,[axis]:num/100})};return(0,jsx_runtime.jsxs)(ControlWrapper,{className:"focal-point-picker__controls",__nextHasNoMarginBottom,hasHelpText,gap:4,children:[(0,jsx_runtime.jsx)(FocalPointUnitControl,{label:(0,build_module.__)("Left"),"aria-label":(0,build_module.__)("Focal point left position"),value:[valueX,"%"].join(""),onChange:next=>handleChange(next,"x"),dragDirection:"e"}),(0,jsx_runtime.jsx)(FocalPointUnitControl,{label:(0,build_module.__)("Top"),"aria-label":(0,build_module.__)("Focal point top position"),value:[valueY,"%"].join(""),onChange:next=>handleChange(next,"y"),dragDirection:"s"})]})}function FocalPointUnitControl(props){return(0,jsx_runtime.jsx)(StyledUnitControl,{__next40pxDefaultSize:!0,className:"focal-point-picker__controls-position-unit-control",labelPosition:"top",max:TEXTCONTROL_MAX,min:TEXTCONTROL_MIN,units:[{value:"%",label:"%"}],...props})}const PointerCircle=(0,emotion_styled_base_browser_esm.A)("div",{target:"e19snlhg0"})("background-color:transparent;cursor:grab;height:40px;margin:-20px 0 0 -20px;position:absolute;user-select:none;width:40px;will-change:transform;z-index:10000;background:rgba( 255, 255, 255, 0.4 );border:1px solid rgba( 255, 255, 255, 0.4 );border-radius:",config_values.A.radiusRound,";backdrop-filter:blur( 16px ) saturate( 180% );box-shadow:rgb( 0 0 0 / 10% ) 0px 0px 8px;@media not ( prefers-reduced-motion ){transition:transform 100ms linear;}",(({isDragging})=>isDragging&&"\n\t\t\tbox-shadow: rgb( 0 0 0 / 12% ) 0px 0px 10px;\n\t\t\ttransform: scale( 1.1 );\n\t\t\tcursor: grabbing;\n\t\t\t"),";");function FocalPoint({left="50%",top="50%",...props}){const style={left,top};return(0,jsx_runtime.jsx)(PointerCircle,{...props,className:"components-focal-point-picker__icon_container",style})}function FocalPointPickerGrid({bounds,...props}){return(0,jsx_runtime.jsxs)(GridView,{...props,className:"components-focal-point-picker__grid",style:{width:bounds.width,height:bounds.height},children:[(0,jsx_runtime.jsx)(GridLineX,{style:{top:"33%"}}),(0,jsx_runtime.jsx)(GridLineX,{style:{top:"66%"}}),(0,jsx_runtime.jsx)(GridLineY,{style:{left:"33%"}}),(0,jsx_runtime.jsx)(GridLineY,{style:{left:"66%"}})]})}function Media({alt,autoPlay,src,onLoad,mediaRef,muted=!0,...props}){if(!src)return(0,jsx_runtime.jsx)(MediaPlaceholder,{className:"components-focal-point-picker__media components-focal-point-picker__media--placeholder",ref:mediaRef,...props});return function isVideoType(filename=""){return!!filename&&(filename.startsWith("data:video/")||VIDEO_EXTENSIONS.includes(function getExtension(filename=""){const parts=filename.split(".");return parts[parts.length-1]}(filename)))}(src)?(0,jsx_runtime.jsx)("video",{...props,autoPlay,className:"components-focal-point-picker__media components-focal-point-picker__media--video",loop:!0,muted,onLoadedData:onLoad,ref:mediaRef,src}):(0,jsx_runtime.jsx)("img",{...props,alt,className:"components-focal-point-picker__media components-focal-point-picker__media--image",onLoad,ref:mediaRef,src})}var use_update_effect=__webpack_require__("./packages/components/build-module/utils/hooks/use-update-effect.js");const focal_point_picker=function FocalPointPicker({__nextHasNoMarginBottom,autoPlay=!0,className,help,label,onChange,onDrag,onDragEnd,onDragStart,resolvePoint,url,value:valueProp={x:.5,y:.5},...restProps}){const[point,setPoint]=(0,react.useState)(valueProp),[showGridOverlay,setShowGridOverlay]=(0,react.useState)(!1),{startDrag,endDrag,isDragging}=(0,use_dragging.A)({onDragStart:event=>{dragAreaRef.current?.focus();const value=getValueWithinDragArea(event);value&&(onDragStart?.(value,event),setPoint(value))},onDragMove:event=>{event.preventDefault();const value=getValueWithinDragArea(event);value&&(onDrag?.(value,event),setPoint(value))},onDragEnd:()=>{onDragEnd?.(),onChange?.(point)}}),{x,y}=isDragging?point:valueProp,dragAreaRef=(0,react.useRef)(null),[bounds,setBounds]=(0,react.useState)(INITIAL_BOUNDS),refUpdateBounds=(0,react.useRef)((()=>{if(!dragAreaRef.current)return;const{clientWidth:width,clientHeight:height}=dragAreaRef.current;setBounds(width>0&&height>0?{width,height}:{...INITIAL_BOUNDS})}));(0,react.useEffect)((()=>{const updateBounds=refUpdateBounds.current;if(!dragAreaRef.current)return;const{defaultView}=dragAreaRef.current.ownerDocument;return defaultView?.addEventListener("resize",updateBounds),()=>defaultView?.removeEventListener("resize",updateBounds)}),[]),(0,use_isomorphic_layout_effect.A)((()=>{refUpdateBounds.current()}),[]);const getValueWithinDragArea=({clientX,clientY,shiftKey})=>{if(!dragAreaRef.current)return;const{top,left}=dragAreaRef.current.getBoundingClientRect();let nextX=(clientX-left)/bounds.width,nextY=(clientY-top)/bounds.height;return shiftKey&&(nextX=.1*Math.round(nextX/.1),nextY=.1*Math.round(nextY/.1)),getFinalValue({x:nextX,y:nextY})},getFinalValue=value=>{var _resolvePoint;const resolvedValue=null!==(_resolvePoint=resolvePoint?.(value))&&void 0!==_resolvePoint?_resolvePoint:value;resolvedValue.x=Math.max(0,Math.min(resolvedValue.x,1)),resolvedValue.y=Math.max(0,Math.min(resolvedValue.y,1));const roundToTwoDecimalPlaces=n=>Math.round(100*n)/100;return{x:roundToTwoDecimalPlaces(resolvedValue.x),y:roundToTwoDecimalPlaces(resolvedValue.y)}},focalPointPosition={left:void 0!==x?x*bounds.width:.5*bounds.width,top:void 0!==y?y*bounds.height:.5*bounds.height},classes=(0,clsx.A)("components-focal-point-picker-control",className),id=`inspector-focal-point-picker-control-${(0,use_instance_id.A)(FocalPointPicker)}`;return(0,use_update_effect.A)((()=>{setShowGridOverlay(!0);const timeout=window.setTimeout((()=>{setShowGridOverlay(!1)}),600);return()=>window.clearTimeout(timeout)}),[x,y]),(0,jsx_runtime.jsxs)(base_control.Ay,{...restProps,__nextHasNoMarginBottom,__associatedWPComponentName:"FocalPointPicker",label,id,help,className:classes,children:[(0,jsx_runtime.jsx)(MediaWrapper,{className:"components-focal-point-picker-wrapper",children:(0,jsx_runtime.jsxs)(MediaContainer,{className:"components-focal-point-picker",onKeyDown:event=>{const{code,shiftKey}=event;if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(code))return;event.preventDefault();const value={x,y},step=shiftKey?.1:.01,delta="ArrowUp"===code||"ArrowLeft"===code?-1*step:step,axis="ArrowUp"===code||"ArrowDown"===code?"y":"x";value[axis]=value[axis]+delta,onChange?.(getFinalValue(value))},onMouseDown:startDrag,onBlur:()=>{isDragging&&endDrag()},ref:dragAreaRef,role:"button",tabIndex:-1,children:[(0,jsx_runtime.jsx)(FocalPointPickerGrid,{bounds,showOverlay:showGridOverlay}),(0,jsx_runtime.jsx)(Media,{alt:(0,build_module.__)("Media preview"),autoPlay,onLoad:refUpdateBounds.current,src:url}),(0,jsx_runtime.jsx)(FocalPoint,{...focalPointPosition,isDragging})]})}),(0,jsx_runtime.jsx)(FocalPointPickerControls,{__nextHasNoMarginBottom,hasHelpText:!!help,point:{x,y},onChange:value=>{onChange?.(getFinalValue(value))}})]})}},"./packages/components/build-module/form-file-upload/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_button__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/button/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=function FormFileUpload({accept,children,multiple=!1,onChange,onClick,render,...props}){const ref=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),openFileDialog=()=>{ref.current?.click()},ui=render?render({openFileDialog}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_button__WEBPACK_IMPORTED_MODULE_2__.Ay,{onClick:openFileDialog,...props,children});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"components-form-file-upload",children:[ui,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"file",ref,multiple,style:{display:"none"},accept,onChange,onClick,"data-testid":"form-file-upload-input"})]})}},"./packages/components/build-module/form-token-field/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>form_token_field});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react=__webpack_require__("./node_modules/react/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),use_previous=__webpack_require__("./packages/compose/build-module/hooks/use-previous/index.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),close_small=__webpack_require__("./packages/icons/build-module/library/close-small.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const noop=()=>{};function Token({value,status,title,displayTransform,isBorderless=!1,disabled=!1,onClickRemove=noop,onMouseEnter,onMouseLeave,messages,termPosition,termsCount}){const instanceId=(0,use_instance_id.A)(Token),tokenClasses=(0,clsx.A)("components-form-token-field__token",{"is-error":"error"===status,"is-success":"success"===status,"is-validating":"validating"===status,"is-borderless":isBorderless,"is-disabled":disabled}),transformedValue=displayTransform(value),termPositionAndCount=(0,build_module.nv)((0,build_module.__)("%1$s (%2$s of %3$s)"),transformedValue,termPosition,termsCount);return(0,jsx_runtime.jsxs)("span",{className:tokenClasses,onMouseEnter,onMouseLeave,title,children:[(0,jsx_runtime.jsxs)("span",{className:"components-form-token-field__token-text",id:`components-form-token-field__token-text-${instanceId}`,children:[(0,jsx_runtime.jsx)(component.A,{as:"span",children:termPositionAndCount}),(0,jsx_runtime.jsx)("span",{"aria-hidden":"true",children:transformedValue})]}),(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"components-form-token-field__remove-token",icon:close_small.A,onClick:disabled?void 0:()=>onClickRemove({value}),disabled,label:messages.remove,"aria-describedby":`components-form-token-field__token-text-${instanceId}`})]})}var token_input=__webpack_require__("./packages/components/build-module/form-token-field/token-input.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),flex_component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),space=__webpack_require__("./packages/components/build-module/utils/space.js"),box_sizing=__webpack_require__("./packages/components/build-module/utils/box-sizing.js");const deprecatedPaddings=({__next40pxDefaultSize,hasTokens})=>!__next40pxDefaultSize&&(0,emotion_react_browser_esm.AH)("padding-top:",(0,space.x)(hasTokens?1:.5),";padding-bottom:",(0,space.x)(hasTokens?1:.5),";","","",""),TokensAndInputWrapperFlex=(0,emotion_styled_base_browser_esm.A)(flex_component.A,{target:"ehq8nmi0"})("padding:7px;",box_sizing.r," ",deprecatedPaddings,";");var suggestions_list=__webpack_require__("./packages/components/build-module/form-token-field/suggestions-list.js"),flex_item_component=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),base_control_styles=__webpack_require__("./packages/components/build-module/base-control/styles/base-control-styles.js"),spacer_component=__webpack_require__("./packages/components/build-module/spacer/component.js"),use_deprecated_props=__webpack_require__("./packages/components/build-module/utils/use-deprecated-props.js"),with_ignore_ime_events=__webpack_require__("./packages/components/build-module/utils/with-ignore-ime-events.js");const identity=value=>value;const form_token_field=function FormTokenField(props){const{autoCapitalize,autoComplete,maxLength,placeholder,label=(0,build_module.__)("Add item"),className,suggestions=[],maxSuggestions=100,value=[],displayTransform=identity,saveTransform=token=>token.trim(),onChange=()=>{},onInputChange=()=>{},onFocus,isBorderless=!1,disabled=!1,tokenizeOnSpace=!1,messages={added:(0,build_module.__)("Item added."),removed:(0,build_module.__)("Item removed."),remove:(0,build_module.__)("Remove item"),__experimentalInvalid:(0,build_module.__)("Invalid item")},__experimentalRenderItem,__experimentalExpandOnFocus=!1,__experimentalValidateInput=()=>!0,__experimentalShowHowTo=!0,__next40pxDefaultSize=!1,__experimentalAutoSelectFirstMatch=!1,__nextHasNoMarginBottom=!1,tokenizeOnBlur=!1}=(0,use_deprecated_props.R)(props);__nextHasNoMarginBottom||(0,deprecated_build_module.A)("Bottom margin styles for wp.components.FormTokenField",{since:"6.7",version:"7.0",hint:"Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version."});const instanceId=(0,use_instance_id.A)(FormTokenField),[incompleteTokenValue,setIncompleteTokenValue]=(0,react.useState)(""),[inputOffsetFromEnd,setInputOffsetFromEnd]=(0,react.useState)(0),[isActive,setIsActive]=(0,react.useState)(!1),[isExpanded,setIsExpanded]=(0,react.useState)(!1),[selectedSuggestionIndex,setSelectedSuggestionIndex]=(0,react.useState)(-1),[selectedSuggestionScroll,setSelectedSuggestionScroll]=(0,react.useState)(!1),prevSuggestions=(0,use_previous.A)(suggestions),prevValue=(0,use_previous.A)(value),input=(0,react.useRef)(null),tokensAndInput=(0,react.useRef)(null),debouncedSpeak=(0,use_debounce.A)(a11y_build_module.L,500);function focus(){input.current?.focus()}function hasFocus(){return input.current===input.current?.ownerDocument.activeElement}function onBlur(event){if(inputHasValidValue()&&__experimentalValidateInput(incompleteTokenValue))setIsActive(!1),tokenizeOnBlur&&inputHasValidValue()&&addNewToken(incompleteTokenValue);else{if(setIncompleteTokenValue(""),setInputOffsetFromEnd(0),setIsActive(!1),__experimentalExpandOnFocus){const hasFocusWithin=event.relatedTarget===tokensAndInput.current;setIsExpanded(hasFocusWithin)}else setIsExpanded(!1);setSelectedSuggestionIndex(-1),setSelectedSuggestionScroll(!1)}}function onContainerTouched(event){event.target===tokensAndInput.current&&isActive&&event.preventDefault()}function onTokenClickRemove(event){deleteToken(event.value),focus()}function onInputChangeHandler(event){const text=event.value,separator=tokenizeOnSpace?/[ ,\t]+/:/[,\t]+/,items=text.split(separator),tokenValue=items[items.length-1]||"";items.length>1&&addNewTokens(items.slice(0,-1)),setIncompleteTokenValue(tokenValue),onInputChange(tokenValue)}function handleDeleteKey(_deleteToken){let preventDefault=!1;return hasFocus()&&isInputEmpty()&&(_deleteToken(),preventDefault=!0),preventDefault}function deleteTokenBeforeInput(){const index=getIndexOfInput()-1;index>-1&&deleteToken(value[index])}function deleteTokenAfterInput(){const index=getIndexOfInput();index<value.length&&(deleteToken(value[index]),function moveInputToIndex(index){setInputOffsetFromEnd(value.length-Math.max(index,-1)-1)}(index))}function addCurrentToken(){let preventDefault=!1;const selectedSuggestion=function getSelectedSuggestion(){if(-1!==selectedSuggestionIndex)return getMatchingSuggestions()[selectedSuggestionIndex];return}();return selectedSuggestion?(addNewToken(selectedSuggestion),preventDefault=!0):inputHasValidValue()&&(addNewToken(incompleteTokenValue),preventDefault=!0),preventDefault}function addNewTokens(tokens){const tokensToAdd=[...new Set(tokens.map(saveTransform).filter(Boolean).filter((token=>!function valueContainsToken(token){return value.some((item=>getTokenValue(token)===getTokenValue(item)))}(token))))];if(tokensToAdd.length>0){const newValue=[...value];newValue.splice(getIndexOfInput(),0,...tokensToAdd),onChange(newValue)}}function addNewToken(token){__experimentalValidateInput(token)?(addNewTokens([token]),(0,a11y_build_module.L)(messages.added,"assertive"),setIncompleteTokenValue(""),setSelectedSuggestionIndex(-1),setSelectedSuggestionScroll(!1),setIsExpanded(!__experimentalExpandOnFocus),isActive&&!tokenizeOnBlur&&focus()):(0,a11y_build_module.L)(messages.__experimentalInvalid,"assertive")}function deleteToken(token){const newTokens=value.filter((item=>getTokenValue(item)!==getTokenValue(token)));onChange(newTokens),(0,a11y_build_module.L)(messages.removed,"assertive")}function getTokenValue(token){return"object"==typeof token?token.value:token}function getMatchingSuggestions(searchValue=incompleteTokenValue,_suggestions=suggestions,_value=value,_maxSuggestions=maxSuggestions,_saveTransform=saveTransform){let match=_saveTransform(searchValue);const startsWithMatch=[],containsMatch=[],normalizedValue=_value.map((item=>"string"==typeof item?item:item.value));return 0===match.length?_suggestions=_suggestions.filter((suggestion=>!normalizedValue.includes(suggestion))):(match=match.toLocaleLowerCase(),_suggestions.forEach((suggestion=>{const index=suggestion.toLocaleLowerCase().indexOf(match);-1===normalizedValue.indexOf(suggestion)&&(0===index?startsWithMatch.push(suggestion):index>0&&containsMatch.push(suggestion))})),_suggestions=startsWithMatch.concat(containsMatch)),_suggestions.slice(0,_maxSuggestions)}function getIndexOfInput(){return value.length-inputOffsetFromEnd}function isInputEmpty(){return 0===incompleteTokenValue.length}function inputHasValidValue(){return saveTransform(incompleteTokenValue).length>0}function updateSuggestions(resetSelectedSuggestion=!0){const inputHasMinimumChars=incompleteTokenValue.trim().length>1,matchingSuggestions=getMatchingSuggestions(incompleteTokenValue),hasMatchingSuggestions=matchingSuggestions.length>0,shouldExpandIfFocuses=hasFocus()&&__experimentalExpandOnFocus;if(setIsExpanded(shouldExpandIfFocuses||inputHasMinimumChars&&hasMatchingSuggestions),resetSelectedSuggestion&&(__experimentalAutoSelectFirstMatch&&inputHasMinimumChars&&hasMatchingSuggestions?(setSelectedSuggestionIndex(0),setSelectedSuggestionScroll(!0)):(setSelectedSuggestionIndex(-1),setSelectedSuggestionScroll(!1))),inputHasMinimumChars){const message=hasMatchingSuggestions?(0,build_module.nv)((0,build_module._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",matchingSuggestions.length),matchingSuggestions.length):(0,build_module.__)("No results.");debouncedSpeak(message,"assertive")}}function renderToken(token,index,tokens){const _value=getTokenValue(token),status="string"!=typeof token?token.status:void 0,termPosition=index+1,termsCount=tokens.length;return(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(Token,{value:_value,status,title:"string"!=typeof token?token.title:void 0,displayTransform,onClickRemove:onTokenClickRemove,isBorderless:"string"!=typeof token&&token.isBorderless||isBorderless,onMouseEnter:"string"!=typeof token?token.onMouseEnter:void 0,onMouseLeave:"string"!=typeof token?token.onMouseLeave:void 0,disabled:"error"!==status&&disabled,messages,termsCount,termPosition})},"token-"+_value)}(0,react.useEffect)((()=>{isActive&&!hasFocus()&&focus()}),[isActive]),(0,react.useEffect)((()=>{const suggestionsDidUpdate=!(0,is_shallow_equal_build_module.Ay)(suggestions,prevSuggestions||[]);(suggestionsDidUpdate||value!==prevValue)&&updateSuggestions(suggestionsDidUpdate)}),[suggestions,prevSuggestions,value,prevValue]),(0,react.useEffect)((()=>{updateSuggestions()}),[incompleteTokenValue]),(0,react.useEffect)((()=>{updateSuggestions()}),[__experimentalAutoSelectFirstMatch]),disabled&&isActive&&(setIsActive(!1),setIncompleteTokenValue(""));const classes=(0,clsx.A)(className,"components-form-token-field__input-container",{"is-active":isActive,"is-disabled":disabled});let tokenFieldProps={className:"components-form-token-field",tabIndex:-1};const matchingSuggestions=getMatchingSuggestions();return disabled||(tokenFieldProps=Object.assign({},tokenFieldProps,{onKeyDown:(0,with_ignore_ime_events.n)((function onKeyDown(event){let preventDefault=!1;if(!event.defaultPrevented){switch(event.key){case"Backspace":preventDefault=handleDeleteKey(deleteTokenBeforeInput);break;case"Enter":preventDefault=addCurrentToken();break;case"ArrowLeft":preventDefault=function handleLeftArrowKey(){let preventDefault=!1;return isInputEmpty()&&(function moveInputBeforePreviousToken(){setInputOffsetFromEnd((prevInputOffsetFromEnd=>Math.min(prevInputOffsetFromEnd+1,value.length)))}(),preventDefault=!0),preventDefault}();break;case"ArrowUp":preventDefault=function handleUpArrowKey(){return setSelectedSuggestionIndex((index=>(0===index?getMatchingSuggestions(incompleteTokenValue,suggestions,value,maxSuggestions,saveTransform).length:index)-1)),setSelectedSuggestionScroll(!0),!0}();break;case"ArrowRight":preventDefault=function handleRightArrowKey(){let preventDefault=!1;return isInputEmpty()&&(function moveInputAfterNextToken(){setInputOffsetFromEnd((prevInputOffsetFromEnd=>Math.max(prevInputOffsetFromEnd-1,0)))}(),preventDefault=!0),preventDefault}();break;case"ArrowDown":preventDefault=function handleDownArrowKey(){return setSelectedSuggestionIndex((index=>(index+1)%getMatchingSuggestions(incompleteTokenValue,suggestions,value,maxSuggestions,saveTransform).length)),setSelectedSuggestionScroll(!0),!0}();break;case"Delete":preventDefault=handleDeleteKey(deleteTokenAfterInput);break;case"Space":tokenizeOnSpace&&(preventDefault=addCurrentToken());break;case"Escape":preventDefault=function handleEscapeKey(event){return event.target instanceof HTMLInputElement&&(setIncompleteTokenValue(event.target.value),setIsExpanded(!1),setSelectedSuggestionIndex(-1),setSelectedSuggestionScroll(!1)),!0}(event)}preventDefault&&event.preventDefault()}})),onKeyPress:function onKeyPress(event){let preventDefault=!1;","===event.key&&(preventDefault=function handleCommaKey(){return inputHasValidValue()&&addNewToken(incompleteTokenValue),!0}());preventDefault&&event.preventDefault()},onFocus:function onFocusHandler(event){hasFocus()||event.target===tokensAndInput.current?(setIsActive(!0),setIsExpanded(__experimentalExpandOnFocus||isExpanded)):setIsActive(!1),"function"==typeof onFocus&&onFocus(event)}})),(0,jsx_runtime.jsxs)("div",{...tokenFieldProps,children:[label&&(0,jsx_runtime.jsx)(base_control_styles.Gw,{htmlFor:`components-form-token-input-${instanceId}`,className:"components-form-token-field__label",children:label}),(0,jsx_runtime.jsxs)("div",{ref:tokensAndInput,className:classes,tabIndex:-1,onMouseDown:onContainerTouched,onTouchStart:onContainerTouched,children:[(0,jsx_runtime.jsx)(TokensAndInputWrapperFlex,{justify:"flex-start",align:"center",gap:1,wrap:!0,__next40pxDefaultSize,hasTokens:!!value.length,children:function renderTokensAndInput(){const components=value.map(renderToken);return components.splice(getIndexOfInput(),0,function renderInput(){const inputProps={instanceId,autoCapitalize,autoComplete,placeholder:0===value.length?placeholder:"",disabled,value:incompleteTokenValue,onBlur,isExpanded,selectedSuggestionIndex};return(0,jsx_runtime.jsx)(token_input.Ay,{...inputProps,onChange:maxLength&&value.length>=maxLength?void 0:onInputChangeHandler,ref:input},"input")}()),components}()}),isExpanded&&(0,jsx_runtime.jsx)(suggestions_list.A,{instanceId,match:saveTransform(incompleteTokenValue),displayTransform,suggestions:matchingSuggestions,selectedIndex:selectedSuggestionIndex,scrollIntoView:selectedSuggestionScroll,onHover:function onSuggestionHovered(suggestion){const index=getMatchingSuggestions().indexOf(suggestion);index>=0&&(setSelectedSuggestionIndex(index),setSelectedSuggestionScroll(!1))},onSelect:function onSuggestionSelected(suggestion){addNewToken(suggestion)},__experimentalRenderItem})]}),!__nextHasNoMarginBottom&&(0,jsx_runtime.jsx)(spacer_component.A,{marginBottom:2}),__experimentalShowHowTo&&(0,jsx_runtime.jsx)(base_control_styles.te,{id:`components-form-token-suggestions-howto-${instanceId}`,className:"components-form-token-field__help",__nextHasNoMarginBottom,children:tokenizeOnSpace?(0,build_module.__)("Separate with commas, spaces, or the Enter key."):(0,build_module.__)("Separate with commas or the Enter key.")})]})}},"./packages/components/build-module/form-token-field/suggestions-list.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const handleMouseDown=e=>{e.preventDefault()};const __WEBPACK_DEFAULT_EXPORT__=function SuggestionsList({selectedIndex,scrollIntoView,match,onHover,onSelect,suggestions=[],displayTransform,instanceId,__experimentalRenderItem}){const listRef=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__.A)((listNode=>(selectedIndex>-1&&scrollIntoView&&listNode.children[selectedIndex]&&listNode.children[selectedIndex].scrollIntoView({behavior:"instant",block:"nearest",inline:"nearest"}),()=>{0})),[selectedIndex,scrollIntoView]),handleHover=suggestion=>()=>{onHover?.(suggestion)},handleClick=suggestion=>()=>{onSelect?.(suggestion)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("ul",{ref:listRef,className:"components-form-token-field__suggestions-list",id:`components-form-token-suggestions-${instanceId}`,role:"listbox",children:[suggestions.map(((suggestion,index)=>{const matchText=(suggestion=>{const matchText=displayTransform(match).toLocaleLowerCase();if(0===matchText.length)return null;const transformedSuggestion=displayTransform(suggestion),indexOfMatch=transformedSuggestion.toLocaleLowerCase().indexOf(matchText);return{suggestionBeforeMatch:transformedSuggestion.substring(0,indexOfMatch),suggestionMatch:transformedSuggestion.substring(indexOfMatch,indexOfMatch+matchText.length),suggestionAfterMatch:transformedSuggestion.substring(indexOfMatch+matchText.length)}})(suggestion),isSelected=index===selectedIndex,isDisabled="object"==typeof suggestion&&suggestion?.disabled,key="object"==typeof suggestion&&"value"in suggestion?suggestion?.value:displayTransform(suggestion),className=(0,clsx__WEBPACK_IMPORTED_MODULE_3__.A)("components-form-token-field__suggestion",{"is-selected":isSelected});let output;return output="function"==typeof __experimentalRenderItem?__experimentalRenderItem({item:suggestion}):matchText?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("span",{"aria-label":displayTransform(suggestion),children:[matchText.suggestionBeforeMatch,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("strong",{className:"components-form-token-field__suggestion-match",children:matchText.suggestionMatch}),matchText.suggestionAfterMatch]}):displayTransform(suggestion),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("li",{id:`components-form-token-suggestions-${instanceId}-${index}`,role:"option",className,onMouseDown:handleMouseDown,onClick:handleClick(suggestion),onMouseEnter:handleHover(suggestion),"aria-selected":index===selectedIndex,"aria-disabled":isDisabled,children:output},key)})),0===suggestions.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("li",{className:"components-form-token-field__suggestion is-empty",children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("No items found")})]})}},"./packages/components/build-module/form-token-field/token-input.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((function UnForwardedTokenInput(props,ref){const{value,isExpanded,instanceId,selectedSuggestionIndex,className,onChange,onFocus,onBlur,...restProps}=props,[hasFocus,setHasFocus]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),size=value?value.length+1:0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{ref,id:`components-form-token-input-${instanceId}`,type:"text",...restProps,value:value||"",onChange:event=>{onChange&&onChange({value:event.target.value})},onFocus:e=>{setHasFocus(!0),onFocus?.(e)},onBlur:e=>{setHasFocus(!1),onBlur?.(e)},size,className:(0,clsx__WEBPACK_IMPORTED_MODULE_2__.A)(className,"components-form-token-field__input"),autoComplete:"off",role:"combobox","aria-expanded":isExpanded,"aria-autocomplete":"list","aria-owns":isExpanded?`components-form-token-suggestions-${instanceId}`:void 0,"aria-activedescendant":hasFocus&&-1!==selectedSuggestionIndex&&isExpanded?`components-form-token-suggestions-${instanceId}-${selectedSuggestionIndex}`:void 0,"aria-describedby":`components-form-token-suggestions-howto-${instanceId}`})}))},"./packages/components/build-module/gradient-picker/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_circular_option_picker__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/build-module/circular-option-picker/index.js"),_custom_gradient_picker__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/build-module/custom-gradient-picker/index.js"),_v_stack__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/build-module/v-stack/component.js"),_color_palette_styles__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/build-module/color-palette/styles.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const isMultipleOriginArray=arr=>arr.length>0&&arr.every((gradientObj=>{return obj=gradientObj,Array.isArray(obj.gradients)&&!("gradient"in obj);var obj}));function SingleOrigin({className,clearGradient,gradients,onChange,value,...additionalProps}){const gradientOptions=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>gradients.map((({gradient,name,slug},index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_circular_option_picker__WEBPACK_IMPORTED_MODULE_3__.Ay.Option,{value:gradient,isSelected:value===gradient,tooltipText:name||(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Gradient code: %s"),gradient),style:{color:"rgba( 0,0,0,0 )",background:gradient},onClick:value===gradient?clearGradient:()=>onChange(gradient,index),"aria-label":name?(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Gradient: %s"),name):(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Gradient code: %s"),gradient)},slug)))),[gradients,value,onChange,clearGradient]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_circular_option_picker__WEBPACK_IMPORTED_MODULE_3__.Ay.OptionGroup,{className,options:gradientOptions,...additionalProps})}function MultipleOrigin({className,clearGradient,gradients,onChange,value,headingLevel}){const instanceId=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_4__.A)(MultipleOrigin);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_v_stack__WEBPACK_IMPORTED_MODULE_5__.A,{spacing:3,className,children:gradients.map((({name,gradients:gradientSet},index)=>{const id=`color-palette-${instanceId}-${index}`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_v_stack__WEBPACK_IMPORTED_MODULE_5__.A,{spacing:2,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_color_palette_styles__WEBPACK_IMPORTED_MODULE_6__._,{level:headingLevel,id,children:name}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(SingleOrigin,{clearGradient,gradients:gradientSet,onChange:gradient=>onChange(gradient,index),value,"aria-labelledby":id})]},index)}))})}function Component(props){const{asButtons,loop,actions,headingLevel,"aria-label":ariaLabel,"aria-labelledby":ariaLabelledby,...additionalProps}=props,options=isMultipleOriginArray(props.gradients)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MultipleOrigin,{headingLevel,...additionalProps}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(SingleOrigin,{...additionalProps});let metaProps;if(asButtons)metaProps={asButtons:!0};else{const _metaProps={asButtons:!1,loop};metaProps=ariaLabel?{..._metaProps,"aria-label":ariaLabel}:ariaLabelledby?{..._metaProps,"aria-labelledby":ariaLabelledby}:{..._metaProps,"aria-label":(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Custom color picker.")}}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_circular_option_picker__WEBPACK_IMPORTED_MODULE_3__.Ay,{...metaProps,actions,options})}const __WEBPACK_DEFAULT_EXPORT__=function GradientPicker({className,gradients=[],onChange,value,clearable=!0,disableCustomGradients=!1,__experimentalIsRenderedInSidebar,headingLevel=2,...additionalProps}){const clearGradient=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useCallback)((()=>onChange(void 0)),[onChange]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_v_stack__WEBPACK_IMPORTED_MODULE_5__.A,{spacing:gradients.length?4:0,children:[!disableCustomGradients&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_custom_gradient_picker__WEBPACK_IMPORTED_MODULE_7__.A,{__experimentalIsRenderedInSidebar,value,onChange}),(gradients.length>0||clearable)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Component,{...additionalProps,className,clearGradient,gradients,onChange,value,actions:clearable&&!disableCustomGradients&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_circular_option_picker__WEBPACK_IMPORTED_MODULE_3__.Ay.ButtonAction,{onClick:clearGradient,children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Clear")}),headingLevel})]})}},"./packages/components/build-module/higher-order/with-spoken-messages/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_compose__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),_wordpress_a11y__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/a11y/build-module/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_2__.f)((Component=>props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(Component,{...props,speak:_wordpress_a11y__WEBPACK_IMPORTED_MODULE_0__.L,debouncedSpeak:(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__.A)(_wordpress_a11y__WEBPACK_IMPORTED_MODULE_0__.L,500)})),"withSpokenMessages")},"./packages/components/build-module/notice/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/element/build-module/serialize.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/element/build-module/raw-html.js"),_wordpress_a11y__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/a11y/build-module/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/icons/build-module/library/close.js"),_button__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/components/build-module/button/index.js"),_visually_hidden__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const noop=()=>{};function getDefaultPoliteness(status){switch(status){case"success":case"warning":case"info":return"polite";default:return"assertive"}}function getStatusLabel(status){switch(status){case"warning":return(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Warning notice");case"info":return(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Information notice");case"error":return(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Error notice");default:return(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Notice")}}const __WEBPACK_DEFAULT_EXPORT__=function Notice({className,status="info",children,spokenMessage=children,onRemove=noop,isDismissible=!0,actions=[],politeness=getDefaultPoliteness(status),__unstableHTML,onDismiss=noop}){!function useSpokenMessage(message,politeness){const spokenMessage="string"==typeof message?message:(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_3__.Ay)(message);(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{spokenMessage&&(0,_wordpress_a11y__WEBPACK_IMPORTED_MODULE_1__.L)(spokenMessage,politeness)}),[spokenMessage,politeness])}(spokenMessage,politeness);const classes=(0,clsx__WEBPACK_IMPORTED_MODULE_5__.A)(className,"components-notice","is-"+status,{"is-dismissible":isDismissible});return __unstableHTML&&"string"==typeof children&&(children=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__.A,{children})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:classes,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_visually_hidden__WEBPACK_IMPORTED_MODULE_7__.A,{children:getStatusLabel(status)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"components-notice__content",children:[children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"components-notice__actions",children:actions.map((({className:buttonCustomClasses,label,isPrimary,variant,noDefaultClasses=!1,onClick,url},index)=>{let computedVariant=variant;return"primary"===variant||noDefaultClasses||(computedVariant=url?"link":"secondary"),void 0===computedVariant&&isPrimary&&(computedVariant="primary"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_button__WEBPACK_IMPORTED_MODULE_8__.Ay,{href:url,variant:computedVariant,onClick:url?void 0:onClick,className:(0,clsx__WEBPACK_IMPORTED_MODULE_5__.A)("components-notice__action",buttonCustomClasses),children:label},index)}))})]}),isDismissible&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_button__WEBPACK_IMPORTED_MODULE_8__.Ay,{className:"components-notice__dismiss",icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__.A,label:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Close"),onClick:()=>{onDismiss(),onRemove()}})]})}},"./packages/components/build-module/panel/body.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/compose/build-module/hooks/use-reduced-motion/index.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/icons/build-module/library/chevron-up.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/icons/build-module/library/chevron-down.js"),_button__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/build-module/button/index.js"),_icon__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/components/build-module/icon/index.js"),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/build-module/utils/hooks/use-controlled-state.js"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/build-module/utils/hooks/use-update-effect.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const noop=()=>{};const PanelBodyTitle=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)((({isOpened,icon,title,...props},ref)=>title?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"components-panel__body-title",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_button__WEBPACK_IMPORTED_MODULE_7__.Ay,{className:"components-panel__body-toggle","aria-expanded":isOpened,ref,...props,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{"aria-hidden":"true",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_icon__WEBPACK_IMPORTED_MODULE_8__.A,{className:"components-panel__arrow",icon:isOpened?_wordpress_icons__WEBPACK_IMPORTED_MODULE_9__.A:_wordpress_icons__WEBPACK_IMPORTED_MODULE_10__.A})}),title,icon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_icon__WEBPACK_IMPORTED_MODULE_8__.A,{icon,className:"components-panel__icon",size:20})]})}):null)),__WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)((function UnforwardedPanelBody(props,ref){const{buttonProps={},children,className,icon,initialOpen,onToggle=noop,opened,title,scrollAfterOpen=!0}=props,[isOpened,setIsOpened]=(0,_utils__WEBPACK_IMPORTED_MODULE_1__.A)(opened,{initial:void 0===initialOpen||initialOpen,fallback:!1}),nodeRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useRef)(null),scrollBehavior=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__.A)()?"auto":"smooth",scrollAfterOpenRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.useRef)();scrollAfterOpenRef.current=scrollAfterOpen,(0,_utils__WEBPACK_IMPORTED_MODULE_4__.A)((()=>{isOpened&&scrollAfterOpenRef.current&&nodeRef.current?.scrollIntoView&&nodeRef.current.scrollIntoView({inline:"nearest",block:"nearest",behavior:scrollBehavior})}),[isOpened,scrollBehavior]);const classes=(0,clsx__WEBPACK_IMPORTED_MODULE_5__.A)("components-panel__body",className,{"is-opened":isOpened});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:classes,ref:(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_6__.A)([nodeRef,ref]),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PanelBodyTitle,{icon,isOpened:Boolean(isOpened),onClick:event=>{event.preventDefault();const next=!isOpened;setIsOpened(next),onToggle(next)},title,...buttonProps}),"function"==typeof children?children({opened:Boolean(isOpened)}):isOpened&&children]})}))},"./packages/components/build-module/panel/row.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_2__.forwardRef)((function UnforwardedPanelRow({className,children},ref){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_1__.A)("components-panel__row",className),ref,children})}))},"./packages/components/build-module/placeholder/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/compose/build-module/hooks/use-resize-observer/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/index.js"),_wordpress_a11y__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/a11y/build-module/index.js"),_icon__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/build-module/icon/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const PlaceholderIllustration=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_2__.t4,{className:"components-placeholder__illustration",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 60 60",preserveAspectRatio:"none",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_2__.wA,{vectorEffect:"non-scaling-stroke",d:"M60 60 0 0"})});const __WEBPACK_DEFAULT_EXPORT__=function Placeholder(props){const{icon,children,label,instructions,className,notices,preview,isColumnLayout,withIllustration,...additionalProps}=props,[resizeListener,{width}]=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_3__.A)();let modifierClassNames;"number"==typeof width&&(modifierClassNames={"is-large":width>=480,"is-medium":width>=160&&width<480,"is-small":width<160});const classes=(0,clsx__WEBPACK_IMPORTED_MODULE_4__.A)("components-placeholder",className,modifierClassNames,withIllustration?"has-illustration":null),fieldsetClasses=(0,clsx__WEBPACK_IMPORTED_MODULE_4__.A)("components-placeholder__fieldset",{"is-column-layout":isColumnLayout});return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_5__.useEffect)((()=>{instructions&&(0,_wordpress_a11y__WEBPACK_IMPORTED_MODULE_0__.L)(instructions)}),[instructions]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{...additionalProps,className:classes,children:[withIllustration?PlaceholderIllustration:null,resizeListener,notices,preview&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"components-placeholder__preview",children:preview}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"components-placeholder__label",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_icon__WEBPACK_IMPORTED_MODULE_6__.A,{icon}),label]}),!!instructions&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"components-placeholder__instructions",children:instructions}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:fieldsetClasses,children})]})}},"./packages/components/build-module/resizable-box/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>resizable_box});var react=__webpack_require__("./node_modules/react/index.js"),clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),lib=__webpack_require__("./node_modules/re-resizable/lib/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),use_resize_observer=__webpack_require__("./packages/compose/build-module/hooks/use-resize-observer/index.js");const noop=()=>{},POSITIONS={bottom:"bottom",corner:"corner"};function useResizeLabel({axis,fadeTimeout=180,onResize=noop,position=POSITIONS.bottom,showPx=!1}){const[resizeListener,sizes]=(0,use_resize_observer.A)(),isAxisControlled=!!axis,[moveX,setMoveX]=(0,react.useState)(!1),[moveY,setMoveY]=(0,react.useState)(!1),{width,height}=sizes,heightRef=(0,react.useRef)(height),widthRef=(0,react.useRef)(width),moveTimeoutRef=(0,react.useRef)(),debounceUnsetMoveXY=(0,react.useCallback)((()=>{moveTimeoutRef.current&&window.clearTimeout(moveTimeoutRef.current),moveTimeoutRef.current=window.setTimeout((()=>{isAxisControlled||(setMoveX(!1),setMoveY(!1))}),fadeTimeout)}),[fadeTimeout,isAxisControlled]);(0,react.useEffect)((()=>{if(!(null!==width||null!==height))return;const didWidthChange=width!==widthRef.current,didHeightChange=height!==heightRef.current;if(didWidthChange||didHeightChange){if(width&&!widthRef.current&&height&&!heightRef.current)return widthRef.current=width,void(heightRef.current=height);didWidthChange&&(setMoveX(!0),widthRef.current=width),didHeightChange&&(setMoveY(!0),heightRef.current=height),onResize({width,height}),debounceUnsetMoveXY()}}),[width,height,onResize,debounceUnsetMoveXY]);const label=function getSizeLabel({axis,height,moveX=!1,moveY=!1,position=POSITIONS.bottom,showPx=!1,width}){if(!moveX&&!moveY)return;if(position===POSITIONS.corner)return`${width} x ${height}`;const labelUnit=showPx?" px":"";if(axis){if("x"===axis&&moveX)return`${width}${labelUnit}`;if("y"===axis&&moveY)return`${height}${labelUnit}`}if(moveX&&moveY)return`${width} x ${height}`;if(moveX)return`${width}${labelUnit}`;if(moveY)return`${height}${labelUnit}`;return}({axis,height,moveX,moveY,position,showPx,width});return{label,resizeListener}}var emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),component=__webpack_require__("./packages/components/build-module/text/component.js"),colors_values=__webpack_require__("./packages/components/build-module/utils/colors-values.js"),config_values=__webpack_require__("./packages/components/build-module/utils/config-values.js"),font=__webpack_require__("./packages/components/build-module/utils/font.js");const Root=(0,emotion_styled_base_browser_esm.A)("div",{target:"e1wq7y4k3"})({name:"1cd7zoc",styles:"bottom:0;box-sizing:border-box;left:0;pointer-events:none;position:absolute;right:0;top:0"}),TooltipWrapper=(0,emotion_styled_base_browser_esm.A)("div",{target:"e1wq7y4k2"})({name:"ajymcs",styles:"align-items:center;box-sizing:border-box;display:inline-flex;justify-content:center;opacity:0;pointer-events:none;transition:opacity 120ms linear"}),Tooltip=(0,emotion_styled_base_browser_esm.A)("div",{target:"e1wq7y4k1"})("background:",colors_values.l.theme.foreground,";border-radius:",config_values.A.radiusSmall,";box-sizing:border-box;font-family:",(0,font.g)("default.fontFamily"),";font-size:12px;color:",colors_values.l.theme.foregroundInverted,";padding:4px 8px;position:relative;"),LabelText=(0,emotion_styled_base_browser_esm.A)(component.A,{target:"e1wq7y4k0"})("&&&{color:",colors_values.l.theme.foregroundInverted,";display:block;font-size:13px;line-height:1.4;white-space:nowrap;}");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const resize_tooltip_label=(0,react.forwardRef)((function Label({label,position=POSITIONS.corner,zIndex=1e3,...props},ref){const showLabel=!!label,isBottom=position===POSITIONS.bottom,isCorner=position===POSITIONS.corner;if(!showLabel)return null;let style={opacity:showLabel?1:void 0,zIndex},labelStyle={};return isBottom&&(style={...style,position:"absolute",bottom:-10,left:"50%",transform:"translate(-50%, 0)"},labelStyle={transform:"translate(0, 100%)"}),isCorner&&(style={...style,position:"absolute",top:4,right:(0,build_module.V8)()?void 0:4,left:(0,build_module.V8)()?4:void 0}),(0,jsx_runtime.jsx)(TooltipWrapper,{"aria-hidden":"true",className:"components-resizable-tooltip__tooltip-wrapper",ref,style,...props,children:(0,jsx_runtime.jsx)(Tooltip,{className:"components-resizable-tooltip__tooltip",style:labelStyle,children:(0,jsx_runtime.jsx)(LabelText,{as:"span",children:label})})})})),resize_tooltip_noop=()=>{};const resize_tooltip=(0,react.forwardRef)((function ResizeTooltip({axis,className,fadeTimeout=180,isVisible=!0,labelRef,onResize=resize_tooltip_noop,position=POSITIONS.bottom,showPx=!0,zIndex=1e3,...props},ref){const{label,resizeListener}=useResizeLabel({axis,fadeTimeout,onResize,showPx,position});if(!isVisible)return null;const classes=(0,clsx.A)("components-resize-tooltip",className);return(0,jsx_runtime.jsxs)(Root,{"aria-hidden":"true",className:classes,ref,...props,children:[resizeListener,(0,jsx_runtime.jsx)(resize_tooltip_label,{"aria-hidden":props["aria-hidden"],label,position,ref:labelRef,zIndex})]})})),HANDLE_CLASS_NAME="components-resizable-box__handle",SIDE_HANDLE_CLASS_NAME="components-resizable-box__side-handle",CORNER_HANDLE_CLASS_NAME="components-resizable-box__corner-handle",HANDLE_CLASSES={top:(0,clsx.A)(HANDLE_CLASS_NAME,SIDE_HANDLE_CLASS_NAME,"components-resizable-box__handle-top"),right:(0,clsx.A)(HANDLE_CLASS_NAME,SIDE_HANDLE_CLASS_NAME,"components-resizable-box__handle-right"),bottom:(0,clsx.A)(HANDLE_CLASS_NAME,SIDE_HANDLE_CLASS_NAME,"components-resizable-box__handle-bottom"),left:(0,clsx.A)(HANDLE_CLASS_NAME,SIDE_HANDLE_CLASS_NAME,"components-resizable-box__handle-left"),topLeft:(0,clsx.A)(HANDLE_CLASS_NAME,CORNER_HANDLE_CLASS_NAME,"components-resizable-box__handle-top","components-resizable-box__handle-left"),topRight:(0,clsx.A)(HANDLE_CLASS_NAME,CORNER_HANDLE_CLASS_NAME,"components-resizable-box__handle-top","components-resizable-box__handle-right"),bottomRight:(0,clsx.A)(HANDLE_CLASS_NAME,CORNER_HANDLE_CLASS_NAME,"components-resizable-box__handle-bottom","components-resizable-box__handle-right"),bottomLeft:(0,clsx.A)(HANDLE_CLASS_NAME,CORNER_HANDLE_CLASS_NAME,"components-resizable-box__handle-bottom","components-resizable-box__handle-left")},HANDLE_STYLES_OVERRIDES={width:void 0,height:void 0,top:void 0,right:void 0,bottom:void 0,left:void 0},HANDLE_STYLES={top:HANDLE_STYLES_OVERRIDES,right:HANDLE_STYLES_OVERRIDES,bottom:HANDLE_STYLES_OVERRIDES,left:HANDLE_STYLES_OVERRIDES,topLeft:HANDLE_STYLES_OVERRIDES,topRight:HANDLE_STYLES_OVERRIDES,bottomRight:HANDLE_STYLES_OVERRIDES,bottomLeft:HANDLE_STYLES_OVERRIDES};const resizable_box=(0,react.forwardRef)((function UnforwardedResizableBox({className,children,showHandle=!0,__experimentalShowTooltip:showTooltip=!1,__experimentalTooltipProps:tooltipProps={},...props},ref){return(0,jsx_runtime.jsxs)(lib.c,{className:(0,clsx.A)("components-resizable-box__container",showHandle&&"has-show-handle",className),handleClasses:HANDLE_CLASSES,handleStyles:HANDLE_STYLES,ref,...props,children:[children,showTooltip&&(0,jsx_runtime.jsx)(resize_tooltip,{...tooltipProps})]})}))},"./packages/components/build-module/textarea-control/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>textarea_control});var use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),react=__webpack_require__("./node_modules/react/index.js"),base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),font=__webpack_require__("./packages/components/build-module/utils/font.js"),colors_values=__webpack_require__("./packages/components/build-module/utils/colors-values.js"),config_values=__webpack_require__("./packages/components/build-module/utils/config-values.js");const breakpoint_values={huge:"1440px",wide:"1280px","x-large":"1080px",large:"960px",medium:"782px",small:"600px",mobile:"480px","zoomed-in":"280px"},inputStyleNeutral=(0,emotion_react_browser_esm.AH)("box-shadow:0 0 0 transparent;border-radius:",config_values.A.radiusSmall,";border:",config_values.A.borderWidth," solid ",colors_values.l.ui.border,";@media not ( prefers-reduced-motion ){transition:box-shadow 0.1s linear;}","","",""),inputStyleFocus=(0,emotion_react_browser_esm.AH)("border-color:",colors_values.l.theme.accent,";box-shadow:0 0 0 calc( ",config_values.A.borderWidthFocus," - ",config_values.A.borderWidth," ) ",colors_values.l.theme.accent,";outline:2px solid transparent;","","",""),StyledTextarea=(0,emotion_styled_base_browser_esm.A)("textarea",{target:"e1w5nnrk0"})("width:100%;display:block;font-family:",(0,font.g)("default.fontFamily"),";line-height:20px;padding:9px 11px;",inputStyleNeutral,";font-size:",(0,font.g)("mobileTextMinFontSize"),";",`@media (min-width: ${breakpoint_values["small"]})`,"{font-size:",(0,font.g)("default.fontSize"),";}&:focus{",inputStyleFocus,";}&::-webkit-input-placeholder{color:",colors_values.l.ui.darkGrayPlaceholder,";}&::-moz-placeholder{opacity:1;color:",colors_values.l.ui.darkGrayPlaceholder,";}&:-ms-input-placeholder{color:",colors_values.l.ui.darkGrayPlaceholder,";}.is-dark-theme &{&::-webkit-input-placeholder{color:",colors_values.l.ui.lightGrayPlaceholder,";}&::-moz-placeholder{opacity:1;color:",colors_values.l.ui.lightGrayPlaceholder,";}&:-ms-input-placeholder{color:",colors_values.l.ui.lightGrayPlaceholder,";}}");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const TextareaControl=(0,react.forwardRef)((function UnforwardedTextareaControl(props,ref){const{__nextHasNoMarginBottom,label,hideLabelFromVision,value,help,onChange,rows=4,className,...additionalProps}=props,id=`inspector-textarea-control-${(0,use_instance_id.A)(TextareaControl)}`;return(0,jsx_runtime.jsx)(base_control.Ay,{__nextHasNoMarginBottom,__associatedWPComponentName:"TextareaControl",label,hideLabelFromVision,id,help,className,children:(0,jsx_runtime.jsx)(StyledTextarea,{className:"components-textarea-control__input",id,rows,onChange:event=>onChange(event.target.value),"aria-describedby":help?id+"__help":void 0,value,ref,...additionalProps})})})),textarea_control=TextareaControl},"./packages/components/build-module/toolbar/toolbar/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>toolbar_toolbar});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react=__webpack_require__("./node_modules/react/index.js"),build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),toolbar_group=__webpack_require__("./packages/components/build-module/toolbar/toolbar-group/index.js"),GO2SPXQX=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/__chunks/GO2SPXQX.js"),toolbar=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/toolbar/toolbar.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),toolbar_context=__webpack_require__("./packages/components/build-module/toolbar/toolbar-context/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const toolbar_container=(0,react.forwardRef)((function UnforwardedToolbarContainer({label,...props},ref){const toolbarStore=GO2SPXQX.W({focusLoop:!0,rtl:(0,i18n_build_module.V8)()});return(0,jsx_runtime.jsx)(toolbar_context.A.Provider,{value:toolbarStore,children:(0,jsx_runtime.jsx)(toolbar.M,{ref,"aria-label":label,store:toolbarStore,...props})})}));var context_system_provider=__webpack_require__("./packages/components/build-module/context/context-system-provider.js");const toolbar_toolbar=(0,react.forwardRef)((function UnforwardedToolbar({className,label,variant,...props},ref){const isVariantDefined=void 0!==variant,contextSystemValue=(0,react.useMemo)((()=>isVariantDefined?{}:{DropdownMenu:{variant:"toolbar"},Dropdown:{variant:"toolbar"}}),[isVariantDefined]);if(!label){(0,build_module.A)("Using Toolbar without label prop",{since:"5.6",alternative:"ToolbarGroup component",link:"https://developer.wordpress.org/block-editor/components/toolbar/"});const{title:_title,...restProps}=props;return(0,jsx_runtime.jsx)(toolbar_group.A,{isCollapsed:!1,...restProps,className})}const finalClassName=(0,clsx.A)("components-accessible-toolbar",className,variant&&`is-${variant}`);return(0,jsx_runtime.jsx)(context_system_provider.c7,{value:contextSystemValue,children:(0,jsx_runtime.jsx)(toolbar_container,{className:finalClassName,label,ref,...props})})}))},"./packages/components/build-module/tree-select/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js"),_wordpress_html_entities__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/html-entities/build-module/index.js"),_select_control__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/build-module/select-control/index.js"),_utils_use_deprecated_props__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/utils/use-deprecated-props.js"),_context__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/build-module/context/context-system-provider.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const CONTEXT_VALUE={BaseControl:{_overrides:{__associatedWPComponentName:"TreeSelect"}}};function getSelectOptions(tree,level=0){return tree.flatMap((treeNode=>[{value:treeNode.id,label:" ".repeat(3*level)+(0,_wordpress_html_entities__WEBPACK_IMPORTED_MODULE_1__.S)(treeNode.name)},...getSelectOptions(treeNode.children||[],level+1)]))}const __WEBPACK_DEFAULT_EXPORT__=function TreeSelect(props){const{label,noOptionLabel,onChange,selectedId,tree=[],...restProps}=(0,_utils_use_deprecated_props__WEBPACK_IMPORTED_MODULE_2__.R)(props),options=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_3__.useMemo)((()=>[noOptionLabel&&{value:"",label:noOptionLabel},...getSelectOptions(tree)].filter((option=>!!option))),[noOptionLabel,tree]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_context__WEBPACK_IMPORTED_MODULE_4__.c7,{value:CONTEXT_VALUE,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_select_control__WEBPACK_IMPORTED_MODULE_5__.Y,{label,options,onChange,value:selectedId,...restProps})})}},"./packages/components/build-module/z-stack/component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>component});var react=__webpack_require__("./node_modules/react/index.js"),get_valid_children=__webpack_require__("./packages/components/build-module/utils/get-valid-children.js"),use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js"),context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js");const ZStackChildView=(0,emotion_styled_base_browser_esm.A)("div",{target:"ebn2ljm1"})("&:not( :first-of-type ){",(({offsetAmount})=>(0,emotion_react_browser_esm.AH)({marginInlineStart:offsetAmount},"","","","")),";}",(({zIndex})=>(0,emotion_react_browser_esm.AH)({zIndex},"","","","")),";");var _ref={name:"rs0gp6",styles:"grid-row-start:1;grid-column-start:1"};const ZStackView=(0,emotion_styled_base_browser_esm.A)("div",{target:"ebn2ljm0"})("display:inline-grid;grid-auto-flow:column;position:relative;&>",ZStackChildView,"{position:relative;justify-self:start;",(({isLayered})=>isLayered?_ref:void 0),";}");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const component=(0,context_connect.KZ)((function UnconnectedZStack(props,forwardedRef){const{children,className,isLayered=!0,isReversed=!1,offset=0,...otherProps}=(0,use_context_system.A)(props,"ZStack"),validChildren=(0,get_valid_children.a)(children),childrenLastIndex=validChildren.length-1,clonedChildren=validChildren.map(((child,index)=>{const zIndex=isReversed?childrenLastIndex-index:index,offsetAmount=isLayered?offset*index:offset,key=(0,react.isValidElement)(child)?child.key:index;return(0,jsx_runtime.jsx)(ZStackChildView,{offsetAmount,zIndex,children:child},key)}));return(0,jsx_runtime.jsx)(ZStackView,{...otherProps,className,isLayered,ref:forwardedRef,children:clonedChildren})}),"ZStack")},"./packages/compose/build-module/higher-order/with-instance-id/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _utils_create_higher_order_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),_hooks_use_instance_id__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_utils_create_higher_order_component__WEBPACK_IMPORTED_MODULE_1__.f)((WrappedComponent=>props=>{const instanceId=(0,_hooks_use_instance_id__WEBPACK_IMPORTED_MODULE_2__.A)(WrappedComponent);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(WrappedComponent,{...props,instanceId})}),"instanceId")},"./packages/compose/build-module/higher-order/with-safe-timeout/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_utils_create_higher_order_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_utils_create_higher_order_component__WEBPACK_IMPORTED_MODULE_1__.f)((OriginalComponent=>class WrappedComponent extends _wordpress_element__WEBPACK_IMPORTED_MODULE_2__.Component{constructor(props){super(props),this.timeouts=[],this.setTimeout=this.setTimeout.bind(this),this.clearTimeout=this.clearTimeout.bind(this)}componentWillUnmount(){this.timeouts.forEach(clearTimeout)}setTimeout(fn,delay){const id=setTimeout((()=>{fn(),this.clearTimeout(id)}),delay);return this.timeouts.push(id),id}clearTimeout(id){clearTimeout(id),this.timeouts=this.timeouts.filter((timeoutId=>timeoutId!==id))}render(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OriginalComponent,{...this.props,setTimeout:this.setTimeout,clearTimeout:this.clearTimeout})}}),"withSafeTimeout")},"./packages/compose/build-module/hooks/use-copy-to-clipboard/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useCopyToClipboard});var clipboard__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/compose/node_modules/clipboard/dist/clipboard.js"),clipboard__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(clipboard__WEBPACK_IMPORTED_MODULE_0__),_wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_use_ref_effect__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js");function useUpdatedRef(value){const ref=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.useRef)(value);return ref.current=value,ref}function useCopyToClipboard(text,onSuccess){const textRef=useUpdatedRef(text),onSuccessRef=useUpdatedRef(onSuccess);return(0,_use_ref_effect__WEBPACK_IMPORTED_MODULE_2__.A)((node=>{const clipboard=new(clipboard__WEBPACK_IMPORTED_MODULE_0___default())(node,{text:()=>"function"==typeof textRef.current?textRef.current():textRef.current||""});return clipboard.on("success",(({clearSelection})=>{clearSelection(),onSuccessRef.current&&onSuccessRef.current()})),()=>{clipboard.destroy()}}),[])}},"./packages/compose/build-module/hooks/use-dragging/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>useDragging});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_use_isomorphic_layout_effect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/hooks/use-isomorphic-layout-effect/index.js");function useDragging({onDragStart,onDragMove,onDragEnd}){const[isDragging,setIsDragging]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),eventsRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)({onDragStart,onDragMove,onDragEnd});(0,_use_isomorphic_layout_effect__WEBPACK_IMPORTED_MODULE_1__.A)((()=>{eventsRef.current.onDragStart=onDragStart,eventsRef.current.onDragMove=onDragMove,eventsRef.current.onDragEnd=onDragEnd}),[onDragStart,onDragMove,onDragEnd]);const onMouseMove=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>eventsRef.current.onDragMove&&eventsRef.current.onDragMove(event)),[]),endDrag=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>{eventsRef.current.onDragEnd&&eventsRef.current.onDragEnd(event),document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",endDrag),setIsDragging(!1)}),[]),startDrag=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((event=>{eventsRef.current.onDragStart&&eventsRef.current.onDragStart(event),document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",endDrag),setIsDragging(!0)}),[]);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>()=>{isDragging&&(document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",endDrag))}),[isDragging]),{startDrag,endDrag,isDragging}}},"./packages/core-data/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{XU:()=>EntityProvider,Y3:()=>fetchLinkSuggestions,gr:()=>_experimental_fetch_url_data,M_:()=>store,hg:()=>useEntityBlockEditor,mV:()=>useEntityId,S$:()=>useEntityProp,MA:()=>useEntityRecord,$u:()=>useEntityRecords,qs:()=>use_resource_permissions});var build_module_actions_namespaceObject={};__webpack_require__.r(build_module_actions_namespaceObject),__webpack_require__.d(build_module_actions_namespaceObject,{__experimentalBatch:()=>__experimentalBatch,__experimentalReceiveCurrentGlobalStylesId:()=>__experimentalReceiveCurrentGlobalStylesId,__experimentalReceiveThemeBaseGlobalStyles:()=>__experimentalReceiveThemeBaseGlobalStyles,__experimentalReceiveThemeGlobalStyleVariations:()=>__experimentalReceiveThemeGlobalStyleVariations,__experimentalSaveSpecifiedEntityEdits:()=>__experimentalSaveSpecifiedEntityEdits,__unstableCreateUndoLevel:()=>__unstableCreateUndoLevel,addEntities:()=>addEntities,deleteEntityRecord:()=>deleteEntityRecord,editEntityRecord:()=>editEntityRecord,receiveAutosaves:()=>receiveAutosaves,receiveCurrentTheme:()=>receiveCurrentTheme,receiveCurrentUser:()=>receiveCurrentUser,receiveDefaultTemplateId:()=>receiveDefaultTemplateId,receiveEmbedPreview:()=>receiveEmbedPreview,receiveEntityRecords:()=>receiveEntityRecords,receiveNavigationFallbackId:()=>receiveNavigationFallbackId,receiveRevisions:()=>receiveRevisions,receiveThemeGlobalStyleRevisions:()=>receiveThemeGlobalStyleRevisions,receiveThemeSupports:()=>receiveThemeSupports,receiveUploadPermissions:()=>receiveUploadPermissions,receiveUserPermission:()=>receiveUserPermission,receiveUserPermissions:()=>receiveUserPermissions,receiveUserQuery:()=>receiveUserQuery,redo:()=>redo,saveEditedEntityRecord:()=>saveEditedEntityRecord,saveEntityRecord:()=>saveEntityRecord,undo:()=>undo});var build_module_selectors_namespaceObject={};__webpack_require__.r(build_module_selectors_namespaceObject),__webpack_require__.d(build_module_selectors_namespaceObject,{__experimentalGetCurrentGlobalStylesId:()=>__experimentalGetCurrentGlobalStylesId,__experimentalGetCurrentThemeBaseGlobalStyles:()=>__experimentalGetCurrentThemeBaseGlobalStyles,__experimentalGetCurrentThemeGlobalStylesVariations:()=>__experimentalGetCurrentThemeGlobalStylesVariations,__experimentalGetDirtyEntityRecords:()=>__experimentalGetDirtyEntityRecords,__experimentalGetEntitiesBeingSaved:()=>__experimentalGetEntitiesBeingSaved,__experimentalGetEntityRecordNoResolver:()=>__experimentalGetEntityRecordNoResolver,__experimentalGetTemplateForLink:()=>__experimentalGetTemplateForLink,canUser:()=>canUser,canUserEditEntityRecord:()=>canUserEditEntityRecord,getAuthors:()=>getAuthors,getAutosave:()=>getAutosave,getAutosaves:()=>getAutosaves,getBlockPatternCategories:()=>getBlockPatternCategories,getBlockPatterns:()=>getBlockPatterns,getCurrentTheme:()=>getCurrentTheme,getCurrentThemeGlobalStylesRevisions:()=>getCurrentThemeGlobalStylesRevisions,getCurrentUser:()=>getCurrentUser,getDefaultTemplateId:()=>getDefaultTemplateId,getEditedEntityRecord:()=>getEditedEntityRecord,getEmbedPreview:()=>getEmbedPreview,getEntitiesByKind:()=>getEntitiesByKind,getEntitiesConfig:()=>getEntitiesConfig,getEntity:()=>getEntity,getEntityConfig:()=>getEntityConfig,getEntityRecord:()=>getEntityRecord,getEntityRecordEdits:()=>getEntityRecordEdits,getEntityRecordNonTransientEdits:()=>getEntityRecordNonTransientEdits,getEntityRecords:()=>getEntityRecords,getEntityRecordsTotalItems:()=>getEntityRecordsTotalItems,getEntityRecordsTotalPages:()=>getEntityRecordsTotalPages,getLastEntityDeleteError:()=>getLastEntityDeleteError,getLastEntitySaveError:()=>getLastEntitySaveError,getRawEntityRecord:()=>getRawEntityRecord,getRedoEdit:()=>getRedoEdit,getReferenceByDistinctEdits:()=>getReferenceByDistinctEdits,getRevision:()=>getRevision,getRevisions:()=>getRevisions,getThemeSupports:()=>getThemeSupports,getUndoEdit:()=>getUndoEdit,getUserPatternCategories:()=>getUserPatternCategories,getUserQueryResults:()=>getUserQueryResults,hasEditsForEntityRecord:()=>hasEditsForEntityRecord,hasEntityRecords:()=>hasEntityRecords,hasFetchedAutosaves:()=>hasFetchedAutosaves,hasRedo:()=>hasRedo,hasUndo:()=>hasUndo,isAutosavingEntityRecord:()=>isAutosavingEntityRecord,isDeletingEntityRecord:()=>isDeletingEntityRecord,isPreviewEmbedFallback:()=>isPreviewEmbedFallback,isRequestingEmbedPreview:()=>isRequestingEmbedPreview,isSavingEntityRecord:()=>isSavingEntityRecord});var private_selectors_namespaceObject={};__webpack_require__.r(private_selectors_namespaceObject),__webpack_require__.d(private_selectors_namespaceObject,{getBlockPatternsForPostType:()=>getBlockPatternsForPostType,getEntityRecordPermissions:()=>getEntityRecordPermissions,getEntityRecordsPermissions:()=>getEntityRecordsPermissions,getNavigationFallbackId:()=>getNavigationFallbackId,getRegisteredPostMeta:()=>getRegisteredPostMeta,getUndoManager:()=>getUndoManager});var private_actions_namespaceObject={};__webpack_require__.r(private_actions_namespaceObject),__webpack_require__.d(private_actions_namespaceObject,{receiveRegisteredPostMeta:()=>receiveRegisteredPostMeta});var resolvers_namespaceObject={};__webpack_require__.r(resolvers_namespaceObject),__webpack_require__.d(resolvers_namespaceObject,{__experimentalGetCurrentGlobalStylesId:()=>resolvers_experimentalGetCurrentGlobalStylesId,__experimentalGetCurrentThemeBaseGlobalStyles:()=>resolvers_experimentalGetCurrentThemeBaseGlobalStyles,__experimentalGetCurrentThemeGlobalStylesVariations:()=>resolvers_experimentalGetCurrentThemeGlobalStylesVariations,__experimentalGetTemplateForLink:()=>resolvers_experimentalGetTemplateForLink,canUser:()=>resolvers_canUser,canUserEditEntityRecord:()=>resolvers_canUserEditEntityRecord,getAuthors:()=>resolvers_getAuthors,getAutosave:()=>resolvers_getAutosave,getAutosaves:()=>resolvers_getAutosaves,getBlockPatternCategories:()=>resolvers_getBlockPatternCategories,getBlockPatterns:()=>resolvers_getBlockPatterns,getCurrentTheme:()=>resolvers_getCurrentTheme,getCurrentThemeGlobalStylesRevisions:()=>resolvers_getCurrentThemeGlobalStylesRevisions,getCurrentUser:()=>resolvers_getCurrentUser,getDefaultTemplateId:()=>resolvers_getDefaultTemplateId,getEditedEntityRecord:()=>resolvers_getEditedEntityRecord,getEmbedPreview:()=>resolvers_getEmbedPreview,getEntityRecord:()=>resolvers_getEntityRecord,getEntityRecords:()=>resolvers_getEntityRecords,getNavigationFallbackId:()=>resolvers_getNavigationFallbackId,getRawEntityRecord:()=>resolvers_getRawEntityRecord,getRegisteredPostMeta:()=>resolvers_getRegisteredPostMeta,getRevision:()=>resolvers_getRevision,getRevisions:()=>resolvers_getRevisions,getThemeSupports:()=>resolvers_getThemeSupports,getUserPatternCategories:()=>resolvers_getUserPatternCategories});var redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),build_module=__webpack_require__("./packages/data/build-module/index.js"),es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),undo_manager_build_module=__webpack_require__("./packages/undo-manager/build-module/index.js");const if_matching_action=isMatch=>reducer=>(state,action)=>void 0===state||isMatch(action)?reducer(state,action):state,replace_action=replacer=>reducer=>(state,action)=>reducer(state,replacer(action));const on_sub_key=actionProperty=>reducer=>(state={},action)=>{const key=action[actionProperty];if(void 0===key)return state;const nextKeyState=reducer(state[key],action);return nextKeyState===state[key]?state:{...state,[key]:nextKeyState}};var dist_es2015=__webpack_require__("./node_modules/capital-case/dist.es2015/index.js"),pascal_case_dist_es2015=__webpack_require__("./node_modules/pascal-case/dist.es2015/index.js"),api_fetch_build_module=__webpack_require__("./packages/api-fetch/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),rich_text_build_module=__webpack_require__("./packages/rich-text/build-module/index.js"),v4=__webpack_require__("./packages/core-data/node_modules/uuid/dist/esm-browser/v4.js"),add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js");function setNestedValue(object,path,value){if(!object||"object"!=typeof object)return object;const normalizedPath=Array.isArray(path)?path:path.split(".");return normalizedPath.reduce(((acc,key,idx)=>(void 0===acc[key]&&(Number.isInteger(normalizedPath[idx+1])?acc[key]=[]:acc[key]={}),idx===normalizedPath.length-1&&(acc[key]=value),acc[key])),object),object}function getNestedValue(object,path,defaultValue){if(!object||"object"!=typeof object||"string"!=typeof path&&!Array.isArray(path))return object;const normalizedPath=Array.isArray(path)?path:path.split(".");let value=object;return normalizedPath.forEach((fieldName=>{value=value?.[fieldName]})),void 0!==value?value:defaultValue}function receiveItems(items,edits,meta){return{type:"RECEIVE_ITEMS",items:Array.isArray(items)?items:[items],persistedEdits:edits,meta}}let maxItems=null;async function defaultProcessor(requests){if(null===maxItems){const preflightResponse=await(0,api_fetch_build_module.A)({path:"/batch/v1",method:"OPTIONS"});maxItems=preflightResponse.endpoints[0].args.requests.maxItems}const results=[];for(const batchRequests of function chunk(arr,chunkSize){const tmp=[...arr],cache=[];for(;tmp.length;)cache.push(tmp.splice(0,chunkSize));return cache}(requests,maxItems)){const batchResponse=await(0,api_fetch_build_module.A)({path:"/batch/v1",method:"POST",data:{validation:"require-all-validate",requests:batchRequests.map((request=>({path:request.path,body:request.data,method:request.method,headers:request.headers})))}});let batchResults;batchResults=batchResponse.failed?batchResponse.responses.map((response=>({error:response?.body}))):batchResponse.responses.map((response=>{const result={};return response.status>=200&&response.status<300?result.output=response.body:result.error=response.body,result})),results.push(...batchResults)}return results}function createBatch(processor=defaultProcessor){let lastId=0,queue=[];const pending=new ObservableSet;return{add(inputOrThunk){const id=++lastId;pending.add(id);const add=input=>new Promise(((resolve,reject)=>{queue.push({input,resolve,reject}),pending.delete(id)}));return"function"==typeof inputOrThunk?Promise.resolve(inputOrThunk(add)).finally((()=>{pending.delete(id)})):add(inputOrThunk)},async run(){let results;pending.size&&await new Promise((resolve=>{const unsubscribe=pending.subscribe((()=>{pending.size||(unsubscribe(),resolve(void 0))}))}));try{if(results=await processor(queue.map((({input})=>input))),results.length!==queue.length)throw new Error("run: Array returned by processor must be same size as input array.")}catch(error){for(const{reject}of queue)reject(error);throw error}let isSuccess=!0;return results.forEach(((result,key)=>{const queueItem=queue[key];var _result$output;result?.error?(queueItem?.reject(result.error),isSuccess=!1):queueItem?.resolve(null!==(_result$output=result?.output)&&void 0!==_result$output?_result$output:result)})),queue=[],isSuccess}}}class ObservableSet{constructor(...args){this.set=new Set(...args),this.subscribers=new Set}get size(){return this.set.size}add(value){return this.set.add(value),this.subscribers.forEach((subscriber=>subscriber())),this}delete(value){const isSuccess=this.set.delete(value);return this.subscribers.forEach((subscriber=>subscriber())),isSuccess}subscribe(subscriber){return this.subscribers.add(subscriber),()=>{this.subscribers.delete(subscriber)}}}const STORE_NAME="core";var yjs=__webpack_require__("./node_modules/yjs/dist/yjs.mjs");const createSyncProvider=(connectLocal,connectRemote)=>{const config={},listeners={},docs={};return{register:function register(objectType,objectConfig){config[objectType]=objectConfig},bootstrap:async function bootstrap(objectType,objectId,handleChanges){const doc=new yjs.JA;docs[objectType]=docs[objectType]||{},docs[objectType][objectId]=doc;const updateHandler=()=>{const data=config[objectType].fromCRDTDoc(doc);handleChanges(data)};doc.on("update",updateHandler);const destroyLocalConnection=await connectLocal(objectId,objectType,doc);connectRemote&&await connectRemote(objectId,objectType,doc);const loadRemotely=config[objectType].fetch;loadRemotely&&loadRemotely(objectId).then((data=>{doc.transact((()=>{config[objectType].applyChangesToDoc(doc,data)}))})),listeners[objectType]=listeners[objectType]||{},listeners[objectType][objectId]=()=>{destroyLocalConnection(),doc.off("update",updateHandler)}},update:async function update(objectType,objectId,data){const doc=docs[objectType][objectId];if(!doc)throw"Error doc "+objectType+" "+objectId+" not found";doc.transact((()=>{config[objectType].applyChangesToDoc(doc,data)}))},discard:async function discard(objectType,objectId){listeners?.[objectType]?.[objectId]&&listeners[objectType][objectId]()}}};var y_indexeddb=__webpack_require__("./node_modules/y-indexeddb/src/y-indexeddb.js");function connectIndexDb(objectId,objectType,doc){const roomName=`${objectType}-${objectId}`,provider=new y_indexeddb.nS(roomName,doc);return new Promise((resolve=>{provider.on("synced",(()=>{resolve((()=>provider.destroy()))}))}))}var websocket=__webpack_require__("./node_modules/lib0/websocket.js"),map=__webpack_require__("./node_modules/lib0/map.js"),error=__webpack_require__("./node_modules/lib0/error.js"),random=__webpack_require__("./node_modules/lib0/random.js"),encoding=__webpack_require__("./node_modules/lib0/encoding.js"),decoding=__webpack_require__("./node_modules/lib0/decoding.js"),observable=__webpack_require__("./node_modules/lib0/observable.js"),logging=__webpack_require__("./node_modules/lib0/logging.js"),logging_common=__webpack_require__("./node_modules/lib0/logging.common.js"),promise=__webpack_require__("./node_modules/lib0/promise.js"),broadcastchannel=__webpack_require__("./node_modules/lib0/broadcastchannel.js"),buffer=__webpack_require__("./node_modules/lib0/buffer.js"),math=__webpack_require__("./node_modules/lib0/math.js"),mutex=__webpack_require__("./node_modules/lib0/mutex.js"),simplepeer_min=__webpack_require__("./node_modules/simple-peer/simplepeer.min.js"),simplepeer_min_default=__webpack_require__.n(simplepeer_min),sync=__webpack_require__("./node_modules/y-protocols/sync.js"),y_protocols_awareness=__webpack_require__("./node_modules/y-protocols/awareness.js"),string=__webpack_require__("./node_modules/lib0/string.js");const encrypt=(data,key)=>{if(!key)return promise.hd(data);const iv=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv},key,data).then((cipher=>{const encryptedDataEncoder=encoding.xv();return encoding.Qj(encryptedDataEncoder,"AES-GCM"),encoding.Gu(encryptedDataEncoder,iv),encoding.Gu(encryptedDataEncoder,new Uint8Array(cipher)),encoding.Fo(encryptedDataEncoder)}))},decrypt=(data,key)=>{if(!key)return promise.hd(data);const dataDecoder=decoding.$C(data);"AES-GCM"!==decoding.t3(dataDecoder)&&promise.ku(error.vt("Unknown encryption algorithm"));const iv=decoding.bo(dataDecoder),cipher=decoding.bo(dataDecoder);return crypto.subtle.decrypt({name:"AES-GCM",iv},key,cipher).then((data=>new Uint8Array(data)))},decryptJson=(data,key)=>decrypt(data,key).then((decryptedValue=>decoding.Jg(decoding.$C(new Uint8Array(decryptedValue)))));var process=__webpack_require__("./node_modules/process/browser.js");const log=logging.Xv("y-webrtc"),signalingConns=new Map,rooms=new Map,checkIsSynced=room=>{let synced=!0;room.webrtcConns.forEach((peer=>{peer.synced||(synced=!1)})),(!synced&&room.synced||synced&&!room.synced)&&(room.synced=synced,room.provider.emit("synced",[{synced}]),log("synced ",logging_common.Y,room.name,logging_common.Ny," with all peers"))},readMessage=(room,buf,syncedCallback)=>{const decoder=decoding.$C(buf),encoder=encoding.xv(),messageType=decoding.cw(decoder);if(void 0===room)return null;const awareness=room.awareness,doc=room.doc;let sendReply=!1;switch(messageType){case 0:{encoding.zd(encoder,0);const syncMessageType=sync.VU(decoder,encoder,doc,room);syncMessageType!==sync.Zg||room.synced||syncedCallback(),syncMessageType===sync.s$&&(sendReply=!0);break}case 3:encoding.zd(encoder,1),encoding.Gu(encoder,y_protocols_awareness.X3(awareness,Array.from(awareness.getStates().keys()))),sendReply=!0;break;case 1:y_protocols_awareness.tQ(awareness,decoding.bo(decoder),room);break;case 4:{const add=1===decoding.xh(decoder),peerName=decoding.t3(decoder);if(peerName!==room.peerId&&(room.bcConns.has(peerName)&&!add||!room.bcConns.has(peerName)&&add)){const removed=[],added=[];add?(room.bcConns.add(peerName),added.push(peerName)):(room.bcConns.delete(peerName),removed.push(peerName)),room.provider.emit("peers",[{added,removed,webrtcPeers:Array.from(room.webrtcConns.keys()),bcPeers:Array.from(room.bcConns)}]),broadcastBcPeerId(room)}break}default:return console.error("Unable to compute message"),encoder}return sendReply?encoder:null},sendWebrtcConn=(webrtcConn,encoder)=>{log("send message to ",logging_common.Y,webrtcConn.remotePeerId,logging_common.Ny,logging_common.Qu," (",webrtcConn.room.name,")",logging_common.Tx);try{webrtcConn.peer.send(encoding.Fo(encoder))}catch(e){}};class WebrtcConn{constructor(signalingConn,initiator,remotePeerId,room){log("establishing connection to ",logging_common.Y,remotePeerId),this.room=room,this.remotePeerId=remotePeerId,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new(simplepeer_min_default())({initiator,...room.provider.peerOpts}),this.peer.on("signal",(signal=>{void 0===this.glareToken&&(this.glareToken=Date.now()+Math.random()),publishSignalingMessage(signalingConn,room,{to:remotePeerId,from:room.peerId,type:"signal",token:this.glareToken,signal})})),this.peer.on("connect",(()=>{log("connected to ",logging_common.Y,remotePeerId),this.connected=!0;const doc=room.provider.doc,awareness=room.awareness,encoder=encoding.xv();encoding.zd(encoder,0),sync.ue(encoder,doc),sendWebrtcConn(this,encoder);const awarenessStates=awareness.getStates();if(awarenessStates.size>0){const encoder=encoding.xv();encoding.zd(encoder,1),encoding.Gu(encoder,y_protocols_awareness.X3(awareness,Array.from(awarenessStates.keys()))),sendWebrtcConn(this,encoder)}})),this.peer.on("close",(()=>{this.connected=!1,this.closed=!0,room.webrtcConns.has(this.remotePeerId)&&(room.webrtcConns.delete(this.remotePeerId),room.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(room.webrtcConns.keys()),bcPeers:Array.from(room.bcConns)}])),checkIsSynced(room),this.peer.destroy(),log("closed connection to ",logging_common.Y,remotePeerId),announceSignalingInfo(room)})),this.peer.on("error",(err=>{log("Error in connection to ",logging_common.Y,remotePeerId,": ",err),announceSignalingInfo(room)})),this.peer.on("data",(data=>{const answer=((peerConn,buf)=>{const room=peerConn.room;return log("received message from ",logging_common.Y,peerConn.remotePeerId,logging_common.Qu," (",room.name,")",logging_common.Ny,logging_common.Tx),readMessage(room,buf,(()=>{peerConn.synced=!0,log("synced ",logging_common.Y,room.name,logging_common.Ny," with ",logging_common.Y,peerConn.remotePeerId),checkIsSynced(room)}))})(this,data);null!==answer&&sendWebrtcConn(this,answer)}))}destroy(){this.peer.destroy()}}const broadcastBcMessage=(room,m)=>encrypt(m,room.key).then((data=>room.mux((()=>broadcastchannel.mk(room.name,data))))),broadcastRoomMessage=(room,m)=>{room.bcconnected&&broadcastBcMessage(room,m),((room,m)=>{log("broadcast message in ",logging_common.Y,room.name,logging_common.Ny),room.webrtcConns.forEach((conn=>{try{conn.peer.send(m)}catch(e){}}))})(room,m)},announceSignalingInfo=room=>{signalingConns.forEach((conn=>{conn.connected&&(conn.send({type:"subscribe",topics:[room.name]}),room.webrtcConns.size<room.provider.maxConns&&publishSignalingMessage(conn,room,{type:"announce",from:room.peerId}))}))},broadcastBcPeerId=room=>{if(room.provider.filterBcConns){const encoderPeerIdBc=encoding.xv();encoding.zd(encoderPeerIdBc,4),encoding.QJ(encoderPeerIdBc,1),encoding.Qj(encoderPeerIdBc,room.peerId),broadcastBcMessage(room,encoding.Fo(encoderPeerIdBc))}};class Room{constructor(doc,provider,name,key){this.peerId=random.gZ(),this.doc=doc,this.awareness=provider.awareness,this.provider=provider,this.synced=!1,this.name=name,this.key=key,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=(0,mutex.i)(),this.bcconnected=!1,this._bcSubscriber=data=>decrypt(new Uint8Array(data),key).then((m=>this.mux((()=>{const reply=readMessage(this,m,(()=>{}));reply&&broadcastBcMessage(this,encoding.Fo(reply))})))),this._docUpdateHandler=(update,origin)=>{const encoder=encoding.xv();encoding.zd(encoder,0),sync.f7(encoder,update),broadcastRoomMessage(this,encoding.Fo(encoder))},this._awarenessUpdateHandler=({added,updated,removed},origin)=>{const changedClients=added.concat(updated).concat(removed),encoderAwareness=encoding.xv();encoding.zd(encoderAwareness,1),encoding.Gu(encoderAwareness,y_protocols_awareness.X3(this.awareness,changedClients)),broadcastRoomMessage(this,encoding.Fo(encoderAwareness))},this._beforeUnloadHandler=()=>{y_protocols_awareness._g(this.awareness,[doc.clientID],"window unload"),rooms.forEach((room=>{room.disconnect()}))},"undefined"!=typeof window?window.addEventListener("beforeunload",this._beforeUnloadHandler):void 0!==process&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),announceSignalingInfo(this);const roomName=this.name;broadcastchannel.B1(roomName,this._bcSubscriber),this.bcconnected=!0,broadcastBcPeerId(this);const encoderSync=encoding.xv();encoding.zd(encoderSync,0),sync.ue(encoderSync,this.doc),broadcastBcMessage(this,encoding.Fo(encoderSync));const encoderState=encoding.xv();encoding.zd(encoderState,0),sync.nh(encoderState,this.doc),broadcastBcMessage(this,encoding.Fo(encoderState));const encoderAwarenessQuery=encoding.xv();encoding.zd(encoderAwarenessQuery,3),broadcastBcMessage(this,encoding.Fo(encoderAwarenessQuery));const encoderAwarenessState=encoding.xv();encoding.zd(encoderAwarenessState,1),encoding.Gu(encoderAwarenessState,y_protocols_awareness.X3(this.awareness,[this.doc.clientID])),broadcastBcMessage(this,encoding.Fo(encoderAwarenessState))}disconnect(){signalingConns.forEach((conn=>{conn.connected&&conn.send({type:"unsubscribe",topics:[this.name]})})),y_protocols_awareness._g(this.awareness,[this.doc.clientID],"disconnect");const encoderPeerIdBc=encoding.xv();encoding.zd(encoderPeerIdBc,4),encoding.QJ(encoderPeerIdBc,0),encoding.Qj(encoderPeerIdBc,this.peerId),broadcastBcMessage(this,encoding.Fo(encoderPeerIdBc)),broadcastchannel.al(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach((conn=>conn.destroy()))}destroy(){this.disconnect(),"undefined"!=typeof window?window.removeEventListener("beforeunload",this._beforeUnloadHandler):void 0!==process&&process.off("exit",this._beforeUnloadHandler)}}const publishSignalingMessage=(conn,room,data)=>{room.key?((data,key)=>{const dataEncoder=encoding.xv();return encoding.IO(dataEncoder,data),encrypt(encoding.Fo(dataEncoder),key)})(data,room.key).then((data=>{conn.send({type:"publish",topic:room.name,data:buffer.nk(data)})})):conn.send({type:"publish",topic:room.name,data})};class SignalingConn extends websocket.l{constructor(url){super(url),this.providers=new Set,this.on("connect",(()=>{log(`connected (${url})`);const topics=Array.from(rooms.keys());this.send({type:"subscribe",topics}),rooms.forEach((room=>publishSignalingMessage(this,room,{type:"announce",from:room.peerId})))})),this.on("message",(m=>{if("publish"===m.type){const roomName=m.topic,room=rooms.get(roomName);if(null==room||"string"!=typeof roomName)return;const execMessage=data=>{const webrtcConns=room.webrtcConns,peerId=room.peerId;if(null==data||data.from===peerId||void 0!==data.to&&data.to!==peerId||room.bcConns.has(data.from))return;const emitPeerChange=webrtcConns.has(data.from)?()=>{}:()=>room.provider.emit("peers",[{removed:[],added:[data.from],webrtcPeers:Array.from(room.webrtcConns.keys()),bcPeers:Array.from(room.bcConns)}]);switch(data.type){case"announce":webrtcConns.size<room.provider.maxConns&&(map._4(webrtcConns,data.from,(()=>new WebrtcConn(this,!0,data.from,room))),emitPeerChange());break;case"signal":if("offer"===data.signal.type){const existingConn=webrtcConns.get(data.from);if(existingConn){const remoteToken=data.token,localToken=existingConn.glareToken;if(localToken&&localToken>remoteToken)return void log("offer rejected: ",data.from);existingConn.glareToken=void 0}}if("answer"===data.signal.type){log("offer answered by: ",data.from);webrtcConns.get(data.from).glareToken=void 0}data.to===peerId&&(map._4(webrtcConns,data.from,(()=>new WebrtcConn(this,!1,data.from,room))).peer.signal(data.signal),emitPeerChange())}};room.key?"string"==typeof m.data&&decryptJson(buffer.Ey(m.data),room.key).then(execMessage):execMessage(m.data)}})),this.on("disconnect",(()=>log(`disconnect (${url})`)))}}class WebrtcProvider extends observable.c{constructor(roomName,doc,{signaling=["wss://y-webrtc-eu.fly.dev"],password=null,awareness=new y_protocols_awareness.ww(doc),maxConns=20+math.RI(15*random._9()),filterBcConns=!0,peerOpts={}}={}){super(),this.roomName=roomName,this.doc=doc,this.filterBcConns=filterBcConns,this.awareness=awareness,this.shouldConnect=!1,this.signalingUrls=signaling,this.signalingConns=[],this.maxConns=maxConns,this.peerOpts=peerOpts,this.key=password?((secret,roomName)=>{const secretBuffer=string.Af(secret).buffer,salt=string.Af(roomName).buffer;return crypto.subtle.importKey("raw",secretBuffer,"PBKDF2",!1,["deriveKey"]).then((keyMaterial=>crypto.subtle.deriveKey({name:"PBKDF2",salt,iterations:1e5,hash:"SHA-256"},keyMaterial,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])))})(password,roomName):promise.hd(null),this.room=null,this.key.then((key=>{this.room=((doc,provider,name,key)=>{if(rooms.has(name))throw error.vt(`A Yjs Doc connected to room "${name}" already exists!`);const room=new Room(doc,provider,name,key);return rooms.set(name,room),room})(doc,this,roomName,key),this.shouldConnect?this.room.connect():this.room.disconnect()})),this.connect(),this.destroy=this.destroy.bind(this),doc.on("destroy",this.destroy)}get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach((url=>{const signalingConn=map._4(signalingConns,url,(()=>new SignalingConn(url)));this.signalingConns.push(signalingConn),signalingConn.providers.add(this)})),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach((conn=>{conn.providers.delete(this),0===conn.providers.size&&(conn.destroy(),signalingConns.delete(conn.url))})),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then((()=>{this.room.destroy(),rooms.delete(this.roomName)})),super.destroy()}}function setupHttpSignal(httpClient){if(httpClient.shouldConnect&&null===httpClient.ws){const subscriberId=Math.floor(1e5+9e5*Math.random()),url=httpClient.url,eventSource=new window.EventSource((0,add_query_args.F)(url,{subscriber_id:subscriberId,action:"gutenberg_signaling_server"}));let pingTimeout=null;eventSource.onmessage=event=>{httpClient.lastMessageReceived=Date.now();const data=event.data;if(data){const messages=JSON.parse(data);Array.isArray(messages)&&messages.forEach(onSingleMessage)}},httpClient.ws=eventSource,httpClient.connecting=!0,httpClient.connected=!1;const onSingleMessage=message=>{message&&"pong"===message.type&&(clearTimeout(pingTimeout),pingTimeout=setTimeout(sendPing,messageReconnectTimeout/2)),httpClient.emit("message",[message,httpClient])},onclose=error=>{null!==httpClient.ws&&(httpClient.ws.close(),httpClient.ws=null,httpClient.connecting=!1,httpClient.connected?(httpClient.connected=!1,httpClient.emit("disconnect",[{type:"disconnect",error},httpClient])):httpClient.unsuccessfulReconnects++),clearTimeout(pingTimeout)},sendPing=()=>{httpClient.ws&&httpClient.ws.readyState===window.EventSource.OPEN&&httpClient.send({type:"ping"})};httpClient.ws&&(httpClient.ws.onclose=()=>{onclose(null)},httpClient.ws.send=function send(message){window.fetch(url,{body:new URLSearchParams({subscriber_id:subscriberId.toString(),action:"gutenberg_signaling_server",message}),method:"POST"}).catch((()=>{log("Error sending to server with message: "+message)}))}),eventSource.onerror=()=>{},eventSource.onopen=()=>{httpClient.connected||eventSource.readyState===window.EventSource.OPEN&&(httpClient.lastMessageReceived=Date.now(),httpClient.connecting=!1,httpClient.connected=!0,httpClient.unsuccessfulReconnects=0,httpClient.emit("connect",[{type:"connect"},httpClient]),pingTimeout=setTimeout(sendPing,messageReconnectTimeout/2))}}}const messageReconnectTimeout=3e4;class HttpSignalingConn extends observable.c{constructor(url){super(),this.url=url,this.ws=null,this.binaryType=null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval((()=>{this.connected&&messageReconnectTimeout<Date.now()-this.lastMessageReceived&&this.ws&&this.ws.close()}),messageReconnectTimeout/2),setupHttpSignal(this),this.providers=new Set,function setupSignalEventHandlers(signalCon,url){signalCon.on("connect",(()=>{log(`connected (${url})`);const topics=Array.from(rooms.keys());signalCon.send({type:"subscribe",topics}),rooms.forEach((room=>publishSignalingMessage(signalCon,room,{type:"announce",from:room.peerId})))})),signalCon.on("message",(m=>{if("publish"===m.type){const roomName=m.topic,room=rooms.get(roomName);if(null===room||"string"!=typeof roomName||void 0===room)return;const execMessage=data=>{const webrtcConns=room.webrtcConns,peerId=room.peerId;if(null===data||data.from===peerId||void 0!==data.to&&data.to!==peerId||room.bcConns.has(data.from))return;const emitPeerChange=webrtcConns.has(data.from)?()=>{}:()=>room.provider.emit("peers",[{removed:[],added:[data.from],webrtcPeers:Array.from(room.webrtcConns.keys()),bcPeers:Array.from(room.bcConns)}]);switch(data.type){case"announce":webrtcConns.size<room.provider.maxConns&&(map._4(webrtcConns,data.from,(()=>new WebrtcConn(signalCon,!0,data.from,room))),emitPeerChange());break;case"signal":if("offer"===data.signal.type){const existingConn=webrtcConns.get(data.from);if(existingConn){const remoteToken=data.token,localToken=existingConn.glareToken;if(localToken&&localToken>remoteToken)return void log("offer rejected: ",data.from);existingConn.glareToken=void 0}}if("answer"===data.signal.type){log("offer answered by: ",data.from);const existingConn=webrtcConns.get(data.from);existingConn&&(existingConn.glareToken=void 0)}data.to===peerId&&(map._4(webrtcConns,data.from,(()=>new WebrtcConn(signalCon,!1,data.from,room))).peer.signal(data.signal),emitPeerChange())}};room.key?"string"==typeof m.data&&decryptJson(buffer.Ey(m.data),room.key).then(execMessage):execMessage(m.data)}})),signalCon.on("disconnect",(()=>log(`disconnect (${url})`)))}(this,url)}send(message){this.ws&&this.ws.send(JSON.stringify(message))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.connected||null!==this.ws||setupHttpSignal(this)}}class WebrtcProviderWithHttpSignaling extends WebrtcProvider{connect(){this.shouldConnect=!0,this.signalingUrls.forEach((url=>{const signalingConn=map._4(signalingConns,url,url.startsWith("ws://")||url.startsWith("wss://")?()=>new SignalingConn(url):()=>new HttpSignalingConn(url));this.signalingConns.push(signalingConn),signalingConn.providers.add(this)})),this.room&&this.room.connect()}}let syncProvider;function getSyncProvider(){return syncProvider||(syncProvider=createSyncProvider(connectIndexDb,function createWebRTCConnection({signaling,password}){return function(objectId,objectType,doc){return new WebrtcProviderWithHttpSignaling(`${objectType}-${objectId}`,doc,{signaling,password}),Promise.resolve((()=>!0))}}({signaling:[window?.wp?.ajax?.settings?.url],password:window?.__experimentalCollaborativeEditingSecret}))),syncProvider}function receiveUserQuery(queryID,users){return{type:"RECEIVE_USER_QUERY",users:Array.isArray(users)?users:[users],queryID}}function receiveCurrentUser(currentUser){return{type:"RECEIVE_CURRENT_USER",currentUser}}function addEntities(entities){return{type:"ADD_ENTITIES",entities}}function receiveEntityRecords(kind,name,records,query,invalidateCache=!1,edits,meta){let action;return"postType"===kind&&(records=(Array.isArray(records)?records:[records]).map((record=>"auto-draft"===record.status?{...record,title:""}:record))),action=query?function receiveQueriedItems(items,query={},edits,meta){return{...receiveItems(items,edits,meta),query}}(records,query,edits,meta):receiveItems(records,edits,meta),{...action,kind,name,invalidateCache}}function receiveCurrentTheme(currentTheme){return{type:"RECEIVE_CURRENT_THEME",currentTheme}}function __experimentalReceiveCurrentGlobalStylesId(currentGlobalStylesId){return{type:"RECEIVE_CURRENT_GLOBAL_STYLES_ID",id:currentGlobalStylesId}}function __experimentalReceiveThemeBaseGlobalStyles(stylesheet,globalStyles){return{type:"RECEIVE_THEME_GLOBAL_STYLES",stylesheet,globalStyles}}function __experimentalReceiveThemeGlobalStyleVariations(stylesheet,variations){return{type:"RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS",stylesheet,variations}}function receiveThemeSupports(){return(0,deprecated_build_module.A)("wp.data.dispatch( 'core' ).receiveThemeSupports",{since:"5.9"}),{type:"DO_NOTHING"}}function receiveThemeGlobalStyleRevisions(currentId,revisions){return(0,deprecated_build_module.A)("wp.data.dispatch( 'core' ).receiveThemeGlobalStyleRevisions()",{since:"6.5.0",alternative:"wp.data.dispatch( 'core' ).receiveRevisions"}),{type:"RECEIVE_THEME_GLOBAL_STYLE_REVISIONS",currentId,revisions}}function receiveEmbedPreview(url,preview){return{type:"RECEIVE_EMBED_PREVIEW",url,preview}}const deleteEntityRecord=(kind,name,recordId,query,{__unstableFetch=api_fetch_build_module.A,throwOnError=!1}={})=>async({dispatch})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind,name))).find((config=>config.kind===kind&&config.name===name));let error,deletedRecord=!1;if(!entityConfig)return;const lock=await dispatch.__unstableAcquireStoreLock(STORE_NAME,["entities","records",kind,name,recordId],{exclusive:!0});try{dispatch({type:"DELETE_ENTITY_RECORD_START",kind,name,recordId});let hasError=!1;try{let path=`${entityConfig.baseURL}/${recordId}`;query&&(path=(0,add_query_args.F)(path,query)),deletedRecord=await __unstableFetch({path,method:"DELETE"}),await dispatch(function removeItems(kind,name,records,invalidateCache=!1){return{type:"REMOVE_ITEMS",itemIds:Array.isArray(records)?records:[records],kind,name,invalidateCache}}(kind,name,recordId,!0))}catch(_error){hasError=!0,error=_error}if(dispatch({type:"DELETE_ENTITY_RECORD_FINISH",kind,name,recordId,error}),hasError&&throwOnError)throw error;return deletedRecord}finally{dispatch.__unstableReleaseStoreLock(lock)}},editEntityRecord=(kind,name,recordId,edits,options={})=>({select,dispatch})=>{const entityConfig=select.getEntityConfig(kind,name);if(!entityConfig)throw new Error(`The entity being edited (${kind}, ${name}) does not have a loaded config.`);const{mergedEdits={}}=entityConfig,record=select.getRawEntityRecord(kind,name,recordId),editedRecord=select.getEditedEntityRecord(kind,name,recordId),edit={kind,name,recordId,edits:Object.keys(edits).reduce(((acc,key)=>{const recordValue=record[key],editedRecordValue=editedRecord[key],value=mergedEdits[key]?{...editedRecordValue,...edits[key]}:edits[key];return acc[key]=es6_default()(recordValue,value)?void 0:value,acc}),{})};if(window.__experimentalEnableSync&&entityConfig.syncConfig){if(globalThis.IS_GUTENBERG_PLUGIN){const objectId=entityConfig.getSyncObjectId(recordId);getSyncProvider().update(entityConfig.syncObjectType+"--edit",objectId,edit.edits)}}else options.undoIgnore||select.getUndoManager().addRecord([{id:{kind,name,recordId},changes:Object.keys(edits).reduce(((acc,key)=>(acc[key]={from:editedRecord[key],to:edits[key]},acc)),{})}],options.isCached),dispatch({type:"EDIT_ENTITY_RECORD",...edit})},undo=()=>({select,dispatch})=>{const undoRecord=select.getUndoManager().undo();undoRecord&&dispatch({type:"UNDO",record:undoRecord})},redo=()=>({select,dispatch})=>{const redoRecord=select.getUndoManager().redo();redoRecord&&dispatch({type:"REDO",record:redoRecord})},__unstableCreateUndoLevel=()=>({select})=>{select.getUndoManager().addRecord()},saveEntityRecord=(kind,name,record,{isAutosave=!1,__unstableFetch=api_fetch_build_module.A,throwOnError=!1}={})=>async({select,resolveSelect,dispatch})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind,name))).find((config=>config.kind===kind&&config.name===name));if(!entityConfig)return;const entityIdKey=entityConfig.key||DEFAULT_ENTITY_KEY,recordId=record[entityIdKey],lock=await dispatch.__unstableAcquireStoreLock(STORE_NAME,["entities","records",kind,name,recordId||(0,v4.A)()],{exclusive:!0});try{for(const[key,value]of Object.entries(record))if("function"==typeof value){const evaluatedValue=value(select.getEditedEntityRecord(kind,name,recordId));dispatch.editEntityRecord(kind,name,recordId,{[key]:evaluatedValue},{undoIgnore:!0}),record[key]=evaluatedValue}let updatedRecord,error;dispatch({type:"SAVE_ENTITY_RECORD_START",kind,name,recordId,isAutosave});let hasError=!1;try{const path=`${entityConfig.baseURL}${recordId?"/"+recordId:""}`,persistedRecord=select.getRawEntityRecord(kind,name,recordId);if(isAutosave){const currentUser=select.getCurrentUser(),currentUserId=currentUser?currentUser.id:void 0,autosavePost=await resolveSelect.getAutosave(persistedRecord.type,persistedRecord.id,currentUserId);let data={...persistedRecord,...autosavePost,...record};if(data=Object.keys(data).reduce(((acc,key)=>(["title","excerpt","content","meta"].includes(key)&&(acc[key]=data[key]),acc)),{status:"auto-draft"===data.status?"draft":void 0}),updatedRecord=await __unstableFetch({path:`${path}/autosaves`,method:"POST",data}),persistedRecord.id===updatedRecord.id){let newRecord={...persistedRecord,...data,...updatedRecord};newRecord=Object.keys(newRecord).reduce(((acc,key)=>(["title","excerpt","content"].includes(key)?acc[key]=newRecord[key]:acc[key]="status"===key?"auto-draft"===persistedRecord.status&&"draft"===newRecord.status?newRecord.status:persistedRecord.status:persistedRecord[key],acc)),{}),dispatch.receiveEntityRecords(kind,name,newRecord,void 0,!0)}else dispatch.receiveAutosaves(persistedRecord.id,updatedRecord)}else{let edits=record;entityConfig.__unstablePrePersist&&(edits={...edits,...entityConfig.__unstablePrePersist(persistedRecord,edits)}),updatedRecord=await __unstableFetch({path,method:recordId?"PUT":"POST",data:edits}),dispatch.receiveEntityRecords(kind,name,updatedRecord,void 0,!0,edits)}}catch(_error){hasError=!0,error=_error}if(dispatch({type:"SAVE_ENTITY_RECORD_FINISH",kind,name,recordId,error,isAutosave}),hasError&&throwOnError)throw error;return updatedRecord}finally{dispatch.__unstableReleaseStoreLock(lock)}},__experimentalBatch=requests=>async({dispatch})=>{const batch=createBatch(),api={saveEntityRecord:(kind,name,record,options)=>batch.add((add=>dispatch.saveEntityRecord(kind,name,record,{...options,__unstableFetch:add}))),saveEditedEntityRecord:(kind,name,recordId,options)=>batch.add((add=>dispatch.saveEditedEntityRecord(kind,name,recordId,{...options,__unstableFetch:add}))),deleteEntityRecord:(kind,name,recordId,query,options)=>batch.add((add=>dispatch.deleteEntityRecord(kind,name,recordId,query,{...options,__unstableFetch:add})))},resultPromises=requests.map((request=>request(api))),[,...results]=await Promise.all([batch.run(),...resultPromises]);return results},saveEditedEntityRecord=(kind,name,recordId,options)=>async({select,dispatch})=>{if(!select.hasEditsForEntityRecord(kind,name,recordId))return;const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind,name))).find((config=>config.kind===kind&&config.name===name));if(!entityConfig)return;const entityIdKey=entityConfig.key||DEFAULT_ENTITY_KEY,edits=select.getEntityRecordNonTransientEdits(kind,name,recordId),record={[entityIdKey]:recordId,...edits};return await dispatch.saveEntityRecord(kind,name,record,options)},__experimentalSaveSpecifiedEntityEdits=(kind,name,recordId,itemsToSave,options)=>async({select,dispatch})=>{if(!select.hasEditsForEntityRecord(kind,name,recordId))return;const edits=select.getEntityRecordNonTransientEdits(kind,name,recordId),editsToSave={};for(const item of itemsToSave)setNestedValue(editsToSave,item,getNestedValue(edits,item));const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind,name))).find((config=>config.kind===kind&&config.name===name));return recordId&&(editsToSave[entityConfig?.key||DEFAULT_ENTITY_KEY]=recordId),await dispatch.saveEntityRecord(kind,name,editsToSave,options)};function receiveUploadPermissions(hasUploadPermissions){return(0,deprecated_build_module.A)("wp.data.dispatch( 'core' ).receiveUploadPermissions",{since:"5.9",alternative:"receiveUserPermission"}),receiveUserPermission("create/media",hasUploadPermissions)}function receiveUserPermission(key,isAllowed){return{type:"RECEIVE_USER_PERMISSION",key,isAllowed}}function receiveUserPermissions(permissions){return{type:"RECEIVE_USER_PERMISSIONS",permissions}}function receiveAutosaves(postId,autosaves){return{type:"RECEIVE_AUTOSAVES",postId,autosaves:Array.isArray(autosaves)?autosaves:[autosaves]}}function receiveNavigationFallbackId(fallbackId){return{type:"RECEIVE_NAVIGATION_FALLBACK_ID",fallbackId}}function receiveDefaultTemplateId(query,templateId){return{type:"RECEIVE_DEFAULT_TEMPLATE",query,templateId}}const receiveRevisions=(kind,name,recordKey,records,query,invalidateCache=!1,meta)=>async({dispatch})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind,name))).find((config=>config.kind===kind&&config.name===name));dispatch({type:"RECEIVE_ITEM_REVISIONS",key:entityConfig&&entityConfig?.revisionKey?entityConfig.revisionKey:DEFAULT_ENTITY_KEY,items:Array.isArray(records)?records:[records],recordKey,meta,query,kind,name,invalidateCache})},DEFAULT_ENTITY_KEY="id",POST_RAW_ATTRIBUTES=["title","excerpt","content"],rootEntitiesConfig=[{label:(0,i18n_build_module.__)("Base"),kind:"root",name:"__unstableBase",baseURL:"/",baseURLParams:{_fields:["description","gmt_offset","home","name","site_icon","site_icon_url","site_logo","timezone_string","url"].join(",")},plural:"__unstableBases",syncConfig:{fetch:async()=>(0,api_fetch_build_module.A)({path:"/"}),applyChangesToDoc:(doc,changes)=>{const document=doc.getMap("document");Object.entries(changes).forEach((([key,value])=>{document.get(key)!==value&&document.set(key,value)}))},fromCRDTDoc:doc=>doc.getMap("document").toJSON()},syncObjectType:"root/base",getSyncObjectId:()=>"index"},{label:(0,i18n_build_module.__)("Post Type"),name:"postType",kind:"root",key:"slug",baseURL:"/wp/v2/types",baseURLParams:{context:"edit"},plural:"postTypes",syncConfig:{fetch:async id=>(0,api_fetch_build_module.A)({path:`/wp/v2/types/${id}?context=edit`}),applyChangesToDoc:(doc,changes)=>{const document=doc.getMap("document");Object.entries(changes).forEach((([key,value])=>{document.get(key)!==value&&document.set(key,value)}))},fromCRDTDoc:doc=>doc.getMap("document").toJSON()},syncObjectType:"root/postType",getSyncObjectId:id=>id},{name:"media",kind:"root",baseURL:"/wp/v2/media",baseURLParams:{context:"edit"},plural:"mediaItems",label:(0,i18n_build_module.__)("Media"),rawAttributes:["caption","title","description"],supportsPagination:!0},{name:"taxonomy",kind:"root",key:"slug",baseURL:"/wp/v2/taxonomies",baseURLParams:{context:"edit"},plural:"taxonomies",label:(0,i18n_build_module.__)("Taxonomy")},{name:"sidebar",kind:"root",baseURL:"/wp/v2/sidebars",baseURLParams:{context:"edit"},plural:"sidebars",transientEdits:{blocks:!0},label:(0,i18n_build_module.__)("Widget areas")},{name:"widget",kind:"root",baseURL:"/wp/v2/widgets",baseURLParams:{context:"edit"},plural:"widgets",transientEdits:{blocks:!0},label:(0,i18n_build_module.__)("Widgets")},{name:"widgetType",kind:"root",baseURL:"/wp/v2/widget-types",baseURLParams:{context:"edit"},plural:"widgetTypes",label:(0,i18n_build_module.__)("Widget types")},{label:(0,i18n_build_module.__)("User"),name:"user",kind:"root",baseURL:"/wp/v2/users",baseURLParams:{context:"edit"},plural:"users"},{name:"comment",kind:"root",baseURL:"/wp/v2/comments",baseURLParams:{context:"edit"},plural:"comments",label:(0,i18n_build_module.__)("Comment")},{name:"menu",kind:"root",baseURL:"/wp/v2/menus",baseURLParams:{context:"edit"},plural:"menus",label:(0,i18n_build_module.__)("Menu")},{name:"menuItem",kind:"root",baseURL:"/wp/v2/menu-items",baseURLParams:{context:"edit"},plural:"menuItems",label:(0,i18n_build_module.__)("Menu Item"),rawAttributes:["title"]},{name:"menuLocation",kind:"root",baseURL:"/wp/v2/menu-locations",baseURLParams:{context:"edit"},plural:"menuLocations",label:(0,i18n_build_module.__)("Menu Location"),key:"name"},{label:(0,i18n_build_module.__)("Global Styles"),name:"globalStyles",kind:"root",baseURL:"/wp/v2/global-styles",baseURLParams:{context:"edit"},plural:"globalStylesVariations",getTitle:record=>record?.title?.rendered||record?.title,getRevisionsUrl:(parentId,revisionId)=>`/wp/v2/global-styles/${parentId}/revisions${revisionId?"/"+revisionId:""}`,supportsPagination:!0},{label:(0,i18n_build_module.__)("Themes"),name:"theme",kind:"root",baseURL:"/wp/v2/themes",baseURLParams:{context:"edit"},plural:"themes",key:"stylesheet"},{label:(0,i18n_build_module.__)("Plugins"),name:"plugin",kind:"root",baseURL:"/wp/v2/plugins",baseURLParams:{context:"edit"},plural:"plugins",key:"plugin"},{label:(0,i18n_build_module.__)("Status"),name:"status",kind:"root",baseURL:"/wp/v2/statuses",baseURLParams:{context:"edit"},plural:"statuses",key:"slug"}],additionalEntityConfigLoaders=[{kind:"postType",loadEntities:async function loadPostTypeEntities(){const postTypes=await(0,api_fetch_build_module.A)({path:"/wp/v2/types?context=view"});return Object.entries(null!=postTypes?postTypes:{}).map((([name,postType])=>{var _postType$rest_namesp;const isTemplate=["wp_template","wp_template_part"].includes(name),namespace=null!==(_postType$rest_namesp=postType?.rest_namespace)&&void 0!==_postType$rest_namesp?_postType$rest_namesp:"wp/v2";return{kind:"postType",baseURL:`/${namespace}/${postType.rest_base}`,baseURLParams:{context:"edit"},name,label:postType.name,transientEdits:{blocks:!0,selection:!0},mergedEdits:{meta:!0},rawAttributes:POST_RAW_ATTRIBUTES,getTitle:record=>{var _record$slug;return record?.title?.rendered||record?.title||(isTemplate?(0,dist_es2015.D)(null!==(_record$slug=record.slug)&&void 0!==_record$slug?_record$slug:""):String(record.id))},__unstablePrePersist:isTemplate?void 0:prePersistPostType,__unstable_rest_base:postType.rest_base,syncConfig:{fetch:async id=>(0,api_fetch_build_module.A)({path:`/${namespace}/${postType.rest_base}/${id}?context=edit`}),applyChangesToDoc:(doc,changes)=>{const document=doc.getMap("document");Object.entries(changes).forEach((([key,value])=>{"function"!=typeof value&&("blocks"===key&&(serialisableBlocksCache.has(value)||serialisableBlocksCache.set(value,makeBlocksSerializable(value)),value=serialisableBlocksCache.get(value)),document.get(key)!==value&&document.set(key,value))}))},fromCRDTDoc:doc=>doc.getMap("document").toJSON()},syncObjectType:"postType/"+postType.name,getSyncObjectId:id=>id,supportsPagination:!0,getRevisionsUrl:(parentId,revisionId)=>`/${namespace}/${postType.rest_base}/${parentId}/revisions${revisionId?"/"+revisionId:""}`,revisionKey:isTemplate?"wp_id":DEFAULT_ENTITY_KEY}}))}},{kind:"taxonomy",loadEntities:async function loadTaxonomyEntities(){const taxonomies=await(0,api_fetch_build_module.A)({path:"/wp/v2/taxonomies?context=view"});return Object.entries(null!=taxonomies?taxonomies:{}).map((([name,taxonomy])=>{var _taxonomy$rest_namesp;return{kind:"taxonomy",baseURL:`/${null!==(_taxonomy$rest_namesp=taxonomy?.rest_namespace)&&void 0!==_taxonomy$rest_namesp?_taxonomy$rest_namesp:"wp/v2"}/${taxonomy.rest_base}`,baseURLParams:{context:"edit"},name,label:taxonomy.name}}))}},{kind:"root",name:"site",plural:"sites",loadEntities:async function loadSiteEntity(){var _site$schema$properti;const entity={label:(0,i18n_build_module.__)("Site"),name:"site",kind:"root",baseURL:"/wp/v2/settings",syncConfig:{fetch:async()=>(0,api_fetch_build_module.A)({path:"/wp/v2/settings"}),applyChangesToDoc:(doc,changes)=>{const document=doc.getMap("document");Object.entries(changes).forEach((([key,value])=>{document.get(key)!==value&&document.set(key,value)}))},fromCRDTDoc:doc=>doc.getMap("document").toJSON()},syncObjectType:"root/site",getSyncObjectId:()=>"index",meta:{}},site=await(0,api_fetch_build_module.A)({path:entity.baseURL,method:"OPTIONS"}),labels={};return Object.entries(null!==(_site$schema$properti=site?.schema?.properties)&&void 0!==_site$schema$properti?_site$schema$properti:{}).forEach((([key,value])=>{"object"==typeof value&&value.title&&(labels[key]=value.title)})),[{...entity,meta:{labels}}]}}],prePersistPostType=(persistedRecord,edits)=>{const newEdits={};return"auto-draft"===persistedRecord?.status&&(edits.status||newEdits.status||(newEdits.status="draft"),edits.title&&"Auto Draft"!==edits.title||newEdits.title||persistedRecord?.title&&"Auto Draft"!==persistedRecord?.title||(newEdits.title="")),newEdits},serialisableBlocksCache=new WeakMap;function makeBlockAttributesSerializable(attributes){const newAttributes={...attributes};for(const[key,value]of Object.entries(attributes))value instanceof rich_text_build_module.EF&&(newAttributes[key]=value.valueOf());return newAttributes}function makeBlocksSerializable(blocks){return blocks.map((block=>{const{innerBlocks,attributes,...rest}=block;return{...rest,attributes:makeBlockAttributesSerializable(attributes),innerBlocks:makeBlocksSerializable(innerBlocks)}}))}const getMethodName=(kind,name,prefix="get")=>`${prefix}${"root"===kind?"":(0,pascal_case_dist_es2015.fL)(kind)}${(0,pascal_case_dist_es2015.fL)(name)}`;function registerSyncConfigs(configs){configs.forEach((({syncObjectType,syncConfig})=>{getSyncProvider().register(syncObjectType,syncConfig);const editSyncConfig={...syncConfig};delete editSyncConfig.fetch,getSyncProvider().register(syncObjectType+"--edit",editSyncConfig)}))}const getOrLoadEntitiesConfig=(kind,name)=>async({select,dispatch})=>{let configs=select.getEntitiesConfig(kind);const hasConfig=!!select.getEntityConfig(kind,name);if(configs?.length>0&&hasConfig)return window.__experimentalEnableSync&&globalThis.IS_GUTENBERG_PLUGIN&&registerSyncConfigs(configs),configs;const loader=additionalEntityConfigLoaders.find((l=>name&&l.name?l.kind===kind&&l.name===name:l.kind===kind));return loader?(configs=await loader.loadEntities(),window.__experimentalEnableSync&&globalThis.IS_GUTENBERG_PLUGIN&&registerSyncConfigs(configs),dispatch(addEntities(configs)),configs):[]};const get_normalized_comma_separable=function getNormalizedCommaSeparable(value){return"string"==typeof value?value.split(","):Array.isArray(value)?value:null};const with_weak_map_cache=function withWeakMapCache(fn){const cache=new WeakMap;return key=>{let value;return cache.has(key)?value=cache.get(key):(value=fn(key),null!==key&&"object"==typeof key&&cache.set(key,value)),value}};const get_query_parts=with_weak_map_cache((function getQueryParts(query){const parts={stableKey:"",page:1,perPage:10,fields:null,include:null,context:"default"},keys=Object.keys(query).sort();for(let i=0;i<keys.length;i++){const key=keys[i];let value=query[key];switch(key){case"page":parts[key]=Number(value);break;case"per_page":parts.perPage=Number(value);break;case"context":parts.context=value;break;default:var _getNormalizedCommaSe,_getNormalizedCommaSe2;if("_fields"===key)parts.fields=null!==(_getNormalizedCommaSe=get_normalized_comma_separable(value))&&void 0!==_getNormalizedCommaSe?_getNormalizedCommaSe:[],value=parts.fields.join();if("include"===key)"number"==typeof value&&(value=value.toString()),parts.include=(null!==(_getNormalizedCommaSe2=get_normalized_comma_separable(value))&&void 0!==_getNormalizedCommaSe2?_getNormalizedCommaSe2:[]).map(Number),value=parts.include.join();parts.stableKey+=(parts.stableKey?"&":"")+(0,add_query_args.F)("",{[key]:value}).slice(1)}}return parts}));function getContextFromAction(action){const{query}=action;if(!query)return"default";return get_query_parts(query).context}function getMergedItemIds(itemIds,nextItemIds,page,perPage){var _itemIds$length;if(1===page&&-1===perPage)return nextItemIds;const nextItemIdsStartIndex=(page-1)*perPage,size=Math.max(null!==(_itemIds$length=itemIds?.length)&&void 0!==_itemIds$length?_itemIds$length:0,nextItemIdsStartIndex+nextItemIds.length),mergedItemIds=new Array(size);for(let i=0;i<size;i++){const isInNextItemsRange=i>=nextItemIdsStartIndex&&i<nextItemIdsStartIndex+perPage;mergedItemIds[i]=isInNextItemsRange?nextItemIds[i-nextItemIdsStartIndex]:itemIds?.[i]}return mergedItemIds}function removeEntitiesById(entities,ids){return Object.fromEntries(Object.entries(entities).filter((([id])=>!ids.some((itemId=>Number.isInteger(itemId)?itemId===+id:itemId===id)))))}const receiveQueries=(0,compose.A)([if_matching_action((action=>"query"in action)),replace_action((action=>action.query?{...action,...get_query_parts(action.query)}:action)),on_sub_key("context"),on_sub_key("stableKey")])(((state={},action)=>{const{type,page,perPage,key=DEFAULT_ENTITY_KEY}=action;return"RECEIVE_ITEMS"!==type?state:{itemIds:getMergedItemIds(state?.itemIds||[],action.items.map((item=>item?.[key])).filter(Boolean),page,perPage),meta:action.meta}})),reducer=(0,build_module.HY)({items:function items(state={},action){switch(action.type){case"RECEIVE_ITEMS":{const context=getContextFromAction(action),key=action.key||DEFAULT_ENTITY_KEY;return{...state,[context]:{...state[context],...action.items.reduce(((accumulator,value)=>{const itemId=value?.[key];return accumulator[itemId]=function conservativeMapItem(item,nextItem){if(!item)return nextItem;let hasChanges=!1;const result={};for(const key in nextItem)es6_default()(item[key],nextItem[key])?result[key]=item[key]:(hasChanges=!0,result[key]=nextItem[key]);if(!hasChanges)return item;for(const key in item)result.hasOwnProperty(key)||(result[key]=item[key]);return result}(state?.[context]?.[itemId],value),accumulator}),{})}}}case"REMOVE_ITEMS":return Object.fromEntries(Object.entries(state).map((([itemId,contextState])=>[itemId,removeEntitiesById(contextState,action.itemIds)])))}return state},itemIsComplete:function itemIsComplete(state={},action){switch(action.type){case"RECEIVE_ITEMS":{const context=getContextFromAction(action),{query,key=DEFAULT_ENTITY_KEY}=action,queryParts=query?get_query_parts(query):{},isCompleteQuery=!query||!Array.isArray(queryParts.fields);return{...state,[context]:{...state[context],...action.items.reduce(((result,item)=>{const itemId=item?.[key];return result[itemId]=state?.[context]?.[itemId]||isCompleteQuery,result}),{})}}}case"REMOVE_ITEMS":return Object.fromEntries(Object.entries(state).map((([itemId,contextState])=>[itemId,removeEntitiesById(contextState,action.itemIds)])))}return state},queries:(state={},action)=>{switch(action.type){case"RECEIVE_ITEMS":return receiveQueries(state,action);case"REMOVE_ITEMS":const removedItems=action.itemIds.reduce(((result,itemId)=>(result[itemId]=!0,result)),{});return Object.fromEntries(Object.entries(state).map((([queryGroup,contextQueries])=>[queryGroup,Object.fromEntries(Object.entries(contextQueries).map((([query,queryItems])=>[query,{...queryItems,itemIds:queryItems.itemIds.filter((queryId=>!removedItems[queryId]))}])))])));default:return state}}});const withMultiEntityRecordEdits=reducer=>(state,action)=>{if("UNDO"===action.type||"REDO"===action.type){const{record}=action;let newState=state;return record.forEach((({id:{kind,name,recordId},changes})=>{newState=reducer(newState,{type:"EDIT_ENTITY_RECORD",kind,name,recordId,edits:Object.entries(changes).reduce(((acc,[key,value])=>(acc[key]="UNDO"===action.type?value.from:value.to,acc)),{})})})),newState}return reducer(state,action)};function entity(entityConfig){return(0,compose.A)([withMultiEntityRecordEdits,if_matching_action((action=>action.name&&action.kind&&action.name===entityConfig.name&&action.kind===entityConfig.kind)),replace_action((action=>({key:entityConfig.key||DEFAULT_ENTITY_KEY,...action})))])((0,build_module.HY)({queriedData:reducer,edits:(state={},action)=>{var _action$query$context;switch(action.type){case"RECEIVE_ITEMS":if("default"!==(null!==(_action$query$context=action?.query?.context)&&void 0!==_action$query$context?_action$query$context:"default"))return state;const nextState={...state};for(const record of action.items){const recordId=record?.[action.key],edits=nextState[recordId];if(!edits)continue;const nextEdits=Object.keys(edits).reduce(((acc,key)=>{var _record$key$raw;return es6_default()(edits[key],null!==(_record$key$raw=record[key]?.raw)&&void 0!==_record$key$raw?_record$key$raw:record[key])||action.persistedEdits&&es6_default()(edits[key],action.persistedEdits[key])||(acc[key]=edits[key]),acc}),{});Object.keys(nextEdits).length?nextState[recordId]=nextEdits:delete nextState[recordId]}return nextState;case"EDIT_ENTITY_RECORD":const nextEdits={...state[action.recordId],...action.edits};return Object.keys(nextEdits).forEach((key=>{void 0===nextEdits[key]&&delete nextEdits[key]})),{...state,[action.recordId]:nextEdits}}return state},saving:(state={},action)=>{switch(action.type){case"SAVE_ENTITY_RECORD_START":case"SAVE_ENTITY_RECORD_FINISH":return{...state,[action.recordId]:{pending:"SAVE_ENTITY_RECORD_START"===action.type,error:action.error,isAutosave:action.isAutosave}}}return state},deleting:(state={},action)=>{switch(action.type){case"DELETE_ENTITY_RECORD_START":case"DELETE_ENTITY_RECORD_FINISH":return{...state,[action.recordId]:{pending:"DELETE_ENTITY_RECORD_START"===action.type,error:action.error}}}return state},revisions:(state={},action)=>{if("RECEIVE_ITEM_REVISIONS"===action.type){const recordKey=action.recordKey;delete action.recordKey;const newState=reducer(state[recordKey],{...action,type:"RECEIVE_ITEMS"});return{...state,[recordKey]:newState}}return"REMOVE_ITEMS"===action.type?Object.fromEntries(Object.entries(state).filter((([id])=>!action.itemIds.some((itemId=>Number.isInteger(itemId)?itemId===+id:itemId===id))))):state}}))}const build_module_reducer=(0,build_module.HY)({terms:function terms(state={},action){return"RECEIVE_TERMS"===action.type?{...state,[action.taxonomy]:action.terms}:state},users:function users(state={byId:{},queries:{}},action){return"RECEIVE_USER_QUERY"===action.type?{byId:{...state.byId,...action.users.reduce(((newUsers,user)=>({...newUsers,[user.id]:user})),{})},queries:{...state.queries,[action.queryID]:action.users.map((user=>user.id))}}:state},currentTheme:function currentTheme(state=void 0,action){return"RECEIVE_CURRENT_THEME"===action.type?action.currentTheme.stylesheet:state},currentGlobalStylesId:function currentGlobalStylesId(state=void 0,action){return"RECEIVE_CURRENT_GLOBAL_STYLES_ID"===action.type?action.id:state},currentUser:function currentUser(state={},action){return"RECEIVE_CURRENT_USER"===action.type?action.currentUser:state},themeGlobalStyleVariations:function themeGlobalStyleVariations(state={},action){return"RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS"===action.type?{...state,[action.stylesheet]:action.variations}:state},themeBaseGlobalStyles:function themeBaseGlobalStyles(state={},action){return"RECEIVE_THEME_GLOBAL_STYLES"===action.type?{...state,[action.stylesheet]:action.globalStyles}:state},themeGlobalStyleRevisions:function themeGlobalStyleRevisions(state={},action){return"RECEIVE_THEME_GLOBAL_STYLE_REVISIONS"===action.type?{...state,[action.currentId]:action.revisions}:state},taxonomies:function taxonomies(state=[],action){return"RECEIVE_TAXONOMIES"===action.type?action.taxonomies:state},entities:(state={},action)=>{const newConfig=function entitiesConfig(state=rootEntitiesConfig,action){return"ADD_ENTITIES"===action.type?[...state,...action.entities]:state}(state.config,action);let entitiesDataReducer=state.reducer;if(!entitiesDataReducer||newConfig!==state.config){const entitiesByKind=newConfig.reduce(((acc,record)=>{const{kind}=record;return acc[kind]||(acc[kind]=[]),acc[kind].push(record),acc}),{});entitiesDataReducer=(0,build_module.HY)(Object.entries(entitiesByKind).reduce(((memo,[kind,subEntities])=>{const kindReducer=(0,build_module.HY)(subEntities.reduce(((kindMemo,entityConfig)=>({...kindMemo,[entityConfig.name]:entity(entityConfig)})),{}));return memo[kind]=kindReducer,memo}),{}))}const newData=entitiesDataReducer(state.records,action);return newData===state.records&&newConfig===state.config&&entitiesDataReducer===state.reducer?state:{reducer:entitiesDataReducer,records:newData,config:newConfig}},editsReference:function editsReference(state={},action){switch(action.type){case"EDIT_ENTITY_RECORD":case"UNDO":case"REDO":return{}}return state},undoManager:function undoManager(state=(0,undo_manager_build_module.u)()){return state},embedPreviews:function embedPreviews(state={},action){if("RECEIVE_EMBED_PREVIEW"===action.type){const{url,preview}=action;return{...state,[url]:preview}}return state},userPermissions:function userPermissions(state={},action){switch(action.type){case"RECEIVE_USER_PERMISSION":return{...state,[action.key]:action.isAllowed};case"RECEIVE_USER_PERMISSIONS":return{...state,...action.permissions}}return state},autosaves:function autosaves(state={},action){if("RECEIVE_AUTOSAVES"===action.type){const{postId,autosaves:autosavesData}=action;return{...state,[postId]:autosavesData}}return state},blockPatterns:function blockPatterns(state=[],action){return"RECEIVE_BLOCK_PATTERNS"===action.type?action.patterns:state},blockPatternCategories:function blockPatternCategories(state=[],action){return"RECEIVE_BLOCK_PATTERN_CATEGORIES"===action.type?action.categories:state},userPatternCategories:function userPatternCategories(state=[],action){return"RECEIVE_USER_PATTERN_CATEGORIES"===action.type?action.patternCategories:state},navigationFallbackId:function navigationFallbackId(state=null,action){return"RECEIVE_NAVIGATION_FALLBACK_ID"===action.type?action.fallbackId:state},defaultTemplates:function defaultTemplates(state={},action){return"RECEIVE_DEFAULT_TEMPLATE"===action.type?{...state,[JSON.stringify(action.query)]:action.templateId}:state},registeredPostMeta:function registeredPostMeta(state={},action){return"RECEIVE_REGISTERED_POST_META"===action.type?{...state,[action.postType]:action.registeredPostMeta}:state}});var factory=__webpack_require__("./packages/data/build-module/factory.js"),rememo=__webpack_require__("./node_modules/rememo/rememo.js"),equivalent_key_map=__webpack_require__("./node_modules/equivalent-key-map/equivalent-key-map.js"),equivalent_key_map_default=__webpack_require__.n(equivalent_key_map);const queriedItemsCacheByState=new WeakMap;const getQueriedItems=(0,rememo.A)(((state,query={})=>{let queriedItemsCache=queriedItemsCacheByState.get(state);if(queriedItemsCache){const queriedItems=queriedItemsCache.get(query);if(void 0!==queriedItems)return queriedItems}else queriedItemsCache=new(equivalent_key_map_default()),queriedItemsCacheByState.set(state,queriedItemsCache);const items=function getQueriedItemsUncached(state,query){const{stableKey,page,perPage,include,fields,context}=get_query_parts(query);let itemIds;if(state.queries?.[context]?.[stableKey]&&(itemIds=state.queries[context][stableKey].itemIds),!itemIds)return null;const startOffset=-1===perPage?0:(page-1)*perPage,endOffset=-1===perPage?itemIds.length:Math.min(startOffset+perPage,itemIds.length),items=[];for(let i=startOffset;i<endOffset;i++){const itemId=itemIds[i];if(Array.isArray(include)&&!include.includes(itemId))continue;if(void 0===itemId)continue;if(!state.items[context]?.hasOwnProperty(itemId))return null;const item=state.items[context][itemId];let filteredItem;if(Array.isArray(fields)){filteredItem={};for(let f=0;f<fields.length;f++){const field=fields[f].split(".");let value=item;field.forEach((fieldName=>{value=value?.[fieldName]})),setNestedValue(filteredItem,field,value)}}else{if(!state.itemIsComplete[context]?.[itemId])return null;filteredItem=item}items.push(filteredItem)}return items}(state,query);return queriedItemsCache.set(query,items),items}));function getQueriedTotalItems(state,query={}){var _state$queries$contex;const{stableKey,context}=get_query_parts(query);return null!==(_state$queries$contex=state.queries?.[context]?.[stableKey]?.meta?.totalItems)&&void 0!==_state$queries$contex?_state$queries$contex:null}const ALLOWED_RESOURCE_ACTIONS=["create","read","update","delete"];function getUserPermissionsFromAllowHeader(allowedMethods){const permissions={};if(!allowedMethods)return permissions;const methods={create:"POST",read:"GET",update:"PUT",delete:"DELETE"};for(const[actionName,methodName]of Object.entries(methods))permissions[actionName]=allowedMethods.includes(methodName);return permissions}function getUserPermissionCacheKey(action,resource,id){return("object"==typeof resource?[action,resource.kind,resource.name,resource.id]:[action,resource,id]).filter(Boolean).join("/")}const EMPTY_OBJECT={},isRequestingEmbedPreview=(0,factory.N)((select=>(state,url)=>select(STORE_NAME).isResolving("getEmbedPreview",[url])));function getAuthors(state,query){(0,deprecated_build_module.A)("select( 'core' ).getAuthors()",{since:"5.9",alternative:"select( 'core' ).getUsers({ who: 'authors' })"});const path=(0,add_query_args.F)("/wp/v2/users/?who=authors&per_page=100",query);return getUserQueryResults(state,path)}function getCurrentUser(state){return state.currentUser}const getUserQueryResults=(0,rememo.A)(((state,queryID)=>{var _state$users$queries$;return(null!==(_state$users$queries$=state.users.queries[queryID])&&void 0!==_state$users$queries$?_state$users$queries$:[]).map((id=>state.users.byId[id]))}),((state,queryID)=>[state.users.queries[queryID],state.users.byId]));function getEntitiesByKind(state,kind){return(0,deprecated_build_module.A)("wp.data.select( 'core' ).getEntitiesByKind()",{since:"6.0",alternative:"wp.data.select( 'core' ).getEntitiesConfig()"}),getEntitiesConfig(state,kind)}const getEntitiesConfig=(0,rememo.A)(((state,kind)=>state.entities.config.filter((entity=>entity.kind===kind))),((state,kind)=>state.entities.config));function getEntity(state,kind,name){return(0,deprecated_build_module.A)("wp.data.select( 'core' ).getEntity()",{since:"6.0",alternative:"wp.data.select( 'core' ).getEntityConfig()"}),getEntityConfig(state,kind,name)}function getEntityConfig(state,kind,name){return state.entities.config?.find((config=>config.kind===kind&&config.name===name))}const getEntityRecord=(0,rememo.A)(((state,kind,name,key,query)=>{var _query$context;const queriedState=state.entities.records?.[kind]?.[name]?.queriedData;if(!queriedState)return;const context=null!==(_query$context=query?.context)&&void 0!==_query$context?_query$context:"default";if(void 0===query){if(!queriedState.itemIsComplete[context]?.[key])return;return queriedState.items[context][key]}const item=queriedState.items[context]?.[key];if(item&&query._fields){var _getNormalizedCommaSe;const filteredItem={},fields=null!==(_getNormalizedCommaSe=get_normalized_comma_separable(query._fields))&&void 0!==_getNormalizedCommaSe?_getNormalizedCommaSe:[];for(let f=0;f<fields.length;f++){const field=fields[f].split(".");let value=item;field.forEach((fieldName=>{value=value?.[fieldName]})),setNestedValue(filteredItem,field,value)}return filteredItem}return item}),((state,kind,name,recordId,query)=>{var _query$context2;const context=null!==(_query$context2=query?.context)&&void 0!==_query$context2?_query$context2:"default";return[state.entities.records?.[kind]?.[name]?.queriedData?.items[context]?.[recordId],state.entities.records?.[kind]?.[name]?.queriedData?.itemIsComplete[context]?.[recordId]]}));function __experimentalGetEntityRecordNoResolver(state,kind,name,key){return getEntityRecord(state,kind,name,key)}getEntityRecord.__unstableNormalizeArgs=args=>{const newArgs=[...args],recordKey=newArgs?.[2];return newArgs[2]=function isNumericID(id){return/^\s*\d+\s*$/.test(id)}(recordKey)?Number(recordKey):recordKey,newArgs};const getRawEntityRecord=(0,rememo.A)(((state,kind,name,key)=>{const record=getEntityRecord(state,kind,name,key);return record&&Object.keys(record).reduce(((accumulator,_key)=>{var _record$_key$raw;(function isRawAttribute(entity,attribute){return(entity.rawAttributes||[]).includes(attribute)})(getEntityConfig(state,kind,name),_key)?accumulator[_key]=null!==(_record$_key$raw=record[_key]?.raw)&&void 0!==_record$_key$raw?_record$_key$raw:record[_key]:accumulator[_key]=record[_key];return accumulator}),{})}),((state,kind,name,recordId,query)=>{var _query$context3;const context=null!==(_query$context3=query?.context)&&void 0!==_query$context3?_query$context3:"default";return[state.entities.config,state.entities.records?.[kind]?.[name]?.queriedData?.items[context]?.[recordId],state.entities.records?.[kind]?.[name]?.queriedData?.itemIsComplete[context]?.[recordId]]}));function hasEntityRecords(state,kind,name,query){return Array.isArray(getEntityRecords(state,kind,name,query))}const getEntityRecords=(state,kind,name,query)=>{const queriedState=state.entities.records?.[kind]?.[name]?.queriedData;return queriedState?getQueriedItems(queriedState,query):null},getEntityRecordsTotalItems=(state,kind,name,query)=>{const queriedState=state.entities.records?.[kind]?.[name]?.queriedData;return queriedState?getQueriedTotalItems(queriedState,query):null},getEntityRecordsTotalPages=(state,kind,name,query)=>{const queriedState=state.entities.records?.[kind]?.[name]?.queriedData;if(!queriedState)return null;if(-1===query.per_page)return 1;const totalItems=getQueriedTotalItems(queriedState,query);return totalItems?query.per_page?Math.ceil(totalItems/query.per_page):function getQueriedTotalPages(state,query={}){var _state$queries$contex2;const{stableKey,context}=get_query_parts(query);return null!==(_state$queries$contex2=state.queries?.[context]?.[stableKey]?.meta?.totalPages)&&void 0!==_state$queries$contex2?_state$queries$contex2:null}(queriedState,query):totalItems},__experimentalGetDirtyEntityRecords=(0,rememo.A)((state=>{const{entities:{records}}=state,dirtyRecords=[];return Object.keys(records).forEach((kind=>{Object.keys(records[kind]).forEach((name=>{const primaryKeys=Object.keys(records[kind][name].edits).filter((primaryKey=>getEntityRecord(state,kind,name,primaryKey)&&hasEditsForEntityRecord(state,kind,name,primaryKey)));if(primaryKeys.length){const entityConfig=getEntityConfig(state,kind,name);primaryKeys.forEach((primaryKey=>{const entityRecord=getEditedEntityRecord(state,kind,name,primaryKey);dirtyRecords.push({key:entityRecord?entityRecord[entityConfig.key||DEFAULT_ENTITY_KEY]:void 0,title:entityConfig?.getTitle?.(entityRecord)||"",name,kind})}))}}))})),dirtyRecords}),(state=>[state.entities.records])),__experimentalGetEntitiesBeingSaved=(0,rememo.A)((state=>{const{entities:{records}}=state,recordsBeingSaved=[];return Object.keys(records).forEach((kind=>{Object.keys(records[kind]).forEach((name=>{const primaryKeys=Object.keys(records[kind][name].saving).filter((primaryKey=>isSavingEntityRecord(state,kind,name,primaryKey)));if(primaryKeys.length){const entityConfig=getEntityConfig(state,kind,name);primaryKeys.forEach((primaryKey=>{const entityRecord=getEditedEntityRecord(state,kind,name,primaryKey);recordsBeingSaved.push({key:entityRecord?entityRecord[entityConfig.key||DEFAULT_ENTITY_KEY]:void 0,title:entityConfig?.getTitle?.(entityRecord)||"",name,kind})}))}}))})),recordsBeingSaved}),(state=>[state.entities.records]));function getEntityRecordEdits(state,kind,name,recordId){return state.entities.records?.[kind]?.[name]?.edits?.[recordId]}const getEntityRecordNonTransientEdits=(0,rememo.A)(((state,kind,name,recordId)=>{const{transientEdits}=getEntityConfig(state,kind,name)||{},edits=getEntityRecordEdits(state,kind,name,recordId)||{};return transientEdits?Object.keys(edits).reduce(((acc,key)=>(transientEdits[key]||(acc[key]=edits[key]),acc)),{}):edits}),((state,kind,name,recordId)=>[state.entities.config,state.entities.records?.[kind]?.[name]?.edits?.[recordId]]));function hasEditsForEntityRecord(state,kind,name,recordId){return isSavingEntityRecord(state,kind,name,recordId)||Object.keys(getEntityRecordNonTransientEdits(state,kind,name,recordId)).length>0}const getEditedEntityRecord=(0,rememo.A)(((state,kind,name,recordId)=>{const raw=getRawEntityRecord(state,kind,name,recordId),edited=getEntityRecordEdits(state,kind,name,recordId);return!(!raw&&!edited)&&{...raw,...edited}}),((state,kind,name,recordId,query)=>{var _query$context4;const context=null!==(_query$context4=query?.context)&&void 0!==_query$context4?_query$context4:"default";return[state.entities.config,state.entities.records?.[kind]?.[name]?.queriedData.items[context]?.[recordId],state.entities.records?.[kind]?.[name]?.queriedData.itemIsComplete[context]?.[recordId],state.entities.records?.[kind]?.[name]?.edits?.[recordId]]}));function isAutosavingEntityRecord(state,kind,name,recordId){var _state$entities$recor;const{pending,isAutosave}=null!==(_state$entities$recor=state.entities.records?.[kind]?.[name]?.saving?.[recordId])&&void 0!==_state$entities$recor?_state$entities$recor:{};return Boolean(pending&&isAutosave)}function isSavingEntityRecord(state,kind,name,recordId){var _state$entities$recor2;return null!==(_state$entities$recor2=state.entities.records?.[kind]?.[name]?.saving?.[recordId]?.pending)&&void 0!==_state$entities$recor2&&_state$entities$recor2}function isDeletingEntityRecord(state,kind,name,recordId){var _state$entities$recor3;return null!==(_state$entities$recor3=state.entities.records?.[kind]?.[name]?.deleting?.[recordId]?.pending)&&void 0!==_state$entities$recor3&&_state$entities$recor3}function getLastEntitySaveError(state,kind,name,recordId){return state.entities.records?.[kind]?.[name]?.saving?.[recordId]?.error}function getLastEntityDeleteError(state,kind,name,recordId){return state.entities.records?.[kind]?.[name]?.deleting?.[recordId]?.error}function getUndoEdit(state){(0,deprecated_build_module.A)("select( 'core' ).getUndoEdit()",{since:"6.3"})}function getRedoEdit(state){(0,deprecated_build_module.A)("select( 'core' ).getRedoEdit()",{since:"6.3"})}function hasUndo(state){return state.undoManager.hasUndo()}function hasRedo(state){return state.undoManager.hasRedo()}function getCurrentTheme(state){return state.currentTheme?getEntityRecord(state,"root","theme",state.currentTheme):null}function __experimentalGetCurrentGlobalStylesId(state){return state.currentGlobalStylesId}function getThemeSupports(state){var _getCurrentTheme$them;return null!==(_getCurrentTheme$them=getCurrentTheme(state)?.theme_supports)&&void 0!==_getCurrentTheme$them?_getCurrentTheme$them:EMPTY_OBJECT}function getEmbedPreview(state,url){return state.embedPreviews[url]}function isPreviewEmbedFallback(state,url){const preview=state.embedPreviews[url],oEmbedLinkCheck='<a href="'+url+'">'+url+"</a>";return!!preview&&preview.html===oEmbedLinkCheck}function canUser(state,action,resource,id){if("object"==typeof resource&&(!resource.kind||!resource.name))return!1;const key=getUserPermissionCacheKey(action,resource,id);return state.userPermissions[key]}function canUserEditEntityRecord(state,kind,name,recordId){return(0,deprecated_build_module.A)("wp.data.select( 'core' ).canUserEditEntityRecord()",{since:"6.7",alternative:"wp.data.select( 'core' ).canUser( 'update', { kind, name, id } )"}),canUser(state,"update",{kind,name,id:recordId})}function getAutosaves(state,postType,postId){return state.autosaves[postId]}function getAutosave(state,postType,postId,authorId){if(void 0===authorId)return;const autosaves=state.autosaves[postId];return autosaves?.find((autosave=>autosave.author===authorId))}const hasFetchedAutosaves=(0,factory.N)((select=>(state,postType,postId)=>select(STORE_NAME).hasFinishedResolution("getAutosaves",[postType,postId])));function getReferenceByDistinctEdits(state){return state.editsReference}function __experimentalGetTemplateForLink(state,link){const records=getEntityRecords(state,"postType","wp_template",{"find-template":link});return records?.length?getEditedEntityRecord(state,"postType","wp_template",records[0].id):null}function __experimentalGetCurrentThemeBaseGlobalStyles(state){const currentTheme=getCurrentTheme(state);return currentTheme?state.themeBaseGlobalStyles[currentTheme.stylesheet]:null}function __experimentalGetCurrentThemeGlobalStylesVariations(state){const currentTheme=getCurrentTheme(state);return currentTheme?state.themeGlobalStyleVariations[currentTheme.stylesheet]:null}function getBlockPatterns(state){return state.blockPatterns}function getBlockPatternCategories(state){return state.blockPatternCategories}function getUserPatternCategories(state){return state.userPatternCategories}function getCurrentThemeGlobalStylesRevisions(state){(0,deprecated_build_module.A)("select( 'core' ).getCurrentThemeGlobalStylesRevisions()",{since:"6.5.0",alternative:"select( 'core' ).getRevisions( 'root', 'globalStyles', ${ recordKey } )"});const currentGlobalStylesId=__experimentalGetCurrentGlobalStylesId(state);return currentGlobalStylesId?state.themeGlobalStyleRevisions[currentGlobalStylesId]:null}function getDefaultTemplateId(state,query){return state.defaultTemplates[JSON.stringify(query)]}const getRevisions=(state,kind,name,recordKey,query)=>{const queriedStateRevisions=state.entities.records?.[kind]?.[name]?.revisions?.[recordKey];return queriedStateRevisions?getQueriedItems(queriedStateRevisions,query):null},getRevision=(0,rememo.A)(((state,kind,name,recordKey,revisionKey,query)=>{var _query$context5;const queriedState=state.entities.records?.[kind]?.[name]?.revisions?.[recordKey];if(!queriedState)return;const context=null!==(_query$context5=query?.context)&&void 0!==_query$context5?_query$context5:"default";if(void 0===query){if(!queriedState.itemIsComplete[context]?.[revisionKey])return;return queriedState.items[context][revisionKey]}const item=queriedState.items[context]?.[revisionKey];if(item&&query._fields){var _getNormalizedCommaSe2;const filteredItem={},fields=null!==(_getNormalizedCommaSe2=get_normalized_comma_separable(query._fields))&&void 0!==_getNormalizedCommaSe2?_getNormalizedCommaSe2:[];for(let f=0;f<fields.length;f++){const field=fields[f].split(".");let value=item;field.forEach((fieldName=>{value=value?.[fieldName]})),setNestedValue(filteredItem,field,value)}return filteredItem}return item}),((state,kind,name,recordKey,revisionKey,query)=>{var _query$context6;const context=null!==(_query$context6=query?.context)&&void 0!==_query$context6?_query$context6:"default";return[state.entities.records?.[kind]?.[name]?.revisions?.[recordKey]?.items?.[context]?.[revisionKey],state.entities.records?.[kind]?.[name]?.revisions?.[recordKey]?.itemIsComplete?.[context]?.[revisionKey]]}));function getUndoManager(state){return state.undoManager}function getNavigationFallbackId(state){return state.navigationFallbackId}const getBlockPatternsForPostType=(0,factory.N)((select=>(0,rememo.A)(((state,postType)=>select(STORE_NAME).getBlockPatterns().filter((({postTypes})=>!postTypes||Array.isArray(postTypes)&&postTypes.includes(postType)))),(()=>[select(STORE_NAME).getBlockPatterns()])))),getEntityRecordsPermissions=(0,factory.N)((select=>(0,rememo.A)(((state,kind,name,ids)=>(Array.isArray(ids)?ids:[ids]).map((id=>({delete:select(STORE_NAME).canUser("delete",{kind,name,id}),update:select(STORE_NAME).canUser("update",{kind,name,id})})))),(state=>[state.userPermissions]))));function getEntityRecordPermissions(state,kind,name,id){return getEntityRecordsPermissions(state,kind,name,id)[0]}function getRegisteredPostMeta(state,postType){var _state$registeredPost;return null!==(_state$registeredPost=state.registeredPostMeta?.[postType])&&void 0!==_state$registeredPost?_state$registeredPost:{}}function receiveRegisteredPostMeta(postType,registeredPostMeta){return{type:"RECEIVE_REGISTERED_POST_META",postType,registeredPostMeta}}var camel_case_dist_es2015=__webpack_require__("./node_modules/camel-case/dist.es2015/index.js"),html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js");const forward_resolver=resolverName=>(...args)=>async({resolveSelect})=>{await resolveSelect[resolverName](...args)};async function fetchLinkSuggestions(search,searchOptions={},editorSettings={}){const searchOptionsToUse=searchOptions.isInitialSuggestions&&searchOptions.initialSuggestionsSearchOptions?{...searchOptions,...searchOptions.initialSuggestionsSearchOptions}:searchOptions,{type,subtype,page,perPage=searchOptions.isInitialSuggestions?3:20}=searchOptionsToUse,{disablePostFormats=!1}=editorSettings,queries=[];type&&"post"!==type||queries.push((0,api_fetch_build_module.A)({path:(0,add_query_args.F)("/wp/v2/search",{search,page,per_page:perPage,type:"post",subtype})}).then((results=>results.map((result=>({id:result.id,url:result.url,title:(0,html_entities_build_module.S)(result.title||"")||(0,i18n_build_module.__)("(no title)"),type:result.subtype||result.type,kind:"post-type"}))))).catch((()=>[]))),type&&"term"!==type||queries.push((0,api_fetch_build_module.A)({path:(0,add_query_args.F)("/wp/v2/search",{search,page,per_page:perPage,type:"term",subtype})}).then((results=>results.map((result=>({id:result.id,url:result.url,title:(0,html_entities_build_module.S)(result.title||"")||(0,i18n_build_module.__)("(no title)"),type:result.subtype||result.type,kind:"taxonomy"}))))).catch((()=>[]))),disablePostFormats||type&&"post-format"!==type||queries.push((0,api_fetch_build_module.A)({path:(0,add_query_args.F)("/wp/v2/search",{search,page,per_page:perPage,type:"post-format",subtype})}).then((results=>results.map((result=>({id:result.id,url:result.url,title:(0,html_entities_build_module.S)(result.title||"")||(0,i18n_build_module.__)("(no title)"),type:result.subtype||result.type,kind:"taxonomy"}))))).catch((()=>[]))),type&&"attachment"!==type||queries.push((0,api_fetch_build_module.A)({path:(0,add_query_args.F)("/wp/v2/media",{search,page,per_page:perPage})}).then((results=>results.map((result=>({id:result.id,url:result.source_url,title:(0,html_entities_build_module.S)(result.title.rendered||"")||(0,i18n_build_module.__)("(no title)"),type:result.type,kind:"media"}))))).catch((()=>[])));let results=(await Promise.all(queries)).flat();return results=results.filter((result=>!!result.id)),results=function sortResults(results,search){const searchTokens=tokenize(search),scores={};for(const result of results)if(result.title){const titleTokens=tokenize(result.title),matchingTokens=titleTokens.filter((titleToken=>searchTokens.some((searchToken=>titleToken.includes(searchToken)))));scores[result.id]=matchingTokens.length/titleTokens.length}else scores[result.id]=0;return results.sort(((a,b)=>scores[b.id]-scores[a.id]))}(results,search),results=results.slice(0,perPage),results}function tokenize(text){return text.toLowerCase().match(/[\p{L}\p{N}]+/gu)||[]}var prepend_http=__webpack_require__("./packages/url/build-module/prepend-http.js"),is_url=__webpack_require__("./packages/url/build-module/is-url.js"),get_protocol=__webpack_require__("./packages/url/build-module/get-protocol.js"),is_valid_protocol=__webpack_require__("./packages/url/build-module/is-valid-protocol.js");const CACHE=new Map,_experimental_fetch_url_data=async(url,options={})=>{const args={url:(0,prepend_http.N)(url)};if(!(0,is_url.m)(url))return Promise.reject(`${url} is not a valid URL.`);const protocol=(0,get_protocol.J)(url);return protocol&&(0,is_valid_protocol.v)(protocol)&&protocol.startsWith("http")&&/^https?:\/\/[^\/\s]/i.test(url)?CACHE.has(url)?CACHE.get(url):(0,api_fetch_build_module.A)({path:(0,add_query_args.F)("/wp-block-editor/v1/url-details",args),...options}).then((res=>(CACHE.set(url,res),res))):Promise.reject(`${url} does not have a valid protocol. URLs must be "http" based`)};const resolvers_getAuthors=query=>async({dispatch})=>{const path=(0,add_query_args.F)("/wp/v2/users/?who=authors&per_page=100",query),users=await(0,api_fetch_build_module.A)({path});dispatch.receiveUserQuery(path,users)},resolvers_getCurrentUser=()=>async({dispatch})=>{const currentUser=await(0,api_fetch_build_module.A)({path:"/wp/v2/users/me"});dispatch.receiveCurrentUser(currentUser)},resolvers_getEntityRecord=(kind,name,key="",query)=>async({select,dispatch,registry})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind,name))).find((config=>config.name===name&&config.kind===kind));if(!entityConfig)return;const lock=await dispatch.__unstableAcquireStoreLock(STORE_NAME,["entities","records",kind,name,key],{exclusive:!1});try{if(window.__experimentalEnableSync&&entityConfig.syncConfig&&!query){if(globalThis.IS_GUTENBERG_PLUGIN){const objectId=entityConfig.getSyncObjectId(key);await getSyncProvider().bootstrap(entityConfig.syncObjectType,objectId,(record=>{dispatch.receiveEntityRecords(kind,name,record,query)})),await getSyncProvider().bootstrap(entityConfig.syncObjectType+"--edit",objectId,(record=>{dispatch({type:"EDIT_ENTITY_RECORD",kind,name,recordId:key,edits:record,meta:{undo:void 0}})}))}}else{void 0!==query&&query._fields&&(query={...query,_fields:[...new Set([...get_normalized_comma_separable(query._fields)||[],entityConfig.key||DEFAULT_ENTITY_KEY])].join()});const path=(0,add_query_args.F)(entityConfig.baseURL+(key?"/"+key:""),{...entityConfig.baseURLParams,...query});if(void 0!==query&&query._fields){query={...query,include:[key]};if(select.hasEntityRecords(kind,name,query))return}const response=await(0,api_fetch_build_module.A)({path,parse:!1}),record=await response.json(),permissions=getUserPermissionsFromAllowHeader(response.headers?.get("allow")),canUserResolutionsArgs=[],receiveUserPermissionArgs={};for(const action of ALLOWED_RESOURCE_ACTIONS)receiveUserPermissionArgs[getUserPermissionCacheKey(action,{kind,name,id:key})]=permissions[action],canUserResolutionsArgs.push([action,{kind,name,id:key}]);registry.batch((()=>{dispatch.receiveEntityRecords(kind,name,record,query),dispatch.receiveUserPermissions(receiveUserPermissionArgs),dispatch.finishResolutions("canUser",canUserResolutionsArgs)}))}}finally{dispatch.__unstableReleaseStoreLock(lock)}},resolvers_getRawEntityRecord=forward_resolver("getEntityRecord"),resolvers_getEditedEntityRecord=forward_resolver("getEntityRecord"),resolvers_getEntityRecords=(kind,name,query={})=>async({dispatch,registry})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind,name))).find((config=>config.name===name&&config.kind===kind));if(!entityConfig)return;const lock=await dispatch.__unstableAcquireStoreLock(STORE_NAME,["entities","records",kind,name],{exclusive:!1});try{query._fields&&(query={...query,_fields:[...new Set([...get_normalized_comma_separable(query._fields)||[],entityConfig.key||DEFAULT_ENTITY_KEY])].join()});const path=(0,add_query_args.F)(entityConfig.baseURL,{...entityConfig.baseURLParams,...query});let records,meta;if(entityConfig.supportsPagination&&-1!==query.per_page){const response=await(0,api_fetch_build_module.A)({path,parse:!1});records=Object.values(await response.json()),meta={totalItems:parseInt(response.headers.get("X-WP-Total")),totalPages:parseInt(response.headers.get("X-WP-TotalPages"))}}else records=Object.values(await(0,api_fetch_build_module.A)({path})),meta={totalItems:records.length,totalPages:1};query._fields&&(records=records.map((record=>(query._fields.split(",").forEach((field=>{record.hasOwnProperty(field)||(record[field]=void 0)})),record)))),registry.batch((()=>{if(dispatch.receiveEntityRecords(kind,name,records,query,!1,void 0,meta),!query?._fields&&!query.context){const key=entityConfig.key||DEFAULT_ENTITY_KEY,resolutionsArgs=records.filter((record=>record?.[key])).map((record=>[kind,name,record[key]])),targetHints=records.filter((record=>record?.[key])).map((record=>({id:record[key],permissions:getUserPermissionsFromAllowHeader(record?._links?.self?.[0].targetHints.allow)}))),canUserResolutionsArgs=[],receiveUserPermissionArgs={};for(const targetHint of targetHints)for(const action of ALLOWED_RESOURCE_ACTIONS)canUserResolutionsArgs.push([action,{kind,name,id:targetHint.id}]),receiveUserPermissionArgs[getUserPermissionCacheKey(action,{kind,name,id:targetHint.id})]=targetHint.permissions[action];dispatch.receiveUserPermissions(receiveUserPermissionArgs),dispatch.finishResolutions("getEntityRecord",resolutionsArgs),dispatch.finishResolutions("canUser",canUserResolutionsArgs)}dispatch.__unstableReleaseStoreLock(lock)}))}catch(e){dispatch.__unstableReleaseStoreLock(lock)}};resolvers_getEntityRecords.shouldInvalidate=(action,kind,name)=>("RECEIVE_ITEMS"===action.type||"REMOVE_ITEMS"===action.type)&&action.invalidateCache&&kind===action.kind&&name===action.name;const resolvers_getCurrentTheme=()=>async({dispatch,resolveSelect})=>{const activeThemes=await resolveSelect.getEntityRecords("root","theme",{status:"active"});dispatch.receiveCurrentTheme(activeThemes[0])},resolvers_getThemeSupports=forward_resolver("getCurrentTheme"),resolvers_getEmbedPreview=url=>async({dispatch})=>{try{const embedProxyResponse=await(0,api_fetch_build_module.A)({path:(0,add_query_args.F)("/oembed/1.0/proxy",{url})});dispatch.receiveEmbedPreview(url,embedProxyResponse)}catch(error){dispatch.receiveEmbedPreview(url,!1)}},resolvers_canUser=(requestedAction,resource,id)=>async({dispatch,registry})=>{if(!ALLOWED_RESOURCE_ACTIONS.includes(requestedAction))throw new Error(`'${requestedAction}' is not a valid action.`);let resourcePath=null;if("object"==typeof resource){if(!resource.kind||!resource.name)throw new Error("The entity resource object is not valid.");const entityConfig=(await dispatch(getOrLoadEntitiesConfig(resource.kind,resource.name))).find((config=>config.name===resource.name&&config.kind===resource.kind));if(!entityConfig)return;resourcePath=entityConfig.baseURL+(resource.id?"/"+resource.id:"")}else resourcePath=`/wp/v2/${resource}`+(id?"/"+id:"");const{hasStartedResolution}=registry.select(STORE_NAME);for(const relatedAction of ALLOWED_RESOURCE_ACTIONS){if(relatedAction===requestedAction)continue;if(hasStartedResolution("canUser",[relatedAction,resource,id]))return}let response;try{response=await(0,api_fetch_build_module.A)({path:resourcePath,method:"OPTIONS",parse:!1})}catch(error){return}const permissions=getUserPermissionsFromAllowHeader(response.headers?.get("allow"));registry.batch((()=>{for(const action of ALLOWED_RESOURCE_ACTIONS){const key=getUserPermissionCacheKey(action,resource,id);dispatch.receiveUserPermission(key,permissions[action]),action!==requestedAction&&dispatch.finishResolution("canUser",[action,resource,id])}}))},resolvers_canUserEditEntityRecord=(kind,name,recordId)=>async({dispatch})=>{await dispatch(resolvers_canUser("update",{kind,name,id:recordId}))},resolvers_getAutosaves=(postType,postId)=>async({dispatch,resolveSelect})=>{const{rest_base:restBase,rest_namespace:restNamespace="wp/v2"}=await resolveSelect.getPostType(postType),autosaves=await(0,api_fetch_build_module.A)({path:`/${restNamespace}/${restBase}/${postId}/autosaves?context=edit`});autosaves&&autosaves.length&&dispatch.receiveAutosaves(postId,autosaves)},resolvers_getAutosave=(postType,postId)=>async({resolveSelect})=>{await resolveSelect.getAutosaves(postType,postId)},resolvers_experimentalGetTemplateForLink=link=>async({dispatch,resolveSelect})=>{let template;try{template=await(0,api_fetch_build_module.A)({url:(0,add_query_args.F)(link,{"_wp-find-template":!0})}).then((({data})=>data))}catch(e){}if(!template)return;const record=await resolveSelect.getEntityRecord("postType","wp_template",template.id);record&&dispatch.receiveEntityRecords("postType","wp_template",[record],{"find-template":link})};resolvers_experimentalGetTemplateForLink.shouldInvalidate=action=>("RECEIVE_ITEMS"===action.type||"REMOVE_ITEMS"===action.type)&&action.invalidateCache&&"postType"===action.kind&&"wp_template"===action.name;const resolvers_experimentalGetCurrentGlobalStylesId=()=>async({dispatch,resolveSelect})=>{const activeThemes=await resolveSelect.getEntityRecords("root","theme",{status:"active"}),globalStylesURL=activeThemes?.[0]?._links?.["wp:user-global-styles"]?.[0]?.href;if(!globalStylesURL)return;const matches=globalStylesURL.match(/\/(\d+)(?:\?|$)/),id=matches?Number(matches[1]):null;id&&dispatch.__experimentalReceiveCurrentGlobalStylesId(id)},resolvers_experimentalGetCurrentThemeBaseGlobalStyles=()=>async({resolveSelect,dispatch})=>{const currentTheme=await resolveSelect.getCurrentTheme(),themeGlobalStyles=await(0,api_fetch_build_module.A)({path:`/wp/v2/global-styles/themes/${currentTheme.stylesheet}?context=view`});dispatch.__experimentalReceiveThemeBaseGlobalStyles(currentTheme.stylesheet,themeGlobalStyles)},resolvers_experimentalGetCurrentThemeGlobalStylesVariations=()=>async({resolveSelect,dispatch})=>{const currentTheme=await resolveSelect.getCurrentTheme(),variations=await(0,api_fetch_build_module.A)({path:`/wp/v2/global-styles/themes/${currentTheme.stylesheet}/variations?context=view`});dispatch.__experimentalReceiveThemeGlobalStyleVariations(currentTheme.stylesheet,variations)},resolvers_getCurrentThemeGlobalStylesRevisions=()=>async({resolveSelect,dispatch})=>{const globalStylesId=await resolveSelect.__experimentalGetCurrentGlobalStylesId(),record=globalStylesId?await resolveSelect.getEntityRecord("root","globalStyles",globalStylesId):void 0,revisionsURL=record?._links?.["version-history"]?.[0]?.href;if(revisionsURL){const resetRevisions=await(0,api_fetch_build_module.A)({url:revisionsURL}),revisions=resetRevisions?.map((revision=>Object.fromEntries(Object.entries(revision).map((([key,value])=>[(0,camel_case_dist_es2015.xQ)(key),value])))));dispatch.receiveThemeGlobalStyleRevisions(globalStylesId,revisions)}};resolvers_getCurrentThemeGlobalStylesRevisions.shouldInvalidate=action=>"SAVE_ENTITY_RECORD_FINISH"===action.type&&"root"===action.kind&&!action.error&&"globalStyles"===action.name;const resolvers_getBlockPatterns=()=>async({dispatch})=>{dispatch({type:"RECEIVE_BLOCK_PATTERNS",patterns:await async function fetchBlockPatterns(){const restPatterns=await(0,api_fetch_build_module.A)({path:"/wp/v2/block-patterns/patterns"});return restPatterns?restPatterns.map((pattern=>Object.fromEntries(Object.entries(pattern).map((([key,value])=>[(0,camel_case_dist_es2015.xQ)(key),value]))))):[]}()})},resolvers_getBlockPatternCategories=()=>async({dispatch})=>{dispatch({type:"RECEIVE_BLOCK_PATTERN_CATEGORIES",categories:await(0,api_fetch_build_module.A)({path:"/wp/v2/block-patterns/categories"})})},resolvers_getUserPatternCategories=()=>async({dispatch,resolveSelect})=>{const patternCategories=await resolveSelect.getEntityRecords("taxonomy","wp_pattern_category",{per_page:-1,_fields:"id,name,description,slug",context:"view"});dispatch({type:"RECEIVE_USER_PATTERN_CATEGORIES",patternCategories:patternCategories?.map((userCategory=>({...userCategory,label:(0,html_entities_build_module.S)(userCategory.name),name:userCategory.slug})))||[]})},resolvers_getNavigationFallbackId=()=>async({dispatch,select,registry})=>{const fallback=await(0,api_fetch_build_module.A)({path:(0,add_query_args.F)("/wp-block-editor/v1/navigation-fallback",{_embed:!0})}),record=fallback?._embedded?.self;registry.batch((()=>{if(dispatch.receiveNavigationFallbackId(fallback?.id),!record)return;const invalidateNavigationQueries=!select.getEntityRecord("postType","wp_navigation",fallback.id);dispatch.receiveEntityRecords("postType","wp_navigation",record,void 0,invalidateNavigationQueries),dispatch.finishResolution("getEntityRecord",["postType","wp_navigation",fallback.id])}))},resolvers_getDefaultTemplateId=query=>async({dispatch})=>{const template=await(0,api_fetch_build_module.A)({path:(0,add_query_args.F)("/wp/v2/templates/lookup",query)});template?.id&&dispatch.receiveDefaultTemplateId(query,template.id)},resolvers_getRevisions=(kind,name,recordKey,query={})=>async({dispatch,registry})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind,name))).find((config=>config.name===name&&config.kind===kind));if(!entityConfig)return;query._fields&&(query={...query,_fields:[...new Set([...get_normalized_comma_separable(query._fields)||[],entityConfig.revisionKey||DEFAULT_ENTITY_KEY])].join()});const path=(0,add_query_args.F)(entityConfig.getRevisionsUrl(recordKey),query);let records,response;const meta={},isPaginated=entityConfig.supportsPagination&&-1!==query.per_page;try{response=await(0,api_fetch_build_module.A)({path,parse:!isPaginated})}catch(error){return}response&&(isPaginated?(records=Object.values(await response.json()),meta.totalItems=parseInt(response.headers.get("X-WP-Total"))):records=Object.values(response),query._fields&&(records=records.map((record=>(query._fields.split(",").forEach((field=>{record.hasOwnProperty(field)||(record[field]=void 0)})),record)))),registry.batch((()=>{if(dispatch.receiveRevisions(kind,name,recordKey,records,query,!1,meta),!query?._fields&&!query.context){const key=entityConfig.key||DEFAULT_ENTITY_KEY,resolutionsArgs=records.filter((record=>record[key])).map((record=>[kind,name,recordKey,record[key]]));dispatch.finishResolutions("getRevision",resolutionsArgs)}})))};resolvers_getRevisions.shouldInvalidate=(action,kind,name,recordKey)=>"SAVE_ENTITY_RECORD_FINISH"===action.type&&name===action.name&&kind===action.kind&&!action.error&&recordKey===action.recordId;const resolvers_getRevision=(kind,name,recordKey,revisionKey,query)=>async({dispatch})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind,name))).find((config=>config.name===name&&config.kind===kind));if(!entityConfig)return;void 0!==query&&query._fields&&(query={...query,_fields:[...new Set([...get_normalized_comma_separable(query._fields)||[],entityConfig.revisionKey||DEFAULT_ENTITY_KEY])].join()});const path=(0,add_query_args.F)(entityConfig.getRevisionsUrl(recordKey,revisionKey),query);let record;try{record=await(0,api_fetch_build_module.A)({path})}catch(error){return}record&&dispatch.receiveRevisions(kind,name,recordKey,record,query)},resolvers_getRegisteredPostMeta=postType=>async({dispatch,resolveSelect})=>{let options;try{const{rest_namespace:restNamespace="wp/v2",rest_base:restBase}=await resolveSelect.getPostType(postType)||{};options=await(0,api_fetch_build_module.A)({path:`${restNamespace}/${restBase}/?context=edit`,method:"OPTIONS"})}catch(error){return}options&&dispatch.receiveRegisteredPostMeta(postType,options?.schema?.properties?.meta?.properties)};function deepCopyLocksTreePath(tree,path){const newTree={...tree};let currentNode=newTree;for(const branchName of path)currentNode.children={...currentNode.children,[branchName]:{locks:[],children:{},...currentNode.children[branchName]}},currentNode=currentNode.children[branchName];return newTree}function getNode(tree,path){let currentNode=tree;for(const branchName of path){const nextNode=currentNode.children[branchName];if(!nextNode)return null;currentNode=nextNode}return currentNode}function hasConflictingLock({exclusive},locks){return!(!exclusive||!locks.length)||!(exclusive||!locks.filter((lock=>lock.exclusive)).length)}const DEFAULT_STATE={requests:[],tree:{locks:[],children:{}}};function locks(state=DEFAULT_STATE,action){switch(action.type){case"ENQUEUE_LOCK_REQUEST":{const{request}=action;return{...state,requests:[request,...state.requests]}}case"GRANT_LOCK_REQUEST":{const{lock,request}=action,{store,path}=request,storePath=[store,...path],newTree=deepCopyLocksTreePath(state.tree,storePath),node=getNode(newTree,storePath);return node.locks=[...node.locks,lock],{...state,requests:state.requests.filter((r=>r!==request)),tree:newTree}}case"RELEASE_LOCK":{const{lock}=action,storePath=[lock.store,...lock.path],newTree=deepCopyLocksTreePath(state.tree,storePath),node=getNode(newTree,storePath);return node.locks=node.locks.filter((l=>l!==lock)),{...state,tree:newTree}}}return state}function isLockAvailable(state,store,path,{exclusive}){const storePath=[store,...path],locks=state.tree;for(const node of function*iteratePath(tree,path){let currentNode=tree;yield currentNode;for(const branchName of path){const nextNode=currentNode.children[branchName];if(!nextNode)break;yield nextNode,currentNode=nextNode}}(locks,storePath))if(hasConflictingLock({exclusive},node.locks))return!1;const node=getNode(locks,storePath);if(!node)return!0;for(const descendant of function*iterateDescendants(node){const stack=Object.values(node.children);for(;stack.length;){const childNode=stack.pop();yield childNode,stack.push(...Object.values(childNode.children))}}(node))if(hasConflictingLock({exclusive},descendant.locks))return!1;return!0}function createLocks(){let state=locks(void 0,{type:"@@INIT"});function processPendingLockRequests(){for(const request of function getPendingLockRequests(state){return state.requests}(state)){const{store,path,exclusive,notifyAcquired}=request;if(isLockAvailable(state,store,path,{exclusive})){const lock={store,path,exclusive};state=locks(state,{type:"GRANT_LOCK_REQUEST",lock,request}),notifyAcquired(lock)}}}return{acquire:function acquire(store,path,exclusive){return new Promise((resolve=>{state=locks(state,{type:"ENQUEUE_LOCK_REQUEST",request:{store,path,exclusive,notifyAcquired:resolve}}),processPendingLockRequests()}))},release:function release(lock){state=locks(state,{type:"RELEASE_LOCK",lock}),processPendingLockRequests()}}}function createLocksActions(){const locks=createLocks();return{__unstableAcquireStoreLock:function __unstableAcquireStoreLock(store,path,{exclusive}){return()=>locks.acquire(store,path,exclusive)},__unstableReleaseStoreLock:function __unstableReleaseStoreLock(lock){return()=>locks.release(lock)}}}var implementation=__webpack_require__("./packages/private-apis/build-module/implementation.js");const{lock,unlock:lock_unlock_unlock}=(0,implementation.yf)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/core-data");var react=__webpack_require__("./node_modules/react/index.js");const EntityContext=(0,react.createContext)({});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function EntityProvider({kind,type:name,id,children}){const parent=(0,react.useContext)(EntityContext),childContext=(0,react.useMemo)((()=>({...parent,[kind]:{...parent?.[kind],[name]:id}})),[parent,kind,name,id]);return(0,jsx_runtime.jsx)(EntityContext.Provider,{value:childContext,children})}var use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js");const memoize=__webpack_require__("./node_modules/memize/dist/index.js").A;let Status=function(Status){return Status.Idle="IDLE",Status.Resolving="RESOLVING",Status.Error="ERROR",Status.Success="SUCCESS",Status}({});const META_SELECTORS=["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"];function useQuerySelect(mapQuerySelect,deps){return(0,use_select.A)(((select,registry)=>mapQuerySelect((store=>enrichSelectors(select(store))),registry)),deps)}const enrichSelectors=memoize((selectors=>{const resolvers={};for(const selectorName in selectors)META_SELECTORS.includes(selectorName)||Object.defineProperty(resolvers,selectorName,{get:()=>(...args)=>{const data=selectors[selectorName](...args),resolutionStatus=selectors.getResolutionState(selectorName,args)?.status;let status;switch(resolutionStatus){case"resolving":status=Status.Resolving;break;case"finished":status=Status.Success;break;case"error":status=Status.Error;break;case void 0:status=Status.Idle}return{data,status,isResolving:status===Status.Resolving,hasStarted:status!==Status.Idle,hasResolved:status===Status.Success||status===Status.Error}}});return resolvers})),use_entity_record_EMPTY_OBJECT={};function useEntityRecord(kind,name,recordId,options={enabled:!0}){const{editEntityRecord,saveEditedEntityRecord}=(0,use_dispatch.A)(store),mutations=(0,react.useMemo)((()=>({edit:(record,editOptions={})=>editEntityRecord(kind,name,recordId,record,editOptions),save:(saveOptions={})=>saveEditedEntityRecord(kind,name,recordId,{throwOnError:!0,...saveOptions})})),[editEntityRecord,kind,name,recordId,saveEditedEntityRecord]),{editedRecord,hasEdits,edits}=(0,use_select.A)((select=>options.enabled?{editedRecord:select(store).getEditedEntityRecord(kind,name,recordId),hasEdits:select(store).hasEditsForEntityRecord(kind,name,recordId),edits:select(store).getEntityRecordNonTransientEdits(kind,name,recordId)}:{editedRecord:use_entity_record_EMPTY_OBJECT,hasEdits:!1,edits:use_entity_record_EMPTY_OBJECT}),[kind,name,recordId,options.enabled]),{data:record,...querySelectRest}=useQuerySelect((query=>options.enabled?query(store).getEntityRecord(kind,name,recordId):{data:null}),[kind,name,recordId,options.enabled]);return{record,editedRecord,hasEdits,edits,...querySelectRest,...mutations}}const EMPTY_ARRAY=[];function useEntityRecords(kind,name,queryArgs={},options={enabled:!0}){const queryAsString=(0,add_query_args.F)("",queryArgs),{data:records,...rest}=useQuerySelect((query=>options.enabled?query(store).getEntityRecords(kind,name,queryArgs):{data:EMPTY_ARRAY}),[kind,name,queryAsString,options.enabled]),{totalItems,totalPages}=(0,use_select.A)((select=>options.enabled?{totalItems:select(store).getEntityRecordsTotalItems(kind,name,queryArgs),totalPages:select(store).getEntityRecordsTotalPages(kind,name,queryArgs)}:{totalItems:null,totalPages:null}),[kind,name,queryAsString,options.enabled]);return{records,totalItems,totalPages,...rest}}var warning_build_module=__webpack_require__("./packages/warning/build-module/index.js");function useResourcePermissions(resource,id){const isEntity="object"==typeof resource,resourceAsString=isEntity?JSON.stringify(resource):resource;return isEntity&&void 0!==id&&!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("When 'resource' is an entity object, passing 'id' as a separate argument isn't supported."),useQuerySelect((resolve=>{const hasId=isEntity?!!resource.id:!!id,{canUser}=resolve(store),create=canUser("create",isEntity?{kind:resource.kind,name:resource.name}:resource);if(!hasId){const read=canUser("read",resource),isResolving=create.isResolving||read.isResolving,hasResolved=create.hasResolved&&read.hasResolved;let status=Status.Idle;return isResolving?status=Status.Resolving:hasResolved&&(status=Status.Success),{status,isResolving,hasResolved,canCreate:create.hasResolved&&create.data,canRead:read.hasResolved&&read.data}}const read=canUser("read",resource,id),update=canUser("update",resource,id),_delete=canUser("delete",resource,id),isResolving=read.isResolving||create.isResolving||update.isResolving||_delete.isResolving,hasResolved=read.hasResolved&&create.hasResolved&&update.hasResolved&&_delete.hasResolved;let status=Status.Idle;return isResolving?status=Status.Resolving:hasResolved&&(status=Status.Success),{status,isResolving,hasResolved,canRead:hasResolved&&read.data,canCreate:hasResolved&&create.data,canUpdate:hasResolved&&update.data,canDelete:hasResolved&&_delete.data}}),[resourceAsString,id])}const use_resource_permissions=useResourcePermissions;var blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js");function useEntityId(kind,name){const context=(0,react.useContext)(EntityContext);return context?.[kind]?.[name]}var block_editor_build_module=__webpack_require__("./packages/block-editor/build-module/index.js");let unlockedApis;const cache=new WeakMap;const get_footnotes_order_cache=new WeakMap;function getBlockFootnotesOrder(block){if(!get_footnotes_order_cache.has(block)){const order=[];for(const value of function getRichTextValuesCached(block){if(unlockedApis||(unlockedApis=lock_unlock_unlock(block_editor_build_module.jb)),!cache.has(block)){const values=unlockedApis.getRichTextValues([block]);cache.set(block,values)}return cache.get(block)}(block))value&&value.replacements.forEach((({type,attributes})=>{"core/footnote"===type&&order.push(attributes["data-fn"])}));get_footnotes_order_cache.set(block,order)}return get_footnotes_order_cache.get(block)}let oldFootnotes={};function updateFootnotesFromMeta(blocks,meta){const output={blocks};if(!meta)return output;if(void 0===meta.footnotes)return output;const newOrder=function getFootnotesOrder(blocks){return blocks.flatMap(getBlockFootnotesOrder)}(blocks),footnotes=meta.footnotes?JSON.parse(meta.footnotes):[];if(footnotes.map((fn=>fn.id)).join("")===newOrder.join(""))return output;const newFootnotes=newOrder.map((fnId=>footnotes.find((fn=>fn.id===fnId))||oldFootnotes[fnId]||{id:fnId,content:""}));function updateAttributes(attributes){if(!attributes||Array.isArray(attributes)||"object"!=typeof attributes)return attributes;attributes={...attributes};for(const key in attributes){const value=attributes[key];if(Array.isArray(value)){attributes[key]=value.map(updateAttributes);continue}if("string"!=typeof value&&!(value instanceof rich_text_build_module.EF))continue;const richTextValue="string"==typeof value?rich_text_build_module.EF.fromHTMLString(value):new rich_text_build_module.EF(value);let hasFootnotes=!1;richTextValue.replacements.forEach((replacement=>{if("core/footnote"===replacement.type){const id=replacement.attributes["data-fn"],index=newOrder.indexOf(id),countValue=(0,rich_text_build_module.vt)({html:replacement.innerHTML});countValue.text=String(index+1),countValue.formats=Array.from({length:countValue.text.length},(()=>countValue.formats[0])),countValue.replacements=Array.from({length:countValue.text.length},(()=>countValue.replacements[0])),replacement.innerHTML=(0,rich_text_build_module.Ky)({value:countValue}),hasFootnotes=!0}})),hasFootnotes&&(attributes[key]="string"==typeof value?richTextValue.toHTMLString():richTextValue)}return attributes}const newBlocks=function updateBlocksAttributes(__blocks){return __blocks.map((block=>({...block,attributes:updateAttributes(block.attributes),innerBlocks:updateBlocksAttributes(block.innerBlocks)})))}(blocks);return oldFootnotes={...oldFootnotes,...footnotes.reduce(((acc,fn)=>(newOrder.includes(fn.id)||(acc[fn.id]=fn),acc)),{})},{meta:{...meta,footnotes:JSON.stringify(newFootnotes)},blocks:newBlocks}}const use_entity_block_editor_EMPTY_ARRAY=[],parsedBlocksCache=new WeakMap;function useEntityBlockEditor(kind,name,{id:_id}={}){const providerId=useEntityId(kind,name),id=null!=_id?_id:providerId,{getEntityRecord,getEntityRecordEdits}=(0,use_select.A)(STORE_NAME),{content,editedBlocks,meta}=(0,use_select.A)((select=>{if(!id)return{};const{getEditedEntityRecord}=select(STORE_NAME),editedRecord=getEditedEntityRecord(kind,name,id);return{editedBlocks:editedRecord.blocks,content:editedRecord.content,meta:editedRecord.meta}}),[kind,name,id]),{__unstableCreateUndoLevel,editEntityRecord}=(0,use_dispatch.A)(STORE_NAME),blocks=(0,react.useMemo)((()=>{if(!id)return;if(editedBlocks)return editedBlocks;if(!content||"string"!=typeof content)return use_entity_block_editor_EMPTY_ARRAY;const edits=getEntityRecordEdits(kind,name,id),cackeKey=!edits||!Object.keys(edits).length?getEntityRecord(kind,name,id):edits;let _blocks=parsedBlocksCache.get(cackeKey);return _blocks||(_blocks=(0,blocks_build_module.qg)(content),parsedBlocksCache.set(cackeKey,_blocks)),_blocks}),[kind,name,id,editedBlocks,content,getEntityRecord,getEntityRecordEdits]),onChange=(0,react.useCallback)(((newBlocks,options)=>{if(blocks===newBlocks)return __unstableCreateUndoLevel(kind,name,id);const{selection,...rest}=options,edits={selection,content:({blocks:blocksForSerialization=[]})=>(0,blocks_build_module.RM)(blocksForSerialization),...updateFootnotesFromMeta(newBlocks,meta)};editEntityRecord(kind,name,id,edits,{isCached:!1,...rest})}),[kind,name,id,blocks,meta,__unstableCreateUndoLevel,editEntityRecord]),onInput=(0,react.useCallback)(((newBlocks,options)=>{const{selection,...rest}=options,edits={selection,...updateFootnotesFromMeta(newBlocks,meta)};editEntityRecord(kind,name,id,edits,{isCached:!0,...rest})}),[kind,name,id,meta,editEntityRecord]);return[blocks,onInput,onChange]}function useEntityProp(kind,name,prop,_id){const providerId=useEntityId(kind,name),id=null!=_id?_id:providerId,{value,fullValue}=(0,use_select.A)((select=>{const{getEntityRecord,getEditedEntityRecord}=select(STORE_NAME),record=getEntityRecord(kind,name,id),editedRecord=getEditedEntityRecord(kind,name,id);return record&&editedRecord?{value:editedRecord[prop],fullValue:record[prop]}:{}}),[kind,name,id,prop]),{editEntityRecord}=(0,use_dispatch.A)(STORE_NAME);return[value,(0,react.useCallback)((newValue=>{editEntityRecord(kind,name,id,{[prop]:newValue})}),[editEntityRecord,kind,name,id,prop]),fullValue]}const build_module_entitiesConfig=[...rootEntitiesConfig,...additionalEntityConfigLoaders.filter((config=>!!config.name))],entitySelectors=build_module_entitiesConfig.reduce(((result,entity)=>{const{kind,name,plural}=entity;return result[getMethodName(kind,name)]=(state,key,query)=>getEntityRecord(state,kind,name,key,query),plural&&(result[getMethodName(kind,plural,"get")]=(state,query)=>getEntityRecords(state,kind,name,query)),result}),{}),entityResolvers=build_module_entitiesConfig.reduce(((result,entity)=>{const{kind,name,plural}=entity;if(result[getMethodName(kind,name)]=(key,query)=>resolvers_getEntityRecord(kind,name,key,query),plural){const pluralMethodName=getMethodName(kind,plural,"get");result[pluralMethodName]=(...args)=>resolvers_getEntityRecords(kind,name,...args),result[pluralMethodName].shouldInvalidate=action=>resolvers_getEntityRecords.shouldInvalidate(action,kind,name)}return result}),{}),entityActions=build_module_entitiesConfig.reduce(((result,entity)=>{const{kind,name}=entity;return result[getMethodName(kind,name,"save")]=(record,options)=>saveEntityRecord(kind,name,record,options),result[getMethodName(kind,name,"delete")]=(key,query,options)=>deleteEntityRecord(kind,name,key,query,options),result}),{}),store=(0,redux_store.A)(STORE_NAME,{reducer:build_module_reducer,actions:{...build_module_actions_namespaceObject,...entityActions,...createLocksActions()},selectors:{...build_module_selectors_namespaceObject,...entitySelectors},resolvers:{...resolvers_namespaceObject,...entityResolvers}});lock_unlock_unlock(store).registerPrivateSelectors(private_selectors_namespaceObject),lock_unlock_unlock(store).registerPrivateActions(private_actions_namespaceObject),(0,build_module.kz)(store)},"./packages/icons/build-module/library/align-center.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M7.5 5.5h9V4h-9v1.5Zm-3.5 7h16V11H4v1.5Zm3.5 7h9V18h-9v1.5Z"})})},"./packages/icons/build-module/library/align-justify.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M4 12.8h16v-1.5H4v1.5zm0 7h12.4v-1.5H4v1.5zM4 4.3v1.5h16V4.3H4z"})})},"./packages/icons/build-module/library/align-left.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M13 5.5H4V4h9v1.5Zm7 7H4V11h16v1.5Zm-7 7H4V18h9v1.5Z"})})},"./packages/icons/build-module/library/align-right.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M11.111 5.5H20V4h-8.889v1.5ZM4 12.5h16V11H4v1.5Zm7.111 7H20V18h-8.889v1.5Z"})})},"./packages/icons/build-module/library/arrow-left.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})})},"./packages/icons/build-module/library/category.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"})})},"./packages/icons/build-module/library/chevron-left-small.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z"})})},"./packages/icons/build-module/library/chevron-up.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})})},"./packages/icons/build-module/library/code.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M20.8 10.7l-4.3-4.3-1.1 1.1 4.3 4.3c.1.1.1.3 0 .4l-4.3 4.3 1.1 1.1 4.3-4.3c.7-.8.7-1.9 0-2.6zM4.2 11.8l4.3-4.3-1-1-4.3 4.3c-.7.7-.7 1.8 0 2.5l4.3 4.3 1.1-1.1-4.3-4.3c-.2-.1-.2-.3-.1-.4z"})})},"./packages/icons/build-module/library/cog.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})})},"./packages/icons/build-module/library/comment.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M18 4H6c-1.1 0-2 .9-2 2v12.9c0 .6.5 1.1 1.1 1.1.3 0 .5-.1.8-.3L8.5 17H18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 11c0 .3-.2.5-.5.5H7.9l-2.4 2.4V6c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v9z"})})},"./packages/icons/build-module/library/copy-small.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M5.625 5.5h9.75c.069 0 .125.056.125.125v9.75a.125.125 0 0 1-.125.125h-9.75a.125.125 0 0 1-.125-.125v-9.75c0-.069.056-.125.125-.125ZM4 5.625C4 4.728 4.728 4 5.625 4h9.75C16.273 4 17 4.728 17 5.625v9.75c0 .898-.727 1.625-1.625 1.625h-9.75A1.625 1.625 0 0 1 4 15.375v-9.75Zm14.5 11.656v-9H20v9C20 18.8 18.77 20 17.251 20H6.25v-1.5h11.001c.69 0 1.249-.528 1.249-1.219Z"})})},"./packages/icons/build-module/library/copy.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"})})},"./packages/icons/build-module/library/edit.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>edit});var svg=__webpack_require__("./packages/primitives/build-module/svg/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const edit=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})})},"./packages/icons/build-module/library/file.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.848 8a1 1 0 0 1-.914-.594l-.723-1.63a.5.5 0 0 0-.447-.276H5a.5.5 0 0 0-.5.5v11.5a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5v-9A.5.5 0 0 0 19 8h-6.152Zm.612-1.5a.5.5 0 0 1-.462-.31l-.445-1.084A2 2 0 0 0 10.763 4H5a2 2 0 0 0-2 2v11.5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-5.54Z"})})},"./packages/icons/build-module/library/footer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",d:"M18 5.5h-8v8h8.5V6a.5.5 0 00-.5-.5zm-9.5 8h-3V6a.5.5 0 01.5-.5h2.5v8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})})},"./packages/icons/build-module/library/format-capitalize.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M7.1 6.8L3.1 18h1.6l1.1-3h4.3l1.1 3h1.6l-4-11.2H7.1zm-.8 6.8L8 8.9l1.7 4.7H6.3zm14.5-1.5c-.3-.6-.7-1.1-1.2-1.5-.6-.4-1.2-.6-1.9-.6-.5 0-.9.1-1.4.3-.4.2-.8.5-1.1.8V6h-1.4v12h1.3l.2-1c.2.4.6.6 1 .8.4.2.9.3 1.4.3.7 0 1.2-.2 1.8-.5.5-.4 1-.9 1.3-1.5.3-.6.5-1.3.5-2.1-.1-.6-.2-1.3-.5-1.9zm-1.7 4c-.4.5-.9.8-1.6.8s-1.2-.2-1.7-.7c-.4-.5-.7-1.2-.7-2.1 0-.9.2-1.6.7-2.1.4-.5 1-.7 1.7-.7s1.2.3 1.6.8c.4.5.6 1.2.6 2 .1.8-.2 1.4-.6 2z"})})},"./packages/icons/build-module/library/format-list-bullets.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M11.1 15.8H20v-1.5h-8.9v1.5zm0-8.6v1.5H20V7.2h-8.9zM6 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-7c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})},"./packages/icons/build-module/library/format-lowercase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M11 16.8c-.1-.1-.2-.3-.3-.5v-2.6c0-.9-.1-1.7-.3-2.2-.2-.5-.5-.9-.9-1.2-.4-.2-.9-.3-1.6-.3-.5 0-1 .1-1.5.2s-.9.3-1.2.6l.2 1.2c.4-.3.7-.4 1.1-.5.3-.1.7-.2 1-.2.6 0 1 .1 1.3.4.3.2.4.7.4 1.4-1.2 0-2.3.2-3.3.7s-1.4 1.1-1.4 2.1c0 .7.2 1.2.7 1.6.4.4 1 .6 1.8.6.9 0 1.7-.4 2.4-1.2.1.3.2.5.4.7.1.2.3.3.6.4.3.1.6.1 1.1.1h.1l.2-1.2h-.1c-.4.1-.6 0-.7-.1zM9.2 16c-.2.3-.5.6-.9.8-.3.1-.7.2-1.1.2-.4 0-.7-.1-.9-.3-.2-.2-.3-.5-.3-.9 0-.6.2-1 .7-1.3.5-.3 1.3-.4 2.5-.5v2zm10.6-3.9c-.3-.6-.7-1.1-1.2-1.5-.6-.4-1.2-.6-1.9-.6-.5 0-.9.1-1.4.3-.4.2-.8.5-1.1.8V6h-1.4v12h1.3l.2-1c.2.4.6.6 1 .8.4.2.9.3 1.4.3.7 0 1.2-.2 1.8-.5.5-.4 1-.9 1.3-1.5.3-.6.5-1.3.5-2.1-.1-.6-.2-1.3-.5-1.9zm-1.7 4c-.4.5-.9.8-1.6.8s-1.2-.2-1.7-.7c-.4-.5-.7-1.2-.7-2.1 0-.9.2-1.6.7-2.1.4-.5 1-.7 1.7-.7s1.2.3 1.6.8c.4.5.6 1.2.6 2s-.2 1.4-.6 2z"})})},"./packages/icons/build-module/library/format-strikethrough.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M9.1 9v-.5c0-.6.2-1.1.7-1.4.5-.3 1.2-.5 2-.5.7 0 1.4.1 2.1.3.7.2 1.4.5 2.1.9l.2-1.9c-.6-.3-1.2-.5-1.9-.7-.8-.1-1.6-.2-2.4-.2-1.5 0-2.7.3-3.6 1-.8.7-1.2 1.5-1.2 2.6V9h2zM20 12H4v1h8.3c.3.1.6.2.8.3.5.2.9.5 1.1.8.3.3.4.7.4 1.2 0 .7-.2 1.1-.8 1.5-.5.3-1.2.5-2.1.5-.8 0-1.6-.1-2.4-.3-.8-.2-1.5-.5-2.2-.8L7 18.1c.5.2 1.2.4 2 .6.8.2 1.6.3 2.4.3 1.7 0 3-.3 3.9-1 .9-.7 1.3-1.6 1.3-2.8 0-.9-.2-1.7-.7-2.2H20v-1z"})})},"./packages/icons/build-module/library/format-underline.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M7 18v1h10v-1H7zm5-2c1.5 0 2.6-.4 3.4-1.2.8-.8 1.1-2 1.1-3.5V5H15v5.8c0 1.2-.2 2.1-.6 2.8-.4.7-1.2 1-2.4 1s-2-.3-2.4-1c-.4-.7-.6-1.6-.6-2.8V5H7.5v6.2c0 1.5.4 2.7 1.1 3.5.8.9 1.9 1.3 3.4 1.3z"})})},"./packages/icons/build-module/library/format-uppercase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M6.1 6.8L2.1 18h1.6l1.1-3h4.3l1.1 3h1.6l-4-11.2H6.1zm-.8 6.8L7 8.9l1.7 4.7H5.3zm15.1-.7c-.4-.5-.9-.8-1.6-1 .4-.2.7-.5.8-.9.2-.4.3-.9.3-1.4 0-.9-.3-1.6-.8-2-.6-.5-1.3-.7-2.4-.7h-3.5V18h4.2c1.1 0 2-.3 2.6-.8.6-.6 1-1.4 1-2.4-.1-.8-.3-1.4-.6-1.9zm-5.7-4.7h1.8c.6 0 1.1.1 1.4.4.3.2.5.7.5 1.3 0 .6-.2 1.1-.5 1.3-.3.2-.8.4-1.4.4h-1.8V8.2zm4 8c-.4.3-.9.5-1.5.5h-2.6v-3.8h2.6c1.4 0 2 .6 2 1.9.1.6-.1 1-.5 1.4z"})})},"./packages/icons/build-module/library/fullscreen.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M6 4a2 2 0 0 0-2 2v3h1.5V6a.5.5 0 0 1 .5-.5h3V4H6Zm3 14.5H6a.5.5 0 0 1-.5-.5v-3H4v3a2 2 0 0 0 2 2h3v-1.5Zm6 1.5v-1.5h3a.5.5 0 0 0 .5-.5v-3H20v3a2 2 0 0 1-2 2h-3Zm3-16a2 2 0 0 1 2 2v3h-1.5V6a.5.5 0 0 0-.5-.5h-3V4h3Z"})})},"./packages/icons/build-module/library/grid.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"m3 5c0-1.10457.89543-2 2-2h13.5c1.1046 0 2 .89543 2 2v13.5c0 1.1046-.8954 2-2 2h-13.5c-1.10457 0-2-.8954-2-2zm2-.5h6v6.5h-6.5v-6c0-.27614.22386-.5.5-.5zm-.5 8v6c0 .2761.22386.5.5.5h6v-6.5zm8 0v6.5h6c.2761 0 .5-.2239.5-.5v-6zm0-8v6.5h6.5v-6c0-.27614-.2239-.5-.5-.5z",fillRule:"evenodd",clipRule:"evenodd"})})},"./packages/icons/build-module/library/group.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M18 4h-7c-1.1 0-2 .9-2 2v3H6c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2v-3h3c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-7c0-.3.2-.5.5-.5h3V13c0 1.1.9 2 2 2h2.5v3zm0-4.5H11c-.3 0-.5-.2-.5-.5v-2.5H13c.3 0 .5.2.5.5v2.5zm5-.5c0 .3-.2.5-.5.5h-3V11c0-1.1-.9-2-2-2h-2.5V6c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5v7z"})})},"./packages/icons/build-module/library/header.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M18.5 10.5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})})},"./packages/icons/build-module/library/home.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M12 4L4 7.9V20h16V7.9L12 4zm6.5 14.5H14V13h-4v5.5H5.5V8.8L12 5.7l6.5 3.1v9.7z"})})},"./packages/icons/build-module/library/image.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})})},"./packages/icons/build-module/library/keyboard-return.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"m6.734 16.106 2.176-2.38-1.093-1.028-3.846 4.158 3.846 4.158 1.093-1.028-2.176-2.38h2.811c1.125 0 2.25.03 3.374 0 1.428-.001 3.362-.25 4.963-1.277 1.66-1.065 2.868-2.906 2.868-5.859 0-2.479-1.327-4.896-3.65-5.93-1.82-.813-3.044-.8-4.806-.788l-.567.002v1.5c.184 0 .368 0 .553-.002 1.82-.007 2.704-.014 4.21.657 1.854.827 2.76 2.657 2.76 4.561 0 2.472-.973 3.824-2.178 4.596-1.258.807-2.864 1.04-4.163 1.04h-.02c-1.115.03-2.229 0-3.344 0H6.734Z"})})},"./packages/icons/build-module/library/layout.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})})},"./packages/icons/build-module/library/line-dashed.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",d:"M5 11.25h3v1.5H5v-1.5zm5.5 0h3v1.5h-3v-1.5zm8.5 0h-3v1.5h3v-1.5z",clipRule:"evenodd"})})},"./packages/icons/build-module/library/line-dotted.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",d:"M5.25 11.25h1.5v1.5h-1.5v-1.5zm3 0h1.5v1.5h-1.5v-1.5zm4.5 0h-1.5v1.5h1.5v-1.5zm1.5 0h1.5v1.5h-1.5v-1.5zm4.5 0h-1.5v1.5h1.5v-1.5z",clipRule:"evenodd"})})},"./packages/icons/build-module/library/line-solid.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M5 11.25h14v1.5H5z"})})},"./packages/icons/build-module/library/link-off.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M17.031 4.703 15.576 4l-1.56 3H14v.03l-2.324 4.47H9.5V13h1.396l-1.502 2.889h-.95a3.694 3.694 0 0 1 0-7.389H10V7H8.444a5.194 5.194 0 1 0 0 10.389h.17L7.5 19.53l1.416.719L15.049 8.5h.507a3.694 3.694 0 0 1 0 7.39H14v1.5h1.556a5.194 5.194 0 0 0 .273-10.383l1.202-2.304Z"})})},"./packages/icons/build-module/library/link.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})})},"./packages/icons/build-module/library/list-view.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})})},"./packages/icons/build-module/library/media.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"m7 6.5 4 2.5-4 2.5z"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"m5 3c-1.10457 0-2 .89543-2 2v14c0 1.1046.89543 2 2 2h14c1.1046 0 2-.8954 2-2v-14c0-1.10457-.8954-2-2-2zm14 1.5h-14c-.27614 0-.5.22386-.5.5v10.7072l3.62953-2.6465c.25108-.1831.58905-.1924.84981-.0234l2.92666 1.8969 3.5712-3.4719c.2911-.2831.7545-.2831 1.0456 0l2.9772 2.8945v-9.3568c0-.27614-.2239-.5-.5-.5zm-14.5 14.5v-1.4364l4.09643-2.987 2.99567 1.9417c.2936.1903.6798.1523.9307-.0917l3.4772-3.3806 3.4772 3.3806.0228-.0234v2.5968c0 .2761-.2239.5-.5.5h-14c-.27614 0-.5-.2239-.5-.5z"})]})},"./packages/icons/build-module/library/navigation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14.5c-3.6 0-6.5-2.9-6.5-6.5S8.4 5.5 12 5.5s6.5 2.9 6.5 6.5-2.9 6.5-6.5 6.5zM9 16l4.5-3L15 8.4l-4.5 3L9 16z"})})},"./packages/icons/build-module/library/next.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z"})})},"./packages/icons/build-module/library/page.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M15.5 7.5h-7V9h7V7.5Zm-7 3.5h7v1.5h-7V11Zm7 3.5h-7V16h7v-1.5Z"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M17 4H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM7 5.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5Z"})]})},"./packages/icons/build-module/library/paragraph.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"m9.99609 14v-.2251l.00391.0001v6.225h1.5v-14.5h2.5v14.5h1.5v-14.5h3v-1.5h-8.50391c-2.76142 0-5 2.23858-5 5 0 2.7614 2.23858 5 5 5z"})})},"./packages/icons/build-module/library/position-center.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M19 5.5H5V4h14v1.5ZM19 20H5v-1.5h14V20ZM7 9h10v6H7V9Z"})})},"./packages/icons/build-module/library/position-left.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M5 5.5h8V4H5v1.5ZM5 20h8v-1.5H5V20ZM19 9H5v6h14V9Z"})})},"./packages/icons/build-module/library/position-right.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M19 5.5h-8V4h8v1.5ZM19 20h-8v-1.5h8V20ZM5 9h14v6H5V9Z"})})},"./packages/icons/build-module/library/post-featured-image.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M19 3H5c-.6 0-1 .4-1 1v7c0 .5.4 1 1 1h14c.5 0 1-.4 1-1V4c0-.6-.4-1-1-1zM5.5 10.5v-.4l1.8-1.3 1.3.8c.3.2.7.2.9-.1L11 8.1l2.4 2.4H5.5zm13 0h-2.9l-4-4c-.3-.3-.8-.3-1.1 0L8.9 8l-1.2-.8c-.3-.2-.6-.2-.9 0l-1.3 1V4.5h13v6zM4 20h9v-1.5H4V20zm0-4h16v-1.5H4V16z"})})},"./packages/icons/build-module/library/post-list.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M18 5.5H6a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-.5-.5ZM6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm1 5h1.5v1.5H7V9Zm1.5 4.5H7V15h1.5v-1.5ZM10 9h7v1.5h-7V9Zm7 4.5h-7V15h7v-1.5Z"})})},"./packages/icons/build-module/library/previous.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M11.6 7l-1.1-1L5 12l5.5 6 1.1-1L7 12l4.6-5zm6 0l-1.1-1-5.5 6 5.5 6 1.1-1-4.6-5 4.6-5z"})})},"./packages/icons/build-module/library/row.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M4 6.5h5a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H4V16h5a.5.5 0 0 0 .5-.5v-7A.5.5 0 0 0 9 8H4V6.5Zm16 0h-5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h5V16h-5a.5.5 0 0 1-.5-.5v-7A.5.5 0 0 1 15 8h5V6.5Z"})})},"./packages/icons/build-module/library/settings.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})]})},"./packages/icons/build-module/library/shadow.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M12 8c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 6.5c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zM12.8 3h-1.5v3h1.5V3zm-1.6 18h1.5v-3h-1.5v3zm6.8-9.8v1.5h3v-1.5h-3zm-12 0H3v1.5h3v-1.5zm9.7 5.6 2.1 2.1 1.1-1.1-2.1-2.1-1.1 1.1zM8.3 7.2 6.2 5.1 5.1 6.2l2.1 2.1 1.1-1.1zM5.1 17.8l1.1 1.1 2.1-2.1-1.1-1.1-2.1 2.1zM18.9 6.2l-1.1-1.1-2.1 2.1 1.1 1.1 2.1-2.1z"})})},"./packages/icons/build-module/library/shuffle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/SVG",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M17.192 6.75L15.47 5.03l1.06-1.06 3.537 3.53-3.537 3.53-1.06-1.06 1.723-1.72h-3.19c-.602 0-.993.202-1.28.498-.309.319-.538.792-.695 1.383-.13.488-.222 1.023-.296 1.508-.034.664-.116 1.413-.303 2.117-.193.721-.513 1.467-1.068 2.04-.575.594-1.359.954-2.357.954H4v-1.5h4.003c.601 0 .993-.202 1.28-.498.308-.319.538-.792.695-1.383.149-.557.216-1.093.288-1.662l.039-.31a9.653 9.653 0 0 1 .272-1.653c.193-.722.513-1.467 1.067-2.04.576-.594 1.36-.954 2.358-.954h3.19zM8.004 6.75c.8 0 1.46.23 1.988.628a6.24 6.24 0 0 0-.684 1.396 1.725 1.725 0 0 0-.024-.026c-.287-.296-.679-.498-1.28-.498H4v-1.5h4.003zM12.699 14.726c-.161.459-.38.94-.684 1.396.527.397 1.188.628 1.988.628h3.19l-1.722 1.72 1.06 1.06L20.067 16l-3.537-3.53-1.06 1.06 1.723 1.72h-3.19c-.602 0-.993-.202-1.28-.498a1.96 1.96 0 0 1-.024-.026z"})})},"./packages/icons/build-module/library/sidebar.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})})},"./packages/icons/build-module/library/stack.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M17.5 4v5a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V4H8v5a.5.5 0 0 0 .5.5h7A.5.5 0 0 0 16 9V4h1.5Zm0 16v-5a2 2 0 0 0-2-2h-7a2 2 0 0 0-2 2v5H8v-5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v5h1.5Z"})})},"./packages/icons/build-module/library/styles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M20 12a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 0 1-6.5 6.5v-13a6.5 6.5 0 0 1 6.5 6.5Z"})})},"./packages/icons/build-module/library/swatch.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M5 17.7c.4.5.8.9 1.2 1.2l1.1-1.4c-.4-.3-.7-.6-1-1L5 17.7zM5 6.3l1.4 1.1c.3-.4.6-.7 1-1L6.3 5c-.5.4-.9.8-1.3 1.3zm.1 7.8l-1.7.5c.2.6.4 1.1.7 1.6l1.5-.8c-.2-.4-.4-.8-.5-1.3zM4.8 12v-.7L3 11.1v1.8l1.7-.2c.1-.2.1-.5.1-.7zm3 7.9c.5.3 1.1.5 1.6.7l.5-1.7c-.5-.1-.9-.3-1.3-.5l-.8 1.5zM19 6.3c-.4-.5-.8-.9-1.2-1.2l-1.1 1.4c.4.3.7.6 1 1L19 6.3zm-.1 3.6l1.7-.5c-.2-.6-.4-1.1-.7-1.6l-1.5.8c.2.4.4.8.5 1.3zM5.6 8.6l-1.5-.8c-.3.5-.5 1-.7 1.6l1.7.5c.1-.5.3-.9.5-1.3zm2.2-4.5l.8 1.5c.4-.2.8-.4 1.3-.5l-.5-1.7c-.6.2-1.1.4-1.6.7zm8.8 13.5l1.1 1.4c.5-.4.9-.8 1.2-1.2l-1.4-1.1c-.2.3-.5.6-.9.9zm1.8-2.2l1.5.8c.3-.5.5-1.1.7-1.6l-1.7-.5c-.1.5-.3.9-.5 1.3zm2.6-4.3l-1.7.2v1.4l1.7.2V12v-.9zM11.1 3l.2 1.7h1.4l.2-1.7h-1.8zm3 2.1c.5.1.9.3 1.3.5l.8-1.5c-.5-.3-1.1-.5-1.6-.7l-.5 1.7zM12 19.2h-.7l-.2 1.8h1.8l-.2-1.7c-.2-.1-.5-.1-.7-.1zm2.1-.3l.5 1.7c.6-.2 1.1-.4 1.6-.7l-.8-1.5c-.4.2-.8.4-1.3.5z"})})},"./packages/icons/build-module/library/symbol-filled.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-17.6 1L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z"})})},"./packages/icons/build-module/library/tag.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M4.75 4a.75.75 0 0 0-.75.75v7.826c0 .2.08.39.22.53l6.72 6.716a2.313 2.313 0 0 0 3.276-.001l5.61-5.611-.531-.53.532.528a2.315 2.315 0 0 0 0-3.264L13.104 4.22a.75.75 0 0 0-.53-.22H4.75ZM19 12.576a.815.815 0 0 1-.236.574l-5.61 5.611a.814.814 0 0 1-1.153 0L5.5 12.264V5.5h6.763l6.5 6.502a.816.816 0 0 1 .237.574ZM8.75 9.75a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"})})},"./packages/icons/build-module/library/trash.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})})},"./packages/icons/build-module/library/upload.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"})})},"./packages/icons/build-module/library/verse.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M17.8 2l-.9.3c-.1 0-3.6 1-5.2 2.1C10 5.5 9.3 6.5 8.9 7.1c-.6.9-1.7 4.7-1.7 6.3l-.9 2.3c-.2.4 0 .8.4 1 .1 0 .2.1.3.1.3 0 .6-.2.7-.5l.6-1.5c.3 0 .7-.1 1.2-.2.7-.1 1.4-.3 2.2-.5.8-.2 1.6-.5 2.4-.8.7-.3 1.4-.7 1.9-1.2s.8-1.2 1-1.9c.2-.7.3-1.6.4-2.4.1-.8.1-1.7.2-2.5 0-.8.1-1.5.2-2.1V2zm-1.9 5.6c-.1.8-.2 1.5-.3 2.1-.2.6-.4 1-.6 1.3-.3.3-.8.6-1.4.9-.7.3-1.4.5-2.2.8-.6.2-1.3.3-1.8.4L15 7.5c.3-.3.6-.7 1-1.1 0 .4 0 .8-.1 1.2zM6 20h8v-1.5H6V20z"})})},"./packages/patterns/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>privateApis});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{convertSyncedPatternToStatic:()=>convertSyncedPatternToStatic,createPattern:()=>createPattern,createPatternFromFile:()=>createPatternFromFile,setEditingPattern:()=>setEditingPattern});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{isEditingPattern:()=>selectors_isEditingPattern});var redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),build_module=__webpack_require__("./packages/data/build-module/index.js");const reducer=(0,build_module.HY)({isEditingPattern:function isEditingPattern(state={},action){return"SET_EDITING_PATTERN"===action?.type?{...state,[action.clientId]:action.isEditing}:state}});var blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),core_data_build_module=__webpack_require__("./packages/core-data/build-module/index.js"),block_editor_build_module=__webpack_require__("./packages/block-editor/build-module/index.js");const PATTERN_TYPES={theme:"pattern",user:"wp_block"},PATTERN_DEFAULT_CATEGORY="all-patterns",PATTERN_SYNC_TYPES={full:"fully",unsynced:"unsynced"},PARTIAL_SYNCING_SUPPORTED_BLOCKS={"core/paragraph":["content"],"core/heading":["content"],"core/button":["text","url","linkTarget","rel"],"core/image":["id","url","title","alt"]},createPattern=(title,syncType,content,categories)=>async({registry})=>{const meta=syncType===PATTERN_SYNC_TYPES.unsynced?{wp_pattern_sync_status:syncType}:void 0,reusableBlock={title,content,status:"publish",meta,wp_pattern_category:categories};return await registry.dispatch(core_data_build_module.M_).saveEntityRecord("postType","wp_block",reusableBlock)},createPatternFromFile=(file,categories)=>async({dispatch})=>{const fileContent=await file.text();let parsedContent;try{parsedContent=JSON.parse(fileContent)}catch(e){throw new Error("Invalid JSON file")}if("wp_block"!==parsedContent.__file||!parsedContent.title||!parsedContent.content||"string"!=typeof parsedContent.title||"string"!=typeof parsedContent.content||parsedContent.syncStatus&&"string"!=typeof parsedContent.syncStatus)throw new Error("Invalid pattern JSON file");return await dispatch.createPattern(parsedContent.title,parsedContent.syncStatus,parsedContent.content,categories)},convertSyncedPatternToStatic=clientId=>({registry})=>{const patternBlock=registry.select(block_editor_build_module.M_).getBlock(clientId),existingOverrides=patternBlock.attributes?.content;const patternInnerBlocks=registry.select(block_editor_build_module.M_).getBlocks(patternBlock.clientId);registry.dispatch(block_editor_build_module.M_).replaceBlocks(patternBlock.clientId,function cloneBlocksAndRemoveBindings(blocks){return blocks.map((block=>{let metadata=block.attributes.metadata;if(metadata&&(metadata={...metadata},delete metadata.id,delete metadata.bindings,existingOverrides?.[metadata.name]))for(const[attributeName,value]of Object.entries(existingOverrides[metadata.name]))(0,blocks_build_module.E7)(block.name)?.attributes[attributeName]&&(block.attributes[attributeName]=value);return(0,blocks_build_module.JB)(block,{metadata:metadata&&Object.keys(metadata).length>0?metadata:void 0},cloneBlocksAndRemoveBindings(block.innerBlocks))}))}(patternInnerBlocks))};function setEditingPattern(clientId,isEditing){return{type:"SET_EDITING_PATTERN",clientId,isEditing}}function selectors_isEditingPattern(state,clientId){return state.isEditingPattern[clientId]}var implementation=__webpack_require__("./packages/private-apis/build-module/implementation.js");const{lock,unlock}=(0,implementation.yf)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/patterns"),storeConfig={reducer},store=(0,redux_store.A)("core/patterns",{...storeConfig});(0,build_module.kz)(store),unlock(store).registerPrivateActions(actions_namespaceObject),unlock(store).registerPrivateSelectors(selectors_namespaceObject);var body=__webpack_require__("./packages/components/build-module/panel/body.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),react=__webpack_require__("./node_modules/react/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js");function isOverridableBlock(block){return Object.keys(PARTIAL_SYNCING_SUPPORTED_BLOCKS).includes(block.name)&&!!block.attributes.metadata?.name&&!!block.attributes.metadata?.bindings&&Object.values(block.attributes.metadata.bindings).some((binding=>"core/pattern-overrides"===binding.source))}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const{BlockQuickNavigation}=unlock(block_editor_build_module.jb);var modal=__webpack_require__("./packages/components/build-module/modal/index.js"),component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),text_control=__webpack_require__("./packages/components/build-module/text-control/index.js"),toggle_control=__webpack_require__("./packages/components/build-module/toggle-control/index.js"),h_stack_component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),notices_build_module=__webpack_require__("./packages/notices/build-module/index.js"),form_token_field=__webpack_require__("./packages/components/build-module/form-token-field/index.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js");const unescapeString=arg=>(0,html_entities_build_module.S)(arg),CATEGORY_SLUG="wp_pattern_category";function CategorySelector({categoryTerms,onChange,categoryMap}){const[search,setSearch]=(0,react.useState)(""),debouncedSearch=(0,use_debounce.A)(setSearch,500),suggestions=(0,react.useMemo)((()=>Array.from(categoryMap.values()).map((category=>unescapeString(category.label))).filter((category=>""===search||category.toLowerCase().includes(search.toLowerCase()))).sort(((a,b)=>a.localeCompare(b)))),[search,categoryMap]);return(0,jsx_runtime.jsx)(form_token_field.A,{className:"patterns-menu-items__convert-modal-categories",value:categoryTerms,suggestions,onChange:function handleChange(termNames){const uniqueTerms=termNames.reduce(((terms,newTerm)=>(terms.some((term=>term.toLowerCase()===newTerm.toLowerCase()))||terms.push(newTerm),terms)),[]);onChange(uniqueTerms)},onInputChange:debouncedSearch,label:(0,i18n_build_module.__)("Categories"),tokenizeOnBlur:!0,__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})}function useAddPatternCategory(){const{saveEntityRecord,invalidateResolution}=(0,use_dispatch.A)(core_data_build_module.M_),{corePatternCategories,userPatternCategories}=(0,use_select.A)((select=>{const{getUserPatternCategories,getBlockPatternCategories}=select(core_data_build_module.M_);return{corePatternCategories:getBlockPatternCategories(),userPatternCategories:getUserPatternCategories()}}),[]),categoryMap=(0,react.useMemo)((()=>{const uniqueCategories=new Map;return userPatternCategories.forEach((category=>{uniqueCategories.set(category.label.toLowerCase(),{label:category.label,name:category.name,id:category.id})})),corePatternCategories.forEach((category=>{uniqueCategories.has(category.label.toLowerCase())||"query"===category.name||uniqueCategories.set(category.label.toLowerCase(),{label:category.label,name:category.name})})),uniqueCategories}),[userPatternCategories,corePatternCategories]);return{categoryMap,findOrCreateTerm:async function findOrCreateTerm(term){try{const existingTerm=categoryMap.get(term.toLowerCase());if(existingTerm?.id)return existingTerm.id;const termData=existingTerm?{name:existingTerm.label,slug:existingTerm.name}:{name:term},newTerm=await saveEntityRecord("taxonomy",CATEGORY_SLUG,termData,{throwOnError:!0});return invalidateResolution("getUserPatternCategories"),newTerm.id}catch(error){if("term_exists"!==error.code)throw error;return error.data.term_id}}}}function CreatePatternModal({className="patterns-menu-items__convert-modal",modalTitle,...restProps}){const defaultModalTitle=(0,use_select.A)((select=>select(core_data_build_module.M_).getPostType(PATTERN_TYPES.user)?.labels?.add_new_item),[]);return(0,jsx_runtime.jsx)(modal.A,{title:modalTitle||defaultModalTitle,onRequestClose:restProps.onClose,overlayClassName:className,focusOnMount:"firstContentElement",size:"small",children:(0,jsx_runtime.jsx)(CreatePatternModalContents,{...restProps})})}function CreatePatternModalContents({confirmLabel=(0,i18n_build_module.__)("Add"),defaultCategories=[],content,onClose,onError,onSuccess,defaultSyncType=PATTERN_SYNC_TYPES.full,defaultTitle=""}){const[syncType,setSyncType]=(0,react.useState)(defaultSyncType),[categoryTerms,setCategoryTerms]=(0,react.useState)(defaultCategories),[title,setTitle]=(0,react.useState)(defaultTitle),[isSaving,setIsSaving]=(0,react.useState)(!1),{createPattern}=unlock((0,use_dispatch.A)(store)),{createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M),{categoryMap,findOrCreateTerm}=useAddPatternCategory();return(0,jsx_runtime.jsx)("form",{onSubmit:event=>{event.preventDefault(),async function onCreate(patternTitle,sync){if(title&&!isSaving)try{setIsSaving(!0);const categories=await Promise.all(categoryTerms.map((termName=>findOrCreateTerm(termName)))),newPattern=await createPattern(patternTitle,sync,"function"==typeof content?content():content,categories);onSuccess({pattern:newPattern,categoryId:PATTERN_DEFAULT_CATEGORY})}catch(error){createErrorNotice(error.message,{type:"snackbar",id:"pattern-create"}),onError?.()}finally{setIsSaving(!1),setCategoryTerms([]),setTitle("")}}(title,syncType)},children:(0,jsx_runtime.jsxs)(component.A,{spacing:"5",children:[(0,jsx_runtime.jsx)(text_control.A,{label:(0,i18n_build_module.__)("Name"),value:title,onChange:setTitle,placeholder:(0,i18n_build_module.__)("My pattern"),className:"patterns-create-modal__name-input",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,jsx_runtime.jsx)(CategorySelector,{categoryTerms,onChange:setCategoryTerms,categoryMap}),(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module._x)("Synced","pattern (singular)"),help:(0,i18n_build_module.__)("Sync this pattern across multiple locations."),checked:syncType===PATTERN_SYNC_TYPES.full,onChange:()=>{setSyncType(syncType===PATTERN_SYNC_TYPES.full?PATTERN_SYNC_TYPES.unsynced:PATTERN_SYNC_TYPES.full)}}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>{onClose(),setTitle("")},children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",type:"submit","aria-disabled":!title||isSaving,isBusy:isSaving,children:confirmLabel})]})]})})}function getTermLabels(pattern,categories){return pattern.type!==PATTERN_TYPES.user?categories.core?.filter((category=>pattern.categories.includes(category.name))).map((category=>category.label)):categories.user?.filter((category=>pattern.wp_pattern_category.includes(category.id))).map((category=>category.label))}function useDuplicatePatternProps({pattern,onSuccess}){const{createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M),categories=(0,use_select.A)((select=>{const{getUserPatternCategories,getBlockPatternCategories}=select(core_data_build_module.M_);return{core:getBlockPatternCategories(),user:getUserPatternCategories()}}));return pattern?{content:pattern.content,defaultCategories:getTermLabels(pattern,categories),defaultSyncType:pattern.type!==PATTERN_TYPES.user?PATTERN_SYNC_TYPES.unsynced:pattern.wp_pattern_sync_status||PATTERN_SYNC_TYPES.full,defaultTitle:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s (Copy)"),"string"==typeof pattern.title?pattern.title:pattern.title.raw),onSuccess:({pattern:newPattern})=>{createSuccessNotice((0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" duplicated.'),newPattern.title.raw),{type:"snackbar",id:"patterns-create"}),onSuccess?.({pattern:newPattern})}}:null}var menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js"),symbol=__webpack_require__("./packages/icons/build-module/library/symbol.js");function PatternConvertButton({clientIds,rootClientId,closeBlockSettingsMenu}){const{createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M),{replaceBlocks}=(0,use_dispatch.A)(block_editor_build_module.M_),{setEditingPattern}=unlock((0,use_dispatch.A)(store)),[isModalOpen,setIsModalOpen]=(0,react.useState)(!1),canConvert=(0,use_select.A)((select=>{var _getBlocksByClientId;const{canUser}=select(core_data_build_module.M_),{getBlocksByClientId,canInsertBlockType,getBlockRootClientId}=select(block_editor_build_module.M_),rootId=rootClientId||(clientIds.length>0?getBlockRootClientId(clientIds[0]):void 0),blocks=null!==(_getBlocksByClientId=getBlocksByClientId(clientIds))&&void 0!==_getBlocksByClientId?_getBlocksByClientId:[];return!(1===blocks.length&&blocks[0]&&(0,blocks_build_module.tk)(blocks[0])&&!!select(core_data_build_module.M_).getEntityRecord("postType","wp_block",blocks[0].attributes.ref))&&canInsertBlockType("core/block",rootId)&&blocks.every((block=>!!block&&block.isValid&&(0,blocks_build_module.pN)(block.name,"reusable",!0)))&&!!canUser("create",{kind:"postType",name:"wp_block"})}),[clientIds,rootClientId]),{getBlocksByClientId}=(0,use_select.A)(block_editor_build_module.M_),getContent=(0,react.useCallback)((()=>(0,blocks_build_module.lK)(getBlocksByClientId(clientIds))),[getBlocksByClientId,clientIds]);if(!canConvert)return null;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.A,{icon:symbol.A,onClick:()=>setIsModalOpen(!0),"aria-expanded":isModalOpen,"aria-haspopup":"dialog",children:(0,i18n_build_module.__)("Create pattern")}),isModalOpen&&(0,jsx_runtime.jsx)(CreatePatternModal,{content:getContent,onSuccess:pattern=>{(({pattern})=>{if(pattern.wp_pattern_sync_status!==PATTERN_SYNC_TYPES.unsynced){const newBlock=(0,blocks_build_module.Wv)("core/block",{ref:pattern.id});replaceBlocks(clientIds,newBlock),setEditingPattern(newBlock.clientId,!0),closeBlockSettingsMenu()}createSuccessNotice(pattern.wp_pattern_sync_status===PATTERN_SYNC_TYPES.unsynced?(0,i18n_build_module.nv)((0,i18n_build_module.__)("Unsynced pattern created: %s"),pattern.title.raw):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Synced pattern created: %s"),pattern.title.raw),{type:"snackbar",id:"convert-to-pattern-success"}),setIsModalOpen(!1)})(pattern)},onError:()=>{setIsModalOpen(!1)},onClose:()=>{setIsModalOpen(!1)}})]})}var add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js");const patterns_manage_button=function PatternsManageButton({clientId}){const{canRemove,isVisible,managePatternsUrl}=(0,use_select.A)((select=>{const{getBlock,canRemoveBlock,getBlockCount}=select(block_editor_build_module.M_),{canUser}=select(core_data_build_module.M_),reusableBlock=getBlock(clientId);return{canRemove:canRemoveBlock(clientId),isVisible:!!reusableBlock&&(0,blocks_build_module.tk)(reusableBlock)&&!!canUser("update",{kind:"postType",name:"wp_block",id:reusableBlock.attributes.ref}),innerBlockCount:getBlockCount(clientId),managePatternsUrl:canUser("create",{kind:"postType",name:"wp_template"})?(0,add_query_args.F)("site-editor.php",{path:"/patterns"}):(0,add_query_args.F)("edit.php",{post_type:"wp_block"})}}),[clientId]),{convertSyncedPatternToStatic}=unlock((0,use_dispatch.A)(store));return isVisible?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[canRemove&&(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>convertSyncedPatternToStatic(clientId),children:(0,i18n_build_module.__)("Detach")}),(0,jsx_runtime.jsx)(menu_item.A,{href:managePatternsUrl,children:(0,i18n_build_module.__)("Manage patterns")})]}):null};var a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js");var base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),text_component=__webpack_require__("./packages/components/build-module/text/component.js");function AllowOverridesModal({placeholder,initialName="",onClose,onSave}){const[editedBlockName,setEditedBlockName]=(0,react.useState)(initialName),descriptionId=(0,react.useId)(),isNameValid=!!editedBlockName.trim();return(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Enable overrides"),onRequestClose:onClose,focusOnMount:"firstContentElement",aria:{describedby:descriptionId},size:"small",children:(0,jsx_runtime.jsx)("form",{onSubmit:event=>{event.preventDefault(),isNameValid&&(()=>{if(editedBlockName!==initialName){const message=(0,i18n_build_module.nv)((0,i18n_build_module.__)('Block name changed to: "%s".'),editedBlockName);(0,a11y_build_module.L)(message,"assertive")}onSave(editedBlockName),onClose()})()},children:(0,jsx_runtime.jsxs)(component.A,{spacing:"6",children:[(0,jsx_runtime.jsx)(text_component.A,{id:descriptionId,children:(0,i18n_build_module.__)("Overrides are changes you make to a block within a synced pattern instance. Use overrides to customize a synced pattern instance to suit its new context. Name this block to specify an override.")}),(0,jsx_runtime.jsx)(text_control.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:editedBlockName,label:(0,i18n_build_module.__)("Name"),help:(0,i18n_build_module.__)('For example, if you are creating a recipe pattern, you use "Recipe Title", "Recipe Description", etc.'),placeholder,onChange:setEditedBlockName}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:onClose,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,"aria-disabled":!isNameValid,variant:"primary",type:"submit",children:(0,i18n_build_module.__)("Enable")})]})]})})})}function DisallowOverridesModal({onClose,onSave}){const descriptionId=(0,react.useId)();return(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Disable overrides"),onRequestClose:onClose,aria:{describedby:descriptionId},size:"small",children:(0,jsx_runtime.jsx)("form",{onSubmit:event=>{event.preventDefault(),onSave(),onClose()},children:(0,jsx_runtime.jsxs)(component.A,{spacing:"6",children:[(0,jsx_runtime.jsx)(text_component.A,{id:descriptionId,children:(0,i18n_build_module.__)("Are you sure you want to disable overrides? Disabling overrides will revert all applied overrides for this block throughout instances of this pattern.")}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:onClose,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,i18n_build_module.__)("Disable")})]})]})})})}const pattern_overrides_controls=function PatternOverridesControls({attributes,setAttributes,name:blockName}){const controlId=(0,react.useId)(),[showAllowOverridesModal,setShowAllowOverridesModal]=(0,react.useState)(!1),[showDisallowOverridesModal,setShowDisallowOverridesModal]=(0,react.useState)(!1),hasName=!!attributes.metadata?.name,defaultBindings=attributes.metadata?.bindings?.__default,hasOverrides=hasName&&"core/pattern-overrides"===defaultBindings?.source,isConnectedToOtherSources=defaultBindings?.source&&"core/pattern-overrides"!==defaultBindings.source,{updateBlockBindings}=(0,block_editor_build_module.KC)();function updateBindings(isChecked,customName){customName&&setAttributes({metadata:{...attributes.metadata,name:customName}}),updateBlockBindings({__default:isChecked?{source:"core/pattern-overrides"}:void 0})}if(isConnectedToOtherSources)return null;const hasUnsupportedImageAttributes=!("core/image"!==blockName||!attributes.caption?.length&&!attributes.href?.length),helpText=!hasOverrides&&hasUnsupportedImageAttributes?(0,i18n_build_module.__)("Overrides currently don't support image captions or links. Remove the caption or link first before enabling overrides."):(0,i18n_build_module.__)("Allow changes to this block throughout instances of this pattern.");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_editor_build_module.s1,{group:"advanced",children:(0,jsx_runtime.jsx)(base_control.Ay,{__nextHasNoMarginBottom:!0,id:controlId,label:(0,i18n_build_module.__)("Overrides"),help:helpText,children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"pattern-overrides-control__allow-overrides-button",variant:"secondary","aria-haspopup":"dialog",onClick:()=>{hasOverrides?setShowDisallowOverridesModal(!0):setShowAllowOverridesModal(!0)},disabled:!hasOverrides&&hasUnsupportedImageAttributes,accessibleWhenDisabled:!0,children:hasOverrides?(0,i18n_build_module.__)("Disable overrides"):(0,i18n_build_module.__)("Enable overrides")})})}),showAllowOverridesModal&&(0,jsx_runtime.jsx)(AllowOverridesModal,{initialName:attributes.metadata?.name,onClose:()=>setShowAllowOverridesModal(!1),onSave:newName=>{updateBindings(!0,newName)}}),showDisallowOverridesModal&&(0,jsx_runtime.jsx)(DisallowOverridesModal,{onClose:()=>setShowDisallowOverridesModal(!1),onSave:()=>updateBindings(!1)})]})};var toolbar_group=__webpack_require__("./packages/components/build-module/toolbar/toolbar-group/index.js"),toolbar_button=__webpack_require__("./packages/components/build-module/toolbar/toolbar-button/index.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js");const CONTENT="content";var toolbar_item=__webpack_require__("./packages/components/build-module/toolbar/toolbar-item/index.js"),dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),copy=__webpack_require__("./packages/icons/build-module/library/copy.js");const{useBlockDisplayTitle}=unlock(block_editor_build_module.jb);function PatternOverridesToolbarIndicator({clientIds}){const isSingleBlockSelected=1===clientIds.length,{icon,firstBlockName}=(0,use_select.A)((select=>{const{getBlockAttributes,getBlockNamesByClientId}=select(block_editor_build_module.M_),{getBlockType,getActiveBlockVariation}=select(blocks_build_module.M_),blockTypeNames=getBlockNamesByClientId(clientIds),_firstBlockTypeName=blockTypeNames[0],firstBlockType=getBlockType(_firstBlockTypeName);let _icon;if(isSingleBlockSelected){const match=getActiveBlockVariation(_firstBlockTypeName,getBlockAttributes(clientIds[0]));_icon=match?.icon||firstBlockType.icon}else{_icon=1===new Set(blockTypeNames).size?firstBlockType.icon:copy.A}return{icon:_icon,firstBlockName:getBlockAttributes(clientIds[0]).metadata.name}}),[clientIds,isSingleBlockSelected]),firstBlockTitle=useBlockDisplayTitle({clientId:clientIds[0],maximumLength:35}),blockDescription=isSingleBlockSelected?(0,i18n_build_module.nv)((0,i18n_build_module.__)('This %1$s is editable using the "%2$s" override.'),firstBlockTitle.toLowerCase(),firstBlockName):(0,i18n_build_module.__)("These blocks are editable using overrides."),descriptionId=(0,react.useId)();return(0,jsx_runtime.jsx)(toolbar_item.A,{children:toggleProps=>(0,jsx_runtime.jsx)(dropdown_menu.A,{className:"patterns-pattern-overrides-toolbar-indicator",label:firstBlockTitle,popoverProps:{placement:"bottom-start",className:"patterns-pattern-overrides-toolbar-indicator__popover"},icon:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(block_editor_build_module.th,{icon,className:"patterns-pattern-overrides-toolbar-indicator-icon",showColors:!0})}),toggleProps:{description:blockDescription,...toggleProps},menuProps:{orientation:"both","aria-describedby":descriptionId},children:()=>(0,jsx_runtime.jsx)(text_component.A,{id:descriptionId,children:blockDescription})})})}const privateApis={};lock(privateApis,{OverridesPanel:function OverridesPanel(){const allClientIds=(0,use_select.A)((select=>select(block_editor_build_module.M_).getClientIdsWithDescendants()),[]),{getBlock}=(0,use_select.A)(block_editor_build_module.M_),clientIdsWithOverrides=(0,react.useMemo)((()=>allClientIds.filter((clientId=>isOverridableBlock(getBlock(clientId))))),[allClientIds,getBlock]);return clientIdsWithOverrides?.length?(0,jsx_runtime.jsx)(body.Ay,{title:(0,i18n_build_module.__)("Overrides"),children:(0,jsx_runtime.jsx)(BlockQuickNavigation,{clientIds:clientIdsWithOverrides})}):null},CreatePatternModal,CreatePatternModalContents,DuplicatePatternModal:function DuplicatePatternModal({pattern,onClose,onSuccess}){const duplicatedProps=useDuplicatePatternProps({pattern,onSuccess});return pattern?(0,jsx_runtime.jsx)(CreatePatternModal,{modalTitle:(0,i18n_build_module.__)("Duplicate pattern"),confirmLabel:(0,i18n_build_module.__)("Duplicate"),onClose,onError:onClose,...duplicatedProps}):null},isOverridableBlock,hasOverridableBlocks:function hasOverridableBlocks(blocks){return blocks.some((block=>!!isOverridableBlock(block)||hasOverridableBlocks(block.innerBlocks)))},useDuplicatePatternProps,RenamePatternModal:function RenamePatternModal({onClose,onError,onSuccess,pattern,...props}){const originalName=(0,html_entities_build_module.S)(pattern.title),[name,setName]=(0,react.useState)(originalName),[isSaving,setIsSaving]=(0,react.useState)(!1),{editEntityRecord,__experimentalSaveSpecifiedEntityEdits:saveSpecifiedEntityEdits}=(0,use_dispatch.A)(core_data_build_module.M_),{createSuccessNotice,createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M);return(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Rename"),...props,onRequestClose:onClose,focusOnMount:"firstContentElement",size:"small",children:(0,jsx_runtime.jsx)("form",{onSubmit:async event=>{if(event.preventDefault(),name&&name!==pattern.title&&!isSaving)try{await editEntityRecord("postType",pattern.type,pattern.id,{title:name}),setIsSaving(!0),setName(""),onClose?.();const savedRecord=await saveSpecifiedEntityEdits("postType",pattern.type,pattern.id,["title"],{throwOnError:!0});onSuccess?.(savedRecord),createSuccessNotice((0,i18n_build_module.__)("Pattern renamed"),{type:"snackbar",id:"pattern-update"})}catch(error){onError?.();const errorMessage=error.message&&"unknown_error"!==error.code?error.message:(0,i18n_build_module.__)("An error occurred while renaming the pattern.");createErrorNotice(errorMessage,{type:"snackbar",id:"pattern-update"})}finally{setIsSaving(!1),setName("")}},children:(0,jsx_runtime.jsxs)(component.A,{spacing:"5",children:[(0,jsx_runtime.jsx)(text_control.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Name"),value:name,onChange:setName,required:!0}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>{onClose?.(),setName("")},children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,i18n_build_module.__)("Save")})]})]})})})},PatternsMenuItems:function PatternsMenuItems({rootClientId}){return(0,jsx_runtime.jsx)(block_editor_build_module.Or,{children:({selectedClientIds,onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PatternConvertButton,{clientIds:selectedClientIds,rootClientId,closeBlockSettingsMenu:onClose}),1===selectedClientIds.length&&(0,jsx_runtime.jsx)(patterns_manage_button,{clientId:selectedClientIds[0]})]})})},RenamePatternCategoryModal:function RenamePatternCategoryModal({category,existingCategories,onClose,onError,onSuccess,...props}){const id=(0,react.useId)(),textControlRef=(0,react.useRef)(),[name,setName]=(0,react.useState)((0,html_entities_build_module.S)(category.name)),[isSaving,setIsSaving]=(0,react.useState)(!1),[validationMessage,setValidationMessage]=(0,react.useState)(!1),validationMessageId=validationMessage?`patterns-rename-pattern-category-modal__validation-message-${id}`:void 0,{saveEntityRecord,invalidateResolution}=(0,use_dispatch.A)(core_data_build_module.M_),{createErrorNotice,createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M),onRequestClose=()=>{onClose(),setName("")};return(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Rename"),onRequestClose,...props,children:(0,jsx_runtime.jsx)("form",{onSubmit:async event=>{if(event.preventDefault(),!isSaving){if(!name||name===category.name){const message=(0,i18n_build_module.__)("Please enter a new name for this category.");return(0,a11y_build_module.L)(message,"assertive"),setValidationMessage(message),void textControlRef.current?.focus()}if(existingCategories.patternCategories.find((existingCategory=>existingCategory.id!==category.id&&existingCategory.label.toLowerCase()===name.toLowerCase()))){const message=(0,i18n_build_module.__)("This category already exists. Please use a different name.");return(0,a11y_build_module.L)(message,"assertive"),setValidationMessage(message),void textControlRef.current?.focus()}try{setIsSaving(!0);const savedRecord=await saveEntityRecord("taxonomy",CATEGORY_SLUG,{id:category.id,slug:category.slug,name});invalidateResolution("getUserPatternCategories"),onSuccess?.(savedRecord),onClose(),createSuccessNotice((0,i18n_build_module.__)("Pattern category renamed."),{type:"snackbar",id:"pattern-category-update"})}catch(error){onError?.(),createErrorNotice(error.message,{type:"snackbar",id:"pattern-category-update"})}finally{setIsSaving(!1),setName("")}}},children:(0,jsx_runtime.jsxs)(component.A,{spacing:"5",children:[(0,jsx_runtime.jsxs)(component.A,{spacing:"2",children:[(0,jsx_runtime.jsx)(text_control.A,{ref:textControlRef,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Name"),value:name,onChange:newName=>{validationMessage&&setValidationMessage(void 0),setName(newName)},"aria-describedby":validationMessageId,required:!0}),validationMessage&&(0,jsx_runtime.jsx)("span",{className:"patterns-rename-pattern-category-modal__validation-message",id:validationMessageId,children:validationMessage})]}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:onRequestClose,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",type:"submit","aria-disabled":!name||name===category.name||isSaving,isBusy:isSaving,children:(0,i18n_build_module.__)("Save")})]})]})})})},PatternOverridesControls:pattern_overrides_controls,ResetOverridesControl:function ResetOverridesControl(props){const name=props.attributes.metadata?.name,registry=(0,use_registry.A)(),isOverriden=(0,use_select.A)((select=>{if(!name)return;const{getBlockAttributes,getBlockParentsByBlockName}=select(block_editor_build_module.M_),[patternClientId]=getBlockParentsByBlockName(props.clientId,"core/block",!0);if(!patternClientId)return;const overrides=getBlockAttributes(patternClientId).content;return overrides?overrides.hasOwnProperty(name):void 0}),[props.clientId,name]);return(0,jsx_runtime.jsx)(block_editor_build_module.Ax,{children:(0,jsx_runtime.jsx)(toolbar_group.A,{children:(0,jsx_runtime.jsx)(toolbar_button.A,{onClick:function onClick(){const{getBlockAttributes,getBlockParentsByBlockName}=registry.select(block_editor_build_module.M_),[patternClientId]=getBlockParentsByBlockName(props.clientId,"core/block",!0);if(!patternClientId)return;const overrides=getBlockAttributes(patternClientId).content;if(!overrides.hasOwnProperty(name))return;const{updateBlockAttributes,__unstableMarkLastChangeAsPersistent}=registry.dispatch(block_editor_build_module.M_);__unstableMarkLastChangeAsPersistent();let newOverrides={...overrides};delete newOverrides[name],Object.keys(newOverrides).length||(newOverrides=void 0),updateBlockAttributes(patternClientId,{[CONTENT]:newOverrides})},disabled:!isOverriden,children:(0,i18n_build_module.__)("Reset")})})})},PatternOverridesBlockControls:function PatternOverridesBlockControls(){const{clientIds,hasPatternOverrides,hasParentPattern}=(0,use_select.A)((select=>{const{getBlockAttributes,getSelectedBlockClientIds,getBlockParentsByBlockName}=select(block_editor_build_module.M_),selectedClientIds=getSelectedBlockClientIds(),_hasPatternOverrides=selectedClientIds.every((clientId=>{var _getBlockAttributes$m;return Object.values(null!==(_getBlockAttributes$m=getBlockAttributes(clientId)?.metadata?.bindings)&&void 0!==_getBlockAttributes$m?_getBlockAttributes$m:{}).some((binding=>"core/pattern-overrides"===binding?.source))})),_hasParentPattern=selectedClientIds.every((clientId=>getBlockParentsByBlockName(clientId,"core/block",!0).length>0));return{clientIds:selectedClientIds,hasPatternOverrides:_hasPatternOverrides,hasParentPattern:_hasParentPattern}}),[]);return hasPatternOverrides&&hasParentPattern?(0,jsx_runtime.jsx)(block_editor_build_module.mC,{group:"parent",children:(0,jsx_runtime.jsx)(PatternOverridesToolbarIndicator,{clientIds})}):null},useAddPatternCategory,PATTERN_TYPES,PATTERN_DEFAULT_CATEGORY,PATTERN_USER_CATEGORY:"my-patterns",EXCLUDED_PATTERN_SOURCES:["core","pattern-directory/core","pattern-directory/featured"],PATTERN_SYNC_TYPES,PARTIAL_SYNCING_SUPPORTED_BLOCKS})},"./packages/primitives/build-module/view/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>View});const View="div"},"./packages/undo-manager/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>createUndoManager});var _wordpress_is_shallow_equal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/is-shallow-equal/build-module/index.js");function mergeHistoryChanges(changes1,changes2){const newChanges={...changes1};return Object.entries(changes2).forEach((([key,value])=>{newChanges[key]?newChanges[key]={...newChanges[key],to:value.to}:newChanges[key]=value})),newChanges}const addHistoryChangesIntoRecord=(record,changes)=>{const existingChangesIndex=record?.findIndex((({id:recordIdentifier})=>"string"==typeof recordIdentifier?recordIdentifier===changes.id:(0,_wordpress_is_shallow_equal__WEBPACK_IMPORTED_MODULE_0__.Ay)(recordIdentifier,changes.id))),nextRecord=[...record];return-1!==existingChangesIndex?nextRecord[existingChangesIndex]={id:changes.id,changes:mergeHistoryChanges(nextRecord[existingChangesIndex].changes,changes.changes)}:nextRecord.push(changes),nextRecord};function createUndoManager(){let history=[],stagedRecord=[],offset=0;const dropPendingRedos=()=>{history=history.slice(0,offset||void 0),offset=0},appendStagedRecordToLatestHistoryRecord=()=>{var _history$index;const index=0===history.length?0:history.length-1;let latestRecord=null!==(_history$index=history[index])&&void 0!==_history$index?_history$index:[];stagedRecord.forEach((changes=>{latestRecord=addHistoryChangesIntoRecord(latestRecord,changes)})),stagedRecord=[],history[index]=latestRecord};return{addRecord(record,isStaged=!1){const isEmpty=!record||(record=>!record.filter((({changes})=>Object.values(changes).some((({from,to})=>"function"!=typeof from&&"function"!=typeof to&&!(0,_wordpress_is_shallow_equal__WEBPACK_IMPORTED_MODULE_0__.Ay)(from,to))))).length)(record);if(isStaged){if(isEmpty)return;record.forEach((changes=>{stagedRecord=addHistoryChangesIntoRecord(stagedRecord,changes)}))}else{if(dropPendingRedos(),stagedRecord.length&&appendStagedRecordToLatestHistoryRecord(),isEmpty)return;history.push(record)}},undo(){stagedRecord.length&&(dropPendingRedos(),appendStagedRecordToLatestHistoryRecord());const undoRecord=history[history.length-1+offset];if(undoRecord)return offset-=1,undoRecord},redo(){const redoRecord=history[history.length+offset];if(redoRecord)return offset+=1,redoRecord},hasUndo:()=>!!history[history.length-1+offset],hasRedo:()=>!!history[history.length+offset]}}},"./packages/url/build-module/add-query-args.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>addQueryArgs});var _get_query_args__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/url/build-module/get-query-args.js"),_build_query_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/url/build-module/build-query-string.js");function addQueryArgs(url="",args){if(!args||!Object.keys(args).length)return url;let baseUrl=url;const queryStringIndex=url.indexOf("?");return-1!==queryStringIndex&&(args=Object.assign((0,_get_query_args__WEBPACK_IMPORTED_MODULE_0__.u)(url),args),baseUrl=baseUrl.substr(0,queryStringIndex)),baseUrl+"?"+(0,_build_query_string__WEBPACK_IMPORTED_MODULE_1__.G)(args)}},"./packages/url/build-module/build-query-string.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function buildQueryString(data){let string="";const stack=Object.entries(data);let pair;for(;pair=stack.shift();){let[key,value]=pair;if(Array.isArray(value)||value&&value.constructor===Object){const valuePairs=Object.entries(value).reverse();for(const[member,memberValue]of valuePairs)stack.unshift([`${key}[${member}]`,memberValue])}else void 0!==value&&(null===value&&(value=""),string+="&"+[key,value].map(encodeURIComponent).join("="))}return string.substr(1)}__webpack_require__.d(__webpack_exports__,{G:()=>buildQueryString})},"./packages/url/build-module/filter-url-for-display.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function filterURLForDisplay(url,maxLength=null){if(!url)return"";let filteredURL=url.replace(/^[a-z\-.\+]+[0-9]*:(\/\/)?/i,"").replace(/^www\./i,"");filteredURL.match(/^[^\/]+\/$/)&&(filteredURL=filteredURL.replace("/",""));if(!maxLength||filteredURL.length<=maxLength||!filteredURL.match(/\/([^\/?]+)\.(?:[\w]+)(?=\?|$)/))return filteredURL;filteredURL=filteredURL.split("?")[0];const urlPieces=filteredURL.split("/"),file=urlPieces[urlPieces.length-1];if(file.length<=maxLength)return"…"+filteredURL.slice(-maxLength);const index=file.lastIndexOf("."),[fileName,extension]=[file.slice(0,index),file.slice(index+1)],truncatedFile=fileName.slice(-3)+"."+extension;return file.slice(0,maxLength-truncatedFile.length-1)+"…"+truncatedFile}__webpack_require__.d(__webpack_exports__,{r:()=>filterURLForDisplay})},"./packages/url/build-module/get-path.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function getPath(url){const matches=/^[^\/\s:]+:(?:\/\/)?[^\/\s#?]+[\/]([^\s#?]+)[#?]{0,1}\S*$/.exec(url);if(matches)return matches[1]}__webpack_require__.d(__webpack_exports__,{Y:()=>getPath})},"./packages/url/build-module/get-query-args.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>getQueryArgs});var _safe_decode_uri_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/url/build-module/safe-decode-uri-component.js"),_get_query_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/url/build-module/get-query-string.js");function getQueryArgs(url){return((0,_get_query_string__WEBPACK_IMPORTED_MODULE_0__.e)(url)||"").replace(/\+/g,"%20").split("&").reduce(((accumulator,keyValue)=>{const[key,value=""]=keyValue.split("=").filter(Boolean).map(_safe_decode_uri_component__WEBPACK_IMPORTED_MODULE_1__.T);if(key){!function setPath(object,path,value){const length=path.length,lastIndex=length-1;for(let i=0;i<length;i++){let key=path[i];!key&&Array.isArray(object)&&(key=object.length.toString()),key=["__proto__","constructor","prototype"].includes(key)?key.toUpperCase():key;const isNextKeyArrayIndex=!isNaN(Number(path[i+1]));object[key]=i===lastIndex?value:object[key]||(isNextKeyArrayIndex?[]:{}),Array.isArray(object[key])&&!isNextKeyArrayIndex&&(object[key]={...object[key]}),object=object[key]}}(accumulator,key.replace(/\]/g,"").split("["),value)}return accumulator}),Object.create(null))}},"./packages/url/build-module/get-query-string.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function getQueryString(url){let query;try{query=new URL(url,"http://example.com").search.substring(1)}catch(error){}if(query)return query}__webpack_require__.d(__webpack_exports__,{e:()=>getQueryString})},"./packages/url/build-module/is-email.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>isEmail});const EMAIL_REGEXP=/^(mailto:)?[a-z0-9._%+-]+@[a-z0-9][a-z0-9.-]*\.[a-z]{2,63}$/i;function isEmail(email){return EMAIL_REGEXP.test(email)}},"./packages/url/build-module/is-url.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isURL(url){try{return new URL(url),!0}catch{return!1}}__webpack_require__.d(__webpack_exports__,{m:()=>isURL})},"./packages/url/build-module/prepend-http.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>prependHTTP});var _is_email__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/url/build-module/is-email.js");const USABLE_HREF_REGEXP=/^(?:[a-z]+:|#|\?|\.|\/)/i;function prependHTTP(url){return url?(url=url.trim(),USABLE_HREF_REGEXP.test(url)||(0,_is_email__WEBPACK_IMPORTED_MODULE_0__.x)(url)?url:"http://"+url):url}},"./packages/url/build-module/remove-query-args.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>removeQueryArgs});var _get_query_args__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/url/build-module/get-query-args.js"),_build_query_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/url/build-module/build-query-string.js");function removeQueryArgs(url,...args){const queryStringIndex=url.indexOf("?");if(-1===queryStringIndex)return url;const query=(0,_get_query_args__WEBPACK_IMPORTED_MODULE_0__.u)(url),baseURL=url.substr(0,queryStringIndex);args.forEach((arg=>delete query[arg]));const queryString=(0,_build_query_string__WEBPACK_IMPORTED_MODULE_1__.G)(query);return queryString?baseURL+"?"+queryString:baseURL}},"./packages/url/build-module/safe-decode-uri-component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function safeDecodeURIComponent(uriComponent){try{return decodeURIComponent(uriComponent)}catch(uriComponentError){return uriComponent}}__webpack_require__.d(__webpack_exports__,{T:()=>safeDecodeURIComponent})},"./packages/url/build-module/safe-decode-uri.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function safeDecodeURI(uri){try{return decodeURI(uri)}catch(uriError){return uri}}__webpack_require__.d(__webpack_exports__,{S:()=>safeDecodeURI})},"./packages/wordcount/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>count});const defaultSettings={HTMLRegExp:/<\/?[a-z][^>]*?>/gi,HTMLcommentRegExp:/<!--[\s\S]*?-->/g,spaceRegExp:/&nbsp;|&#160;/gi,HTMLEntityRegExp:/&\S+?;/g,connectorRegExp:/--|\u2014/g,removeRegExp:new RegExp(["[","!-/:-@[-`{-~","-¿×÷"," -⯿","⸀-⹿","]"].join(""),"g"),astralRegExp:/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wordsRegExp:/\S\s+/g,characters_excluding_spacesRegExp:/\S/g,characters_including_spacesRegExp:/[^\f\n\r\t\v\u00AD\u2028\u2029]/g,l10n:{type:"words"}};function stripTags(settings,text){return text.replace(settings.HTMLRegExp,"\n")}function transposeAstralsToCountableChar(settings,text){return text.replace(settings.astralRegExp,"a")}function stripHTMLEntities(settings,text){return text.replace(settings.HTMLEntityRegExp,"")}function stripConnectors(settings,text){return text.replace(settings.connectorRegExp," ")}function stripRemovables(settings,text){return text.replace(settings.removeRegExp,"")}function stripHTMLComments(settings,text){return text.replace(settings.HTMLcommentRegExp,"")}function stripShortcodes(settings,text){return settings.shortcodesRegExp?text.replace(settings.shortcodesRegExp,"\n"):text}function stripSpaces(settings,text){return text.replace(settings.spaceRegExp," ")}function transposeHTMLEntitiesToCountableChars(settings,text){return text.replace(settings.HTMLEntityRegExp,"a")}function countCharacters(text,regex,settings){var _text$match$length2;return text=[stripTags.bind(null,settings),stripHTMLComments.bind(null,settings),stripShortcodes.bind(null,settings),transposeAstralsToCountableChar.bind(null,settings),stripSpaces.bind(null,settings),transposeHTMLEntitiesToCountableChars.bind(null,settings)].reduce(((result,fn)=>fn(result)),text),text+="\n",null!==(_text$match$length2=text.match(regex)?.length)&&void 0!==_text$match$length2?_text$match$length2:0}function count(text,type,userSettings){const settings=function loadSettings(type,userSettings){var _settings$l10n$shortc;const settings=Object.assign({},defaultSettings,userSettings);return settings.shortcodes=null!==(_settings$l10n$shortc=settings.l10n?.shortcodes)&&void 0!==_settings$l10n$shortc?_settings$l10n$shortc:[],settings.shortcodes&&settings.shortcodes.length&&(settings.shortcodesRegExp=new RegExp("\\[\\/?(?:"+settings.shortcodes.join("|")+")[^\\]]*?\\]","g")),settings.type=type,"characters_excluding_spaces"!==settings.type&&"characters_including_spaces"!==settings.type&&(settings.type="words"),settings}(type,userSettings);let matchRegExp;switch(settings.type){case"words":return matchRegExp=settings.wordsRegExp,function countWords(text,regex,settings){var _text$match$length;return text=[stripTags.bind(null,settings),stripHTMLComments.bind(null,settings),stripShortcodes.bind(null,settings),stripSpaces.bind(null,settings),stripHTMLEntities.bind(null,settings),stripConnectors.bind(null,settings),stripRemovables.bind(null,settings)].reduce(((result,fn)=>fn(result)),text),text+="\n",null!==(_text$match$length=text.match(regex)?.length)&&void 0!==_text$match$length?_text$match$length:0}(text,matchRegExp,settings);case"characters_including_spaces":return matchRegExp=settings.characters_including_spacesRegExp,countCharacters(text,matchRegExp,settings);case"characters_excluding_spaces":return matchRegExp=settings.characters_excluding_spacesRegExp,countCharacters(text,matchRegExp,settings);default:return 0}}},"./node_modules/simple-peer sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/simple-peer sync recursive",module.exports=webpackEmptyContext}}]);