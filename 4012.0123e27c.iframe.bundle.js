"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[4012],{"./packages/block-editor/src/components/block-edit/context.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B8:()=>DEFAULT_BLOCK_EDIT_CONTEXT,F9:()=>isPreviewModeKey,KY:()=>Provider,VN:()=>blockBindingsKey,dg:()=>mayDisplayParentControlsKey,dk:()=>mayDisplayControlsKey,gF:()=>blockEditingModeKey,m_:()=>useBlockEditContext});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const mayDisplayControlsKey=Symbol("mayDisplayControls"),mayDisplayParentControlsKey=Symbol("mayDisplayParentControls"),blockEditingModeKey=Symbol("blockEditingMode"),blockBindingsKey=Symbol("blockBindings"),isPreviewModeKey=Symbol("isPreviewMode"),DEFAULT_BLOCK_EDIT_CONTEXT={name:"",isSelected:!1},Context=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createContext)(DEFAULT_BLOCK_EDIT_CONTEXT),{Provider}=Context;function useBlockEditContext(){return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useContext)(Context)}},"./packages/block-editor/src/components/block-patterns-list/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/build-module/tooltip/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/components/build-module/composite/index.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./packages/components/build-module/h-stack/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./packages/icons/build-module/icon/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./packages/icons/build-module/library/symbol.js"),_block_preview__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/block-editor/src/components/block-preview/index.js"),_inserter_draggable_blocks__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/block-editor/src/components/inserter-draggable-blocks/index.js"),_block_patterns_paging__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./packages/block-editor/src/components/block-patterns-paging/index.js"),_inserter_block_patterns_tab_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/block-editor/src/components/inserter/block-patterns-tab/utils.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const WithToolTip=({showTooltip,title,children})=>showTooltip?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.Ay,{text:title,children}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children});function BlockPattern({id,isDraggable,pattern,onClick,onHover,showTitle=!0,showTooltip,category}){const[isDragging,setIsDragging]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useState)(!1),{blocks,viewportWidth}=pattern,descriptionId=`block-editor-block-patterns-list__item-description-${(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_5__.A)(BlockPattern)}`,patternBlocks=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useMemo)((()=>category&&isDraggable?(null!=blocks?blocks:[]).map((block=>{const clonedBlock=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.JB)(block);return clonedBlock.attributes.metadata?.categories?.includes(category)&&(clonedBlock.attributes.metadata.categories=[category]),clonedBlock})):blocks),[blocks,isDraggable,category]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_inserter_draggable_blocks__WEBPACK_IMPORTED_MODULE_6__.A,{isEnabled:isDraggable,blocks:patternBlocks,pattern,children:({draggable,onDragStart,onDragEnd})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"block-editor-block-patterns-list__list-item",draggable,onDragStart:event=>{setIsDragging(!0),onDragStart&&(onHover?.(null),onDragStart(event))},onDragEnd:event=>{setIsDragging(!1),onDragEnd&&onDragEnd(event)},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithToolTip,{showTooltip:showTooltip&&!pattern.type!==_inserter_block_patterns_tab_utils__WEBPACK_IMPORTED_MODULE_7__.KG.user,title:pattern.title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_8__.e.Item,{render:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{role:"option","aria-label":pattern.title,"aria-describedby":pattern.description?descriptionId:void 0,className:(0,clsx__WEBPACK_IMPORTED_MODULE_9__.A)("block-editor-block-patterns-list__item",{"block-editor-block-patterns-list__list-item-synced":pattern.type===_inserter_block_patterns_tab_utils__WEBPACK_IMPORTED_MODULE_7__.KG.user&&!pattern.syncStatus})}),id,onClick:()=>{onClick(pattern,blocks),onHover?.(null)},onMouseEnter:()=>{isDragging||onHover?.(pattern)},onMouseLeave:()=>onHover?.(null),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_block_preview__WEBPACK_IMPORTED_MODULE_10__.Ay,{blocks,viewportWidth}),showTitle&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_11__.A,{className:"block-editor-patterns__pattern-details",spacing:2,children:[pattern.type===_inserter_block_patterns_tab_utils__WEBPACK_IMPORTED_MODULE_7__.KG.user&&!pattern.syncStatus&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"block-editor-patterns__pattern-icon-wrapper",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_wordpress_icons__WEBPACK_IMPORTED_MODULE_12__.A,{className:"block-editor-patterns__pattern-icon",icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_13__.A})}),(!showTooltip||pattern.type===_inserter_block_patterns_tab_utils__WEBPACK_IMPORTED_MODULE_7__.KG.user)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"block-editor-block-patterns-list__item-title",children:pattern.title})]}),!!pattern.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_14__.A,{id:descriptionId,children:pattern.description})]})})})})}function BlockPatternPlaceholder(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"block-editor-block-patterns-list__item is-placeholder"})}function BlockPatternsList({isDraggable,blockPatterns,shownPatterns,onHover,onClickPattern,orientation,label=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Block patterns"),category,showTitle=!0,showTitlesAsTooltip,pagingProps},ref){const[activeCompositeId,setActiveCompositeId]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useState)(void 0);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useEffect)((()=>{const firstCompositeItemId=blockPatterns.find((pattern=>shownPatterns.includes(pattern)))?.name;setActiveCompositeId(firstCompositeItemId)}),[shownPatterns,blockPatterns]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_8__.e,{orientation,activeId:activeCompositeId,setActiveId:setActiveCompositeId,role:"listbox",className:"block-editor-block-patterns-list","aria-label":label,ref,children:[blockPatterns.map((pattern=>shownPatterns.includes(pattern)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(BlockPattern,{id:pattern.name,pattern,onClick:onClickPattern,onHover,isDraggable,showTitle,showTooltip:showTitlesAsTooltip,category},pattern.name):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(BlockPatternPlaceholder,{},pattern.name))),pagingProps&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_block_patterns_paging__WEBPACK_IMPORTED_MODULE_15__.A,{...pagingProps})]})}BlockPattern.displayName="BlockPattern",BlockPatternPlaceholder.displayName="BlockPatternPlaceholder",BlockPatternsList.displayName="BlockPatternsList";const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.forwardRef)(BlockPatternsList);BlockPatternsList.__docgenInfo={description:"",methods:[],displayName:"BlockPatternsList",props:{label:{defaultValue:{value:"__( 'Block patterns' )",computed:!0},required:!1},showTitle:{defaultValue:{value:"true",computed:!1},required:!1}}}},"./packages/block-editor/src/components/block-patterns-paging/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Pagination});var _wordpress_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/v-stack/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/build-module/text/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/build-module/h-stack/component.js"),_wordpress_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/build-module/button/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function Pagination({currentPage,numPages,changePage,totalItems}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.A,{className:"block-editor-patterns__grid-pagination-wrapper",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"muted",children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__._n)("%s item","%s items",totalItems),totalItems)}),numPages>1&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_4__.A,{expanded:!1,spacing:3,justify:"flex-start",className:"block-editor-patterns__grid-pagination",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_4__.A,{expanded:!1,spacing:1,className:"block-editor-patterns__grid-pagination-previous",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_5__.Ay,{variant:"tertiary",onClick:()=>changePage(1),disabled:1===currentPage,"aria-label":(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("First page"),size:"compact",accessibleWhenDisabled:!0,className:"block-editor-patterns__grid-pagination-button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{children:"«"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_5__.Ay,{variant:"tertiary",onClick:()=>changePage(currentPage-1),disabled:1===currentPage,"aria-label":(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Previous page"),size:"compact",accessibleWhenDisabled:!0,className:"block-editor-patterns__grid-pagination-button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{children:"‹"})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_3__.A,{variant:"muted",children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__._x)("%1$s of %2$s","paging"),currentPage,numPages)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_wordpress_components__WEBPACK_IMPORTED_MODULE_4__.A,{expanded:!1,spacing:1,className:"block-editor-patterns__grid-pagination-next",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_5__.Ay,{variant:"tertiary",onClick:()=>changePage(currentPage+1),disabled:currentPage===numPages,"aria-label":(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Next page"),size:"compact",accessibleWhenDisabled:!0,className:"block-editor-patterns__grid-pagination-button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{children:"›"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_5__.Ay,{variant:"tertiary",onClick:()=>changePage(numPages),disabled:currentPage===numPages,"aria-label":(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("Last page"),size:"compact",accessibleWhenDisabled:!0,className:"block-editor-patterns__grid-pagination-button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{children:"»"})})]})]})]})}Pagination.displayName="Pagination",Pagination.__docgenInfo={description:"",methods:[],displayName:"Pagination"}},"./packages/block-editor/src/components/block-preview/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>block_preview});var use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),react=__webpack_require__("./node_modules/react/index.js"),build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),provider=__webpack_require__("./packages/block-editor/src/components/provider/index.js"),use_resize_observer=__webpack_require__("./packages/compose/build-module/hooks/use-resize-observer/index.js"),use_ref_effect=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),disabled=__webpack_require__("./packages/components/build-module/disabled/index.js"),dist_clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),context=__webpack_require__("./packages/data/build-module/components/async-mode-provider/context.js"),use_viewport_match=__webpack_require__("./packages/compose/build-module/hooks/use-viewport-match/index.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),raw_html=__webpack_require__("./packages/element/build-module/raw-html.js"),blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),with_filters=__webpack_require__("./packages/components/build-module/higher-order/with-filters/index.js"),with_dispatch=__webpack_require__("./packages/data/build-module/components/with-dispatch/index.js"),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),safe_html=__webpack_require__("./packages/dom/build-module/dom/safe-html.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Context=(0,react.createContext)({});function BlockContextProvider({value,children}){const context=(0,react.useContext)(Context),nextValue=(0,react.useMemo)((()=>({...context,...value})),[context,value]);return(0,jsx_runtime.jsx)(Context.Provider,{value:nextValue,children})}BlockContextProvider.displayName="BlockContextProvider";const block_context=Context;BlockContextProvider.__docgenInfo={description:"Component which merges passed value with current consumed block context.\n\n@see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-context/README.md\n\n@param {BlockContextProviderProps} props",methods:[],displayName:"BlockContextProvider"};const DEFAULT_BLOCK_CONTEXT={},Edit=props=>{const{name}=props,blockType=(0,blocks_build_module.E7)(name);if(!blockType)return null;const Component=blockType.edit||blockType.save;return(0,jsx_runtime.jsx)(Component,{...props})};Edit.displayName="Edit";const EditWithFilters=(0,with_filters.A)("editor.BlockEdit")(Edit),EditWithGeneratedProps=props=>{const{attributes={},name}=props,blockType=(0,blocks_build_module.E7)(name),blockContext=(0,react.useContext)(block_context),context=(0,react.useMemo)((()=>blockType&&blockType.usesContext?Object.fromEntries(Object.entries(blockContext).filter((([key])=>blockType.usesContext.includes(key)))):DEFAULT_BLOCK_CONTEXT),[blockType,blockContext]);if(!blockType)return null;if(blockType.apiVersion>1)return(0,jsx_runtime.jsx)(EditWithFilters,{...props,context});const generatedClassName=(0,blocks_build_module.pN)(blockType,"className",!0)?(0,blocks_build_module.KW)(name):null,className=(0,dist_clsx.A)(generatedClassName,attributes.className,props.className);return(0,jsx_runtime.jsx)(EditWithFilters,{...props,context,className})};EditWithGeneratedProps.displayName="EditWithGeneratedProps";const edit=EditWithGeneratedProps;EditWithGeneratedProps.__docgenInfo={description:"",methods:[],displayName:"EditWithGeneratedProps"};var block_edit_context=__webpack_require__("./packages/block-editor/src/components/block-edit/context.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js"),dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),menu_group=__webpack_require__("./packages/components/build-module/menu-group/index.js"),menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js"),more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js");function Warning({className,actions,children,secondaryActions}){return(0,jsx_runtime.jsx)("div",{style:{display:"contents",all:"initial"},children:(0,jsx_runtime.jsx)("div",{className:(0,dist_clsx.A)(className,"block-editor-warning"),children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-warning__contents",children:[(0,jsx_runtime.jsx)("p",{className:"block-editor-warning__message",children}),(react.Children.count(actions)>0||secondaryActions)&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-warning__actions",children:[react.Children.count(actions)>0&&react.Children.map(actions,((action,i)=>(0,jsx_runtime.jsx)("span",{className:"block-editor-warning__action",children:action},i))),secondaryActions&&(0,jsx_runtime.jsx)(dropdown_menu.A,{className:"block-editor-warning__secondary",icon:more_vertical.A,label:(0,i18n_build_module.__)("More options"),popoverProps:{position:"bottom left",className:"block-editor-warning__dropdown"},noIcons:!0,children:()=>(0,jsx_runtime.jsx)(menu_group.A,{children:secondaryActions.map(((item,pos)=>(0,jsx_runtime.jsx)(menu_item.A,{onClick:item.onClick,children:item.title},pos)))})})]})]})})})}Warning.displayName="Warning";const warning=Warning;function MultipleUsageWarning({originalBlockClientId,name,onReplace}){const{selectBlock}=(0,use_dispatch.A)(store.M),blockType=(0,blocks_build_module.E7)(name);return(0,jsx_runtime.jsxs)(warning,{actions:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",onClick:()=>selectBlock(originalBlockClientId),children:(0,i18n_build_module.__)("Find original")},"find-original"),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",onClick:()=>onReplace([]),children:(0,i18n_build_module.__)("Remove")},"remove")],children:[(0,jsx_runtime.jsxs)("strong",{children:[blockType?.title,": "]}),(0,i18n_build_module.__)("This block can only be used once.")]})}Warning.__docgenInfo={description:"",methods:[],displayName:"Warning"},MultipleUsageWarning.displayName="MultipleUsageWarning",MultipleUsageWarning.__docgenInfo={description:"",methods:[],displayName:"MultipleUsageWarning"};const PrivateBlockContext=(0,react.createContext)({});function BlockEdit({mayDisplayControls,mayDisplayParentControls,blockEditingMode,isPreviewMode,...props}){const{name,isSelected,clientId,attributes={},__unstableLayoutClassNames}=props,{layout=null,metadata={}}=attributes,{bindings}=metadata,layoutSupport=(0,blocks_build_module.pN)(name,"layout",!1)||(0,blocks_build_module.pN)(name,"__experimentalLayout",!1),{originalBlockClientId}=(0,react.useContext)(PrivateBlockContext);return(0,jsx_runtime.jsxs)(block_edit_context.KY,{value:(0,react.useMemo)((()=>({name,isSelected,clientId,layout:layoutSupport?layout:null,__unstableLayoutClassNames,[block_edit_context.dk]:mayDisplayControls,[block_edit_context.dg]:mayDisplayParentControls,[block_edit_context.gF]:blockEditingMode,[block_edit_context.VN]:bindings,[block_edit_context.F9]:isPreviewMode})),[name,isSelected,clientId,layoutSupport,layout,__unstableLayoutClassNames,mayDisplayControls,mayDisplayParentControls,blockEditingMode,bindings,isPreviewMode]),children:[(0,jsx_runtime.jsx)(edit,{...props}),originalBlockClientId&&(0,jsx_runtime.jsx)(MultipleUsageWarning,{originalBlockClientId,name,onReplace:props.onReplace})]})}BlockEdit.displayName="BlockEdit",BlockEdit.__docgenInfo={description:"",methods:[],displayName:"BlockEdit"};var modal=__webpack_require__("./packages/components/build-module/modal/index.js"),character=__webpack_require__("./node_modules/diff/lib/diff/character.js");function BlockView({title,rawContent,renderedContent,action,actionText,className}){return(0,jsx_runtime.jsxs)("div",{className,children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-compare__content",children:[(0,jsx_runtime.jsx)("h2",{className:"block-editor-block-compare__heading",children:title}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__html",children:rawContent}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__preview edit-post-visual-editor",children:(0,jsx_runtime.jsx)(raw_html.A,{children:(0,safe_html.A)(renderedContent)})})]}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-compare__action",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",tabIndex:"0",onClick:action,children:actionText})})]})}function BlockCompare({block,onKeep,onConvert,convertor,convertButtonText}){const converted=function getConvertedContent(convertedBlock){return(Array.isArray(convertedBlock)?convertedBlock:[convertedBlock]).map((item=>(0,blocks_build_module.Z9)(item.name,item.attributes,item.innerBlocks))).join("")}(convertor(block)),difference=function getDifference(originalContent,newContent){return(0,character.JJ)(originalContent,newContent).map(((item,pos)=>{const classes=(0,dist_clsx.A)({"block-editor-block-compare__added":item.added,"block-editor-block-compare__removed":item.removed});return(0,jsx_runtime.jsx)("span",{className:classes,children:item.value},pos)}))}(block.originalContent,converted);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-compare__wrapper",children:[(0,jsx_runtime.jsx)(BlockView,{title:(0,i18n_build_module.__)("Current"),className:"block-editor-block-compare__current",action:onKeep,actionText:(0,i18n_build_module.__)("Convert to HTML"),rawContent:block.originalContent,renderedContent:block.originalContent}),(0,jsx_runtime.jsx)(BlockView,{title:(0,i18n_build_module.__)("After Conversion"),className:"block-editor-block-compare__converted",action:onConvert,actionText:convertButtonText,rawContent:difference,renderedContent:converted})]})}BlockView.displayName="BlockView",BlockView.__docgenInfo={description:"",methods:[],displayName:"BlockView"},BlockCompare.displayName="BlockCompare";const block_compare=BlockCompare;BlockCompare.__docgenInfo={description:"",methods:[],displayName:"BlockCompare"};const blockToBlocks=block=>(0,blocks_build_module.lh)({HTML:block.originalContent});function BlockInvalidWarning({clientId}){const{block,canInsertHTMLBlock,canInsertClassicBlock}=(0,use_select.A)((select=>{const{canInsertBlockType,getBlock,getBlockRootClientId}=select(store.M),rootClientId=getBlockRootClientId(clientId);return{block:getBlock(clientId),canInsertHTMLBlock:canInsertBlockType("core/html",rootClientId),canInsertClassicBlock:canInsertBlockType("core/freeform",rootClientId)}}),[clientId]),{replaceBlock}=(0,use_dispatch.A)(store.M),[compare,setCompare]=(0,react.useState)(!1),onCompareClose=(0,react.useCallback)((()=>setCompare(!1)),[]),convert=(0,react.useMemo)((()=>({toClassic(){const classicBlock=(0,blocks_build_module.Wv)("core/freeform",{content:block.originalContent});return replaceBlock(block.clientId,classicBlock)},toHTML(){const htmlBlock=(0,blocks_build_module.Wv)("core/html",{content:block.originalContent});return replaceBlock(block.clientId,htmlBlock)},toBlocks(){const newBlocks=blockToBlocks(block);return replaceBlock(block.clientId,newBlocks)},toRecoveredBlock(){const recoveredBlock=(0,blocks_build_module.Wv)(block.name,block.attributes,block.innerBlocks);return replaceBlock(block.clientId,recoveredBlock)}})),[block,replaceBlock]),secondaryActions=(0,react.useMemo)((()=>[{title:(0,i18n_build_module._x)("Resolve","imperative verb"),onClick:()=>setCompare(!0)},canInsertHTMLBlock&&{title:(0,i18n_build_module.__)("Convert to HTML"),onClick:convert.toHTML},canInsertClassicBlock&&{title:(0,i18n_build_module.__)("Convert to Classic Block"),onClick:convert.toClassic}].filter(Boolean)),[canInsertHTMLBlock,canInsertClassicBlock,convert]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(warning,{actions:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,onClick:convert.toRecoveredBlock,variant:"primary",children:(0,i18n_build_module.__)("Attempt recovery")},"recover")],secondaryActions,children:(0,i18n_build_module.__)("Block contains unexpected or invalid content.")}),compare&&(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Resolve Block"),onRequestClose:onCompareClose,className:"block-editor-block-compare",children:(0,jsx_runtime.jsx)(block_compare,{block,onKeep:convert.toHTML,onConvert:convert.toBlocks,convertor:blockToBlocks,convertButtonText:(0,i18n_build_module.__)("Convert to Blocks")})})]})}BlockInvalidWarning.__docgenInfo={description:"",methods:[],displayName:"BlockInvalidWarning"};const block_crash_warning_warning=(0,jsx_runtime.jsx)(warning,{className:"block-editor-block-list__block-crash-warning",children:(0,i18n_build_module.__)("This block has encountered an error and cannot be previewed.")}),block_crash_warning=()=>block_crash_warning_warning;class BlockCrashBoundary extends react.Component{constructor(){super(...arguments),this.state={hasError:!1}}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?this.props.fallback:this.props.children}}BlockCrashBoundary.displayName="BlockCrashBoundary";const block_crash_boundary=BlockCrashBoundary;BlockCrashBoundary.__docgenInfo={description:"",methods:[],displayName:"BlockCrashBoundary"};var lib=__webpack_require__("./node_modules/react-autosize-textarea/lib/index.js");function BlockHTML({clientId}){const[html,setHtml]=(0,react.useState)(""),block=(0,use_select.A)((select=>select(store.M).getBlock(clientId)),[clientId]),{updateBlock}=(0,use_dispatch.A)(store.M);return(0,react.useEffect)((()=>{setHtml((0,blocks_build_module.F8)(block))}),[block]),(0,jsx_runtime.jsx)(lib.A,{className:"block-editor-block-list__block-html-textarea",value:html,onBlur:()=>{const blockType=(0,blocks_build_module.E7)(block.name);if(!blockType)return;const attributes=(0,blocks_build_module.Ph)(blockType,html,block.attributes),content=html||(0,blocks_build_module.Z9)(blockType,attributes),[isValid]=html?(0,blocks_build_module.YV)({...block,attributes,originalContent:content}):[!0];updateBlock(clientId,{attributes,originalContent:content,isValid}),html||setHtml(content)},onChange:event=>setHtml(event.target.value)})}BlockHTML.displayName="BlockHTML";const block_html=BlockHTML;BlockHTML.__docgenInfo={description:"",methods:[],displayName:"BlockHTML"};var use_disabled=__webpack_require__("./packages/compose/build-module/hooks/use-disabled/index.js"),warning_build_module=__webpack_require__("./packages/warning/build-module/index.js"),react_spring_web_esm=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),get_scroll_container=__webpack_require__("./packages/dom/build-module/dom/get-scroll-container.js");function getAbsolutePosition(element){return{top:element.offsetTop,left:element.offsetLeft}}const use_moving_animation=function useMovingAnimation({triggerAnimationOnChange,clientId}){const ref=(0,react.useRef)(),{isTyping,getGlobalBlockCount,isBlockSelected,isFirstMultiSelectedBlock,isBlockMultiSelected,isAncestorMultiSelected}=(0,use_select.A)(store.M),{previous,prevRect}=(0,react.useMemo)((()=>({previous:ref.current&&getAbsolutePosition(ref.current),prevRect:ref.current&&ref.current.getBoundingClientRect()})),[triggerAnimationOnChange]);return(0,react.useLayoutEffect)((()=>{if(!previous||!ref.current)return;const scrollContainer=(0,get_scroll_container.A)(ref.current),isSelected=isBlockSelected(clientId),adjustScrolling=isSelected||isFirstMultiSelectedBlock(clientId);function preserveScrollPosition(){if(adjustScrolling&&prevRect){const diff=ref.current.getBoundingClientRect().top-prevRect.top;diff&&(scrollContainer.scrollTop+=diff)}}if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||isTyping()||getGlobalBlockCount()>200)return void preserveScrollPosition();const zIndex=isSelected||isBlockMultiSelected(clientId)||isAncestorMultiSelected(clientId)?"1":"",controller=new react_spring_web_esm.Controller({x:0,y:0,config:{mass:5,tension:2e3,friction:200},onChange({value}){if(!ref.current)return;let{x,y}=value;x=Math.round(x),y=Math.round(y);const finishedMoving=0===x&&0===y;ref.current.style.transformOrigin="center center",ref.current.style.transform=finishedMoving?null:`translate3d(${x}px,${y}px,0)`,ref.current.style.zIndex=zIndex,preserveScrollPosition()}});ref.current.style.transform=void 0;const destination=getAbsolutePosition(ref.current),x=Math.round(previous.left-destination.left),y=Math.round(previous.top-destination.top);return controller.start({x:0,y:0,from:{x,y}}),()=>{controller.stop(),controller.set({x:0,y:0})}}),[previous,prevRect,clientId,isTyping,getGlobalBlockCount,isBlockSelected,isFirstMultiSelectedBlock,isBlockMultiSelected,isAncestorMultiSelected]),ref};var dom_build_module=__webpack_require__("./packages/dom/build-module/index.js"),is_text_field=__webpack_require__("./packages/dom/build-module/dom/is-text-field.js"),is_form_element=__webpack_require__("./packages/dom/build-module/dom/is-form-element.js"),place_caret_at_horizontal_edge=__webpack_require__("./packages/dom/build-module/dom/place-caret-at-horizontal-edge.js");const BLOCK_SELECTOR=".block-editor-block-list__block",APPENDER_SELECTOR=".block-list-appender",BLOCK_APPENDER_CLASS=".block-editor-button-block-appender";function isInSameBlock(a,b){return a.closest(BLOCK_SELECTOR)===b.closest(BLOCK_SELECTOR)}function isInsideRootBlock(blockElement,element){return element.closest([BLOCK_SELECTOR,APPENDER_SELECTOR,BLOCK_APPENDER_CLASS].join(","))===blockElement}function getBlockClientId(node){for(;node&&node.nodeType!==node.ELEMENT_NODE;)node=node.parentNode;if(!node)return;const blockNode=node.closest(BLOCK_SELECTOR);return blockNode?blockNode.id.slice(6):void 0}function rectUnion(rect1,rect2){const left=Math.min(rect1.left,rect2.left),right=Math.max(rect1.right,rect2.right),bottom=Math.max(rect1.bottom,rect2.bottom),top=Math.min(rect1.top,rect2.top);return new window.DOMRectReadOnly(left,top,right-left,bottom-top)}function isElementVisible(element){const viewport=element.ownerDocument.defaultView;if(!viewport)return!1;if(element.classList.contains("components-visually-hidden"))return!1;const bounds=element.getBoundingClientRect();if(0===bounds.width||0===bounds.height)return!1;if(element.checkVisibility)return element.checkVisibility?.({opacityProperty:!0,contentVisibilityAuto:!0,visibilityProperty:!0});const style=viewport.getComputedStyle(element);return"none"!==style.display&&"hidden"!==style.visibility&&"0"!==style.opacity}function isScrollable(element){const style=window.getComputedStyle(element);return"auto"===style.overflowX||"scroll"===style.overflowX||"auto"===style.overflowY||"scroll"===style.overflowY}function getVisibleElementBounds(element){const viewport=element.ownerDocument.defaultView;if(!viewport)return new window.DOMRectReadOnly;let bounds=element.getBoundingClientRect();const stack=[element];let currentElement;for(;currentElement=stack.pop();)for(const child of currentElement.children)if(isElementVisible(child)){let childBounds=child.getBoundingClientRect();isScrollable(currentElement)&&(childBounds=currentElement.getBoundingClientRect()),bounds=rectUnion(bounds,childBounds),stack.push(child)}const left=Math.max(bounds.left,0),right=Math.min(bounds.right,viewport.innerWidth);return bounds=new window.DOMRectReadOnly(left,bounds.top,right-left,bounds.height),bounds}var lock_unlock=__webpack_require__("./packages/block-editor/src/lock-unlock.js");function useFocusFirstElement({clientId,initialPosition}){const ref=(0,react.useRef)(),{isBlockSelected,isMultiSelecting,isZoomOut}=(0,lock_unlock.T)((0,use_select.A)(store.M));return(0,react.useEffect)((()=>{if(!isBlockSelected(clientId)||isMultiSelecting()||isZoomOut())return;if(null==initialPosition)return;if(!ref.current)return;const{ownerDocument}=ref.current;if(isInsideRootBlock(ref.current,ownerDocument.activeElement))return;const textInputs=dom_build_module.XC.tabbable.find(ref.current).filter((node=>(0,is_text_field.A)(node))),isReverse=-1===initialPosition,target=textInputs[isReverse?textInputs.length-1:0]||ref.current;if(isInsideRootBlock(ref.current,target)){if(!ref.current.getAttribute("contenteditable")){const focusElement=dom_build_module.XC.tabbable.findNext(ref.current);if(focusElement&&isInsideRootBlock(ref.current,focusElement)&&(0,is_form_element.A)(focusElement))return void focusElement.focus()}(0,place_caret_at_horizontal_edge.A)(target,isReverse)}else ref.current.focus()}),[initialPosition,clientId]),ref}function useIsHovered({clientId}){const{hoverBlock}=(0,use_dispatch.A)(store.M);function listener(event){if(event.defaultPrevented)return;const action="mouseover"===event.type?"add":"remove";event.preventDefault(),event.currentTarget.classList[action]("is-hovered"),hoverBlock("add"===action?clientId:null)}return(0,use_ref_effect.A)((node=>(node.addEventListener("mouseout",listener),node.addEventListener("mouseover",listener),()=>{node.removeEventListener("mouseout",listener),node.removeEventListener("mouseover",listener),node.classList.remove("is-hovered"),hoverBlock(null)})),[])}function useFocusHandler(clientId){const{isBlockSelected}=(0,use_select.A)(store.M),{selectBlock,selectionChange}=(0,use_dispatch.A)(store.M);return(0,use_ref_effect.A)((node=>{function onFocus(event){node.parentElement.closest('[contenteditable="true"]')||(isBlockSelected(clientId)?event.target.isContentEditable||selectionChange(clientId):isInsideRootBlock(node,event.target)&&selectBlock(clientId))}return node.addEventListener("focusin",onFocus),()=>{node.removeEventListener("focusin",onFocus)}}),[isBlockSelected,selectBlock])}var keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js");function useEventHandlers({clientId,isSelected}){const{getBlockRootClientId,getBlockIndex,isZoomOut}=(0,lock_unlock.T)((0,use_select.A)(store.M)),{insertAfterBlock,removeBlock,resetZoomLevel}=(0,lock_unlock.T)((0,use_dispatch.A)(store.M));return(0,use_ref_effect.A)((node=>{if(isSelected)return node.addEventListener("keydown",onKeyDown),node.addEventListener("dragstart",onDragStart),()=>{node.removeEventListener("keydown",onKeyDown),node.removeEventListener("dragstart",onDragStart)};function onKeyDown(event){const{keyCode,target}=event;keyCode!==keycodes_build_module.Fm&&keyCode!==keycodes_build_module.G_&&keyCode!==keycodes_build_module.SJ||target!==node||(0,is_text_field.A)(target)||(event.preventDefault(),keyCode===keycodes_build_module.Fm&&isZoomOut()?resetZoomLevel():keyCode===keycodes_build_module.Fm?insertAfterBlock(clientId):removeBlock(clientId))}function onDragStart(event){event.preventDefault()}}),[clientId,isSelected,getBlockRootClientId,getBlockIndex,insertAfterBlock,removeBlock,isZoomOut,resetZoomLevel])}var use_block_refs=__webpack_require__("./packages/block-editor/src/components/block-list/use-block-props/use-block-refs.js");function useIntersectionObserver(){const observer=(0,react.useContext)(IntersectionObserver);return(0,use_ref_effect.A)((node=>{if(observer)return observer.observe(node),()=>{observer.unobserve(node)}}),[observer])}var use_reduced_motion=__webpack_require__("./packages/compose/build-module/hooks/use-reduced-motion/index.js");function useScrollIntoView({isSelected}){const prefersReducedMotion=(0,use_reduced_motion.A)();return(0,use_ref_effect.A)((node=>{if(isSelected){const{ownerDocument}=node,{defaultView}=ownerDocument;if(!defaultView.IntersectionObserver)return;const observer=new defaultView.IntersectionObserver((entries=>{entries[0].isIntersecting||node.scrollIntoView({behavior:prefersReducedMotion?"instant":"smooth"}),observer.disconnect()}));return observer.observe(node),()=>{observer.disconnect()}}}),[isSelected])}function useFlashEditableBlocks({clientId="",isEnabled=!0}={}){const{getEnabledClientIdsTree}=(0,lock_unlock.T)((0,use_select.A)(store.M));return(0,use_ref_effect.A)((element=>{if(!isEnabled)return;const handleClick=event=>{(event.target===element||event.target.classList.contains("is-root-container"))&&(event.defaultPrevented||(event.preventDefault(),getEnabledClientIdsTree(clientId).forEach((({clientId:id})=>{const block=element.querySelector(`[data-block="${id}"]`);block&&(block.classList.remove("has-editable-outline"),block.offsetWidth,block.classList.add("has-editable-outline"))}))))};return element.addEventListener("click",handleClick),()=>element.removeEventListener("click",handleClick)}),[isEnabled])}var create_higher_order_component=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),hooks_build_module=__webpack_require__("./packages/hooks/build-module/index.js"),get_protocol=__webpack_require__("./packages/url/build-module/get-protocol.js"),is_valid_protocol=__webpack_require__("./packages/url/build-module/is-valid-protocol.js"),is_valid_fragment=__webpack_require__("./packages/url/build-module/is-valid-fragment.js");function isURLLike(val){if(val.includes(" "))return!1;const protocol=(0,get_protocol.J)(val),protocolIsValid=(0,is_valid_protocol.v)(protocol),mayBeTLD=function hasPossibleTLD(url,maxLength=6){const cleanedURL=url.split(/[?#]/)[0];return new RegExp(`(?<=\\S)\\.(?:[a-zA-Z_]{2,${maxLength}})(?:\\/|$)`).test(cleanedURL)}(val),isWWW=val?.startsWith("www."),isInternal=val?.startsWith("#")&&(0,is_valid_fragment.R)(val);return protocolIsValid||isWWW||isInternal||mayBeTLD}const BLOCK_BINDINGS_ALLOWED_BLOCKS={"core/paragraph":["content"],"core/heading":["content"],"core/image":["id","url","title","alt"],"core/button":["url","text","linkTarget","rel"]};function canBindBlock(blockName){return blockName in BLOCK_BINDINGS_ALLOWED_BLOCKS}function canBindAttribute(blockName,attributeName){return canBindBlock(blockName)&&BLOCK_BINDINGS_ALLOWED_BLOCKS[blockName].includes(attributeName)}const withBlockBindingSupport=(0,create_higher_order_component.f)((BlockEdit=>props=>{const registry=(0,use_registry.A)(),blockContext=(0,react.useContext)(block_context),sources=(0,use_select.A)((select=>(0,lock_unlock.T)(select(blocks_build_module.M_)).getAllBlockBindingsSources())),{name,clientId,context,setAttributes}=props,blockBindings=(0,react.useMemo)((()=>function replacePatternOverrideDefaultBindings(blockName,bindings){if("core/pattern-overrides"===bindings?.__default?.source){const supportedAttributes=BLOCK_BINDINGS_ALLOWED_BLOCKS[blockName],bindingsWithDefaults={};for(const attributeName of supportedAttributes){const bindingSource=bindings[attributeName]?bindings[attributeName]:{source:"core/pattern-overrides"};bindingsWithDefaults[attributeName]=bindingSource}return bindingsWithDefaults}return bindings}(name,props.attributes.metadata?.bindings)),[props.attributes.metadata?.bindings,name]),updatedContext={},boundAttributes=(0,use_select.A)((select=>{if(!blockBindings)return;const attributes={},blockBindingsBySource=new Map;for(const[attributeName,binding]of Object.entries(blockBindings)){const{source:sourceName,args:sourceArgs}=binding,source=sources[sourceName];if(source&&canBindAttribute(name,attributeName)){for(const key of source.usesContext||[])updatedContext[key]=blockContext[key];blockBindingsBySource.set(source,{...blockBindingsBySource.get(source),[attributeName]:{args:sourceArgs}})}}if(blockBindingsBySource.size)for(const[source,bindings]of blockBindingsBySource){let values={};source.getValues?values=source.getValues({select,context:updatedContext,clientId,bindings}):Object.keys(bindings).forEach((attr=>{values[attr]=source.label}));for(const[attributeName,value]of Object.entries(values))"url"!==attributeName||value&&isURLLike(value)?attributes[attributeName]=value:attributes[attributeName]=null}return attributes}),[blockBindings,name,clientId,updatedContext,sources]),hasParentPattern=!!updatedContext["pattern/overrides"],hasPatternOverridesDefaultBinding="core/pattern-overrides"===props.attributes.metadata?.bindings?.__default?.source,_setAttributes=(0,react.useCallback)((nextAttributes=>{registry.batch((()=>{if(!blockBindings)return void setAttributes(nextAttributes);const keptAttributes={...nextAttributes},blockBindingsBySource=new Map;for(const[attributeName,newValue]of Object.entries(keptAttributes)){if(!blockBindings[attributeName]||!canBindAttribute(name,attributeName))continue;const binding=blockBindings[attributeName],source=sources[binding?.source];source?.setValues&&(blockBindingsBySource.set(source,{...blockBindingsBySource.get(source),[attributeName]:{args:binding.args,newValue}}),delete keptAttributes[attributeName])}if(blockBindingsBySource.size)for(const[source,bindings]of blockBindingsBySource)source.setValues({select:registry.select,dispatch:registry.dispatch,context:updatedContext,clientId,bindings});hasPatternOverridesDefaultBinding&&hasParentPattern||!Object.keys(keptAttributes).length||(hasPatternOverridesDefaultBinding&&(delete keptAttributes?.caption,delete keptAttributes?.href),setAttributes(keptAttributes))}))}),[registry,blockBindings,name,clientId,updatedContext,setAttributes,sources,hasPatternOverridesDefaultBinding,hasParentPattern]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(BlockEdit,{...props,attributes:{...props.attributes,...boundAttributes},setAttributes:_setAttributes,context:{...context,...updatedContext}})})}),"withBlockBindingSupport");function useBlockProps(props={},{__unstableIsHtml}={}){const{clientId,className,wrapperProps={},isAligned,index,mode,name,blockApiVersion,blockTitle,isSelected,isSubtreeDisabled,hasOverlay,initialPosition,blockEditingMode,isHighlighted,isMultiSelected,isPartiallySelected,isReusable,isDragging,hasChildSelected,isEditingDisabled,hasEditableOutline,isTemporarilyEditingAsBlocks,defaultClassName,isSectionBlock}=(0,react.useContext)(PrivateBlockContext),blockLabel=(0,i18n_build_module.nv)((0,i18n_build_module.__)("Block: %s"),blockTitle),htmlSuffix="html"!==mode||__unstableIsHtml?"":"-visual",mergedRefs=(0,use_merge_refs.A)([props.ref,useFocusFirstElement({clientId,initialPosition}),(0,use_block_refs.xL)(clientId),useFocusHandler(clientId),useEventHandlers({clientId,isSelected}),useIsHovered({clientId}),useIntersectionObserver(),use_moving_animation({triggerAnimationOnChange:index,clientId}),(0,use_disabled.A)({isDisabled:!hasOverlay}),useFlashEditableBlocks({clientId,isEnabled:isSectionBlock}),useScrollIntoView({isSelected})]),blockEditContext=(0,block_edit_context.m_)(),bindingsStyle=!!blockEditContext[block_edit_context.VN]&&canBindBlock(name)?{"--wp-admin-theme-color":"var(--wp-block-synced-color)","--wp-admin-theme-color--rgb":"var(--wp-block-synced-color--rgb)"}:{};blockApiVersion<2&&clientId===blockEditContext.clientId&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)(`Block type "${name}" must support API version 2 or higher to work correctly with "useBlockProps" method.`);let hasNegativeMargin=!1;return"-"!==wrapperProps?.style?.marginTop?.charAt(0)&&"-"!==wrapperProps?.style?.marginBottom?.charAt(0)&&"-"!==wrapperProps?.style?.marginLeft?.charAt(0)&&"-"!==wrapperProps?.style?.marginRight?.charAt(0)||(hasNegativeMargin=!0),{tabIndex:"disabled"===blockEditingMode?-1:0,...wrapperProps,...props,ref:mergedRefs,id:`block-${clientId}${htmlSuffix}`,role:"document","aria-label":blockLabel,"data-block":clientId,"data-type":name,"data-title":blockTitle,inert:isSubtreeDisabled?"true":void 0,className:(0,dist_clsx.A)("block-editor-block-list__block",{"wp-block":!isAligned,"has-block-overlay":hasOverlay,"is-selected":isSelected,"is-highlighted":isHighlighted,"is-multi-selected":isMultiSelected,"is-partially-selected":isPartiallySelected,"is-reusable":isReusable,"is-dragging":isDragging,"has-child-selected":hasChildSelected,"is-editing-disabled":isEditingDisabled,"has-editable-outline":hasEditableOutline,"has-negative-margin":hasNegativeMargin,"is-content-locked-temporarily-editing-as-blocks":isTemporarilyEditingAsBlocks},className,props.className,wrapperProps.className,defaultClassName),style:{...wrapperProps.style,...props.style,...bindingsStyle}}}(0,hooks_build_module.U2)("blocks.registerBlockType","core/editor/custom-sources-backwards-compatibility/shim-attribute-source",(function shimAttributeSource(settings,name){return canBindBlock(name)?{...settings,edit:withBlockBindingSupport(settings.edit)}:settings})),useBlockProps.save=blocks_build_module.cV;var justify_left=__webpack_require__("./packages/icons/build-module/library/justify-left.js"),justify_center=__webpack_require__("./packages/icons/build-module/library/justify-center.js"),justify_right=__webpack_require__("./packages/icons/build-module/library/justify-right.js"),justify_space_between=__webpack_require__("./packages/icons/build-module/library/justify-space-between.js"),justify_stretch=__webpack_require__("./packages/icons/build-module/library/justify-stretch.js"),arrow_right=__webpack_require__("./packages/icons/build-module/library/arrow-right.js"),arrow_down=__webpack_require__("./packages/icons/build-module/library/arrow-down.js"),component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),flex_item_component=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),toggle_group_control_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control/component.js"),toggle_group_control_option_icon_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option-icon/component.js"),toggle_control=__webpack_require__("./packages/components/build-module/toggle-control/index.js");const LAYOUT_DEFINITIONS={default:{name:"default",slug:"flow",className:"is-layout-flow",baseStyles:[{selector:" > .alignleft",rules:{float:"left","margin-inline-start":"0","margin-inline-end":"2em"}},{selector:" > .alignright",rules:{float:"right","margin-inline-start":"2em","margin-inline-end":"0"}},{selector:" > .aligncenter",rules:{"margin-left":"auto !important","margin-right":"auto !important"}}],spacingStyles:[{selector:" > :first-child",rules:{"margin-block-start":"0"}},{selector:" > :last-child",rules:{"margin-block-end":"0"}},{selector:" > *",rules:{"margin-block-start":null,"margin-block-end":"0"}}]},constrained:{name:"constrained",slug:"constrained",className:"is-layout-constrained",baseStyles:[{selector:" > .alignleft",rules:{float:"left","margin-inline-start":"0","margin-inline-end":"2em"}},{selector:" > .alignright",rules:{float:"right","margin-inline-start":"2em","margin-inline-end":"0"}},{selector:" > .aligncenter",rules:{"margin-left":"auto !important","margin-right":"auto !important"}},{selector:" > :where(:not(.alignleft):not(.alignright):not(.alignfull))",rules:{"max-width":"var(--wp--style--global--content-size)","margin-left":"auto !important","margin-right":"auto !important"}},{selector:" > .alignwide",rules:{"max-width":"var(--wp--style--global--wide-size)"}}],spacingStyles:[{selector:" > :first-child",rules:{"margin-block-start":"0"}},{selector:" > :last-child",rules:{"margin-block-end":"0"}},{selector:" > *",rules:{"margin-block-start":null,"margin-block-end":"0"}}]},flex:{name:"flex",slug:"flex",className:"is-layout-flex",displayMode:"flex",baseStyles:[{selector:"",rules:{"flex-wrap":"wrap","align-items":"center"}},{selector:" > :is(*, div)",rules:{margin:"0"}}],spacingStyles:[{selector:"",rules:{gap:null}}]},grid:{name:"grid",slug:"grid",className:"is-layout-grid",displayMode:"grid",baseStyles:[{selector:" > :is(*, div)",rules:{margin:"0"}}],spacingStyles:[{selector:"",rules:{gap:null}}]}};function appendSelectors(selectors,append=""){return selectors.split(",").map((subselector=>`${subselector}${append?` ${append}`:""}`)).join(",")}function getBlockGapCSS(selector,layoutDefinitions=LAYOUT_DEFINITIONS,layoutType,blockGapValue){let output="";return layoutDefinitions?.[layoutType]?.spacingStyles?.length&&blockGapValue&&layoutDefinitions[layoutType].spacingStyles.forEach((gapStyle=>{output+=`${appendSelectors(selector,gapStyle.selector.trim())} { `,output+=Object.entries(gapStyle.rules).map((([cssProperty,value])=>`${cssProperty}: ${value||blockGapValue}`)).join("; "),output+="; }"})),output}function getAlignmentsInfo(layout){const{contentSize,wideSize,type="default"}=layout,alignmentInfo={},sizeRegex=/^(?!0)\d+(px|em|rem|vw|vh|%|svw|lvw|dvw|svh|lvh|dvh|vi|svi|lvi|dvi|vb|svb|lvb|dvb|vmin|svmin|lvmin|dvmin|vmax|svmax|lvmax|dvmax)?$/i;return sizeRegex.test(contentSize)&&"constrained"===type&&(alignmentInfo.none=(0,i18n_build_module.nv)((0,i18n_build_module.__)("Max %s wide"),contentSize)),sizeRegex.test(wideSize)&&(alignmentInfo.wide=(0,i18n_build_module.nv)((0,i18n_build_module.__)("Max %s wide"),wideSize)),alignmentInfo}var sides_all=__webpack_require__("./packages/icons/build-module/library/sides-all.js"),sides_horizontal=__webpack_require__("./packages/icons/build-module/library/sides-horizontal.js"),sides_vertical=__webpack_require__("./packages/icons/build-module/library/sides-vertical.js"),sides_top=__webpack_require__("./packages/icons/build-module/library/sides-top.js"),sides_right=__webpack_require__("./packages/icons/build-module/library/sides-right.js"),sides_bottom=__webpack_require__("./packages/icons/build-module/library/sides-bottom.js"),sides_left=__webpack_require__("./packages/icons/build-module/library/sides-left.js");sides_all.A,sides_all.A,sides_horizontal.A,sides_vertical.A,sides_top.A,sides_right.A,sides_bottom.A,sides_left.A,(0,i18n_build_module.__)("Spacing control"),(0,i18n_build_module.__)("Top"),(0,i18n_build_module.__)("Bottom"),(0,i18n_build_module.__)("Left"),(0,i18n_build_module.__)("Right"),(0,i18n_build_module.__)("Mixed"),(0,i18n_build_module.__)("Vertical"),(0,i18n_build_module.__)("Horizontal"),(0,i18n_build_module.__)("Horizontal & vertical"),(0,i18n_build_module.__)("Custom");function getSpacingPresetCssVar(value){if(!value)return;const slug=value.match(/var:preset\|spacing\|(.+)/);return slug?`var(--wp--preset--spacing--${slug[1]})`:value}function getGapCSSValue(blockGapValue,defaultValue="0"){const blockGapBoxControlValue=function getGapBoxControlValueFromStyle(blockGapValue){if(!blockGapValue)return null;const isValueString="string"==typeof blockGapValue;return{top:isValueString?blockGapValue:blockGapValue?.top,left:isValueString?blockGapValue:blockGapValue?.left}}(blockGapValue);if(!blockGapBoxControlValue)return null;const row=getSpacingPresetCssVar(blockGapBoxControlValue?.top)||defaultValue,column=getSpacingPresetCssVar(blockGapBoxControlValue?.left)||defaultValue;return row===column?row:`${row} ${column}`}var toolbar_group=__webpack_require__("./packages/components/build-module/toolbar/toolbar-group/index.js"),style_provider=__webpack_require__("./packages/components/build-module/style-provider/index.js"),slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js");const block_controls_groups={default:(0,slot_fill.QJ)("BlockControls"),block:(0,slot_fill.QJ)("BlockControlsBlock"),inline:(0,slot_fill.QJ)("BlockFormatControls"),other:(0,slot_fill.QJ)("BlockControlsOther"),parent:(0,slot_fill.QJ)("BlockControlsParent")};function BlockControlsFill({group="default",controls,children,__experimentalShareWithChildBlocks=!1}){const Fill=function useBlockControlsFill(group,shareWithChildBlocks){const context=(0,block_edit_context.m_)();return context[block_edit_context.dk]?block_controls_groups[group]?.Fill:context[block_edit_context.dg]&&shareWithChildBlocks?block_controls_groups.parent.Fill:null}(group,__experimentalShareWithChildBlocks);if(!Fill)return null;const innerMarkup=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["default"===group&&(0,jsx_runtime.jsx)(toolbar_group.A,{controls}),children]});return(0,jsx_runtime.jsx)(style_provider.A,{document,children:(0,jsx_runtime.jsx)(Fill,{children:fillProps=>{const{forwardedContext=[]}=fillProps;return forwardedContext.reduce(((inner,[Provider,props])=>(0,jsx_runtime.jsx)(Provider,{...props,children:inner})),innerMarkup)}})})}BlockControlsFill.displayName="BlockControlsFill",BlockControlsFill.__docgenInfo={description:"",methods:[],displayName:"BlockControlsFill",props:{group:{defaultValue:{value:"'default'",computed:!1},required:!1},__experimentalShareWithChildBlocks:{defaultValue:{value:"false",computed:!1},required:!1}}};var private_apis=__webpack_require__("./packages/components/build-module/private-apis.js"),toolbar_context=__webpack_require__("./packages/components/build-module/toolbar/toolbar-context/index.js"),use_slot_fills=__webpack_require__("./packages/components/build-module/slot-fill/bubbles-virtually/use-slot-fills.js");const{ComponentsContext}=(0,lock_unlock.T)(private_apis.j);function BlockControlsSlot({group="default",...props}){const toolbarState=(0,react.useContext)(toolbar_context.A),contextState=(0,react.useContext)(ComponentsContext),fillProps=(0,react.useMemo)((()=>({forwardedContext:[[toolbar_context.A.Provider,{value:toolbarState}],[ComponentsContext.Provider,{value:contextState}]]})),[toolbarState,contextState]),Slot=block_controls_groups[group]?.Slot,fills=(0,use_slot_fills.A)(Slot?.__unstableName);if(!Slot)return!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)(`Unknown BlockControls group "${group}" provided.`),null;if(!fills?.length)return null;const slot=(0,jsx_runtime.jsx)(Slot,{...props,bubblesVirtually:!0,fillProps});return"default"===group?slot:(0,jsx_runtime.jsx)(toolbar_group.A,{children:slot})}BlockControlsSlot.displayName="BlockControlsSlot",BlockControlsSlot.__docgenInfo={description:"",methods:[],displayName:"BlockControlsSlot",props:{group:{defaultValue:{value:"'default'",computed:!1},required:!1}}};const BlockControls=BlockControlsFill;BlockControls.Slot=BlockControlsSlot;const BlockFormatControls=props=>(0,jsx_runtime.jsx)(BlockControlsFill,{group:"inline",...props});BlockFormatControls.displayName="BlockFormatControls",BlockFormatControls.Slot=props=>(0,jsx_runtime.jsx)(BlockControlsSlot,{group:"inline",...props});const block_controls=BlockControls;BlockFormatControls.__docgenInfo={description:"",methods:[{name:"Slot",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"BlockFormatControls"},BlockControlsFill.__docgenInfo={description:"",methods:[],displayName:"BlockControlsFill",props:{group:{defaultValue:{value:"'default'",computed:!1},required:!1},__experimentalShareWithChildBlocks:{defaultValue:{value:"false",computed:!1},required:!1}}};var toolbar_dropdown_menu=__webpack_require__("./packages/components/build-module/toolbar/toolbar-dropdown-menu/index.js"),justify_top=__webpack_require__("./packages/icons/build-module/library/justify-top.js"),justify_center_vertical=__webpack_require__("./packages/icons/build-module/library/justify-center-vertical.js"),justify_bottom=__webpack_require__("./packages/icons/build-module/library/justify-bottom.js"),justify_stretch_vertical=__webpack_require__("./packages/icons/build-module/library/justify-stretch-vertical.js"),justify_space_between_vertical=__webpack_require__("./packages/icons/build-module/library/justify-space-between-vertical.js");const BLOCK_ALIGNMENTS_CONTROLS={top:{icon:justify_top.A,title:(0,i18n_build_module._x)("Align top","Block vertical alignment setting")},center:{icon:justify_center_vertical.A,title:(0,i18n_build_module._x)("Align middle","Block vertical alignment setting")},bottom:{icon:justify_bottom.A,title:(0,i18n_build_module._x)("Align bottom","Block vertical alignment setting")},stretch:{icon:justify_stretch_vertical.A,title:(0,i18n_build_module._x)("Stretch to fill","Block vertical alignment setting")},"space-between":{icon:justify_space_between_vertical.A,title:(0,i18n_build_module._x)("Space between","Block vertical alignment setting")}},DEFAULT_CONTROLS=["top","center","bottom"];function BlockVerticalAlignmentUI({value,onChange,controls=DEFAULT_CONTROLS,isCollapsed=!0,isToolbar}){const activeAlignment=BLOCK_ALIGNMENTS_CONTROLS[value],defaultAlignmentControl=BLOCK_ALIGNMENTS_CONTROLS.top,UIComponent=isToolbar?toolbar_group.A:toolbar_dropdown_menu.A,extraProps=isToolbar?{isCollapsed}:{};return(0,jsx_runtime.jsx)(UIComponent,{icon:activeAlignment?activeAlignment.icon:defaultAlignmentControl.icon,label:(0,i18n_build_module._x)("Change vertical alignment","Block vertical alignment setting label"),controls:controls.map((control=>{return{...BLOCK_ALIGNMENTS_CONTROLS[control],isActive:value===control,role:isCollapsed?"menuitemradio":void 0,onClick:(align=control,()=>onChange(value===align?void 0:align))};var align})),...extraProps})}BlockVerticalAlignmentUI.displayName="BlockVerticalAlignmentUI";const ui=BlockVerticalAlignmentUI;BlockVerticalAlignmentUI.__docgenInfo={description:"",methods:[],displayName:"BlockVerticalAlignmentUI",props:{controls:{defaultValue:{value:"[ 'top', 'center', 'bottom' ]",computed:!1},required:!1},isCollapsed:{defaultValue:{value:"true",computed:!1},required:!1}}};const BlockVerticalAlignmentControl=props=>(0,jsx_runtime.jsx)(ui,{...props,isToolbar:!1});BlockVerticalAlignmentControl.displayName="BlockVerticalAlignmentControl";const BlockVerticalAlignmentToolbar=props=>(0,jsx_runtime.jsx)(ui,{...props,isToolbar:!0});BlockVerticalAlignmentToolbar.displayName="BlockVerticalAlignmentToolbar",BlockVerticalAlignmentControl.__docgenInfo={description:"",methods:[],displayName:"BlockVerticalAlignmentControl"},BlockVerticalAlignmentToolbar.__docgenInfo={description:"",methods:[],displayName:"BlockVerticalAlignmentToolbar"};const icons={left:justify_left.A,center:justify_center.A,right:justify_right.A,"space-between":justify_space_between.A,stretch:justify_stretch.A};function JustifyContentUI({allowedControls=["left","center","right","space-between"],isCollapsed=!0,onChange,value,popoverProps,isToolbar}){const handleClick=next=>{onChange(next===value?void 0:next)},icon=value?icons[value]:icons.left,allControls=[{name:"left",icon:justify_left.A,title:(0,i18n_build_module.__)("Justify items left"),isActive:"left"===value,onClick:()=>handleClick("left")},{name:"center",icon:justify_center.A,title:(0,i18n_build_module.__)("Justify items center"),isActive:"center"===value,onClick:()=>handleClick("center")},{name:"right",icon:justify_right.A,title:(0,i18n_build_module.__)("Justify items right"),isActive:"right"===value,onClick:()=>handleClick("right")},{name:"space-between",icon:justify_space_between.A,title:(0,i18n_build_module.__)("Space between items"),isActive:"space-between"===value,onClick:()=>handleClick("space-between")},{name:"stretch",icon:justify_stretch.A,title:(0,i18n_build_module.__)("Stretch items"),isActive:"stretch"===value,onClick:()=>handleClick("stretch")}],UIComponent=isToolbar?toolbar_group.A:toolbar_dropdown_menu.A,extraProps=isToolbar?{isCollapsed}:{};return(0,jsx_runtime.jsx)(UIComponent,{icon,popoverProps,label:(0,i18n_build_module.__)("Change items justification"),controls:allControls.filter((elem=>allowedControls.includes(elem.name))),...extraProps})}JustifyContentUI.displayName="JustifyContentUI";const justify_content_control_ui=JustifyContentUI;JustifyContentUI.__docgenInfo={description:"",methods:[],displayName:"JustifyContentUI",props:{allowedControls:{defaultValue:{value:"[ 'left', 'center', 'right', 'space-between' ]",computed:!1},required:!1},isCollapsed:{defaultValue:{value:"true",computed:!1},required:!1}}};const JustifyContentControl=props=>(0,jsx_runtime.jsx)(justify_content_control_ui,{...props,isToolbar:!1});JustifyContentControl.displayName="JustifyContentControl";const JustifyToolbar=props=>(0,jsx_runtime.jsx)(justify_content_control_ui,{...props,isToolbar:!0});JustifyToolbar.displayName="JustifyToolbar",JustifyContentControl.__docgenInfo={description:"",methods:[],displayName:"JustifyContentControl"},JustifyToolbar.__docgenInfo={description:"",methods:[],displayName:"JustifyToolbar"};function shouldSkipSerialization(blockNameOrType,featureSet,feature){const support=(0,blocks_build_module.bI)(blockNameOrType,featureSet),skipSerialization=support?.__experimentalSkipSerialization;return Array.isArray(skipSerialization)?skipSerialization.includes(feature):skipSerialization}new WeakMap;(0,react.memo)((function BlockProps({index,useBlockProps,setAllWrapperProps,...props}){const wrapperProps=useBlockProps(props),setWrapperProps=next=>setAllWrapperProps((prev=>{const nextAll=[...prev];return nextAll[index]=next,nextAll}));return(0,react.useEffect)((()=>(setWrapperProps(wrapperProps),()=>{setWrapperProps(void 0)}))),null}));const justifyContentMap={left:"flex-start",right:"flex-end",center:"center","space-between":"space-between"},alignItemsMap={left:"flex-start",right:"flex-end",center:"center",stretch:"stretch"},verticalAlignmentMap={top:"flex-start",center:"center",bottom:"flex-end",stretch:"stretch","space-between":"space-between"},flexWrapOptions=["wrap","nowrap"],flex={name:"flex",label:(0,i18n_build_module.__)("Flex"),inspectorControls:function FlexLayoutInspectorControls({layout={},onChange,layoutBlockSupport={}}){const{allowOrientation=!0}=layoutBlockSupport;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(component.A,{children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(FlexLayoutJustifyContentControl,{layout,onChange})}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:allowOrientation&&(0,jsx_runtime.jsx)(OrientationControl,{layout,onChange})})]}),(0,jsx_runtime.jsx)(FlexWrapControl,{layout,onChange})]})},toolBarControls:function FlexLayoutToolbarControls({layout={},onChange,layoutBlockSupport}){if(layoutBlockSupport?.allowSwitching)return null;const{allowVerticalAlignment=!0}=layoutBlockSupport;return(0,jsx_runtime.jsxs)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0,children:[(0,jsx_runtime.jsx)(FlexLayoutJustifyContentControl,{layout,onChange,isToolbar:!0}),allowVerticalAlignment&&(0,jsx_runtime.jsx)(FlexLayoutVerticalAlignmentControl,{layout,onChange})]})},getLayoutStyle:function getLayoutStyle({selector,layout,style,blockName,hasBlockGapSupport,layoutDefinitions=LAYOUT_DEFINITIONS}){const{orientation="horizontal"}=layout,blockGapValue=style?.spacing?.blockGap&&!shouldSkipSerialization(blockName,"spacing","blockGap")?getGapCSSValue(style?.spacing?.blockGap,"0.5em"):void 0,justifyContent=justifyContentMap[layout.justifyContent],flexWrap=flexWrapOptions.includes(layout.flexWrap)?layout.flexWrap:"wrap",verticalAlignment=verticalAlignmentMap[layout.verticalAlignment],alignItems=alignItemsMap[layout.justifyContent]||alignItemsMap.left;let output="";const rules=[];return flexWrap&&"wrap"!==flexWrap&&rules.push(`flex-wrap: ${flexWrap}`),"horizontal"===orientation?(verticalAlignment&&rules.push(`align-items: ${verticalAlignment}`),justifyContent&&rules.push(`justify-content: ${justifyContent}`)):(verticalAlignment&&rules.push(`justify-content: ${verticalAlignment}`),rules.push("flex-direction: column"),rules.push(`align-items: ${alignItems}`)),rules.length&&(output=`${appendSelectors(selector)} {\n\t\t\t\t${rules.join("; ")};\n\t\t\t}`),hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"flex",blockGapValue)),output},getOrientation(layout){const{orientation="horizontal"}=layout;return orientation},getAlignments:()=>[]};function FlexLayoutVerticalAlignmentControl({layout,onChange}){const{orientation="horizontal"}=layout,defaultVerticalAlignment="horizontal"===orientation?verticalAlignmentMap.center:verticalAlignmentMap.top,{verticalAlignment=defaultVerticalAlignment}=layout;return(0,jsx_runtime.jsx)(BlockVerticalAlignmentControl,{onChange:value=>{onChange({...layout,verticalAlignment:value})},value:verticalAlignment,controls:"horizontal"===orientation?["top","center","bottom","stretch"]:["top","center","bottom","space-between"]})}FlexLayoutVerticalAlignmentControl.displayName="FlexLayoutVerticalAlignmentControl";const POPOVER_PROPS={placement:"bottom-start"};function FlexLayoutJustifyContentControl({layout,onChange,isToolbar=!1}){const{justifyContent="left",orientation="horizontal"}=layout,onJustificationChange=value=>{onChange({...layout,justifyContent:value})},allowedControls=["left","center","right"];if("horizontal"===orientation?allowedControls.push("space-between"):allowedControls.push("stretch"),isToolbar)return(0,jsx_runtime.jsx)(JustifyContentControl,{allowedControls,value:justifyContent,onChange:onJustificationChange,popoverProps:POPOVER_PROPS});const justificationOptions=[{value:"left",icon:justify_left.A,label:(0,i18n_build_module.__)("Justify items left")},{value:"center",icon:justify_center.A,label:(0,i18n_build_module.__)("Justify items center")},{value:"right",icon:justify_right.A,label:(0,i18n_build_module.__)("Justify items right")}];return"horizontal"===orientation?justificationOptions.push({value:"space-between",icon:justify_space_between.A,label:(0,i18n_build_module.__)("Space between items")}):justificationOptions.push({value:"stretch",icon:justify_stretch.A,label:(0,i18n_build_module.__)("Stretch items")}),(0,jsx_runtime.jsx)(toggle_group_control_component.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Justification"),value:justifyContent,onChange:onJustificationChange,className:"block-editor-hooks__flex-layout-justification-controls",children:justificationOptions.map((({value,icon,label})=>(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{value,icon,label},value)))})}function FlexWrapControl({layout,onChange}){const{flexWrap="wrap"}=layout;return(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Allow to wrap to multiple lines"),onChange:value=>{onChange({...layout,flexWrap:value?"wrap":"nowrap"})},checked:"wrap"===flexWrap})}function OrientationControl({layout,onChange}){const{orientation="horizontal",verticalAlignment,justifyContent}=layout;return(0,jsx_runtime.jsxs)(toggle_group_control_component.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,className:"block-editor-hooks__flex-layout-orientation-controls",label:(0,i18n_build_module.__)("Orientation"),value:orientation,onChange:value=>{let newVerticalAlignment=verticalAlignment,newJustification=justifyContent;return"horizontal"===value?("space-between"===verticalAlignment&&(newVerticalAlignment="center"),"stretch"===justifyContent&&(newJustification="left")):("stretch"===verticalAlignment&&(newVerticalAlignment="top"),"space-between"===justifyContent&&(newJustification="left")),onChange({...layout,orientation:value,verticalAlignment:newVerticalAlignment,justifyContent:newJustification})},children:[(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{icon:arrow_right.A,value:"horizontal",label:(0,i18n_build_module.__)("Horizontal")}),(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{icon:arrow_down.A,value:"vertical",label:(0,i18n_build_module.__)("Vertical")})]})}FlexLayoutJustifyContentControl.displayName="FlexLayoutJustifyContentControl",FlexWrapControl.displayName="FlexWrapControl",OrientationControl.displayName="OrientationControl";const flow={name:"default",label:(0,i18n_build_module.__)("Flow"),inspectorControls:function DefaultLayoutInspectorControls(){return null},toolBarControls:function DefaultLayoutToolbarControls(){return null},getLayoutStyle:function getLayoutStyle({selector,style,blockName,hasBlockGapSupport,layoutDefinitions=LAYOUT_DEFINITIONS}){const blockGapStyleValue=getGapCSSValue(style?.spacing?.blockGap);let blockGapValue="";shouldSkipSerialization(blockName,"spacing","blockGap")||(blockGapStyleValue?.top?blockGapValue=getGapCSSValue(blockGapStyleValue?.top):"string"==typeof blockGapStyleValue&&(blockGapValue=getGapCSSValue(blockGapStyleValue)));let output="";return hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"default",blockGapValue)),output},getOrientation:()=>"vertical",getAlignments(layout,isBlockBasedTheme){const alignmentInfo=getAlignmentsInfo(layout);if(void 0!==layout.alignments)return layout.alignments.includes("none")||layout.alignments.unshift("none"),layout.alignments.map((alignment=>({name:alignment,info:alignmentInfo[alignment]})));const alignments=[{name:"left"},{name:"center"},{name:"right"}];if(!isBlockBasedTheme){const{contentSize,wideSize}=layout;contentSize&&alignments.unshift({name:"full"}),wideSize&&alignments.unshift({name:"wide",info:alignmentInfo.wide})}return alignments.unshift({name:"none",info:alignmentInfo.none}),alignments}};var utils=__webpack_require__("./packages/components/build-module/unit-control/utils.js"),v_stack_component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),unit_control=__webpack_require__("./packages/components/build-module/unit-control/index.js"),input_prefix_wrapper=__webpack_require__("./packages/components/build-module/input-control/input-prefix-wrapper.js"),icon=__webpack_require__("./packages/icons/build-module/icon/index.js"),align_none=__webpack_require__("./packages/icons/build-module/library/align-none.js"),stretch_wide=__webpack_require__("./packages/icons/build-module/library/stretch-wide.js"),style_engine_build_module=__webpack_require__("./packages/style-engine/build-module/index.js"),use_settings=__webpack_require__("./packages/block-editor/src/components/use-settings/index.js");const constrained={name:"constrained",label:(0,i18n_build_module.__)("Constrained"),inspectorControls:function DefaultLayoutInspectorControls({layout,onChange,layoutBlockSupport={}}){const{wideSize,contentSize,justifyContent="center"}=layout,{allowJustification=!0,allowCustomContentAndWideSize=!0}=layoutBlockSupport,justificationOptions=[{value:"left",icon:justify_left.A,label:(0,i18n_build_module.__)("Justify items left")},{value:"center",icon:justify_center.A,label:(0,i18n_build_module.__)("Justify items center")},{value:"right",icon:justify_right.A,label:(0,i18n_build_module.__)("Justify items right")}],[availableUnits]=(0,use_settings.t)("spacing.units"),units=(0,utils.E)({availableUnits:availableUnits||["%","px","em","rem","vw"]});return(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:4,className:"block-editor-hooks__layout-constrained",children:[allowCustomContentAndWideSize&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(unit_control.Ay,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Content width"),labelPosition:"top",value:contentSize||wideSize||"",onChange:nextWidth=>{nextWidth=0>parseFloat(nextWidth)?"0":nextWidth,onChange({...layout,contentSize:nextWidth})},units,prefix:(0,jsx_runtime.jsx)(input_prefix_wrapper.A,{variant:"icon",children:(0,jsx_runtime.jsx)(icon.A,{icon:align_none.A})})}),(0,jsx_runtime.jsx)(unit_control.Ay,{__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Wide width"),labelPosition:"top",value:wideSize||contentSize||"",onChange:nextWidth=>{nextWidth=0>parseFloat(nextWidth)?"0":nextWidth,onChange({...layout,wideSize:nextWidth})},units,prefix:(0,jsx_runtime.jsx)(input_prefix_wrapper.A,{variant:"icon",children:(0,jsx_runtime.jsx)(icon.A,{icon:stretch_wide.A})})}),(0,jsx_runtime.jsx)("p",{className:"block-editor-hooks__layout-constrained-helptext",children:(0,i18n_build_module.__)("Customize the width for all elements that are assigned to the center or wide columns.")})]}),allowJustification&&(0,jsx_runtime.jsx)(toggle_group_control_component.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Justification"),value:justifyContent,onChange:value=>{onChange({...layout,justifyContent:value})},children:justificationOptions.map((({value,icon,label})=>(0,jsx_runtime.jsx)(toggle_group_control_option_icon_component.A,{value,icon,label},value)))})]})},toolBarControls:function DefaultLayoutToolbarControls({layout={},onChange,layoutBlockSupport}){const{allowJustification=!0}=layoutBlockSupport;return allowJustification?(0,jsx_runtime.jsx)(block_controls,{group:"block",__experimentalShareWithChildBlocks:!0,children:(0,jsx_runtime.jsx)(DefaultLayoutJustifyContentControl,{layout,onChange})}):null},getLayoutStyle:function getLayoutStyle({selector,layout={},style,blockName,hasBlockGapSupport,layoutDefinitions=LAYOUT_DEFINITIONS}){const{contentSize,wideSize,justifyContent}=layout,blockGapStyleValue=getGapCSSValue(style?.spacing?.blockGap);let blockGapValue="";shouldSkipSerialization(blockName,"spacing","blockGap")||(blockGapStyleValue?.top?blockGapValue=getGapCSSValue(blockGapStyleValue?.top):"string"==typeof blockGapStyleValue&&(blockGapValue=getGapCSSValue(blockGapStyleValue)));const marginLeft="left"===justifyContent?"0 !important":"auto !important",marginRight="right"===justifyContent?"0 !important":"auto !important";let output=contentSize||wideSize?`\n\t\t\t\t\t${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")} {\n\t\t\t\t\t\tmax-width: ${null!=contentSize?contentSize:wideSize};\n\t\t\t\t\t\tmargin-left: ${marginLeft};\n\t\t\t\t\t\tmargin-right: ${marginRight};\n\t\t\t\t\t}\n\t\t\t\t\t${appendSelectors(selector,"> .alignwide")}  {\n\t\t\t\t\t\tmax-width: ${null!=wideSize?wideSize:contentSize};\n\t\t\t\t\t}\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmax-width: none;\n\t\t\t\t\t}\n\t\t\t\t`:"";if("left"===justifyContent?output+=`${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")}\n\t\t\t{ margin-left: ${marginLeft}; }`:"right"===justifyContent&&(output+=`${appendSelectors(selector,"> :where(:not(.alignleft):not(.alignright):not(.alignfull))")}\n\t\t\t{ margin-right: ${marginRight}; }`),style?.spacing?.padding){(0,style_engine_build_module.np)(style).forEach((rule=>{if("paddingRight"===rule.key){const paddingRightValue="0"===rule.value?"0px":rule.value;output+=`\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmargin-right: calc(${paddingRightValue} * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`}else if("paddingLeft"===rule.key){const paddingLeftValue="0"===rule.value?"0px":rule.value;output+=`\n\t\t\t\t\t${appendSelectors(selector,"> .alignfull")} {\n\t\t\t\t\t\tmargin-left: calc(${paddingLeftValue} * -1);\n\t\t\t\t\t}\n\t\t\t\t\t`}}))}return hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"constrained",blockGapValue)),output},getOrientation:()=>"vertical",getAlignments(layout){const alignmentInfo=getAlignmentsInfo(layout);if(void 0!==layout.alignments)return layout.alignments.includes("none")||layout.alignments.unshift("none"),layout.alignments.map((alignment=>({name:alignment,info:alignmentInfo[alignment]})));const{contentSize,wideSize}=layout,alignments=[{name:"left"},{name:"center"},{name:"right"}];return contentSize&&alignments.unshift({name:"full"}),wideSize&&alignments.unshift({name:"wide",info:alignmentInfo.wide}),alignments.unshift({name:"none",info:alignmentInfo.none}),alignments}},constrained_POPOVER_PROPS={placement:"bottom-start"};function DefaultLayoutJustifyContentControl({layout,onChange}){const{justifyContent="center"}=layout;return(0,jsx_runtime.jsx)(JustifyContentControl,{allowedControls:["left","center","right"],value:justifyContent,onChange:value=>{onChange({...layout,justifyContent:value})},popoverProps:constrained_POPOVER_PROPS})}DefaultLayoutJustifyContentControl.displayName="DefaultLayoutJustifyContentControl";var base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),range_control=__webpack_require__("./packages/components/build-module/range-control/index.js"),number_control=__webpack_require__("./packages/components/build-module/number-control/index.js"),toggle_group_control_option_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option/component.js");const RANGE_CONTROL_MAX_VALUES={px:600,"%":100,vw:100,vh:100,em:38,rem:38,svw:100,lvw:100,dvw:100,svh:100,lvh:100,dvh:100,vi:100,svi:100,lvi:100,dvi:100,vb:100,svb:100,lvb:100,dvb:100,vmin:100,svmin:100,lvmin:100,dvmin:100,vmax:100,svmax:100,lvmax:100,dvmax:100},units=[{value:"px",label:"px",default:0},{value:"rem",label:"rem",default:0},{value:"em",label:"em",default:0}],grid={name:"grid",label:(0,i18n_build_module.__)("Grid"),inspectorControls:function GridLayoutInspectorControls({layout={},onChange,layoutBlockSupport={}}){const{allowSizingOnChildren=!1}=layoutBlockSupport,showColumnsControl=window.__experimentalEnableGridInteractivity||!!layout?.columnCount,showMinWidthControl=window.__experimentalEnableGridInteractivity||!layout?.columnCount;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(GridLayoutTypeControl,{layout,onChange}),(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:4,children:[showColumnsControl&&(0,jsx_runtime.jsx)(GridLayoutColumnsAndRowsControl,{layout,onChange,allowSizingOnChildren}),showMinWidthControl&&(0,jsx_runtime.jsx)(GridLayoutMinimumWidthControl,{layout,onChange})]})]})},toolBarControls:function GridLayoutToolbarControls(){return null},getLayoutStyle:function getLayoutStyle({selector,layout,style,blockName,hasBlockGapSupport,layoutDefinitions=LAYOUT_DEFINITIONS}){const{minimumColumnWidth=null,columnCount=null,rowCount=null}=layout;const blockGapValue=style?.spacing?.blockGap&&!shouldSkipSerialization(blockName,"spacing","blockGap")?getGapCSSValue(style?.spacing?.blockGap,"0.5em"):void 0;let output="";const rules=[];if(minimumColumnWidth&&columnCount>0){const maxValue=`max(${minimumColumnWidth}, ( 100% - (${blockGapValue||"1.2rem"}*${columnCount-1}) ) / ${columnCount})`;rules.push(`grid-template-columns: repeat(auto-fill, minmax(${maxValue}, 1fr))`,"container-type: inline-size"),rowCount&&rules.push(`grid-template-rows: repeat(${rowCount}, minmax(1rem, auto))`)}else columnCount?(rules.push(`grid-template-columns: repeat(${columnCount}, minmax(0, 1fr))`),rowCount&&rules.push(`grid-template-rows: repeat(${rowCount}, minmax(1rem, auto))`)):rules.push(`grid-template-columns: repeat(auto-fill, minmax(min(${minimumColumnWidth||"12rem"}, 100%), 1fr))`,"container-type: inline-size");return rules.length&&(output=`${appendSelectors(selector)} { ${rules.join("; ")}; }`),hasBlockGapSupport&&blockGapValue&&(output+=getBlockGapCSS(selector,layoutDefinitions,"grid",blockGapValue)),output},getOrientation:()=>"horizontal",getAlignments:()=>[]};function GridLayoutMinimumWidthControl({layout,onChange}){const{minimumColumnWidth,columnCount,isManualPlacement}=layout,value=minimumColumnWidth||(isManualPlacement||columnCount?null:"12rem"),[quantity,unit="rem"]=(0,utils.bu)(value);return(0,jsx_runtime.jsxs)("fieldset",{children:[(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"legend",children:(0,i18n_build_module.__)("Minimum column width")}),(0,jsx_runtime.jsxs)(component.A,{gap:4,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(unit_control.Ay,{size:"__unstable-large",onChange:newValue=>{onChange({...layout,minimumColumnWidth:""===newValue?void 0:newValue})},onUnitChange:newUnit=>{let newValue;["em","rem"].includes(newUnit)&&"px"===unit?newValue=(quantity/16).toFixed(2)+newUnit:["em","rem"].includes(unit)&&"px"===newUnit&&(newValue=Math.round(16*quantity)+newUnit),onChange({...layout,minimumColumnWidth:newValue})},value,units,min:0,label:(0,i18n_build_module.__)("Minimum column width"),hideLabelFromVision:!0})}),(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(range_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,onChange:next=>{onChange({...layout,minimumColumnWidth:[next,unit].join("")})},value:quantity||0,min:0,max:RANGE_CONTROL_MAX_VALUES[unit]||600,withInputField:!1,label:(0,i18n_build_module.__)("Minimum column width"),hideLabelFromVision:!0})})]})]})}function GridLayoutColumnsAndRowsControl({layout,onChange,allowSizingOnChildren}){const defaultColumnCount=window.__experimentalEnableGridInteractivity?void 0:3,{columnCount=defaultColumnCount,rowCount,isManualPlacement}=layout;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("fieldset",{children:[(!window.__experimentalEnableGridInteractivity||!isManualPlacement)&&(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"legend",children:(0,i18n_build_module.__)("Columns")}),(0,jsx_runtime.jsxs)(component.A,{gap:4,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(number_control.A,{size:"__unstable-large",onChange:value=>{if(window.__experimentalEnableGridInteractivity){const newColumnCount=""===value||"0"===value?isManualPlacement?1:void 0:parseInt(value,10);onChange({...layout,columnCount:newColumnCount})}else{const newColumnCount=""===value||"0"===value?1:parseInt(value,10);onChange({...layout,columnCount:newColumnCount})}},value:columnCount,min:1,label:(0,i18n_build_module.__)("Columns"),hideLabelFromVision:!window.__experimentalEnableGridInteractivity||!isManualPlacement})}),(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:window.__experimentalEnableGridInteractivity&&allowSizingOnChildren&&isManualPlacement?(0,jsx_runtime.jsx)(number_control.A,{size:"__unstable-large",onChange:value=>{const newRowCount=""===value||"0"===value?1:parseInt(value,10);onChange({...layout,rowCount:newRowCount})},value:rowCount,min:1,label:(0,i18n_build_module.__)("Rows")}):(0,jsx_runtime.jsx)(range_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,value:null!=columnCount?columnCount:1,onChange:value=>onChange({...layout,columnCount:""===value||"0"===value?1:value}),min:1,max:16,withInputField:!1,label:(0,i18n_build_module.__)("Columns"),hideLabelFromVision:!0})})]})]})})}function GridLayoutTypeControl({layout,onChange}){const{columnCount,rowCount,minimumColumnWidth,isManualPlacement}=layout,[tempColumnCount,setTempColumnCount]=(0,react.useState)(columnCount||3),[tempRowCount,setTempRowCount]=(0,react.useState)(rowCount),[tempMinimumColumnWidth,setTempMinimumColumnWidth]=(0,react.useState)(minimumColumnWidth||"12rem"),gridPlacement=isManualPlacement||columnCount&&!window.__experimentalEnableGridInteractivity?"manual":"auto",helpText="manual"===gridPlacement?(0,i18n_build_module.__)("Grid items can be manually placed in any position on the grid."):(0,i18n_build_module.__)("Grid items are placed automatically depending on their order.");return(0,jsx_runtime.jsxs)(toggle_group_control_component.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Grid item position"),value:gridPlacement,onChange:value=>{"manual"===value?setTempMinimumColumnWidth(minimumColumnWidth||"12rem"):(setTempColumnCount(columnCount||3),setTempRowCount(rowCount)),onChange({...layout,columnCount:"manual"===value?tempColumnCount:null,rowCount:"manual"===value&&window.__experimentalEnableGridInteractivity?tempRowCount:void 0,isManualPlacement:!("manual"!==value||!window.__experimentalEnableGridInteractivity)||void 0,minimumColumnWidth:"auto"===value?tempMinimumColumnWidth:null})},isBlock:!0,help:window.__experimentalEnableGridInteractivity?helpText:void 0,children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"auto",label:(0,i18n_build_module.__)("Auto")},"auto"),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"manual",label:(0,i18n_build_module.__)("Manual")},"manual")]})}GridLayoutMinimumWidthControl.displayName="GridLayoutMinimumWidthControl",GridLayoutTypeControl.displayName="GridLayoutTypeControl";const layoutTypes=[flow,flex,constrained,grid];function getLayoutType(name="default"){return layoutTypes.find((layoutType=>layoutType.name===name))}const defaultLayout={type:"default"},Layout=(0,react.createContext)(defaultLayout),LayoutProvider=Layout.Provider;const{isUnmodifiedBlockContent}=(0,lock_unlock.T)(blocks_build_module.jb);function Block({children,isHtml,...props}){return(0,jsx_runtime.jsx)("div",{...useBlockProps(props,{__unstableIsHtml:isHtml}),children})}function BlockListBlock({block:{__unstableBlockSource},mode,isLocked,canRemove,clientId,isSelected,isSelectionEnabled,className,__unstableLayoutClassNames:layoutClassNames,name,isValid,attributes,wrapperProps,setAttributes,onReplace,onInsertBlocksAfter,onMerge,toggleSelection}){var _wrapperProps;const{mayDisplayControls,mayDisplayParentControls,themeSupportsLayout,...context}=(0,react.useContext)(PrivateBlockContext),{removeBlock}=(0,use_dispatch.A)(store.M),onRemove=(0,react.useCallback)((()=>removeBlock(clientId)),[clientId,removeBlock]),parentLayout=function useLayout(){return(0,react.useContext)(Layout)}()||{};let blockEdit=(0,jsx_runtime.jsx)(BlockEdit,{name,isSelected,attributes,setAttributes,insertBlocksAfter:isLocked?void 0:onInsertBlocksAfter,onReplace:canRemove?onReplace:void 0,onRemove:canRemove?onRemove:void 0,mergeBlocks:canRemove?onMerge:void 0,clientId,isSelectionEnabled,toggleSelection,__unstableLayoutClassNames:layoutClassNames,__unstableParentLayout:Object.keys(parentLayout).length?parentLayout:void 0,mayDisplayControls,mayDisplayParentControls,blockEditingMode:context.blockEditingMode,isPreviewMode:context.isPreviewMode});const blockType=(0,blocks_build_module.E7)(name);blockType?.getEditWrapperProps&&(wrapperProps=function mergeWrapperProps(propsA,propsB){const newProps={...propsA,...propsB};return propsA?.hasOwnProperty("className")&&propsB?.hasOwnProperty("className")&&(newProps.className=(0,dist_clsx.A)(propsA.className,propsB.className)),propsA?.hasOwnProperty("style")&&propsB?.hasOwnProperty("style")&&(newProps.style={...propsA.style,...propsB.style}),newProps}(wrapperProps,blockType.getEditWrapperProps(attributes)));const isAligned=wrapperProps&&!!wrapperProps["data-align"]&&!themeSupportsLayout,isSticky=className?.includes("is-position-sticky");let block;if(isAligned&&(blockEdit=(0,jsx_runtime.jsx)("div",{className:(0,dist_clsx.A)("wp-block",isSticky&&className),"data-align":wrapperProps["data-align"],children:blockEdit})),isValid)block="html"===mode?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{display:"none"},children:blockEdit}),(0,jsx_runtime.jsx)(Block,{isHtml:!0,children:(0,jsx_runtime.jsx)(block_html,{clientId})})]}):blockType?.apiVersion>1?blockEdit:(0,jsx_runtime.jsx)(Block,{children:blockEdit});else{const saveContent=__unstableBlockSource?(0,blocks_build_module.Kx)(__unstableBlockSource):(0,blocks_build_module.Z9)(blockType,attributes);block=(0,jsx_runtime.jsxs)(Block,{className:"has-warning",children:[(0,jsx_runtime.jsx)(BlockInvalidWarning,{clientId}),(0,jsx_runtime.jsx)(raw_html.A,{children:(0,safe_html.A)(saveContent)})]})}const{"data-align":dataAlign,...restWrapperProps}=null!==(_wrapperProps=wrapperProps)&&void 0!==_wrapperProps?_wrapperProps:{},updatedWrapperProps={...restWrapperProps,className:(0,dist_clsx.A)(restWrapperProps.className,dataAlign&&themeSupportsLayout&&`align${dataAlign}`,!(dataAlign&&isSticky)&&className)};return(0,jsx_runtime.jsx)(PrivateBlockContext.Provider,{value:{wrapperProps:updatedWrapperProps,isAligned,...context},children:(0,jsx_runtime.jsx)(block_crash_boundary,{fallback:(0,jsx_runtime.jsx)(Block,{className:"has-warning",children:(0,jsx_runtime.jsx)(block_crash_warning,{})}),children:block})})}Block.displayName="Block",BlockListBlock.displayName="BlockListBlock";const applyWithDispatch=(0,with_dispatch.A)(((dispatch,ownProps,registry)=>{const{updateBlockAttributes,insertBlocks,mergeBlocks,replaceBlocks,toggleSelection,__unstableMarkLastChangeAsPersistent,moveBlocksToPosition,removeBlock,selectBlock}=dispatch(store.M);return{setAttributes(newAttributes){const{getMultiSelectedBlockClientIds}=registry.select(store.M),multiSelectedBlockClientIds=getMultiSelectedBlockClientIds(),{clientId}=ownProps,clientIds=multiSelectedBlockClientIds.length?multiSelectedBlockClientIds:[clientId];updateBlockAttributes(clientIds,newAttributes)},onInsertBlocks(blocks,index){const{rootClientId}=ownProps;insertBlocks(blocks,index,rootClientId)},onInsertBlocksAfter(blocks){const{clientId,rootClientId}=ownProps,{getBlockIndex}=registry.select(store.M),index=getBlockIndex(clientId);insertBlocks(blocks,index+1,rootClientId)},onMerge(forward){const{clientId,rootClientId}=ownProps,{getPreviousBlockClientId,getNextBlockClientId,getBlock,getBlockAttributes,getBlockName,getBlockOrder,getBlockIndex,getBlockRootClientId,canInsertBlockType}=registry.select(store.M);function switchToDefaultOrRemove(){const block=getBlock(clientId),defaultBlockName=(0,blocks_build_module.K$)();if(getBlockName(clientId)!==defaultBlockName){const replacement=(0,blocks_build_module.bh)(block,defaultBlockName);replacement&&replacement.length&&replaceBlocks(clientId,replacement)}else if((0,blocks_build_module.Xw)(block)){const nextBlockClientId=getNextBlockClientId(clientId);nextBlockClientId&&registry.batch((()=>{removeBlock(clientId),selectBlock(nextBlockClientId)}))}}function moveFirstItemUp(_clientId,changeSelection=!0){const targetRootClientId=getBlockRootClientId(_clientId),blockOrder=getBlockOrder(_clientId),[firstClientId]=blockOrder;1===blockOrder.length&&(0,blocks_build_module.C5)(getBlock(firstClientId))?removeBlock(_clientId):registry.batch((()=>{const firstBlock=getBlock(firstClientId),isFirstBlockContentUnmodified=isUnmodifiedBlockContent(firstBlock),defaultBlockName=(0,blocks_build_module.K$)(),replacement=(0,blocks_build_module.bh)(firstBlock,defaultBlockName),canTransformToDefaultBlock=!!replacement?.length&&replacement.every((block=>canInsertBlockType(block.name,_clientId)));if(isFirstBlockContentUnmodified&&canTransformToDefaultBlock)replaceBlocks(firstClientId,replacement,changeSelection);else if(isFirstBlockContentUnmodified&&firstBlock.name===defaultBlockName){removeBlock(firstClientId);const nextBlockClientId=getNextBlockClientId(clientId);nextBlockClientId&&selectBlock(nextBlockClientId)}else if(canInsertBlockType(firstBlock.name,targetRootClientId))moveBlocksToPosition([firstClientId],_clientId,targetRootClientId,getBlockIndex(_clientId));else{const canLiftAndTransformToDefaultBlock=!!replacement?.length&&replacement.every((block=>canInsertBlockType(block.name,targetRootClientId)));canLiftAndTransformToDefaultBlock?(insertBlocks(replacement,getBlockIndex(_clientId),targetRootClientId,changeSelection),removeBlock(firstClientId,!1)):switchToDefaultOrRemove()}!getBlockOrder(_clientId).length&&(0,blocks_build_module.C5)(getBlock(_clientId))&&removeBlock(_clientId,!1)}))}if(forward){if(rootClientId){const nextRootClientId=getNextBlockClientId(rootClientId);if(nextRootClientId){if(getBlockName(rootClientId)!==getBlockName(nextRootClientId))return void mergeBlocks(rootClientId,nextRootClientId);{const rootAttributes=getBlockAttributes(rootClientId),previousRootAttributes=getBlockAttributes(nextRootClientId);if(Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key])))return void registry.batch((()=>{moveBlocksToPosition(getBlockOrder(nextRootClientId),nextRootClientId,rootClientId),removeBlock(nextRootClientId,!1)}))}}}const nextBlockClientId=getNextBlockClientId(clientId);if(!nextBlockClientId)return;getBlockOrder(nextBlockClientId).length?moveFirstItemUp(nextBlockClientId,!1):mergeBlocks(clientId,nextBlockClientId)}else{const previousBlockClientId=getPreviousBlockClientId(clientId);if(previousBlockClientId)mergeBlocks(previousBlockClientId,clientId);else if(rootClientId){const previousRootClientId=getPreviousBlockClientId(rootClientId);if(previousRootClientId&&getBlockName(rootClientId)===getBlockName(previousRootClientId)){const rootAttributes=getBlockAttributes(rootClientId),previousRootAttributes=getBlockAttributes(previousRootClientId);if(Object.keys(rootAttributes).every((key=>rootAttributes[key]===previousRootAttributes[key])))return void registry.batch((()=>{moveBlocksToPosition(getBlockOrder(rootClientId),rootClientId,previousRootClientId),removeBlock(rootClientId,!1)}))}moveFirstItemUp(rootClientId)}else switchToDefaultOrRemove()}},onReplace(blocks,indexToSelect,initialPosition){blocks.length&&!(0,blocks_build_module.Xw)(blocks[blocks.length-1])&&__unstableMarkLastChangeAsPersistent();const replacementBlocks=1===blocks?.length&&Array.isArray(blocks[0])?blocks[0]:blocks;replaceBlocks([ownProps.clientId],replacementBlocks,indexToSelect,initialPosition)},toggleSelection(selectionEnabled){toggleSelection(selectionEnabled)}}}));function BlockListBlockProvider(props){const{clientId,rootClientId}=props,selectedProps=(0,use_select.A)((select=>{const{isBlockSelected,getBlockMode,isSelectionEnabled,getTemplateLock,isSectionBlock:_isSectionBlock,getBlockWithoutAttributes,getBlockAttributes,canRemoveBlock,canMoveBlock,getSettings,getTemporarilyEditingAsBlocks,getBlockEditingMode,getBlockName,isFirstMultiSelectedBlock,getMultiSelectedBlockClientIds,hasSelectedInnerBlock,getBlocksByName,getBlockIndex,isBlockMultiSelected,isBlockSubtreeDisabled,isBlockHighlighted,__unstableIsFullySelected,__unstableSelectionHasUnmergeableBlock,isBlockBeingDragged,isDragging,__unstableHasActiveBlockOverlayActive,getSelectedBlocksInitialCaretPosition}=(0,lock_unlock.T)(select(store.M)),blockWithoutAttributes=getBlockWithoutAttributes(clientId);if(!blockWithoutAttributes)return;const{hasBlockSupport:_hasBlockSupport,getActiveBlockVariation}=select(blocks_build_module.M_),attributes=getBlockAttributes(clientId),{name:blockName,isValid}=blockWithoutAttributes,blockType=(0,blocks_build_module.E7)(blockName),{supportsLayout,isPreviewMode}=getSettings(),hasLightBlockWrapper=blockType?.apiVersion>1,previewContext={isPreviewMode,blockWithoutAttributes,name:blockName,attributes,isValid,themeSupportsLayout:supportsLayout,index:getBlockIndex(clientId),isReusable:(0,blocks_build_module.tk)(blockType),className:hasLightBlockWrapper?attributes.className:void 0,defaultClassName:hasLightBlockWrapper?(0,blocks_build_module.KW)(blockName):void 0,blockTitle:blockType?.title};if(isPreviewMode)return previewContext;const _isSelected=isBlockSelected(clientId),canRemove=canRemoveBlock(clientId),canMove=canMoveBlock(clientId),match=getActiveBlockVariation(blockName,attributes),isMultiSelected=isBlockMultiSelected(clientId),isAncestorOfSelectedBlock=hasSelectedInnerBlock(clientId,!0),blockEditingMode=getBlockEditingMode(clientId),blocksWithSameName=(0,blocks_build_module.pN)(blockName,"multiple",!0)?[]:getBlocksByName(blockName),isInvalid=blocksWithSameName.length&&blocksWithSameName[0]!==clientId;return{...previewContext,mode:getBlockMode(clientId),isSelectionEnabled:isSelectionEnabled(),isLocked:!!getTemplateLock(rootClientId),isSectionBlock:_isSectionBlock(clientId),canRemove,canMove,isSelected:_isSelected,isTemporarilyEditingAsBlocks:getTemporarilyEditingAsBlocks()===clientId,blockEditingMode,mayDisplayControls:_isSelected||isFirstMultiSelectedBlock(clientId)&&getMultiSelectedBlockClientIds().every((id=>getBlockName(id)===blockName)),mayDisplayParentControls:_hasBlockSupport(getBlockName(clientId),"__experimentalExposeControlsToChildren",!1)&&hasSelectedInnerBlock(clientId),blockApiVersion:blockType?.apiVersion||1,blockTitle:match?.title||blockType?.title,isSubtreeDisabled:"disabled"===blockEditingMode&&isBlockSubtreeDisabled(clientId),hasOverlay:__unstableHasActiveBlockOverlayActive(clientId)&&!isDragging(),initialPosition:_isSelected?getSelectedBlocksInitialCaretPosition():void 0,isHighlighted:isBlockHighlighted(clientId),isMultiSelected,isPartiallySelected:isMultiSelected&&!__unstableIsFullySelected()&&!__unstableSelectionHasUnmergeableBlock(),isDragging:isBlockBeingDragged(clientId),hasChildSelected:isAncestorOfSelectedBlock,isEditingDisabled:"disabled"===blockEditingMode,hasEditableOutline:"disabled"!==blockEditingMode&&"disabled"===getBlockEditingMode(rootClientId),originalBlockClientId:!!isInvalid&&blocksWithSameName[0]}}),[clientId,rootClientId]),{isPreviewMode,mode="visual",isSelectionEnabled=!1,isLocked=!1,canRemove=!1,canMove=!1,blockWithoutAttributes,name,attributes,isValid,isSelected=!1,themeSupportsLayout,isTemporarilyEditingAsBlocks,blockEditingMode,mayDisplayControls,mayDisplayParentControls,index,blockApiVersion,blockTitle,isSubtreeDisabled,hasOverlay,initialPosition,isHighlighted,isMultiSelected,isPartiallySelected,isReusable,isDragging,hasChildSelected,isSectionBlock,isEditingDisabled,hasEditableOutline,className,defaultClassName,originalBlockClientId}=selectedProps,block=(0,react.useMemo)((()=>({...blockWithoutAttributes,attributes})),[blockWithoutAttributes,attributes]);if(!selectedProps)return null;const privateContext={isPreviewMode,clientId,className,index,mode,name,blockApiVersion,blockTitle,isSelected,isSubtreeDisabled,hasOverlay,initialPosition,blockEditingMode,isHighlighted,isMultiSelected,isPartiallySelected,isReusable,isDragging,hasChildSelected,isSectionBlock,isEditingDisabled,hasEditableOutline,isTemporarilyEditingAsBlocks,defaultClassName,mayDisplayControls,mayDisplayParentControls,originalBlockClientId,themeSupportsLayout};return(0,jsx_runtime.jsx)(PrivateBlockContext.Provider,{value:privateContext,children:(0,jsx_runtime.jsx)(BlockListBlock,{...props,mode,isSelectionEnabled,isLocked,canRemove,canMove,block,name,attributes,isValid,isSelected})})}BlockListBlock=(0,compose.A)(applyWithDispatch,(0,with_filters.A)("editor.BlockListBlock"))(BlockListBlock),BlockListBlockProvider.displayName="BlockListBlockProvider";const block=(0,react.memo)(BlockListBlockProvider);BlockListBlockProvider.__docgenInfo={description:"",methods:[],displayName:"BlockListBlockProvider"};var html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js"),inserter=__webpack_require__("./packages/block-editor/src/components/inserter/index.js");const ZWNBSP="\ufeff";function DefaultBlockAppender({rootClientId}){const{showPrompt,isLocked,placeholder,isManualGrid}=(0,use_select.A)((select=>{const{getBlockCount,getSettings,getTemplateLock,getBlockAttributes}=select(store.M),isEmpty=!getBlockCount(rootClientId),{bodyPlaceholder}=getSettings();return{showPrompt:isEmpty,isLocked:!!getTemplateLock(rootClientId),placeholder:bodyPlaceholder,isManualGrid:getBlockAttributes(rootClientId)?.layout?.isManualPlacement}}),[rootClientId]),{insertDefaultBlock,startTyping}=(0,use_dispatch.A)(store.M);if(isLocked||isManualGrid)return null;const value=(0,html_entities_build_module.S)(placeholder)||(0,i18n_build_module.__)("Type / to choose a block"),onAppend=()=>{insertDefaultBlock(void 0,rootClientId),startTyping()};return(0,jsx_runtime.jsxs)("div",{"data-root-client-id":rootClientId||"",className:(0,dist_clsx.A)("block-editor-default-block-appender",{"has-visible-prompt":showPrompt}),children:[(0,jsx_runtime.jsx)("p",{tabIndex:"0",role:"button","aria-label":(0,i18n_build_module.__)("Add default block"),className:"block-editor-default-block-appender__content",onKeyDown:event=>{keycodes_build_module.Fm!==event.keyCode&&keycodes_build_module.t6!==event.keyCode||onAppend()},onClick:()=>onAppend(),onFocus:()=>{showPrompt&&onAppend()},children:showPrompt?value:ZWNBSP}),(0,jsx_runtime.jsx)(inserter.A,{rootClientId,position:"bottom right",isAppender:!0,__experimentalIsQuick:!0})]})}DefaultBlockAppender.displayName="DefaultBlockAppender",DefaultBlockAppender.__docgenInfo={description:"",methods:[],displayName:"DefaultBlockAppender"};var plus=__webpack_require__("./packages/icons/build-module/library/plus.js");function ButtonBlockAppender({rootClientId,className,onFocus,tabIndex,onSelect},ref){const inserterButtonRef=(0,react.useRef)(),mergedInserterButtonRef=(0,use_merge_refs.A)([inserterButtonRef,ref]);return(0,jsx_runtime.jsx)(inserter.A,{position:"bottom center",rootClientId,__experimentalIsQuick:!0,onSelectOrClose:(...args)=>{onSelect&&"function"==typeof onSelect&&onSelect(...args),inserterButtonRef.current?.focus()},renderToggle:({onToggle,disabled,isOpen,blockTitle,hasSingleBlockType})=>{const isToggleButton=!hasSingleBlockType,label=hasSingleBlockType?(0,i18n_build_module.nv)((0,i18n_build_module._x)("Add %s","directly add the only allowed block"),blockTitle):(0,i18n_build_module._x)("Add block","Generic label for block inserter button");return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,ref:mergedInserterButtonRef,onFocus,tabIndex,className:(0,dist_clsx.A)(className,"block-editor-button-block-appender"),onClick:onToggle,"aria-haspopup":isToggleButton?"true":void 0,"aria-expanded":isToggleButton?isOpen:void 0,disabled,label,showTooltip:!0,children:(0,jsx_runtime.jsx)(icon.A,{icon:plus.A})})},isAppender:!0})}ButtonBlockAppender.displayName="ButtonBlockAppender";const ButtonBlockerAppender=(0,react.forwardRef)(((props,ref)=>((0,build_module.A)("wp.blockEditor.ButtonBlockerAppender",{alternative:"wp.blockEditor.ButtonBlockAppender",since:"5.9"}),ButtonBlockAppender(props,ref)))),button_block_appender=(0,react.forwardRef)(ButtonBlockAppender);function DefaultAppender({rootClientId}){return(0,use_select.A)((select=>select(store.M).canInsertBlockType((0,blocks_build_module.K$)(),rootClientId)))?(0,jsx_runtime.jsx)(DefaultBlockAppender,{rootClientId}):(0,jsx_runtime.jsx)(button_block_appender,{rootClientId,className:"block-list-appender__toggle"})}function BlockListAppender({rootClientId,CustomAppender,className,tagName:TagName="div"}){const isDragOver=(0,use_select.A)((select=>{const{getBlockInsertionPoint,isBlockInsertionPointVisible,getBlockCount}=select(store.M),insertionPoint=getBlockInsertionPoint();return isBlockInsertionPointVisible()&&rootClientId===insertionPoint?.rootClientId&&0===getBlockCount(rootClientId)}),[rootClientId]);return(0,jsx_runtime.jsx)(TagName,{tabIndex:-1,className:(0,dist_clsx.A)("block-list-appender wp-block",className,{"is-drag-over":isDragOver}),contentEditable:!1,"data-block":!0,children:CustomAppender?(0,jsx_runtime.jsx)(CustomAppender,{}):(0,jsx_runtime.jsx)(DefaultAppender,{rootClientId})})}ButtonBlockerAppender.__docgenInfo={description:"Use `ButtonBlockAppender` instead.\n\n@deprecated",methods:[],displayName:"ButtonBlockerAppender"},ButtonBlockAppender.__docgenInfo={description:"",methods:[],displayName:"ButtonBlockAppender"},DefaultAppender.displayName="DefaultAppender",BlockListAppender.displayName="BlockListAppender",BlockListAppender.__docgenInfo={description:"",methods:[],displayName:"BlockListAppender",props:{tagName:{defaultValue:{value:"'div'",computed:!1},required:!1}}};var motion=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion.mjs"),popover=__webpack_require__("./packages/components/build-module/popover/index.js");const use_popover_scroll=function usePopoverScroll(scrollableRef){return(0,use_ref_effect.A)((node=>{if(!scrollableRef)return;function onWheel(event){const{deltaX,deltaY}=event;scrollableRef.current.scrollBy(deltaX,deltaY)}const options={passive:!0};return node.addEventListener("wheel",onWheel,options),()=>{node.removeEventListener("wheel",onWheel,options)}}),[scrollableRef])},MAX_POPOVER_RECOMPUTE_COUNTER=Number.MAX_SAFE_INTEGER;(0,react.createContext)();function BlockPopoverInbetween({previousClientId,nextClientId,children,__unstablePopoverSlot,__unstableContentRef,operation="insert",nearestSide="right",...props}){const[popoverRecomputeCounter,forcePopoverRecompute]=(0,react.useReducer)((s=>(s+1)%MAX_POPOVER_RECOMPUTE_COUNTER),0),{orientation,rootClientId,isVisible}=(0,use_select.A)((select=>{const{getBlockListSettings,getBlockRootClientId,isBlockVisible}=select(store.M),_rootClientId=getBlockRootClientId(null!=previousClientId?previousClientId:nextClientId);return{orientation:getBlockListSettings(_rootClientId)?.orientation||"vertical",rootClientId:_rootClientId,isVisible:isBlockVisible(previousClientId)&&isBlockVisible(nextClientId)}}),[previousClientId,nextClientId]),previousElement=(0,use_block_refs.dN)(previousClientId),nextElement=(0,use_block_refs.dN)(nextClientId),isVertical="vertical"===orientation,popoverAnchor=(0,react.useMemo)((()=>{if(popoverRecomputeCounter<0||!previousElement&&!nextElement||!isVisible)return;return{contextElement:"group"===operation?nextElement||previousElement:previousElement||nextElement,getBoundingClientRect(){const previousRect=previousElement?previousElement.getBoundingClientRect():null,nextRect=nextElement?nextElement.getBoundingClientRect():null;let left=0,top=0,width=0,height=0;if("group"===operation){const targetRect=nextRect||previousRect;top=targetRect.top,width=0,height=targetRect.bottom-targetRect.top,left="left"===nearestSide?targetRect.left-2:targetRect.right-2}else isVertical?(top=previousRect?previousRect.bottom:nextRect.top,width=previousRect?previousRect.width:nextRect.width,height=nextRect&&previousRect?nextRect.top-previousRect.bottom:0,left=previousRect?previousRect.left:nextRect.left):(top=previousRect?previousRect.top:nextRect.top,height=previousRect?previousRect.height:nextRect.height,(0,i18n_build_module.V8)()?(left=nextRect?nextRect.right:previousRect.left,width=previousRect&&nextRect?previousRect.left-nextRect.right:0):(left=previousRect?previousRect.right:nextRect.left,width=previousRect&&nextRect?nextRect.left-previousRect.right:0));return new window.DOMRect(left,top,width,height)}}}),[previousElement,nextElement,popoverRecomputeCounter,isVertical,isVisible,operation,nearestSide]),popoverScrollRef=use_popover_scroll(__unstableContentRef);return(0,react.useLayoutEffect)((()=>{if(!previousElement)return;const observer=new window.MutationObserver(forcePopoverRecompute);return observer.observe(previousElement,{attributes:!0}),()=>{observer.disconnect()}}),[previousElement]),(0,react.useLayoutEffect)((()=>{if(!nextElement)return;const observer=new window.MutationObserver(forcePopoverRecompute);return observer.observe(nextElement,{attributes:!0}),()=>{observer.disconnect()}}),[nextElement]),(0,react.useLayoutEffect)((()=>{if(previousElement)return previousElement.ownerDocument.defaultView.addEventListener("resize",forcePopoverRecompute),()=>{previousElement.ownerDocument.defaultView?.removeEventListener("resize",forcePopoverRecompute)}}),[previousElement]),(previousElement||nextElement)&&isVisible?(0,jsx_runtime.jsx)(popover.Ay,{ref:popoverScrollRef,animate:!1,anchor:popoverAnchor,focusOnMount:!1,__unstableSlotName:__unstablePopoverSlot,inline:!__unstablePopoverSlot,...props,className:(0,dist_clsx.A)("block-editor-block-popover","block-editor-block-popover__inbetween",props.className),resize:!1,flip:!1,placement:"overlay",variant:"unstyled",children:(0,jsx_runtime.jsx)("div",{className:"block-editor-block-popover__inbetween-container",children})},nextClientId+"--"+rootClientId):null}BlockPopoverInbetween.displayName="BlockPopoverInbetween";const inbetween=BlockPopoverInbetween;BlockPopoverInbetween.__docgenInfo={description:"",methods:[],displayName:"BlockPopoverInbetween",props:{operation:{defaultValue:{value:"'insert'",computed:!1},required:!1},nearestSide:{defaultValue:{value:"'right'",computed:!1},required:!1}}};const block_popover_MAX_POPOVER_RECOMPUTE_COUNTER=Number.MAX_SAFE_INTEGER;function BlockPopover({clientId,bottomClientId,children,__unstablePopoverSlot,__unstableContentRef,shift=!0,...props},ref){const selectedElement=(0,use_block_refs.dN)(clientId),lastSelectedElement=(0,use_block_refs.dN)(null!=bottomClientId?bottomClientId:clientId),mergedRefs=(0,use_merge_refs.A)([ref,use_popover_scroll(__unstableContentRef)]),[popoverDimensionsRecomputeCounter,forceRecomputePopoverDimensions]=(0,react.useReducer)((s=>(s+1)%block_popover_MAX_POPOVER_RECOMPUTE_COUNTER),0);(0,react.useLayoutEffect)((()=>{if(!selectedElement)return;const observer=new window.MutationObserver(forceRecomputePopoverDimensions);return observer.observe(selectedElement,{attributes:!0}),()=>{observer.disconnect()}}),[selectedElement]);const popoverAnchor=(0,react.useMemo)((()=>{if(!(popoverDimensionsRecomputeCounter<0||!selectedElement||bottomClientId&&!lastSelectedElement))return{getBoundingClientRect:()=>lastSelectedElement?rectUnion(getVisibleElementBounds(selectedElement),getVisibleElementBounds(lastSelectedElement)):getVisibleElementBounds(selectedElement),contextElement:selectedElement}}),[popoverDimensionsRecomputeCounter,selectedElement,bottomClientId,lastSelectedElement]);return!selectedElement||bottomClientId&&!lastSelectedElement?null:(0,jsx_runtime.jsx)(popover.Ay,{ref:mergedRefs,animate:!1,focusOnMount:!1,anchor:popoverAnchor,__unstableSlotName:__unstablePopoverSlot,inline:!__unstablePopoverSlot,placement:"top-start",resize:!1,flip:!1,shift,...props,className:(0,dist_clsx.A)("block-editor-block-popover",props.className),variant:"unstyled",children})}BlockPopover.displayName="BlockPopover";const PrivateBlockPopover=(0,react.forwardRef)(BlockPopover),PublicBlockPopover=({clientId,bottomClientId,children,...props},ref)=>(0,jsx_runtime.jsx)(PrivateBlockPopover,{...props,bottomClientId,clientId,__unstableContentRef:void 0,__unstablePopoverSlot:void 0,ref,children});PublicBlockPopover.displayName="PublicBlockPopover";(0,react.forwardRef)(PublicBlockPopover);function BlockPopoverCover({clientId,bottomClientId,children,shift=!1,additionalStyles,...props},ref){var _bottomClientId;null!==(_bottomClientId=bottomClientId)&&void 0!==_bottomClientId||(bottomClientId=clientId);const selectedElement=(0,use_block_refs.dN)(clientId);return(0,jsx_runtime.jsx)(PrivateBlockPopover,{ref,clientId,bottomClientId,shift,...props,children:selectedElement&&clientId===bottomClientId?(0,jsx_runtime.jsx)(CoverContainer,{selectedElement,additionalStyles,children}):children})}function CoverContainer({selectedElement,additionalStyles={},children}){const[width,setWidth]=(0,react.useState)(selectedElement.offsetWidth),[height,setHeight]=(0,react.useState)(selectedElement.offsetHeight);(0,react.useEffect)((()=>{const observer=new window.ResizeObserver((()=>{setWidth(selectedElement.offsetWidth),setHeight(selectedElement.offsetHeight)}));return observer.observe(selectedElement,{box:"border-box"}),()=>observer.disconnect()}),[selectedElement]);const style=(0,react.useMemo)((()=>({position:"absolute",width,height,...additionalStyles})),[width,height,additionalStyles]);return(0,jsx_runtime.jsx)("div",{style,children})}BlockPopover.__docgenInfo={description:"",methods:[],displayName:"BlockPopover",props:{shift:{defaultValue:{value:"true",computed:!1},required:!1}}},PublicBlockPopover.__docgenInfo={description:"",methods:[],displayName:"PublicBlockPopover"},BlockPopoverCover.displayName="BlockPopoverCover",CoverContainer.displayName="CoverContainer";const cover=(0,react.forwardRef)(BlockPopoverCover);BlockPopoverCover.__docgenInfo={description:"",methods:[],displayName:"BlockPopoverCover",props:{shift:{defaultValue:{value:"false",computed:!1},required:!1}}};const animateVariants={hide:{opacity:0,scaleY:.75},show:{opacity:1,scaleY:1},exit:{opacity:0,scaleY:.9}};function BlockDropZonePopover({__unstablePopoverSlot,__unstableContentRef}){const{clientId}=(0,use_select.A)((select=>{const{getBlockOrder,getBlockInsertionPoint}=select(store.M),insertionPoint=getBlockInsertionPoint(),order=getBlockOrder(insertionPoint.rootClientId);return order.length?{clientId:order[insertionPoint.index]}:{}}),[]),reducedMotion=(0,use_reduced_motion.A)();return(0,jsx_runtime.jsx)(cover,{clientId,__unstablePopoverSlot,__unstableContentRef,className:"block-editor-block-popover__drop-zone",children:(0,jsx_runtime.jsx)(motion.P.div,{"data-testid":"block-popover-drop-zone",initial:reducedMotion?animateVariants.show:animateVariants.hide,animate:animateVariants.show,exit:reducedMotion?animateVariants.show:animateVariants.exit,className:"block-editor-block-popover__drop-zone-foreground"})})}BlockDropZonePopover.displayName="BlockDropZonePopover";BlockDropZonePopover.__docgenInfo={description:"",methods:[],displayName:"BlockDropZonePopover"};const insertion_point_InsertionPointOpenRef=(0,react.createContext)();function InbetweenInsertionPointPopover({__unstablePopoverSlot,__unstableContentRef,operation="insert",nearestSide="right"}){const{selectBlock,hideInsertionPoint}=(0,use_dispatch.A)(store.M),openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),ref=(0,react.useRef)(),{orientation,previousClientId,nextClientId,rootClientId,isInserterShown,isDistractionFree,isZoomOutMode}=(0,use_select.A)((select=>{const{getBlockOrder,getBlockListSettings,getBlockInsertionPoint,isBlockBeingDragged,getPreviousBlockClientId,getNextBlockClientId,getSettings,isZoomOut}=(0,lock_unlock.T)(select(store.M)),insertionPoint=getBlockInsertionPoint(),order=getBlockOrder(insertionPoint.rootClientId);if(!order.length)return{};let _previousClientId=order[insertionPoint.index-1],_nextClientId=order[insertionPoint.index];for(;isBlockBeingDragged(_previousClientId);)_previousClientId=getPreviousBlockClientId(_previousClientId);for(;isBlockBeingDragged(_nextClientId);)_nextClientId=getNextBlockClientId(_nextClientId);const settings=getSettings();return{previousClientId:_previousClientId,nextClientId:_nextClientId,orientation:getBlockListSettings(insertionPoint.rootClientId)?.orientation||"vertical",rootClientId:insertionPoint.rootClientId,isDistractionFree:settings.isDistractionFree,isInserterShown:insertionPoint?.__unstableWithInserter,isZoomOutMode:isZoomOut()}}),[]),{getBlockEditingMode}=(0,use_select.A)(store.M),disableMotion=(0,use_reduced_motion.A)();const lineVariants={start:{opacity:0,scale:0},rest:{opacity:1,scale:1,transition:{delay:isInserterShown?.5:0,type:"tween"}},hover:{opacity:1,scale:1,transition:{delay:.5,type:"tween"}}},inserterVariants={start:{scale:disableMotion?1:0},rest:{scale:1,transition:{delay:.4,type:"tween"}}};if(isDistractionFree)return null;if(isZoomOutMode&&"insert"!==operation)return null;const orientationClassname="horizontal"===orientation||"group"===operation?"is-horizontal":"is-vertical",className=(0,dist_clsx.A)("block-editor-block-list__insertion-point",orientationClassname);return(0,jsx_runtime.jsx)(inbetween,{previousClientId,nextClientId,__unstablePopoverSlot,__unstableContentRef,operation,nearestSide,children:(0,jsx_runtime.jsxs)(motion.P.div,{layout:!disableMotion,initial:disableMotion?"rest":"start",animate:"rest",whileHover:"hover",whileTap:"pressed",exit:"start",ref,tabIndex:-1,onClick:function onClick(event){event.target===ref.current&&nextClientId&&"disabled"!==getBlockEditingMode(nextClientId)&&selectBlock(nextClientId,-1)},onFocus:function onFocus(event){event.target!==ref.current&&(openRef.current=!0)},className:(0,dist_clsx.A)(className,{"is-with-inserter":isInserterShown}),onHoverEnd:function maybeHideInserterPoint(event){event.target!==ref.current||openRef.current||hideInsertionPoint()},children:[(0,jsx_runtime.jsx)(motion.P.div,{variants:lineVariants,className:"block-editor-block-list__insertion-point-indicator","data-testid":"block-list-insertion-point-indicator"}),isInserterShown&&(0,jsx_runtime.jsx)(motion.P.div,{variants:inserterVariants,className:(0,dist_clsx.A)("block-editor-block-list__insertion-point-inserter"),children:(0,jsx_runtime.jsx)(inserter.A,{position:"bottom center",clientId:nextClientId,rootClientId,__experimentalIsQuick:!0,onToggle:isOpen=>{openRef.current=isOpen},onSelectOrClose:()=>{openRef.current=!1}})})]})})}function useInBetweenInserter(){const openRef=(0,react.useContext)(insertion_point_InsertionPointOpenRef),isInBetweenInserterDisabled=(0,use_select.A)((select=>select(store.M).getSettings().isDistractionFree||(0,lock_unlock.T)(select(store.M)).isZoomOut()),[]),{getBlockListSettings,getBlockIndex,isMultiSelecting,getSelectedBlockClientIds,getSettings,getTemplateLock,__unstableIsWithinBlockOverlay,getBlockEditingMode,getBlockName,getBlockAttributes,getParentSectionBlock}=(0,lock_unlock.T)((0,use_select.A)(store.M)),{showInsertionPoint,hideInsertionPoint}=(0,use_dispatch.A)(store.M);return(0,use_ref_effect.A)((node=>{if(!isInBetweenInserterDisabled)return node.addEventListener("mousemove",onMouseMove),()=>{node.removeEventListener("mousemove",onMouseMove)};function onMouseMove(event){if(void 0===openRef||openRef.current)return;if(event.target.nodeType===event.target.TEXT_NODE)return;if(isMultiSelecting())return;if(!event.target.classList.contains("block-editor-block-list__layout"))return void hideInsertionPoint();let rootClientId;if(!event.target.classList.contains("is-root-container")){rootClientId=(event.target.getAttribute("data-block")?event.target:event.target.closest("[data-block]")).getAttribute("data-block")}if(getTemplateLock(rootClientId)||"disabled"===getBlockEditingMode(rootClientId)||"core/block"===getBlockName(rootClientId)||rootClientId&&getBlockAttributes(rootClientId).layout?.isManualPlacement)return;const blockListSettings=getBlockListSettings(rootClientId),orientation=blockListSettings?.orientation||"vertical",captureToolbars=!!blockListSettings?.__experimentalCaptureToolbars,offsetTop=event.clientY,offsetLeft=event.clientX;let element=Array.from(event.target.children).find((blockEl=>{const blockElRect=blockEl.getBoundingClientRect();return blockEl.classList.contains("wp-block")&&"vertical"===orientation&&blockElRect.top>offsetTop||blockEl.classList.contains("wp-block")&&"horizontal"===orientation&&((0,i18n_build_module.V8)()?blockElRect.right<offsetLeft:blockElRect.left>offsetLeft)}));if(!element)return void hideInsertionPoint();if(!element.id&&(element=element.firstElementChild,!element))return void hideInsertionPoint();const clientId=element.id.slice(6);if(!clientId||__unstableIsWithinBlockOverlay(clientId)||getParentSectionBlock(clientId))return;if(getSelectedBlockClientIds().includes(clientId)&&"vertical"===orientation&&!captureToolbars&&!getSettings().hasFixedToolbar)return;const elementRect=element.getBoundingClientRect();if("horizontal"===orientation&&(event.clientY>elementRect.bottom||event.clientY<elementRect.top)||"vertical"===orientation&&(event.clientX>elementRect.right||event.clientX<elementRect.left))return void hideInsertionPoint();const index=getBlockIndex(clientId);0!==index?showInsertionPoint(rootClientId,index,{__unstableWithInserter:!0}):hideInsertionPoint()}}),[openRef,getBlockListSettings,getBlockIndex,isMultiSelecting,showInsertionPoint,hideInsertionPoint,getSelectedBlockClientIds,isInBetweenInserterDisabled])}function useBlockSelectionClearer(){const{getSettings,hasSelectedBlock,hasMultiSelection}=(0,use_select.A)(store.M),{clearSelectedBlock}=(0,use_dispatch.A)(store.M),{clearBlockSelection:isEnabled}=getSettings();return(0,use_ref_effect.A)((node=>{if(isEnabled)return node.addEventListener("mousedown",onMouseDown),()=>{node.removeEventListener("mousedown",onMouseDown)};function onMouseDown(event){(hasSelectedBlock()||hasMultiSelection())&&event.target===node&&clearSelectedBlock()}}),[hasSelectedBlock,hasMultiSelection,clearSelectedBlock,isEnabled])}function BlockSelectionClearer(props){return(0,jsx_runtime.jsx)("div",{ref:useBlockSelectionClearer(),...props})}function button_block_appender_ButtonBlockAppender({showSeparator,isFloating,onAddBlock,isToggle}){const{clientId}=(0,block_edit_context.m_)();return(0,jsx_runtime.jsx)(button_block_appender,{className:(0,dist_clsx.A)({"block-list-appender__toggle":isToggle}),rootClientId:clientId,showSeparator,isFloating,onAddBlock})}function default_block_appender_DefaultBlockAppender(){const{clientId}=(0,block_edit_context.m_)();return(0,jsx_runtime.jsx)(DefaultBlockAppender,{rootClientId:clientId})}InbetweenInsertionPointPopover.displayName="InbetweenInsertionPointPopover",BlockSelectionClearer.displayName="BlockSelectionClearer",BlockSelectionClearer.__docgenInfo={description:"",methods:[],displayName:"BlockSelectionClearer"},button_block_appender_ButtonBlockAppender.displayName="ButtonBlockAppender",button_block_appender_ButtonBlockAppender.__docgenInfo={description:"",methods:[],displayName:"ButtonBlockAppender"},default_block_appender_DefaultBlockAppender.displayName="DefaultBlockAppender",default_block_appender_DefaultBlockAppender.__docgenInfo={description:"",methods:[],displayName:"DefaultBlockAppender"};var is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js");const pendingSettingsUpdates=new WeakMap;function createShallowMemo(){let value;return newValue=>(void 0!==value&&(0,is_shallow_equal_build_module.Ay)(value,newValue)||(value=newValue),value)}function useShallowMemo(value){const[memo]=(0,react.useState)(createShallowMemo);return memo(value)}var es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6);var use_block_sync=__webpack_require__("./packages/block-editor/src/components/provider/use-block-sync.js"),use_block_drop_zone=__webpack_require__("./packages/block-editor/src/components/use-block-drop-zone/index.js");const EMPTY_OBJECT={};function BlockContext({children,clientId}){const context=function useBlockContext(clientId){return(0,use_select.A)((select=>{const block=select(store.M).getBlock(clientId);if(!block)return;const blockType=select(blocks_build_module.M_).getBlockType(block.name);return blockType&&0!==Object.keys(blockType.providesContext).length?Object.fromEntries(Object.entries(blockType.providesContext).map((([contextName,attributeName])=>[contextName,block.attributes[attributeName]]))):void 0}),[clientId])}(clientId);return(0,jsx_runtime.jsx)(BlockContextProvider,{value:context,children})}BlockContext.displayName="BlockContext";const BlockListItemsMemo=(0,react.memo)(block_list_BlockListItems);function UncontrolledInnerBlocks(props){const{clientId,allowedBlocks,prioritizedInserterBlocks,defaultBlock,directInsert,__experimentalDefaultBlock,__experimentalDirectInsert,template,templateLock,wrapperRef,templateInsertUpdatesSelection,__experimentalCaptureToolbars:captureToolbars,__experimentalAppenderTagName,renderAppender,orientation,placeholder,layout,name,blockType,parentLock,defaultLayout}=props;!function useNestedSettingsUpdate(clientId,parentLock,allowedBlocks,prioritizedInserterBlocks,defaultBlock,directInsert,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,captureToolbars,orientation,layout){const registry=(0,use_registry.A)(),_allowedBlocks=useShallowMemo(allowedBlocks),_prioritizedInserterBlocks=useShallowMemo(prioritizedInserterBlocks),_templateLock=void 0===templateLock||"contentOnly"===parentLock?parentLock:templateLock;(0,react.useLayoutEffect)((()=>{const newSettings={allowedBlocks:_allowedBlocks,prioritizedInserterBlocks:_prioritizedInserterBlocks,templateLock:_templateLock};if(void 0!==captureToolbars&&(newSettings.__experimentalCaptureToolbars=captureToolbars),void 0!==orientation)newSettings.orientation=orientation;else{const layoutType=getLayoutType(layout?.type);newSettings.orientation=layoutType.getOrientation(layout)}void 0!==__experimentalDefaultBlock&&((0,build_module.A)("__experimentalDefaultBlock",{alternative:"defaultBlock",since:"6.3",version:"6.4"}),newSettings.defaultBlock=__experimentalDefaultBlock),void 0!==defaultBlock&&(newSettings.defaultBlock=defaultBlock),void 0!==__experimentalDirectInsert&&((0,build_module.A)("__experimentalDirectInsert",{alternative:"directInsert",since:"6.3",version:"6.4"}),newSettings.directInsert=__experimentalDirectInsert),void 0!==directInsert&&(newSettings.directInsert=directInsert),void 0!==newSettings.directInsert&&"boolean"!=typeof newSettings.directInsert&&(0,build_module.A)("Using `Function` as a `directInsert` argument",{alternative:"`boolean` values",since:"6.5"}),pendingSettingsUpdates.get(registry)||pendingSettingsUpdates.set(registry,{}),pendingSettingsUpdates.get(registry)[clientId]=newSettings,window.queueMicrotask((()=>{const settings=pendingSettingsUpdates.get(registry);if(Object.keys(settings).length){const{updateBlockListSettings}=registry.dispatch(store.M);updateBlockListSettings(settings),pendingSettingsUpdates.set(registry,{})}}))}),[clientId,_allowedBlocks,_prioritizedInserterBlocks,_templateLock,defaultBlock,directInsert,__experimentalDefaultBlock,__experimentalDirectInsert,captureToolbars,orientation,layout,registry])}(clientId,parentLock,allowedBlocks,prioritizedInserterBlocks,defaultBlock,directInsert,__experimentalDefaultBlock,__experimentalDirectInsert,templateLock,captureToolbars,orientation,layout),function useInnerBlockTemplateSync(clientId,template,templateLock,templateInsertUpdatesSelection){const{getBlocks,getSelectedBlocksInitialCaretPosition,isBlockSelected}=(0,use_select.A)(store.M),{replaceInnerBlocks,__unstableMarkNextChangeAsNotPersistent}=(0,use_dispatch.A)(store.M),existingTemplateRef=(0,react.useRef)(null);(0,react.useLayoutEffect)((()=>{let isCancelled=!1;return window.queueMicrotask((()=>{if(isCancelled)return;const currentInnerBlocks=getBlocks(clientId),shouldApplyTemplate=0===currentInnerBlocks.length||"all"===templateLock||"contentOnly"===templateLock,hasTemplateChanged=!es6_default()(template,existingTemplateRef.current);if(!shouldApplyTemplate||!hasTemplateChanged)return;existingTemplateRef.current=template;const nextBlocks=(0,blocks_build_module.Nk)(currentInnerBlocks,template);es6_default()(nextBlocks,currentInnerBlocks)||(__unstableMarkNextChangeAsNotPersistent(),replaceInnerBlocks(clientId,nextBlocks,0===currentInnerBlocks.length&&templateInsertUpdatesSelection&&0!==nextBlocks.length&&isBlockSelected(clientId),getSelectedBlocksInitialCaretPosition()))})),()=>{isCancelled=!0}}),[template,templateLock,clientId])}(clientId,template,templateLock,templateInsertUpdatesSelection);const defaultLayoutBlockSupport=(0,blocks_build_module.bI)(name,"layout")||(0,blocks_build_module.bI)(name,"__experimentalLayout")||EMPTY_OBJECT,{allowSizingOnChildren=!1}=defaultLayoutBlockSupport,usedLayout=layout||defaultLayoutBlockSupport,memoedLayout=(0,react.useMemo)((()=>({...defaultLayout,...usedLayout,...allowSizingOnChildren&&{allowSizingOnChildren:!0}})),[defaultLayout,usedLayout,allowSizingOnChildren]),items=(0,jsx_runtime.jsx)(BlockListItemsMemo,{rootClientId:clientId,renderAppender,__experimentalAppenderTagName,layout:memoedLayout,wrapperRef,placeholder});return blockType?.providesContext&&0!==Object.keys(blockType.providesContext).length?(0,jsx_runtime.jsx)(BlockContext,{clientId,children:items}):items}function ControlledInnerBlocks(props){return(0,use_block_sync.A)(props),(0,jsx_runtime.jsx)(UncontrolledInnerBlocks,{...props})}UncontrolledInnerBlocks.displayName="UncontrolledInnerBlocks",ControlledInnerBlocks.displayName="ControlledInnerBlocks";const ForwardedInnerBlocks=(0,react.forwardRef)(((props,ref)=>{const innerBlocksProps=useInnerBlocksProps({ref},props);return(0,jsx_runtime.jsx)("div",{className:"block-editor-inner-blocks",children:(0,jsx_runtime.jsx)("div",{...innerBlocksProps})})}));function useInnerBlocksProps(props={},options={}){const{__unstableDisableLayoutClassNames,__unstableDisableDropZone,dropZoneElement}=options,{clientId,layout=null,__unstableLayoutClassNames:layoutClassNames=""}=(0,block_edit_context.m_)(),selected=(0,use_select.A)((select=>{const{getBlockName,isZoomOut,getTemplateLock,getBlockRootClientId,getBlockEditingMode,getBlockSettings,getSectionRootClientId}=(0,lock_unlock.T)(select(store.M));if(!clientId){const sectionRootClientId=getSectionRootClientId();return{isDropZoneDisabled:isZoomOut()&&""!==sectionRootClientId}}const{hasBlockSupport,getBlockType}=select(blocks_build_module.M_),blockName=getBlockName(clientId),blockEditingMode=getBlockEditingMode(clientId),parentClientId=getBlockRootClientId(clientId),[defaultLayout]=getBlockSettings(clientId,"layout");let _isDropZoneDisabled="disabled"===blockEditingMode;if(isZoomOut()){const sectionRootClientId=getSectionRootClientId();_isDropZoneDisabled=clientId!==sectionRootClientId}return{__experimentalCaptureToolbars:hasBlockSupport(blockName,"__experimentalExposeControlsToChildren",!1),name:blockName,blockType:getBlockType(blockName),parentLock:getTemplateLock(parentClientId),parentClientId,isDropZoneDisabled:_isDropZoneDisabled,defaultLayout}}),[clientId]),{__experimentalCaptureToolbars,name,blockType,parentLock,parentClientId,isDropZoneDisabled,defaultLayout}=selected,blockDropZoneRef=(0,use_block_drop_zone.Ay)({dropZoneElement,rootClientId:clientId,parentClientId}),ref=(0,use_merge_refs.A)([props.ref,__unstableDisableDropZone||isDropZoneDisabled||layout?.isManualPlacement&&window.__experimentalEnableGridInteractivity?null:blockDropZoneRef]),innerBlocksProps={__experimentalCaptureToolbars,layout,name,blockType,parentLock,defaultLayout,...options},InnerBlocks=innerBlocksProps.value&&innerBlocksProps.onChange?ControlledInnerBlocks:UncontrolledInnerBlocks;return{...props,ref,className:(0,dist_clsx.A)(props.className,"block-editor-block-list__layout",__unstableDisableLayoutClassNames?"":layoutClassNames),children:clientId?(0,jsx_runtime.jsx)(InnerBlocks,{...innerBlocksProps,clientId}):(0,jsx_runtime.jsx)(block_list_BlockListItems,{...options})}}useInnerBlocksProps.save=blocks_build_module.v9,ForwardedInnerBlocks.DefaultBlockAppender=default_block_appender_DefaultBlockAppender,ForwardedInnerBlocks.ButtonBlockAppender=button_block_appender_ButtonBlockAppender,ForwardedInnerBlocks.Content=()=>useInnerBlocksProps.save().children;ForwardedInnerBlocks.__docgenInfo={description:"",methods:[],displayName:"ForwardedInnerBlocks"};const KEY_DOWN_ELIGIBLE_KEY_CODES=new Set([keycodes_build_module.UP,keycodes_build_module.NS,keycodes_build_module.PX,keycodes_build_module.M3,keycodes_build_module.Fm,keycodes_build_module.G_]);function useTypingObserver(){const{isTyping}=(0,use_select.A)((select=>{const{isTyping:_isTyping}=select(store.M);return{isTyping:_isTyping()}}),[]),{startTyping,stopTyping}=(0,use_dispatch.A)(store.M),ref1=function useMouseMoveTypingReset(){const isTyping=(0,use_select.A)((select=>select(store.M).isTyping()),[]),{stopTyping}=(0,use_dispatch.A)(store.M);return(0,use_ref_effect.A)((node=>{if(!isTyping)return;const{ownerDocument}=node;let lastClientX,lastClientY;function stopTypingOnMouseMove(event){const{clientX,clientY}=event;lastClientX&&lastClientY&&(lastClientX!==clientX||lastClientY!==clientY)&&stopTyping(),lastClientX=clientX,lastClientY=clientY}return ownerDocument.addEventListener("mousemove",stopTypingOnMouseMove),()=>{ownerDocument.removeEventListener("mousemove",stopTypingOnMouseMove)}}),[isTyping,stopTyping])}(),ref2=(0,use_ref_effect.A)((node=>{const{ownerDocument}=node,{defaultView}=ownerDocument,selection=defaultView.getSelection();if(isTyping){let timerId;function stopTypingOnNonTextField(event){const{target}=event;timerId=defaultView.setTimeout((()=>{(0,is_text_field.A)(target)||stopTyping()}))}function stopTypingOnEscapeKey(event){const{keyCode}=event;keyCode!==keycodes_build_module._f&&keyCode!==keycodes_build_module.wn||stopTyping()}function stopTypingOnSelectionUncollapse(){selection.isCollapsed||stopTyping()}return node.addEventListener("focus",stopTypingOnNonTextField),node.addEventListener("keydown",stopTypingOnEscapeKey),ownerDocument.addEventListener("selectionchange",stopTypingOnSelectionUncollapse),()=>{defaultView.clearTimeout(timerId),node.removeEventListener("focus",stopTypingOnNonTextField),node.removeEventListener("keydown",stopTypingOnEscapeKey),ownerDocument.removeEventListener("selectionchange",stopTypingOnSelectionUncollapse)}}function startTypingInTextField(event){const{type,target}=event;(0,is_text_field.A)(target)&&node.contains(target)&&("keydown"!==type||function isKeyDownEligibleForStartTyping(event){const{keyCode,shiftKey}=event;return!shiftKey&&KEY_DOWN_ELIGIBLE_KEY_CODES.has(keyCode)}(event))&&startTyping()}return node.addEventListener("keypress",startTypingInTextField),node.addEventListener("keydown",startTypingInTextField),()=>{node.removeEventListener("keypress",startTypingInTextField),node.removeEventListener("keydown",startTypingInTextField)}}),[isTyping,startTyping,stopTyping]);return(0,use_merge_refs.A)([ref1,ref2])}function ObserveTyping({children}){return(0,jsx_runtime.jsx)("div",{ref:useTypingObserver(),children})}ObserveTyping.displayName="ObserveTyping";ObserveTyping.__docgenInfo={description:"",methods:[],displayName:"ObserveTyping"};var AnimatePresence=__webpack_require__("./node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs");function ZoomOutSeparator({clientId,rootClientId="",position="top"}){const[isDraggedOver,setIsDraggedOver]=(0,react.useState)(!1),{sectionRootClientId,sectionClientIds,insertionPoint,blockInsertionPointVisible,blockInsertionPoint}=(0,use_select.A)((select=>{const{getInsertionPoint,getBlockOrder,getSectionRootClientId,isBlockInsertionPointVisible,getBlockInsertionPoint}=(0,lock_unlock.T)(select(store.M)),root=getSectionRootClientId();return{sectionRootClientId:root,sectionClientIds:getBlockOrder(root),blockOrder:getBlockOrder(root),insertionPoint:getInsertionPoint(),blockInsertionPoint:getBlockInsertionPoint(),blockInsertionPointVisible:isBlockInsertionPointVisible()}}),[]),isReducedMotion=(0,use_reduced_motion.A)();if(!clientId)return;let isVisible=!1;if(!(rootClientId===sectionRootClientId&&sectionClientIds&&sectionClientIds.includes(clientId)))return null;const hasTopInsertionPoint=0===insertionPoint?.index&&clientId===sectionClientIds[insertionPoint.index],hasBottomInsertionPoint=insertionPoint&&insertionPoint.hasOwnProperty("index")&&clientId===sectionClientIds[insertionPoint.index-1];return"top"===position&&(isVisible=hasTopInsertionPoint||blockInsertionPointVisible&&0===blockInsertionPoint.index&&clientId===sectionClientIds[blockInsertionPoint.index]),"bottom"===position&&(isVisible=hasBottomInsertionPoint||blockInsertionPointVisible&&clientId===sectionClientIds[blockInsertionPoint.index-1]),(0,jsx_runtime.jsx)(AnimatePresence.N,{children:isVisible&&(0,jsx_runtime.jsx)(motion.P.div,{initial:{height:0},animate:{height:"calc(1 * var(--wp-block-editor-iframe-zoom-out-frame-size) / var(--wp-block-editor-iframe-zoom-out-scale)"},exit:{height:0},transition:{type:"tween",duration:isReducedMotion?0:.2,ease:[.6,0,.4,1]},className:(0,dist_clsx.A)("block-editor-block-list__zoom-out-separator",{"is-dragged-over":isDraggedOver}),"data-is-insertion-point":"true",onDragOver:()=>setIsDraggedOver(!0),onDragLeave:()=>setIsDraggedOver(!1),children:(0,jsx_runtime.jsx)(motion.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{delay:-.125}},transition:{ease:"linear",duration:.1,delay:.125},children:(0,i18n_build_module.__)("Drop pattern.")})})})}ZoomOutSeparator.displayName="ZoomOutSeparator",ZoomOutSeparator.__docgenInfo={description:"",methods:[],displayName:"ZoomOutSeparator",props:{rootClientId:{defaultValue:{value:"''",computed:!1},required:!1},position:{defaultValue:{value:"'top'",computed:!1},required:!1}}};const IntersectionObserver=(0,react.createContext)(),pendingBlockVisibilityUpdatesPerRegistry=new WeakMap;function Root({className,...settings}){const isLargeViewport=(0,use_viewport_match.A)("medium"),{isOutlineMode,isFocusMode,temporarilyEditingAsBlocks}=(0,use_select.A)((select=>{const{getSettings,getTemporarilyEditingAsBlocks,isTyping}=(0,lock_unlock.T)(select(store.M)),{outlineMode,focusMode}=getSettings();return{isOutlineMode:outlineMode&&!isTyping(),isFocusMode:focusMode,temporarilyEditingAsBlocks:getTemporarilyEditingAsBlocks()}}),[]),registry=(0,use_registry.A)(),{setBlockVisibility}=(0,use_dispatch.A)(store.M),delayedBlockVisibilityUpdates=(0,use_debounce.A)((0,react.useCallback)((()=>{const updates={};pendingBlockVisibilityUpdatesPerRegistry.get(registry).forEach((([id,isIntersecting])=>{updates[id]=isIntersecting})),setBlockVisibility(updates)}),[registry]),300,{trailing:!0}),intersectionObserver=(0,react.useMemo)((()=>{const{IntersectionObserver:Observer}=window;if(Observer)return new Observer((entries=>{pendingBlockVisibilityUpdatesPerRegistry.get(registry)||pendingBlockVisibilityUpdatesPerRegistry.set(registry,[]);for(const entry of entries){const clientId=entry.target.getAttribute("data-block");pendingBlockVisibilityUpdatesPerRegistry.get(registry).push([clientId,entry.isIntersecting])}delayedBlockVisibilityUpdates()}))}),[]),innerBlocksProps=useInnerBlocksProps({ref:(0,use_merge_refs.A)([useBlockSelectionClearer(),useInBetweenInserter(),useTypingObserver()]),className:(0,dist_clsx.A)("is-root-container",className,{"is-outline-mode":isOutlineMode,"is-focus-mode":isFocusMode&&isLargeViewport})},settings);return(0,jsx_runtime.jsxs)(IntersectionObserver.Provider,{value:intersectionObserver,children:[(0,jsx_runtime.jsx)("div",{...innerBlocksProps}),!!temporarilyEditingAsBlocks&&(0,jsx_runtime.jsx)(StopEditingAsBlocksOnOutsideSelect,{clientId:temporarilyEditingAsBlocks})]})}function StopEditingAsBlocksOnOutsideSelect({clientId}){const{stopEditingAsBlocks}=(0,lock_unlock.T)((0,use_dispatch.A)(store.M)),isBlockOrDescendantSelected=(0,use_select.A)((select=>{const{isBlockSelected,hasSelectedInnerBlock}=select(store.M);return isBlockSelected(clientId)||hasSelectedInnerBlock(clientId,!0)}),[clientId]);return(0,react.useEffect)((()=>{isBlockOrDescendantSelected||stopEditingAsBlocks(clientId)}),[isBlockOrDescendantSelected,clientId,stopEditingAsBlocks]),null}function BlockList(settings){return(0,jsx_runtime.jsx)(block_edit_context.KY,{value:block_edit_context.B8,children:(0,jsx_runtime.jsx)(Root,{...settings})})}Root.displayName="Root",BlockList.displayName="BlockList";const EMPTY_ARRAY=[],EMPTY_SET=new Set;function Items({placeholder,rootClientId,renderAppender:CustomAppender,__experimentalAppenderTagName,layout=defaultLayout}){const hasAppender=!1!==CustomAppender,hasCustomAppender=!!CustomAppender,{order,isZoomOut,selectedBlocks,visibleBlocks,shouldRenderAppender}=(0,use_select.A)((select=>{const{getSettings,getBlockOrder,getSelectedBlockClientId,getSelectedBlockClientIds,__unstableGetVisibleBlocks,getTemplateLock,getBlockEditingMode,isSectionBlock,isZoomOut:_isZoomOut}=(0,lock_unlock.T)(select(store.M)),_order=getBlockOrder(rootClientId);if(getSettings().isPreviewMode)return{order:_order,selectedBlocks:EMPTY_ARRAY,visibleBlocks:EMPTY_SET};const selectedBlockClientId=getSelectedBlockClientId();return{order:_order,selectedBlocks:getSelectedBlockClientIds(),visibleBlocks:__unstableGetVisibleBlocks(),isZoomOut:_isZoomOut(),shouldRenderAppender:!isSectionBlock(rootClientId)&&"disabled"!==getBlockEditingMode(rootClientId)&&!getTemplateLock(rootClientId)&&hasAppender&&!_isZoomOut()&&(hasCustomAppender||rootClientId===selectedBlockClientId||!rootClientId&&!selectedBlockClientId&&!_order.length)}}),[rootClientId,hasAppender,hasCustomAppender]);return(0,jsx_runtime.jsxs)(LayoutProvider,{value:layout,children:[order.map((clientId=>(0,jsx_runtime.jsxs)(context.Ay,{value:!visibleBlocks.has(clientId)&&!selectedBlocks.includes(clientId),children:[isZoomOut&&(0,jsx_runtime.jsx)(ZoomOutSeparator,{clientId,rootClientId,position:"top"}),(0,jsx_runtime.jsx)(block,{rootClientId,clientId}),isZoomOut&&(0,jsx_runtime.jsx)(ZoomOutSeparator,{clientId,rootClientId,position:"bottom"})]},clientId))),order.length<1&&placeholder,shouldRenderAppender&&(0,jsx_runtime.jsx)(BlockListAppender,{tagName:__experimentalAppenderTagName,rootClientId,CustomAppender})]})}function block_list_BlockListItems(props){return(0,jsx_runtime.jsx)(context.Ay,{value:!1,children:(0,jsx_runtime.jsx)(Items,{...props})})}Items.displayName="Items",block_list_BlockListItems.displayName="BlockListItems",BlockList.__docgenInfo={description:"",methods:[],displayName:"BlockList"},block_list_BlockListItems.__docgenInfo={description:"",methods:[],displayName:"BlockListItems"};var react_dom=__webpack_require__("./node_modules/react-dom/index.js");function selector(select){const{isMultiSelecting,getMultiSelectedBlockClientIds,hasMultiSelection,getSelectedBlockClientId,getSelectedBlocksInitialCaretPosition,__unstableIsFullySelected}=select(store.M);return{isMultiSelecting:isMultiSelecting(),multiSelectedBlockClientIds:getMultiSelectedBlockClientIds(),hasMultiSelection:hasMultiSelection(),selectedBlockClientId:getSelectedBlockClientId(),initialPosition:getSelectedBlocksInitialCaretPosition(),isFullSelection:__unstableIsFullySelected()}}function useMultiSelection(){const{initialPosition,isMultiSelecting,multiSelectedBlockClientIds,hasMultiSelection,selectedBlockClientId,isFullSelection}=(0,use_select.A)(selector,[]);return(0,use_ref_effect.A)((node=>{const{ownerDocument}=node,{defaultView}=ownerDocument;if(null==initialPosition)return;if(!hasMultiSelection||isMultiSelecting)return;const{length}=multiSelectedBlockClientIds;length<2||isFullSelection&&(node.contentEditable=!0,node.focus(),defaultView.getSelection().removeAllRanges())}),[hasMultiSelection,isMultiSelecting,multiSelectedBlockClientIds,selectedBlockClientId,initialPosition,isFullSelection])}var is_vertical_edge=__webpack_require__("./packages/dom/build-module/dom/is-vertical-edge.js"),is_horizontal_edge=__webpack_require__("./packages/dom/build-module/dom/is-horizontal-edge.js"),compute_caret_rect=__webpack_require__("./packages/dom/build-module/dom/compute-caret-rect.js"),is_rtl=__webpack_require__("./packages/dom/build-module/dom/is-rtl.js"),place_caret_at_vertical_edge=__webpack_require__("./packages/dom/build-module/dom/place-caret-at-vertical-edge.js");function getClosestTabbable(target,isReverse,containerElement,onlyVertical){let targetRect,focusableNodes=dom_build_module.XC.focusable.find(containerElement);return isReverse&&focusableNodes.reverse(),focusableNodes=focusableNodes.slice(focusableNodes.indexOf(target)+1),onlyVertical&&(targetRect=target.getBoundingClientRect()),focusableNodes.find((function isTabCandidate(node){if(!(node.closest("[inert]")||1===node.children.length&&isInSameBlock(node,node.firstElementChild)&&"true"===node.firstElementChild.getAttribute("contenteditable"))){if(!dom_build_module.XC.tabbable.isTabbableIndex(node))return!1;if(node.isContentEditable&&"true"!==node.contentEditable)return!1;if(onlyVertical){const nodeRect=node.getBoundingClientRect();if(nodeRect.left>=targetRect.right||nodeRect.right<=targetRect.left)return!1}return!0}}))}function useArrowNav(){const{getMultiSelectedBlocksStartClientId,getMultiSelectedBlocksEndClientId,getSettings,hasMultiSelection,__unstableIsFullySelected}=(0,use_select.A)(store.M),{selectBlock}=(0,use_dispatch.A)(store.M);return(0,use_ref_effect.A)((node=>{let verticalRect;function onMouseDown(){verticalRect=null}function onKeyDown(event){if(event.defaultPrevented)return;const{keyCode,target,shiftKey,ctrlKey,altKey,metaKey}=event,isUp=keyCode===keycodes_build_module.UP,isDown=keyCode===keycodes_build_module.PX,isLeft=keyCode===keycodes_build_module.M3,isRight=keyCode===keycodes_build_module.NS,isReverse=isUp||isLeft,isHorizontal=isLeft||isRight,isVertical=isUp||isDown,isNav=isHorizontal||isVertical,hasModifier=shiftKey||ctrlKey||altKey||metaKey,isNavEdge=isVertical?is_vertical_edge.A:is_horizontal_edge.A,{ownerDocument}=node,{defaultView}=ownerDocument;if(!isNav)return;if(hasMultiSelection()){if(shiftKey)return;if(!__unstableIsFullySelected())return;return event.preventDefault(),void(isReverse?selectBlock(getMultiSelectedBlocksStartClientId()):selectBlock(getMultiSelectedBlocksEndClientId(),-1))}if(!function isNavigationCandidate(element,keyCode,hasModifier){const isVertical=keyCode===keycodes_build_module.UP||keyCode===keycodes_build_module.PX,{tagName}=element,elementType=element.getAttribute("type");if(isVertical&&!hasModifier)return"INPUT"!==tagName||!["date","datetime-local","month","number","range","time","week"].includes(elementType);if("INPUT"===tagName)return["button","checkbox","number","color","file","image","radio","reset","submit"].includes(elementType);return"TEXTAREA"!==tagName}(target,keyCode,hasModifier))return;isVertical?verticalRect||(verticalRect=(0,compute_caret_rect.A)(defaultView)):verticalRect=null;const isReverseDir=(0,is_rtl.A)(target)?!isReverse:isReverse,{keepCaretInsideBlock}=getSettings();if(shiftKey)(function isClosestTabbableABlock(target,isReverse){const closestTabbable=getClosestTabbable(target,isReverse,node);return closestTabbable&&getBlockClientId(closestTabbable)})(target,isReverse)&&isNavEdge(target,isReverse)&&(node.contentEditable=!0,node.focus());else if(!isVertical||!(0,is_vertical_edge.A)(target,isReverse)||altKey&&!(0,is_horizontal_edge.A)(target,isReverseDir)||keepCaretInsideBlock){if(isHorizontal&&defaultView.getSelection().isCollapsed&&(0,is_horizontal_edge.A)(target,isReverseDir)&&!keepCaretInsideBlock){const closestTabbable=getClosestTabbable(target,isReverseDir,node);(0,place_caret_at_horizontal_edge.A)(closestTabbable,isReverse),event.preventDefault()}}else{const closestTabbable=getClosestTabbable(target,isReverse,node,!0);closestTabbable&&((0,place_caret_at_vertical_edge.A)(closestTabbable,altKey?!isReverse:isReverse,altKey?void 0:verticalRect),event.preventDefault())}}return node.addEventListener("mousedown",onMouseDown),node.addEventListener("keydown",onKeyDown),()=>{node.removeEventListener("mousedown",onMouseDown),node.removeEventListener("keydown",onKeyDown)}}),[])}var is_entirely_selected=__webpack_require__("./packages/dom/build-module/dom/is-entirely-selected.js"),keyboard_shortcuts_build_module=__webpack_require__("./packages/keyboard-shortcuts/build-module/index.js");function useSelectAll(){const{getBlockOrder,getSelectedBlockClientIds,getBlockRootClientId}=(0,use_select.A)(store.M),{multiSelect,selectBlock}=(0,use_dispatch.A)(store.M),isMatch=(0,keyboard_shortcuts_build_module.ZK)();return(0,use_ref_effect.A)((node=>{function onKeyDown(event){if(!isMatch("core/block-editor/select-all",event))return;const selectedClientIds=getSelectedBlockClientIds();if(selectedClientIds.length<2&&!(0,is_entirely_selected.A)(event.target))return;event.preventDefault();const[firstSelectedClientId]=selectedClientIds,rootClientId=getBlockRootClientId(firstSelectedClientId),blockClientIds=getBlockOrder(rootClientId);selectedClientIds.length!==blockClientIds.length?multiSelect(blockClientIds[0],blockClientIds[blockClientIds.length-1]):rootClientId&&(node.ownerDocument.defaultView.getSelection().removeAllRanges(),selectBlock(rootClientId))}return node.addEventListener("keydown",onKeyDown),()=>{node.removeEventListener("keydown",onKeyDown)}}),[])}function setContentEditableWrapper(node,value){node.contentEditable=value,value&&node.focus()}function useDragSelection(){const{startMultiSelect,stopMultiSelect}=(0,use_dispatch.A)(store.M),{isSelectionEnabled,hasSelectedBlock,isDraggingBlocks,isMultiSelecting}=(0,use_select.A)(store.M);return(0,use_ref_effect.A)((node=>{const{ownerDocument}=node,{defaultView}=ownerDocument;let anchorElement,rafId;function onMouseUp(){stopMultiSelect(),defaultView.removeEventListener("mouseup",onMouseUp),rafId=defaultView.requestAnimationFrame((()=>{if(!hasSelectedBlock())return;setContentEditableWrapper(node,!1);const selection=defaultView.getSelection();if(selection.rangeCount){const range=selection.getRangeAt(0),{commonAncestorContainer}=range,clonedRange=range.cloneRange();anchorElement.contains(commonAncestorContainer)&&(anchorElement.focus(),selection.removeAllRanges(),selection.addRange(clonedRange))}}))}function onMouseLeave({buttons,target,relatedTarget}){target.contains(relatedTarget)||isDraggingBlocks()||1===buttons&&(isMultiSelecting()||node!==target&&"true"===target.getAttribute("contenteditable")&&isSelectionEnabled()&&(anchorElement=target,startMultiSelect(),defaultView.addEventListener("mouseup",onMouseUp),setContentEditableWrapper(node,!0)))}return node.addEventListener("mouseout",onMouseLeave),()=>{node.removeEventListener("mouseout",onMouseLeave),defaultView.removeEventListener("mouseup",onMouseUp),defaultView.cancelAnimationFrame(rafId)}}),[startMultiSelect,stopMultiSelect,isSelectionEnabled,hasSelectedBlock])}var rich_text_build_module=__webpack_require__("./packages/rich-text/build-module/index.js"),is_selection_forward=__webpack_require__("./packages/dom/build-module/dom/is-selection-forward.js");function use_selection_observer_setContentEditableWrapper(node,value){node.contentEditable!==String(value)&&(node.contentEditable=value,value&&node.focus())}function getRichTextElement(node){const element=node.nodeType===node.ELEMENT_NODE?node:node.parentElement;return element?.closest("[data-wp-block-attribute-key]")}function useSelectionObserver(){const{multiSelect,selectBlock,selectionChange}=(0,use_dispatch.A)(store.M),{getBlockParents,getBlockSelectionStart,isMultiSelecting}=(0,use_select.A)(store.M);return(0,use_ref_effect.A)((node=>{const{ownerDocument}=node,{defaultView}=ownerDocument;function onSelectionChange(event){const selection=defaultView.getSelection();if(!selection.rangeCount)return;const startNode=function extractSelectionStartNode(selection){const{anchorNode,anchorOffset}=selection;return anchorNode.nodeType===anchorNode.TEXT_NODE||0===anchorOffset?anchorNode:anchorNode.childNodes[anchorOffset-1]}(selection),endNode=function extractSelectionEndNode(selection){const{focusNode,focusOffset}=selection;return focusNode.nodeType===focusNode.TEXT_NODE||focusOffset===focusNode.childNodes.length?focusNode:0===focusOffset&&(0,is_selection_forward.A)(selection)?null!==(_focusNode$previousSi=focusNode.previousSibling)&&void 0!==_focusNode$previousSi?_focusNode$previousSi:focusNode.parentElement:focusNode.childNodes[focusOffset];var _focusNode$previousSi}(selection);if(!node.contains(startNode)||!node.contains(endNode))return;const isClickShift=event.shiftKey&&"mouseup"===event.type;if(selection.isCollapsed&&!isClickShift){if("true"===node.contentEditable&&!isMultiSelecting()){use_selection_observer_setContentEditableWrapper(node,!1);let element=startNode.nodeType===startNode.ELEMENT_NODE?startNode:startNode.parentElement;element=element?.closest("[contenteditable]"),element?.focus()}return}let startClientId=getBlockClientId(startNode),endClientId=getBlockClientId(endNode);if(isClickShift){const selectedClientId=getBlockSelectionStart(),clickedClientId=getBlockClientId(event.target),focusNodeIsNonSelectable=clickedClientId!==endClientId;(startClientId===endClientId&&selection.isCollapsed||!endClientId||focusNodeIsNonSelectable)&&(endClientId=clickedClientId),startClientId!==selectedClientId&&(startClientId=selectedClientId)}if(void 0===startClientId&&void 0===endClientId)return void use_selection_observer_setContentEditableWrapper(node,!1);if(startClientId===endClientId)isMultiSelecting()?multiSelect(startClientId,startClientId):selectBlock(startClientId);else{const startPath=[...getBlockParents(startClientId),startClientId],endPath=[...getBlockParents(endClientId),endClientId],depth=function findDepth(a,b){let depth=0;for(;a[depth]===b[depth];)depth++;return depth}(startPath,endPath);if(startPath[depth]!==startClientId||endPath[depth]!==endClientId)return void multiSelect(startPath[depth],endPath[depth]);const richTextElementStart=getRichTextElement(startNode),richTextElementEnd=getRichTextElement(endNode);if(richTextElementStart&&richTextElementEnd){var _richTextDataStart$st,_richTextDataEnd$star;const range=selection.getRangeAt(0),richTextDataStart=(0,rich_text_build_module.vt)({element:richTextElementStart,range,__unstableIsEditableTree:!0}),richTextDataEnd=(0,rich_text_build_module.vt)({element:richTextElementEnd,range,__unstableIsEditableTree:!0}),startOffset=null!==(_richTextDataStart$st=richTextDataStart.start)&&void 0!==_richTextDataStart$st?_richTextDataStart$st:richTextDataStart.end,endOffset=null!==(_richTextDataEnd$star=richTextDataEnd.start)&&void 0!==_richTextDataEnd$star?_richTextDataEnd$star:richTextDataEnd.end;selectionChange({start:{clientId:startClientId,attributeKey:richTextElementStart.dataset.wpBlockAttributeKey,offset:startOffset},end:{clientId:endClientId,attributeKey:richTextElementEnd.dataset.wpBlockAttributeKey,offset:endOffset}})}else multiSelect(startClientId,endClientId)}}return ownerDocument.addEventListener("selectionchange",onSelectionChange),defaultView.addEventListener("mouseup",onSelectionChange),()=>{ownerDocument.removeEventListener("selectionchange",onSelectionChange),defaultView.removeEventListener("mouseup",onSelectionChange)}}),[multiSelect,selectBlock,selectionChange,getBlockParents])}function useClickSelection(){const{selectBlock}=(0,use_dispatch.A)(store.M),{isSelectionEnabled,getBlockSelectionStart,hasMultiSelection}=(0,use_select.A)(store.M);return(0,use_ref_effect.A)((node=>{function onMouseDown(event){if(!isSelectionEnabled()||0!==event.button)return;const startClientId=getBlockSelectionStart(),clickedClientId=getBlockClientId(event.target);event.shiftKey?startClientId!==clickedClientId&&(node.contentEditable=!0,node.focus()):hasMultiSelection()&&selectBlock(clickedClientId)}return node.addEventListener("mousedown",onMouseDown),()=>{node.removeEventListener("mousedown",onMouseDown)}}),[selectBlock,isSelectionEnabled,getBlockSelectionStart,hasMultiSelection])}function useInput(){const{__unstableIsFullySelected,getSelectedBlockClientIds,getSelectedBlockClientId,__unstableIsSelectionMergeable,hasMultiSelection,getBlockName,canInsertBlockType,getBlockRootClientId,getSelectionStart,getSelectionEnd,getBlockAttributes}=(0,use_select.A)(store.M),{replaceBlocks,__unstableSplitSelection,removeBlocks,__unstableDeleteSelection,__unstableExpandSelection,__unstableMarkAutomaticChange}=(0,use_dispatch.A)(store.M);return(0,use_ref_effect.A)((node=>{function onBeforeInput(event){"true"===node.contentEditable&&event.preventDefault()}function onKeyDown(event){if(!event.defaultPrevented)if(hasMultiSelection())event.keyCode===keycodes_build_module.Fm?(node.contentEditable=!1,event.preventDefault(),__unstableIsFullySelected()?replaceBlocks(getSelectedBlockClientIds(),(0,blocks_build_module.Wv)((0,blocks_build_module.K$)())):__unstableSplitSelection()):event.keyCode===keycodes_build_module.G_||event.keyCode===keycodes_build_module.SJ?(node.contentEditable=!1,event.preventDefault(),__unstableIsFullySelected()?removeBlocks(getSelectedBlockClientIds()):__unstableIsSelectionMergeable()?__unstableDeleteSelection(event.keyCode===keycodes_build_module.SJ):__unstableExpandSelection()):1!==event.key.length||event.metaKey||event.ctrlKey||(node.contentEditable=!1,__unstableIsSelectionMergeable()?__unstableDeleteSelection(event.keyCode===keycodes_build_module.SJ):(event.preventDefault(),node.ownerDocument.defaultView.getSelection().removeAllRanges()));else if(event.keyCode===keycodes_build_module.Fm){if(event.shiftKey||__unstableIsFullySelected())return;const clientId=getSelectedBlockClientId(),blockName=getBlockName(clientId),selectionStart=getSelectionStart(),selectionEnd=getSelectionEnd();if(selectionStart.attributeKey===selectionEnd.attributeKey){const selectedAttributeValue=getBlockAttributes(clientId)[selectionStart.attributeKey],transforms=(0,blocks_build_module.XD)("from").filter((({type})=>"enter"===type)),transformation=(0,blocks_build_module.wG)(transforms,(item=>item.regExp.test(selectedAttributeValue)));if(transformation)return replaceBlocks(clientId,transformation.transform({content:selectedAttributeValue})),void __unstableMarkAutomaticChange()}if(!(0,blocks_build_module.pN)(blockName,"splitting",!1)&&!event.__deprecatedOnSplit)return;canInsertBlockType(blockName,getBlockRootClientId(clientId))&&(__unstableSplitSelection(),event.preventDefault())}}function onCompositionStart(event){hasMultiSelection()&&(node.contentEditable=!1,__unstableIsSelectionMergeable()?__unstableDeleteSelection():(event.preventDefault(),node.ownerDocument.defaultView.getSelection().removeAllRanges()))}return node.addEventListener("beforeinput",onBeforeInput),node.addEventListener("keydown",onKeyDown),node.addEventListener("compositionstart",onCompositionStart),()=>{node.removeEventListener("beforeinput",onBeforeInput),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("compositionstart",onCompositionStart)}}),[])}var document_has_uncollapsed_selection=__webpack_require__("./packages/dom/build-module/dom/document-has-uncollapsed-selection.js"),document_has_selection=__webpack_require__("./packages/dom/build-module/dom/document-has-selection.js"),notices_build_module=__webpack_require__("./packages/notices/build-module/index.js");var strip_html=__webpack_require__("./packages/dom/build-module/dom/strip-html.js");const requiresWrapperOnCopy=Symbol("requiresWrapperOnCopy");function setClipboardBlocks(event,blocks,registry){let _blocks=blocks;const[firstBlock]=blocks;if(firstBlock){if(registry.select(blocks_build_module.M_).getBlockType(firstBlock.name)[requiresWrapperOnCopy]){const{getBlockRootClientId,getBlockName,getBlockAttributes}=registry.select(store.M),wrapperBlockClientId=getBlockRootClientId(firstBlock.clientId),wrapperBlockName=getBlockName(wrapperBlockClientId);wrapperBlockName&&(_blocks=(0,blocks_build_module.Wv)(wrapperBlockName,getBlockAttributes(wrapperBlockClientId),_blocks))}}const serialized=(0,blocks_build_module.lK)(_blocks);event.clipboardData.setData("text/plain",function toPlainText(html){html=html.replace(/<br>/g,"\n");return(0,strip_html.A)(html).trim().replace(/\n\n+/g,"\n\n")}(serialized)),event.clipboardData.setData("text/html",serialized)}var data_transfer=__webpack_require__("./packages/dom/build-module/data-transfer.js");function useClipboardHandler(){const registry=(0,use_registry.A)(),{getBlocksByClientId,getSelectedBlockClientIds,hasMultiSelection,getSettings,getBlockName,__unstableIsFullySelected,__unstableIsSelectionCollapsed,__unstableIsSelectionMergeable,__unstableGetSelectedBlocksWithPartialSelection,canInsertBlockType,getBlockRootClientId}=(0,use_select.A)(store.M),{flashBlock,removeBlocks,replaceBlocks,__unstableDeleteSelection,__unstableExpandSelection,__unstableSplitSelection}=(0,use_dispatch.A)(store.M),notifyCopy=function useNotifyCopy(){const{getBlockName}=(0,use_select.A)(store.M),{getBlockType}=(0,use_select.A)(blocks_build_module.M_),{createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M);return(0,react.useCallback)(((eventType,selectedBlockClientIds)=>{let notice="";if(1===selectedBlockClientIds.length){const clientId=selectedBlockClientIds[0],title=getBlockType(getBlockName(clientId))?.title;notice="copy"===eventType?(0,i18n_build_module.nv)((0,i18n_build_module.__)('Copied "%s" to clipboard.'),title):(0,i18n_build_module.nv)((0,i18n_build_module.__)('Moved "%s" to clipboard.'),title)}else notice="copy"===eventType?(0,i18n_build_module.nv)((0,i18n_build_module._n)("Copied %d block to clipboard.","Copied %d blocks to clipboard.",selectedBlockClientIds.length),selectedBlockClientIds.length):(0,i18n_build_module.nv)((0,i18n_build_module._n)("Moved %d block to clipboard.","Moved %d blocks to clipboard.",selectedBlockClientIds.length),selectedBlockClientIds.length);createSuccessNotice(notice,{type:"snackbar"})}),[])}();return(0,use_ref_effect.A)((node=>{function handler(event){if(event.defaultPrevented)return;const selectedBlockClientIds=getSelectedBlockClientIds();if(0===selectedBlockClientIds.length)return;if(!hasMultiSelection()){const{target}=event,{ownerDocument}=target;if("copy"===event.type||"cut"===event.type?(0,document_has_uncollapsed_selection.A)(ownerDocument):(0,document_has_selection.A)(ownerDocument)&&!ownerDocument.activeElement.isContentEditable)return}const{activeElement}=event.target.ownerDocument;if(!node.contains(activeElement))return;const isSelectionMergeable=__unstableIsSelectionMergeable(),shouldHandleWholeBlocks=__unstableIsSelectionCollapsed()||__unstableIsFullySelected(),expandSelectionIsNeeded=!shouldHandleWholeBlocks&&!isSelectionMergeable;if("copy"===event.type||"cut"===event.type)if(event.preventDefault(),1===selectedBlockClientIds.length&&flashBlock(selectedBlockClientIds[0]),expandSelectionIsNeeded)__unstableExpandSelection();else{let blocks;if(notifyCopy(event.type,selectedBlockClientIds),shouldHandleWholeBlocks)blocks=getBlocksByClientId(selectedBlockClientIds);else{const[head,tail]=__unstableGetSelectedBlocksWithPartialSelection();blocks=[head,...getBlocksByClientId(selectedBlockClientIds.slice(1,selectedBlockClientIds.length-1)),tail]}setClipboardBlocks(event,blocks,registry)}if("cut"===event.type)shouldHandleWholeBlocks&&!expandSelectionIsNeeded?removeBlocks(selectedBlockClientIds):(event.target.ownerDocument.activeElement.contentEditable=!1,__unstableDeleteSelection());else if("paste"===event.type){const{__experimentalCanUserUseUnfilteredHTML:canUserUseUnfilteredHTML}=getSettings();if("true"===event.clipboardData.getData("rich-text"))return;const{plainText,html,files}=function pasting_getPasteEventData({clipboardData}){let plainText="",html="";try{plainText=clipboardData.getData("text/plain"),html=clipboardData.getData("text/html")}catch(error){return}html=function removeWindowsFragments(html){const startIdx=html.indexOf("\x3c!--StartFragment--\x3e");if(!(startIdx>-1))return html;const endIdx=(html=html.substring(startIdx+20)).indexOf("\x3c!--EndFragment--\x3e");return endIdx>-1&&(html=html.substring(0,endIdx)),html}(html),html=function removeCharsetMetaTag(html){const metaTag="<meta charset='utf-8'>";return html.startsWith(metaTag)?html.slice(22):html}(html);const files=(0,data_transfer.$)(clipboardData);return files.length&&!function shouldDismissPastedFiles(files,html){if(html&&1===files?.length&&0===files[0].type.indexOf("image/")){const IMAGE_TAG=/<\s*img\b/gi;if(1!==html.match(IMAGE_TAG)?.length)return!0;const IMG_WITH_LOCAL_SRC=/<\s*img\b[^>]*\bsrc="file:\/\//i;if(html.match(IMG_WITH_LOCAL_SRC))return!0}return!1}(files,html)?{files}:{html,plainText,files:[]}}(event),isFullySelected=__unstableIsFullySelected();let blocks=[];if(files.length){const fromTransforms=(0,blocks_build_module.XD)("from");blocks=files.reduce(((accumulator,file)=>{const transformation=(0,blocks_build_module.wG)(fromTransforms,(transform=>"files"===transform.type&&transform.isMatch([file])));return transformation&&accumulator.push(transformation.transform([file])),accumulator}),[]).flat()}else blocks=(0,blocks_build_module.Gk)({HTML:html,plainText,mode:isFullySelected?"BLOCKS":"AUTO",canUserUseUnfilteredHTML});if("string"==typeof blocks)return;if(isFullySelected)return replaceBlocks(selectedBlockClientIds,blocks,blocks.length-1,-1),void event.preventDefault();if(!hasMultiSelection()&&!(0,blocks_build_module.pN)(getBlockName(selectedBlockClientIds[0]),"splitting",!1)&&!event.__deprecatedOnSplit)return;const[firstSelectedClientId]=selectedBlockClientIds,rootClientId=getBlockRootClientId(firstSelectedClientId),newBlocks=[];for(const block of blocks)if(canInsertBlockType(block.name,rootClientId))newBlocks.push(block);else{const rootBlockName=getBlockName(rootClientId),switchedBlocks=block.name!==rootBlockName?(0,blocks_build_module.bh)(block,rootBlockName):[block];if(!switchedBlocks)return;for(const switchedBlock of switchedBlocks)for(const innerBlock of switchedBlock.innerBlocks)newBlocks.push(innerBlock)}__unstableSplitSelection(newBlocks),event.preventDefault()}}return node.ownerDocument.addEventListener("copy",handler),node.ownerDocument.addEventListener("cut",handler),node.ownerDocument.addEventListener("paste",handler),()=>{node.ownerDocument.removeEventListener("copy",handler),node.ownerDocument.removeEventListener("cut",handler),node.ownerDocument.removeEventListener("paste",handler)}}),[])}function useWritingFlow(){const[before,ref,after]=function useTabNav(){const container=(0,react.useRef)(),focusCaptureBeforeRef=(0,react.useRef)(),focusCaptureAfterRef=(0,react.useRef)(),{hasMultiSelection,getSelectedBlockClientId,getBlockCount,getBlockOrder,getLastFocus,getSectionRootClientId,isZoomOut}=(0,lock_unlock.T)((0,use_select.A)(store.M)),{setLastFocus}=(0,lock_unlock.T)((0,use_dispatch.A)(store.M)),noCaptureRef=(0,react.useRef)();function onFocusCapture(event){if(noCaptureRef.current)noCaptureRef.current=null;else if(hasMultiSelection())container.current.focus();else if(getSelectedBlockClientId())getLastFocus()?.current?getLastFocus().current.focus():container.current.querySelector(`[data-block="${getSelectedBlockClientId()}"]`).focus();else if(isZoomOut()){const sectionRootClientId=getSectionRootClientId(),sectionBlocks=getBlockOrder(sectionRootClientId);sectionBlocks.length?container.current.querySelector(`[data-block="${sectionBlocks[0]}"]`).focus():container.current.querySelector(`[data-block="${sectionRootClientId}"]`).focus()}else{const canvasElement=container.current.ownerDocument===event.target.ownerDocument?container.current:container.current.ownerDocument.defaultView.frameElement,isBefore=event.target.compareDocumentPosition(canvasElement)&event.target.DOCUMENT_POSITION_FOLLOWING,tabbables=dom_build_module.XC.tabbable.find(container.current);tabbables.length&&(isBefore?tabbables[0]:tabbables[tabbables.length-1]).focus()}}const before=(0,jsx_runtime.jsx)("div",{ref:focusCaptureBeforeRef,tabIndex:"0",onFocus:onFocusCapture}),after=(0,jsx_runtime.jsx)("div",{ref:focusCaptureAfterRef,tabIndex:"0",onFocus:onFocusCapture}),ref=(0,use_ref_effect.A)((node=>{function onKeyDown(event){if(event.defaultPrevented)return;if(event.keyCode!==keycodes_build_module.wn)return;const isShift=event.shiftKey,direction=isShift?"findPrevious":"findNext",nextTabbable=dom_build_module.XC.tabbable[direction](event.target),currentBlock=event.target.closest("[data-block]"),isElementPartOfSelectedBlock=currentBlock&&nextTabbable&&(isInSameBlock(currentBlock,nextTabbable)||isInsideRootBlock(currentBlock,nextTabbable));if((0,is_form_element.A)(nextTabbable)&&isElementPartOfSelectedBlock)return;const next=isShift?focusCaptureBeforeRef:focusCaptureAfterRef;noCaptureRef.current=!0,next.current.focus({preventScroll:!0})}function onFocusOut(event){setLastFocus({...getLastFocus(),current:event.target});const{ownerDocument}=node;event.relatedTarget||ownerDocument.activeElement!==ownerDocument.body||0!==getBlockCount()||node.focus()}function preventScrollOnTab(event){if(event.keyCode!==keycodes_build_module.wn)return;if("region"===event.target?.getAttribute("role"))return;if(container.current===event.target)return;const direction=event.shiftKey?"findPrevious":"findNext",target=dom_build_module.XC.tabbable[direction](event.target);target!==focusCaptureBeforeRef.current&&target!==focusCaptureAfterRef.current||(event.preventDefault(),target.focus({preventScroll:!0}))}const{ownerDocument}=node,{defaultView}=ownerDocument;return defaultView.addEventListener("keydown",preventScrollOnTab),node.addEventListener("keydown",onKeyDown),node.addEventListener("focusout",onFocusOut),()=>{defaultView.removeEventListener("keydown",preventScrollOnTab),node.removeEventListener("keydown",onKeyDown),node.removeEventListener("focusout",onFocusOut)}}),[]);return[before,(0,use_merge_refs.A)([container,ref]),after]}(),hasMultiSelection=(0,use_select.A)((select=>select(store.M).hasMultiSelection()),[]);return[before,(0,use_merge_refs.A)([ref,useClipboardHandler(),useInput(),useDragSelection(),useSelectionObserver(),useClickSelection(),useMultiSelection(),useSelectAll(),useArrowNav(),(0,use_ref_effect.A)((node=>(node.tabIndex=0,node.dataset.hasMultiSelection=hasMultiSelection,hasMultiSelection?(node.setAttribute("aria-label",(0,i18n_build_module.__)("Multiple selected blocks")),()=>{delete node.dataset.hasMultiSelection,node.removeAttribute("aria-label")}):()=>{delete node.dataset.hasMultiSelection})),[hasMultiSelection])]),after]}function WritingFlow({children,...props},forwardedRef){const[before,ref,after]=useWritingFlow();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[before,(0,jsx_runtime.jsx)("div",{...props,ref:(0,use_merge_refs.A)([ref,forwardedRef]),className:(0,dist_clsx.A)(props.className,"block-editor-writing-flow"),children}),after]})}(0,react.forwardRef)(WritingFlow);WritingFlow.__docgenInfo={description:"",methods:[],displayName:"WritingFlow"};let compatibilityStyles=null;function bubbleEvent(event,Constructor,frame){const init={};for(const key in event)init[key]=event[key];if(event instanceof frame.contentDocument.defaultView.MouseEvent){const rect=frame.getBoundingClientRect();init.clientX+=rect.left,init.clientY+=rect.top}const newEvent=new Constructor(event.type,init);init.defaultPrevented&&newEvent.preventDefault();!frame.dispatchEvent(newEvent)&&event.preventDefault()}function useBubbleEvents(iframeDocument){return(0,use_ref_effect.A)((()=>{const{defaultView}=iframeDocument;if(!defaultView)return;const{frameElement}=defaultView,html=iframeDocument.documentElement,eventTypes=["dragover","mousemove"],handlers={};for(const name of eventTypes)handlers[name]=event=>{const constructorName=Object.getPrototypeOf(event).constructor.name;bubbleEvent(event,window[constructorName],frameElement)},html.addEventListener(name,handlers[name]);return()=>{for(const name of eventTypes)html.removeEventListener(name,handlers[name])}}))}function Iframe({contentRef,children,tabIndex=0,scale=1,frameSize=0,readonly,forwardedRef:ref,title=(0,i18n_build_module.__)("Editor canvas"),...props}){const{resolvedAssets,isPreviewMode}=(0,use_select.A)((select=>{const{getSettings}=select(store.M),settings=getSettings();return{resolvedAssets:settings.__unstableResolvedAssets,isPreviewMode:settings.isPreviewMode}}),[]),{styles="",scripts=""}=resolvedAssets,[iframeDocument,setIframeDocument]=(0,react.useState)(),initialContainerWidthRef=(0,react.useRef)(0),[bodyClasses,setBodyClasses]=(0,react.useState)([]),clearerRef=useBlockSelectionClearer(),[before,writingFlowRef,after]=useWritingFlow(),[contentResizeListener,{height:contentHeight}]=(0,use_resize_observer.A)(),[containerResizeListener,{width:containerWidth}]=(0,use_resize_observer.A)(),setRef=(0,use_ref_effect.A)((node=>{let iFrameDocument;function preventFileDropDefault(event){event.preventDefault()}function onLoad(){const{contentDocument,ownerDocument}=node,{documentElement}=contentDocument;iFrameDocument=contentDocument,documentElement.classList.add("block-editor-iframe__html"),clearerRef(documentElement),setBodyClasses(Array.from(ownerDocument.body.classList).filter((name=>name.startsWith("admin-color-")||name.startsWith("post-type-")||"wp-embed-responsive"===name))),contentDocument.dir=ownerDocument.dir;for(const compatStyle of function getCompatibilityStyles(){return compatibilityStyles||(compatibilityStyles=Array.from(document.styleSheets).reduce(((accumulator,styleSheet)=>{try{styleSheet.cssRules}catch(e){return accumulator}const{ownerNode,cssRules}=styleSheet;if(null===ownerNode)return accumulator;if(!cssRules)return accumulator;if(["wp-reset-editor-styles-css","wp-reset-editor-styles-rtl-css"].includes(ownerNode.id))return accumulator;if(!ownerNode.id)return accumulator;if(function matchFromRules(_cssRules){return Array.from(_cssRules).find((({selectorText,conditionText,cssRules:__cssRules})=>conditionText?matchFromRules(__cssRules):selectorText&&(selectorText.includes(".editor-styles-wrapper")||selectorText.includes(".wp-block"))))}(cssRules)){const isInline="STYLE"===ownerNode.tagName;if(isInline){const mainStylesCssId=ownerNode.id.replace("-inline-css","-css"),mainStylesElement=document.getElementById(mainStylesCssId);mainStylesElement&&accumulator.push(mainStylesElement.cloneNode(!0))}if(accumulator.push(ownerNode.cloneNode(!0)),!isInline){const inlineStylesCssId=ownerNode.id.replace("-css","-inline-css"),inlineStylesElement=document.getElementById(inlineStylesCssId);inlineStylesElement&&accumulator.push(inlineStylesElement.cloneNode(!0))}}return accumulator}),[]),compatibilityStyles)}())contentDocument.getElementById(compatStyle.id)||(contentDocument.head.appendChild(compatStyle.cloneNode(!0)),isPreviewMode||console.warn(`${compatStyle.id} was added to the iframe incorrectly. Please use block.json or enqueue_block_assets to add styles to the iframe.`,compatStyle));iFrameDocument.addEventListener("dragover",preventFileDropDefault,!1),iFrameDocument.addEventListener("drop",preventFileDropDefault,!1)}return node._load=()=>{setIframeDocument(node.contentDocument)},node.addEventListener("load",onLoad),()=>{delete node._load,node.removeEventListener("load",onLoad),iFrameDocument?.removeEventListener("dragover",preventFileDropDefault),iFrameDocument?.removeEventListener("drop",preventFileDropDefault)}}),[]),[iframeWindowInnerHeight,setIframeWindowInnerHeight]=(0,react.useState)(),iframeResizeRef=(0,use_ref_effect.A)((node=>{const nodeWindow=node.ownerDocument.defaultView;setIframeWindowInnerHeight(nodeWindow.innerHeight);const onResize=()=>{setIframeWindowInnerHeight(nodeWindow.innerHeight)};return nodeWindow.addEventListener("resize",onResize),()=>{nodeWindow.removeEventListener("resize",onResize)}}),[]),[windowInnerWidth,setWindowInnerWidth]=(0,react.useState)(),windowResizeRef=(0,use_ref_effect.A)((node=>{const nodeWindow=node.ownerDocument.defaultView;setWindowInnerWidth(nodeWindow.innerWidth);const onResize=()=>{setWindowInnerWidth(nodeWindow.innerWidth)};return nodeWindow.addEventListener("resize",onResize),()=>{nodeWindow.removeEventListener("resize",onResize)}}),[]),isZoomedOut=1!==scale;(0,react.useEffect)((()=>{isZoomedOut||(initialContainerWidthRef.current=containerWidth)}),[containerWidth,isZoomedOut]);const scaleContainerWidth=Math.max(initialContainerWidthRef.current,containerWidth),disabledRef=(0,use_disabled.A)({isDisabled:!readonly}),bodyRef=(0,use_merge_refs.A)([useBubbleEvents(iframeDocument),contentRef,clearerRef,writingFlowRef,disabledRef,isZoomedOut?iframeResizeRef:null]),html=`<!doctype html>\n<html>\n\t<head>\n\t\t<meta charset="utf-8">\n\t\t<script>window.frameElement._load()<\/script>\n\t\t<style>\n\t\t\thtml{\n\t\t\t\theight: auto !important;\n\t\t\t\tmin-height: 100%;\n\t\t\t}\n\t\t\t/* Lowest specificity to not override global styles */\n\t\t\t:where(body) {\n\t\t\t\tmargin: 0;\n\t\t\t\t/* Default background color in case zoom out mode background\n\t\t\t\tcolors the html element */\n\t\t\t\tbackground-color: white;\n\t\t\t}\n\t\t</style>\n\t\t${styles}\n\t\t${scripts}\n\t</head>\n\t<body>\n\t\t<script>document.currentScript.parentElement.remove()<\/script>\n\t</body>\n</html>`,[src,cleanup]=(0,react.useMemo)((()=>{const _src=URL.createObjectURL(new window.Blob([html],{type:"text/html"}));return[_src,()=>URL.revokeObjectURL(_src)]}),[html]);(0,react.useEffect)((()=>cleanup),[cleanup]);const zoomOutAnimationClassnameRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{if(!iframeDocument||!isZoomedOut)return;const handleZoomOutAnimationClassname=()=>{clearTimeout(zoomOutAnimationClassnameRef.current),iframeDocument.documentElement.classList.add("zoom-out-animation"),zoomOutAnimationClassnameRef.current=setTimeout((()=>{iframeDocument.documentElement.classList.remove("zoom-out-animation")}),400)};return handleZoomOutAnimationClassname(),iframeDocument.documentElement.classList.add("is-zoomed-out"),()=>{handleZoomOutAnimationClassname(),iframeDocument.documentElement.classList.remove("is-zoomed-out")}}),[iframeDocument,isZoomedOut]),(0,react.useEffect)((()=>{if(!iframeDocument||!isZoomedOut)return;return iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-scale","auto-scaled"===scale?(Math.min(containerWidth,750)-2*parseInt(frameSize))/scaleContainerWidth:scale),iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-frame-size","number"==typeof frameSize?`${frameSize}px`:frameSize),iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-content-height",`${contentHeight}px`),iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-inner-height",`${iframeWindowInnerHeight}px`),iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-container-width",`${containerWidth}px`),iframeDocument.documentElement.style.setProperty("--wp-block-editor-iframe-zoom-out-scale-container-width",`${scaleContainerWidth}px`),()=>{iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-scale"),iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-frame-size"),iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-content-height"),iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-inner-height"),iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-container-width"),iframeDocument.documentElement.style.removeProperty("--wp-block-editor-iframe-zoom-out-scale-container-width")}}),[scale,frameSize,iframeDocument,iframeWindowInnerHeight,contentHeight,containerWidth,windowInnerWidth,isZoomedOut,scaleContainerWidth]);const shouldRenderFocusCaptureElements=tabIndex>=0&&!isPreviewMode,iframe=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[shouldRenderFocusCaptureElements&&before,(0,jsx_runtime.jsx)("iframe",{...props,style:{...props.style,height:props.style?.height,border:0},ref:(0,use_merge_refs.A)([ref,setRef]),tabIndex,src,title,onKeyDown:event=>{if(props.onKeyDown&&props.onKeyDown(event),event.currentTarget.ownerDocument!==event.target.ownerDocument){const{stopPropagation}=event.nativeEvent;event.nativeEvent.stopPropagation=()=>{},event.stopPropagation(),event.nativeEvent.stopPropagation=stopPropagation,bubbleEvent(event,window.KeyboardEvent,event.currentTarget)}},children:iframeDocument&&(0,react_dom.createPortal)((0,jsx_runtime.jsxs)("body",{ref:bodyRef,className:(0,dist_clsx.A)("block-editor-iframe__body","editor-styles-wrapper",...bodyClasses),children:[contentResizeListener,(0,jsx_runtime.jsx)(style_provider.A,{document:iframeDocument,children})]}),iframeDocument.documentElement)}),shouldRenderFocusCaptureElements&&after]});return(0,jsx_runtime.jsxs)("div",{className:"block-editor-iframe__container",ref:windowResizeRef,children:[containerResizeListener,(0,jsx_runtime.jsx)("div",{className:(0,dist_clsx.A)("block-editor-iframe__scale-container",isZoomedOut&&"is-zoomed-out"),style:{"--wp-block-editor-iframe-zoom-out-scale-container-width":isZoomedOut&&`${scaleContainerWidth}px`},children:iframe})]})}function IframeIfReady(props,ref){return(0,use_select.A)((select=>select(store.M).getSettings().__internalIsInitialized),[])?(0,jsx_runtime.jsx)(Iframe,{...props,forwardedRef:ref}):null}Iframe.displayName="Iframe",IframeIfReady.displayName="IframeIfReady";const iframe=(0,react.forwardRef)(IframeIfReady);IframeIfReady.__docgenInfo={description:"",methods:[],displayName:"IframeIfReady"};var colord=__webpack_require__("./node_modules/colord/index.mjs"),names=__webpack_require__("./node_modules/colord/plugins/names.mjs"),a11y=__webpack_require__("./node_modules/colord/plugins/a11y.mjs"),svg=__webpack_require__("./packages/primitives/build-module/svg/index.js"),parsel=__webpack_require__("./node_modules/parsel-js/dist/parsel.js"),postcss=__webpack_require__("./node_modules/postcss/lib/postcss.mjs"),postcss_prefix_selector=__webpack_require__("./node_modules/postcss-prefix-selector/index.js"),postcss_prefix_selector_default=__webpack_require__.n(postcss_prefix_selector),postcss_urlrebase=__webpack_require__("./packages/block-editor/node_modules/postcss-urlrebase/index.js"),postcss_urlrebase_default=__webpack_require__.n(postcss_urlrebase);const cacheByWrapperSelector=new Map,ROOT_SELECTOR_TOKENS=[{type:"type",content:"body"},{type:"type",content:"html"},{type:"pseudo-class",content:":root"},{type:"pseudo-class",content:":where(body)"},{type:"pseudo-class",content:":where(:root)"},{type:"pseudo-class",content:":where(html)"}];function transformStyle({css,ignoredSelectors=[],baseURL},wrapperSelector="",transformOptions){if(!wrapperSelector&&!baseURL)return css;try{var _transformOptions$ign;const excludedSelectors=[...ignoredSelectors,...null!==(_transformOptions$ign=transformOptions?.ignoredSelectors)&&void 0!==_transformOptions$ign?_transformOptions$ign:[],wrapperSelector];return(0,postcss.Ay)([wrapperSelector&&postcss_prefix_selector_default()({prefix:wrapperSelector,transform(prefix,selector,prefixedSelector){if(excludedSelectors.some((excludedSelector=>excludedSelector instanceof RegExp?selector.match(excludedSelector):selector.includes(excludedSelector))))return selector;return ROOT_SELECTOR_TOKENS.some((rootSelector=>selector.startsWith(rootSelector.content)))?function prefixRootSelector(prefix,selector){const tokenized=parsel.qw(selector);let insertionPoint=-1;for(let i=tokenized.findLastIndex((({content,type})=>ROOT_SELECTOR_TOKENS.some((rootSelector=>content===rootSelector.content&&type===rootSelector.type))))+1;i<tokenized.length;i++)if("combinator"===tokenized[i].type){insertionPoint=i;break}const tokenizedPrefix=parsel.qw(prefix);return tokenized.splice(-1===insertionPoint?tokenized.length:insertionPoint,0,{type:"combinator",content:" "},...tokenizedPrefix),parsel.As(tokenized)}(prefix,selector):prefixedSelector}}),baseURL&&postcss_urlrebase_default()({rootUrl:baseURL})].filter(Boolean)).process(css,{}).css}catch(error){return error instanceof postcss.Rf?console.warn("wp.blockEditor.transformStyles Failed to transform CSS.",error.message+"\n"+error.showSourceCode(!1)):console.warn("wp.blockEditor.transformStyles Failed to transform CSS.",error),null}}const transform_styles=(styles,wrapperSelector="",transformOptions)=>{let cache=cacheByWrapperSelector.get(wrapperSelector);return cache||(cache=new WeakMap,cacheByWrapperSelector.set(wrapperSelector,cache)),styles.map((style=>{let css=cache.get(style);return css||(css=transformStyle(style,wrapperSelector,transformOptions),cache.set(style,css)),css}))};function useDarkThemeBodyClassName(styles,scope){return(0,react.useCallback)((node=>{if(!node)return;const{ownerDocument}=node,{defaultView,body}=ownerDocument,canvas=scope?ownerDocument.querySelector(scope):body;let backgroundColor;if(canvas)backgroundColor=defaultView?.getComputedStyle(canvas,null).getPropertyValue("background-color");else{const tempCanvas=ownerDocument.createElement("div");tempCanvas.classList.add("editor-styles-wrapper"),body.appendChild(tempCanvas),backgroundColor=defaultView?.getComputedStyle(tempCanvas,null).getPropertyValue("background-color"),body.removeChild(tempCanvas)}const colordBackgroundColor=(0,colord.Mj)(backgroundColor);colordBackgroundColor.luminance()>.5||0===colordBackgroundColor.alpha()?body.classList.remove("is-dark-theme"):body.classList.add("is-dark-theme")}),[styles,scope])}function editor_styles_EditorStyles({styles,scope,transformOptions}){const overrides=(0,use_select.A)((select=>(0,lock_unlock.T)(select(store.M)).getStyleOverrides()),[]),[transformedStyles,transformedSvgs]=(0,react.useMemo)((()=>{const _styles=Object.values(null!=styles?styles:[]);for(const[id,override]of overrides){const index=_styles.findIndex((({id:_id})=>id===_id)),overrideWithId={...override,id};-1===index?_styles.push(overrideWithId):_styles[index]=overrideWithId}return[transform_styles(_styles.filter((style=>style?.css)),scope,transformOptions),_styles.filter((style=>"svgs"===style.__unstableType)).map((style=>style.assets)).join("")]}),[styles,overrides,scope,transformOptions]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("style",{ref:useDarkThemeBodyClassName(transformedStyles,scope)}),transformedStyles.map(((css,index)=>(0,jsx_runtime.jsx)("style",{children:css},index))),(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 0 0",width:"0",height:"0",role:"none",style:{visibility:"hidden",position:"absolute",left:"-9999px",overflow:"hidden"},dangerouslySetInnerHTML:{__html:transformedSvgs}})]})}(0,colord.X$)([names.A,a11y.A]);const editor_styles=(0,react.memo)(editor_styles_EditorStyles);editor_styles_EditorStyles.__docgenInfo={description:"",methods:[],displayName:"EditorStyles"};const MemoizedBlockList=(0,react.memo)(BlockList),MAX_HEIGHT=2e3,EMPTY_ADDITIONAL_STYLES=[];function ScaledBlockPreview({viewportWidth,containerWidth,minHeight,additionalStyles=EMPTY_ADDITIONAL_STYLES}){viewportWidth||(viewportWidth=containerWidth);const[contentResizeListener,{height:contentHeight}]=(0,use_resize_observer.A)(),{styles}=(0,use_select.A)((select=>({styles:select(store.M).getSettings().styles})),[]),editorStyles=(0,react.useMemo)((()=>styles?[...styles,{css:"body{height:auto;overflow:hidden;border:none;padding:0;}",__unstableType:"presets"},...additionalStyles]:styles),[styles,additionalStyles]),scale=containerWidth/viewportWidth,aspectRatio=contentHeight?containerWidth/(contentHeight*scale):0;return(0,jsx_runtime.jsx)(disabled.A,{className:"block-editor-block-preview__content",style:{transform:`scale(${scale})`,aspectRatio,maxHeight:contentHeight>MAX_HEIGHT?MAX_HEIGHT*scale:void 0,minHeight},children:(0,jsx_runtime.jsxs)(iframe,{contentRef:(0,use_ref_effect.A)((bodyElement=>{const{ownerDocument:{documentElement}}=bodyElement;documentElement.classList.add("block-editor-block-preview__content-iframe"),documentElement.style.position="absolute",documentElement.style.width="100%",bodyElement.style.boxSizing="border-box",bodyElement.style.position="absolute",bodyElement.style.width="100%"}),[]),"aria-hidden":!0,tabIndex:-1,style:{position:"absolute",width:viewportWidth,height:contentHeight,pointerEvents:"none",maxHeight:MAX_HEIGHT,minHeight:0!==scale&&scale<1&&minHeight?minHeight/scale:minHeight},children:[(0,jsx_runtime.jsx)(editor_styles,{styles:editorStyles}),contentResizeListener,(0,jsx_runtime.jsx)(MemoizedBlockList,{renderAppender:!1})]})})}function AutoBlockPreview(props){const[containerResizeListener,{width:containerWidth}]=(0,use_resize_observer.A)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{position:"relative",width:"100%",height:0},children:containerResizeListener}),(0,jsx_runtime.jsx)("div",{className:"block-editor-block-preview__container",children:!!containerWidth&&(0,jsx_runtime.jsx)(ScaledBlockPreview,{...props,containerWidth})})]})}ScaledBlockPreview.displayName="ScaledBlockPreview",AutoBlockPreview.__docgenInfo={description:"",methods:[],displayName:"AutoBlockPreview"};const block_preview_EMPTY_ADDITIONAL_STYLES=[];function BlockPreview({blocks,viewportWidth=1200,minHeight,additionalStyles=block_preview_EMPTY_ADDITIONAL_STYLES,__experimentalMinHeight,__experimentalPadding}){__experimentalMinHeight&&(minHeight=__experimentalMinHeight,(0,build_module.A)("The __experimentalMinHeight prop",{since:"6.2",version:"6.4",alternative:"minHeight"})),__experimentalPadding&&(additionalStyles=[...additionalStyles,{css:`body { padding: ${__experimentalPadding}px; }`}],(0,build_module.A)("The __experimentalPadding prop of BlockPreview",{since:"6.2",version:"6.4",alternative:"additionalStyles"}));const originalSettings=(0,use_select.A)((select=>select(store.M).getSettings()),[]),settings=(0,react.useMemo)((()=>({...originalSettings,focusMode:!1,isPreviewMode:!0})),[originalSettings]),renderedBlocks=(0,react.useMemo)((()=>Array.isArray(blocks)?blocks:[blocks]),[blocks]);return blocks&&0!==blocks.length?(0,jsx_runtime.jsx)(provider.Cg,{value:renderedBlocks,settings,children:(0,jsx_runtime.jsx)(AutoBlockPreview,{viewportWidth,minHeight,additionalStyles})}):null}BlockPreview.displayName="BlockPreview";const block_preview=(0,react.memo)(BlockPreview);BlockPreview.__docgenInfo={description:"",methods:[],displayName:"BlockPreview",props:{viewportWidth:{defaultValue:{value:"1200",computed:!1},required:!1},additionalStyles:{defaultValue:{value:"[]",computed:!1},required:!1}}}},"./packages/block-editor/src/components/block-types-list/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>block_types_list});var build_module=__webpack_require__("./packages/blocks/build-module/index.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react=__webpack_require__("./node_modules/react/index.js"),component=__webpack_require__("./packages/components/build-module/truncate/component.js"),platform=__webpack_require__("./packages/keycodes/build-module/platform.js"),keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js"),block_icon=__webpack_require__("./packages/block-editor/src/components/block-icon/index.js"),composite=__webpack_require__("./packages/components/build-module/composite/index.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function InserterListboxItem({isFirst,as:Component,children,...props},ref){return(0,jsx_runtime.jsx)(composite.e.Item,{ref,role:"option",accessibleWhenDisabled:!0,...props,render:htmlProps=>{const propsWithTabIndex={...htmlProps,tabIndex:isFirst?0:htmlProps.tabIndex};return Component?(0,jsx_runtime.jsx)(Component,{...propsWithTabIndex,children}):"function"==typeof children?children(propsWithTabIndex):(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,...propsWithTabIndex,children})}})}InserterListboxItem.displayName="InserterListboxItem";const inserter_listbox_item=(0,react.forwardRef)(InserterListboxItem);InserterListboxItem.__docgenInfo={description:"",methods:[],displayName:"InserterListboxItem"};var inserter_draggable_blocks=__webpack_require__("./packages/block-editor/src/components/inserter-draggable-blocks/index.js");function InserterListItem({className,isFirst,item,onSelect,onHover,isDraggable,...props}){const isDraggingRef=(0,react.useRef)(!1),itemIconStyle=item.icon?{backgroundColor:item.icon.background,color:item.icon.foreground}:{},blocks=(0,react.useMemo)((()=>[(0,build_module.Wv)(item.name,item.initialAttributes,(0,build_module.to)(item.innerBlocks))]),[item.name,item.initialAttributes,item.innerBlocks]),isSynced=(0,build_module.tk)(item)&&"unsynced"!==item.syncStatus||(0,build_module.gc)(item);return(0,jsx_runtime.jsx)(inserter_draggable_blocks.A,{isEnabled:isDraggable&&!item.isDisabled,blocks,icon:item.icon,children:({draggable,onDragStart,onDragEnd})=>(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("block-editor-block-types-list__list-item",{"is-synced":isSynced}),draggable,onDragStart:event=>{isDraggingRef.current=!0,onDragStart&&(onHover(null),onDragStart(event))},onDragEnd:event=>{isDraggingRef.current=!1,onDragEnd&&onDragEnd(event)},children:(0,jsx_runtime.jsxs)(inserter_listbox_item,{isFirst,className:(0,clsx.A)("block-editor-block-types-list__item",className),disabled:item.isDisabled,onClick:event=>{event.preventDefault(),onSelect(item,(0,platform.H)()?event.metaKey:event.ctrlKey),onHover(null)},onKeyDown:event=>{const{keyCode}=event;keyCode===keycodes_build_module.Fm&&(event.preventDefault(),onSelect(item,(0,platform.H)()?event.metaKey:event.ctrlKey),onHover(null))},onMouseEnter:()=>{isDraggingRef.current||onHover(item)},onMouseLeave:()=>onHover(null),...props,children:[(0,jsx_runtime.jsx)("span",{className:"block-editor-block-types-list__item-icon",style:itemIconStyle,children:(0,jsx_runtime.jsx)(block_icon.A,{icon:item.icon,showColors:!0})}),(0,jsx_runtime.jsx)("span",{className:"block-editor-block-types-list__item-title",children:(0,jsx_runtime.jsx)(component.A,{numberOfLines:3,children:item.title})})]})})})}InserterListItem.displayName="InserterListItem";const inserter_list_item=(0,react.memo)(InserterListItem);InserterListItem.__docgenInfo={description:"",methods:[],displayName:"InserterListItem"};var i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js");function InserterListboxGroup(props,ref){const[shouldSpeak,setShouldSpeak]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{shouldSpeak&&(0,a11y_build_module.L)((0,i18n_build_module.__)("Use left and right arrow keys to move through blocks"))}),[shouldSpeak]),(0,jsx_runtime.jsx)("div",{ref,role:"listbox","aria-orientation":"horizontal",onFocus:()=>{setShouldSpeak(!0)},onBlur:event=>{!event.currentTarget.contains(event.relatedTarget)&&setShouldSpeak(!1)},...props})}InserterListboxGroup.displayName="InserterListboxGroup";const group=(0,react.forwardRef)(InserterListboxGroup);function InserterListboxRow(props,ref){return(0,jsx_runtime.jsx)(composite.e.Group,{role:"presentation",ref,...props})}InserterListboxGroup.__docgenInfo={description:"",methods:[],displayName:"InserterListboxGroup"},InserterListboxRow.displayName="InserterListboxRow";const inserter_listbox_row=(0,react.forwardRef)(InserterListboxRow);function chunk(array,size){const chunks=[];for(let i=0,j=array.length;i<j;i+=size)chunks.push(array.slice(i,i+size));return chunks}function BlockTypesList({items=[],onSelect,onHover=()=>{},children,label,isDraggable=!0}){const className="block-editor-block-types-list",listId=(0,use_instance_id.A)(BlockTypesList,className);return(0,jsx_runtime.jsxs)(group,{className,"aria-label":label,children:[chunk(items,3).map(((row,i)=>(0,jsx_runtime.jsx)(inserter_listbox_row,{children:row.map(((item,j)=>(0,jsx_runtime.jsx)(inserter_list_item,{item,className:(0,build_module.HK)(item.id),onSelect,onHover,isDraggable:isDraggable&&!item.isDisabled,isFirst:0===i&&0===j,rowId:`${listId}-${i}`},item.id)))},i))),children]})}InserterListboxRow.__docgenInfo={description:"",methods:[],displayName:"InserterListboxRow"},BlockTypesList.displayName="BlockTypesList";const block_types_list=BlockTypesList;BlockTypesList.__docgenInfo={description:"",methods:[],displayName:"BlockTypesList",props:{items:{defaultValue:{value:"[]",computed:!1},required:!1},onHover:{defaultValue:{value:"() => {}",computed:!1},required:!1},isDraggable:{defaultValue:{value:"true",computed:!1},required:!1}}}},"./packages/block-editor/src/components/inserter-draggable-blocks/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/build-module/draggable/index.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),_block_draggable_draggable_chip__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/block-editor/src/components/block-draggable/draggable-chip.js"),_inserter_block_patterns_tab_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/block-editor/src/components/inserter/block-patterns-tab/utils.js"),_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/store/index.js"),_lock_unlock__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/block-editor/src/lock-unlock.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const InserterDraggableBlocks=({isEnabled,blocks,icon,children,pattern})=>{const transferData={type:"inserter",blocks},blockTypeIcon=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_3__.A)((select=>{const{getBlockType}=select(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.M_);return 1===blocks.length&&getBlockType(blocks[0].name)?.icon}),[blocks]),{startDragging,stopDragging}=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_4__.T)((0,_wordpress_data__WEBPACK_IMPORTED_MODULE_5__.A)(_store__WEBPACK_IMPORTED_MODULE_1__.M));return isEnabled?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_6__.A,{__experimentalTransferDataType:"wp-blocks",transferData,onDragStart:event=>{startDragging();const parsedBlocks=pattern?.type===_inserter_block_patterns_tab_utils__WEBPACK_IMPORTED_MODULE_7__.KG.user&&"unsynced"!==pattern?.syncStatus?[(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Wv)("core/block",{ref:pattern.id})]:blocks;event.dataTransfer.setData("text/html",(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.lK)(parsedBlocks))},onDragEnd:()=>{stopDragging()},__experimentalDragComponent:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_block_draggable_draggable_chip__WEBPACK_IMPORTED_MODULE_8__.A,{count:blocks.length,icon:icon||!pattern&&blockTypeIcon,isPattern:!!pattern}),children:({onDraggableStart,onDraggableEnd})=>children({draggable:!0,onDragStart:onDraggableStart,onDragEnd:onDraggableEnd})}):children({draggable:!1,onDragStart:void 0,onDragEnd:void 0})};InserterDraggableBlocks.displayName="InserterDraggableBlocks";const __WEBPACK_DEFAULT_EXPORT__=InserterDraggableBlocks;InserterDraggableBlocks.__docgenInfo={description:"",methods:[],displayName:"InserterDraggableBlocks"}},"./packages/block-editor/src/components/inserter-listbox/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/build-module/composite/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function InserterListbox({children}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.e,{focusShift:!0,focusWrap:"horizontal",render:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{}),children})}InserterListbox.displayName="InserterListbox";const __WEBPACK_DEFAULT_EXPORT__=InserterListbox;InserterListbox.__docgenInfo={description:"",methods:[],displayName:"InserterListbox"}},"./packages/block-editor/src/components/inserter/hooks/use-block-types-state.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_wordpress_notices__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/notices/build-module/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/i18n/build-module/index.js"),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/store/index.js"),_store_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/block-editor/src/store/utils.js"),_lock_unlock__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/block-editor/src/lock-unlock.js");const __WEBPACK_DEFAULT_EXPORT__=(rootClientId,onInsert,isQuick)=>{const options=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useMemo)((()=>({[_store_utils__WEBPACK_IMPORTED_MODULE_5__.s4]:!!isQuick})),[isQuick]),[items]=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_6__.A)((select=>[select(_store__WEBPACK_IMPORTED_MODULE_3__.M).getInserterItems(rootClientId,options)]),[rootClientId,options]),{getClosestAllowedInsertionPoint}=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_7__.T)((0,_wordpress_data__WEBPACK_IMPORTED_MODULE_6__.A)(_store__WEBPACK_IMPORTED_MODULE_3__.M)),{createErrorNotice}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.A)(_wordpress_notices__WEBPACK_IMPORTED_MODULE_1__.M),[categories,collections]=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_6__.A)((select=>{const{getCategories,getCollections}=select(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.M_);return[getCategories(),getCollections()]}),[]);return[items,categories,collections,(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useCallback)((({name,initialAttributes,innerBlocks,syncStatus,content},shouldFocusBlock)=>{const destinationClientId=getClosestAllowedInsertionPoint(name,rootClientId);if(null===destinationClientId){var _getBlockType$title;const title=null!==(_getBlockType$title=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.E7)(name)?.title)&&void 0!==_getBlockType$title?_getBlockType$title:name;return void createErrorNotice((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_2__.__)('Block "%s" can\'t be inserted.'),title),{type:"snackbar",id:"inserter-notice"})}const insertedBlock="unsynced"===syncStatus?(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.qg)(content,{__unstableSkipMigrationLogs:!0}):(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Wv)(name,initialAttributes,(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.to)(innerBlocks));onInsert(insertedBlock,void 0,shouldFocusBlock,destinationClientId)}),[onInsert,getClosestAllowedInsertionPoint,rootClientId])]}},"./packages/block-editor/src/components/inserter/hooks/use-insertion-point.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_a11y__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/a11y/build-module/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/index.js"),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/store/index.js"),_lock_unlock__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/block-editor/src/lock-unlock.js");function getIndex({destinationRootClientId,destinationIndex,rootClientId,registry}){if(rootClientId===destinationRootClientId)return destinationIndex;const parents=["",...registry.select(_store__WEBPACK_IMPORTED_MODULE_3__.M).getBlockParents(destinationRootClientId),destinationRootClientId],parentIndex=parents.indexOf(rootClientId);return-1!==parentIndex?registry.select(_store__WEBPACK_IMPORTED_MODULE_3__.M).getBlockIndex(parents[parentIndex+1])+1:registry.select(_store__WEBPACK_IMPORTED_MODULE_3__.M).getBlockOrder(rootClientId).length}const __WEBPACK_DEFAULT_EXPORT__=function useInsertionPoint({rootClientId="",insertionIndex,clientId,isAppender,onSelect,shouldFocusBlock=!0,selectBlockOnInsert=!0}){const registry=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_4__.A)(),{getSelectedBlock,getClosestAllowedInsertionPoint,isBlockInsertionPointVisible}=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_5__.T)((0,_wordpress_data__WEBPACK_IMPORTED_MODULE_6__.A)(_store__WEBPACK_IMPORTED_MODULE_3__.M)),{destinationRootClientId,destinationIndex}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_6__.A)((select=>{const{getSelectedBlockClientId,getBlockRootClientId,getBlockIndex,getBlockOrder,getInsertionPoint}=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_5__.T)(select(_store__WEBPACK_IMPORTED_MODULE_3__.M)),selectedBlockClientId=getSelectedBlockClientId();let _destinationIndex,_destinationRootClientId=rootClientId;const insertionPoint=getInsertionPoint();return void 0!==insertionIndex?_destinationIndex=insertionIndex:insertionPoint&&insertionPoint.hasOwnProperty("index")?(_destinationRootClientId=insertionPoint?.rootClientId?insertionPoint.rootClientId:rootClientId,_destinationIndex=insertionPoint.index):clientId?_destinationIndex=getBlockIndex(clientId):!isAppender&&selectedBlockClientId?(_destinationRootClientId=getBlockRootClientId(selectedBlockClientId),_destinationIndex=getBlockIndex(selectedBlockClientId)+1):_destinationIndex=getBlockOrder(_destinationRootClientId).length,{destinationRootClientId:_destinationRootClientId,destinationIndex:_destinationIndex}}),[rootClientId,insertionIndex,clientId,isAppender]),{replaceBlocks,insertBlocks,showInsertionPoint,hideInsertionPoint,setLastFocus}=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_5__.T)((0,_wordpress_data__WEBPACK_IMPORTED_MODULE_7__.A)(_store__WEBPACK_IMPORTED_MODULE_3__.M)),onInsertBlocks=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_8__.useCallback)(((blocks,meta,shouldForceFocusBlock=!1,_rootClientId)=>{(shouldForceFocusBlock||shouldFocusBlock||selectBlockOnInsert)&&setLastFocus(null);const selectedBlock=getSelectedBlock();!isAppender&&selectedBlock&&(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Xw)(selectedBlock)?replaceBlocks(selectedBlock.clientId,blocks,null,shouldFocusBlock||shouldForceFocusBlock?0:null,meta):insertBlocks(blocks,isAppender||void 0===_rootClientId?destinationIndex:getIndex({destinationRootClientId,destinationIndex,rootClientId:_rootClientId,registry}),isAppender||void 0===_rootClientId?destinationRootClientId:_rootClientId,selectBlockOnInsert,shouldFocusBlock||shouldForceFocusBlock?0:null,meta);const blockLength=Array.isArray(blocks)?blocks.length:1,message=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__._n)("%d block added.","%d blocks added.",blockLength),blockLength);(0,_wordpress_a11y__WEBPACK_IMPORTED_MODULE_2__.L)(message),onSelect&&onSelect(blocks)}),[isAppender,getSelectedBlock,replaceBlocks,insertBlocks,destinationRootClientId,destinationIndex,onSelect,shouldFocusBlock,selectBlockOnInsert]),onToggleInsertionPoint=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_8__.useCallback)((item=>{if(item&&!isBlockInsertionPointVisible()){const allowedDestinationRootClientId=getClosestAllowedInsertionPoint(item.name,destinationRootClientId);null!==allowedDestinationRootClientId&&showInsertionPoint(allowedDestinationRootClientId,getIndex({destinationRootClientId,destinationIndex,rootClientId:allowedDestinationRootClientId,registry}))}else hideInsertionPoint()}),[getClosestAllowedInsertionPoint,isBlockInsertionPointVisible,showInsertionPoint,hideInsertionPoint,destinationRootClientId,destinationIndex]);return[destinationRootClientId,onInsertBlocks,onToggleInsertionPoint]}},"./packages/block-editor/src/components/inserter/hooks/use-patterns-state.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/blocks/build-module/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_wordpress_data__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_notices__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/notices/build-module/index.js"),_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/store/index.js"),_lock_unlock__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/block-editor/src/lock-unlock.js"),_block_patterns_tab_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/block-editor/src/components/inserter/block-patterns-tab/utils.js"),_store_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/block-editor/src/store/utils.js");const __WEBPACK_DEFAULT_EXPORT__=(onInsert,rootClientId,selectedCategory,isQuick)=>{const options=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useMemo)((()=>({[_store_utils__WEBPACK_IMPORTED_MODULE_5__.s4]:!!isQuick})),[isQuick]),{patternCategories,patterns,userPatternCategories}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_6__.A)((select=>{const{getSettings,__experimentalGetAllowedPatterns}=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_7__.T)(select(_store__WEBPACK_IMPORTED_MODULE_3__.M)),{__experimentalUserPatternCategories,__experimentalBlockPatternCategories}=getSettings();return{patterns:__experimentalGetAllowedPatterns(rootClientId,options),userPatternCategories:__experimentalUserPatternCategories,patternCategories:__experimentalBlockPatternCategories}}),[rootClientId,options]),{getClosestAllowedInsertionPointForPattern}=(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_7__.T)((0,_wordpress_data__WEBPACK_IMPORTED_MODULE_6__.A)(_store__WEBPACK_IMPORTED_MODULE_3__.M)),allCategories=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useMemo)((()=>{const categories=[...patternCategories];return userPatternCategories?.forEach((userCategory=>{categories.find((existingCategory=>existingCategory.name===userCategory.name))||categories.push(userCategory)})),categories}),[patternCategories,userPatternCategories]),{createSuccessNotice}=(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_8__.A)(_wordpress_notices__WEBPACK_IMPORTED_MODULE_2__.M);return[patterns,allCategories,(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.useCallback)(((pattern,blocks)=>{const destinationRootClientId=isQuick?rootClientId:getClosestAllowedInsertionPointForPattern(pattern,rootClientId);if(null===destinationRootClientId)return;const patternBlocks=pattern.type===_block_patterns_tab_utils__WEBPACK_IMPORTED_MODULE_9__.KG.user&&"unsynced"!==pattern.syncStatus?[(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.Wv)("core/block",{ref:pattern.id})]:blocks;onInsert((null!=patternBlocks?patternBlocks:[]).map((block=>{const clonedBlock=(0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_0__.JB)(block);return clonedBlock.attributes.metadata?.categories?.includes(selectedCategory)&&(clonedBlock.attributes.metadata.categories=[selectedCategory]),clonedBlock})),pattern.name,!1,destinationRootClientId),createSuccessNotice((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.nv)((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)('Block pattern "%s" inserted.'),pattern.title),{type:"snackbar",id:"inserter-notice"})}),[createSuccessNotice,onInsert,selectedCategory,rootClientId,getClosestAllowedInsertionPointForPattern,isQuick])]}},"./packages/block-editor/src/components/inserter/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>inserter});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),build_module=__webpack_require__("./packages/a11y/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),dropdown=__webpack_require__("./packages/components/build-module/dropdown/index.js"),react=__webpack_require__("./node_modules/react/index.js"),with_select=__webpack_require__("./packages/data/build-module/components/with-select/index.js"),with_dispatch=__webpack_require__("./packages/data/build-module/components/with-dispatch/index.js"),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),if_condition=__webpack_require__("./packages/compose/build-module/higher-order/if-condition/index.js"),blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js"),menu=__webpack_require__("./packages/block-editor/src/components/inserter/menu.js"),search_control=__webpack_require__("./packages/components/build-module/search-control/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),search_results=__webpack_require__("./packages/block-editor/src/components/inserter/search-results.js"),use_insertion_point=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-insertion-point.js"),use_patterns_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-patterns-state.js"),use_block_types_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-block-types-state.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function QuickInserter({onSelect,rootClientId,clientId,isAppender,prioritizePatterns,selectBlockOnInsert,hasSearch=!0}){const[filterValue,setFilterValue]=(0,react.useState)(""),[destinationRootClientId,onInsertBlocks]=(0,use_insertion_point.A)({onSelect,rootClientId,clientId,isAppender,selectBlockOnInsert}),[blockTypes]=(0,use_block_types_state.A)(destinationRootClientId,onInsertBlocks,!0),[patterns]=(0,use_patterns_state.A)(onInsertBlocks,destinationRootClientId,void 0,!0),{setInserterIsOpened,insertionIndex}=(0,use_select.A)((select=>{const{getSettings,getBlockIndex,getBlockCount}=select(store.M),settings=getSettings(),index=getBlockIndex(clientId),blockCount=getBlockCount();return{setInserterIsOpened:settings.__experimentalSetIsInserterOpened,insertionIndex:-1===index?blockCount:index}}),[clientId]),showPatterns=patterns.length&&(!!filterValue||prioritizePatterns),showSearch=hasSearch&&(showPatterns&&patterns.length>6||blockTypes.length>6);(0,react.useEffect)((()=>{setInserterIsOpened&&setInserterIsOpened(!1)}),[setInserterIsOpened]);let maxBlockPatterns=0;return showPatterns&&(maxBlockPatterns=prioritizePatterns?4:2),(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("block-editor-inserter__quick-inserter",{"has-search":showSearch,"has-expand":setInserterIsOpened}),children:[showSearch&&(0,jsx_runtime.jsx)(search_control.A,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",value:filterValue,onChange:value=>{setFilterValue(value)},label:(0,i18n_build_module.__)("Search"),placeholder:(0,i18n_build_module.__)("Search")}),(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-results",children:(0,jsx_runtime.jsx)(search_results.A,{filterValue,onSelect,rootClientId,clientId,isAppender,maxBlockPatterns,maxBlockTypes:6,isDraggable:!1,prioritizePatterns,selectBlockOnInsert,isQuick:!0})}),setInserterIsOpened&&(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"block-editor-inserter__quick-inserter-expand",onClick:()=>{setInserterIsOpened({filterValue,onSelect,rootClientId,insertionIndex})},"aria-label":(0,i18n_build_module.__)("Browse all. This will open the main inserter panel in the editor toolbar."),children:(0,i18n_build_module.__)("Browse all")})]})}QuickInserter.displayName="QuickInserter",QuickInserter.__docgenInfo={description:"",methods:[],displayName:"QuickInserter",props:{hasSearch:{defaultValue:{value:"true",computed:!1},required:!1}}};const defaultRenderToggle=({onToggle,disabled,isOpen,blockTitle,hasSingleBlockType,toggleProps={},prioritizePatterns})=>{const{as:Wrapper=build_module_button.Ay,label:labelProp,onClick,...rest}=toggleProps;let label=labelProp;return!label&&hasSingleBlockType?label=(0,i18n_build_module.nv)((0,i18n_build_module._x)("Add %s","directly add the only allowed block"),blockTitle):!label&&prioritizePatterns?label=(0,i18n_build_module.__)("Add pattern"):label||(label=(0,i18n_build_module._x)("Add block","Generic label for block inserter button")),(0,jsx_runtime.jsx)(Wrapper,{icon:plus.A,label,tooltipPosition:"bottom",onClick:function handleClick(event){onToggle&&onToggle(event),onClick&&onClick(event)},className:"block-editor-inserter__toggle","aria-haspopup":!hasSingleBlockType&&"true","aria-expanded":!hasSingleBlockType&&isOpen,disabled,...rest})};defaultRenderToggle.displayName="defaultRenderToggle";class Inserter extends react.Component{constructor(){super(...arguments),this.onToggle=this.onToggle.bind(this),this.renderToggle=this.renderToggle.bind(this),this.renderContent=this.renderContent.bind(this)}onToggle(isOpen){const{onToggle}=this.props;onToggle&&onToggle(isOpen)}renderToggle({onToggle,isOpen}){const{disabled,blockTitle,hasSingleBlockType,directInsertBlock,toggleProps,hasItems,renderToggle=defaultRenderToggle,prioritizePatterns}=this.props;return renderToggle({onToggle,isOpen,disabled:disabled||!hasItems,blockTitle,hasSingleBlockType,directInsertBlock,toggleProps,prioritizePatterns})}renderContent({onClose}){const{rootClientId,clientId,isAppender,showInserterHelpPanel,__experimentalIsQuick:isQuick,prioritizePatterns,onSelectOrClose,selectBlockOnInsert}=this.props;return isQuick?(0,jsx_runtime.jsx)(QuickInserter,{onSelect:blocks=>{const firstBlock=Array.isArray(blocks)&&blocks?.length?blocks[0]:blocks;onSelectOrClose&&"function"==typeof onSelectOrClose&&onSelectOrClose(firstBlock),onClose()},rootClientId,clientId,isAppender,prioritizePatterns,selectBlockOnInsert}):(0,jsx_runtime.jsx)(menu.A,{onSelect:()=>{onClose()},rootClientId,clientId,isAppender,showInserterHelpPanel})}render(){const{position,hasSingleBlockType,directInsertBlock,insertOnlyAllowedBlock,__experimentalIsQuick:isQuick,onSelectOrClose}=this.props;return hasSingleBlockType||directInsertBlock?this.renderToggle({onToggle:insertOnlyAllowedBlock}):(0,jsx_runtime.jsx)(dropdown.A,{className:"block-editor-inserter",contentClassName:(0,clsx.A)("block-editor-inserter__popover",{"is-quick":isQuick}),popoverProps:{position,shift:!0},onToggle:this.onToggle,expandOnMobile:!0,headerTitle:(0,i18n_build_module.__)("Add a block"),renderToggle:this.renderToggle,renderContent:this.renderContent,onClose:onSelectOrClose})}}Inserter.displayName="Inserter";const inserter=(0,compose.A)([(0,with_select.A)(((select,{clientId,rootClientId,shouldDirectInsert=!0})=>{const{getBlockRootClientId,hasInserterItems,getAllowedBlocks,getDirectInsertBlock,getSettings}=select(store.M),{getBlockVariations}=select(blocks_build_module.M_),allowedBlocks=getAllowedBlocks(rootClientId=rootClientId||getBlockRootClientId(clientId)||void 0),directInsertBlock=shouldDirectInsert&&getDirectInsertBlock(rootClientId),settings=getSettings(),hasSingleBlockType=1===allowedBlocks?.length&&0===getBlockVariations(allowedBlocks[0].name,"inserter")?.length;let allowedBlockType=!1;return hasSingleBlockType&&(allowedBlockType=allowedBlocks[0]),{hasItems:hasInserterItems(rootClientId),hasSingleBlockType,blockTitle:allowedBlockType?allowedBlockType.title:"",allowedBlockType,directInsertBlock,rootClientId,prioritizePatterns:settings.__experimentalPreferPatternsOnRoot&&!rootClientId}})),(0,with_dispatch.A)(((dispatch,ownProps,{select})=>({insertOnlyAllowedBlock(){const{rootClientId,clientId,isAppender,hasSingleBlockType,allowedBlockType,directInsertBlock,onSelectOrClose,selectBlockOnInsert}=ownProps;if(!hasSingleBlockType&&!directInsertBlock)return;const{insertBlock}=dispatch(store.M);let blockToInsert;if(directInsertBlock){const newAttributes=function getAdjacentBlockAttributes(attributesToCopy){const{getBlock,getPreviousBlockClientId}=select(store.M);if(!attributesToCopy||!clientId&&!rootClientId)return{};const result={};let adjacentAttributes={};if(clientId){const currentBlock=getBlock(clientId),previousBlock=getBlock(getPreviousBlockClientId(clientId));currentBlock?.name===previousBlock?.name&&(adjacentAttributes=previousBlock?.attributes||{})}else{const parentBlock=getBlock(rootClientId);if(parentBlock?.innerBlocks?.length){const lastInnerBlock=parentBlock.innerBlocks[parentBlock.innerBlocks.length-1];directInsertBlock&&directInsertBlock?.name===lastInnerBlock.name&&(adjacentAttributes=lastInnerBlock.attributes)}}return attributesToCopy.forEach((attribute=>{adjacentAttributes.hasOwnProperty(attribute)&&(result[attribute]=adjacentAttributes[attribute])})),result}(directInsertBlock.attributesToCopy);blockToInsert=(0,blocks_build_module.Wv)(directInsertBlock.name,{...directInsertBlock.attributes||{},...newAttributes})}else blockToInsert=(0,blocks_build_module.Wv)(allowedBlockType.name);insertBlock(blockToInsert,function getInsertionIndex(){const{getBlockIndex,getBlockSelectionEnd,getBlockOrder,getBlockRootClientId}=select(store.M);if(clientId)return getBlockIndex(clientId);const end=getBlockSelectionEnd();return!isAppender&&end&&getBlockRootClientId(end)===rootClientId?getBlockIndex(end)+1:getBlockOrder(rootClientId).length}(),rootClientId,selectBlockOnInsert),onSelectOrClose&&onSelectOrClose({clientId:blockToInsert?.clientId});const message=(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s block added"),allowedBlockType.title);(0,build_module.L)(message)}}))),(0,if_condition.A)((({hasItems,isAppender,rootClientId,clientId})=>hasItems||!isAppender&&!rootClientId&&!clientId))])(Inserter);Inserter.__docgenInfo={description:"",methods:[{name:"onToggle",docblock:null,modifiers:[],params:[{name:"isOpen",optional:!1,type:null}],returns:null},{name:"renderToggle",docblock:"Render callback to display Dropdown toggle element.\n\n@param {Object}   options\n@param {Function} options.onToggle Callback to invoke when toggle is\n                                   pressed.\n@param {boolean}  options.isOpen   Whether dropdown is currently open.\n\n@return {Element} Dropdown toggle element.",modifiers:[],params:[{name:"{ onToggle, isOpen }",optional:!1}],returns:{description:"Dropdown toggle element.",type:{name:"Element"}},description:"Render callback to display Dropdown toggle element."},{name:"renderContent",docblock:"Render callback to display Dropdown content element.\n\n@param {Object}   options\n@param {Function} options.onClose Callback to invoke when dropdown is\n                                  closed.\n\n@return {Element} Dropdown content element.",modifiers:[],params:[{name:"{ onClose }",optional:!1}],returns:{description:"Dropdown content element.",type:{name:"Element"}},description:"Render callback to display Dropdown content element."}],displayName:"Inserter"}},"./packages/block-editor/src/components/inserter/menu.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>PrivateInserterMenu,A:()=>menu});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react=__webpack_require__("./node_modules/react/index.js"),search_control=__webpack_require__("./packages/components/build-module/search-control/index.js"),component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),popover=__webpack_require__("./packages/components/build-module/popover/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),use_debounced_input=__webpack_require__("./packages/compose/build-module/hooks/use-debounced-input/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),create_interpolate_element=__webpack_require__("./packages/element/build-module/create-interpolate-element.js"),tip=__webpack_require__("./packages/components/build-module/tip/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const globalTips=[(0,create_interpolate_element.A)((0,build_module.__)("While writing, you can press <kbd>/</kbd> to quickly insert new blocks."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,create_interpolate_element.A)((0,build_module.__)("Indent a list by pressing <kbd>space</kbd> at the beginning of a line."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,create_interpolate_element.A)((0,build_module.__)("Outdent a list by pressing <kbd>backspace</kbd> at the beginning of a line."),{kbd:(0,jsx_runtime.jsx)("kbd",{})}),(0,build_module.__)("Drag files into the editor to automatically insert media blocks."),(0,build_module.__)("Change a block's type by pressing the block icon on the toolbar.")];function Tips(){const[randomIndex]=(0,react.useState)(Math.floor(Math.random()*globalTips.length));return(0,jsx_runtime.jsx)(tip.A,{children:globalTips[randomIndex]})}Tips.displayName="Tips";const tips=Tips;Tips.__docgenInfo={description:"",methods:[],displayName:"Tips"};var blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),v_stack_component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),text_component=__webpack_require__("./packages/components/build-module/text/component.js"),chevron_right=__webpack_require__("./packages/icons/build-module/library/chevron-right.js"),chevron_left=__webpack_require__("./packages/icons/build-module/library/chevron-left.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),block_icon=__webpack_require__("./packages/block-editor/src/components/block-icon/index.js"),store=__webpack_require__("./packages/block-editor/src/store/index.js");function BlockCard({title,icon,description,blockType,className,name}){blockType&&((0,deprecated_build_module.A)("`blockType` property in `BlockCard component`",{since:"5.7",alternative:"`title, icon and description` properties"}),({title,icon,description}=blockType));const{parentNavBlockClientId}=(0,use_select.A)((select=>{const{getSelectedBlockClientId,getBlockParentsByBlockName}=select(store.M);return{parentNavBlockClientId:getBlockParentsByBlockName(getSelectedBlockClientId(),"core/navigation",!0)[0]}}),[]),{selectBlock}=(0,use_dispatch.A)(store.M);return(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("block-editor-block-card",className),children:[parentNavBlockClientId&&(0,jsx_runtime.jsx)(build_module_button.Ay,{onClick:()=>selectBlock(parentNavBlockClientId),label:(0,build_module.__)("Go to parent Navigation block"),style:{minWidth:24,padding:0},icon:(0,build_module.V8)()?chevron_right.A:chevron_left.A,size:"small"}),(0,jsx_runtime.jsx)(block_icon.A,{icon,showColors:!0}),(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:1,children:[(0,jsx_runtime.jsx)("h2",{className:"block-editor-block-card__title",children:name?.length?(0,build_module.nv)((0,build_module.__)("%1$s (%2$s)"),name,title):title}),description&&(0,jsx_runtime.jsx)(text_component.A,{className:"block-editor-block-card__description",children:description})]})]})}BlockCard.displayName="BlockCard";const block_card=BlockCard;BlockCard.__docgenInfo={description:"",methods:[],displayName:"BlockCard"};var block_preview=__webpack_require__("./packages/block-editor/src/components/block-preview/index.js");function InserterPreviewPanel({item}){var _example$viewportWidt;const{name,title,icon,description,initialAttributes,example}=item,isReusable=(0,blocks_build_module.tk)(item),blocks=(0,react.useMemo)((()=>example?(0,blocks_build_module.KL)(name,{attributes:{...example.attributes,...initialAttributes},innerBlocks:example.innerBlocks}):(0,blocks_build_module.Wv)(name,initialAttributes)),[name,example,initialAttributes]),viewportWidth=null!==(_example$viewportWidt=example?.viewportWidth)&&void 0!==_example$viewportWidt?_example$viewportWidt:500,scale=280/viewportWidth,minHeight=0!==scale&&scale<1?144/scale:144;return(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__preview-container",children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview",children:isReusable||example?(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview-content",children:(0,jsx_runtime.jsx)(block_preview.Ay,{blocks,viewportWidth,minHeight:144,additionalStyles:[{css:`\n\t\t\t\t\t\t\t\t\t\tbody { \n\t\t\t\t\t\t\t\t\t\t\tpadding: 24px;\n\t\t\t\t\t\t\t\t\t\t\tmin-height:${Math.round(minHeight)}px;\n\t\t\t\t\t\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\t\t\t\t\t\talign-items:center;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t.is-root-container { width: 100%; }\n\t\t\t\t\t\t\t\t\t`}]})}):(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__preview-content-missing",children:(0,build_module.__)("No preview available.")})}),!isReusable&&(0,jsx_runtime.jsx)(block_card,{title,icon,description})]})}InserterPreviewPanel.displayName="InserterPreviewPanel";const preview_panel=InserterPreviewPanel;InserterPreviewPanel.__docgenInfo={description:"",methods:[],displayName:"InserterPreviewPanel"};var use_async_list=__webpack_require__("./packages/compose/build-module/hooks/use-async-list/index.js"),block_types_list=__webpack_require__("./packages/block-editor/src/components/block-types-list/index.js"),panel=__webpack_require__("./packages/block-editor/src/components/inserter/panel.js"),use_block_types_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-block-types-state.js"),inserter_listbox=__webpack_require__("./packages/block-editor/src/components/inserter-listbox/index.js"),sorting=__webpack_require__("./packages/block-editor/src/utils/sorting.js"),no_results=__webpack_require__("./packages/block-editor/src/components/inserter/no-results.js");const getBlockNamespace=item=>item.name.split("/")[0],MAX_SUGGESTED_ITEMS=6,EMPTY_ARRAY=[];function BlockTypesTabPanel({items,collections,categories,onSelectItem,onHover,showMostUsedBlocks,className}){const suggestedItems=(0,react.useMemo)((()=>(0,sorting.M)(items,"frecency","desc").slice(0,MAX_SUGGESTED_ITEMS)),[items]),uncategorizedItems=(0,react.useMemo)((()=>items.filter((item=>!item.category))),[items]),itemsPerCollection=(0,react.useMemo)((()=>{const result={...collections};return Object.keys(collections).forEach((namespace=>{result[namespace]=items.filter((item=>getBlockNamespace(item)===namespace)),0===result[namespace].length&&delete result[namespace]})),result}),[items,collections]);(0,react.useEffect)((()=>()=>onHover(null)),[]);const currentlyRenderedCategories=(0,use_async_list.A)(categories),didRenderAllCategories=categories.length===currentlyRenderedCategories.length,collectionEntries=(0,react.useMemo)((()=>Object.entries(collections)),[collections]),currentlyRenderedCollections=(0,use_async_list.A)(didRenderAllCategories?collectionEntries:EMPTY_ARRAY);return(0,jsx_runtime.jsxs)("div",{className,children:[showMostUsedBlocks&&items.length>3&&!!suggestedItems.length&&(0,jsx_runtime.jsx)(panel.A,{title:(0,build_module._x)("Most used","blocks"),children:(0,jsx_runtime.jsx)(block_types_list.A,{items:suggestedItems,onSelect:onSelectItem,onHover,label:(0,build_module._x)("Most used","blocks")})}),currentlyRenderedCategories.map((category=>{const categoryItems=items.filter((item=>item.category===category.slug));return categoryItems&&categoryItems.length?(0,jsx_runtime.jsx)(panel.A,{title:category.title,icon:category.icon,children:(0,jsx_runtime.jsx)(block_types_list.A,{items:categoryItems,onSelect:onSelectItem,onHover,label:category.title})},category.slug):null})),didRenderAllCategories&&uncategorizedItems.length>0&&(0,jsx_runtime.jsx)(panel.A,{className:"block-editor-inserter__uncategorized-blocks-panel",title:(0,build_module.__)("Uncategorized"),children:(0,jsx_runtime.jsx)(block_types_list.A,{items:uncategorizedItems,onSelect:onSelectItem,onHover,label:(0,build_module.__)("Uncategorized")})}),currentlyRenderedCollections.map((([namespace,collection])=>{const collectionItems=itemsPerCollection[namespace];return collectionItems&&collectionItems.length?(0,jsx_runtime.jsx)(panel.A,{title:collection.title,icon:collection.icon,children:(0,jsx_runtime.jsx)(block_types_list.A,{items:collectionItems,onSelect:onSelectItem,onHover,label:collection.title})},namespace):null}))]})}function BlockTypesTab({rootClientId,onInsert,onHover,showMostUsedBlocks},ref){const[items,categories,collections,onSelectItem]=(0,use_block_types_state.A)(rootClientId,onInsert);if(!items.length)return(0,jsx_runtime.jsx)(no_results.A,{});const itemsForCurrentRoot=[],itemsRemaining=[];for(const item of items)"reusable"!==item.category&&(rootClientId&&item.isAllowedInCurrentRoot?itemsForCurrentRoot.push(item):itemsRemaining.push(item));return(0,jsx_runtime.jsx)(inserter_listbox.Ay,{children:(0,jsx_runtime.jsxs)("div",{ref,children:[!!itemsForCurrentRoot.length&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(BlockTypesTabPanel,{items:itemsForCurrentRoot,categories,collections,onSelectItem,onHover,showMostUsedBlocks,className:"block-editor-inserter__insertable-blocks-at-selection"})}),(0,jsx_runtime.jsx)(BlockTypesTabPanel,{items:itemsRemaining,categories,collections,onSelectItem,onHover,showMostUsedBlocks,className:"block-editor-inserter__all-blocks"})]})})}BlockTypesTabPanel.displayName="BlockTypesTabPanel",BlockTypesTab.displayName="BlockTypesTab";const block_types_tab=(0,react.forwardRef)(BlockTypesTab);BlockTypesTabPanel.__docgenInfo={description:"",methods:[],displayName:"BlockTypesTabPanel"},BlockTypesTab.__docgenInfo={description:"",methods:[],displayName:"BlockTypesTab"};var use_viewport_match=__webpack_require__("./packages/compose/build-module/hooks/use-viewport-match/index.js"),spinner=__webpack_require__("./packages/components/build-module/spinner/index.js"),modal=__webpack_require__("./packages/components/build-module/modal/index.js");function PatternCategoriesList({selectedCategory,patternCategories,onClickCategory}){const baseClassName="block-editor-block-patterns-explorer__sidebar";return(0,jsx_runtime.jsx)("div",{className:`${baseClassName}__categories-list`,children:patternCategories.map((({name,label})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,label,className:`${baseClassName}__categories-list__item`,isPressed:selectedCategory===name,onClick:()=>{onClickCategory(name)},children:label},name)))})}function PatternsExplorerSearch({searchValue,setSearchValue}){return(0,jsx_runtime.jsx)("div",{className:"block-editor-block-patterns-explorer__search",children:(0,jsx_runtime.jsx)(search_control.A,{__nextHasNoMarginBottom:!0,onChange:setSearchValue,value:searchValue,label:(0,build_module.__)("Search"),placeholder:(0,build_module.__)("Search")})})}function PatternExplorerSidebar({selectedCategory,patternCategories,onClickCategory,searchValue,setSearchValue}){return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer__sidebar",children:[(0,jsx_runtime.jsx)(PatternsExplorerSearch,{searchValue,setSearchValue}),!searchValue&&(0,jsx_runtime.jsx)(PatternCategoriesList,{selectedCategory,patternCategories,onClickCategory})]})}PatternCategoriesList.displayName="PatternCategoriesList",PatternsExplorerSearch.displayName="PatternsExplorerSearch",PatternExplorerSidebar.displayName="PatternExplorerSidebar";const pattern_explorer_sidebar=PatternExplorerSidebar;PatternExplorerSidebar.__docgenInfo={description:"",methods:[],displayName:"PatternExplorerSidebar"};var use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),heading_component=__webpack_require__("./packages/components/build-module/heading/component.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),block_patterns_list=__webpack_require__("./packages/block-editor/src/components/block-patterns-list/index.js"),use_insertion_point=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-insertion-point.js"),use_patterns_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-patterns-state.js"),search_items=__webpack_require__("./packages/block-editor/src/components/inserter/search-items.js"),block_patterns_paging=__webpack_require__("./packages/block-editor/src/components/block-patterns-paging/index.js"),use_previous=__webpack_require__("./packages/compose/build-module/hooks/use-previous/index.js"),get_scroll_container=__webpack_require__("./packages/dom/build-module/dom/get-scroll-container.js");const PAGE_SIZE=20,INITIAL_INSERTER_RESULTS=5;function usePatternsPaging(currentCategoryPatterns,currentCategory,scrollContainerRef,currentFilter=""){const[currentPage,setCurrentPage]=(0,react.useState)(1),previousCategory=(0,use_previous.A)(currentCategory),previousFilter=(0,use_previous.A)(currentFilter);previousCategory===currentCategory&&previousFilter===currentFilter||1===currentPage||setCurrentPage(1);const totalItems=currentCategoryPatterns.length,pageIndex=currentPage-1,categoryPatterns=(0,react.useMemo)((()=>currentCategoryPatterns.slice(pageIndex*PAGE_SIZE,pageIndex*PAGE_SIZE+PAGE_SIZE)),[pageIndex,currentCategoryPatterns]),categoryPatternsAsyncList=(0,use_async_list.A)(categoryPatterns,{step:INITIAL_INSERTER_RESULTS}),numPages=Math.ceil(currentCategoryPatterns.length/PAGE_SIZE);return(0,react.useEffect)((function scrollToTopOnCategoryChange(){const scrollContainer=(0,get_scroll_container.A)(scrollContainerRef?.current);scrollContainer?.scrollTo(0,0)}),[currentCategory,scrollContainerRef]),{totalItems,categoryPatterns,categoryPatternsAsyncList,numPages,changePage:page=>{const scrollContainer=(0,get_scroll_container.A)(scrollContainerRef?.current);scrollContainer?.scrollTo(0,0),setCurrentPage(page)},currentPage}}var utils=__webpack_require__("./packages/block-editor/src/components/inserter/block-patterns-tab/utils.js");function PatternsListHeader({filterValue,filteredBlockPatternsLength}){return filterValue?(0,jsx_runtime.jsx)(heading_component.A,{level:2,lineHeight:"48px",className:"block-editor-block-patterns-explorer__search-results-count",children:(0,build_module.nv)((0,build_module._n)("%d pattern found","%d patterns found",filteredBlockPatternsLength),filteredBlockPatternsLength)}):null}function PatternList({searchValue,selectedCategory,patternCategories,rootClientId}){const container=(0,react.useRef)(),debouncedSpeak=(0,use_debounce.A)(a11y_build_module.L,500),[destinationRootClientId,onInsertBlocks]=(0,use_insertion_point.A)({rootClientId,shouldFocusBlock:!0}),[patterns,,onClickPattern]=(0,use_patterns_state.A)(onInsertBlocks,destinationRootClientId,selectedCategory),registeredPatternCategories=(0,react.useMemo)((()=>patternCategories.map((patternCategory=>patternCategory.name))),[patternCategories]),filteredBlockPatterns=(0,react.useMemo)((()=>{const filteredPatterns=patterns.filter((pattern=>{if(selectedCategory===utils.fo.name)return!0;if(selectedCategory===utils.AP.name&&pattern.type===utils.KG.user)return!0;if("uncategorized"===selectedCategory){const hasKnownCategory=pattern.categories.some((category=>registeredPatternCategories.includes(category)));return!pattern.categories?.length||!hasKnownCategory}return pattern.categories?.includes(selectedCategory)}));return searchValue?(0,search_items.Ds)(filteredPatterns,searchValue):filteredPatterns}),[searchValue,patterns,selectedCategory,registeredPatternCategories]);(0,react.useEffect)((()=>{if(!searchValue)return;const count=filteredBlockPatterns.length,resultsFoundMessage=(0,build_module.nv)((0,build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[searchValue,debouncedSpeak,filteredBlockPatterns.length]);const pagingProps=usePatternsPaging(filteredBlockPatterns,selectedCategory,container),[previousSearchValue,setPreviousSearchValue]=(0,react.useState)(searchValue);searchValue!==previousSearchValue&&(setPreviousSearchValue(searchValue),pagingProps.changePage(1));const hasItems=!!filteredBlockPatterns?.length;return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer__list",ref:container,children:[(0,jsx_runtime.jsx)(PatternsListHeader,{filterValue:searchValue,filteredBlockPatternsLength:filteredBlockPatterns.length}),(0,jsx_runtime.jsx)(inserter_listbox.Ay,{children:hasItems&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(block_patterns_list.A,{shownPatterns:pagingProps.categoryPatternsAsyncList,blockPatterns:pagingProps.categoryPatterns,onClickPattern,isDraggable:!1}),(0,jsx_runtime.jsx)(block_patterns_paging.A,{...pagingProps})]})})]})}PatternsListHeader.displayName="PatternsListHeader",PatternList.displayName="PatternList";const pattern_list=PatternList;function usePatternCategories(rootClientId,sourceFilter="all"){const[patterns,allCategories]=(0,use_patterns_state.A)(void 0,rootClientId),filteredPatterns=(0,react.useMemo)((()=>"all"===sourceFilter?patterns:patterns.filter((pattern=>!(0,utils.o)(pattern,sourceFilter)))),[sourceFilter,patterns]);return(0,react.useMemo)((()=>{const categories=allCategories.filter((category=>filteredPatterns.some((pattern=>pattern.categories?.includes(category.name))))).sort(((a,b)=>a.label.localeCompare(b.label)));return filteredPatterns.some((pattern=>!function hasRegisteredCategory(pattern,allCategories){return!(!pattern.categories||!pattern.categories.length)&&pattern.categories.some((cat=>allCategories.some((category=>category.name===cat))))}(pattern,allCategories)))&&!categories.find((category=>"uncategorized"===category.name))&&categories.push({name:"uncategorized",label:(0,build_module._x)("Uncategorized")}),filteredPatterns.some((pattern=>pattern.type===utils.KG.user))&&categories.unshift(utils.AP),filteredPatterns.length>0&&categories.unshift({name:utils.fo.name,label:utils.fo.label}),(0,a11y_build_module.L)((0,build_module.nv)((0,build_module._n)("%d category button displayed.","%d category buttons displayed.",categories.length),categories.length)),categories}),[allCategories,filteredPatterns])}function PatternsExplorer({initialCategory,rootClientId}){const[searchValue,setSearchValue]=(0,react.useState)(""),[selectedCategory,setSelectedCategory]=(0,react.useState)(initialCategory?.name),patternCategories=usePatternCategories(rootClientId);return(0,jsx_runtime.jsxs)("div",{className:"block-editor-block-patterns-explorer",children:[(0,jsx_runtime.jsx)(pattern_explorer_sidebar,{selectedCategory,patternCategories,onClickCategory:setSelectedCategory,searchValue,setSearchValue}),(0,jsx_runtime.jsx)(pattern_list,{searchValue,selectedCategory,patternCategories,rootClientId})]})}function PatternsExplorerModal({onModalClose,...restProps}){return(0,jsx_runtime.jsx)(modal.A,{title:(0,build_module.__)("Patterns"),onRequestClose:onModalClose,isFullScreen:!0,children:(0,jsx_runtime.jsx)(PatternsExplorer,{...restProps})})}PatternList.__docgenInfo={description:"",methods:[],displayName:"PatternList"},PatternsExplorer.displayName="PatternsExplorer",PatternsExplorerModal.displayName="PatternsExplorerModal";const block_patterns_explorer=PatternsExplorerModal;PatternsExplorerModal.__docgenInfo={description:"",methods:[],displayName:"PatternsExplorerModal"};var view_component=__webpack_require__("./packages/components/build-module/view/component.js"),spacer_component=__webpack_require__("./packages/components/build-module/spacer/component.js"),h_stack_component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),build_module_navigator=__webpack_require__("./packages/components/build-module/navigator/index.js"),item_group_component=__webpack_require__("./packages/components/build-module/item-group/item-group/component.js"),item_component=__webpack_require__("./packages/components/build-module/item-group/item/component.js"),flex_block_component=__webpack_require__("./packages/components/build-module/flex/flex-block/component.js"),icon=__webpack_require__("./packages/icons/build-module/icon/index.js");function ScreenHeader({title}){return(0,jsx_runtime.jsx)(v_stack_component.A,{spacing:0,children:(0,jsx_runtime.jsx)(view_component.A,{children:(0,jsx_runtime.jsx)(spacer_component.A,{marginBottom:0,paddingX:4,paddingY:3,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{spacing:2,children:[(0,jsx_runtime.jsx)(build_module_navigator.m.BackButton,{style:{minWidth:24,padding:0},icon:(0,build_module.V8)()?chevron_right.A:chevron_left.A,size:"small",label:(0,build_module.__)("Back")}),(0,jsx_runtime.jsx)(spacer_component.A,{children:(0,jsx_runtime.jsx)(heading_component.A,{level:5,children:title})})]})})})})}function MobileTabNavigation({categories,children}){return(0,jsx_runtime.jsxs)(build_module_navigator.m,{initialPath:"/",className:"block-editor-inserter__mobile-tab-navigation",children:[(0,jsx_runtime.jsx)(build_module_navigator.m.Screen,{path:"/",children:(0,jsx_runtime.jsx)(item_group_component.A,{children:categories.map((category=>(0,jsx_runtime.jsx)(build_module_navigator.m.Button,{path:`/category/${category.name}`,as:item_component.A,isAction:!0,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{children:[(0,jsx_runtime.jsx)(flex_block_component.A,{children:category.label}),(0,jsx_runtime.jsx)(icon.A,{icon:(0,build_module.V8)()?chevron_left.A:chevron_right.A})]})},category.name)))})}),categories.map((category=>(0,jsx_runtime.jsxs)(build_module_navigator.m.Screen,{path:`/category/${category.name}`,children:[(0,jsx_runtime.jsx)(ScreenHeader,{title:(0,build_module.__)("Back")}),children(category)]},category.name)))]})}ScreenHeader.displayName="ScreenHeader",MobileTabNavigation.displayName="MobileTabNavigation",MobileTabNavigation.__docgenInfo={description:"",methods:[],displayName:"MobileTabNavigation"};var dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),svg=__webpack_require__("./packages/primitives/build-module/svg/index.js"),menu_group=__webpack_require__("./packages/components/build-module/menu-group/index.js"),menu_items_choice=__webpack_require__("./packages/components/build-module/menu-items-choice/index.js"),external_link=__webpack_require__("./packages/components/build-module/external-link/index.js");const getShouldDisableSyncFilter=sourceFilter=>"all"!==sourceFilter&&"user"!==sourceFilter,getShouldHideSourcesFilter=category=>category.name===utils.AP.name,PATTERN_SOURCE_MENU_OPTIONS=[{value:"all",label:(0,build_module._x)("All","patterns")},{value:utils.KG.directory,label:(0,build_module.__)("Pattern Directory")},{value:utils.KG.theme,label:(0,build_module.__)("Theme & Plugins")},{value:utils.KG.user,label:(0,build_module.__)("User")}];function PatternsFilter({setPatternSyncFilter,setPatternSourceFilter,patternSyncFilter,patternSourceFilter,scrollContainerRef,category}){const currentPatternSourceFilter=category.name===utils.AP.name?utils.KG.user:patternSourceFilter,shouldDisableSyncFilter=getShouldDisableSyncFilter(currentPatternSourceFilter),shouldHideSourcesFilter=getShouldHideSourcesFilter(category),patternSyncMenuOptions=(0,react.useMemo)((()=>[{value:"all",label:(0,build_module._x)("All","patterns")},{value:utils.XL.full,label:(0,build_module._x)("Synced","patterns"),disabled:shouldDisableSyncFilter},{value:utils.XL.unsynced,label:(0,build_module._x)("Not synced","patterns"),disabled:shouldDisableSyncFilter}]),[shouldDisableSyncFilter]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(dropdown_menu.A,{popoverProps:{placement:"right-end"},label:(0,build_module.__)("Filter patterns"),toggleProps:{size:"compact"},icon:(0,jsx_runtime.jsx)(icon.A,{icon:(0,jsx_runtime.jsx)(svg.t4,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z",fill:"currentColor"})})}),children:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!shouldHideSourcesFilter&&(0,jsx_runtime.jsx)(menu_group.A,{label:(0,build_module.__)("Source"),children:(0,jsx_runtime.jsx)(menu_items_choice.A,{choices:PATTERN_SOURCE_MENU_OPTIONS,onSelect:value=>{!function handleSetSourceFilterChange(newSourceFilter){setPatternSourceFilter(newSourceFilter),getShouldDisableSyncFilter(newSourceFilter)&&setPatternSyncFilter("all")}(value),scrollContainerRef.current?.scrollTo(0,0)},value:currentPatternSourceFilter})}),(0,jsx_runtime.jsx)(menu_group.A,{label:(0,build_module.__)("Type"),children:(0,jsx_runtime.jsx)(menu_items_choice.A,{choices:patternSyncMenuOptions,onSelect:value=>{setPatternSyncFilter(value),scrollContainerRef.current?.scrollTo(0,0)},value:patternSyncFilter})}),(0,jsx_runtime.jsx)("div",{className:"block-editor-tool-selector__help",children:(0,create_interpolate_element.A)((0,build_module.__)("Patterns are available from the <Link>WordPress.org Pattern Directory</Link>, bundled in the active theme, or created by users on this site. Only patterns created on this site can be synced."),{Link:(0,jsx_runtime.jsx)(external_link.A,{href:(0,build_module.__)("https://wordpress.org/patterns/")})})})]})})})}PatternsFilter.__docgenInfo={description:"",methods:[],displayName:"PatternsFilter"};var lock_unlock=__webpack_require__("./packages/block-editor/src/lock-unlock.js");const noop=()=>{};function PatternCategoryPreviews({rootClientId,onInsert,onHover=noop,category,showTitlesAsTooltip}){const isZoomOutMode=(0,use_select.A)((select=>(0,lock_unlock.T)(select(store.M)).isZoomOut()),[]),[allPatterns,,onClickPattern]=(0,use_patterns_state.A)(onInsert,rootClientId,category?.name),[patternSyncFilter,setPatternSyncFilter]=(0,react.useState)("all"),[patternSourceFilter,setPatternSourceFilter]=(0,react.useState)("all"),availableCategories=usePatternCategories(rootClientId,patternSourceFilter),scrollContainerRef=(0,react.useRef)(),currentCategoryPatterns=(0,react.useMemo)((()=>allPatterns.filter((pattern=>!(0,utils.o)(pattern,patternSourceFilter,patternSyncFilter)&&(category.name===utils.fo.name||(category.name===utils.AP.name&&pattern.type===utils.KG.user||("uncategorized"===category.name?!pattern.categories||!pattern.categories.some((catName=>availableCategories.some((c=>c.name===catName)))):pattern.categories?.includes(category.name))))))),[allPatterns,availableCategories,category.name,patternSourceFilter,patternSyncFilter]),pagingProps=usePatternsPaging(currentCategoryPatterns,category,scrollContainerRef),{changePage}=pagingProps;(0,react.useEffect)((()=>()=>onHover(null)),[]);const onSetPatternSyncFilter=(0,react.useCallback)((value=>{setPatternSyncFilter(value),changePage(1)}),[setPatternSyncFilter,changePage]),onSetPatternSourceFilter=(0,react.useCallback)((value=>{setPatternSourceFilter(value),changePage(1)}),[setPatternSourceFilter,changePage]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:2,className:"block-editor-inserter__patterns-category-panel-header",children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{children:[(0,jsx_runtime.jsx)(flex_block_component.A,{children:(0,jsx_runtime.jsx)(heading_component.A,{className:"block-editor-inserter__patterns-category-panel-title",size:13,level:4,as:"div",children:category.label})}),(0,jsx_runtime.jsx)(PatternsFilter,{patternSyncFilter,patternSourceFilter,setPatternSyncFilter:onSetPatternSyncFilter,setPatternSourceFilter:onSetPatternSourceFilter,scrollContainerRef,category})]}),!currentCategoryPatterns.length&&(0,jsx_runtime.jsx)(text_component.A,{variant:"muted",className:"block-editor-inserter__patterns-category-no-results",children:(0,build_module.__)("No results found")})]}),currentCategoryPatterns.length>0&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isZoomOutMode&&(0,jsx_runtime.jsx)(text_component.A,{size:"12",as:"p",className:"block-editor-inserter__help-text",children:(0,build_module.__)("Drag and drop patterns into the canvas.")}),(0,jsx_runtime.jsx)(block_patterns_list.A,{ref:scrollContainerRef,shownPatterns:pagingProps.categoryPatternsAsyncList,blockPatterns:pagingProps.categoryPatterns,onClickPattern,onHover,label:category.label,orientation:"vertical",category:category.name,isDraggable:!0,showTitlesAsTooltip,patternFilter:patternSourceFilter,pagingProps})]})]})}PatternCategoryPreviews.__docgenInfo={description:"",methods:[],displayName:"PatternCategoryPreviews",props:{onHover:{defaultValue:{value:"() => {}",computed:!1},required:!1}}};var use_reduced_motion=__webpack_require__("./packages/compose/build-module/hooks/use-reduced-motion/index.js"),private_apis=__webpack_require__("./packages/components/build-module/private-apis.js"),motion=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion.mjs");const{Tabs}=(0,lock_unlock.T)(private_apis.j);function CategoryTabs({categories,selectedCategory,onSelectCategory,children}){const defaultTransition={type:"tween",duration:(0,use_reduced_motion.A)()?0:.25,ease:[.6,0,.4,1]},previousSelectedCategory=(0,use_previous.A)(selectedCategory);return(0,jsx_runtime.jsxs)(Tabs,{selectOnMove:!1,selectedTabId:selectedCategory?selectedCategory.name:null,orientation:"vertical",onSelect:categoryId=>{onSelectCategory(categories.find((category=>category.name===categoryId)))},children:[(0,jsx_runtime.jsx)(Tabs.TabList,{className:"block-editor-inserter__category-tablist",children:categories.map((category=>(0,jsx_runtime.jsx)(Tabs.Tab,{tabId:category.name,"aria-label":category.label,"aria-current":category===selectedCategory?"true":void 0,children:category.label},category.name)))}),categories.map((category=>(0,jsx_runtime.jsx)(Tabs.TabPanel,{tabId:category.name,focusable:!1,children:(0,jsx_runtime.jsx)(motion.P.div,{className:"block-editor-inserter__category-panel",initial:previousSelectedCategory?"open":"closed",animate:"open",variants:{open:{transform:"translateX( 0 )",transitionEnd:{zIndex:"1"}},closed:{transform:"translateX( -100% )",zIndex:"-1"}},transition:defaultTransition,children})},category.name)))]})}CategoryTabs.displayName="CategoryTabs";const category_tabs=CategoryTabs;function BlockPatternsTab({onSelectCategory,selectedCategory,onInsert,rootClientId,children}){const[showPatternsExplorer,setShowPatternsExplorer]=(0,react.useState)(!1),categories=usePatternCategories(rootClientId),isMobile=(0,use_viewport_match.A)("medium","<");return(0,use_select.A)((select=>(0,lock_unlock.T)(select(store.M)).isResolvingPatterns()),[])?(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__patterns-loading",children:(0,jsx_runtime.jsx)(spinner.Ay,{})}):categories.length?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isMobile&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__block-patterns-tabs-container",children:[(0,jsx_runtime.jsx)(category_tabs,{categories,selectedCategory,onSelectCategory,children}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"block-editor-inserter__patterns-explore-button",onClick:()=>setShowPatternsExplorer(!0),variant:"secondary",children:(0,build_module.__)("Explore all patterns")})]}),isMobile&&(0,jsx_runtime.jsx)(MobileTabNavigation,{categories,children:category=>(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__category-panel",children:(0,jsx_runtime.jsx)(PatternCategoryPreviews,{onInsert,rootClientId,category,showTitlesAsTooltip:!1},category.name)})}),showPatternsExplorer&&(0,jsx_runtime.jsx)(block_patterns_explorer,{initialCategory:selectedCategory||categories[0],patternCategories:categories,onModalClose:()=>setShowPatternsExplorer(!1),rootClientId})]}):(0,jsx_runtime.jsx)(no_results.A,{})}CategoryTabs.__docgenInfo={description:"",methods:[],displayName:"CategoryTabs"};const block_patterns_tab=BlockPatternsTab;BlockPatternsTab.__docgenInfo={description:"",methods:[],displayName:"BlockPatternsTab"};var composite=__webpack_require__("./packages/components/build-module/composite/index.js"),menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js"),flex_component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),flex_item_component=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),tooltip=__webpack_require__("./packages/components/build-module/tooltip/index.js"),more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js"),external=__webpack_require__("./packages/icons/build-module/library/external.js"),notices_build_module=__webpack_require__("./packages/notices/build-module/index.js"),blob_build_module=__webpack_require__("./packages/blob/build-module/index.js"),get_filename=__webpack_require__("./packages/url/build-module/get-filename.js"),inserter_draggable_blocks=__webpack_require__("./packages/block-editor/src/components/inserter-draggable-blocks/index.js");const mediaTypeTag={image:"img",video:"video",audio:"audio"};function getBlockAndPreviewFromMedia(media,mediaType){const attributes={id:media.id||void 0,caption:media.caption||void 0},mediaSrc=media.url,alt=media.alt||void 0;"image"===mediaType?(attributes.url=mediaSrc,attributes.alt=alt):["video","audio"].includes(mediaType)&&(attributes.src=mediaSrc);const PreviewTag=mediaTypeTag[mediaType],preview=(0,jsx_runtime.jsx)(PreviewTag,{src:media.previewUrl||mediaSrc,alt,controls:"audio"===mediaType||void 0,inert:"true",onError:({currentTarget})=>{currentTarget.src===media.previewUrl&&(currentTarget.src=mediaSrc)}});return[(0,blocks_build_module.Wv)(`core/${mediaType}`,attributes),preview]}const ALLOWED_MEDIA_TYPES=["image"],MAXIMUM_TITLE_LENGTH=25,MEDIA_OPTIONS_POPOVER_PROPS={position:"bottom left",className:"block-editor-inserter__media-list__item-preview-options__popover"};function MediaPreviewOptions({category,media}){if(!category.getReportUrl)return null;const reportUrl=category.getReportUrl(media);return(0,jsx_runtime.jsx)(dropdown_menu.A,{className:"block-editor-inserter__media-list__item-preview-options",label:(0,build_module.__)("Options"),popoverProps:MEDIA_OPTIONS_POPOVER_PROPS,icon:more_vertical.A,children:()=>(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>window.open(reportUrl,"_blank").focus(),icon:external.A,children:(0,build_module.nv)((0,build_module.__)("Report %s"),category.mediaType)})})})}function InsertExternalImageModal({onClose,onSubmit}){return(0,jsx_runtime.jsxs)(modal.A,{title:(0,build_module.__)("Insert external image"),onRequestClose:onClose,className:"block-editor-inserter-media-tab-media-preview-inserter-external-image-modal",children:[(0,jsx_runtime.jsxs)(v_stack_component.A,{spacing:3,children:[(0,jsx_runtime.jsx)("p",{children:(0,build_module.__)("This image cannot be uploaded to your Media Library, but it can still be inserted as an external image.")}),(0,jsx_runtime.jsx)("p",{children:(0,build_module.__)("External images can be removed by the external provider without warning and could even have legal compliance issues related to privacy legislation.")})]}),(0,jsx_runtime.jsxs)(flex_component.A,{className:"block-editor-block-lock-modal__actions",justify:"flex-end",expanded:!1,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:onClose,children:(0,build_module.__)("Cancel")})}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",onClick:onSubmit,children:(0,build_module.__)("Insert")})})]})]})}function MediaPreview({media,onClick,category}){const[showExternalUploadModal,setShowExternalUploadModal]=(0,react.useState)(!1),[isHovered,setIsHovered]=(0,react.useState)(!1),[isInserting,setIsInserting]=(0,react.useState)(!1),[block,preview]=(0,react.useMemo)((()=>getBlockAndPreviewFromMedia(media,category.mediaType)),[media,category.mediaType]),{createErrorNotice,createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M),{getSettings,getBlock}=(0,use_select.A)(store.M),{updateBlockAttributes}=(0,use_dispatch.A)(store.M),onMediaInsert=(0,react.useCallback)((previewBlock=>{if(isInserting)return;const settings=getSettings(),clonedBlock=(0,blocks_build_module.JB)(previewBlock),{id,url,caption}=clonedBlock.attributes;id||settings.mediaUpload?id?onClick(clonedBlock):(setIsInserting(!0),window.fetch(url).then((response=>response.blob())).then((blob=>{const fileName=(0,get_filename.e)(url)||"image.jpg",file=new File([blob],fileName,{type:blob.type});settings.mediaUpload({filesList:[file],additionalData:{caption},onFileChange([img]){(0,blob_build_module.H8)(img.url)||(getBlock(clonedBlock.clientId)?updateBlockAttributes(clonedBlock.clientId,{...clonedBlock.attributes,id:img.id,url:img.url}):(onClick({...clonedBlock,attributes:{...clonedBlock.attributes,id:img.id,url:img.url}}),createSuccessNotice((0,build_module.__)("Image uploaded and inserted."),{type:"snackbar",id:"inserter-notice"})),setIsInserting(!1))},allowedTypes:ALLOWED_MEDIA_TYPES,onError(message){createErrorNotice(message,{type:"snackbar",id:"inserter-notice"}),setIsInserting(!1)}})})).catch((()=>{setShowExternalUploadModal(!0),setIsInserting(!1)}))):setShowExternalUploadModal(!0)}),[isInserting,getSettings,onClick,createSuccessNotice,updateBlockAttributes,createErrorNotice,getBlock]),title="string"==typeof media.title?media.title:media.title?.rendered||(0,build_module.__)("no title");let truncatedTitle;if(title.length>MAXIMUM_TITLE_LENGTH){const omission="...";truncatedTitle=title.slice(0,MAXIMUM_TITLE_LENGTH-omission.length)+omission}const onMouseEnter=(0,react.useCallback)((()=>setIsHovered(!0)),[]),onMouseLeave=(0,react.useCallback)((()=>setIsHovered(!1)),[]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(inserter_draggable_blocks.A,{isEnabled:!0,blocks:[block],children:({draggable,onDragStart,onDragEnd})=>(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("block-editor-inserter__media-list__list-item",{"is-hovered":isHovered}),draggable,onDragStart,onDragEnd,children:(0,jsx_runtime.jsxs)("div",{onMouseEnter,onMouseLeave,children:[(0,jsx_runtime.jsx)(tooltip.Ay,{text:truncatedTitle||title,children:(0,jsx_runtime.jsx)(composite.e.Item,{render:(0,jsx_runtime.jsx)("div",{"aria-label":title,role:"option",className:"block-editor-inserter__media-list__item"}),onClick:()=>onMediaInsert(block),children:(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__media-list__item-preview",children:[preview,isInserting&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__media-list__item-preview-spinner",children:(0,jsx_runtime.jsx)(spinner.Ay,{})})]})})}),!isInserting&&(0,jsx_runtime.jsx)(MediaPreviewOptions,{category,media})]})})}),showExternalUploadModal&&(0,jsx_runtime.jsx)(InsertExternalImageModal,{onClose:()=>setShowExternalUploadModal(!1),onSubmit:()=>{onClick((0,blocks_build_module.JB)(block)),createSuccessNotice((0,build_module.__)("Image inserted."),{type:"snackbar",id:"inserter-notice"}),setShowExternalUploadModal(!1)}})]})}function MediaList({mediaList,category,onClick,label=(0,build_module.__)("Media List")}){return(0,jsx_runtime.jsx)(composite.e,{role:"listbox",className:"block-editor-inserter__media-list","aria-label":label,children:mediaList.map(((media,index)=>(0,jsx_runtime.jsx)(MediaPreview,{media,category,onClick},media.id||media.sourceId||index)))})}MediaPreviewOptions.displayName="MediaPreviewOptions",InsertExternalImageModal.displayName="InsertExternalImageModal",MediaPreview.__docgenInfo={description:"",methods:[],displayName:"MediaPreview"},MediaList.displayName="MediaList";const media_list=MediaList;MediaList.__docgenInfo={description:"",methods:[],displayName:"MediaList",props:{label:{defaultValue:{value:"__( 'Media List' )",computed:!0},required:!1}}};const INITIAL_MEDIA_ITEMS_PER_PAGE=10;function MediaCategoryPanel({rootClientId,onInsert,category}){const[search,setSearch,debouncedSearch]=(0,use_debounced_input.A)(),{mediaList,isLoading}=function useMediaResults(category,query={}){const[mediaList,setMediaList]=(0,react.useState)(),[isLoading,setIsLoading]=(0,react.useState)(!1),lastRequestRef=(0,react.useRef)();return(0,react.useEffect)((()=>{(async()=>{const key=JSON.stringify({category:category.name,...query});lastRequestRef.current=key,setIsLoading(!0),setMediaList([]);const _media=await(category.fetch?.(query));key===lastRequestRef.current&&(setMediaList(_media),setIsLoading(!1))})()}),[category.name,...Object.values(query)]),{mediaList,isLoading}}(category,{per_page:debouncedSearch?20:INITIAL_MEDIA_ITEMS_PER_PAGE,search:debouncedSearch}),baseCssClass="block-editor-inserter__media-panel",searchLabel=category.labels.search_items||(0,build_module.__)("Search");return(0,jsx_runtime.jsxs)("div",{className:baseCssClass,children:[(0,jsx_runtime.jsx)(search_control.A,{__nextHasNoMarginBottom:!0,className:`${baseCssClass}-search`,onChange:setSearch,value:search,label:searchLabel,placeholder:searchLabel}),isLoading&&(0,jsx_runtime.jsx)("div",{className:`${baseCssClass}-spinner`,children:(0,jsx_runtime.jsx)(spinner.Ay,{})}),!isLoading&&!mediaList?.length&&(0,jsx_runtime.jsx)(no_results.A,{}),!isLoading&&!!mediaList?.length&&(0,jsx_runtime.jsx)(media_list,{rootClientId,onClick:onInsert,mediaList,category})]})}MediaCategoryPanel.displayName="MediaCategoryPanel",MediaCategoryPanel.__docgenInfo={description:"",methods:[],displayName:"MediaCategoryPanel"};const check=function MediaUploadCheck({fallback=null,children}){return(0,use_select.A)((select=>{const{getSettings}=select(store.M);return!!getSettings().mediaUpload}),[])?children:fallback};const media_upload=(0,__webpack_require__("./packages/components/build-module/higher-order/with-filters/index.js").A)("editor.MediaUpload")((()=>null)),media_tab_ALLOWED_MEDIA_TYPES=["image","video","audio"];function MediaTab({rootClientId,selectedCategory,onSelectCategory,onInsert,children}){const mediaCategories=function useMediaCategories(rootClientId){const[categories,setCategories]=(0,react.useState)([]),inserterMediaCategories=(0,use_select.A)((select=>(0,lock_unlock.T)(select(store.M)).getInserterMediaCategories()),[]),{canInsertImage,canInsertVideo,canInsertAudio}=(0,use_select.A)((select=>{const{canInsertBlockType}=select(store.M);return{canInsertImage:canInsertBlockType("core/image",rootClientId),canInsertVideo:canInsertBlockType("core/video",rootClientId),canInsertAudio:canInsertBlockType("core/audio",rootClientId)}}),[rootClientId]);return(0,react.useEffect)((()=>{(async()=>{const _categories=[];if(!inserterMediaCategories)return;const categoriesHaveMedia=new Map(await Promise.all(inserterMediaCategories.map((async category=>{if(category.isExternalResource)return[category.name,!0];let results=[];try{results=await category.fetch({per_page:1})}catch(e){}return[category.name,!!results.length]})))),canInsertMediaType={image:canInsertImage,video:canInsertVideo,audio:canInsertAudio};inserterMediaCategories.forEach((category=>{canInsertMediaType[category.mediaType]&&categoriesHaveMedia.get(category.name)&&_categories.push(category)})),_categories.length&&setCategories(_categories)})()}),[canInsertImage,canInsertVideo,canInsertAudio,inserterMediaCategories]),categories}(rootClientId),isMobile=(0,use_viewport_match.A)("medium","<"),onSelectMedia=(0,react.useCallback)((media=>{if(!media?.url)return;const[block]=getBlockAndPreviewFromMedia(media,media.type);onInsert(block)}),[onInsert]),categories=(0,react.useMemo)((()=>mediaCategories.map((mediaCategory=>({...mediaCategory,label:mediaCategory.labels.name})))),[mediaCategories]);return categories.length?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isMobile&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__media-tabs-container",children:[(0,jsx_runtime.jsx)(category_tabs,{categories,selectedCategory,onSelectCategory,children}),(0,jsx_runtime.jsx)(check,{children:(0,jsx_runtime.jsx)(media_upload,{multiple:!1,onSelect:onSelectMedia,allowedTypes:media_tab_ALLOWED_MEDIA_TYPES,render:({open})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,onClick:event=>{event.target.focus(),open()},className:"block-editor-inserter__media-library-button",variant:"secondary","data-unstable-ignore-focus-outside-for-relatedtarget":".media-modal",children:(0,build_module.__)("Open Media Library")})})})]}),isMobile&&(0,jsx_runtime.jsx)(MobileTabNavigation,{categories,children:category=>(0,jsx_runtime.jsx)(MediaCategoryPanel,{onInsert,rootClientId,category})})]}):(0,jsx_runtime.jsx)(no_results.A,{})}const media_tab=MediaTab;MediaTab.__docgenInfo={description:"",methods:[],displayName:"MediaTab"};var search_results=__webpack_require__("./packages/block-editor/src/components/inserter/search-results.js"),close_small=__webpack_require__("./packages/icons/build-module/library/close-small.js");const{Tabs:tabbed_sidebar_Tabs}=(0,lock_unlock.T)(private_apis.j);function TabbedSidebar({defaultTabId,onClose,onSelect,selectedTab,tabs,closeButtonLabel},ref){return(0,jsx_runtime.jsx)("div",{className:"block-editor-tabbed-sidebar",children:(0,jsx_runtime.jsxs)(tabbed_sidebar_Tabs,{selectOnMove:!1,defaultTabId,onSelect,selectedTabId:selectedTab,children:[(0,jsx_runtime.jsxs)("div",{className:"block-editor-tabbed-sidebar__tablist-and-close-button",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"block-editor-tabbed-sidebar__close-button",icon:close_small.A,label:closeButtonLabel,onClick:()=>onClose(),size:"small"}),(0,jsx_runtime.jsx)(tabbed_sidebar_Tabs.TabList,{className:"block-editor-tabbed-sidebar__tablist",ref,children:tabs.map((tab=>(0,jsx_runtime.jsx)(tabbed_sidebar_Tabs.Tab,{tabId:tab.name,className:"block-editor-tabbed-sidebar__tab",children:tab.title},tab.name)))})]}),tabs.map((tab=>(0,jsx_runtime.jsx)(tabbed_sidebar_Tabs.TabPanel,{tabId:tab.name,focusable:!1,className:"block-editor-tabbed-sidebar__tabpanel",ref:tab.panelRef,children:tab.panel},tab.name)))]})})}TabbedSidebar.displayName="TabbedSidebar";const tabbed_sidebar=(0,react.forwardRef)(TabbedSidebar);TabbedSidebar.__docgenInfo={description:"",methods:[],displayName:"TabbedSidebar"};const NOOP=()=>{};function InserterMenu({rootClientId,clientId,isAppender,__experimentalInsertionIndex,onSelect,showInserterHelpPanel,showMostUsedBlocks,__experimentalFilterValue="",shouldFocusBlock=!0,onPatternCategorySelection,onClose,__experimentalInitialTab,__experimentalInitialCategory},ref){const isZoomOutMode=(0,use_select.A)((select=>(0,lock_unlock.T)(select(store.M)).isZoomOut()),[]),[filterValue,setFilterValue,delayedFilterValue]=(0,use_debounced_input.A)(__experimentalFilterValue),[hoveredItem,setHoveredItem]=(0,react.useState)(null),[selectedPatternCategory,setSelectedPatternCategory]=(0,react.useState)(__experimentalInitialCategory),[patternFilter,setPatternFilter]=(0,react.useState)("all"),[selectedMediaCategory,setSelectedMediaCategory]=(0,react.useState)(null);const[selectedTab,setSelectedTab]=(0,react.useState)(function getInitialTab(){return __experimentalInitialTab||(isZoomOutMode?"patterns":void 0)}());!function useZoomOut(zoomOut=!0){const{setZoomLevel,resetZoomLevel}=(0,lock_unlock.T)((0,use_dispatch.A)(store.M)),{isZoomOut}=(0,lock_unlock.T)((0,use_select.A)(store.M)),isWideViewport=(0,use_viewport_match.A)("large");(0,react.useEffect)((()=>{const isZoomOutOnMount=isZoomOut();return()=>{isZoomOutOnMount&&isWideViewport?setZoomLevel("auto-scaled"):resetZoomLevel()}}),[]),(0,react.useEffect)((()=>{zoomOut&&isWideViewport?setZoomLevel("auto-scaled"):resetZoomLevel()}),[zoomOut,setZoomLevel,resetZoomLevel,isWideViewport])}("patterns"===selectedTab||"media"===selectedTab);const[destinationRootClientId,onInsertBlocks,onToggleInsertionPoint]=(0,use_insertion_point.A)({rootClientId,clientId,isAppender,insertionIndex:__experimentalInsertionIndex,shouldFocusBlock}),blockTypesTabRef=(0,react.useRef)(),onInsert=(0,react.useCallback)(((blocks,meta,shouldForceFocusBlock,_rootClientId)=>{onInsertBlocks(blocks,meta,shouldForceFocusBlock,_rootClientId),onSelect(blocks),window.requestAnimationFrame((()=>{shouldFocusBlock||blockTypesTabRef.current?.contains(ref.current.ownerDocument.activeElement)||blockTypesTabRef.current?.querySelector("button").focus()}))}),[onInsertBlocks,onSelect,shouldFocusBlock]),onInsertPattern=(0,react.useCallback)(((blocks,patternName,...args)=>{onToggleInsertionPoint(!1),onInsertBlocks(blocks,{patternName},...args),onSelect()}),[onInsertBlocks,onSelect]),onHover=(0,react.useCallback)((item=>{onToggleInsertionPoint(item),setHoveredItem(item)}),[onToggleInsertionPoint,setHoveredItem]),onClickPatternCategory=(0,react.useCallback)(((patternCategory,filter)=>{setSelectedPatternCategory(patternCategory),setPatternFilter(filter),onPatternCategorySelection?.()}),[setSelectedPatternCategory,onPatternCategorySelection]),showPatternPanel="patterns"===selectedTab&&!delayedFilterValue&&!!selectedPatternCategory,showMediaPanel="media"===selectedTab&&!!selectedMediaCategory,inserterSearch=(0,react.useMemo)((()=>"media"===selectedTab?null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(search_control.A,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",onChange:value=>{hoveredItem&&setHoveredItem(null),setFilterValue(value)},value:filterValue,label:(0,build_module.__)("Search"),placeholder:(0,build_module.__)("Search")}),!!delayedFilterValue&&(0,jsx_runtime.jsx)(search_results.A,{filterValue:delayedFilterValue,onSelect,onHover,rootClientId,clientId,isAppender,__experimentalInsertionIndex,showBlockDirectory:!0,shouldFocusBlock,prioritizePatterns:"patterns"===selectedTab})]})),[selectedTab,hoveredItem,setHoveredItem,setFilterValue,filterValue,delayedFilterValue,onSelect,onHover,shouldFocusBlock,clientId,rootClientId,__experimentalInsertionIndex,isAppender]),blocksTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__block-list",children:(0,jsx_runtime.jsx)(block_types_tab,{ref:blockTypesTabRef,rootClientId:destinationRootClientId,onInsert,onHover,showMostUsedBlocks})}),showInserterHelpPanel&&(0,jsx_runtime.jsxs)("div",{className:"block-editor-inserter__tips",children:[(0,jsx_runtime.jsx)(component.A,{as:"h2",children:(0,build_module.__)("A tip for using the block editor")}),(0,jsx_runtime.jsx)(tips,{})]})]})),[destinationRootClientId,onInsert,onHover,showMostUsedBlocks,showInserterHelpPanel]),patternsTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(block_patterns_tab,{rootClientId:destinationRootClientId,onInsert:onInsertPattern,onSelectCategory:onClickPatternCategory,selectedCategory:selectedPatternCategory,children:showPatternPanel&&(0,jsx_runtime.jsx)(PatternCategoryPreviews,{rootClientId:destinationRootClientId,onInsert:onInsertPattern,category:selectedPatternCategory,patternFilter,showTitlesAsTooltip:!0})})),[destinationRootClientId,onInsertPattern,onClickPatternCategory,patternFilter,selectedPatternCategory,showPatternPanel]),mediaTab=(0,react.useMemo)((()=>(0,jsx_runtime.jsx)(media_tab,{rootClientId:destinationRootClientId,selectedCategory:selectedMediaCategory,onSelectCategory:setSelectedMediaCategory,onInsert,children:showMediaPanel&&(0,jsx_runtime.jsx)(MediaCategoryPanel,{rootClientId:destinationRootClientId,onInsert,category:selectedMediaCategory})})),[destinationRootClientId,onInsert,selectedMediaCategory,setSelectedMediaCategory,showMediaPanel]),tabsRef=(0,react.useRef)();return(0,react.useLayoutEffect)((()=>{tabsRef.current&&window.requestAnimationFrame((()=>{tabsRef.current.querySelector('[role="tab"][aria-selected="true"]')?.focus()}))}),[]),(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("block-editor-inserter__menu",{"show-panel":showPatternPanel||showMediaPanel,"is-zoom-out":isZoomOutMode}),ref,children:[(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__main-area",children:(0,jsx_runtime.jsx)(tabbed_sidebar,{ref:tabsRef,onSelect:value=>{"patterns"!==value&&setSelectedPatternCategory(null),setSelectedTab(value)},onClose,selectedTab,closeButtonLabel:(0,build_module.__)("Close Block Inserter"),tabs:[{name:"blocks",title:(0,build_module.__)("Blocks"),panel:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[inserterSearch,"blocks"===selectedTab&&!delayedFilterValue&&blocksTab]})},{name:"patterns",title:(0,build_module.__)("Patterns"),panel:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[inserterSearch,"patterns"===selectedTab&&!delayedFilterValue&&patternsTab]})},{name:"media",title:(0,build_module.__)("Media"),panel:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[inserterSearch,mediaTab]})}]})}),showInserterHelpPanel&&hoveredItem&&(0,jsx_runtime.jsx)(popover.Ay,{className:"block-editor-inserter__preview-container__popover",placement:"right-start",offset:16,focusOnMount:!1,animate:!1,children:(0,jsx_runtime.jsx)(preview_panel,{item:hoveredItem})})]})}InserterMenu.displayName="InserterMenu";const PrivateInserterMenu=(0,react.forwardRef)(InserterMenu);function PublicInserterMenu(props,ref){return(0,jsx_runtime.jsx)(PrivateInserterMenu,{...props,onPatternCategorySelection:NOOP,ref})}PublicInserterMenu.displayName="PublicInserterMenu";const menu=(0,react.forwardRef)(PublicInserterMenu);InserterMenu.__docgenInfo={description:"",methods:[],displayName:"InserterMenu",props:{__experimentalFilterValue:{defaultValue:{value:"''",computed:!1},required:!1},shouldFocusBlock:{defaultValue:{value:"true",computed:!1},required:!1}}},PublicInserterMenu.__docgenInfo={description:"",methods:[],displayName:"PublicInserterMenu"}},"./packages/block-editor/src/components/inserter/no-results.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/i18n/build-module/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/icons/build-module/icon/index.js"),_wordpress_icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/icons/build-module/library/block-default.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function InserterNoResults(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"block-editor-inserter__no-results",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_wordpress_icons__WEBPACK_IMPORTED_MODULE_2__.A,{className:"block-editor-inserter__no-results-icon",icon:_wordpress_icons__WEBPACK_IMPORTED_MODULE_3__.A}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("p",{children:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_0__.__)("No results found.")})]})}InserterNoResults.displayName="InserterNoResults";const __WEBPACK_DEFAULT_EXPORT__=InserterNoResults;InserterNoResults.__docgenInfo={description:"",methods:[],displayName:"InserterNoResults"}},"./packages/block-editor/src/components/inserter/panel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/build-module/icon/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function InserterPanel({title,icon,children}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"block-editor-inserter__panel-header",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"block-editor-inserter__panel-title",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__.A,{icon})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"block-editor-inserter__panel-content",children})]})}const __WEBPACK_DEFAULT_EXPORT__=InserterPanel;InserterPanel.__docgenInfo={description:"",methods:[],displayName:"InserterPanel"}},"./packages/block-editor/src/components/inserter/search-items.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A_:()=>searchBlockItems,Ds:()=>searchItems});var remove_accents__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(remove_accents__WEBPACK_IMPORTED_MODULE_0__),change_case__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/no-case/dist.es2015/index.js");const defaultGetName=item=>item.name||"",defaultGetTitle=item=>item.title,defaultGetDescription=item=>item.description||"",defaultGetKeywords=item=>item.keywords||[],defaultGetCategory=item=>item.category,defaultGetCollection=()=>null,splitRegexp=[/([\p{Ll}\p{Lo}\p{N}])([\p{Lu}\p{Lt}])/gu,/([\p{Lu}\p{Lt}])([\p{Lu}\p{Lt}][\p{Ll}\p{Lo}])/gu],stripRegexp=/(\p{C}|\p{P}|\p{S})+/giu,extractedWords=new Map,normalizedStrings=new Map;function extractWords(input=""){if(extractedWords.has(input))return extractedWords.get(input);const result=(0,change_case__WEBPACK_IMPORTED_MODULE_1__.W)(input,{splitRegexp,stripRegexp}).split(" ").filter(Boolean);return extractedWords.set(input,result),result}function normalizeString(input=""){if(normalizedStrings.has(input))return normalizedStrings.get(input);let result=remove_accents__WEBPACK_IMPORTED_MODULE_0___default()(input);return result=result.replace(/^\//,""),result=result.toLowerCase(),normalizedStrings.set(input,result),result}const getNormalizedSearchTerms=(input="")=>extractWords(normalizeString(input)),searchBlockItems=(items,categories,collections,searchInput)=>{if(0===getNormalizedSearchTerms(searchInput).length)return items;return searchItems(items,searchInput,{getCategory:item=>categories.find((({slug})=>slug===item.category))?.title,getCollection:item=>collections[item.name.split("/")[0]]?.title})},searchItems=(items=[],searchInput="",config={})=>{if(0===getNormalizedSearchTerms(searchInput).length)return items;const rankedItems=items.map((item=>[item,getItemSearchRank(item,searchInput,config)])).filter((([,rank])=>rank>0));return rankedItems.sort((([,rank1],[,rank2])=>rank2-rank1)),rankedItems.map((([item])=>item))};function getItemSearchRank(item,searchTerm,config={}){const{getName=defaultGetName,getTitle=defaultGetTitle,getDescription=defaultGetDescription,getKeywords=defaultGetKeywords,getCategory=defaultGetCategory,getCollection=defaultGetCollection}=config,name=getName(item),title=getTitle(item),description=getDescription(item),keywords=getKeywords(item),category=getCategory(item),collection=getCollection(item),normalizedSearchInput=normalizeString(searchTerm),normalizedTitle=normalizeString(title);let rank=0;if(normalizedSearchInput===normalizedTitle)rank+=30;else if(normalizedTitle.startsWith(normalizedSearchInput))rank+=20;else{const terms=[name,title,description,...keywords,category,collection].join(" ");0===((unmatchedTerms,unprocessedTerms)=>unmatchedTerms.filter((term=>!getNormalizedSearchTerms(unprocessedTerms).some((unprocessedTerm=>unprocessedTerm.includes(term))))))(extractWords(normalizedSearchInput),terms).length&&(rank+=10)}if(0!==rank&&name.startsWith("core/")){rank+=name!==item.id?1:2}return rank}},"./packages/block-editor/src/components/inserter/search-results.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>search_results});var react=__webpack_require__("./node_modules/react/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js"),use_async_list=__webpack_require__("./packages/compose/build-module/hooks/use-async-list/index.js"),a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),block_types_list=__webpack_require__("./packages/block-editor/src/components/block-types-list/index.js"),block_patterns_list=__webpack_require__("./packages/block-editor/src/components/block-patterns-list/index.js"),slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js");const{Fill:__unstableInserterMenuExtension,Slot}=(0,slot_fill.QJ)("__unstableInserterMenuExtension");__unstableInserterMenuExtension.Slot=Slot;const inserter_menu_extension=__unstableInserterMenuExtension;var panel=__webpack_require__("./packages/block-editor/src/components/inserter/panel.js"),no_results=__webpack_require__("./packages/block-editor/src/components/inserter/no-results.js"),use_insertion_point=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-insertion-point.js"),use_patterns_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-patterns-state.js"),use_block_types_state=__webpack_require__("./packages/block-editor/src/components/inserter/hooks/use-block-types-state.js"),search_items=__webpack_require__("./packages/block-editor/src/components/inserter/search-items.js"),inserter_listbox=__webpack_require__("./packages/block-editor/src/components/inserter-listbox/index.js"),sorting=__webpack_require__("./packages/block-editor/src/utils/sorting.js");var store=__webpack_require__("./packages/block-editor/src/store/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const EMPTY_ARRAY=[];function InserterSearchResults({filterValue,onSelect,onHover,onHoverPattern,rootClientId,clientId,isAppender,__experimentalInsertionIndex,maxBlockPatterns,maxBlockTypes,showBlockDirectory=!1,isDraggable=!0,shouldFocusBlock=!0,prioritizePatterns,selectBlockOnInsert,isQuick}){const debouncedSpeak=(0,use_debounce.A)(a11y_build_module.L,500),{prioritizedBlocks}=(0,use_select.A)((select=>{const blockListSettings=select(store.M).getBlockListSettings(rootClientId);return{prioritizedBlocks:blockListSettings?.prioritizedInserterBlocks||EMPTY_ARRAY}}),[rootClientId]),[destinationRootClientId,onInsertBlocks]=(0,use_insertion_point.A)({onSelect,rootClientId,clientId,isAppender,insertionIndex:__experimentalInsertionIndex,shouldFocusBlock,selectBlockOnInsert}),[blockTypes,blockTypeCategories,blockTypeCollections,onSelectBlockType]=(0,use_block_types_state.A)(destinationRootClientId,onInsertBlocks,isQuick),[patterns,,onClickPattern]=(0,use_patterns_state.A)(onInsertBlocks,destinationRootClientId),filteredBlockPatterns=(0,react.useMemo)((()=>{if(0===maxBlockPatterns)return[];const results=(0,search_items.Ds)(patterns,filterValue);return void 0!==maxBlockPatterns?results.slice(0,maxBlockPatterns):results}),[filterValue,patterns,maxBlockPatterns]);let maxBlockTypesToShow=maxBlockTypes;prioritizePatterns&&filteredBlockPatterns.length>2&&(maxBlockTypesToShow=0);const filteredBlockTypes=(0,react.useMemo)((()=>{if(0===maxBlockTypesToShow)return[];const nonPatternBlockTypes=blockTypes.filter((blockType=>"core/block"!==blockType.name));let orderedItems=(0,sorting.M)(nonPatternBlockTypes,"frecency","desc");var items,priority;!filterValue&&prioritizedBlocks.length&&(items=orderedItems,orderedItems=(priority=prioritizedBlocks)?(items.sort((({id:aName},{id:bName})=>{let aIndex=priority.indexOf(aName),bIndex=priority.indexOf(bName);return aIndex<0&&(aIndex=priority.length),bIndex<0&&(bIndex=priority.length),aIndex-bIndex})),items):items);const results=(0,search_items.A_)(orderedItems,blockTypeCategories,blockTypeCollections,filterValue);return void 0!==maxBlockTypesToShow?results.slice(0,maxBlockTypesToShow):results}),[filterValue,blockTypes,blockTypeCategories,blockTypeCollections,maxBlockTypesToShow,prioritizedBlocks]);(0,react.useEffect)((()=>{if(!filterValue)return;const count=filteredBlockTypes.length+filteredBlockPatterns.length,resultsFoundMessage=(0,build_module.nv)((0,build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[filterValue,debouncedSpeak,filteredBlockTypes,filteredBlockPatterns]);const currentShownBlockTypes=(0,use_async_list.A)(filteredBlockTypes,{step:9}),currentShownPatterns=(0,use_async_list.A)(currentShownBlockTypes.length===filteredBlockTypes.length?filteredBlockPatterns:EMPTY_ARRAY),hasItems=filteredBlockTypes.length>0||filteredBlockPatterns.length>0,blocksUI=!!filteredBlockTypes.length&&(0,jsx_runtime.jsx)(panel.A,{title:(0,jsx_runtime.jsx)(component.A,{children:(0,build_module.__)("Blocks")}),children:(0,jsx_runtime.jsx)(block_types_list.A,{items:currentShownBlockTypes,onSelect:onSelectBlockType,onHover,label:(0,build_module.__)("Blocks"),isDraggable})}),patternsUI=!!filteredBlockPatterns.length&&(0,jsx_runtime.jsx)(panel.A,{title:(0,jsx_runtime.jsx)(component.A,{children:(0,build_module.__)("Block patterns")}),children:(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-patterns",children:(0,jsx_runtime.jsx)(block_patterns_list.A,{shownPatterns:currentShownPatterns,blockPatterns:filteredBlockPatterns,onClickPattern,onHover:onHoverPattern,isDraggable})})});return(0,jsx_runtime.jsxs)(inserter_listbox.Ay,{children:[!showBlockDirectory&&!hasItems&&(0,jsx_runtime.jsx)(no_results.A,{}),prioritizePatterns?patternsUI:blocksUI,!!filteredBlockTypes.length&&!!filteredBlockPatterns.length&&(0,jsx_runtime.jsx)("div",{className:"block-editor-inserter__quick-inserter-separator"}),prioritizePatterns?blocksUI:patternsUI,showBlockDirectory&&(0,jsx_runtime.jsx)(inserter_menu_extension.Slot,{fillProps:{onSelect:onSelectBlockType,onHover,filterValue,hasItems,rootClientId:destinationRootClientId},children:fills=>fills.length?fills:hasItems?null:(0,jsx_runtime.jsx)(no_results.A,{})})]})}InserterSearchResults.displayName="InserterSearchResults";const search_results=InserterSearchResults;InserterSearchResults.__docgenInfo={description:"",methods:[],displayName:"InserterSearchResults",props:{showBlockDirectory:{defaultValue:{value:"false",computed:!1},required:!1},isDraggable:{defaultValue:{value:"true",computed:!1},required:!1},shouldFocusBlock:{defaultValue:{value:"true",computed:!1},required:!1}}}},"./packages/block-editor/src/components/use-settings/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>useSettings});var _wordpress_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),_block_edit__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/block-editor/src/components/block-edit/context.js"),_store__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/block-editor/src/store/index.js"),_lock_unlock__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/block-editor/src/lock-unlock.js");function useSettings(...paths){const{clientId=null}=(0,_block_edit__WEBPACK_IMPORTED_MODULE_1__.m_)();return(0,_wordpress_data__WEBPACK_IMPORTED_MODULE_2__.A)((select=>(0,_lock_unlock__WEBPACK_IMPORTED_MODULE_3__.T)(select(_store__WEBPACK_IMPORTED_MODULE_0__.M)).getBlockSettings(clientId,...paths)),[clientId,...paths])}},"./packages/icons/build-module/icon/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function Icon({icon,size=24,...props},ref){return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(icon,{width:size,height:size,...props,ref})}))},"./node_modules/use-memo-one/dist/use-memo-one.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MA:()=>useMemoOne});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useMemoOne(getResult,inputs){var initial=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((function(){return{inputs,result:getResult()}}))[0],committed=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(initial),cache=Boolean(inputs&&committed.current.inputs&&function areInputsEqual(newInputs,lastInputs){if(newInputs.length!==lastInputs.length)return!1;for(var i=0;i<newInputs.length;i++)if(newInputs[i]!==lastInputs[i])return!1;return!0}(inputs,committed.current.inputs))?committed.current:{inputs,result:getResult()};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){committed.current=cache}),[cache]),cache.result}}}]);