iframe[name="editor-canvas"].is-zoomed-out {
	$scale: var(--wp-block-editor-iframe-zoom-out-scale);
	$inset: var(--wp-block-editor-iframe-zoom-out-inset);
	position: relative;
	inset: $inset;
	outline: calc(1px / #{$scale}) solid rgba($color: #000, $alpha: 0.133); // 0.133 = $gray-200 but with alpha.
	transform: scale(#{$scale});
	transform-origin: 50% 0;
	// Transform scale doesn’t affect the layout size of the element, so counterscale
	// the width, height and negative margins to fit the untransformed size.
	width: calc((100% - #{$inset} * 2) / #{$scale});
	margin-inline: calc((-50% + #{$inset}) / #{$scale} + 50% - #{$inset});
	height: calc((100% - #{$inset} * 2) / #{$scale});
	margin-block: 0 calc(-100% / #{$scale});
}

.block-editor-iframe__html {
	// Keeps body background styles from being clipped.
	// See: https://github.com/WordPress/gutenberg/issues/44374#issuecomment-1260784743
	height: auto;
	// Keeps body background image from repeating.
	// See: https://github.com/WordPress/gutenberg/issues/46782
	min-height: 100%;
}

.block-editor-iframe__html.is-zoomed-out {
	$scale: var(--wp-block-editor-iframe-zoom-out-scale);

	// Customize the scrollbar to counterscale its width but only for devices with fine
	// pointers as otherwise scrollbars are likely to be overlaid and not affected by
	// scaling. This isn’t perfect as some devices might have a fine cursor but still use
	// overlaid scrollbars. Additionally, the width of the scrollbar reduces the width of
	// the content area so the "default" scaling should factor it in to accurately keep
	// the content width the same as when unzoomed.
	@media (pointer: fine) {
		&::-webkit-scrollbar {
			// 15px seems a de facto standard but likely not all devices. It may
			// be possible to derive the device size with some DOM measurements
			// if this needs to be improved.
			width: calc(15px / #{$scale});
		}
		&::-webkit-scrollbar-track {
			background-color: $gray-100;
			border-inline-start: calc(1px / #{$scale}) solid $gray-300;
		}
		&::-webkit-scrollbar-thumb {
			background-color: $gray-400;
			background-clip: content-box;
			border-color: transparent;
			border-style: solid;
			$border-width-base: calc(3px / #{$scale});
			border-width: $border-width-base;
			// One more pixel on the start side to make the thumb appear centered
			// in the track due to its one pixel border on the start side.
			border-inline-start-width: calc(4px / #{$scale});
			border-radius: 999px;
		}
	}

	// Expands main content area.
	// See: https://github.com/WordPress/gutenberg/pull/59512
	&,
	> body,
	> body > .is-root-container:not(.wp-block-post-content) {
		display: flex;
		flex-direction: column;
		flex: 1; // Doesn’t effect the html element but grouping is simpler this way.
	}

	> body > .is-root-container:not(.wp-block-post-content) > main {
		flex: 1;
	}
}

.block-editor-iframe__body {
	position: relative;
}
