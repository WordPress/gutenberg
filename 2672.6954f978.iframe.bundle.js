"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[2672],{"./packages/components/build-module/grid/component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>grid_component});var context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),component=__webpack_require__("./packages/components/build-module/view/component.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js");const ALIGNMENTS={bottom:{alignItems:"flex-end",justifyContent:"center"},bottomLeft:{alignItems:"flex-start",justifyContent:"flex-end"},bottomRight:{alignItems:"flex-end",justifyContent:"flex-end"},center:{alignItems:"center",justifyContent:"center"},spaced:{alignItems:"center",justifyContent:"space-between"},left:{alignItems:"center",justifyContent:"flex-start"},right:{alignItems:"center",justifyContent:"flex-end"},stretch:{alignItems:"stretch"},top:{alignItems:"flex-start",justifyContent:"center"},topLeft:{alignItems:"flex-start",justifyContent:"flex-start"},topRight:{alignItems:"flex-start",justifyContent:"flex-end"}};var use_responsive_value=__webpack_require__("./packages/components/build-module/utils/use-responsive-value.js"),config_values=__webpack_require__("./packages/components/build-module/utils/config-values.js"),use_cx=__webpack_require__("./packages/components/build-module/utils/hooks/use-cx.js");function useGrid(props){const{align,alignment,className,columnGap,columns=2,gap=3,isInline=!1,justify,rowGap,rows,templateColumns,templateRows,...otherProps}=(0,use_context_system.A)(props,"Grid"),columnsAsArray=Array.isArray(columns)?columns:[columns],column=(0,use_responsive_value.t)(columnsAsArray),rowsAsArray=Array.isArray(rows)?rows:[rows],row=(0,use_responsive_value.t)(rowsAsArray),gridTemplateColumns=templateColumns||!!columns&&`repeat( ${column}, 1fr )`,gridTemplateRows=templateRows||!!rows&&`repeat( ${row}, 1fr )`,cx=(0,use_cx.l)();return{...otherProps,className:(0,react.useMemo)((()=>{const alignmentProps=function getAlignmentProps(alignment){return alignment?ALIGNMENTS[alignment]:{}}(alignment),gridClasses=(0,emotion_react_browser_esm.AH)({alignItems:align,display:isInline?"inline-grid":"grid",gap:`calc( ${config_values.A.gridBase} * ${gap} )`,gridTemplateColumns:gridTemplateColumns||void 0,gridTemplateRows:gridTemplateRows||void 0,gridRowGap:rowGap,gridColumnGap:columnGap,justifyContent:justify,verticalAlign:isInline?"middle":void 0,...alignmentProps},"","","","");return cx(gridClasses,className)}),[align,alignment,className,columnGap,cx,gap,gridTemplateColumns,gridTemplateRows,isInline,justify,rowGap])}}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const grid_component=(0,context_connect.KZ)((function UnconnectedGrid(props,forwardedRef){const gridProps=useGrid(props);return(0,jsx_runtime.jsx)(component.A,{...gridProps,ref:forwardedRef})}),"Grid")},"./packages/components/build-module/tools-panel/context.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>useToolsPanelContext,z:()=>ToolsPanelContext});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const noop=()=>{},ToolsPanelContext=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createContext)({menuItems:{default:{},optional:{}},hasMenuItems:!1,isResetting:!1,shouldRenderPlaceholderItems:!1,registerPanelItem:noop,deregisterPanelItem:noop,flagItemCustomization:noop,registerResetAllFilter:noop,deregisterResetAllFilter:noop,areAllOptionalControlsHidden:!0}),useToolsPanelContext=()=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useContext)(ToolsPanelContext)},"./packages/components/build-module/tools-panel/styles.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AZ:()=>ToolsPanelHeading,N5:()=>DefaultControlsItem,Xt:()=>ToolsPanelWithInnerWrapper,gg:()=>ResetLabel,iX:()=>ToolsPanel,jp:()=>ToolsPanelItem,rI:()=>DropdownMenu,wo:()=>ToolsPanelItemPlaceholder,zO:()=>ToolsPanelHeader,zz:()=>ToolsPanelHiddenInnerWrapper});var _emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),_emotion_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),_base_control_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/components/build-module/base-control/styles/base-control-styles.js"),_input_control_styles_input_control_styles__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/components/build-module/input-control/styles/input-control-styles.js"),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/build-module/utils/config-values.js"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/components/build-module/utils/colors-values.js"),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/components/build-module/utils/rtl.js"),_utils_space__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/utils/space.js");const toolsPanelGrid={columns:columns=>(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.AH)("grid-template-columns:",`repeat( ${columns}, minmax(0, 1fr) )`,";","","",""),spacing:(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.AH)("column-gap:",(0,_utils_space__WEBPACK_IMPORTED_MODULE_2__.x)(4),";row-gap:",(0,_utils_space__WEBPACK_IMPORTED_MODULE_2__.x)(4),";","","",""),item:{fullWidth:{name:"18iuzk9",styles:"grid-column:1/-1"}}},ToolsPanel=columns=>(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.AH)(toolsPanelGrid.columns(columns)," ",toolsPanelGrid.spacing," border-top:",_utils__WEBPACK_IMPORTED_MODULE_3__.A.borderWidth," solid ",_utils__WEBPACK_IMPORTED_MODULE_4__.l.gray[300],";margin-top:-1px;padding:",(0,_utils_space__WEBPACK_IMPORTED_MODULE_2__.x)(4),";","","",""),ToolsPanelWithInnerWrapper=columns=>(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.AH)(">div:not( :first-of-type ){display:grid;",toolsPanelGrid.columns(columns)," ",toolsPanelGrid.spacing," ",toolsPanelGrid.item.fullWidth,";}","","",""),ToolsPanelHiddenInnerWrapper={name:"huufmu",styles:">div:not( :first-of-type ){display:none;}"},ToolsPanelHeader=(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.AH)(toolsPanelGrid.item.fullWidth," gap:",(0,_utils_space__WEBPACK_IMPORTED_MODULE_2__.x)(2),";.components-dropdown-menu{margin:",(0,_utils_space__WEBPACK_IMPORTED_MODULE_2__.x)(-1)," 0;line-height:0;}&&&& .components-dropdown-menu__toggle{padding:0;min-width:",(0,_utils_space__WEBPACK_IMPORTED_MODULE_2__.x)(6),";}","","",""),ToolsPanelHeading={name:"1pmxm02",styles:"font-size:inherit;font-weight:500;line-height:normal;&&{margin:0;}"},ToolsPanelItem=(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.AH)(toolsPanelGrid.item.fullWidth,"&>div,&>fieldset{padding-bottom:0;margin-bottom:0;max-width:100%;}&& ",_base_control_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_5__.mO,"{margin-bottom:0;",_base_control_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_5__.mh,":last-child{margin-bottom:0;}}",_base_control_styles_base_control_styles__WEBPACK_IMPORTED_MODULE_5__.te,"{margin-bottom:0;}&& ",_input_control_styles_input_control_styles__WEBPACK_IMPORTED_MODULE_6__.cR,"{label{line-height:1.4em;}}","","",""),ToolsPanelItemPlaceholder={name:"eivff4",styles:"display:none"},DropdownMenu={name:"16gsvie",styles:"min-width:200px"},ResetLabel=(0,_emotion_styled_base__WEBPACK_IMPORTED_MODULE_0__.A)("span",{target:"ews648u0"})("color:",_utils__WEBPACK_IMPORTED_MODULE_4__.l.theme.accentDarker10,";font-size:11px;font-weight:500;line-height:1.4;",(0,_utils__WEBPACK_IMPORTED_MODULE_7__.h)({marginLeft:(0,_utils_space__WEBPACK_IMPORTED_MODULE_2__.x)(3)})," text-transform:uppercase;"),DefaultControlsItem=(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.AH)("color:",_utils__WEBPACK_IMPORTED_MODULE_4__.l.gray[900],";&&[aria-disabled='true']{color:",_utils__WEBPACK_IMPORTED_MODULE_4__.l.gray[700],";opacity:1;&:hover{color:",_utils__WEBPACK_IMPORTED_MODULE_4__.l.gray[700],";}",ResetLabel,"{opacity:0.3;}}","","","")},"./packages/components/build-module/tools-panel/tools-panel-item/component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>tools_panel_item_component});var use_previous=__webpack_require__("./packages/compose/build-module/hooks/use-previous/index.js"),react=__webpack_require__("./node_modules/react/index.js"),styles=__webpack_require__("./packages/components/build-module/tools-panel/styles.js"),context=__webpack_require__("./packages/components/build-module/tools-panel/context.js"),use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js"),use_cx=__webpack_require__("./packages/components/build-module/utils/hooks/use-cx.js");const noop=()=>{};var component=__webpack_require__("./packages/components/build-module/view/component.js"),context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const tools_panel_item_component=(0,context_connect.KZ)(((props,forwardedRef)=>{const{children,isShown,shouldRenderPlaceholder,...toolsPanelItemProps}=function useToolsPanelItem(props){const{className,hasValue,isShownByDefault=!1,label,panelId,resetAllFilter=noop,onDeselect,onSelect,...otherProps}=(0,use_context_system.A)(props,"ToolsPanelItem"),{panelId:currentPanelId,menuItems,registerResetAllFilter,deregisterResetAllFilter,registerPanelItem,deregisterPanelItem,flagItemCustomization,isResetting,shouldRenderPlaceholderItems:shouldRenderPlaceholder,firstDisplayedItem,lastDisplayedItem,__experimentalFirstVisibleItemClass,__experimentalLastVisibleItemClass}=(0,context.M)(),hasValueCallback=(0,react.useCallback)(hasValue,[panelId]),resetAllFilterCallback=(0,react.useCallback)(resetAllFilter,[panelId]),previousPanelId=(0,use_previous.A)(currentPanelId),hasMatchingPanel=currentPanelId===panelId||null===currentPanelId;(0,react.useLayoutEffect)((()=>(hasMatchingPanel&&null!==previousPanelId&&registerPanelItem({hasValue:hasValueCallback,isShownByDefault,label,panelId}),()=>{(null===previousPanelId&&currentPanelId||currentPanelId===panelId)&&deregisterPanelItem(label)})),[currentPanelId,hasMatchingPanel,isShownByDefault,label,hasValueCallback,panelId,previousPanelId,registerPanelItem,deregisterPanelItem]),(0,react.useEffect)((()=>(hasMatchingPanel&&registerResetAllFilter(resetAllFilterCallback),()=>{hasMatchingPanel&&deregisterResetAllFilter(resetAllFilterCallback)})),[registerResetAllFilter,deregisterResetAllFilter,resetAllFilterCallback,hasMatchingPanel]);const menuGroup=isShownByDefault?"default":"optional",isMenuItemChecked=menuItems?.[menuGroup]?.[label],wasMenuItemChecked=(0,use_previous.A)(isMenuItemChecked),isRegistered=void 0!==menuItems?.[menuGroup]?.[label],isValueSet=hasValue();(0,react.useEffect)((()=>{(isShownByDefault||isValueSet)&&flagItemCustomization(isValueSet,label,menuGroup)}),[isValueSet,menuGroup,label,flagItemCustomization,isShownByDefault]),(0,react.useEffect)((()=>{isRegistered&&!isResetting&&hasMatchingPanel&&(!isMenuItemChecked||isValueSet||wasMenuItemChecked||onSelect?.(),!isMenuItemChecked&&isValueSet&&wasMenuItemChecked&&onDeselect?.())}),[hasMatchingPanel,isMenuItemChecked,isRegistered,isResetting,isValueSet,wasMenuItemChecked,onSelect,onDeselect]);const isShown=isShownByDefault?void 0!==menuItems?.[menuGroup]?.[label]:isMenuItemChecked,cx=(0,use_cx.l)(),classes=(0,react.useMemo)((()=>{const shouldApplyPlaceholderStyles=shouldRenderPlaceholder&&!isShown,firstItemStyle=firstDisplayedItem===label&&__experimentalFirstVisibleItemClass,lastItemStyle=lastDisplayedItem===label&&__experimentalLastVisibleItemClass;return cx(styles.jp,shouldApplyPlaceholderStyles&&styles.wo,!shouldApplyPlaceholderStyles&&className,firstItemStyle,lastItemStyle)}),[isShown,shouldRenderPlaceholder,className,cx,firstDisplayedItem,lastDisplayedItem,__experimentalFirstVisibleItemClass,__experimentalLastVisibleItemClass,label]);return{...otherProps,isShown,shouldRenderPlaceholder,className:classes}}(props);return isShown?(0,jsx_runtime.jsx)(component.A,{...toolsPanelItemProps,ref:forwardedRef,children}):shouldRenderPlaceholder?(0,jsx_runtime.jsx)(component.A,{...toolsPanelItemProps,ref:forwardedRef}):null}),"ToolsPanelItem")},"./packages/components/build-module/tools-panel/tools-panel/component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>tools_panel_component});var build_module=__webpack_require__("./packages/a11y/build-module/index.js"),check=__webpack_require__("./packages/icons/build-module/library/check.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js"),more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),menu_group=__webpack_require__("./packages/components/build-module/menu-group/index.js"),menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js"),component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),heading_component=__webpack_require__("./packages/components/build-module/heading/component.js"),react=__webpack_require__("./node_modules/react/index.js"),styles=__webpack_require__("./packages/components/build-module/tools-panel/styles.js"),context=__webpack_require__("./packages/components/build-module/tools-panel/context.js"),use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js"),use_cx=__webpack_require__("./packages/components/build-module/utils/hooks/use-cx.js");var context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const DefaultControlsGroup=({itemClassName,items,toggleItem})=>{if(!items.length)return null;const resetSuffix=(0,jsx_runtime.jsx)(styles.gg,{"aria-hidden":!0,children:(0,i18n_build_module.__)("Reset")});return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:items.map((([label,hasValue])=>hasValue?(0,jsx_runtime.jsx)(menu_item.A,{className:itemClassName,role:"menuitem",label:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Reset %s"),label),onClick:()=>{toggleItem(label),(0,build_module.L)((0,i18n_build_module.nv)((0,i18n_build_module.__)("%s reset to default"),label),"assertive")},suffix:resetSuffix,children:label},label):(0,jsx_runtime.jsx)(menu_item.A,{icon:check.A,className:itemClassName,role:"menuitemcheckbox",isSelected:!0,"aria-disabled":!0,children:label},label)))})},OptionalControlsGroup=({items,toggleItem})=>items.length?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:items.map((([label,isSelected])=>{const itemLabel=isSelected?(0,i18n_build_module.nv)((0,i18n_build_module.__)("Hide and reset %s"),label):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Show %s"),label);return(0,jsx_runtime.jsx)(menu_item.A,{icon:isSelected?check.A:null,isSelected,label:itemLabel,onClick:()=>{isSelected?(0,build_module.L)((0,i18n_build_module.nv)((0,i18n_build_module.__)("%s hidden and reset to default"),label),"assertive"):(0,build_module.L)((0,i18n_build_module.nv)((0,i18n_build_module.__)("%s is now visible"),label),"assertive"),toggleItem(label)},role:"menuitemcheckbox",children:label},label)}))}):null,tools_panel_header_component=(0,context_connect.KZ)(((props,forwardedRef)=>{const{areAllOptionalControlsHidden,defaultControlsItemClassName,dropdownMenuClassName,hasMenuItems,headingClassName,headingLevel=2,label:labelText,menuItems,resetAll,toggleItem,dropdownMenuProps,...headerProps}=function useToolsPanelHeader(props){const{className,headingLevel=2,...otherProps}=(0,use_context_system.A)(props,"ToolsPanelHeader"),cx=(0,use_cx.l)(),classes=(0,react.useMemo)((()=>cx(styles.zO,className)),[className,cx]),dropdownMenuClassName=(0,react.useMemo)((()=>cx(styles.rI)),[cx]),headingClassName=(0,react.useMemo)((()=>cx(styles.AZ)),[cx]),defaultControlsItemClassName=(0,react.useMemo)((()=>cx(styles.N5)),[cx]),{menuItems,hasMenuItems,areAllOptionalControlsHidden}=(0,context.M)();return{...otherProps,areAllOptionalControlsHidden,defaultControlsItemClassName,dropdownMenuClassName,hasMenuItems,headingClassName,headingLevel,menuItems,className:classes}}(props);if(!labelText)return null;const defaultItems=Object.entries(menuItems?.default||{}),optionalItems=Object.entries(menuItems?.optional||{}),dropDownMenuIcon=areAllOptionalControlsHidden?plus.A:more_vertical.A,dropDownMenuLabelText=(0,i18n_build_module.nv)((0,i18n_build_module._x)("%s options","Button label to reveal tool panel options"),labelText),dropdownMenuDescriptionText=areAllOptionalControlsHidden?(0,i18n_build_module.__)("All options are currently hidden"):void 0,canResetAll=[...defaultItems,...optionalItems].some((([,isSelected])=>isSelected));return(0,jsx_runtime.jsxs)(component.A,{...headerProps,ref:forwardedRef,children:[(0,jsx_runtime.jsx)(heading_component.A,{level:headingLevel,className:headingClassName,children:labelText}),hasMenuItems&&(0,jsx_runtime.jsx)(dropdown_menu.A,{...dropdownMenuProps,icon:dropDownMenuIcon,label:dropDownMenuLabelText,menuProps:{className:dropdownMenuClassName},toggleProps:{size:"small",description:dropdownMenuDescriptionText},children:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu_group.A,{label:labelText,children:[(0,jsx_runtime.jsx)(DefaultControlsGroup,{items:defaultItems,toggleItem,itemClassName:defaultControlsItemClassName}),(0,jsx_runtime.jsx)(OptionalControlsGroup,{items:optionalItems,toggleItem})]}),(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(menu_item.A,{"aria-disabled":!canResetAll,variant:"tertiary",onClick:()=>{canResetAll&&(resetAll(),(0,build_module.L)((0,i18n_build_module.__)("All options reset"),"assertive"))},children:(0,i18n_build_module.__)("Reset all")})})]})})]})}),"ToolsPanelHeader");function emptyState(){return{panelItems:[],menuItemOrder:[],menuItems:{default:{},optional:{}}}}const generateMenuItems=({panelItems,shouldReset,currentMenuItems,menuItemOrder})=>{const newMenuItems={default:{},optional:{}},menuItems={default:{},optional:{}};return panelItems.forEach((({hasValue,isShownByDefault,label})=>{const group=isShownByDefault?"default":"optional",existingItemValue=currentMenuItems?.[group]?.[label],value=existingItemValue||hasValue();newMenuItems[group][label]=!shouldReset&&value})),menuItemOrder.forEach((key=>{newMenuItems.default.hasOwnProperty(key)&&(menuItems.default[key]=newMenuItems.default[key]),newMenuItems.optional.hasOwnProperty(key)&&(menuItems.optional[key]=newMenuItems.optional[key])})),Object.keys(newMenuItems.default).forEach((key=>{menuItems.default.hasOwnProperty(key)||(menuItems.default[key]=newMenuItems.default[key])})),Object.keys(newMenuItems.optional).forEach((key=>{menuItems.optional.hasOwnProperty(key)||(menuItems.optional[key]=newMenuItems.optional[key])})),menuItems};function panelReducer(state,action){const panelItems=function panelItemsReducer(panelItems,action){switch(action.type){case"REGISTER_PANEL":{const newItems=[...panelItems],existingIndex=newItems.findIndex((oldItem=>oldItem.label===action.item.label));return-1!==existingIndex&&newItems.splice(existingIndex,1),newItems.push(action.item),newItems}case"UNREGISTER_PANEL":{const index=panelItems.findIndex((item=>item.label===action.label));if(-1!==index){const newItems=[...panelItems];return newItems.splice(index,1),newItems}return panelItems}default:return panelItems}}(state.panelItems,action),menuItemOrder=function menuItemOrderReducer(menuItemOrder,action){return"REGISTER_PANEL"===action.type?menuItemOrder.includes(action.item.label)?menuItemOrder:[...menuItemOrder,action.item.label]:menuItemOrder}(state.menuItemOrder,action),menuItems=function menuItemsReducer(state,action){switch(action.type){case"REGISTER_PANEL":case"UNREGISTER_PANEL":return generateMenuItems({currentMenuItems:state.menuItems,panelItems:state.panelItems,menuItemOrder:state.menuItemOrder,shouldReset:!1});case"RESET_ALL":return generateMenuItems({panelItems:state.panelItems,menuItemOrder:state.menuItemOrder,shouldReset:!0});case"UPDATE_VALUE":{const oldValue=state.menuItems[action.group][action.label];return action.value===oldValue?state.menuItems:{...state.menuItems,[action.group]:{...state.menuItems[action.group],[action.label]:action.value}}}case"TOGGLE_VALUE":{const currentItem=state.panelItems.find((item=>item.label===action.label));if(!currentItem)return state.menuItems;const menuGroup=currentItem.isShownByDefault?"default":"optional";return{...state.menuItems,[menuGroup]:{...state.menuItems[menuGroup],[action.label]:!state.menuItems[menuGroup][action.label]}}}default:return state.menuItems}}({panelItems,menuItemOrder,menuItems:state.menuItems},action);return{panelItems,menuItemOrder,menuItems}}function resetAllFiltersReducer(filters,action){switch(action.type){case"REGISTER":return[...filters,action.filter];case"UNREGISTER":return filters.filter((f=>f!==action.filter));default:return filters}}const isMenuItemTypeEmpty=obj=>0===Object.keys(obj).length;var grid_component=__webpack_require__("./packages/components/build-module/grid/component.js");const tools_panel_component=(0,context_connect.KZ)(((props,forwardedRef)=>{const{children,label,panelContext,resetAllItems,toggleItem,headingLevel,dropdownMenuProps,...toolsPanelProps}=function useToolsPanel(props){const{className,headingLevel=2,resetAll,panelId,hasInnerWrapper=!1,shouldRenderPlaceholderItems=!1,__experimentalFirstVisibleItemClass,__experimentalLastVisibleItemClass,...otherProps}=(0,use_context_system.A)(props,"ToolsPanel"),isResettingRef=(0,react.useRef)(!1),wasResetting=isResettingRef.current;(0,react.useEffect)((()=>{wasResetting&&(isResettingRef.current=!1)}),[wasResetting]);const[{panelItems,menuItems},panelDispatch]=(0,react.useReducer)(panelReducer,void 0,emptyState),[resetAllFilters,dispatchResetAllFilters]=(0,react.useReducer)(resetAllFiltersReducer,[]),registerPanelItem=(0,react.useCallback)((item=>{panelDispatch({type:"REGISTER_PANEL",item})}),[]),deregisterPanelItem=(0,react.useCallback)((label=>{panelDispatch({type:"UNREGISTER_PANEL",label})}),[]),registerResetAllFilter=(0,react.useCallback)((filter=>{dispatchResetAllFilters({type:"REGISTER",filter})}),[]),deregisterResetAllFilter=(0,react.useCallback)((filter=>{dispatchResetAllFilters({type:"UNREGISTER",filter})}),[]),flagItemCustomization=(0,react.useCallback)(((value,label,group="default")=>{panelDispatch({type:"UPDATE_VALUE",group,label,value})}),[]),areAllOptionalControlsHidden=(0,react.useMemo)((()=>isMenuItemTypeEmpty(menuItems.default)&&!isMenuItemTypeEmpty(menuItems.optional)&&Object.values(menuItems.optional).every((isSelected=>!isSelected))),[menuItems]),cx=(0,use_cx.l)(),classes=(0,react.useMemo)((()=>{const wrapperStyle=hasInnerWrapper&&styles.Xt(2),emptyStyle=areAllOptionalControlsHidden&&styles.zz;return cx(styles.iX(2),wrapperStyle,emptyStyle,className)}),[areAllOptionalControlsHidden,className,cx,hasInnerWrapper]),toggleItem=(0,react.useCallback)((label=>{panelDispatch({type:"TOGGLE_VALUE",label})}),[]),resetAllItems=(0,react.useCallback)((()=>{"function"==typeof resetAll&&(isResettingRef.current=!0,resetAll(resetAllFilters)),panelDispatch({type:"RESET_ALL"})}),[resetAllFilters,resetAll]),getFirstVisibleItemLabel=items=>{const optionalItems=menuItems.optional||{},firstItem=items.find((item=>item.isShownByDefault||optionalItems[item.label]));return firstItem?.label},firstDisplayedItem=getFirstVisibleItemLabel(panelItems),lastDisplayedItem=getFirstVisibleItemLabel([...panelItems].reverse()),hasMenuItems=panelItems.length>0;return{...otherProps,headingLevel,panelContext:(0,react.useMemo)((()=>({areAllOptionalControlsHidden,deregisterPanelItem,deregisterResetAllFilter,firstDisplayedItem,flagItemCustomization,hasMenuItems,isResetting:isResettingRef.current,lastDisplayedItem,menuItems,panelId,registerPanelItem,registerResetAllFilter,shouldRenderPlaceholderItems,__experimentalFirstVisibleItemClass,__experimentalLastVisibleItemClass})),[areAllOptionalControlsHidden,deregisterPanelItem,deregisterResetAllFilter,firstDisplayedItem,flagItemCustomization,lastDisplayedItem,menuItems,panelId,hasMenuItems,registerResetAllFilter,registerPanelItem,shouldRenderPlaceholderItems,__experimentalFirstVisibleItemClass,__experimentalLastVisibleItemClass]),resetAllItems,toggleItem,className:classes}}(props);return(0,jsx_runtime.jsx)(grid_component.A,{...toolsPanelProps,columns:2,ref:forwardedRef,children:(0,jsx_runtime.jsxs)(context.z.Provider,{value:panelContext,children:[(0,jsx_runtime.jsx)(tools_panel_header_component,{label,resetAll:resetAllItems,toggleItem,headingLevel,dropdownMenuProps}),children]})})}),"ToolsPanel")}}]);