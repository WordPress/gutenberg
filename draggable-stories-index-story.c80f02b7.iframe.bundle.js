"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[675],{"./packages/compose/build-module/hooks/use-instance-id/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const instanceMap=new WeakMap;const __WEBPACK_DEFAULT_EXPORT__=function useInstanceId(object,prefix,preferredId){return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>{if(preferredId)return preferredId;const id=function createId(object){const instances=instanceMap.get(object)||0;return instanceMap.set(object,instances+1),instances}(object);return prefix?`${prefix}-${id}`:id}),[object,preferredId,prefix])}},"./packages/compose/build-module/utils/debounce/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>debounce});const debounce=(func,wait,options)=>{let lastArgs,lastThis,result,timerId,lastCallTime,maxWait=0,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;function invokeFunc(time){const args=lastArgs,thisArg=lastThis;return lastArgs=void 0,lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args),result}function startTimer(pendingFunc,waitTime){timerId=setTimeout(pendingFunc,waitTime)}function getTimeSinceLastCall(time){return time-(lastCallTime||0)}function shouldInvoke(time){const timeSinceLastCall=getTimeSinceLastCall(time);return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){const time=Date.now();if(shouldInvoke(time))return trailingEdge(time);startTimer(timerExpired,function remainingWait(time){const timeSinceLastCall=getTimeSinceLastCall(time),timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?Math.min(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}(time))}function clearTimer(){timerId=void 0}function trailingEdge(time){return clearTimer(),trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function pending(){return void 0!==timerId}function debounced(...args){const time=Date.now(),isInvoking=shouldInvoke(time);if(lastArgs=args,lastThis=this,lastCallTime=time,isInvoking){if(!pending())return function leadingEdge(time){return lastInvokeTime=time,startTimer(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return startTimer(timerExpired,wait),invokeFunc(lastCallTime)}return pending()||startTimer(timerExpired,wait),result}return options&&(leading=!!options.leading,maxing="maxWait"in options,void 0!==options.maxWait&&(maxWait=Math.max(options.maxWait,wait)),trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){!function cancelTimer(){void 0!==timerId&&clearTimeout(timerId)}(),lastInvokeTime=0,clearTimer(),lastArgs=lastCallTime=lastThis=void 0},debounced.flush=function flush(){return pending()?trailingEdge(Date.now()):result},debounced.pending=pending,debounced}},"./packages/compose/build-module/utils/throttle/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>throttle});var _debounce__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/compose/build-module/utils/debounce/index.js");const throttle=(func,wait,options)=>{let leading=!0,trailing=!0;return options&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),(0,_debounce__WEBPACK_IMPORTED_MODULE_0__.s)(func,wait,{leading,trailing,maxWait:wait})}},"./packages/icons/build-module/icon/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function Icon({icon,size=24,...props},ref){return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.cloneElement)(icon,{width:size,height:size,...props,ref})}))},"./packages/icons/build-module/library/more.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M4 9v1.5h16V9H4zm12 5.5h4V13h-4v1.5zm-6 0h4V13h-4v1.5zm-6 0h4V13H4v1.5z"})})},"./packages/primitives/build-module/svg/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>G,N1:()=>Line,jl:()=>Circle,rw:()=>Rect,t4:()=>SVG,wA:()=>Path});var clsx__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_element__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Circle=props=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("circle",props),G=props=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("g",props),Line=props=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("line",props),Path=props=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("path",props),Rect=props=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.createElement)("rect",props),SVG=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((({className,isPressed,...props},ref)=>{const appliedProps={...props,className:(0,clsx__WEBPACK_IMPORTED_MODULE_2__.A)(className,{"is-pressed":isPressed})||void 0,"aria-hidden":!0,focusable:!1};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{...appliedProps,ref})}));SVG.displayName="SVG"},"./packages/components/src/draggable/stories/index.story.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AppendElementToOwnerDocument:()=>AppendElementToOwnerDocument,Default:()=>Default,default:()=>index_story});var use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),react=__webpack_require__("./node_modules/react/index.js"),icon=__webpack_require__("./packages/icons/build-module/icon/index.js"),more=__webpack_require__("./packages/icons/build-module/library/more.js"),throttle=__webpack_require__("./packages/compose/build-module/utils/throttle/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const bodyClass="is-dragging-components-draggable";function Draggable({children,onDragStart,onDragOver,onDragEnd,appendToOwnerDocument=!1,cloneClassname,elementId,transferData,__experimentalTransferDataType:transferDataType="text",__experimentalDragComponent:dragComponent}){const dragComponentRef=(0,react.useRef)(null),cleanupRef=(0,react.useRef)((()=>{}));return(0,react.useEffect)((()=>()=>{cleanupRef.current()}),[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[children({onDraggableStart:function start(event){const{ownerDocument}=event.target;event.dataTransfer.setData(transferDataType,JSON.stringify(transferData));const cloneWrapper=ownerDocument.createElement("div");cloneWrapper.style.top="0",cloneWrapper.style.left="0";const dragImage=ownerDocument.createElement("div");"function"==typeof event.dataTransfer.setDragImage&&(dragImage.classList.add("components-draggable__invisible-drag-image"),ownerDocument.body.appendChild(dragImage),event.dataTransfer.setDragImage(dragImage,0,0)),cloneWrapper.classList.add("components-draggable__clone"),cloneClassname&&cloneWrapper.classList.add(cloneClassname);let x=0,y=0;if(dragComponentRef.current){x=event.clientX,y=event.clientY,cloneWrapper.style.transform=`translate( ${x}px, ${y}px )`;const clonedDragComponent=ownerDocument.createElement("div");clonedDragComponent.innerHTML=dragComponentRef.current.innerHTML,cloneWrapper.appendChild(clonedDragComponent),ownerDocument.body.appendChild(cloneWrapper)}else{const element=ownerDocument.getElementById(elementId),elementRect=element.getBoundingClientRect(),elementWrapper=element.parentNode,elementTopOffset=elementRect.top,elementLeftOffset=elementRect.left;cloneWrapper.style.width=`${elementRect.width+0}px`;const clone=element.cloneNode(!0);clone.id=`clone-${elementId}`,x=elementLeftOffset-0,y=elementTopOffset-0,cloneWrapper.style.transform=`translate( ${x}px, ${y}px )`,Array.from(clone.querySelectorAll("iframe")).forEach((child=>child.parentNode?.removeChild(child))),cloneWrapper.appendChild(clone),appendToOwnerDocument?ownerDocument.body.appendChild(cloneWrapper):elementWrapper?.appendChild(cloneWrapper)}let cursorLeft=event.clientX,cursorTop=event.clientY;const throttledDragOver=(0,throttle.n)((function over(e){if(cursorLeft===e.clientX&&cursorTop===e.clientY)return;const nextX=x+e.clientX-cursorLeft,nextY=y+e.clientY-cursorTop;cloneWrapper.style.transform=`translate( ${nextX}px, ${nextY}px )`,cursorLeft=e.clientX,cursorTop=e.clientY,x=nextX,y=nextY,onDragOver&&onDragOver(e)}),16);ownerDocument.addEventListener("dragover",throttledDragOver),ownerDocument.body.classList.add(bodyClass),onDragStart&&onDragStart(event),cleanupRef.current=()=>{cloneWrapper&&cloneWrapper.parentNode&&cloneWrapper.parentNode.removeChild(cloneWrapper),dragImage&&dragImage.parentNode&&dragImage.parentNode.removeChild(dragImage),ownerDocument.body.classList.remove(bodyClass),ownerDocument.removeEventListener("dragover",throttledDragOver)}},onDraggableEnd:function end(event){event.preventDefault(),cleanupRef.current(),onDragEnd&&onDragEnd(event)}}),dragComponent&&(0,jsx_runtime.jsx)("div",{className:"components-draggable-drag-component-root",style:{display:"none"},ref:dragComponentRef,children:dragComponent})]})}const draggable=Draggable;try{Draggable.displayName="Draggable",Draggable.__docgenInfo={description:'`Draggable` is a Component that provides a way to set up a cross-browser\n(including IE) customizable drag image and the transfer data for the drag\nevent. It decouples the drag handle and the element to drag: use it by\nwrapping the component that will become the drag handle and providing the DOM\nID of the element to drag.\n\nNote that the drag handle needs to declare the `draggable="true"` property\nand bind the `Draggable`s `onDraggableStart` and `onDraggableEnd` event\nhandlers to its own `onDragStart` and `onDragEnd` respectively. `Draggable`\ntakes care of the logic to setup the drag image and the transfer data, but is\nnot concerned with creating an actual DOM element that is draggable.\n\n```jsx\nimport { Draggable, Panel, PanelBody } from \'@wordpress/components\';\nimport { Icon, more } from \'@wordpress/icons\';\n\nconst MyDraggable = () => (\n  <div id="draggable-panel">\n    <Panel header="Draggable panel">\n      <PanelBody>\n        <Draggable elementId="draggable-panel" transferData={ {} }>\n          { ( { onDraggableStart, onDraggableEnd } ) => (\n            <div\n              className="example-drag-handle"\n              draggable\n              onDragStart={ onDraggableStart }\n              onDragEnd={ onDraggableEnd }\n            >\n              <Icon icon={ more } />\n            </div>\n          ) }\n        </Draggable>\n      </PanelBody>\n    </Panel>\n  </div>\n);\n```',displayName:"Draggable",props:{children:{defaultValue:null,description:"Children.",name:"children",required:!0,type:{name:"(props: { onDraggableStart: (event: DragEvent<Element>) => void; onDraggableEnd: (event: DragEvent<Element>) => void; }) => Element"}},appendToOwnerDocument:{defaultValue:{value:"false"},description:"Whether to append the cloned element to the `ownerDocument` body.\nBy default, elements sourced by id are appended to the element's wrapper.",name:"appendToOwnerDocument",required:!1,type:{name:"boolean"}},cloneClassname:{defaultValue:null,description:"Classname for the cloned element.",name:"cloneClassname",required:!1,type:{name:"string"}},elementId:{defaultValue:null,description:"The HTML id of the element to clone on drag",name:"elementId",required:!0,type:{name:"string"}},onDragEnd:{defaultValue:null,description:"A function called when dragging ends. This callback receives the `event`\nobject from the `dragend` event as its first parameter.",name:"onDragEnd",required:!1,type:{name:"(event: DragEvent<Element>) => void"}},onDragOver:{defaultValue:null,description:"A function called when the element being dragged is dragged over a valid\ndrop target. This callback receives the `event` object from the\n`dragover` event as its first parameter.",name:"onDragOver",required:!1,type:{name:"(event: DragEvent<Element>) => void"}},onDragStart:{defaultValue:null,description:"A function called when dragging starts. This callback receives the\n`event` object from the `dragstart` event as its first parameter.",name:"onDragStart",required:!1,type:{name:"(event: DragEvent<Element>) => void"}},transferData:{defaultValue:null,description:"Arbitrary data object attached to the drag and drop event.",name:"transferData",required:!0,type:{name:"unknown"}},__experimentalTransferDataType:{defaultValue:{value:"'text'"},description:"The transfer data type to set.",name:"__experimentalTransferDataType",required:!1,type:{name:"string"}},__experimentalDragComponent:{defaultValue:null,description:"Component to show when dragging.",name:"__experimentalDragComponent",required:!1,type:{name:"ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/draggable/index.tsx#Draggable"]={docgenInfo:Draggable.__docgenInfo,name:"Draggable",path:"packages/components/src/draggable/index.tsx#Draggable"})}catch(__react_docgen_typescript_loader_error){}const index_story={component:draggable,title:"Components/Utilities/Draggable",id:"components-draggable",argTypes:{elementId:{control:{type:null}},__experimentalDragComponent:{control:{type:null}}},parameters:{sourceLink:"packages/components/src/draggable",badges:[],actions:{argTypesRegex:"^on.*"},controls:{expanded:!0},docs:{source:{code:""}}}},DefaultTemplate=args=>{const[isDragging,setDragging]=(0,react.useState)(!1),instanceId=(0,use_instance_id.A)(DefaultTemplate);return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("p",{style:{padding:"1em",position:"relative",zIndex:1e3,backgroundColor:"whitesmoke"},children:["Is Dragging? ",isDragging?"Yes":"No!"]}),(0,jsx_runtime.jsx)("div",{style:{zIndex:100,position:"relative"},children:(0,jsx_runtime.jsx)("div",{id:`draggable-example-box-${instanceId}`,style:{display:"inline-flex",position:"relative"},children:(0,jsx_runtime.jsx)(draggable,{...args,elementId:`draggable-example-box-${instanceId}`,children:({onDraggableStart,onDraggableEnd})=>(0,jsx_runtime.jsx)("div",{onDragStart:event=>{setDragging(!0),onDraggableStart(event)},onDragEnd:event=>{setDragging(!1),onDraggableEnd(event)},draggable:!0,style:{alignItems:"center",display:"flex",justifyContent:"center",width:100,height:100,background:"#ddd"},children:(0,jsx_runtime.jsx)(icon.A,{icon:more.A})})})})})]})};DefaultTemplate.displayName="DefaultTemplate";const Default=DefaultTemplate.bind({});Default.args={};const AppendElementToOwnerDocument=DefaultTemplate.bind({});AppendElementToOwnerDocument.args={appendToOwnerDocument:!0},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => {\n  const [isDragging, setDragging] = useState(false);\n  const instanceId = useInstanceId(DefaultTemplate);\n\n  // Allow for the use of ID in the example.\n  return <div>\n            <p style={{\n      padding: '1em',\n      position: 'relative',\n      zIndex: 1000,\n      backgroundColor: 'whitesmoke'\n    }}>\n                Is Dragging? {isDragging ? 'Yes' : 'No!'}\n            </p>\n            <div style={{\n      zIndex: 100,\n      position: 'relative'\n    }}>\n                <div id={`draggable-example-box-${instanceId}`} style={{\n        display: 'inline-flex',\n        position: 'relative'\n      }}>\n                    <Draggable {...args} elementId={`draggable-example-box-${instanceId}`}>\n                        {({\n            onDraggableStart,\n            onDraggableEnd\n          }) => {\n            const handleOnDragStart = (event: DragEvent) => {\n              setDragging(true);\n              onDraggableStart(event);\n            };\n            const handleOnDragEnd = (event: DragEvent) => {\n              setDragging(false);\n              onDraggableEnd(event);\n            };\n            return <div onDragStart={handleOnDragStart} onDragEnd={handleOnDragEnd} draggable style={{\n              alignItems: 'center',\n              display: 'flex',\n              justifyContent: 'center',\n              width: 100,\n              height: 100,\n              background: '#ddd'\n            }}>\n                                    <Icon icon={more} />\n                                </div>;\n          }}\n                    </Draggable>\n                </div>\n            </div>\n        </div>;\n}",...Default.parameters?.docs?.source}}},AppendElementToOwnerDocument.parameters={...AppendElementToOwnerDocument.parameters,docs:{...AppendElementToOwnerDocument.parameters?.docs,source:{originalSource:"args => {\n  const [isDragging, setDragging] = useState(false);\n  const instanceId = useInstanceId(DefaultTemplate);\n\n  // Allow for the use of ID in the example.\n  return <div>\n            <p style={{\n      padding: '1em',\n      position: 'relative',\n      zIndex: 1000,\n      backgroundColor: 'whitesmoke'\n    }}>\n                Is Dragging? {isDragging ? 'Yes' : 'No!'}\n            </p>\n            <div style={{\n      zIndex: 100,\n      position: 'relative'\n    }}>\n                <div id={`draggable-example-box-${instanceId}`} style={{\n        display: 'inline-flex',\n        position: 'relative'\n      }}>\n                    <Draggable {...args} elementId={`draggable-example-box-${instanceId}`}>\n                        {({\n            onDraggableStart,\n            onDraggableEnd\n          }) => {\n            const handleOnDragStart = (event: DragEvent) => {\n              setDragging(true);\n              onDraggableStart(event);\n            };\n            const handleOnDragEnd = (event: DragEvent) => {\n              setDragging(false);\n              onDraggableEnd(event);\n            };\n            return <div onDragStart={handleOnDragStart} onDragEnd={handleOnDragEnd} draggable style={{\n              alignItems: 'center',\n              display: 'flex',\n              justifyContent: 'center',\n              width: 100,\n              height: 100,\n              background: '#ddd'\n            }}>\n                                    <Icon icon={more} />\n                                </div>;\n          }}\n                    </Draggable>\n                </div>\n            </div>\n        </div>;\n}",...AppendElementToOwnerDocument.parameters?.docs?.source},description:{story:"`appendToOwnerDocument` is used to append the element being dragged to the body of the owner document.\n\nThis is useful when the element being dragged should not receive styles from its parent.\nFor example, when the element's parent sets a `z-index` value that would cause the dragged\nelement to be rendered behind other elements.",...AppendElementToOwnerDocument.parameters?.docs?.description}}};try{AppendElementToOwnerDocument.displayName="AppendElementToOwnerDocument",AppendElementToOwnerDocument.__docgenInfo={description:"`appendToOwnerDocument` is used to append the element being dragged to the body of the owner document.\n\nThis is useful when the element being dragged should not receive styles from its parent.\nFor example, when the element's parent sets a `z-index` value that would cause the dragged\nelement to be rendered behind other elements.",displayName:"AppendElementToOwnerDocument",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/draggable/stories/index.story.tsx#AppendElementToOwnerDocument"]={docgenInfo:AppendElementToOwnerDocument.__docgenInfo,name:"AppendElementToOwnerDocument",path:"packages/components/src/draggable/stories/index.story.tsx#AppendElementToOwnerDocument"})}catch(__react_docgen_typescript_loader_error){}}}]);