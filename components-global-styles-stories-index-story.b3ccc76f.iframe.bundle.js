(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[3299],{"./packages/components/build-module/panel/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>panel});var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const panel_header=function PanelHeader({label,children}){return(0,jsx_runtime.jsxs)("div",{className:"components-panel__header",children:[label&&(0,jsx_runtime.jsx)("h2",{children:label}),children]})};const panel=(0,react.forwardRef)((function UnforwardedPanel({header,className,children},ref){const classNames=(0,clsx.A)(className,"components-panel");return(0,jsx_runtime.jsxs)("div",{className:classNames,ref,children:[header&&(0,jsx_runtime.jsx)(panel_header,{label:header}),children]})}))},"./packages/edit-site/lib/inflate.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){if(!f&&__webpack_require__("./packages/edit-site/lib sync recursive"))return require(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){return o(e[i][1][r]||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u=void 0,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function _has(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}exports.assign=function(obj){for(var sources=Array.prototype.slice.call(arguments,1);sources.length;){var source=sources.shift();if(source){if("object"!=typeof source)throw new TypeError(source+"must be non-object");for(var p in source)_has(source,p)&&(obj[p]=source[p])}}return obj},exports.shrinkBuf=function(buf,size){return buf.length===size?buf:buf.subarray?buf.subarray(0,size):(buf.length=size,buf)};var fnTyped={arraySet:function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray)dest.set(src.subarray(src_offs,src_offs+len),dest_offs);else for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){var i,l,len,pos,chunk,result;for(len=0,i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;for(result=new Uint8Array(len),pos=0,i=0,l=chunks.length;i<l;i++)chunk=chunks[i],result.set(chunk,pos),pos+=chunk.length;return result}},fnUntyped={arraySet:function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){return[].concat.apply([],chunks)}};exports.setTyped=function(on){on?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK)},{}],2:[function(require,module,exports){"use strict";var utils=require("./common"),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(__){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;function buf2binstring(buf,len){if(len<65534&&(buf.subarray&&STR_APPLY_UIA_OK||!buf.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(buf,len));for(var result="",i=0;i<len;i++)result+=String.fromCharCode(buf[i]);return result}_utf8len[254]=_utf8len[254]=1,exports.string2buf=function(str){var buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)55296==(64512&(c=str.charCodeAt(m_pos)))&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=new utils.Buf8(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)55296==(64512&(c=str.charCodeAt(m_pos)))&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|63&c):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c);return buf},exports.buf2binstring=function(buf){return buf2binstring(buf,buf.length)},exports.binstring2buf=function(str){for(var buf=new utils.Buf8(str.length),i=0,len=buf.length;i<len;i++)buf[i]=str.charCodeAt(i);return buf},exports.buf2string=function(buf,max){var i,out,c,c_len,len=max||buf.length,utf16buf=new Array(2*len);for(out=0,i=0;i<len;)if((c=buf[i++])<128)utf16buf[out++]=c;else if((c_len=_utf8len[c])>4)utf16buf[out++]=65533,i+=c_len-1;else{for(c&=2===c_len?31:3===c_len?15:7;c_len>1&&i<len;)c=c<<6|63&buf[i++],c_len--;c_len>1?utf16buf[out++]=65533:c<65536?utf16buf[out++]=c:(c-=65536,utf16buf[out++]=55296|c>>10&1023,utf16buf[out++]=56320|1023&c)}return buf2binstring(utf16buf,out)},exports.utf8border=function(buf,max){var pos;for((max=max||buf.length)>buf.length&&(max=buf.length),pos=max-1;pos>=0&&128==(192&buf[pos]);)pos--;return pos<0||0===pos?max:pos+_utf8len[buf[pos]]>max?pos:max}},{"./common":1}],3:[function(require,module,exports){"use strict";function adler32(adler,buf,len,pos){for(var s1=65535&adler,s2=adler>>>16&65535,n=0;0!==len;){len-=n=len>2e3?2e3:len;do{s2=s2+(s1=s1+buf[pos++]|0)|0}while(--n);s1%=65521,s2%=65521}return s1|s2<<16}module.exports=adler32},{}],4:[function(require,module,exports){"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(require,module,exports){"use strict";function makeTable(){for(var c,table=[],n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;table[n]=c}return table}var crcTable=makeTable();function crc32(crc,buf,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[255&(crc^buf[i])];return~crc}module.exports=crc32},{}],6:[function(require,module,exports){"use strict";function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}module.exports=GZheader},{}],7:[function(require,module,exports){"use strict";var BAD=30,TYPE=12;module.exports=function inflate_fast(strm,start){var state,_in,last,_out,beg,end,dmax,wsize,whave,wnext,s_window,hold,bits,lcode,dcode,lmask,dmask,here,op,len,dist,from,from_source,input,output;state=strm.state,_in=strm.next_in,input=strm.input,last=_in+(strm.avail_in-5),_out=strm.next_out,output=strm.output,beg=_out-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=state.dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,s_window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(hold>>>=op=here>>>24,bits-=op,0==(op=here>>>16&255))output[_out++]=65535&here;else{if(!(16&op)){if(64&op){if(32&op){state.mode=TYPE;break top}strm.msg="invalid literal/length code",state.mode=BAD;break top}here=lcode[(65535&here)+(hold&(1<<op)-1)];continue dolen}for(len=65535&here,(op&=15)&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=dcode[hold&dmask];;){if(hold>>>=op=here>>>24,bits-=op,16&(op=here>>>16&255)){if(dist=65535&here,bits<(op&=15)&&(hold+=input[_in++]<<bits,(bits+=8)<op&&(hold+=input[_in++]<<bits,bits+=8)),(dist+=hold&(1<<op)-1)>dmax){strm.msg="invalid distance too far back",state.mode=BAD;break top}if(hold>>>=op,bits-=op,dist>(op=_out-beg)){if((op=dist-op)>whave&&state.sane){strm.msg="invalid distance too far back",state.mode=BAD;break top}if(from=0,from_source=s_window,0===wnext){if(from+=wsize-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,(op-=wnext)<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);if(from=0,wnext<len){len-=op=wnext;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do{output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3}while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}break}if(64&op){strm.msg="invalid distance code",state.mode=BAD;break top}here=dcode[(65535&here)+(hold&(1<<op)-1)]}}break}}while(_in<last&&_out<end);_in-=len=bits>>3,hold&=(1<<(bits-=len<<3))-1,strm.next_in=_in,strm.next_out=_out,strm.avail_in=_in<last?last-_in+5:5-(_in-last),strm.avail_out=_out<end?end-_out+257:257-(_out-end),state.hold=hold,state.bits=bits}},{}],8:[function(require,module,exports){"use strict";var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees"),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,ENOUGH_LENS=852,ENOUGH_DISTS=592,DEF_WBITS=15;function zswap32(q){return(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(strm){var state;return strm&&strm.state?(state=strm.state,strm.total_in=strm.total_out=state.total=0,strm.msg="",state.wrap&&(strm.adler=1&state.wrap),state.mode=HEAD,state.last=0,state.havedict=0,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new utils.Buf32(ENOUGH_LENS),state.distcode=state.distdyn=new utils.Buf32(ENOUGH_DISTS),state.sane=1,state.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(strm){var state;return strm&&strm.state?((state=strm.state).wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm)):Z_STREAM_ERROR}function inflateReset2(strm,windowBits){var wrap,state;return strm&&strm.state?(state=strm.state,windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=1+(windowBits>>4),windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15)?Z_STREAM_ERROR:(null!==state.window&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm))):Z_STREAM_ERROR}function inflateInit2(strm,windowBits){var ret,state;return strm?(state=new InflateState,strm.state=state,state.window=null,(ret=inflateReset2(strm,windowBits))!==Z_OK&&(strm.state=null),ret):Z_STREAM_ERROR}function inflateInit(strm){return inflateInit2(strm,DEF_WBITS)}var lenfix,distfix,virgin=!0;function fixedtables(state){if(virgin){var sym;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),sym=0;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inflate_table(LENS,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inflate_table(DISTS,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5}function updatewindow(strm,src,end,copy){var dist,state=strm.state;return null===state.window&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new utils.Buf8(state.wsize)),copy>=state.wsize?(utils.arraySet(state.window,src,end-state.wsize,state.wsize,0),state.wnext=0,state.whave=state.wsize):((dist=state.wsize-state.wnext)>copy&&(dist=copy),utils.arraySet(state.window,src,end-copy,dist,state.wnext),(copy-=dist)?(utils.arraySet(state.window,src,end-copy,copy,0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0}function inflate(strm,flush){var state,input,output,next,put,have,left,hold,bits,_in,_out,copy,from,from_source,here_bits,here_op,here_val,last_bits,last_op,last_val,len,ret,opts,n,here=0,hbuf=new utils.Buf8(4),order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!strm||!strm.state||!strm.output||!strm.input&&0!==strm.avail_in)return Z_STREAM_ERROR;(state=strm.state).mode===TYPE&&(state.mode=TYPEDO),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,_in=have,_out=left,ret=Z_OK;inf_leave:for(;;)switch(state.mode){case HEAD:if(0===state.wrap){state.mode=TYPEDO;break}for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(2&state.wrap&&35615===hold){state.check=0,hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0),hold=0,bits=0,state.mode=FLAGS;break}if(state.flags=0,state.head&&(state.head.done=!1),!(1&state.wrap)||(((255&hold)<<8)+(hold>>8))%31){strm.msg="incorrect header check",state.mode=BAD;break}if((15&hold)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=BAD;break}if(bits-=4,len=8+(15&(hold>>>=4)),0===state.wbits)state.wbits=len;else if(len>state.wbits){strm.msg="invalid window size",state.mode=BAD;break}state.dmax=1<<len,strm.adler=state.check=1,state.mode=512&hold?DICTID:TYPE,hold=0,bits=0;break;case FLAGS:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,(255&state.flags)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=BAD;break}if(57344&state.flags){strm.msg="unknown header flags set",state.mode=BAD;break}state.head&&(state.head.text=hold>>8&1),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=TIME;case TIME:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=OS;case OS:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=255&hold,state.head.os=hold>>8),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=EXLEN;case EXLEN:if(1024&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=EXTRA;case EXTRA:if(1024&state.flags&&((copy=state.length)>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,state.head.extra||(state.head.extra=new Array(state.head.extra_len)),utils.arraySet(state.head.extra,input,next,copy,len)),512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=NAME;case NAME:if(2048&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.name+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=COMMENT;case COMMENT:if(4096&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.comment+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=HCRC;case HCRC:if(512&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(65535&state.check)){strm.msg="header crc mismatch",state.mode=BAD;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=TYPE;break;case DICTID:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=zswap32(hold),hold=0,bits=0,state.mode=DICT;case DICT:if(0===state.havedict)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,Z_NEED_DICT;strm.adler=state.check=1,state.mode=TYPE;case TYPE:if(flush===Z_BLOCK||flush===Z_TREES)break inf_leave;case TYPEDO:if(state.last){hold>>>=7&bits,bits-=7&bits,state.mode=CHECK;break}for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=1&hold,bits-=1,3&(hold>>>=1)){case 0:state.mode=STORED;break;case 1:if(fixedtables(state),state.mode=LEN_,flush===Z_TREES){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=TABLE;break;case 3:strm.msg="invalid block type",state.mode=BAD}hold>>>=2,bits-=2;break;case STORED:for(hold>>>=7&bits,bits-=7&bits;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((65535&hold)!=(hold>>>16^65535)){strm.msg="invalid stored block lengths",state.mode=BAD;break}if(state.length=65535&hold,hold=0,bits=0,state.mode=COPY_,flush===Z_TREES)break inf_leave;case COPY_:state.mode=COPY;case COPY:if(copy=state.length){if(copy>have&&(copy=have),copy>left&&(copy=left),0===copy)break inf_leave;utils.arraySet(output,input,next,copy,put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=TYPE;break;case TABLE:for(;bits<14;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=257+(31&hold),hold>>>=5,bits-=5,state.ndist=1+(31&hold),hold>>>=5,bits-=5,state.ncode=4+(15&hold),hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols",state.mode=BAD;break}state.have=0,state.mode=LENLENS;case LENLENS:for(;state.have<state.ncode;){for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=7&hold,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,opts={bits:state.lenbits},ret=inflate_table(CODES,state.lens,0,19,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid code lengths set",state.mode=BAD;break}state.have=0,state.mode=CODELENS;case CODELENS:for(;state.have<state.nlen+state.ndist;){for(;here_op=(here=state.lencode[hold&(1<<state.lenbits)-1])>>>16&255,here_val=65535&here,!((here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(16===here_val){for(n=here_bits+2;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,0===state.have){strm.msg="invalid bit length repeat",state.mode=BAD;break}len=state.lens[state.have-1],copy=3+(3&hold),hold>>>=2,bits-=2}else if(17===here_val){for(n=here_bits+3;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}bits-=here_bits,len=0,copy=3+(7&(hold>>>=here_bits)),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}bits-=here_bits,len=0,copy=11+(127&(hold>>>=here_bits)),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat",state.mode=BAD;break}for(;copy--;)state.lens[state.have++]=len}}if(state.mode===BAD)break;if(0===state.lens[256]){strm.msg="invalid code -- missing end-of-block",state.mode=BAD;break}if(state.lenbits=9,opts={bits:state.lenbits},ret=inflate_table(LENS,state.lens,0,state.nlen,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid literal/lengths set",state.mode=BAD;break}if(state.distbits=6,state.distcode=state.distdyn,opts={bits:state.distbits},ret=inflate_table(DISTS,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts),state.distbits=opts.bits,ret){strm.msg="invalid distances set",state.mode=BAD;break}if(state.mode=LEN_,flush===Z_TREES)break inf_leave;case LEN_:state.mode=LEN;case LEN:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inflate_fast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,state.mode===TYPE&&(state.back=-1);break}for(state.back=0;here_op=(here=state.lencode[hold&(1<<state.lenbits)-1])>>>16&255,here_val=65535&here,!((here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&!(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here_op=(here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)])>>>16&255,here_val=65535&here,!(last_bits+(here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,0===here_op){state.mode=LIT;break}if(32&here_op){state.back=-1,state.mode=TYPE;break}if(64&here_op){strm.msg="invalid literal/length code",state.mode=BAD;break}state.extra=15&here_op,state.mode=LENEXT;case LENEXT:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=DIST;case DIST:for(;here_op=(here=state.distcode[hold&(1<<state.distbits)-1])>>>16&255,here_val=65535&here,!((here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(!(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here_op=(here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)])>>>16&255,here_val=65535&here,!(last_bits+(here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,64&here_op){strm.msg="invalid distance code",state.mode=BAD;break}state.offset=here_val,state.extra=15&here_op,state.mode=DISTEXT;case DISTEXT:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back",state.mode=BAD;break}state.mode=MATCH;case MATCH:if(0===left)break inf_leave;if(copy=_out-left,state.offset>copy){if((copy=state.offset-copy)>state.whave&&state.sane){strm.msg="invalid distance too far back",state.mode=BAD;break}copy>state.wnext?(copy-=state.wnext,from=state.wsize-copy):from=state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do{output[put++]=from_source[from++]}while(--copy);0===state.length&&(state.mode=LEN);break;case LIT:if(0===left)break inf_leave;output[put++]=state.length,left--,state.mode=LEN;break;case CHECK:if(state.wrap){for(;bits<32;){if(0===have)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(_out-=left,strm.total_out+=_out,state.total+=_out,_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out)),_out=left,(state.flags?hold:zswap32(hold))!==state.check){strm.msg="incorrect data check",state.mode=BAD;break}hold=0,bits=0}state.mode=LENGTH;case LENGTH:if(state.wrap&&state.flags){for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(4294967295&state.total)){strm.msg="incorrect length check",state.mode=BAD;break}hold=0,bits=0}state.mode=DONE;case DONE:ret=Z_STREAM_END;break inf_leave;case BAD:ret=Z_DATA_ERROR;break inf_leave;case MEM:return Z_MEM_ERROR;default:return Z_STREAM_ERROR}return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<BAD&&(state.mode<CHECK||flush!==Z_FINISH))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)?(state.mode=MEM,Z_MEM_ERROR):(_in-=strm.avail_in,_out-=strm.avail_out,strm.total_in+=_in,strm.total_out+=_out,state.total+=_out,state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(state.mode===TYPE?128:0)+(state.mode===LEN_||state.mode===COPY_?256:0),(0===_in&&0===_out||flush===Z_FINISH)&&ret===Z_OK&&(ret=Z_BUF_ERROR),ret)}function inflateEnd(strm){if(!strm||!strm.state)return Z_STREAM_ERROR;var state=strm.state;return state.window&&(state.window=null),strm.state=null,Z_OK}function inflateGetHeader(strm,head){var state;return strm&&strm.state&&2&(state=strm.state).wrap?(state.head=head,head.done=!1,Z_OK):Z_STREAM_ERROR}function inflateSetDictionary(strm,dictionary){var state,dictLength=dictionary.length;return strm&&strm.state?0!==(state=strm.state).wrap&&state.mode!==DICT?Z_STREAM_ERROR:state.mode===DICT&&adler32(1,dictionary,dictLength,0)!==state.check?Z_DATA_ERROR:updatewindow(strm,dictionary,dictLength,dictLength)?(state.mode=MEM,Z_MEM_ERROR):(state.havedict=1,Z_OK):Z_STREAM_ERROR}exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateSetDictionary=inflateSetDictionary,exports.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(require,module,exports){"use strict";var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function inflate_table(type,lens,lens_index,codes,table,table_index,work,opts){var incr,fill,low,mask,next,end,here_bits,here_op,here_val,bits=opts.bits,len=0,sym=0,min=0,max=0,root=0,curr=0,drop=0,left=0,used=0,huff=0,base=null,base_index=0,count=new utils.Buf16(MAXBITS+1),offs=new utils.Buf16(MAXBITS+1),extra=null,extra_index=0;for(len=0;len<=MAXBITS;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root=bits,max=MAXBITS;max>=1&&0===count[max];max--);if(root>max&&(root=max),0===max)return table[table_index++]=20971520,table[table_index++]=20971520,opts.bits=1,0;for(min=1;min<max&&0===count[min];min++);for(root<min&&(root=min),left=1,len=1;len<=MAXBITS;len++)if(left<<=1,(left-=count[len])<0)return-1;if(left>0&&(type===CODES||1!==max))return-1;for(offs[1]=0,len=1;len<MAXBITS;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)0!==lens[lens_index+sym]&&(work[offs[lens[lens_index+sym]]++]=sym);if(type===CODES?(base=extra=work,end=19):type===LENS?(base=lbase,base_index-=257,extra=lext,extra_index-=257,end=256):(base=dbase,extra=dext,end=-1),huff=0,sym=0,len=min,next=table_index,curr=root,drop=0,low=-1,mask=(used=1<<root)-1,type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS)return 1;for(;;){here_bits=len-drop,work[sym]<end?(here_op=0,here_val=work[sym]):work[sym]>end?(here_op=extra[extra_index+work[sym]],here_val=base[base_index+work[sym]]):(here_op=96,here_val=0),incr=1<<len-drop,min=fill=1<<curr;do{table[next+(huff>>drop)+(fill-=incr)]=here_bits<<24|here_op<<16|here_val}while(0!==fill);for(incr=1<<len-1;huff&incr;)incr>>=1;if(0!==incr?(huff&=incr-1,huff+=incr):huff=0,sym++,0==--count[len]){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){for(0===drop&&(drop=root),next+=min,left=1<<(curr=len-drop);curr+drop<max&&!((left-=count[curr+drop])<=0);)curr++,left<<=1;if(used+=1<<curr,type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS)return 1;table[low=huff&mask]=root<<24|curr<<16|next-table_index}}return 0!==huff&&(table[next+huff]=len-drop<<24|64<<16),opts.bits=root,0}},{"../utils/common":1}],10:[function(require,module,exports){"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(require,module,exports){"use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream},{}],"/lib/inflate.js":[function(require,module,exports){"use strict";var zlib_inflate=require("./zlib/inflate"),utils=require("./utils/common"),strings=require("./utils/strings"),c=require("./zlib/constants"),msg=require("./zlib/messages"),ZStream=require("./zlib/zstream"),GZheader=require("./zlib/gzheader"),toString=Object.prototype.toString;function Inflate(options){if(!(this instanceof Inflate))return new Inflate(options);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},options||{});var opt=this.options;opt.raw&&opt.windowBits>=0&&opt.windowBits<16&&(opt.windowBits=-opt.windowBits,0===opt.windowBits&&(opt.windowBits=-15)),!(opt.windowBits>=0&&opt.windowBits<16)||options&&options.windowBits||(opt.windowBits+=32),opt.windowBits>15&&opt.windowBits<48&&(15&opt.windowBits||(opt.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var status=zlib_inflate.inflateInit2(this.strm,opt.windowBits);if(status!==c.Z_OK)throw new Error(msg[status]);if(this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header),opt.dictionary&&("string"==typeof opt.dictionary?opt.dictionary=strings.string2buf(opt.dictionary):"[object ArrayBuffer]"===toString.call(opt.dictionary)&&(opt.dictionary=new Uint8Array(opt.dictionary)),opt.raw&&(status=zlib_inflate.inflateSetDictionary(this.strm,opt.dictionary))!==c.Z_OK))throw new Error(msg[status])}function inflate(input,options){var inflator=new Inflate(options);if(inflator.push(input,!0),inflator.err)throw inflator.msg||msg[inflator.err];return inflator.result}function inflateRaw(input,options){return(options=options||{}).raw=!0,inflate(input,options)}Inflate.prototype.push=function(data,mode){var status,_mode,next_out_utf8,tail,utf8str,strm=this.strm,chunkSize=this.options.chunkSize,dictionary=this.options.dictionary,allowBufError=!1;if(this.ended)return!1;_mode=mode===~~mode?mode:!0===mode?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof data?strm.input=strings.binstring2buf(data):"[object ArrayBuffer]"===toString.call(data)?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;do{if(0===strm.avail_out&&(strm.output=new utils.Buf8(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),(status=zlib_inflate.inflate(strm,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&dictionary&&(status=zlib_inflate.inflateSetDictionary(this.strm,dictionary)),status===c.Z_BUF_ERROR&&!0===allowBufError&&(status=c.Z_OK,allowBufError=!1),status!==c.Z_STREAM_END&&status!==c.Z_OK)return this.onEnd(status),this.ended=!0,!1;strm.next_out&&(0!==strm.avail_out&&status!==c.Z_STREAM_END&&(0!==strm.avail_in||_mode!==c.Z_FINISH&&_mode!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(next_out_utf8=strings.utf8border(strm.output,strm.next_out),tail=strm.next_out-next_out_utf8,utf8str=strings.buf2string(strm.output,next_out_utf8),strm.next_out=tail,strm.avail_out=chunkSize-tail,tail&&utils.arraySet(strm.output,strm.output,next_out_utf8,tail,0),this.onData(utf8str)):this.onData(utils.shrinkBuf(strm.output,strm.next_out)))),0===strm.avail_in&&0===strm.avail_out&&(allowBufError=!0)}while((strm.avail_in>0||0===strm.avail_out)&&status!==c.Z_STREAM_END);return status===c.Z_STREAM_END&&(_mode=c.Z_FINISH),_mode===c.Z_FINISH?(status=zlib_inflate.inflateEnd(this.strm),this.onEnd(status),this.ended=!0,status===c.Z_OK):_mode!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),strm.avail_out=0,!0)},Inflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Inflate.prototype.onEnd=function(status){status===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg},exports.Inflate=Inflate,exports.inflate=inflate,exports.inflateRaw=inflateRaw,exports.ungzip=inflate},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")},"./packages/edit-site/lib/unbrotli.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){if(!f&&__webpack_require__("./packages/edit-site/lib sync recursive"))return require(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){return o(e[i][1][r]||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u=void 0,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){var BROTLI_READ_SIZE=4096,BROTLI_IBUF_SIZE=2*BROTLI_READ_SIZE+32,BROTLI_IBUF_MASK=2*BROTLI_READ_SIZE-1,kBitMask=new Uint32Array([0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215]);function BrotliBitReader(input){this.buf_=new Uint8Array(BROTLI_IBUF_SIZE),this.input_=input,this.reset()}BrotliBitReader.READ_SIZE=BROTLI_READ_SIZE,BrotliBitReader.IBUF_MASK=BROTLI_IBUF_MASK,BrotliBitReader.prototype.reset=function(){this.buf_ptr_=0,this.val_=0,this.pos_=0,this.bit_pos_=0,this.bit_end_pos_=0,this.eos_=0,this.readMoreInput();for(var i=0;i<4;i++)this.val_|=this.buf_[this.pos_]<<8*i,++this.pos_;return this.bit_end_pos_>0},BrotliBitReader.prototype.readMoreInput=function(){if(!(this.bit_end_pos_>256))if(this.eos_){if(this.bit_pos_>this.bit_end_pos_)throw new Error("Unexpected end of input "+this.bit_pos_+" "+this.bit_end_pos_)}else{var dst=this.buf_ptr_,bytes_read=this.input_.read(this.buf_,dst,BROTLI_READ_SIZE);if(bytes_read<0)throw new Error("Unexpected end of input");if(bytes_read<BROTLI_READ_SIZE){this.eos_=1;for(var p=0;p<32;p++)this.buf_[dst+bytes_read+p]=0}if(0===dst){for(p=0;p<32;p++)this.buf_[(BROTLI_READ_SIZE<<1)+p]=this.buf_[p];this.buf_ptr_=BROTLI_READ_SIZE}else this.buf_ptr_=0;this.bit_end_pos_+=bytes_read<<3}},BrotliBitReader.prototype.fillBitWindow=function(){for(;this.bit_pos_>=8;)this.val_>>>=8,this.val_|=this.buf_[this.pos_&BROTLI_IBUF_MASK]<<24,++this.pos_,this.bit_pos_=this.bit_pos_-8>>>0,this.bit_end_pos_=this.bit_end_pos_-8>>>0},BrotliBitReader.prototype.readBits=function(n_bits){32-this.bit_pos_<n_bits&&this.fillBitWindow();var val=this.val_>>>this.bit_pos_&kBitMask[n_bits];return this.bit_pos_+=n_bits,val},module.exports=BrotliBitReader},{}],2:[function(require,module,exports){exports.lookup=new Uint8Array([0,0,0,0,0,0,0,0,0,4,4,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,12,16,12,12,20,12,16,24,28,12,12,32,12,36,12,44,44,44,44,44,44,44,44,44,44,32,32,24,40,28,12,12,48,52,52,52,48,52,52,52,48,52,52,52,52,52,48,52,52,52,52,52,48,52,52,52,52,52,24,12,28,12,12,12,56,60,60,60,56,60,60,60,56,60,60,60,60,60,56,60,60,60,60,60,56,60,60,60,60,60,24,12,28,12,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,0,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,56,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,22,22,22,22,23,23,23,23,24,24,24,24,25,25,25,25,26,26,26,26,27,27,27,27,28,28,28,28,29,29,29,29,30,30,30,30,31,31,31,31,32,32,32,32,33,33,33,33,34,34,34,34,35,35,35,35,36,36,36,36,37,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45,45,46,46,46,46,47,47,47,47,48,48,48,48,49,49,49,49,50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,54,54,54,54,55,55,55,55,56,56,56,56,57,57,57,57,58,58,58,58,59,59,59,59,60,60,60,60,61,61,61,61,62,62,62,62,63,63,63,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),exports.lookupOffsets=new Uint16Array([1024,1536,1280,1536,0,256,768,512])},{}],3:[function(require,module,exports){var BrotliInput=require("./streams").BrotliInput,BrotliOutput=require("./streams").BrotliOutput,BrotliBitReader=require("./bit_reader"),BrotliDictionary=require("./dictionary"),HuffmanCode=require("./huffman").HuffmanCode,BrotliBuildHuffmanTable=require("./huffman").BrotliBuildHuffmanTable,Context=require("./context"),Prefix=require("./prefix"),Transform=require("./transform"),kDefaultCodeLength=8,kCodeLengthRepeatCode=16,kNumLiteralCodes=256,kNumInsertAndCopyCodes=704,kNumBlockLengthCodes=26,kLiteralContextBits=6,kDistanceContextBits=2,HUFFMAN_TABLE_BITS=8,HUFFMAN_TABLE_MASK=255,HUFFMAN_MAX_TABLE_SIZE=1080,CODE_LENGTH_CODES=18,kCodeLengthCodeOrder=new Uint8Array([1,2,3,4,0,5,17,6,16,7,8,9,10,11,12,13,14,15]),NUM_DISTANCE_SHORT_CODES=16,kDistanceShortCodeIndexOffset=new Uint8Array([3,2,1,0,3,3,3,3,3,3,2,2,2,2,2,2]),kDistanceShortCodeValueOffset=new Int8Array([0,0,0,0,-1,1,-2,2,-3,3,-1,1,-2,2,-3,3]),kMaxHuffmanTableSize=new Uint16Array([256,402,436,468,500,534,566,598,630,662,694,726,758,790,822,854,886,920,952,984,1016,1048,1080]);function DecodeWindowBits(br){var n;return 0===br.readBits(1)?16:(n=br.readBits(3))>0?17+n:(n=br.readBits(3))>0?8+n:17}function DecodeVarLenUint8(br){if(br.readBits(1)){var nbits=br.readBits(3);return 0===nbits?1:br.readBits(nbits)+(1<<nbits)}return 0}function MetaBlockLength(){this.meta_block_length=0,this.input_end=0,this.is_uncompressed=0,this.is_metadata=!1}function DecodeMetaBlockLength(br){var size_nibbles,size_bytes,i,out=new MetaBlockLength;if(out.input_end=br.readBits(1),out.input_end&&br.readBits(1))return out;if(7===(size_nibbles=br.readBits(2)+4)){if(out.is_metadata=!0,0!==br.readBits(1))throw new Error("Invalid reserved bit");if(0===(size_bytes=br.readBits(2)))return out;for(i=0;i<size_bytes;i++){var next_byte=br.readBits(8);if(i+1===size_bytes&&size_bytes>1&&0===next_byte)throw new Error("Invalid size byte");out.meta_block_length|=next_byte<<8*i}}else for(i=0;i<size_nibbles;++i){var next_nibble=br.readBits(4);if(i+1===size_nibbles&&size_nibbles>4&&0===next_nibble)throw new Error("Invalid size nibble");out.meta_block_length|=next_nibble<<4*i}return++out.meta_block_length,out.input_end||out.is_metadata||(out.is_uncompressed=br.readBits(1)),out}function ReadSymbol(table,index,br){var nbits;return br.fillBitWindow(),(nbits=table[index+=br.val_>>>br.bit_pos_&HUFFMAN_TABLE_MASK].bits-HUFFMAN_TABLE_BITS)>0&&(br.bit_pos_+=HUFFMAN_TABLE_BITS,index+=table[index].value,index+=br.val_>>>br.bit_pos_&(1<<nbits)-1),br.bit_pos_+=table[index].bits,table[index].value}function ReadHuffmanCodeLengths(code_length_code_lengths,num_symbols,code_lengths,br){for(var symbol=0,prev_code_len=kDefaultCodeLength,repeat=0,repeat_code_len=0,space=32768,table=[],i=0;i<32;i++)table.push(new HuffmanCode(0,0));for(BrotliBuildHuffmanTable(table,0,5,code_length_code_lengths,CODE_LENGTH_CODES);symbol<num_symbols&&space>0;){var code_len,p=0;if(br.readMoreInput(),br.fillBitWindow(),p+=br.val_>>>br.bit_pos_&31,br.bit_pos_+=table[p].bits,(code_len=255&table[p].value)<kCodeLengthRepeatCode)repeat=0,code_lengths[symbol++]=code_len,0!==code_len&&(prev_code_len=code_len,space-=32768>>code_len);else{var old_repeat,repeat_delta,extra_bits=code_len-14,new_len=0;if(code_len===kCodeLengthRepeatCode&&(new_len=prev_code_len),repeat_code_len!==new_len&&(repeat=0,repeat_code_len=new_len),old_repeat=repeat,repeat>0&&(repeat-=2,repeat<<=extra_bits),symbol+(repeat_delta=(repeat+=br.readBits(extra_bits)+3)-old_repeat)>num_symbols)throw new Error("[ReadHuffmanCodeLengths] symbol + repeat_delta > num_symbols");for(var x=0;x<repeat_delta;x++)code_lengths[symbol+x]=repeat_code_len;symbol+=repeat_delta,0!==repeat_code_len&&(space-=repeat_delta<<15-repeat_code_len)}}if(0!==space)throw new Error("[ReadHuffmanCodeLengths] space = "+space);for(;symbol<num_symbols;symbol++)code_lengths[symbol]=0}function ReadHuffmanCode(alphabet_size,tables,table,br){var simple_code_or_skip,table_size=0,code_lengths=new Uint8Array(alphabet_size);if(br.readMoreInput(),1===(simple_code_or_skip=br.readBits(2))){for(var max_bits_counter=alphabet_size-1,max_bits=0,symbols=new Int32Array(4),num_symbols=br.readBits(2)+1;max_bits_counter;)max_bits_counter>>=1,++max_bits;for(i=0;i<num_symbols;++i)symbols[i]=br.readBits(max_bits)%alphabet_size,code_lengths[symbols[i]]=2;switch(code_lengths[symbols[0]]=1,num_symbols){case 1:break;case 3:if(symbols[0]===symbols[1]||symbols[0]===symbols[2]||symbols[1]===symbols[2])throw new Error("[ReadHuffmanCode] invalid symbols");break;case 2:if(symbols[0]===symbols[1])throw new Error("[ReadHuffmanCode] invalid symbols");code_lengths[symbols[1]]=1;break;case 4:if(symbols[0]===symbols[1]||symbols[0]===symbols[2]||symbols[0]===symbols[3]||symbols[1]===symbols[2]||symbols[1]===symbols[3]||symbols[2]===symbols[3])throw new Error("[ReadHuffmanCode] invalid symbols");br.readBits(1)?(code_lengths[symbols[2]]=3,code_lengths[symbols[3]]=3):code_lengths[symbols[0]]=2}}else{var i,code_length_code_lengths=new Uint8Array(CODE_LENGTH_CODES),space=32,num_codes=0,huff=[new HuffmanCode(2,0),new HuffmanCode(2,4),new HuffmanCode(2,3),new HuffmanCode(3,2),new HuffmanCode(2,0),new HuffmanCode(2,4),new HuffmanCode(2,3),new HuffmanCode(4,1),new HuffmanCode(2,0),new HuffmanCode(2,4),new HuffmanCode(2,3),new HuffmanCode(3,2),new HuffmanCode(2,0),new HuffmanCode(2,4),new HuffmanCode(2,3),new HuffmanCode(4,5)];for(i=simple_code_or_skip;i<CODE_LENGTH_CODES&&space>0;++i){var v,code_len_idx=kCodeLengthCodeOrder[i],p=0;br.fillBitWindow(),p+=br.val_>>>br.bit_pos_&15,br.bit_pos_+=huff[p].bits,v=huff[p].value,code_length_code_lengths[code_len_idx]=v,0!==v&&(space-=32>>v,++num_codes)}if(1!==num_codes&&0!==space)throw new Error("[ReadHuffmanCode] invalid num_codes or space");ReadHuffmanCodeLengths(code_length_code_lengths,alphabet_size,code_lengths,br)}if(0===(table_size=BrotliBuildHuffmanTable(tables,table,HUFFMAN_TABLE_BITS,code_lengths,alphabet_size)))throw new Error("[ReadHuffmanCode] BuildHuffmanTable failed: ");return table_size}function ReadBlockLength(table,index,br){var code,nbits;return code=ReadSymbol(table,index,br),nbits=Prefix.kBlockLengthPrefixCode[code].nbits,Prefix.kBlockLengthPrefixCode[code].offset+br.readBits(nbits)}function TranslateShortCodes(code,ringbuffer,index){var val;return code<NUM_DISTANCE_SHORT_CODES?(index+=kDistanceShortCodeIndexOffset[code],val=ringbuffer[index&=3]+kDistanceShortCodeValueOffset[code]):val=code-NUM_DISTANCE_SHORT_CODES+1,val}function MoveToFront(v,index){for(var value=v[index],i=index;i;--i)v[i]=v[i-1];v[0]=value}function InverseMoveToFrontTransform(v,v_len){var i,mtf=new Uint8Array(256);for(i=0;i<256;++i)mtf[i]=i;for(i=0;i<v_len;++i){var index=v[i];v[i]=mtf[index],index&&MoveToFront(mtf,index)}}function HuffmanTreeGroup(alphabet_size,num_htrees){this.alphabet_size=alphabet_size,this.num_htrees=num_htrees,this.codes=new Array(num_htrees+num_htrees*kMaxHuffmanTableSize[alphabet_size+31>>>5]),this.htrees=new Uint32Array(num_htrees)}function DecodeContextMap(context_map_size,br){var table,i,out={num_htrees:null,context_map:null},max_run_length_prefix=0;br.readMoreInput();var num_htrees=out.num_htrees=DecodeVarLenUint8(br)+1,context_map=out.context_map=new Uint8Array(context_map_size);if(num_htrees<=1)return out;for(br.readBits(1)&&(max_run_length_prefix=br.readBits(4)+1),table=[],i=0;i<HUFFMAN_MAX_TABLE_SIZE;i++)table[i]=new HuffmanCode(0,0);for(ReadHuffmanCode(num_htrees+max_run_length_prefix,table,0,br),i=0;i<context_map_size;){var code;if(br.readMoreInput(),0===(code=ReadSymbol(table,0,br)))context_map[i]=0,++i;else if(code<=max_run_length_prefix)for(var reps=1+(1<<code)+br.readBits(code);--reps;){if(i>=context_map_size)throw new Error("[DecodeContextMap] i >= context_map_size");context_map[i]=0,++i}else context_map[i]=code-max_run_length_prefix,++i}return br.readBits(1)&&InverseMoveToFrontTransform(context_map,context_map_size),out}function DecodeBlockType(max_block_type,trees,tree_type,block_types,ringbuffers,indexes,br){var block_type,ringbuffer=2*tree_type,index=tree_type,type_code=ReadSymbol(trees,tree_type*HUFFMAN_MAX_TABLE_SIZE,br);(block_type=0===type_code?ringbuffers[ringbuffer+(1&indexes[index])]:1===type_code?ringbuffers[ringbuffer+(indexes[index]-1&1)]+1:type_code-2)>=max_block_type&&(block_type-=max_block_type),block_types[tree_type]=block_type,ringbuffers[ringbuffer+(1&indexes[index])]=block_type,++indexes[index]}function CopyUncompressedBlockToOutput(output,len,pos,ringbuffer,ringbuffer_mask,br){var nbytes,rb_size=ringbuffer_mask+1,rb_pos=pos&ringbuffer_mask,br_pos=br.pos_&BrotliBitReader.IBUF_MASK;if(len<8||br.bit_pos_+(len<<3)<br.bit_end_pos_)for(;len-- >0;)br.readMoreInput(),ringbuffer[rb_pos++]=br.readBits(8),rb_pos===rb_size&&(output.write(ringbuffer,rb_size),rb_pos=0);else{if(br.bit_end_pos_<32)throw new Error("[CopyUncompressedBlockToOutput] br.bit_end_pos_ < 32");for(;br.bit_pos_<32;)ringbuffer[rb_pos]=br.val_>>>br.bit_pos_,br.bit_pos_+=8,++rb_pos,--len;if(br_pos+(nbytes=br.bit_end_pos_-br.bit_pos_>>3)>BrotliBitReader.IBUF_MASK){for(var tail=BrotliBitReader.IBUF_MASK+1-br_pos,x=0;x<tail;x++)ringbuffer[rb_pos+x]=br.buf_[br_pos+x];nbytes-=tail,rb_pos+=tail,len-=tail,br_pos=0}for(x=0;x<nbytes;x++)ringbuffer[rb_pos+x]=br.buf_[br_pos+x];if(len-=nbytes,(rb_pos+=nbytes)>=rb_size)for(output.write(ringbuffer,rb_size),rb_pos-=rb_size,x=0;x<rb_pos;x++)ringbuffer[x]=ringbuffer[rb_size+x];for(;rb_pos+len>=rb_size;){if(nbytes=rb_size-rb_pos,br.input_.read(ringbuffer,rb_pos,nbytes)<nbytes)throw new Error("[CopyUncompressedBlockToOutput] not enough bytes");output.write(ringbuffer,rb_size),len-=nbytes,rb_pos=0}if(br.input_.read(ringbuffer,rb_pos,len)<len)throw new Error("[CopyUncompressedBlockToOutput] not enough bytes");br.reset()}}function JumpToByteBoundary(br){var new_bit_pos=br.bit_pos_+7&-8;return 0==br.readBits(new_bit_pos-br.bit_pos_)}function BrotliDecompressedSize(buffer){var input=new BrotliInput(buffer),br=new BrotliBitReader(input);return DecodeWindowBits(br),DecodeMetaBlockLength(br).meta_block_length}function BrotliDecompressBuffer(buffer,output_size){var input=new BrotliInput(buffer);null==output_size&&(output_size=BrotliDecompressedSize(buffer));var output_buffer=new Uint8Array(output_size),output=new BrotliOutput(output_buffer);return BrotliDecompress(input,output),output.pos<output.buffer.length&&(output.buffer=output.buffer.subarray(0,output.pos)),output.buffer}function BrotliDecompress(input,output){var i,max_backward_distance,ringbuffer_size,ringbuffer_mask,ringbuffer,ringbuffer_end,block_type_trees,block_len_trees,br,pos=0,input_end=0,window_bits=0,max_distance=0,dist_rb=[16,15,11,4],dist_rb_idx=0,prev_byte1=0,prev_byte2=0,hgroup=[new HuffmanTreeGroup(0,0),new HuffmanTreeGroup(0,0),new HuffmanTreeGroup(0,0)],kRingBufferWriteAheadSlack=128+BrotliBitReader.READ_SIZE;max_backward_distance=(1<<(window_bits=DecodeWindowBits(br=new BrotliBitReader(input))))-16,ringbuffer_mask=(ringbuffer_size=1<<window_bits)-1,ringbuffer=new Uint8Array(ringbuffer_size+kRingBufferWriteAheadSlack+BrotliDictionary.maxDictionaryWordLength),ringbuffer_end=ringbuffer_size,block_type_trees=[],block_len_trees=[];for(var x=0;x<3*HUFFMAN_MAX_TABLE_SIZE;x++)block_type_trees[x]=new HuffmanCode(0,0),block_len_trees[x]=new HuffmanCode(0,0);for(;!input_end;){var is_uncompressed,distance_postfix_bits,num_direct_distance_codes,distance_postfix_mask,num_distance_codes,num_literal_htrees,num_dist_htrees,context_mode,htree_command,meta_block_remaining_len=0,block_length=[1<<28,1<<28,1<<28],block_type=[0],num_block_types=[1,1,1],block_type_rb=[0,1,0,1,0,1],block_type_rb_index=[0],context_map=null,context_modes=null,dist_context_map=null,context_map_slice=null,literal_htree_index=0,dist_context_map_slice=null,dist_htree_index=0,context_lookup_offset1=0,context_lookup_offset2=0;for(i=0;i<3;++i)hgroup[i].codes=null,hgroup[i].htrees=null;br.readMoreInput();var _out=DecodeMetaBlockLength(br);if(pos+(meta_block_remaining_len=_out.meta_block_length)>output.buffer.length){var tmp=new Uint8Array(pos+meta_block_remaining_len);tmp.set(output.buffer),output.buffer=tmp}if(input_end=_out.input_end,is_uncompressed=_out.is_uncompressed,_out.is_metadata)for(JumpToByteBoundary(br);meta_block_remaining_len>0;--meta_block_remaining_len)br.readMoreInput(),br.readBits(8);else if(0!==meta_block_remaining_len)if(is_uncompressed)br.bit_pos_=br.bit_pos_+7&-8,CopyUncompressedBlockToOutput(output,meta_block_remaining_len,pos,ringbuffer,ringbuffer_mask,br),pos+=meta_block_remaining_len;else{for(i=0;i<3;++i)num_block_types[i]=DecodeVarLenUint8(br)+1,num_block_types[i]>=2&&(ReadHuffmanCode(num_block_types[i]+2,block_type_trees,i*HUFFMAN_MAX_TABLE_SIZE,br),ReadHuffmanCode(kNumBlockLengthCodes,block_len_trees,i*HUFFMAN_MAX_TABLE_SIZE,br),block_length[i]=ReadBlockLength(block_len_trees,i*HUFFMAN_MAX_TABLE_SIZE,br),block_type_rb_index[i]=1);for(br.readMoreInput(),distance_postfix_mask=(1<<(distance_postfix_bits=br.readBits(2)))-1,num_distance_codes=(num_direct_distance_codes=NUM_DISTANCE_SHORT_CODES+(br.readBits(4)<<distance_postfix_bits))+(48<<distance_postfix_bits),context_modes=new Uint8Array(num_block_types[0]),i=0;i<num_block_types[0];++i)br.readMoreInput(),context_modes[i]=br.readBits(2)<<1;var _o1=DecodeContextMap(num_block_types[0]<<kLiteralContextBits,br);num_literal_htrees=_o1.num_htrees,context_map=_o1.context_map;var _o2=DecodeContextMap(num_block_types[2]<<kDistanceContextBits,br);for(num_dist_htrees=_o2.num_htrees,dist_context_map=_o2.context_map,hgroup[0]=new HuffmanTreeGroup(kNumLiteralCodes,num_literal_htrees),hgroup[1]=new HuffmanTreeGroup(kNumInsertAndCopyCodes,num_block_types[1]),hgroup[2]=new HuffmanTreeGroup(num_distance_codes,num_dist_htrees),i=0;i<3;++i)hgroup[i].decode(br);for(context_map_slice=0,dist_context_map_slice=0,context_mode=context_modes[block_type[0]],context_lookup_offset1=Context.lookupOffsets[context_mode],context_lookup_offset2=Context.lookupOffsets[context_mode+1],htree_command=hgroup[1].htrees[0];meta_block_remaining_len>0;){var cmd_code,range_idx,insert_code,copy_code,insert_length,copy_length,distance_code,distance,j,copy_dst,nbits,postfix;for(br.readMoreInput(),0===block_length[1]&&(DecodeBlockType(num_block_types[1],block_type_trees,1,block_type,block_type_rb,block_type_rb_index,br),block_length[1]=ReadBlockLength(block_len_trees,HUFFMAN_MAX_TABLE_SIZE,br),htree_command=hgroup[1].htrees[block_type[1]]),--block_length[1],(range_idx=(cmd_code=ReadSymbol(hgroup[1].codes,htree_command,br))>>6)>=2?(range_idx-=2,distance_code=-1):distance_code=0,insert_code=Prefix.kInsertRangeLut[range_idx]+(cmd_code>>3&7),copy_code=Prefix.kCopyRangeLut[range_idx]+(7&cmd_code),insert_length=Prefix.kInsertLengthPrefixCode[insert_code].offset+br.readBits(Prefix.kInsertLengthPrefixCode[insert_code].nbits),copy_length=Prefix.kCopyLengthPrefixCode[copy_code].offset+br.readBits(Prefix.kCopyLengthPrefixCode[copy_code].nbits),prev_byte1=ringbuffer[pos-1&ringbuffer_mask],prev_byte2=ringbuffer[pos-2&ringbuffer_mask],j=0;j<insert_length;++j)br.readMoreInput(),0===block_length[0]&&(DecodeBlockType(num_block_types[0],block_type_trees,0,block_type,block_type_rb,block_type_rb_index,br),block_length[0]=ReadBlockLength(block_len_trees,0,br),context_map_slice=block_type[0]<<kLiteralContextBits,context_mode=context_modes[block_type[0]],context_lookup_offset1=Context.lookupOffsets[context_mode],context_lookup_offset2=Context.lookupOffsets[context_mode+1]),literal_htree_index=context_map[context_map_slice+(Context.lookup[context_lookup_offset1+prev_byte1]|Context.lookup[context_lookup_offset2+prev_byte2])],--block_length[0],prev_byte2=prev_byte1,prev_byte1=ReadSymbol(hgroup[0].codes,hgroup[0].htrees[literal_htree_index],br),ringbuffer[pos&ringbuffer_mask]=prev_byte1,(pos&ringbuffer_mask)===ringbuffer_mask&&output.write(ringbuffer,ringbuffer_size),++pos;if((meta_block_remaining_len-=insert_length)<=0)break;if(distance_code<0&&(br.readMoreInput(),0===block_length[2]&&(DecodeBlockType(num_block_types[2],block_type_trees,2,block_type,block_type_rb,block_type_rb_index,br),block_length[2]=ReadBlockLength(block_len_trees,2*HUFFMAN_MAX_TABLE_SIZE,br),dist_context_map_slice=block_type[2]<<kDistanceContextBits),--block_length[2],dist_htree_index=dist_context_map[dist_context_map_slice+(255&(copy_length>4?3:copy_length-2))],(distance_code=ReadSymbol(hgroup[2].codes,hgroup[2].htrees[dist_htree_index],br))>=num_direct_distance_codes&&(postfix=(distance_code-=num_direct_distance_codes)&distance_postfix_mask,distance_code=num_direct_distance_codes+((offset=(2+(1&(distance_code>>=distance_postfix_bits))<<(nbits=1+(distance_code>>1)))-4)+br.readBits(nbits)<<distance_postfix_bits)+postfix)),(distance=TranslateShortCodes(distance_code,dist_rb,dist_rb_idx))<0)throw new Error("[BrotliDecompress] invalid distance");if(copy_dst=pos&ringbuffer_mask,distance>(max_distance=pos<max_backward_distance&&max_distance!==max_backward_distance?pos:max_backward_distance)){if(!(copy_length>=BrotliDictionary.minDictionaryWordLength&&copy_length<=BrotliDictionary.maxDictionaryWordLength))throw new Error("Invalid backward reference. pos: "+pos+" distance: "+distance+" len: "+copy_length+" bytes left: "+meta_block_remaining_len);var offset=BrotliDictionary.offsetsByLength[copy_length],word_id=distance-max_distance-1,shift=BrotliDictionary.sizeBitsByLength[copy_length],transform_idx=word_id>>shift;if(offset+=(word_id&(1<<shift)-1)*copy_length,!(transform_idx<Transform.kNumTransforms))throw new Error("Invalid backward reference. pos: "+pos+" distance: "+distance+" len: "+copy_length+" bytes left: "+meta_block_remaining_len);var len=Transform.transformDictionaryWord(ringbuffer,copy_dst,offset,copy_length,transform_idx);if(pos+=len,meta_block_remaining_len-=len,(copy_dst+=len)>=ringbuffer_end){output.write(ringbuffer,ringbuffer_size);for(var _x=0;_x<copy_dst-ringbuffer_end;_x++)ringbuffer[_x]=ringbuffer[ringbuffer_end+_x]}}else{if(distance_code>0&&(dist_rb[3&dist_rb_idx]=distance,++dist_rb_idx),copy_length>meta_block_remaining_len)throw new Error("Invalid backward reference. pos: "+pos+" distance: "+distance+" len: "+copy_length+" bytes left: "+meta_block_remaining_len);for(j=0;j<copy_length;++j)ringbuffer[pos&ringbuffer_mask]=ringbuffer[pos-distance&ringbuffer_mask],(pos&ringbuffer_mask)===ringbuffer_mask&&output.write(ringbuffer,ringbuffer_size),++pos,--meta_block_remaining_len}prev_byte1=ringbuffer[pos-1&ringbuffer_mask],prev_byte2=ringbuffer[pos-2&ringbuffer_mask]}pos&=1073741823}}output.write(ringbuffer,pos&ringbuffer_mask)}HuffmanTreeGroup.prototype.decode=function(br){var i,next=0;for(i=0;i<this.num_htrees;++i)this.htrees[i]=next,next+=ReadHuffmanCode(this.alphabet_size,this.codes,next,br)},exports.BrotliDecompressedSize=BrotliDecompressedSize,exports.BrotliDecompressBuffer=BrotliDecompressBuffer,exports.BrotliDecompress=BrotliDecompress,BrotliDictionary.init()},{"./bit_reader":1,"./context":2,"./dictionary":6,"./huffman":7,"./prefix":9,"./streams":10,"./transform":11}],4:[function(require,module,exports){var base64=require("base64-js");exports.init=function(){return(0,require("./decode").BrotliDecompressBuffer)(base64.toByteArray(require("./dictionary.bin.js")))}},{"./decode":3,"./dictionary.bin.js":5,"base64-js":8}],5:[function(require,module,exports){module.exports="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"},{}],6:[function(require,module,exports){var data=require("./dictionary-browser");exports.init=function(){exports.dictionary=data.init()},exports.offsetsByLength=new Uint32Array([0,0,0,0,0,4096,9216,21504,35840,44032,53248,63488,74752,87040,93696,100864,104704,106752,108928,113536,115968,118528,119872,121280,122016]),exports.sizeBitsByLength=new Uint8Array([0,0,0,0,10,10,11,11,10,10,10,10,10,9,9,8,7,7,8,7,7,6,6,5,5]),exports.minDictionaryWordLength=4,exports.maxDictionaryWordLength=24},{"./dictionary-browser":4}],7:[function(require,module,exports){function HuffmanCode(bits,value){this.bits=bits,this.value=value}exports.HuffmanCode=HuffmanCode;var MAX_LENGTH=15;function GetNextKey(key,len){for(var step=1<<len-1;key&step;)step>>=1;return(key&step-1)+step}function ReplicateValue(table,i,step,end,code){do{table[i+(end-=step)]=new HuffmanCode(code.bits,code.value)}while(end>0)}function NextTableBitSize(count,len,root_bits){for(var left=1<<len-root_bits;len<MAX_LENGTH&&!((left-=count[len])<=0);)++len,left<<=1;return len-root_bits}exports.BrotliBuildHuffmanTable=function(root_table,table,root_bits,code_lengths,code_lengths_size){var len,symbol,key,step,low,mask,table_bits,table_size,total_size,sorted,start_table=table,count=new Int32Array(MAX_LENGTH+1),offset=new Int32Array(MAX_LENGTH+1);for(sorted=new Int32Array(code_lengths_size),symbol=0;symbol<code_lengths_size;symbol++)count[code_lengths[symbol]]++;for(offset[1]=0,len=1;len<MAX_LENGTH;len++)offset[len+1]=offset[len]+count[len];for(symbol=0;symbol<code_lengths_size;symbol++)0!==code_lengths[symbol]&&(sorted[offset[code_lengths[symbol]]++]=symbol);if(total_size=table_size=1<<(table_bits=root_bits),1===offset[MAX_LENGTH]){for(key=0;key<total_size;++key)root_table[table+key]=new HuffmanCode(0,65535&sorted[0]);return total_size}for(key=0,symbol=0,len=1,step=2;len<=root_bits;++len,step<<=1)for(;count[len]>0;--count[len])ReplicateValue(root_table,table+key,step,table_size,new HuffmanCode(255&len,65535&sorted[symbol++])),key=GetNextKey(key,len);for(mask=total_size-1,low=-1,len=root_bits+1,step=2;len<=MAX_LENGTH;++len,step<<=1)for(;count[len]>0;--count[len])(key&mask)!==low&&(table+=table_size,total_size+=table_size=1<<(table_bits=NextTableBitSize(count,len,root_bits)),root_table[start_table+(low=key&mask)]=new HuffmanCode(table_bits+root_bits&255,table-start_table-low&65535)),ReplicateValue(root_table,table+(key>>root_bits),step,table_size,new HuffmanCode(len-root_bits&255,65535&sorted[symbol++])),key=GetNextKey(key,len);return total_size}},{}],8:[function(require,module,exports){"use strict";exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function byteLength(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}function toByteArray(b64){for(var tmp,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(_byteLength(b64,validLen,placeHoldersLen)),curByte=0,len=placeHoldersLen>0?validLen-4:validLen,i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;return 2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp),1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp),arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]}function encodeChunk(uint8,start,end){for(var tmp,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(tripletToBase64(tmp));return output.join("")}function fromByteArray(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],maxChunkLength=16383,i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength)parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength));return 1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")),parts.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},{}],9:[function(require,module,exports){function PrefixCodeRange(offset,nbits){this.offset=offset,this.nbits=nbits}exports.kBlockLengthPrefixCode=[new PrefixCodeRange(1,2),new PrefixCodeRange(5,2),new PrefixCodeRange(9,2),new PrefixCodeRange(13,2),new PrefixCodeRange(17,3),new PrefixCodeRange(25,3),new PrefixCodeRange(33,3),new PrefixCodeRange(41,3),new PrefixCodeRange(49,4),new PrefixCodeRange(65,4),new PrefixCodeRange(81,4),new PrefixCodeRange(97,4),new PrefixCodeRange(113,5),new PrefixCodeRange(145,5),new PrefixCodeRange(177,5),new PrefixCodeRange(209,5),new PrefixCodeRange(241,6),new PrefixCodeRange(305,6),new PrefixCodeRange(369,7),new PrefixCodeRange(497,8),new PrefixCodeRange(753,9),new PrefixCodeRange(1265,10),new PrefixCodeRange(2289,11),new PrefixCodeRange(4337,12),new PrefixCodeRange(8433,13),new PrefixCodeRange(16625,24)],exports.kInsertLengthPrefixCode=[new PrefixCodeRange(0,0),new PrefixCodeRange(1,0),new PrefixCodeRange(2,0),new PrefixCodeRange(3,0),new PrefixCodeRange(4,0),new PrefixCodeRange(5,0),new PrefixCodeRange(6,1),new PrefixCodeRange(8,1),new PrefixCodeRange(10,2),new PrefixCodeRange(14,2),new PrefixCodeRange(18,3),new PrefixCodeRange(26,3),new PrefixCodeRange(34,4),new PrefixCodeRange(50,4),new PrefixCodeRange(66,5),new PrefixCodeRange(98,5),new PrefixCodeRange(130,6),new PrefixCodeRange(194,7),new PrefixCodeRange(322,8),new PrefixCodeRange(578,9),new PrefixCodeRange(1090,10),new PrefixCodeRange(2114,12),new PrefixCodeRange(6210,14),new PrefixCodeRange(22594,24)],exports.kCopyLengthPrefixCode=[new PrefixCodeRange(2,0),new PrefixCodeRange(3,0),new PrefixCodeRange(4,0),new PrefixCodeRange(5,0),new PrefixCodeRange(6,0),new PrefixCodeRange(7,0),new PrefixCodeRange(8,0),new PrefixCodeRange(9,0),new PrefixCodeRange(10,1),new PrefixCodeRange(12,1),new PrefixCodeRange(14,2),new PrefixCodeRange(18,2),new PrefixCodeRange(22,3),new PrefixCodeRange(30,3),new PrefixCodeRange(38,4),new PrefixCodeRange(54,4),new PrefixCodeRange(70,5),new PrefixCodeRange(102,5),new PrefixCodeRange(134,6),new PrefixCodeRange(198,7),new PrefixCodeRange(326,8),new PrefixCodeRange(582,9),new PrefixCodeRange(1094,10),new PrefixCodeRange(2118,24)],exports.kInsertRangeLut=[0,0,8,8,0,16,8,16,16],exports.kCopyRangeLut=[0,8,0,8,16,0,16,8,16]},{}],10:[function(require,module,exports){function BrotliInput(buffer){this.buffer=buffer,this.pos=0}function BrotliOutput(buf){this.buffer=buf,this.pos=0}BrotliInput.prototype.read=function(buf,i,count){this.pos+count>this.buffer.length&&(count=this.buffer.length-this.pos);for(var p=0;p<count;p++)buf[i+p]=this.buffer[this.pos+p];return this.pos+=count,count},exports.BrotliInput=BrotliInput,BrotliOutput.prototype.write=function(buf,count){if(this.pos+count>this.buffer.length)throw new Error("Output buffer is not large enough");return this.buffer.set(buf.subarray(0,count),this.pos),this.pos+=count,count},exports.BrotliOutput=BrotliOutput},{}],11:[function(require,module,exports){var BrotliDictionary=require("./dictionary"),kIdentity=0,kOmitLast1=1,kOmitLast2=2,kOmitLast3=3,kOmitLast4=4,kOmitLast5=5,kOmitLast6=6,kOmitLast7=7,kOmitLast8=8,kOmitLast9=9,kUppercaseFirst=10,kUppercaseAll=11,kOmitFirst1=12,kOmitFirst2=13,kOmitFirst3=14,kOmitFirst4=15,kOmitFirst5=16,kOmitFirst6=17,kOmitFirst7=18,kOmitFirst9=20;function Transform(prefix,transform,suffix){this.prefix=new Uint8Array(prefix.length),this.transform=transform,this.suffix=new Uint8Array(suffix.length);for(var i=0;i<prefix.length;i++)this.prefix[i]=prefix.charCodeAt(i);for(i=0;i<suffix.length;i++)this.suffix[i]=suffix.charCodeAt(i)}var kTransforms=[new Transform("",kIdentity,""),new Transform("",kIdentity," "),new Transform(" ",kIdentity," "),new Transform("",kOmitFirst1,""),new Transform("",kUppercaseFirst," "),new Transform("",kIdentity," the "),new Transform(" ",kIdentity,""),new Transform("s ",kIdentity," "),new Transform("",kIdentity," of "),new Transform("",kUppercaseFirst,""),new Transform("",kIdentity," and "),new Transform("",kOmitFirst2,""),new Transform("",kOmitLast1,""),new Transform(", ",kIdentity," "),new Transform("",kIdentity,", "),new Transform(" ",kUppercaseFirst," "),new Transform("",kIdentity," in "),new Transform("",kIdentity," to "),new Transform("e ",kIdentity," "),new Transform("",kIdentity,'"'),new Transform("",kIdentity,"."),new Transform("",kIdentity,'">'),new Transform("",kIdentity,"\n"),new Transform("",kOmitLast3,""),new Transform("",kIdentity,"]"),new Transform("",kIdentity," for "),new Transform("",kOmitFirst3,""),new Transform("",kOmitLast2,""),new Transform("",kIdentity," a "),new Transform("",kIdentity," that "),new Transform(" ",kUppercaseFirst,""),new Transform("",kIdentity,". "),new Transform(".",kIdentity,""),new Transform(" ",kIdentity,", "),new Transform("",kOmitFirst4,""),new Transform("",kIdentity," with "),new Transform("",kIdentity,"'"),new Transform("",kIdentity," from "),new Transform("",kIdentity," by "),new Transform("",kOmitFirst5,""),new Transform("",kOmitFirst6,""),new Transform(" the ",kIdentity,""),new Transform("",kOmitLast4,""),new Transform("",kIdentity,". The "),new Transform("",kUppercaseAll,""),new Transform("",kIdentity," on "),new Transform("",kIdentity," as "),new Transform("",kIdentity," is "),new Transform("",kOmitLast7,""),new Transform("",kOmitLast1,"ing "),new Transform("",kIdentity,"\n\t"),new Transform("",kIdentity,":"),new Transform(" ",kIdentity,". "),new Transform("",kIdentity,"ed "),new Transform("",kOmitFirst9,""),new Transform("",kOmitFirst7,""),new Transform("",kOmitLast6,""),new Transform("",kIdentity,"("),new Transform("",kUppercaseFirst,", "),new Transform("",kOmitLast8,""),new Transform("",kIdentity," at "),new Transform("",kIdentity,"ly "),new Transform(" the ",kIdentity," of "),new Transform("",kOmitLast5,""),new Transform("",kOmitLast9,""),new Transform(" ",kUppercaseFirst,", "),new Transform("",kUppercaseFirst,'"'),new Transform(".",kIdentity,"("),new Transform("",kUppercaseAll," "),new Transform("",kUppercaseFirst,'">'),new Transform("",kIdentity,'="'),new Transform(" ",kIdentity,"."),new Transform(".com/",kIdentity,""),new Transform(" the ",kIdentity," of the "),new Transform("",kUppercaseFirst,"'"),new Transform("",kIdentity,". This "),new Transform("",kIdentity,","),new Transform(".",kIdentity," "),new Transform("",kUppercaseFirst,"("),new Transform("",kUppercaseFirst,"."),new Transform("",kIdentity," not "),new Transform(" ",kIdentity,'="'),new Transform("",kIdentity,"er "),new Transform(" ",kUppercaseAll," "),new Transform("",kIdentity,"al "),new Transform(" ",kUppercaseAll,""),new Transform("",kIdentity,"='"),new Transform("",kUppercaseAll,'"'),new Transform("",kUppercaseFirst,". "),new Transform(" ",kIdentity,"("),new Transform("",kIdentity,"ful "),new Transform(" ",kUppercaseFirst,". "),new Transform("",kIdentity,"ive "),new Transform("",kIdentity,"less "),new Transform("",kUppercaseAll,"'"),new Transform("",kIdentity,"est "),new Transform(" ",kUppercaseFirst,"."),new Transform("",kUppercaseAll,'">'),new Transform(" ",kIdentity,"='"),new Transform("",kUppercaseFirst,","),new Transform("",kIdentity,"ize "),new Transform("",kUppercaseAll,"."),new Transform("Â ",kIdentity,""),new Transform(" ",kIdentity,","),new Transform("",kUppercaseFirst,'="'),new Transform("",kUppercaseAll,'="'),new Transform("",kIdentity,"ous "),new Transform("",kUppercaseAll,", "),new Transform("",kUppercaseFirst,"='"),new Transform(" ",kUppercaseFirst,","),new Transform(" ",kUppercaseAll,'="'),new Transform(" ",kUppercaseAll,", "),new Transform("",kUppercaseAll,","),new Transform("",kUppercaseAll,"("),new Transform("",kUppercaseAll,". "),new Transform(" ",kUppercaseAll,"."),new Transform("",kUppercaseAll,"='"),new Transform(" ",kUppercaseAll,". "),new Transform(" ",kUppercaseFirst,'="'),new Transform(" ",kUppercaseAll,"='"),new Transform(" ",kUppercaseFirst,"='")];function ToUpperCase(p,i){return p[i]<192?(p[i]>=97&&p[i]<=122&&(p[i]^=32),1):p[i]<224?(p[i+1]^=32,2):(p[i+2]^=5,3)}exports.kTransforms=kTransforms,exports.kNumTransforms=kTransforms.length,exports.transformDictionaryWord=function(dst,idx,word,len,transform){var uppercase,prefix=kTransforms[transform].prefix,suffix=kTransforms[transform].suffix,t=kTransforms[transform].transform,skip=t<kOmitFirst1?0:t-(kOmitFirst1-1),i=0,start_idx=idx;skip>len&&(skip=len);for(var prefix_pos=0;prefix_pos<prefix.length;)dst[idx++]=prefix[prefix_pos++];for(word+=skip,len-=skip,t<=kOmitLast9&&(len-=t),i=0;i<len;i++)dst[idx++]=BrotliDictionary.dictionary[word+i];if(uppercase=idx-len,t===kUppercaseFirst)ToUpperCase(dst,uppercase);else if(t===kUppercaseAll)for(;len>0;){var step=ToUpperCase(dst,uppercase);uppercase+=step,len-=step}for(var suffix_pos=0;suffix_pos<suffix.length;)dst[idx++]=suffix[suffix_pos++];return idx-start_idx}},{"./dictionary":6}],12:[function(require,module,exports){module.exports=require("./dec/decode").BrotliDecompressBuffer},{"./dec/decode":3}]},{},[12])(12)},"./packages/icons/build-module/library/color.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3zm-5.1 7.6c-2.5 0-4.6-2.1-4.6-4.6 0-.3.1-1 .8-2.3.5-.9 1.1-1.9 2-3.1.7-.9 1.3-1.7 1.8-2.3.7.8 1.3 1.6 1.8 2.3.8 1.1 1.5 2.2 2 3.1.7 1.3.8 2 .8 2.3 0 2.5-2.1 4.6-4.6 4.6z"})})},"./packages/icons/build-module/library/desktop.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})})},"./packages/icons/build-module/library/mobile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})})},"./packages/icons/build-module/library/redo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})})},"./packages/icons/build-module/library/star-empty.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})})},"./packages/icons/build-module/library/star-filled.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})})},"./packages/icons/build-module/library/tablet.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z"})})},"./packages/icons/build-module/library/undo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})})},"./packages/icons/build-module/library/wordpress.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.wA,{d:"M20 10c0-5.51-4.49-10-10-10C4.48 0 0 4.49 0 10c0 5.52 4.48 10 10 10 5.51 0 10-4.48 10-10zM7.78 15.37L4.37 6.22c.55-.02 1.17-.08 1.17-.08.5-.06.44-1.13-.06-1.11 0 0-1.45.11-2.37.11-.18 0-.37 0-.58-.01C4.12 2.69 6.87 1.11 10 1.11c2.33 0 4.45.87 6.05 2.34-.68-.11-1.65.39-1.65 1.58 0 .74.45 1.36.9 2.1.35.61.55 1.36.55 2.46 0 1.49-1.4 5-1.4 5l-3.03-8.37c.54-.02.82-.17.82-.17.5-.05.44-1.25-.06-1.22 0 0-1.44.12-2.38.12-.87 0-2.33-.12-2.33-.12-.5-.03-.56 1.2-.06 1.22l.92.08 1.26 3.41zM17.41 10c.24-.64.74-1.87.43-4.25.7 1.29 1.05 2.71 1.05 4.25 0 3.29-1.73 6.24-4.4 7.78.97-2.59 1.94-5.2 2.92-7.78zM6.1 18.09C3.12 16.65 1.11 13.53 1.11 10c0-1.3.23-2.48.72-3.59C3.25 10.3 4.67 14.2 6.1 18.09zm4.03-6.63l2.58 6.98c-.86.29-1.76.45-2.71.45-.79 0-1.57-.11-2.29-.33.81-2.38 1.62-4.74 2.42-7.1z"})})},"./packages/edit-site/lib sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./packages/edit-site/lib sync recursive",module.exports=webpackEmptyContext},"./packages/edit-site/src/components/global-styles/stories/index.story.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{GlobalStylesUI:()=>index_story_GlobalStylesUI,default:()=>index_story});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{__experimentalGetDefaultTemplatePartAreas:()=>__experimentalGetDefaultTemplatePartAreas,__experimentalGetDefaultTemplateType:()=>__experimentalGetDefaultTemplateType,__experimentalGetDefaultTemplateTypes:()=>__experimentalGetDefaultTemplateTypes,__experimentalGetTemplateInfo:()=>__experimentalGetTemplateInfo,__unstableIsEditorReady:()=>__unstableIsEditorReady,canInsertBlockType:()=>canInsertBlockType,canUserUseUnfilteredHTML:()=>canUserUseUnfilteredHTML,didPostSaveRequestFail:()=>didPostSaveRequestFail,didPostSaveRequestSucceed:()=>didPostSaveRequestSucceed,getActivePostLock:()=>getActivePostLock,getAdjacentBlockClientId:()=>getAdjacentBlockClientId,getAutosaveAttribute:()=>getAutosaveAttribute,getBlock:()=>getBlock,getBlockAttributes:()=>getBlockAttributes,getBlockCount:()=>getBlockCount,getBlockHierarchyRootClientId:()=>getBlockHierarchyRootClientId,getBlockIndex:()=>getBlockIndex,getBlockInsertionPoint:()=>getBlockInsertionPoint,getBlockListSettings:()=>getBlockListSettings,getBlockMode:()=>getBlockMode,getBlockName:()=>getBlockName,getBlockOrder:()=>getBlockOrder,getBlockRootClientId:()=>getBlockRootClientId,getBlockSelectionEnd:()=>getBlockSelectionEnd,getBlockSelectionStart:()=>getBlockSelectionStart,getBlocks:()=>getBlocks,getBlocksByClientId:()=>getBlocksByClientId,getClientIdsOfDescendants:()=>getClientIdsOfDescendants,getClientIdsWithDescendants:()=>getClientIdsWithDescendants,getCurrentPost:()=>getCurrentPost,getCurrentPostAttribute:()=>getCurrentPostAttribute,getCurrentPostId:()=>getCurrentPostId,getCurrentPostLastRevisionId:()=>getCurrentPostLastRevisionId,getCurrentPostRevisionsCount:()=>getCurrentPostRevisionsCount,getCurrentPostType:()=>getCurrentPostType,getCurrentTemplateId:()=>getCurrentTemplateId,getDeviceType:()=>getDeviceType,getEditedPostAttribute:()=>getEditedPostAttribute,getEditedPostContent:()=>getEditedPostContent,getEditedPostPreviewLink:()=>getEditedPostPreviewLink,getEditedPostSlug:()=>getEditedPostSlug,getEditedPostVisibility:()=>getEditedPostVisibility,getEditorBlocks:()=>getEditorBlocks,getEditorMode:()=>getEditorMode,getEditorSelection:()=>getEditorSelection,getEditorSelectionEnd:()=>getEditorSelectionEnd,getEditorSelectionStart:()=>getEditorSelectionStart,getEditorSettings:()=>getEditorSettings,getFirstMultiSelectedBlockClientId:()=>getFirstMultiSelectedBlockClientId,getGlobalBlockCount:()=>getGlobalBlockCount,getInserterItems:()=>getInserterItems,getLastMultiSelectedBlockClientId:()=>getLastMultiSelectedBlockClientId,getMultiSelectedBlockClientIds:()=>getMultiSelectedBlockClientIds,getMultiSelectedBlocks:()=>getMultiSelectedBlocks,getMultiSelectedBlocksEndClientId:()=>getMultiSelectedBlocksEndClientId,getMultiSelectedBlocksStartClientId:()=>getMultiSelectedBlocksStartClientId,getNextBlockClientId:()=>getNextBlockClientId,getPermalink:()=>getPermalink,getPermalinkParts:()=>getPermalinkParts,getPostEdits:()=>getPostEdits,getPostLockUser:()=>getPostLockUser,getPostTypeLabel:()=>getPostTypeLabel,getPreviousBlockClientId:()=>getPreviousBlockClientId,getRenderingMode:()=>getRenderingMode,getSelectedBlock:()=>getSelectedBlock,getSelectedBlockClientId:()=>getSelectedBlockClientId,getSelectedBlockCount:()=>getSelectedBlockCount,getSelectedBlocksInitialCaretPosition:()=>getSelectedBlocksInitialCaretPosition,getStateBeforeOptimisticTransaction:()=>getStateBeforeOptimisticTransaction,getSuggestedPostFormat:()=>getSuggestedPostFormat,getTemplate:()=>getTemplate,getTemplateLock:()=>getTemplateLock,hasChangedContent:()=>hasChangedContent,hasEditorRedo:()=>hasEditorRedo,hasEditorUndo:()=>hasEditorUndo,hasInserterItems:()=>hasInserterItems,hasMultiSelection:()=>hasMultiSelection,hasNonPostEntityChanges:()=>hasNonPostEntityChanges,hasSelectedBlock:()=>hasSelectedBlock,hasSelectedInnerBlock:()=>hasSelectedInnerBlock,inSomeHistory:()=>inSomeHistory,isAncestorMultiSelected:()=>isAncestorMultiSelected,isAutosavingPost:()=>isAutosavingPost,isBlockInsertionPointVisible:()=>isBlockInsertionPointVisible,isBlockMultiSelected:()=>isBlockMultiSelected,isBlockSelected:()=>isBlockSelected,isBlockValid:()=>isBlockValid,isBlockWithinSelection:()=>isBlockWithinSelection,isCaretWithinFormattedText:()=>isCaretWithinFormattedText,isCleanNewPost:()=>isCleanNewPost,isCurrentPostPending:()=>isCurrentPostPending,isCurrentPostPublished:()=>isCurrentPostPublished,isCurrentPostScheduled:()=>isCurrentPostScheduled,isDeletingPost:()=>isDeletingPost,isEditedPostAutosaveable:()=>isEditedPostAutosaveable,isEditedPostBeingScheduled:()=>isEditedPostBeingScheduled,isEditedPostDateFloating:()=>isEditedPostDateFloating,isEditedPostDirty:()=>isEditedPostDirty,isEditedPostEmpty:()=>isEditedPostEmpty,isEditedPostNew:()=>isEditedPostNew,isEditedPostPublishable:()=>isEditedPostPublishable,isEditedPostSaveable:()=>isEditedPostSaveable,isEditorPanelEnabled:()=>isEditorPanelEnabled,isEditorPanelOpened:()=>isEditorPanelOpened,isEditorPanelRemoved:()=>isEditorPanelRemoved,isFirstMultiSelectedBlock:()=>isFirstMultiSelectedBlock,isInserterOpened:()=>isInserterOpened,isListViewOpened:()=>isListViewOpened,isMultiSelecting:()=>isMultiSelecting,isPermalinkEditable:()=>isPermalinkEditable,isPostAutosavingLocked:()=>isPostAutosavingLocked,isPostLockTakeover:()=>isPostLockTakeover,isPostLocked:()=>isPostLocked,isPostSavingLocked:()=>isPostSavingLocked,isPreviewingPost:()=>isPreviewingPost,isPublishSidebarEnabled:()=>isPublishSidebarEnabled,isPublishSidebarOpened:()=>isPublishSidebarOpened,isPublishingPost:()=>isPublishingPost,isSavingNonPostEntityChanges:()=>isSavingNonPostEntityChanges,isSavingPost:()=>isSavingPost,isSelectionEnabled:()=>isSelectionEnabled,isTyping:()=>isTyping,isValidTemplate:()=>isValidTemplate});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{__experimentalTearDownEditor:()=>__experimentalTearDownEditor,__unstableSaveForPreview:()=>__unstableSaveForPreview,autosave:()=>autosave,clearSelectedBlock:()=>clearSelectedBlock,closePublishSidebar:()=>closePublishSidebar,createUndoLevel:()=>createUndoLevel,disablePublishSidebar:()=>disablePublishSidebar,editPost:()=>editPost,enablePublishSidebar:()=>enablePublishSidebar,enterFormattedText:()=>enterFormattedText,exitFormattedText:()=>exitFormattedText,hideInsertionPoint:()=>hideInsertionPoint,insertBlock:()=>insertBlock,insertBlocks:()=>insertBlocks,insertDefaultBlock:()=>insertDefaultBlock,lockPostAutosaving:()=>lockPostAutosaving,lockPostSaving:()=>lockPostSaving,mergeBlocks:()=>mergeBlocks,moveBlockToPosition:()=>moveBlockToPosition,moveBlocksDown:()=>moveBlocksDown,moveBlocksUp:()=>moveBlocksUp,multiSelect:()=>multiSelect,openPublishSidebar:()=>openPublishSidebar,receiveBlocks:()=>receiveBlocks,redo:()=>redo,refreshPost:()=>refreshPost,removeBlock:()=>removeBlock,removeBlocks:()=>removeBlocks,removeEditorPanel:()=>removeEditorPanel,replaceBlock:()=>replaceBlock,replaceBlocks:()=>replaceBlocks,resetBlocks:()=>resetBlocks,resetEditorBlocks:()=>resetEditorBlocks,resetPost:()=>resetPost,savePost:()=>savePost,selectBlock:()=>selectBlock,setDeviceType:()=>setDeviceType,setEditedPost:()=>setEditedPost,setIsInserterOpened:()=>setIsInserterOpened,setIsListViewOpened:()=>setIsListViewOpened,setRenderingMode:()=>setRenderingMode,setTemplateValidity:()=>setTemplateValidity,setupEditor:()=>setupEditor,setupEditorState:()=>setupEditorState,showInsertionPoint:()=>showInsertionPoint,startMultiSelect:()=>startMultiSelect,startTyping:()=>startTyping,stopMultiSelect:()=>stopMultiSelect,stopTyping:()=>stopTyping,switchEditorMode:()=>switchEditorMode,synchronizeTemplate:()=>synchronizeTemplate,toggleBlockMode:()=>toggleBlockMode,toggleDistractionFree:()=>toggleDistractionFree,toggleEditorPanelEnabled:()=>toggleEditorPanelEnabled,toggleEditorPanelOpened:()=>toggleEditorPanelOpened,togglePublishSidebar:()=>togglePublishSidebar,toggleSelection:()=>toggleSelection,trashPost:()=>trashPost,undo:()=>undo,unlockPostAutosaving:()=>unlockPostAutosaving,unlockPostSaving:()=>unlockPostSaving,updateBlock:()=>updateBlock,updateBlockAttributes:()=>updateBlockAttributes,updateBlockListSettings:()=>updateBlockListSettings,updateEditorSettings:()=>updateEditorSettings,updatePost:()=>updatePost,updatePostLock:()=>updatePostLock});var store_private_actions_namespaceObject={};__webpack_require__.r(store_private_actions_namespaceObject),__webpack_require__.d(store_private_actions_namespaceObject,{createTemplate:()=>createTemplate,hideBlockTypes:()=>hideBlockTypes,registerEntityAction:()=>registerEntityAction,registerPostTypeActions:()=>registerPostTypeActions,removeTemplates:()=>removeTemplates,revertTemplate:()=>private_actions_revertTemplate,saveDirtyEntities:()=>saveDirtyEntities,setCurrentTemplateId:()=>setCurrentTemplateId,setIsReady:()=>setIsReady,showBlockTypes:()=>showBlockTypes,unregisterEntityAction:()=>unregisterEntityAction});var store_private_selectors_namespaceObject={};__webpack_require__.r(store_private_selectors_namespaceObject),__webpack_require__.d(store_private_selectors_namespaceObject,{getEntityActions:()=>private_selectors_getEntityActions,getInserter:()=>getInserter,getInserterSidebarToggleRef:()=>getInserterSidebarToggleRef,getListViewToggleRef:()=>getListViewToggleRef,getPostBlocksByName:()=>getPostBlocksByName,getPostIcon:()=>getPostIcon,hasPostMetaChanges:()=>hasPostMetaChanges,isEntityReady:()=>private_selectors_isEntityReady});var store_actions_namespaceObject={};__webpack_require__.r(store_actions_namespaceObject),__webpack_require__.d(store_actions_namespaceObject,{setIsMatching:()=>setIsMatching});var store_selectors_namespaceObject={};__webpack_require__.r(store_selectors_namespaceObject),__webpack_require__.d(store_selectors_namespaceObject,{isViewportMatch:()=>isViewportMatch});var build_module_store_actions_namespaceObject={};__webpack_require__.r(build_module_store_actions_namespaceObject),__webpack_require__.d(build_module_store_actions_namespaceObject,{closeModal:()=>closeModal,disableComplementaryArea:()=>disableComplementaryArea,enableComplementaryArea:()=>enableComplementaryArea,openModal:()=>openModal,pinItem:()=>pinItem,setDefaultComplementaryArea:()=>setDefaultComplementaryArea,setFeatureDefaults:()=>setFeatureDefaults,setFeatureValue:()=>setFeatureValue,toggleFeature:()=>toggleFeature,unpinItem:()=>unpinItem});var build_module_store_selectors_namespaceObject={};__webpack_require__.r(build_module_store_selectors_namespaceObject),__webpack_require__.d(build_module_store_selectors_namespaceObject,{getActiveComplementaryArea:()=>getActiveComplementaryArea,isComplementaryAreaLoading:()=>isComplementaryAreaLoading,isFeatureActive:()=>isFeatureActive,isItemPinned:()=>isItemPinned,isModalActive:()=>isModalActive});var interface_build_module_namespaceObject={};__webpack_require__.r(interface_build_module_namespaceObject),__webpack_require__.d(interface_build_module_namespaceObject,{ActionItem:()=>action_item,ComplementaryArea:()=>complementary_area,ComplementaryAreaMoreMenuItem:()=>ComplementaryAreaMoreMenuItem,FullscreenMode:()=>fullscreen_mode,InterfaceSkeleton:()=>interface_skeleton,NavigableRegion:()=>navigable_region,PinnedItems:()=>pinned_items,store:()=>interface_build_module_store_store});var src_store_actions_namespaceObject={};__webpack_require__.r(src_store_actions_namespaceObject),__webpack_require__.d(src_store_actions_namespaceObject,{__experimentalSetPreviewDeviceType:()=>__experimentalSetPreviewDeviceType,addTemplate:()=>actions_addTemplate,closeGeneralSidebar:()=>closeGeneralSidebar,openGeneralSidebar:()=>openGeneralSidebar,openNavigationPanelToMenu:()=>openNavigationPanelToMenu,removeTemplate:()=>removeTemplate,revertTemplate:()=>actions_revertTemplate,setEditedEntity:()=>setEditedEntity,setEditedPostContext:()=>setEditedPostContext,setHasPageContentFocus:()=>setHasPageContentFocus,setHomeTemplateId:()=>setHomeTemplateId,setIsInserterOpened:()=>actions_setIsInserterOpened,setIsListViewOpened:()=>actions_setIsListViewOpened,setIsNavigationPanelOpened:()=>setIsNavigationPanelOpened,setIsSaveViewOpened:()=>setIsSaveViewOpened,setNavigationMenu:()=>setNavigationMenu,setNavigationPanelActiveMenu:()=>setNavigationPanelActiveMenu,setPage:()=>setPage,setTemplate:()=>setTemplate,setTemplatePart:()=>setTemplatePart,switchEditorMode:()=>actions_switchEditorMode,toggleDistractionFree:()=>actions_toggleDistractionFree,toggleFeature:()=>actions_toggleFeature,updateSettings:()=>updateSettings});var src_store_private_actions_namespaceObject={};__webpack_require__.r(src_store_private_actions_namespaceObject),__webpack_require__.d(src_store_private_actions_namespaceObject,{registerRoute:()=>registerRoute,setEditorCanvasContainerView:()=>setEditorCanvasContainerView});var src_store_selectors_namespaceObject={};__webpack_require__.r(src_store_selectors_namespaceObject),__webpack_require__.d(src_store_selectors_namespaceObject,{__experimentalGetInsertionPoint:()=>__experimentalGetInsertionPoint,__experimentalGetPreviewDeviceType:()=>__experimentalGetPreviewDeviceType,getCanUserCreateMedia:()=>getCanUserCreateMedia,getCurrentTemplateNavigationPanelSubMenu:()=>getCurrentTemplateNavigationPanelSubMenu,getCurrentTemplateTemplateParts:()=>getCurrentTemplateTemplateParts,getEditedPostContext:()=>getEditedPostContext,getEditedPostId:()=>getEditedPostId,getEditedPostType:()=>getEditedPostType,getEditorMode:()=>selectors_getEditorMode,getHomeTemplateId:()=>getHomeTemplateId,getNavigationPanelActiveMenu:()=>getNavigationPanelActiveMenu,getPage:()=>getPage,getReusableBlocks:()=>getReusableBlocks,getSettings:()=>getSettings,hasPageContentFocus:()=>hasPageContentFocus,isFeatureActive:()=>selectors_isFeatureActive,isInserterOpened:()=>selectors_isInserterOpened,isListViewOpened:()=>selectors_isListViewOpened,isNavigationOpened:()=>isNavigationOpened,isPage:()=>isPage,isSaveViewOpened:()=>isSaveViewOpened});var src_store_private_selectors_namespaceObject={};__webpack_require__.r(src_store_private_selectors_namespaceObject),__webpack_require__.d(src_store_private_selectors_namespaceObject,{getEditorCanvasContainerView:()=>getEditorCanvasContainerView,getRoutes:()=>getRoutes});var build_module=__webpack_require__("./packages/block-editor/build-module/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),core_data_build_module=__webpack_require__("./packages/core-data/build-module/index.js"),react=__webpack_require__("./node_modules/react/index.js"),create_higher_order_component=__webpack_require__("./packages/compose/build-module/utils/create-higher-order-component/index.js"),hooks_build_module=__webpack_require__("./packages/hooks/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),data_build_module=__webpack_require__("./packages/data/build-module/index.js");const EDITOR_SETTINGS_DEFAULTS={...build_module.fi,richEditingEnabled:!0,codeEditingEnabled:!0,fontLibraryEnabled:!0,enableCustomFields:void 0,defaultRenderingMode:"post-only"};const reducer=(0,data_build_module.HY)({actions:function actions(state={},action){var _state$action$kind$ac;switch(action.type){case"REGISTER_ENTITY_ACTION":return{...state,[action.kind]:{...state[action.kind],[action.name]:[...(null!==(_state$action$kind$ac=state[action.kind]?.[action.name])&&void 0!==_state$action$kind$ac?_state$action$kind$ac:[]).filter((_action=>_action.id!==action.config.id)),action.config]}};case"UNREGISTER_ENTITY_ACTION":var _state$action$kind$ac2;return{...state,[action.kind]:{...state[action.kind],[action.name]:(null!==(_state$action$kind$ac2=state[action.kind]?.[action.name])&&void 0!==_state$action$kind$ac2?_state$action$kind$ac2:[]).filter((_action=>_action.id!==action.actionId))}}}return state},isReady:function isReady(state={},action){return"SET_IS_READY"===action.type?{...state,[action.kind]:{...state[action.kind],[action.name]:!0}}:state}});function getPostRawValue(value){return value&&"object"==typeof value&&"raw"in value?value.raw:value}const store_reducer=(0,data_build_module.HY)({postId:function postId(state=null,action){return"SET_EDITED_POST"===action.type?action.postId:state},postType:function postType(state=null,action){return"SET_EDITED_POST"===action.type?action.postType:state},templateId:function templateId(state=null,action){return"SET_CURRENT_TEMPLATE_ID"===action.type?action.id:state},saving:function saving(state={},action){switch(action.type){case"REQUEST_POST_UPDATE_START":case"REQUEST_POST_UPDATE_FINISH":return{pending:"REQUEST_POST_UPDATE_START"===action.type,options:action.options||{}}}return state},deleting:function deleting(state={},action){switch(action.type){case"REQUEST_POST_DELETE_START":case"REQUEST_POST_DELETE_FINISH":return{pending:"REQUEST_POST_DELETE_START"===action.type}}return state},postLock:function postLock(state={isLocked:!1},action){return"UPDATE_POST_LOCK"===action.type?action.lock:state},template:function template(state={isValid:!0},action){return"SET_TEMPLATE_VALIDITY"===action.type?{...state,isValid:action.isValid}:state},postSavingLock:function postSavingLock(state={},action){switch(action.type){case"LOCK_POST_SAVING":return{...state,[action.lockName]:!0};case"UNLOCK_POST_SAVING":{const{[action.lockName]:removedLockName,...restState}=state;return restState}}return state},editorSettings:function editorSettings(state=EDITOR_SETTINGS_DEFAULTS,action){return"UPDATE_EDITOR_SETTINGS"===action.type?{...state,...action.settings}:state},postAutosavingLock:function postAutosavingLock(state={},action){switch(action.type){case"LOCK_POST_AUTOSAVING":return{...state,[action.lockName]:!0};case"UNLOCK_POST_AUTOSAVING":{const{[action.lockName]:removedLockName,...restState}=state;return restState}}return state},renderingMode:function renderingMode(state="post-only",action){return"SET_RENDERING_MODE"===action.type?action.mode:state},deviceType:function deviceType(state="Desktop",action){return"SET_DEVICE_TYPE"===action.type?action.deviceType:state},removedPanels:function removedPanels(state=[],action){if("REMOVE_PANEL"===action.type)if(!state.includes(action.panelName))return[...state,action.panelName];return state},blockInserterPanel:function blockInserterPanel(state=!1,action){switch(action.type){case"SET_IS_LIST_VIEW_OPENED":return!action.isOpen&&state;case"SET_IS_INSERTER_OPENED":return action.value}return state},inserterSidebarToggleRef:function inserterSidebarToggleRef(state={current:null}){return state},listViewPanel:function listViewPanel(state=!1,action){switch(action.type){case"SET_IS_INSERTER_OPENED":return!action.value&&state;case"SET_IS_LIST_VIEW_OPENED":return action.isOpen}return state},listViewToggleRef:function listViewToggleRef(state={current:null}){return state},publishSidebarActive:function publishSidebarActive(state=!1,action){switch(action.type){case"OPEN_PUBLISH_SIDEBAR":return!0;case"CLOSE_PUBLISH_SIDEBAR":return!1;case"TOGGLE_PUBLISH_SIDEBAR":return!state}return state},dataviews:reducer});var blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js"),date_build_module=__webpack_require__("./packages/date/build-module/index.js"),add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js"),remove_accents=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents_default=__webpack_require__.n(remove_accents);function cleanForSlug(string){return string?remove_accents_default()(string).replace(/[\s\./]+/g,"-").replace(/[^\p{L}\p{N}_-]+/gu,"").toLowerCase().replace(/-+/g,"-").replace(/(^-+)|(-+$)/g,""):""}var factory=__webpack_require__("./packages/data/build-module/factory.js"),rememo=__webpack_require__("./node_modules/rememo/rememo.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),platform=__webpack_require__("./packages/element/build-module/platform.js"),layout=__webpack_require__("./packages/icons/build-module/library/layout.js"),store=__webpack_require__("./packages/preferences/build-module/store/index.js");const EDIT_MERGE_PROPERTIES=new Set(["meta"]),PERMALINK_POSTNAME_REGEX=/%(?:postname|pagename)%/,ONE_MINUTE_IN_MS=6e4,AUTOSAVE_PROPERTIES=["title","excerpt","content"],TEMPLATE_PART_AREA_DEFAULT_CATEGORY="uncategorized",constants_TEMPLATE_POST_TYPE="wp_template",constants_TEMPLATE_PART_POST_TYPE="wp_template_part",PATTERN_POST_TYPE="wp_block",NAVIGATION_POST_TYPE="wp_navigation",constants_TEMPLATE_ORIGINS={custom:"custom",theme:"theme",plugin:"plugin"},TEMPLATE_POST_TYPES=["wp_template","wp_template_part"],GLOBAL_POST_TYPES=[...TEMPLATE_POST_TYPES,"wp_block","wp_navigation"];var header=__webpack_require__("./packages/icons/build-module/library/header.js"),footer=__webpack_require__("./packages/icons/build-module/library/footer.js"),sidebar=__webpack_require__("./packages/icons/build-module/library/sidebar.js"),symbol_filled=__webpack_require__("./packages/icons/build-module/library/symbol-filled.js");var implementation=__webpack_require__("./packages/private-apis/build-module/implementation.js");const{lock,unlock:lock_unlock_unlock}=(0,implementation.yf)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/editor"),EMPTY_OBJECT={},hasEditorUndo=(0,factory.N)((select=>()=>select(core_data_build_module.M_).hasUndo())),hasEditorRedo=(0,factory.N)((select=>()=>select(core_data_build_module.M_).hasRedo()));function isEditedPostNew(state){return"auto-draft"===getCurrentPost(state).status}function hasChangedContent(state){return"content"in getPostEdits(state)}const isEditedPostDirty=(0,factory.N)((select=>state=>{const postType=getCurrentPostType(state),postId=getCurrentPostId(state);return select(core_data_build_module.M_).hasEditsForEntityRecord("postType",postType,postId)})),hasNonPostEntityChanges=(0,factory.N)((select=>state=>{const dirtyEntityRecords=select(core_data_build_module.M_).__experimentalGetDirtyEntityRecords(),{type,id}=getCurrentPost(state);return dirtyEntityRecords.some((entityRecord=>"postType"!==entityRecord.kind||entityRecord.name!==type||entityRecord.key!==id))}));function isCleanNewPost(state){return!isEditedPostDirty(state)&&isEditedPostNew(state)}const getCurrentPost=(0,factory.N)((select=>state=>{const postId=getCurrentPostId(state),postType=getCurrentPostType(state),post=select(core_data_build_module.M_).getRawEntityRecord("postType",postType,postId);return post||EMPTY_OBJECT}));function getCurrentPostType(state){return state.postType}function getCurrentPostId(state){return state.postId}function getCurrentTemplateId(state){return state.templateId}function getCurrentPostRevisionsCount(state){var _getCurrentPost$_link;return null!==(_getCurrentPost$_link=getCurrentPost(state)._links?.["version-history"]?.[0]?.count)&&void 0!==_getCurrentPost$_link?_getCurrentPost$_link:0}function getCurrentPostLastRevisionId(state){var _getCurrentPost$_link2;return null!==(_getCurrentPost$_link2=getCurrentPost(state)._links?.["predecessor-version"]?.[0]?.id)&&void 0!==_getCurrentPost$_link2?_getCurrentPost$_link2:null}const getPostEdits=(0,factory.N)((select=>state=>{const postType=getCurrentPostType(state),postId=getCurrentPostId(state);return select(core_data_build_module.M_).getEntityRecordEdits("postType",postType,postId)||EMPTY_OBJECT}));function getCurrentPostAttribute(state,attributeName){switch(attributeName){case"type":return getCurrentPostType(state);case"id":return getCurrentPostId(state);default:const post=getCurrentPost(state);if(!post.hasOwnProperty(attributeName))break;return getPostRawValue(post[attributeName])}}const getNestedEditedPostProperty=(0,rememo.A)(((state,attributeName)=>{const edits=getPostEdits(state);return edits.hasOwnProperty(attributeName)?{...getCurrentPostAttribute(state,attributeName),...edits[attributeName]}:getCurrentPostAttribute(state,attributeName)}),((state,attributeName)=>[getCurrentPostAttribute(state,attributeName),getPostEdits(state)[attributeName]]));function getEditedPostAttribute(state,attributeName){if("content"===attributeName)return getEditedPostContent(state);const edits=getPostEdits(state);return edits.hasOwnProperty(attributeName)?EDIT_MERGE_PROPERTIES.has(attributeName)?getNestedEditedPostProperty(state,attributeName):edits[attributeName]:getCurrentPostAttribute(state,attributeName)}const getAutosaveAttribute=(0,factory.N)((select=>(state,attributeName)=>{if(!AUTOSAVE_PROPERTIES.includes(attributeName)&&"preview_link"!==attributeName)return;const postType=getCurrentPostType(state);if("wp_template"===postType)return!1;const postId=getCurrentPostId(state),currentUserId=select(core_data_build_module.M_).getCurrentUser()?.id,autosave=select(core_data_build_module.M_).getAutosave(postType,postId,currentUserId);return autosave?getPostRawValue(autosave[attributeName]):void 0}));function getEditedPostVisibility(state){if("private"===getEditedPostAttribute(state,"status"))return"private";return getEditedPostAttribute(state,"password")?"password":"public"}function isCurrentPostPending(state){return"pending"===getCurrentPost(state).status}function isCurrentPostPublished(state,currentPost){const post=currentPost||getCurrentPost(state);return-1!==["publish","private"].indexOf(post.status)||"future"===post.status&&!(0,date_build_module.ON)(new Date(Number((0,date_build_module.pp)(post.date))-ONE_MINUTE_IN_MS))}function isCurrentPostScheduled(state){return"future"===getCurrentPost(state).status&&!isCurrentPostPublished(state)}function isEditedPostPublishable(state){const post=getCurrentPost(state);return isEditedPostDirty(state)||-1===["publish","private","future"].indexOf(post.status)}function isEditedPostSaveable(state){return!isSavingPost(state)&&(!!getEditedPostAttribute(state,"title")||!!getEditedPostAttribute(state,"excerpt")||!isEditedPostEmpty(state)||"native"===platform.A.OS)}const isEditedPostEmpty=(0,factory.N)((select=>state=>{const postId=getCurrentPostId(state),postType=getCurrentPostType(state),record=select(core_data_build_module.M_).getEditedEntityRecord("postType",postType,postId);if("function"!=typeof record.content)return!record.content;const blocks=getEditedPostAttribute(state,"blocks");if(0===blocks.length)return!0;if(blocks.length>1)return!1;const blockName=blocks[0].name;return(blockName===(0,blocks_build_module.K$)()||blockName===(0,blocks_build_module.dZ)())&&!getEditedPostContent(state)})),isEditedPostAutosaveable=(0,factory.N)((select=>state=>{if(!isEditedPostSaveable(state))return!1;if(isPostAutosavingLocked(state))return!1;const postType=getCurrentPostType(state);if("wp_template"===postType)return!1;const postId=getCurrentPostId(state),hasFetchedAutosave=select(core_data_build_module.M_).hasFetchedAutosaves(postType,postId),currentUserId=select(core_data_build_module.M_).getCurrentUser()?.id,autosave=select(core_data_build_module.M_).getAutosave(postType,postId,currentUserId);return!!hasFetchedAutosave&&(!autosave||(!!hasChangedContent(state)||["title","excerpt","meta"].some((field=>getPostRawValue(autosave[field])!==getEditedPostAttribute(state,field)))))}));function isEditedPostBeingScheduled(state){const date=getEditedPostAttribute(state,"date"),checkedDate=new Date(Number((0,date_build_module.pp)(date))-ONE_MINUTE_IN_MS);return(0,date_build_module.ON)(checkedDate)}function isEditedPostDateFloating(state){const date=getEditedPostAttribute(state,"date"),modified=getEditedPostAttribute(state,"modified"),status=getCurrentPost(state).status;return("draft"===status||"auto-draft"===status||"pending"===status)&&(date===modified||null===date)}function isDeletingPost(state){return!!state.deleting.pending}function isSavingPost(state){return!!state.saving.pending}const isSavingNonPostEntityChanges=(0,factory.N)((select=>state=>{const entitiesBeingSaved=select(core_data_build_module.M_).__experimentalGetEntitiesBeingSaved(),{type,id}=getCurrentPost(state);return entitiesBeingSaved.some((entityRecord=>"postType"!==entityRecord.kind||entityRecord.name!==type||entityRecord.key!==id))})),didPostSaveRequestSucceed=(0,factory.N)((select=>state=>{const postType=getCurrentPostType(state),postId=getCurrentPostId(state);return!select(core_data_build_module.M_).getLastEntitySaveError("postType",postType,postId)})),didPostSaveRequestFail=(0,factory.N)((select=>state=>{const postType=getCurrentPostType(state),postId=getCurrentPostId(state);return!!select(core_data_build_module.M_).getLastEntitySaveError("postType",postType,postId)}));function isAutosavingPost(state){return isSavingPost(state)&&Boolean(state.saving.options?.isAutosave)}function isPreviewingPost(state){return isSavingPost(state)&&Boolean(state.saving.options?.isPreview)}function getEditedPostPreviewLink(state){if(state.saving.pending||isSavingPost(state))return;let previewLink=getAutosaveAttribute(state,"preview_link");previewLink&&"draft"!==getCurrentPost(state).status||(previewLink=getEditedPostAttribute(state,"link"),previewLink&&(previewLink=(0,add_query_args.F)(previewLink,{preview:!0})));const featuredImageId=getEditedPostAttribute(state,"featured_media");return previewLink&&featuredImageId?(0,add_query_args.F)(previewLink,{_thumbnail_id:featuredImageId}):previewLink}const getSuggestedPostFormat=(0,factory.N)((select=>()=>{const blocks=select(build_module.M_).getBlocks();if(blocks.length>2)return null;let name;if(1===blocks.length&&(name=blocks[0].name,"core/embed"===name)){const provider=blocks[0].attributes?.providerNameSlug;["youtube","vimeo"].includes(provider)?name="core/video":["spotify","soundcloud"].includes(provider)&&(name="core/audio")}switch(2===blocks.length&&"core/paragraph"===blocks[1].name&&(name=blocks[0].name),name){case"core/image":return"image";case"core/quote":case"core/pullquote":return"quote";case"core/gallery":return"gallery";case"core/video":return"video";case"core/audio":return"audio";default:return null}})),getEditedPostContent=(0,factory.N)((select=>state=>{const postId=getCurrentPostId(state),postType=getCurrentPostType(state),record=select(core_data_build_module.M_).getEditedEntityRecord("postType",postType,postId);if(record){if("function"==typeof record.content)return record.content(record);if(record.blocks)return(0,blocks_build_module.RM)(record.blocks);if(record.content)return record.content}return""}));function isPublishingPost(state){return isSavingPost(state)&&!isCurrentPostPublished(state)&&"publish"===getEditedPostAttribute(state,"status")}function isPermalinkEditable(state){const permalinkTemplate=getEditedPostAttribute(state,"permalink_template");return PERMALINK_POSTNAME_REGEX.test(permalinkTemplate)}function getPermalink(state){const permalinkParts=getPermalinkParts(state);if(!permalinkParts)return null;const{prefix,postName,suffix}=permalinkParts;return isPermalinkEditable(state)?prefix+postName+suffix:prefix}function getEditedPostSlug(state){return getEditedPostAttribute(state,"slug")||cleanForSlug(getEditedPostAttribute(state,"title"))||getCurrentPostId(state)}function getPermalinkParts(state){const permalinkTemplate=getEditedPostAttribute(state,"permalink_template");if(!permalinkTemplate)return null;const postName=getEditedPostAttribute(state,"slug")||getEditedPostAttribute(state,"generated_slug"),[prefix,suffix]=permalinkTemplate.split(PERMALINK_POSTNAME_REGEX);return{prefix,postName,suffix}}function isPostLocked(state){return state.postLock.isLocked}function isPostSavingLocked(state){return Object.keys(state.postSavingLock).length>0}function isPostAutosavingLocked(state){return Object.keys(state.postAutosavingLock).length>0}function isPostLockTakeover(state){return state.postLock.isTakeover}function getPostLockUser(state){return state.postLock.user}function getActivePostLock(state){return state.postLock.activePostLock}function canUserUseUnfilteredHTML(state){return Boolean(getCurrentPost(state)._links?.hasOwnProperty("wp:action-unfiltered-html"))}const isPublishSidebarEnabled=(0,factory.N)((select=>()=>!!select(store.M).get("core","isPublishSidebarEnabled"))),getEditorBlocks=(0,rememo.A)((state=>getEditedPostAttribute(state,"blocks")||(0,blocks_build_module.qg)(getEditedPostContent(state))),(state=>[getEditedPostAttribute(state,"blocks"),getEditedPostContent(state)]));function isEditorPanelRemoved(state,panelName){return state.removedPanels.includes(panelName)}const isEditorPanelEnabled=(0,factory.N)((select=>(state,panelName)=>{const inactivePanels=select(store.M).get("core","inactivePanels");return!isEditorPanelRemoved(state,panelName)&&!inactivePanels?.includes(panelName)})),isEditorPanelOpened=(0,factory.N)((select=>(state,panelName)=>{const openPanels=select(store.M).get("core","openPanels");return!!openPanels?.includes(panelName)}));function getEditorSelectionStart(state){return(0,deprecated_build_module.A)("select('core/editor').getEditorSelectionStart",{since:"5.8",alternative:"select('core/editor').getEditorSelection"}),getEditedPostAttribute(state,"selection")?.selectionStart}function getEditorSelectionEnd(state){return(0,deprecated_build_module.A)("select('core/editor').getEditorSelectionStart",{since:"5.8",alternative:"select('core/editor').getEditorSelection"}),getEditedPostAttribute(state,"selection")?.selectionEnd}function getEditorSelection(state){return getEditedPostAttribute(state,"selection")}function __unstableIsEditorReady(state){return!!state.postId}function getEditorSettings(state){return state.editorSettings}function getRenderingMode(state){return state.renderingMode}const getDeviceType=(0,factory.N)((select=>state=>lock_unlock_unlock(select(build_module.M_)).isZoomOut()?"Desktop":state.deviceType));function isListViewOpened(state){return state.listViewPanel}function isInserterOpened(state){return!!state.blockInserterPanel}const getEditorMode=(0,factory.N)((select=>()=>{var _select$get;return null!==(_select$get=select(store.M).get("core","editorMode"))&&void 0!==_select$get?_select$get:"visual"}));function getStateBeforeOptimisticTransaction(){return(0,deprecated_build_module.A)("select('core/editor').getStateBeforeOptimisticTransaction",{since:"5.7",hint:"No state history is kept on this store anymore"}),null}function inSomeHistory(){return(0,deprecated_build_module.A)("select('core/editor').inSomeHistory",{since:"5.7",hint:"No state history is kept on this store anymore"}),!1}function getBlockEditorSelector(name){return(0,factory.N)((select=>(state,...args)=>((0,deprecated_build_module.A)("`wp.data.select( 'core/editor' )."+name+"`",{since:"5.3",alternative:"`wp.data.select( 'core/block-editor' )."+name+"`",version:"6.2"}),select(build_module.M_)[name](...args))))}const getBlockName=getBlockEditorSelector("getBlockName"),isBlockValid=getBlockEditorSelector("isBlockValid"),getBlockAttributes=getBlockEditorSelector("getBlockAttributes"),getBlock=getBlockEditorSelector("getBlock"),getBlocks=getBlockEditorSelector("getBlocks"),getClientIdsOfDescendants=getBlockEditorSelector("getClientIdsOfDescendants"),getClientIdsWithDescendants=getBlockEditorSelector("getClientIdsWithDescendants"),getGlobalBlockCount=getBlockEditorSelector("getGlobalBlockCount"),getBlocksByClientId=getBlockEditorSelector("getBlocksByClientId"),getBlockCount=getBlockEditorSelector("getBlockCount"),getBlockSelectionStart=getBlockEditorSelector("getBlockSelectionStart"),getBlockSelectionEnd=getBlockEditorSelector("getBlockSelectionEnd"),getSelectedBlockCount=getBlockEditorSelector("getSelectedBlockCount"),hasSelectedBlock=getBlockEditorSelector("hasSelectedBlock"),getSelectedBlockClientId=getBlockEditorSelector("getSelectedBlockClientId"),getSelectedBlock=getBlockEditorSelector("getSelectedBlock"),getBlockRootClientId=getBlockEditorSelector("getBlockRootClientId"),getBlockHierarchyRootClientId=getBlockEditorSelector("getBlockHierarchyRootClientId"),getAdjacentBlockClientId=getBlockEditorSelector("getAdjacentBlockClientId"),getPreviousBlockClientId=getBlockEditorSelector("getPreviousBlockClientId"),getNextBlockClientId=getBlockEditorSelector("getNextBlockClientId"),getSelectedBlocksInitialCaretPosition=getBlockEditorSelector("getSelectedBlocksInitialCaretPosition"),getMultiSelectedBlockClientIds=getBlockEditorSelector("getMultiSelectedBlockClientIds"),getMultiSelectedBlocks=getBlockEditorSelector("getMultiSelectedBlocks"),getFirstMultiSelectedBlockClientId=getBlockEditorSelector("getFirstMultiSelectedBlockClientId"),getLastMultiSelectedBlockClientId=getBlockEditorSelector("getLastMultiSelectedBlockClientId"),isFirstMultiSelectedBlock=getBlockEditorSelector("isFirstMultiSelectedBlock"),isBlockMultiSelected=getBlockEditorSelector("isBlockMultiSelected"),isAncestorMultiSelected=getBlockEditorSelector("isAncestorMultiSelected"),getMultiSelectedBlocksStartClientId=getBlockEditorSelector("getMultiSelectedBlocksStartClientId"),getMultiSelectedBlocksEndClientId=getBlockEditorSelector("getMultiSelectedBlocksEndClientId"),getBlockOrder=getBlockEditorSelector("getBlockOrder"),getBlockIndex=getBlockEditorSelector("getBlockIndex"),isBlockSelected=getBlockEditorSelector("isBlockSelected"),hasSelectedInnerBlock=getBlockEditorSelector("hasSelectedInnerBlock"),isBlockWithinSelection=getBlockEditorSelector("isBlockWithinSelection"),hasMultiSelection=getBlockEditorSelector("hasMultiSelection"),isMultiSelecting=getBlockEditorSelector("isMultiSelecting"),isSelectionEnabled=getBlockEditorSelector("isSelectionEnabled"),getBlockMode=getBlockEditorSelector("getBlockMode"),isTyping=getBlockEditorSelector("isTyping"),isCaretWithinFormattedText=getBlockEditorSelector("isCaretWithinFormattedText"),getBlockInsertionPoint=getBlockEditorSelector("getBlockInsertionPoint"),isBlockInsertionPointVisible=getBlockEditorSelector("isBlockInsertionPointVisible"),isValidTemplate=getBlockEditorSelector("isValidTemplate"),getTemplate=getBlockEditorSelector("getTemplate"),getTemplateLock=getBlockEditorSelector("getTemplateLock"),canInsertBlockType=getBlockEditorSelector("canInsertBlockType"),getInserterItems=getBlockEditorSelector("getInserterItems"),hasInserterItems=getBlockEditorSelector("hasInserterItems"),getBlockListSettings=getBlockEditorSelector("getBlockListSettings");function __experimentalGetDefaultTemplateTypes(state){return getEditorSettings(state)?.defaultTemplateTypes}const __experimentalGetDefaultTemplatePartAreas=(0,rememo.A)((state=>{var _getEditorSettings$de;return(null!==(_getEditorSettings$de=getEditorSettings(state)?.defaultTemplatePartAreas)&&void 0!==_getEditorSettings$de?_getEditorSettings$de:[]).map((item=>{return{...item,icon:(iconName=item.icon,"header"===iconName?header.A:"footer"===iconName?footer.A:"sidebar"===iconName?sidebar.A:symbol_filled.A)};var iconName}))}),(state=>[getEditorSettings(state)?.defaultTemplatePartAreas])),__experimentalGetDefaultTemplateType=(0,rememo.A)(((state,slug)=>{var _Object$values$find;const templateTypes=__experimentalGetDefaultTemplateTypes(state);return templateTypes&&null!==(_Object$values$find=Object.values(templateTypes).find((type=>type.slug===slug)))&&void 0!==_Object$values$find?_Object$values$find:EMPTY_OBJECT}),(state=>[__experimentalGetDefaultTemplateTypes(state)])),__experimentalGetTemplateInfo=(0,rememo.A)(((state,template)=>{if(!template)return EMPTY_OBJECT;const{description,slug,title,area}=template,{title:defaultTitle,description:defaultDescription}=__experimentalGetDefaultTemplateType(state,slug),templateTitle="string"==typeof title?title:title?.rendered;return{title:templateTitle&&templateTitle!==slug?templateTitle:defaultTitle||slug,description:("string"==typeof description?description:description?.raw)||defaultDescription,icon:__experimentalGetDefaultTemplatePartAreas(state).find((item=>area===item.area))?.icon||layout.A}}),(state=>[__experimentalGetDefaultTemplateTypes(state),__experimentalGetDefaultTemplatePartAreas(state)])),getPostTypeLabel=(0,factory.N)((select=>state=>{const currentPostType=getCurrentPostType(state),postType=select(core_data_build_module.M_).getPostType(currentPostType);return postType?.labels?.singular_name}));function isPublishSidebarOpened(state){return state.publishSidebarActive}var a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),api_fetch_build_module=__webpack_require__("./packages/api-fetch/build-module/index.js"),notices_build_module=__webpack_require__("./packages/notices/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js");function postKey(postId,isPostNew){return`wp-autosave-block-editor-post-${isPostNew?"auto-draft":postId}`}const setupEditor=(post,edits,template)=>({dispatch})=>{dispatch.setEditedPost(post.type,post.id);if("auto-draft"===post.status&&template){let content;content="content"in edits?edits.content:post.content.raw;let blocks=(0,blocks_build_module.qg)(content);blocks=(0,blocks_build_module.Nk)(blocks,template),dispatch.resetEditorBlocks(blocks,{__unstableShouldCreateUndoLevel:!1})}edits&&Object.values(edits).some((([key,edit])=>{var _post$key$raw;return edit!==(null!==(_post$key$raw=post[key]?.raw)&&void 0!==_post$key$raw?_post$key$raw:post[key])}))&&dispatch.editPost(edits)};function __experimentalTearDownEditor(){return(0,deprecated_build_module.A)("wp.data.dispatch( 'core/editor' ).__experimentalTearDownEditor",{since:"6.5"}),{type:"DO_NOTHING"}}function resetPost(){return(0,deprecated_build_module.A)("wp.data.dispatch( 'core/editor' ).resetPost",{since:"6.0",version:"6.3",alternative:"Initialize the editor with the setupEditorState action"}),{type:"DO_NOTHING"}}function updatePost(){return(0,deprecated_build_module.A)("wp.data.dispatch( 'core/editor' ).updatePost",{since:"5.7",alternative:"Use the core entities store instead"}),{type:"DO_NOTHING"}}function setupEditorState(post){return(0,deprecated_build_module.A)("wp.data.dispatch( 'core/editor' ).setupEditorState",{since:"6.5",alternative:"wp.data.dispatch( 'core/editor' ).setEditedPost"}),setEditedPost(post.type,post.id)}function setEditedPost(postType,postId){return{type:"SET_EDITED_POST",postType,postId}}const editPost=(edits,options)=>({select,registry})=>{const{id,type}=select.getCurrentPost();registry.dispatch(core_data_build_module.M_).editEntityRecord("postType",type,id,edits,options)},savePost=(options={})=>async({select,dispatch,registry})=>{if(!select.isEditedPostSaveable())return;const content=select.getEditedPostContent();options.isAutosave||dispatch.editPost({content},{undoIgnore:!0});const previousRecord=select.getCurrentPost();let edits={id:previousRecord.id,...registry.select(core_data_build_module.M_).getEntityRecordNonTransientEdits("postType",previousRecord.type,previousRecord.id),content};dispatch({type:"REQUEST_POST_UPDATE_START",options});let error=!1;try{edits=await(0,hooks_build_module.gs)("editor.preSavePost",edits,options)}catch(err){error=err}if(!error)try{await registry.dispatch(core_data_build_module.M_).saveEntityRecord("postType",previousRecord.type,edits,options)}catch(err){error=err.message&&"unknown_error"!==err.code?err.message:(0,i18n_build_module.__)("An error occurred while updating.")}if(error||(error=registry.select(core_data_build_module.M_).getLastEntitySaveError("postType",previousRecord.type,previousRecord.id)),!error)try{await(0,hooks_build_module.W5)("editor.__unstableSavePost",Promise.resolve(),options)}catch(err){error=err}if(!error)try{await(0,hooks_build_module.e$)("editor.savePost",{id:previousRecord.id},options)}catch(err){error=err}if(dispatch({type:"REQUEST_POST_UPDATE_FINISH",options}),error){const args=function getNotificationArgumentsForSaveFail(data){const{post,edits,error}=data;if(error&&"rest_autosave_no_changes"===error.code)return[];const publishStatus=["publish","private","future"],isPublished=-1!==publishStatus.indexOf(post.status),messages={publish:(0,i18n_build_module.__)("Publishing failed."),private:(0,i18n_build_module.__)("Publishing failed."),future:(0,i18n_build_module.__)("Scheduling failed.")};let noticeMessage=isPublished||-1===publishStatus.indexOf(edits.status)?(0,i18n_build_module.__)("Updating failed."):messages[edits.status];return error.message&&!/<\/?[^>]*>/.test(error.message)&&(noticeMessage=[noticeMessage,error.message].join(" ")),[noticeMessage,{id:"SAVE_POST_NOTICE_ID"}]}({post:previousRecord,edits,error});args.length&&registry.dispatch(notices_build_module.M).createErrorNotice(...args)}else{const updatedRecord=select.getCurrentPost(),args=function getNotificationArgumentsForSaveSuccess(data){var _postType$viewable;const{previousPost,post,postType}=data;if(data.options?.isAutosave)return[];const publishStatus=["publish","private","future"],isPublished=publishStatus.includes(previousPost.status),willPublish=publishStatus.includes(post.status),willTrash="trash"===post.status&&"trash"!==previousPost.status;let noticeMessage,isDraft,shouldShowLink=null!==(_postType$viewable=postType?.viewable)&&void 0!==_postType$viewable&&_postType$viewable;willTrash?(noticeMessage=postType.labels.item_trashed,shouldShowLink=!1):isPublished||willPublish?isPublished&&!willPublish?(noticeMessage=postType.labels.item_reverted_to_draft,shouldShowLink=!1):noticeMessage=!isPublished&&willPublish?{publish:postType.labels.item_published,private:postType.labels.item_published_privately,future:postType.labels.item_scheduled}[post.status]:postType.labels.item_updated:(noticeMessage=(0,i18n_build_module.__)("Draft saved."),isDraft=!0);const actions=[];return shouldShowLink&&actions.push({label:isDraft?(0,i18n_build_module.__)("View Preview"):postType.labels.view_item,url:post.link}),[noticeMessage,{id:"SAVE_POST_NOTICE_ID",type:"snackbar",actions}]}({previousPost:previousRecord,post:updatedRecord,postType:await registry.resolveSelect(core_data_build_module.M_).getPostType(updatedRecord.type),options});args.length&&registry.dispatch(notices_build_module.M).createSuccessNotice(...args),options.isAutosave||registry.dispatch(build_module.M_).__unstableMarkLastChangeAsPersistent()}};function refreshPost(){return(0,deprecated_build_module.A)("wp.data.dispatch( 'core/editor' ).refreshPost",{since:"6.0",version:"6.3",alternative:"Use the core entities store instead"}),{type:"DO_NOTHING"}}const trashPost=()=>async({select,dispatch,registry})=>{const postTypeSlug=select.getCurrentPostType(),postType=await registry.resolveSelect(core_data_build_module.M_).getPostType(postTypeSlug);registry.dispatch(notices_build_module.M).removeNotice("TRASH_POST_NOTICE_ID");const{rest_base:restBase,rest_namespace:restNamespace="wp/v2"}=postType;dispatch({type:"REQUEST_POST_DELETE_START"});try{const post=select.getCurrentPost();await(0,api_fetch_build_module.A)({path:`/${restNamespace}/${restBase}/${post.id}`,method:"DELETE"}),await dispatch.savePost()}catch(error){registry.dispatch(notices_build_module.M).createErrorNotice(...function getNotificationArgumentsForTrashFail(data){return[data.error.message&&"unknown_error"!==data.error.code?data.error.message:(0,i18n_build_module.__)("Trashing failed"),{id:"TRASH_POST_NOTICE_ID"}]}({error}))}dispatch({type:"REQUEST_POST_DELETE_FINISH"})},autosave=({local=!1,...options}={})=>async({select,dispatch})=>{const post=select.getCurrentPost();if("wp_template"!==post.type)if(local){const isPostNew=select.isEditedPostNew(),title=select.getEditedPostAttribute("title"),content=select.getEditedPostAttribute("content"),excerpt=select.getEditedPostAttribute("excerpt");!function localAutosaveSet(postId,isPostNew,title,content,excerpt){window.sessionStorage.setItem(postKey(postId,isPostNew),JSON.stringify({post_title:title,content,excerpt}))}(post.id,isPostNew,title,content,excerpt)}else await dispatch.savePost({isAutosave:!0,...options})},__unstableSaveForPreview=({forceIsAutosaveable}={})=>async({select,dispatch})=>{if((forceIsAutosaveable||select.isEditedPostAutosaveable())&&!select.isPostLocked()){["draft","auto-draft"].includes(select.getEditedPostAttribute("status"))?await dispatch.savePost({isPreview:!0}):await dispatch.autosave({isPreview:!0})}return select.getEditedPostPreviewLink()},redo=()=>({registry})=>{registry.dispatch(core_data_build_module.M_).redo()},undo=()=>({registry})=>{registry.dispatch(core_data_build_module.M_).undo()};function createUndoLevel(){return(0,deprecated_build_module.A)("wp.data.dispatch( 'core/editor' ).createUndoLevel",{since:"6.0",version:"6.3",alternative:"Use the core entities store instead"}),{type:"DO_NOTHING"}}function updatePostLock(lock){return{type:"UPDATE_POST_LOCK",lock}}const enablePublishSidebar=()=>({registry})=>{registry.dispatch(store.M).set("core","isPublishSidebarEnabled",!0)},disablePublishSidebar=()=>({registry})=>{registry.dispatch(store.M).set("core","isPublishSidebarEnabled",!1)};function lockPostSaving(lockName){return{type:"LOCK_POST_SAVING",lockName}}function unlockPostSaving(lockName){return{type:"UNLOCK_POST_SAVING",lockName}}function lockPostAutosaving(lockName){return{type:"LOCK_POST_AUTOSAVING",lockName}}function unlockPostAutosaving(lockName){return{type:"UNLOCK_POST_AUTOSAVING",lockName}}const resetEditorBlocks=(blocks,options={})=>({select,dispatch,registry})=>{const{__unstableShouldCreateUndoLevel,selection}=options,edits={blocks,selection};if(!1!==__unstableShouldCreateUndoLevel){const{id,type}=select.getCurrentPost();if(registry.select(core_data_build_module.M_).getEditedEntityRecord("postType",type,id).blocks===edits.blocks)return void registry.dispatch(core_data_build_module.M_).__unstableCreateUndoLevel("postType",type,id);edits.content=({blocks:blocksForSerialization=[]})=>(0,blocks_build_module.RM)(blocksForSerialization)}dispatch.editPost(edits)};function updateEditorSettings(settings){return{type:"UPDATE_EDITOR_SETTINGS",settings}}const setRenderingMode=mode=>({dispatch,registry,select})=>{select.__unstableIsEditorReady()&&(registry.dispatch(build_module.M_).clearSelectedBlock(),dispatch.editPost({selection:void 0},{undoIgnore:!0})),dispatch({type:"SET_RENDERING_MODE",mode})};function setDeviceType(deviceType){return{type:"SET_DEVICE_TYPE",deviceType}}const toggleEditorPanelEnabled=panelName=>({registry})=>{var _registry$select$get;const inactivePanels=null!==(_registry$select$get=registry.select(store.M).get("core","inactivePanels"))&&void 0!==_registry$select$get?_registry$select$get:[];let updatedInactivePanels;updatedInactivePanels=!!inactivePanels?.includes(panelName)?inactivePanels.filter((invactivePanelName=>invactivePanelName!==panelName)):[...inactivePanels,panelName],registry.dispatch(store.M).set("core","inactivePanels",updatedInactivePanels)},toggleEditorPanelOpened=panelName=>({registry})=>{var _registry$select$get2;const openPanels=null!==(_registry$select$get2=registry.select(store.M).get("core","openPanels"))&&void 0!==_registry$select$get2?_registry$select$get2:[];let updatedOpenPanels;updatedOpenPanels=!!openPanels?.includes(panelName)?openPanels.filter((openPanelName=>openPanelName!==panelName)):[...openPanels,panelName],registry.dispatch(store.M).set("core","openPanels",updatedOpenPanels)};function removeEditorPanel(panelName){return{type:"REMOVE_PANEL",panelName}}const setIsInserterOpened=value=>({dispatch,registry})=>{"object"==typeof value&&value.hasOwnProperty("rootClientId")&&value.hasOwnProperty("insertionIndex")&&lock_unlock_unlock(registry.dispatch(build_module.M_)).setInsertionPoint({rootClientId:value.rootClientId,index:value.insertionIndex}),dispatch({type:"SET_IS_INSERTER_OPENED",value})};function setIsListViewOpened(isOpen){return{type:"SET_IS_LIST_VIEW_OPENED",isOpen}}const toggleDistractionFree=()=>({dispatch,registry})=>{const isDistractionFree=registry.select(store.M).get("core","distractionFree");isDistractionFree&&registry.dispatch(store.M).set("core","fixedToolbar",!1),isDistractionFree||registry.batch((()=>{registry.dispatch(store.M).set("core","fixedToolbar",!0),dispatch.setIsInserterOpened(!1),dispatch.setIsListViewOpened(!1)})),registry.batch((()=>{registry.dispatch(store.M).set("core","distractionFree",!isDistractionFree),registry.dispatch(notices_build_module.M).createInfoNotice(isDistractionFree?(0,i18n_build_module.__)("Distraction free off."):(0,i18n_build_module.__)("Distraction free on."),{id:"core/editor/distraction-free-mode/notice",type:"snackbar",actions:[{label:(0,i18n_build_module.__)("Undo"),onClick:()=>{registry.batch((()=>{registry.dispatch(store.M).set("core","fixedToolbar",!!isDistractionFree),registry.dispatch(store.M).toggle("core","distractionFree")}))}}]})}))},switchEditorMode=mode=>({dispatch,registry})=>{if(registry.dispatch(store.M).set("core","editorMode",mode),"visual"!==mode&&(registry.dispatch(build_module.M_).clearSelectedBlock(),lock_unlock_unlock(registry.dispatch(build_module.M_)).resetZoomLevel()),"visual"===mode)(0,a11y_build_module.L)((0,i18n_build_module.__)("Visual editor selected"),"assertive");else if("text"===mode){registry.select(store.M).get("core","distractionFree")&&dispatch.toggleDistractionFree(),(0,a11y_build_module.L)((0,i18n_build_module.__)("Code editor selected"),"assertive")}};function openPublishSidebar(){return{type:"OPEN_PUBLISH_SIDEBAR"}}function closePublishSidebar(){return{type:"CLOSE_PUBLISH_SIDEBAR"}}function togglePublishSidebar(){return{type:"TOGGLE_PUBLISH_SIDEBAR"}}const getBlockEditorAction=name=>(...args)=>({registry})=>{(0,deprecated_build_module.A)("`wp.data.dispatch( 'core/editor' )."+name+"`",{since:"5.3",alternative:"`wp.data.dispatch( 'core/block-editor' )."+name+"`",version:"6.2"}),registry.dispatch(build_module.M_)[name](...args)},resetBlocks=getBlockEditorAction("resetBlocks"),receiveBlocks=getBlockEditorAction("receiveBlocks"),updateBlock=getBlockEditorAction("updateBlock"),updateBlockAttributes=getBlockEditorAction("updateBlockAttributes"),selectBlock=getBlockEditorAction("selectBlock"),startMultiSelect=getBlockEditorAction("startMultiSelect"),stopMultiSelect=getBlockEditorAction("stopMultiSelect"),multiSelect=getBlockEditorAction("multiSelect"),clearSelectedBlock=getBlockEditorAction("clearSelectedBlock"),toggleSelection=getBlockEditorAction("toggleSelection"),replaceBlocks=getBlockEditorAction("replaceBlocks"),replaceBlock=getBlockEditorAction("replaceBlock"),moveBlocksDown=getBlockEditorAction("moveBlocksDown"),moveBlocksUp=getBlockEditorAction("moveBlocksUp"),moveBlockToPosition=getBlockEditorAction("moveBlockToPosition"),insertBlock=getBlockEditorAction("insertBlock"),insertBlocks=getBlockEditorAction("insertBlocks"),showInsertionPoint=getBlockEditorAction("showInsertionPoint"),hideInsertionPoint=getBlockEditorAction("hideInsertionPoint"),setTemplateValidity=getBlockEditorAction("setTemplateValidity"),synchronizeTemplate=getBlockEditorAction("synchronizeTemplate"),mergeBlocks=getBlockEditorAction("mergeBlocks"),removeBlocks=getBlockEditorAction("removeBlocks"),removeBlock=getBlockEditorAction("removeBlock"),toggleBlockMode=getBlockEditorAction("toggleBlockMode"),startTyping=getBlockEditorAction("startTyping"),stopTyping=getBlockEditorAction("stopTyping"),enterFormattedText=getBlockEditorAction("enterFormattedText"),exitFormattedText=getBlockEditorAction("exitFormattedText"),insertDefaultBlock=getBlockEditorAction("insertDefaultBlock"),updateBlockListSettings=getBlockEditorAction("updateBlockListSettings");var html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js");var external=__webpack_require__("./packages/icons/build-module/library/external.js");const viewPost={id:"view-post",label:(0,i18n_build_module._x)("View","verb"),isPrimary:!0,icon:external.A,isEligible:post=>"trash"!==post.status,callback(posts,{onActionPerformed}){const post=posts[0];window.open(post?.link,"_blank"),onActionPerformed&&onActionPerformed(posts)}},view_post=viewPost,viewPostRevisions={id:"view-post-revisions",context:"list",label(items){var _items$0$_links$versi;const revisionsCount=null!==(_items$0$_links$versi=items[0]._links?.["version-history"]?.[0]?.count)&&void 0!==_items$0$_links$versi?_items$0$_links$versi:0;return(0,i18n_build_module.nv)((0,i18n_build_module.__)("View revisions (%s)"),revisionsCount)},isEligible(post){var _post$_links$predeces,_post$_links$version;if("trash"===post.status)return!1;const lastRevisionId=null!==(_post$_links$predeces=post?._links?.["predecessor-version"]?.[0]?.id)&&void 0!==_post$_links$predeces?_post$_links$predeces:null,revisionsCount=null!==(_post$_links$version=post?._links?.["version-history"]?.[0]?.count)&&void 0!==_post$_links$version?_post$_links$version:0;return!!lastRevisionId&&revisionsCount>1},callback(posts,{onActionPerformed}){const post=posts[0],href=(0,add_query_args.F)("revision.php",{revision:post?._links?.["predecessor-version"]?.[0]?.id});document.location.href=href,onActionPerformed&&onActionPerformed(posts)}},view_post_revisions=viewPostRevisions;var use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),component=__webpack_require__("./packages/components/build-module/v-stack/component.js");const integer={sort:function sort(a,b,direction){return"asc"===direction?a-b:b-a},isValid:function isValid(value,context){if(""===value)return!1;if(!Number.isInteger(Number(value)))return!1;if(context?.elements){const validValues=context?.elements.map((f=>f.value));if(!validValues.includes(Number(value)))return!1}return!0},Edit:"integer"};const field_types_text={sort:function text_sort(valueA,valueB,direction){return"asc"===direction?valueA.localeCompare(valueB):valueB.localeCompare(valueA)},isValid:function text_isValid(value,context){if(context?.elements){const validValues=context?.elements?.map((f=>f.value));if(!validValues.includes(value))return!1}return!0},Edit:"text"};const datetime={sort:function datetime_sort(a,b,direction){const timeA=new Date(a).getTime(),timeB=new Date(b).getTime();return"asc"===direction?timeA-timeB:timeB-timeA},isValid:function datetime_isValid(value,context){if(context?.elements){const validValues=context?.elements.map((f=>f.value));if(!validValues.includes(value))return!1}return!0},Edit:"datetime"};var base_control=__webpack_require__("./packages/components/build-module/base-control/index.js"),visually_hidden_component=__webpack_require__("./packages/components/build-module/visually-hidden/component.js"),time=__webpack_require__("./packages/components/build-module/date-time/time/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");var number_control=__webpack_require__("./packages/components/build-module/number-control/index.js");var radio_control=__webpack_require__("./packages/components/build-module/radio-control/index.js");var select_control=__webpack_require__("./packages/components/build-module/select-control/index.js");var text_control=__webpack_require__("./packages/components/build-module/text-control/index.js");const FORM_CONTROLS={datetime:function DateTime({data,field,onChange,hideLabelFromVision}){const{id,label}=field,value=field.getValue({item:data}),onChangeControl=(0,react.useCallback)((newValue=>onChange({[id]:newValue})),[id,onChange]);return(0,jsx_runtime.jsxs)("fieldset",{className:"dataviews-controls__datetime",children:[!hideLabelFromVision&&(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"legend",children:label}),hideLabelFromVision&&(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"legend",children:label}),(0,jsx_runtime.jsx)(time.h,{currentTime:value,onChange:onChangeControl,hideLabelFromVision:!0})]})},integer:function Integer({data,field,onChange,hideLabelFromVision}){var _field$getValue;const{id,label,description}=field,value=null!==(_field$getValue=field.getValue({item:data}))&&void 0!==_field$getValue?_field$getValue:"",onChangeControl=(0,react.useCallback)((newValue=>onChange({[id]:Number(newValue)})),[id,onChange]);return(0,jsx_runtime.jsx)(number_control.A,{label,help:description,value,onChange:onChangeControl,__next40pxDefaultSize:!0,hideLabelFromVision})},radio:function Radio({data,field,onChange,hideLabelFromVision}){const{id,label}=field,value=field.getValue({item:data}),onChangeControl=(0,react.useCallback)((newValue=>onChange({[id]:newValue})),[id,onChange]);return field.elements?(0,jsx_runtime.jsx)(radio_control.A,{label,onChange:onChangeControl,options:field.elements,selected:value,hideLabelFromVision}):null},select:function Select({data,field,onChange,hideLabelFromVision}){var _field$getValue,_field$elements;const{id,label}=field,value=null!==(_field$getValue=field.getValue({item:data}))&&void 0!==_field$getValue?_field$getValue:"",onChangeControl=(0,react.useCallback)((newValue=>onChange({[id]:newValue})),[id,onChange]),elements=[{label:(0,i18n_build_module.__)("Select item"),value:""},...null!==(_field$elements=field?.elements)&&void 0!==_field$elements?_field$elements:[]];return(0,jsx_runtime.jsx)(select_control.A,{label,value,options:elements,onChange:onChangeControl,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,hideLabelFromVision})},text:function Text({data,field,onChange,hideLabelFromVision}){const{id,label,placeholder}=field,value=field.getValue({item:data}),onChangeControl=(0,react.useCallback)((newValue=>onChange({[id]:newValue})),[id,onChange]);return(0,jsx_runtime.jsx)(text_control.A,{label,placeholder,value:null!=value?value:"",onChange:onChangeControl,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,hideLabelFromVision})}};function getControlByType(type){if(Object.keys(FORM_CONTROLS).includes(type))return FORM_CONTROLS[type];throw"Control "+type+" not found"}var h_stack_component=__webpack_require__("./packages/components/build-module/h-stack/component.js"),heading_component=__webpack_require__("./packages/components/build-module/heading/component.js"),spacer_component=__webpack_require__("./packages/components/build-module/spacer/component.js");function Header({title}){return(0,jsx_runtime.jsx)(component.A,{className:"dataforms-layouts__dropdown-header",spacing:4,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{alignment:"center",children:[(0,jsx_runtime.jsx)(heading_component.A,{level:2,size:13,children:title}),(0,jsx_runtime.jsx)(spacer_component.A,{})]})})}const dataform_combined_edit=function DataFormCombinedEdit({field,data,onChange,hideLabelFromVision}){var _field$children;const children=(null!==(_field$children=field.children)&&void 0!==_field$children?_field$children:[]).map((fieldId=>field.fields.find((({id})=>id===fieldId)))).filter((childField=>!!childField)).map((child=>(0,jsx_runtime.jsx)("div",{className:"dataforms-combined-edit__field",children:(0,jsx_runtime.jsx)(child.Edit,{data,field:child,onChange})},child.id))),Stack="horizontal"===field.direction?h_stack_component.A:component.A;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!hideLabelFromVision&&(0,jsx_runtime.jsx)(Header,{title:field.label}),(0,jsx_runtime.jsx)(Stack,{spacing:4,className:"dataforms-combined-edit",as:"fieldset",children})]})};function normalizeFields(fields){return fields.map((field=>{var _field$sort,_field$isValid,_field$enableHiding,_field$enableSorting;const fieldTypeDefinition=function getFieldTypeDefinition(type){return"integer"===type?integer:"text"===type?field_types_text:"datetime"===type?datetime:{sort:(a,b,direction)=>"number"==typeof a&&"number"==typeof b?"asc"===direction?a-b:b-a:"asc"===direction?a.localeCompare(b):b.localeCompare(a),isValid:(value,context)=>{if(context?.elements){const validValues=context?.elements?.map((f=>f.value));if(!validValues.includes(value))return!1}return!0},Edit:()=>null}}(field.type),getValue=field.getValue||(({item})=>item[field.id]),sort=null!==(_field$sort=field.sort)&&void 0!==_field$sort?_field$sort:function sort(a,b,direction){return fieldTypeDefinition.sort(getValue({item:a}),getValue({item:b}),direction)},isValid=null!==(_field$isValid=field.isValid)&&void 0!==_field$isValid?_field$isValid:function isValid(item,context){return fieldTypeDefinition.isValid(getValue({item}),context)},Edit=function getControl(field,fieldTypeDefinition){return"function"==typeof field.Edit?field.Edit:"string"==typeof field.Edit?getControlByType(field.Edit):field.elements?getControlByType("select"):"string"==typeof fieldTypeDefinition.Edit?getControlByType(fieldTypeDefinition.Edit):fieldTypeDefinition.Edit}(field,fieldTypeDefinition),render=field.render||(field.elements?({item})=>{const value=getValue({item});return field?.elements?.find((element=>element.value===value))?.label||getValue({item})}:getValue);return{...field,label:field.label||field.id,header:field.header||field.label||field.id,getValue,render,sort,isValid,Edit,enableHiding:null===(_field$enableHiding=field.enableHiding)||void 0===_field$enableHiding||_field$enableHiding,enableSorting:null===(_field$enableSorting=field.enableSorting)||void 0===_field$enableSorting||_field$enableSorting}}))}function getVisibleFields(fields,formFields=[],combinedFields){const visibleFields=[...fields];return combinedFields&&visibleFields.push(...function normalizeCombinedFields(combinedFields,fields){return combinedFields.map((combinedField=>({...combinedField,Edit:dataform_combined_edit,fields:normalizeFields(combinedField.children.map((fieldId=>fields.find((({id})=>id===fieldId)))).filter((field=>!!field)))})))}(combinedFields,fields)),formFields.map((fieldId=>visibleFields.find((({id})=>id===fieldId)))).filter((field=>!!field))}var build_module_button=__webpack_require__("./packages/components/build-module/button/index.js"),dropdown=__webpack_require__("./packages/components/build-module/dropdown/index.js"),close_small=__webpack_require__("./packages/icons/build-module/library/close-small.js");function DropdownHeader({title,onClose}){return(0,jsx_runtime.jsx)(component.A,{className:"dataforms-layouts-panel__dropdown-header",spacing:4,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{alignment:"center",children:[(0,jsx_runtime.jsx)(heading_component.A,{level:2,size:13,children:title}),(0,jsx_runtime.jsx)(spacer_component.A,{}),onClose&&(0,jsx_runtime.jsx)(build_module_button.Ay,{label:(0,i18n_build_module.__)("Close"),icon:close_small.A,onClick:onClose,size:"small"})]})})}function FormField({data,field,onChange}){const[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,placement:"left-start",offset:36,shift:!0})),[popoverAnchor]);return(0,jsx_runtime.jsxs)(h_stack_component.A,{ref:setPopoverAnchor,className:"dataforms-layouts-panel__field",children:[(0,jsx_runtime.jsx)("div",{className:"dataforms-layouts-panel__field-label",children:field.label}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(dropdown.A,{contentClassName:"dataforms-layouts-panel__field-dropdown",popoverProps,focusOnMount:!0,toggleProps:{size:"compact",variant:"tertiary",tooltipPosition:"middle left"},renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"dataforms-layouts-panel__field-control",size:"compact",variant:"tertiary","aria-expanded":isOpen,"aria-label":(0,i18n_build_module.nv)((0,i18n_build_module.__)("Edit %s"),field.label),onClick:onToggle,children:(0,jsx_runtime.jsx)(field.render,{item:data})}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DropdownHeader,{title:field.label,onClose}),(0,jsx_runtime.jsx)(field.Edit,{data,field,onChange,hideLabelFromVision:!0},field.id)]})})})]})}const FORM_LAYOUTS=[{type:"regular",component:function FormRegular({data,fields,form,onChange}){const visibleFields=(0,react.useMemo)((()=>normalizeFields(getVisibleFields(fields,form.fields,form.combinedFields))),[fields,form.fields,form.combinedFields]);return(0,jsx_runtime.jsx)(component.A,{spacing:4,children:visibleFields.map((field=>(0,jsx_runtime.jsx)(field.Edit,{data,field,onChange},field.id)))})}},{type:"panel",component:function FormPanel({data,fields,form,onChange}){const visibleFields=(0,react.useMemo)((()=>normalizeFields(getVisibleFields(fields,form.fields,form.combinedFields))),[fields,form.fields,form.combinedFields]);return(0,jsx_runtime.jsx)(component.A,{spacing:2,children:visibleFields.map((field=>(0,jsx_runtime.jsx)(FormField,{data,field,onChange},field.id)))})}}];function DataForm({form,...props}){var _form$type;const layout=function getFormLayout(type){return FORM_LAYOUTS.find((layout=>layout.type===type))}(null!==(_form$type=form.type)&&void 0!==_form$type?_form$type:"regular");return layout?(0,jsx_runtime.jsx)(layout.component,{form,...props}):null}const utils_TEMPLATE_POST_TYPE="wp_template",utils_TEMPLATE_PART_POST_TYPE="wp_template_part",utils_TEMPLATE_ORIGINS_custom="custom";function isTemplateOrTemplatePart(p){return p.type===utils_TEMPLATE_POST_TYPE||p.type===utils_TEMPLATE_PART_POST_TYPE}function getItemTitle(item){return"string"==typeof item.title?(0,html_entities_build_module.S)(item.title):"rendered"in item.title?(0,html_entities_build_module.S)(item.title.rendered):"raw"in item.title?(0,html_entities_build_module.S)(item.title.raw):""}function isTemplateRemovable(template){return!!template&&([template.source,template.source].includes(utils_TEMPLATE_ORIGINS_custom)&&!Boolean("wp_template"===template.type&&template?.plugin)&&!template.has_theme_file)}const fields=[{type:"text",id:"title",label:(0,i18n_build_module.__)("Title"),placeholder:(0,i18n_build_module.__)("No title"),getValue:({item})=>getItemTitle(item)}],formDuplicateAction={fields:["title"]},duplicatePost={id:"duplicate-post",label:(0,i18n_build_module._x)("Duplicate","action label"),isEligible:({status})=>"trash"!==status,RenderModal:({items,closeModal,onActionPerformed})=>{const[item,setItem]=(0,react.useState)({...items[0],title:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s (Copy)"),getItemTitle(items[0]))}),[isCreatingPage,setIsCreatingPage]=(0,react.useState)(!1),{saveEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{createSuccessNotice,createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M);return(0,jsx_runtime.jsx)("form",{onSubmit:async function createPage(event){if(event.preventDefault(),isCreatingPage)return;const newItemOject={status:"draft",title:item.title,slug:item.title||(0,i18n_build_module.__)("No title"),comment_status:item.comment_status,content:"string"==typeof item.content?item.content:item.content.raw,excerpt:"string"==typeof item.excerpt?item.excerpt:item.excerpt?.raw,meta:item.meta,parent:item.parent,password:item.password,template:item.template,format:item.format,featured_media:item.featured_media,menu_order:item.menu_order,ping_status:item.ping_status};Object.keys(item?._links||{}).filter((property=>property.startsWith("wp:action-assign-"))).map((property=>property.slice(17))).forEach((property=>{item.hasOwnProperty(property)&&(newItemOject[property]=item[property])})),setIsCreatingPage(!0);try{const newItem=await saveEntityRecord("postType",item.type,newItemOject,{throwOnError:!0});createSuccessNotice((0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" successfully created.'),(0,html_entities_build_module.S)(newItem.title?.rendered||item.title)),{id:"duplicate-post-action",type:"snackbar"}),onActionPerformed&&onActionPerformed([newItem])}catch(error){const typedError=error,errorMessage=typedError.message&&"unknown_error"!==typedError.code?typedError.message:(0,i18n_build_module.__)("An error occurred while duplicating the page.");createErrorNotice(errorMessage,{type:"snackbar"})}finally{setIsCreatingPage(!1),closeModal?.()}},children:(0,jsx_runtime.jsxs)(component.A,{spacing:3,children:[(0,jsx_runtime.jsx)(DataForm,{data:item,fields,form:formDuplicateAction,onChange:changes=>setItem((prev=>({...prev,...changes})))}),(0,jsx_runtime.jsxs)(h_stack_component.A,{spacing:2,justify:"end",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:closeModal,__next40pxDefaultSize:!0,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"primary",type:"submit",isBusy:isCreatingPage,"aria-disabled":isCreatingPage,__next40pxDefaultSize:!0,children:(0,i18n_build_module._x)("Duplicate","action label")})]})]})})}},duplicate_post=duplicatePost;var patterns_build_module=__webpack_require__("./packages/patterns/build-module/index.js");const{lock:lock_unlock_lock,unlock:build_module_lock_unlock_unlock}=(0,implementation.yf)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/fields"),{CreatePatternModalContents,useDuplicatePatternProps}=build_module_lock_unlock_unlock(patterns_build_module.j),duplicatePattern={id:"duplicate-pattern",label:(0,i18n_build_module._x)("Duplicate","action label"),isEligible:item=>"wp_template_part"!==item.type,modalHeader:(0,i18n_build_module._x)("Duplicate pattern","action label"),RenderModal:({items,closeModal})=>{const[item]=items,duplicatedProps=useDuplicatePatternProps({pattern:item,onSuccess:()=>closeModal?.()});return(0,jsx_runtime.jsx)(CreatePatternModalContents,{onClose:closeModal,confirmLabel:(0,i18n_build_module._x)("Duplicate","action label"),...duplicatedProps})}},duplicate_pattern=duplicatePattern,{PATTERN_TYPES}=build_module_lock_unlock_unlock(patterns_build_module.j),renamePost={id:"rename-post",label:(0,i18n_build_module.__)("Rename"),isEligible:post=>"trash"!==post.status&&([utils_TEMPLATE_POST_TYPE,utils_TEMPLATE_PART_POST_TYPE,...Object.values(PATTERN_TYPES)].includes(post.type)?function isTemplate(post){return post.type===utils_TEMPLATE_POST_TYPE}(post)?isTemplateRemovable(post)&&post.is_custom&&post.permissions?.update:function isTemplatePart(post){return post.type===utils_TEMPLATE_PART_POST_TYPE}(post)?post.source===utils_TEMPLATE_ORIGINS_custom&&!post?.has_theme_file&&post.permissions?.update:post.type===PATTERN_TYPES.user&&post.permissions?.update:post.permissions?.update),RenderModal:({items,closeModal,onActionPerformed})=>{const[item]=items,[title,setTitle]=(0,react.useState)((()=>getItemTitle(item))),{editEntityRecord,saveEditedEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{createSuccessNotice,createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M);return(0,jsx_runtime.jsx)("form",{onSubmit:async function onRename(event){event.preventDefault();try{await editEntityRecord("postType",item.type,item.id,{title}),setTitle(""),closeModal?.(),await saveEditedEntityRecord("postType",item.type,item.id,{throwOnError:!0}),createSuccessNotice((0,i18n_build_module.__)("Name updated"),{type:"snackbar"}),onActionPerformed?.(items)}catch(error){const typedError=error,errorMessage=typedError.message&&"unknown_error"!==typedError.code?typedError.message:(0,i18n_build_module.__)("An error occurred while updating the name");createErrorNotice(errorMessage,{type:"snackbar"})}},children:(0,jsx_runtime.jsxs)(component.A,{spacing:"5",children:[(0,jsx_runtime.jsx)(text_control.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Name"),value:title,onChange:setTitle,required:!0}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>{closeModal?.()},children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,i18n_build_module.__)("Save")})]})]})})}},rename_post=renamePost;function isItemValid(item,fields,form){return normalizeFields(fields.filter((({id})=>!!form.fields?.includes(id)))).every((field=>field.isValid(item,{elements:field.elements})))}const reorder_page_fields=[{type:"integer",id:"menu_order",label:(0,i18n_build_module.__)("Order"),description:(0,i18n_build_module.__)("Determines the order of pages.")}],formOrderAction={fields:["menu_order"]};const reorderPage={id:"order-pages",label:(0,i18n_build_module.__)("Order"),isEligible:({status})=>"trash"!==status,RenderModal:function ReorderModal({items,closeModal,onActionPerformed}){const[item,setItem]=(0,react.useState)(items[0]),orderInput=item.menu_order,{editEntityRecord,saveEditedEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{createSuccessNotice,createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M),isSaveDisabled=!isItemValid(item,reorder_page_fields,formOrderAction);return(0,jsx_runtime.jsx)("form",{onSubmit:async function onOrder(event){if(event.preventDefault(),isItemValid(item,reorder_page_fields,formOrderAction))try{await editEntityRecord("postType",item.type,item.id,{menu_order:orderInput}),closeModal?.(),await saveEditedEntityRecord("postType",item.type,item.id,{throwOnError:!0}),createSuccessNotice((0,i18n_build_module.__)("Order updated."),{type:"snackbar"}),onActionPerformed?.(items)}catch(error){const typedError=error,errorMessage=typedError.message&&"unknown_error"!==typedError.code?typedError.message:(0,i18n_build_module.__)("An error occurred while updating the order");createErrorNotice(errorMessage,{type:"snackbar"})}},children:(0,jsx_runtime.jsxs)(component.A,{spacing:"5",children:[(0,jsx_runtime.jsx)("div",{children:(0,i18n_build_module.__)("Determines the order of pages. Pages with the same order value are sorted alphabetically. Negative order values are supported.")}),(0,jsx_runtime.jsx)(DataForm,{data:item,fields:reorder_page_fields,form:formOrderAction,onChange:changes=>setItem({...item,...changes})}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>{closeModal?.()},children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",accessibleWhenDisabled:!0,disabled:isSaveDisabled,children:(0,i18n_build_module.__)("Save")})]})]})})}},reorder_page=reorderPage;var dist_es2015=__webpack_require__("./node_modules/param-case/dist.es2015/index.js");"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(e,n,t){const i=Number(0xffffffffn&n),r=Number(n>>32n);this.setUint32(e+(t?0:4),i,t),this.setUint32(e+(t?4:0),r,t)}});var e=e=>new DataView(new ArrayBuffer(e)),n=e=>new Uint8Array(e.buffer||e),t=e=>(new TextEncoder).encode(String(e)),i=e=>Math.min(4294967295,Number(e)),r=e=>Math.min(65535,Number(e));function f(e,i){if(void 0===i||i instanceof Date||(i=new Date(i)),e instanceof File)return{isFile:1,t:i||new Date(e.lastModified),i:e.stream()};if(e instanceof Response)return{isFile:1,t:i||new Date(e.headers.get("Last-Modified")||Date.now()),i:e.body};if(void 0===i)i=new Date;else if(isNaN(i))throw new Error("Invalid modification date.");if(void 0===e)return{isFile:0,t:i};if("string"==typeof e)return{isFile:1,t:i,i:t(e)};if(e instanceof Blob)return{isFile:1,t:i,i:e.stream()};if(e instanceof Uint8Array||e instanceof ReadableStream)return{isFile:1,t:i,i:e};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{isFile:1,t:i,i:n(e)};if(Symbol.asyncIterator in e)return{isFile:1,t:i,i:o(e[Symbol.asyncIterator]())};throw new TypeError("Unsupported input format.")}function o(e,n=e){return new ReadableStream({async pull(n){let t=0;for(;n.desiredSize>t;){const i=await e.next();if(!i.value){n.close();break}{const e=a(i.value);n.enqueue(e),t+=e.byteLength}}},cancel(e){n.throw?.(e)}})}function a(e){return"string"==typeof e?t(e):e instanceof Uint8Array?e:n(e)}function s(e,i,r){let[f,o]=function(e){return e?e instanceof Uint8Array?[e,1]:ArrayBuffer.isView(e)||e instanceof ArrayBuffer?[n(e),1]:[t(e),0]:[void 0,0]}(i);if(e instanceof File)return{o:d(f||t(e.name)),u:BigInt(e.size),l:o};if(e instanceof Response){const n=e.headers.get("content-disposition"),i=n&&n.match(/;\s*filename\*?=["']?(.*?)["']?$/i),a=i&&i[1]||e.url&&new URL(e.url).pathname.split("/").findLast(Boolean),s=a&&decodeURIComponent(a),u=r||+e.headers.get("content-length");return{o:d(f||t(s)),u:BigInt(u),l:o}}return f=d(f,void 0!==e||void 0!==r),"string"==typeof e?{o:f,u:BigInt(t(e).length),l:o}:e instanceof Blob?{o:f,u:BigInt(e.size),l:o}:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?{o:f,u:BigInt(e.byteLength),l:o}:{o:f,u:u(e,r),l:o}}function u(e,n){return n>-1?BigInt(n):e?void 0:0n}function d(e,n=1){if(!e||e.every((c=>47===c)))throw new Error("The file must have a name.");if(n)for(;47===e[e.length-1];)e=e.subarray(0,-1);else 47!==e[e.length-1]&&(e=new Uint8Array([...e,47]));return e}var l=new Uint32Array(256);for(let e=0;e<256;++e){let n=e;for(let e=0;e<8;++e)n=n>>>1^(1&n&&3988292384);l[e]=n}function y(e,n=0){n^=-1;for(var t=0,i=e.length;t<i;t++)n=n>>>8^l[255&n^e[t]];return~n>>>0}function w(e,n,t=0){const i=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,r=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;n.setUint16(t,i,1),n.setUint16(t+2,r,1)}function B({o:e,l:n},t){return 8*(!n||(t??function(e){try{b.decode(e)}catch{return 0}return 1}(e)))}var b=new TextDecoder("utf8",{fatal:1});function client_zip_p(t,i=0){const r=e(30);return r.setUint32(0,1347093252),r.setUint32(4,754976768|i),w(t.t,r,10),r.setUint16(26,t.o.length,1),n(r)}async function*g(e){let{i:n}=e;if("then"in n&&(n=await n),n instanceof Uint8Array)yield n,e.m=y(n,0),e.u=BigInt(n.length);else{e.u=0n;const t=n.getReader();for(;;){const{value:n,done:i}=await t.read();if(i)break;e.m=y(n,e.m),e.u+=BigInt(n.length),yield n}}}function I(t,r){const f=e(16+(r?8:0));return f.setUint32(0,1347094280),f.setUint32(4,t.isFile?t.m:0,1),r?(f.setBigUint64(8,t.u,1),f.setBigUint64(16,t.u,1)):(f.setUint32(8,i(t.u),1),f.setUint32(12,i(t.u),1)),n(f)}function v(t,r,f=0,o=0){const a=e(46);return a.setUint32(0,1347092738),a.setUint32(4,755182848),a.setUint16(8,2048|f),w(t.t,a,12),a.setUint32(16,t.isFile?t.m:0,1),a.setUint32(20,i(t.u),1),a.setUint32(24,i(t.u),1),a.setUint16(28,t.o.length,1),a.setUint16(30,o,1),a.setUint16(40,t.isFile?33204:16893,1),a.setUint32(42,i(r),1),n(a)}function h(t,i,r){const f=e(r);return f.setUint16(0,1,1),f.setUint16(2,r-4,1),16&r&&(f.setBigUint64(4,t.u,1),f.setBigUint64(12,t.u,1)),f.setBigUint64(r-8,i,1),n(f)}function D(e){return e instanceof File||e instanceof Response?[[e],[e]]:[[e.input,e.name,e.size],[e.input,e.lastModified]]}function A(e,n={}){const t={"Content-Type":"application/zip","Content-Disposition":"attachment"};return("bigint"==typeof n.length||Number.isInteger(n.length))&&n.length>0&&(t["Content-Length"]=String(n.length)),n.metadata&&(t["Content-Length"]=String((e=>function(e){let n=BigInt(22),t=0n,i=0;for(const r of e){if(!r.o)throw new Error("Every file must have a non-empty name.");if(void 0===r.u)throw new Error(`Missing size for file "${(new TextDecoder).decode(r.o)}".`);const e=r.u>=0xffffffffn,f=t>=0xffffffffn;t+=BigInt(46+r.o.length+(e&&8))+r.u,n+=BigInt(r.o.length+46+(12*f|28*e)),i||(i=e)}return(i||t>=0xffffffffn)&&(n+=BigInt(76)),n+t}(function*(e){for(const n of e)yield s(...D(n)[0])}(e)))(n.metadata))),new Response(N(e,n),{headers:t})}function N(t,a={}){const u=function(e){const n=e[Symbol.iterator in e?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const e=await n.next();if(e.done)return e;const[t,i]=D(e.value);return{done:0,value:Object.assign(f(...i),s(...t))}},throw:n.throw?.bind(n),[Symbol.asyncIterator](){return this}}}(t);return o(async function*(t,f){const o=[];let a=0n,s=0n,u=0;for await(const e of t){const n=B(e,f.buffersAreUTF8);yield client_zip_p(e,n),yield new Uint8Array(e.o),e.isFile&&(yield*g(e));const t=e.u>=0xffffffffn,i=12*(a>=0xffffffffn)|28*t;yield I(e,t),o.push(v(e,a,n,i)),o.push(e.o),i&&o.push(h(e,a,i)),t&&(a+=8n),s++,a+=BigInt(46+e.o.length)+e.u,u||(u=t)}let d=0n;for(const e of o)yield e,d+=BigInt(e.length);if(u||a>=0xffffffffn){const t=e(76);t.setUint32(0,1347094022),t.setBigUint64(4,BigInt(44),1),t.setUint32(12,755182848),t.setBigUint64(24,s,1),t.setBigUint64(32,s,1),t.setBigUint64(40,d,1),t.setBigUint64(48,a,1),t.setUint32(56,1347094023),t.setBigUint64(64,a+d,1),t.setUint32(72,1,1),yield n(t)}const l=e(22);l.setUint32(0,1347093766),l.setUint16(8,r(s),1),l.setUint16(10,r(s),1),l.setUint32(12,i(d),1),l.setUint32(16,i(a),1),yield n(l)}(u,a),u)}var blob_build_module=__webpack_require__("./packages/blob/build-module/index.js"),svg=__webpack_require__("./packages/primitives/build-module/svg/index.js");const library_download=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M18 11.3l-1-1.1-4 4V3h-1.5v11.3L7 10.2l-1 1.1 6.2 5.8 5.8-5.8zm.5 3.7v3.5h-13V15H4v5h16v-5h-1.5z"})});function getJsonFromItem(item){return JSON.stringify({__file:item.type,title:getItemTitle(item),content:"string"==typeof item.content?item.content:item.content?.raw,syncStatus:item.wp_pattern_sync_status},null,2)}const export_pattern={id:"export-pattern",label:(0,i18n_build_module.__)("Export as JSON"),icon:library_download,supportsBulk:!0,isEligible:item=>"wp_block"===item.type,callback:async items=>{if(1===items.length)return(0,blob_build_module.WN)(`${(0,dist_es2015.c)(getItemTitle(items[0])||items[0].slug)}.json`,getJsonFromItem(items[0]),"application/json");const nameCount={},filesToZip=items.map((item=>{const name=(0,dist_es2015.c)(getItemTitle(item)||item.slug);return nameCount[name]=(nameCount[name]||0)+1,{name:name+(nameCount[name]>1?"-"+(nameCount[name]-1):"")+".json",lastModified:new Date,input:getJsonFromItem(item)}}));return(0,blob_build_module.WN)((0,i18n_build_module.__)("patterns-export")+".zip",await A(filesToZip).blob(),"application/zip")}},library_backup=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M5.5 12h1.75l-2.5 3-2.5-3H4a8 8 0 113.134 6.35l.907-1.194A6.5 6.5 0 105.5 12zm9.53 1.97l-2.28-2.28V8.5a.75.75 0 00-1.5 0V12a.747.747 0 00.218.529l1.282-.84-1.28.842 2.5 2.5a.75.75 0 101.06-1.061z"})}),restorePost={id:"restore",label:(0,i18n_build_module.__)("Restore"),isPrimary:!0,icon:library_backup,supportsBulk:!0,isEligible:item=>!isTemplateOrTemplatePart(item)&&"wp_block"!==item.type&&"trash"===item.status&&item.permissions?.update,async callback(posts,{registry,onActionPerformed}){const{createSuccessNotice,createErrorNotice}=registry.dispatch(notices_build_module.M),{editEntityRecord,saveEditedEntityRecord}=registry.dispatch(core_data_build_module.M_);await Promise.allSettled(posts.map((post=>editEntityRecord("postType",post.type,post.id,{status:"draft"}))));const promiseResult=await Promise.allSettled(posts.map((post=>saveEditedEntityRecord("postType",post.type,post.id,{throwOnError:!0}))));if(promiseResult.every((({status})=>"fulfilled"===status))){let successMessage;successMessage=1===posts.length?(0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" has been restored.'),getItemTitle(posts[0])):"page"===posts[0].type?(0,i18n_build_module.nv)((0,i18n_build_module.__)("%d pages have been restored."),posts.length):(0,i18n_build_module.nv)((0,i18n_build_module.__)("%d posts have been restored."),posts.length),createSuccessNotice(successMessage,{type:"snackbar",id:"restore-post-action"}),onActionPerformed&&onActionPerformed(posts)}else{let errorMessage;if(1===promiseResult.length){const typedError=promiseResult[0];errorMessage=typedError.reason?.message?typedError.reason.message:(0,i18n_build_module.__)("An error occurred while restoring the post.")}else{const errorMessages=new Set,failedPromises=promiseResult.filter((({status})=>"rejected"===status));for(const failedPromise of failedPromises){const typedError=failedPromise;typedError.reason?.message&&errorMessages.add(typedError.reason.message)}errorMessage=0===errorMessages.size?(0,i18n_build_module.__)("An error occurred while restoring the posts."):1===errorMessages.size?(0,i18n_build_module.nv)((0,i18n_build_module.__)("An error occurred while restoring the posts: %s"),[...errorMessages][0]):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Some errors occurred while restoring the posts: %s"),[...errorMessages].join(","))}createErrorNotice(errorMessage,{type:"snackbar"})}}},restore_post=restorePost;var build_module_dispatch=__webpack_require__("./packages/data/build-module/dispatch.js"),build_module_select=__webpack_require__("./packages/data/build-module/select.js"),text_component=__webpack_require__("./packages/components/build-module/text/component.js");const revertTemplate=async(template,{allowUndo=!0}={})=>{const noticeId="edit-site-template-reverted";var templateOrTemplatePart;if((0,build_module_dispatch.J)(notices_build_module.M).removeNotice(noticeId),(templateOrTemplatePart=template)&&templateOrTemplatePart.source===utils_TEMPLATE_ORIGINS_custom&&(Boolean(templateOrTemplatePart?.plugin)||templateOrTemplatePart?.has_theme_file))try{const templateEntityConfig=(0,build_module_select.L)(core_data_build_module.M_).getEntityConfig("postType",template.type);if(!templateEntityConfig)return void(0,build_module_dispatch.J)(notices_build_module.M).createErrorNotice((0,i18n_build_module.__)("The editor has encountered an unexpected error. Please reload."),{type:"snackbar"});const fileTemplatePath=(0,add_query_args.F)(`${templateEntityConfig.baseURL}/${template.id}`,{context:"edit",source:template.origin}),fileTemplate=await(0,api_fetch_build_module.A)({path:fileTemplatePath});if(!fileTemplate)return void(0,build_module_dispatch.J)(notices_build_module.M).createErrorNotice((0,i18n_build_module.__)("The editor has encountered an unexpected error. Please reload."),{type:"snackbar"});const serializeBlocks=({blocks:blocksForSerialization=[]})=>(0,blocks_build_module.RM)(blocksForSerialization),edited=(0,build_module_select.L)(core_data_build_module.M_).getEditedEntityRecord("postType",template.type,template.id);(0,build_module_dispatch.J)(core_data_build_module.M_).editEntityRecord("postType",template.type,template.id,{content:serializeBlocks,blocks:edited.blocks,source:"custom"},{undoIgnore:!0});const blocks=(0,blocks_build_module.qg)(fileTemplate?.content?.raw);if((0,build_module_dispatch.J)(core_data_build_module.M_).editEntityRecord("postType",template.type,fileTemplate.id,{content:serializeBlocks,blocks,source:"theme"}),allowUndo){const undoRevert=()=>{(0,build_module_dispatch.J)(core_data_build_module.M_).editEntityRecord("postType",template.type,edited.id,{content:serializeBlocks,blocks:edited.blocks,source:"custom"})};(0,build_module_dispatch.J)(notices_build_module.M).createSuccessNotice((0,i18n_build_module.__)("Template reset."),{type:"snackbar",id:noticeId,actions:[{label:(0,i18n_build_module.__)("Undo"),onClick:undoRevert}]})}}catch(error){const errorMessage=error.message&&"unknown_error"!==error.code?error.message:(0,i18n_build_module.__)("Template revert failed. Please reload.");(0,build_module_dispatch.J)(notices_build_module.M).createErrorNotice(errorMessage,{type:"snackbar"})}else(0,build_module_dispatch.J)(notices_build_module.M).createErrorNotice((0,i18n_build_module.__)("This template is not revertable."),{type:"snackbar"})},resetPostAction={id:"reset-post",label:(0,i18n_build_module.__)("Reset"),isEligible:item=>isTemplateOrTemplatePart(item)&&item?.source===utils_TEMPLATE_ORIGINS_custom&&(Boolean("wp_template"===item.type&&item?.plugin)||item?.has_theme_file),icon:library_backup,supportsBulk:!0,hideModalHeader:!0,RenderModal:({items,closeModal,onActionPerformed})=>{const[isBusy,setIsBusy]=(0,react.useState)(!1),{saveEditedEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{createSuccessNotice,createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M);return(0,jsx_runtime.jsxs)(component.A,{spacing:"5",children:[(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.__)("Reset to default and clear all customizations?")}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:closeModal,disabled:isBusy,accessibleWhenDisabled:!0,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",onClick:async()=>{setIsBusy(!0),await(async()=>{try{for(const template of items)await revertTemplate(template,{allowUndo:!1}),await saveEditedEntityRecord("postType",template.type,template.id);createSuccessNotice(items.length>1?(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s items reset."),items.length):(0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" reset.'),getItemTitle(items[0])),{type:"snackbar",id:"revert-template-action"})}catch(error){let fallbackErrorMessage;fallbackErrorMessage=items[0].type===utils_TEMPLATE_POST_TYPE?1===items.length?(0,i18n_build_module.__)("An error occurred while reverting the template."):(0,i18n_build_module.__)("An error occurred while reverting the templates."):1===items.length?(0,i18n_build_module.__)("An error occurred while reverting the template part."):(0,i18n_build_module.__)("An error occurred while reverting the template parts.");const typedError=error,errorMessage=typedError.message&&"unknown_error"!==typedError.code?typedError.message:fallbackErrorMessage;createErrorNotice(errorMessage,{type:"snackbar"})}})(),onActionPerformed?.(items),setIsBusy(!1),closeModal?.()},isBusy,disabled:isBusy,accessibleWhenDisabled:!0,children:(0,i18n_build_module.__)("Reset")})]})]})}},reset_post=resetPostAction;var trash=__webpack_require__("./packages/icons/build-module/library/trash.js");function getErrorMessagesFromPromises(allSettledResults){const errorMessages=new Set;if(1===allSettledResults.length){const typedError=allSettledResults[0];typedError.reason?.message&&errorMessages.add(typedError.reason.message)}else{const failedPromises=allSettledResults.filter((({status})=>"rejected"===status));for(const failedPromise of failedPromises){const typedError=failedPromise;typedError.reason?.message&&errorMessages.add(typedError.reason.message)}}return errorMessages}const{PATTERN_TYPES:delete_post_PATTERN_TYPES}=build_module_lock_unlock_unlock(patterns_build_module.j),deletePostAction={id:"delete-post",label:(0,i18n_build_module.__)("Delete"),isPrimary:!0,icon:trash.A,isEligible:post=>isTemplateOrTemplatePart(post)?isTemplateRemovable(post):post.type===delete_post_PATTERN_TYPES.user,supportsBulk:!0,hideModalHeader:!0,RenderModal:({items,closeModal,onActionPerformed})=>{const[isBusy,setIsBusy]=(0,react.useState)(!1),isResetting=items.every((item=>isTemplateOrTemplatePart(item)&&item?.has_theme_file));return(0,jsx_runtime.jsxs)(component.A,{spacing:"5",children:[(0,jsx_runtime.jsx)(text_component.A,{children:items.length>1?(0,i18n_build_module.nv)((0,i18n_build_module._n)("Delete %d item?","Delete %d items?",items.length),items.length):(0,i18n_build_module.nv)((0,i18n_build_module.__)('Delete "%s"?'),getItemTitle(items[0]))}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:closeModal,disabled:isBusy,accessibleWhenDisabled:!0,__next40pxDefaultSize:!0,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"primary",onClick:async()=>{setIsBusy(!0);const notice={success:{messages:{getMessage:item=>isResetting?(0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" reset.'),(0,html_entities_build_module.S)(getItemTitle(item))):(0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" deleted.'),(0,html_entities_build_module.S)(getItemTitle(item))),getBatchMessage:()=>isResetting?(0,i18n_build_module.__)("Items reset."):(0,i18n_build_module.__)("Items deleted.")}},error:{messages:{getMessage:error=>1===error.size?[...error][0]:isResetting?(0,i18n_build_module.__)("An error occurred while reverting the item."):(0,i18n_build_module.__)("An error occurred while deleting the item."),getBatchMessage:errors=>0===errors.size?isResetting?(0,i18n_build_module.__)("An error occurred while reverting the items."):(0,i18n_build_module.__)("An error occurred while deleting the items."):1===errors.size?isResetting?(0,i18n_build_module.nv)((0,i18n_build_module.__)("An error occurred while reverting the items: %s"),[...errors][0]):(0,i18n_build_module.nv)((0,i18n_build_module.__)("An error occurred while deleting the items: %s"),[...errors][0]):isResetting?(0,i18n_build_module.nv)((0,i18n_build_module.__)("Some errors occurred while reverting the items: %s"),[...errors].join(",")):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Some errors occurred while deleting the items: %s"),[...errors].join(","))}}};await(async(posts,notice,callbacks)=>{const{createSuccessNotice,createErrorNotice}=(0,build_module_dispatch.J)(notices_build_module.M),{deleteEntityRecord}=(0,build_module_dispatch.J)(core_data_build_module.M_),allSettledResults=await Promise.allSettled(posts.map((post=>deleteEntityRecord("postType",post.type,post.id,{force:!0},{throwOnError:!0}))));if(allSettledResults.every((({status})=>"fulfilled"===status))){var _notice$success$type;let successMessage;successMessage=1===allSettledResults.length?notice.success.messages.getMessage(posts[0]):notice.success.messages.getBatchMessage(posts),createSuccessNotice(successMessage,{type:null!==(_notice$success$type=notice.success.type)&&void 0!==_notice$success$type?_notice$success$type:"snackbar",id:notice.success.id}),callbacks.onActionPerformed?.(posts)}else{var _notice$error$type;const errorMessages=getErrorMessagesFromPromises(allSettledResults);let errorMessage="";errorMessage=1===allSettledResults.length?notice.error.messages.getMessage(errorMessages):notice.error.messages.getBatchMessage(errorMessages),createErrorNotice(errorMessage,{type:null!==(_notice$error$type=notice.error.type)&&void 0!==_notice$error$type?_notice$error$type:"snackbar",id:notice.error.id}),callbacks.onActionError?.()}})(items,notice,{onActionPerformed}),setIsBusy(!1),closeModal?.()},isBusy,disabled:isBusy,accessibleWhenDisabled:!0,__next40pxDefaultSize:!0,children:(0,i18n_build_module.__)("Delete")})]})]})}},delete_post=deletePostAction,trash_post_trashPost={id:"move-to-trash",label:(0,i18n_build_module.__)("Move to trash"),isPrimary:!0,icon:trash.A,isEligible:item=>!isTemplateOrTemplatePart(item)&&"wp_block"!==item.type&&(!!item.status&&!["auto-draft","trash"].includes(item.status)&&item.permissions?.delete),supportsBulk:!0,hideModalHeader:!0,RenderModal:({items,closeModal,onActionPerformed})=>{const[isBusy,setIsBusy]=(0,react.useState)(!1),{createSuccessNotice,createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M),{deleteEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_);return(0,jsx_runtime.jsxs)(component.A,{spacing:"5",children:[(0,jsx_runtime.jsx)(text_component.A,{children:1===items.length?(0,i18n_build_module.nv)((0,i18n_build_module.__)('Are you sure you want to move "%s" to the trash?'),getItemTitle(items[0])):(0,i18n_build_module.nv)((0,i18n_build_module._n)("Are you sure you want to move %d item to the trash ?","Are you sure you want to move %d items to the trash ?",items.length),items.length)}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:closeModal,disabled:isBusy,accessibleWhenDisabled:!0,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",onClick:async()=>{setIsBusy(!0);const promiseResult=await Promise.allSettled(items.map((item=>deleteEntityRecord("postType",item.type,item.id.toString(),{},{throwOnError:!0}))));if(promiseResult.every((({status})=>"fulfilled"===status))){let successMessage;successMessage=1===promiseResult.length?(0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" moved to the trash.'),getItemTitle(items[0])):(0,i18n_build_module.nv)((0,i18n_build_module._n)("%s item moved to the trash.","%s items moved to the trash.",items.length),items.length),createSuccessNotice(successMessage,{type:"snackbar",id:"move-to-trash-action"})}else{let errorMessage;if(1===promiseResult.length){const typedError=promiseResult[0];errorMessage=typedError.reason?.message?typedError.reason.message:(0,i18n_build_module.__)("An error occurred while moving the item to the trash.")}else{const errorMessages=new Set,failedPromises=promiseResult.filter((({status})=>"rejected"===status));for(const failedPromise of failedPromises){const typedError=failedPromise;typedError.reason?.message&&errorMessages.add(typedError.reason.message)}errorMessage=0===errorMessages.size?(0,i18n_build_module.__)("An error occurred while moving the items to the trash."):1===errorMessages.size?(0,i18n_build_module.nv)((0,i18n_build_module.__)("An error occurred while moving the item to the trash: %s"),[...errorMessages][0]):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Some errors occurred while moving the items to the trash: %s"),[...errorMessages].join(","))}createErrorNotice(errorMessage,{type:"snackbar"})}onActionPerformed&&onActionPerformed(items),setIsBusy(!1),closeModal?.()},isBusy,disabled:isBusy,accessibleWhenDisabled:!0,children:(0,i18n_build_module._x)("Trash","verb")})]})]})}},trash_post=trash_post_trashPost,permanentlyDeletePost={id:"permanently-delete",label:(0,i18n_build_module.__)("Permanently delete"),supportsBulk:!0,icon:trash.A,isEligible(item){if(isTemplateOrTemplatePart(item)||"wp_block"===item.type)return!1;const{status,permissions}=item;return"trash"===status&&permissions?.delete},async callback(posts,{registry,onActionPerformed}){const{createSuccessNotice,createErrorNotice}=registry.dispatch(notices_build_module.M),{deleteEntityRecord}=registry.dispatch(core_data_build_module.M_),promiseResult=await Promise.allSettled(posts.map((post=>deleteEntityRecord("postType",post.type,post.id,{force:!0},{throwOnError:!0}))));if(promiseResult.every((({status})=>"fulfilled"===status))){let successMessage;successMessage=1===promiseResult.length?(0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" permanently deleted.'),getItemTitle(posts[0])):(0,i18n_build_module.__)("The items were permanently deleted."),createSuccessNotice(successMessage,{type:"snackbar",id:"permanently-delete-post-action"}),onActionPerformed?.(posts)}else{let errorMessage;if(1===promiseResult.length){const typedError=promiseResult[0];errorMessage=typedError.reason?.message?typedError.reason.message:(0,i18n_build_module.__)("An error occurred while permanently deleting the item.")}else{const errorMessages=new Set,failedPromises=promiseResult.filter((({status})=>"rejected"===status));for(const failedPromise of failedPromises){const typedError=failedPromise;typedError.reason?.message&&errorMessages.add(typedError.reason.message)}errorMessage=0===errorMessages.size?(0,i18n_build_module.__)("An error occurred while permanently deleting the items."):1===errorMessages.size?(0,i18n_build_module.nv)((0,i18n_build_module.__)("An error occurred while permanently deleting the items: %s"),[...errorMessages][0]):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Some errors occurred while permanently deleting the items: %s"),[...errorMessages].join(","))}createErrorNotice(errorMessage,{type:"snackbar"})}}},permanently_delete_post=permanentlyDeletePost;var modal=__webpack_require__("./packages/components/build-module/modal/index.js"),DYHFBFEH=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/__chunks/DYHFBFEH.js"),radio_group=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/radio/radio-group.js"),button_group=__webpack_require__("./packages/components/build-module/button-group/index.js");const RadioGroupContext=(0,react.createContext)({store:void 0,disabled:void 0});const RadioGroup=(0,react.forwardRef)((function UnforwardedRadioGroup({label,checked,defaultChecked,disabled,onChange,children,...props},ref){const radioStore=DYHFBFEH.s({value:checked,defaultValue:defaultChecked,setValue:newValue=>{onChange?.(null!=newValue?newValue:void 0)},rtl:(0,i18n_build_module.V8)()}),contextValue=(0,react.useMemo)((()=>({store:radioStore,disabled})),[radioStore,disabled]);return(0,jsx_runtime.jsx)(RadioGroupContext.Provider,{value:contextValue,children:(0,jsx_runtime.jsx)(radio_group.z,{store:radioStore,render:(0,jsx_runtime.jsx)(button_group.A,{children}),"aria-label":label,ref,...props})})})),build_module_radio_group=RadioGroup;var K7FXVWIT=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/__chunks/K7FXVWIT.js"),_2GXGCHW6=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/__chunks/2GXGCHW6.js");const radio_Radio=(0,react.forwardRef)((function UnforwardedRadio({value,children,...props},ref){const{store,disabled}=(0,react.useContext)(RadioGroupContext),selectedValue=(0,_2GXGCHW6.O$)(store,"value"),isChecked=void 0!==selectedValue&&selectedValue===value;return(0,jsx_runtime.jsx)(K7FXVWIT.s,{disabled,store,ref,value,render:(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:isChecked?"primary":"secondary",...props}),children:children||value})})),radio_group_radio=radio_Radio;var flex_component=__webpack_require__("./packages/components/build-module/flex/flex/component.js"),flex_item_component=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),build_module_icon=__webpack_require__("./packages/components/build-module/icon/index.js"),flex_block_component=__webpack_require__("./packages/components/build-module/flex/flex-block/component.js"),use_instance_id=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),check=__webpack_require__("./packages/icons/build-module/library/check.js");const useExistingTemplateParts=()=>(0,use_select.A)((select=>select(core_data_build_module.M_).getEntityRecords("postType",constants_TEMPLATE_PART_POST_TYPE,{per_page:-1})),[]),getUniqueTemplatePartTitle=(title,templateParts)=>{const lowercaseTitle=title.toLowerCase(),existingTitles=templateParts.map((templatePart=>templatePart.title.rendered.toLowerCase()));if(!existingTitles.includes(lowercaseTitle))return title;let suffix=2;for(;existingTitles.includes(`${lowercaseTitle} ${suffix}`);)suffix++;return`${title} ${suffix}`},getCleanTemplatePartSlug=title=>(0,dist_es2015.c)(title).replace(/[^\w-]+/g,"")||"wp-custom-part";function CreateTemplatePartModal({modalTitle,...restProps}){const defaultModalTitle=(0,use_select.A)((select=>select(core_data_build_module.M_).getPostType(constants_TEMPLATE_PART_POST_TYPE)?.labels?.add_new_item),[]);return(0,jsx_runtime.jsx)(modal.A,{title:modalTitle||defaultModalTitle,onRequestClose:restProps.closeModal,overlayClassName:"editor-create-template-part-modal",focusOnMount:"firstContentElement",size:"medium",children:(0,jsx_runtime.jsx)(CreateTemplatePartModalContents,{...restProps})})}function CreateTemplatePartModalContents({defaultArea=TEMPLATE_PART_AREA_DEFAULT_CATEGORY,blocks=[],confirmLabel=(0,i18n_build_module.__)("Add"),closeModal,onCreate,onError,defaultTitle=""}){const{createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M),{saveEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),existingTemplateParts=useExistingTemplateParts(),[title,setTitle]=(0,react.useState)(defaultTitle),[area,setArea]=(0,react.useState)(defaultArea),[isSubmitting,setIsSubmitting]=(0,react.useState)(!1),instanceId=(0,use_instance_id.A)(CreateTemplatePartModal),templatePartAreas=(0,use_select.A)((select=>select(store_store).__experimentalGetDefaultTemplatePartAreas()),[]);return(0,jsx_runtime.jsx)("form",{onSubmit:async event=>{event.preventDefault(),await async function createTemplatePart(){if(title&&!isSubmitting)try{setIsSubmitting(!0);const uniqueTitle=getUniqueTemplatePartTitle(title,existingTemplateParts),cleanSlug=getCleanTemplatePartSlug(uniqueTitle),templatePart=await saveEntityRecord("postType",constants_TEMPLATE_PART_POST_TYPE,{slug:cleanSlug,title:uniqueTitle,content:(0,blocks_build_module.lK)(blocks),area},{throwOnError:!0});await onCreate(templatePart)}catch(error){const errorMessage=error.message&&"unknown_error"!==error.code?error.message:(0,i18n_build_module.__)("An error occurred while creating the template part.");createErrorNotice(errorMessage,{type:"snackbar"}),onError?.()}finally{setIsSubmitting(!1)}}()},children:(0,jsx_runtime.jsxs)(component.A,{spacing:"4",children:[(0,jsx_runtime.jsx)(text_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Name"),value:title,onChange:setTitle,required:!0}),(0,jsx_runtime.jsx)(base_control.Ay,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Area"),id:`editor-create-template-part-modal__area-selection-${instanceId}`,className:"editor-create-template-part-modal__area-base-control",children:(0,jsx_runtime.jsx)(build_module_radio_group,{label:(0,i18n_build_module.__)("Area"),className:"editor-create-template-part-modal__area-radio-group",id:`editor-create-template-part-modal__area-selection-${instanceId}`,onChange:setArea,checked:area,children:templatePartAreas.map((({icon,label,area:value,description})=>(0,jsx_runtime.jsx)(radio_group_radio,{value,className:"editor-create-template-part-modal__area-radio",children:(0,jsx_runtime.jsxs)(flex_component.A,{align:"start",justify:"start",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon})}),(0,jsx_runtime.jsxs)(flex_block_component.A,{className:"editor-create-template-part-modal__option-label",children:[label,(0,jsx_runtime.jsx)("div",{children:description})]}),(0,jsx_runtime.jsx)(flex_item_component.A,{className:"editor-create-template-part-modal__checkbox",children:area===value&&(0,jsx_runtime.jsx)(build_module_icon.A,{icon:check.A})})]})},label)))})}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>{closeModal()},children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",type:"submit","aria-disabled":!title||isSubmitting,isBusy:isSubmitting,children:confirmLabel})]})]})})}function utils_getItemTitle(item){return"string"==typeof item.title?(0,html_entities_build_module.S)(item.title):"rendered"in item.title?(0,html_entities_build_module.S)(item.title.rendered):"raw"in item.title?(0,html_entities_build_module.S)(item.title.raw):""}const duplicateTemplatePart={id:"duplicate-template-part",label:(0,i18n_build_module._x)("Duplicate","action label"),isEligible:item=>item.type===constants_TEMPLATE_PART_POST_TYPE,modalHeader:(0,i18n_build_module._x)("Duplicate template part","action label"),RenderModal:({items,closeModal})=>{const[item]=items,blocks=(0,react.useMemo)((()=>{var _item$blocks;return null!==(_item$blocks=item.blocks)&&void 0!==_item$blocks?_item$blocks:(0,blocks_build_module.qg)("string"==typeof item.content?item.content:item.content.raw,{__unstableSkipMigrationLogs:!0})}),[item.content,item.blocks]),{createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M);return(0,jsx_runtime.jsx)(CreateTemplatePartModalContents,{blocks,defaultArea:item.area,defaultTitle:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s (Copy)"),utils_getItemTitle(item)),onCreate:function onTemplatePartSuccess(){createSuccessNotice((0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" duplicated.'),utils_getItemTitle(item)),{type:"snackbar",id:"edit-site-patterns-success"}),closeModal?.()},onError:closeModal,confirmLabel:(0,i18n_build_module._x)("Duplicate","action label"),closeModal})}},duplicate_template_part=duplicateTemplatePart;function registerEntityAction(kind,name,config){return{type:"REGISTER_ENTITY_ACTION",kind,name,config}}function unregisterEntityAction(kind,name,actionId){return{type:"UNREGISTER_ENTITY_ACTION",kind,name,actionId}}function setIsReady(kind,name){return{type:"SET_IS_READY",kind,name}}const registerPostTypeActions=postType=>async({registry})=>{if(lock_unlock_unlock(registry.select(store_store)).isEntityReady("postType",postType))return;lock_unlock_unlock(registry.dispatch(store_store)).setIsReady("postType",postType);const postTypeConfig=await registry.resolveSelect(core_data_build_module.M_).getPostType(postType),canCreate=await registry.resolveSelect(core_data_build_module.M_).canUser("create",{kind:"postType",name:postType}),currentTheme=await registry.resolveSelect(core_data_build_module.M_).getCurrentTheme(),actions=[postTypeConfig.viewable?view_post:void 0,postTypeConfig?.supports?.revisions?view_post_revisions:void 0,globalThis.IS_GUTENBERG_PLUGIN?!["wp_template","wp_block","wp_template_part"].includes(postTypeConfig.slug)&&canCreate&&duplicate_post:void 0,"wp_template_part"===postTypeConfig.slug&&canCreate&&currentTheme?.is_block_theme?duplicate_template_part:void 0,canCreate&&"wp_block"===postTypeConfig.slug?duplicate_pattern:void 0,postTypeConfig.supports?.title?rename_post:void 0,postTypeConfig?.supports?.["page-attributes"]?reorder_page:void 0,"wp_block"===postTypeConfig.slug?export_pattern:void 0,restore_post,reset_post,delete_post,trash_post,permanently_delete_post];registry.batch((()=>{actions.forEach((action=>{action&&lock_unlock_unlock(registry.dispatch(store_store)).registerEntityAction("postType",postType,action)}))})),(0,hooks_build_module.Eo)("core.registerPostTypeActions",postType)};function setCurrentTemplateId(id){return{type:"SET_CURRENT_TEMPLATE_ID",id}}const createTemplate=template=>async({select,dispatch,registry})=>{const savedTemplate=await registry.dispatch(core_data_build_module.M_).saveEntityRecord("postType","wp_template",template);return registry.dispatch(core_data_build_module.M_).editEntityRecord("postType",select.getCurrentPostType(),select.getCurrentPostId(),{template:savedTemplate.slug}),registry.dispatch(notices_build_module.M).createSuccessNotice((0,i18n_build_module.__)("Custom template created. You're in template mode now."),{type:"snackbar",actions:[{label:(0,i18n_build_module.__)("Go back"),onClick:()=>dispatch.setRenderingMode(select.getEditorSettings().defaultRenderingMode)}]}),savedTemplate},showBlockTypes=blockNames=>({registry})=>{var _registry$select$get;const newBlockNames=(null!==(_registry$select$get=registry.select(store.M).get("core","hiddenBlockTypes"))&&void 0!==_registry$select$get?_registry$select$get:[]).filter((type=>!(Array.isArray(blockNames)?blockNames:[blockNames]).includes(type)));registry.dispatch(store.M).set("core","hiddenBlockTypes",newBlockNames)},hideBlockTypes=blockNames=>({registry})=>{var _registry$select$get2;const existingBlockNames=null!==(_registry$select$get2=registry.select(store.M).get("core","hiddenBlockTypes"))&&void 0!==_registry$select$get2?_registry$select$get2:[],mergedBlockNames=new Set([...existingBlockNames,...Array.isArray(blockNames)?blockNames:[blockNames]]);registry.dispatch(store.M).set("core","hiddenBlockTypes",[...mergedBlockNames])},saveDirtyEntities=({onSave,dirtyEntityRecords=[],entitiesToSkip=[],close}={})=>({registry})=>{const PUBLISH_ON_SAVE_ENTITIES=[{kind:"postType",name:"wp_navigation"}],homeUrl=registry.select(core_data_build_module.M_).getEntityRecord("root","__unstableBase")?.home;registry.dispatch(notices_build_module.M).removeNotice("site-editor-save-success");const entitiesToSave=dirtyEntityRecords.filter((({kind,name,key,property})=>!entitiesToSkip.some((elt=>elt.kind===kind&&elt.name===name&&elt.key===key&&elt.property===property))));close?.(entitiesToSave);const siteItemsToSave=[],pendingSavedRecords=[];entitiesToSave.forEach((({kind,name,key,property})=>{"root"===kind&&"site"===name?siteItemsToSave.push(property):(PUBLISH_ON_SAVE_ENTITIES.some((typeToPublish=>typeToPublish.kind===kind&&typeToPublish.name===name))&&registry.dispatch(core_data_build_module.M_).editEntityRecord(kind,name,key,{status:"publish"}),pendingSavedRecords.push(registry.dispatch(core_data_build_module.M_).saveEditedEntityRecord(kind,name,key)))})),siteItemsToSave.length&&pendingSavedRecords.push(registry.dispatch(core_data_build_module.M_).__experimentalSaveSpecifiedEntityEdits("root","site",void 0,siteItemsToSave)),registry.dispatch(build_module.M_).__unstableMarkLastChangeAsPersistent(),Promise.all(pendingSavedRecords).then((values=>onSave?onSave(values):values)).then((values=>{values.some((value=>void 0===value))?registry.dispatch(notices_build_module.M).createErrorNotice((0,i18n_build_module.__)("Saving failed.")):registry.dispatch(notices_build_module.M).createSuccessNotice((0,i18n_build_module.__)("Site updated."),{type:"snackbar",id:"site-editor-save-success",actions:[{label:(0,i18n_build_module.__)("View site"),url:homeUrl}]})})).catch((error=>registry.dispatch(notices_build_module.M).createErrorNotice(`${(0,i18n_build_module.__)("Saving failed.")} ${error}`)))},private_actions_revertTemplate=(template,{allowUndo=!0}={})=>async({registry})=>{const noticeId="edit-site-template-reverted";if(registry.dispatch(notices_build_module.M).removeNotice(noticeId),function isTemplateRevertable(templateOrTemplatePart){return!!templateOrTemplatePart&&templateOrTemplatePart.source===constants_TEMPLATE_ORIGINS.custom&&(Boolean(templateOrTemplatePart?.plugin)||templateOrTemplatePart?.has_theme_file)}(template))try{const templateEntityConfig=registry.select(core_data_build_module.M_).getEntityConfig("postType",template.type);if(!templateEntityConfig)return void registry.dispatch(notices_build_module.M).createErrorNotice((0,i18n_build_module.__)("The editor has encountered an unexpected error. Please reload."),{type:"snackbar"});const fileTemplatePath=(0,add_query_args.F)(`${templateEntityConfig.baseURL}/${template.id}`,{context:"edit",source:template.origin}),fileTemplate=await(0,api_fetch_build_module.A)({path:fileTemplatePath});if(!fileTemplate)return void registry.dispatch(notices_build_module.M).createErrorNotice((0,i18n_build_module.__)("The editor has encountered an unexpected error. Please reload."),{type:"snackbar"});const serializeBlocks=({blocks:blocksForSerialization=[]})=>(0,blocks_build_module.RM)(blocksForSerialization),edited=registry.select(core_data_build_module.M_).getEditedEntityRecord("postType",template.type,template.id);registry.dispatch(core_data_build_module.M_).editEntityRecord("postType",template.type,template.id,{content:serializeBlocks,blocks:edited.blocks,source:"custom"},{undoIgnore:!0});const blocks=(0,blocks_build_module.qg)(fileTemplate?.content?.raw);if(registry.dispatch(core_data_build_module.M_).editEntityRecord("postType",template.type,fileTemplate.id,{content:serializeBlocks,blocks,source:"theme"}),allowUndo){const undoRevert=()=>{registry.dispatch(core_data_build_module.M_).editEntityRecord("postType",template.type,edited.id,{content:serializeBlocks,blocks:edited.blocks,source:"custom"})};registry.dispatch(notices_build_module.M).createSuccessNotice((0,i18n_build_module.__)("Template reset."),{type:"snackbar",id:noticeId,actions:[{label:(0,i18n_build_module.__)("Undo"),onClick:undoRevert}]})}}catch(error){const errorMessage=error.message&&"unknown_error"!==error.code?error.message:(0,i18n_build_module.__)("Template revert failed. Please reload.");registry.dispatch(notices_build_module.M).createErrorNotice(errorMessage,{type:"snackbar"})}else registry.dispatch(notices_build_module.M).createErrorNotice((0,i18n_build_module.__)("This template is not revertable."),{type:"snackbar"})},removeTemplates=items=>async({registry})=>{const isResetting=items.every((item=>item?.has_theme_file)),promiseResult=await Promise.allSettled(items.map((item=>registry.dispatch(core_data_build_module.M_).deleteEntityRecord("postType",item.type,item.id,{force:!0},{throwOnError:!0}))));if(promiseResult.every((({status})=>"fulfilled"===status))){let successMessage;if(1===items.length){let title;"string"==typeof items[0].title?title=items[0].title:"string"==typeof items[0].title?.rendered?title=items[0].title?.rendered:"string"==typeof items[0].title?.raw&&(title=items[0].title?.raw),successMessage=isResetting?(0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" reset.'),(0,html_entities_build_module.S)(title)):(0,i18n_build_module.nv)((0,i18n_build_module.__)('"%s" deleted.'),(0,html_entities_build_module.S)(title))}else successMessage=isResetting?(0,i18n_build_module.__)("Items reset."):(0,i18n_build_module.__)("Items deleted.");registry.dispatch(notices_build_module.M).createSuccessNotice(successMessage,{type:"snackbar",id:"editor-template-deleted-success"})}else{let errorMessage;if(1===promiseResult.length)errorMessage=promiseResult[0].reason?.message?promiseResult[0].reason.message:isResetting?(0,i18n_build_module.__)("An error occurred while reverting the item."):(0,i18n_build_module.__)("An error occurred while deleting the item.");else{const errorMessages=new Set,failedPromises=promiseResult.filter((({status})=>"rejected"===status));for(const failedPromise of failedPromises)failedPromise.reason?.message&&errorMessages.add(failedPromise.reason.message);errorMessage=0===errorMessages.size?(0,i18n_build_module.__)("An error occurred while deleting the items."):1===errorMessages.size?isResetting?(0,i18n_build_module.nv)((0,i18n_build_module.__)("An error occurred while reverting the items: %s"),[...errorMessages][0]):(0,i18n_build_module.nv)((0,i18n_build_module.__)("An error occurred while deleting the items: %s"),[...errorMessages][0]):isResetting?(0,i18n_build_module.nv)((0,i18n_build_module.__)("Some errors occurred while reverting the items: %s"),[...errorMessages].join(",")):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Some errors occurred while deleting the items: %s"),[...errorMessages].join(","))}registry.dispatch(notices_build_module.M).createErrorNotice(errorMessage,{type:"snackbar"})}};var fast_deep_equal=__webpack_require__("./node_modules/fast-deep-equal/index.js"),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),symbol=__webpack_require__("./packages/icons/build-module/library/symbol.js"),navigation=__webpack_require__("./packages/icons/build-module/library/navigation.js"),page=__webpack_require__("./packages/icons/build-module/library/page.js"),verse=__webpack_require__("./packages/icons/build-module/library/verse.js");const EMPTY_ARRAY=[];const EMPTY_INSERTION_POINT={rootClientId:void 0,insertionIndex:void 0,filterValue:void 0},getInserter=(0,factory.N)((select=>(0,rememo.A)((state=>{if("object"==typeof state.blockInserterPanel)return state.blockInserterPanel;if("template-locked"===getRenderingMode(state)){const[postContentClientId]=select(build_module.M_).getBlocksByName("core/post-content");if(postContentClientId)return{rootClientId:postContentClientId,insertionIndex:void 0,filterValue:void 0}}return EMPTY_INSERTION_POINT}),(state=>{const[postContentClientId]=select(build_module.M_).getBlocksByName("core/post-content");return[state.blockInserterPanel,getRenderingMode(state),postContentClientId]}))));function getListViewToggleRef(state){return state.listViewToggleRef}function getInserterSidebarToggleRef(state){return state.inserterSidebarToggleRef}const CARD_ICONS={wp_block:symbol.A,wp_navigation:navigation.A,page:page.A,post:verse.A},getPostIcon=(0,factory.N)((select=>(state,postType,options)=>{{if("wp_template_part"===postType||"wp_template"===postType)return __experimentalGetDefaultTemplatePartAreas(state).find((item=>options.area===item.area))?.icon||layout.A;if(CARD_ICONS[postType])return CARD_ICONS[postType];const postTypeEntity=select(core_data_build_module.M_).getPostType(postType);return"string"==typeof postTypeEntity?.icon&&postTypeEntity.icon.startsWith("dashicons-")?postTypeEntity.icon.slice(10):page.A}})),hasPostMetaChanges=(0,factory.N)((select=>(state,postType,postId)=>{const{type:currentPostType,id:currentPostId}=getCurrentPost(state),edits=select(core_data_build_module.M_).getEntityRecordNonTransientEdits("postType",postType||currentPostType,postId||currentPostId);if(!edits?.meta)return!1;const originalPostMeta=select(core_data_build_module.M_).getEntityRecord("postType",postType||currentPostType,postId||currentPostId)?.meta;return!fast_deep_equal_default()({...originalPostMeta,footnotes:void 0},{...edits.meta,footnotes:void 0})}));function private_selectors_getEntityActions(state,...args){return function getEntityActions(state,kind,name){var _state$actions$kind$n;return null!==(_state$actions$kind$n=state.actions[kind]?.[name])&&void 0!==_state$actions$kind$n?_state$actions$kind$n:EMPTY_ARRAY}(state.dataviews,...args)}function private_selectors_isEntityReady(state,...args){return function isEntityReady(state,kind,name){return state.isReady[kind]?.[name]}(state.dataviews,...args)}const getPostBlocksByName=(0,factory.N)((select=>(0,rememo.A)(((state,blockNames)=>{blockNames=Array.isArray(blockNames)?blockNames:[blockNames];const{getBlocksByName,getBlockParents,getBlockName}=select(build_module.M_);return getBlocksByName(blockNames).filter((clientId=>getBlockParents(clientId).every((parentClientId=>{const parentBlockName=getBlockName(parentClientId);return"core/query"!==parentBlockName&&!blockNames.includes(parentBlockName)}))))}),(()=>[select(build_module.M_).getBlocks()])))),storeConfig={reducer:store_reducer,selectors:selectors_namespaceObject,actions:actions_namespaceObject},store_store=(0,redux_store.A)("core/editor",{...storeConfig});(0,data_build_module.kz)(store_store),lock_unlock_unlock(store_store).registerPrivateActions(store_private_actions_namespaceObject),lock_unlock_unlock(store_store).registerPrivateSelectors(store_private_selectors_namespaceObject);function getUserLabel(user){const avatar=user.avatar_urls&&user.avatar_urls[24]?(0,jsx_runtime.jsx)("img",{className:"editor-autocompleters__user-avatar",alt:"",src:user.avatar_urls[24]}):(0,jsx_runtime.jsx)("span",{className:"editor-autocompleters__no-avatar"});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[avatar,(0,jsx_runtime.jsx)("span",{className:"editor-autocompleters__user-name",children:user.name}),(0,jsx_runtime.jsx)("span",{className:"editor-autocompleters__user-slug",children:user.slug})]})}(0,hooks_build_module.U2)("blocks.registerBlockType","core/editor/custom-sources-backwards-compatibility/shim-attribute-source",(function shimAttributeSource(settings){var _settings$attributes;const metaAttributes=Object.fromEntries(Object.entries(null!==(_settings$attributes=settings.attributes)&&void 0!==_settings$attributes?_settings$attributes:{}).filter((([,{source}])=>"meta"===source)).map((([attributeKey,{meta}])=>[attributeKey,meta])));return Object.entries(metaAttributes).length&&(settings.edit=(metaAttributes=>(0,create_higher_order_component.f)((BlockEdit=>({attributes,setAttributes,...props})=>{const postType=(0,use_select.A)((select=>select(store_store).getCurrentPostType()),[]),[meta,setMeta]=(0,core_data_build_module.S$)("postType",postType,"meta"),mergedAttributes=(0,react.useMemo)((()=>({...attributes,...Object.fromEntries(Object.entries(metaAttributes).map((([attributeKey,metaKey])=>[attributeKey,meta[metaKey]])))})),[attributes,meta]);return(0,jsx_runtime.jsx)(BlockEdit,{attributes:mergedAttributes,setAttributes:nextAttributes=>{const nextMeta=Object.fromEntries(Object.entries(null!=nextAttributes?nextAttributes:{}).filter((([key])=>key in metaAttributes)).map((([attributeKey,value])=>[metaAttributes[attributeKey],value])));Object.entries(nextMeta).length&&setMeta(nextMeta),setAttributes(nextAttributes)},...props})}),"withMetaAttributeSource"))(metaAttributes)(settings.edit)),settings}));const user={name:"users",className:"editor-autocompleters__user",triggerPrefix:"@",useItems(filterValue){const users=(0,use_select.A)((select=>{const{getUsers}=select(core_data_build_module.M_);return getUsers({context:"view",search:encodeURIComponent(filterValue)})}),[filterValue]),options=(0,react.useMemo)((()=>users?users.map((user=>({key:`user-${user.slug}`,value:user,label:getUserLabel(user)}))):[]),[users]);return[options]},getOptionCompletion:user=>`@${user.slug}`};(0,hooks_build_module.U2)("editor.Autocomplete.completers","editor/autocompleters/set-default-completers",(function setDefaultCompleters(completers=[]){return completers.push({...user}),completers}));const DEFAULT_EMPTY_GALLERY=[],getFeaturedImageMediaFrame=()=>{const{wp}=window;return wp.media.view.MediaFrame.Select.extend({featuredImageToolbar(toolbar){this.createSelectToolbar(toolbar,{text:wp.media.view.l10n.setFeaturedImage,state:this.options.state})},editState(){const selection=this.state("featured-image").get("selection"),view=new wp.media.view.EditImage({model:selection.single(),controller:this}).render();this.content.set(view),view.loadEditor()},createStates:function createStates(){this.on("toolbar:create:featured-image",this.featuredImageToolbar,this),this.on("content:render:edit-image",this.editState,this),this.states.add([new wp.media.controller.FeaturedImage,new wp.media.controller.EditImage({model:this.options.editImage})])}})},getGalleryDetailsMediaFrame=()=>{const{wp}=window;return wp.media.view.MediaFrame.Post.extend({galleryToolbar(){const editing=this.state().get("editing");this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{insert:{style:"primary",text:editing?wp.media.view.l10n.updateGallery:wp.media.view.l10n.insertGallery,priority:80,requires:{library:!0},click(){const controller=this.controller,state=controller.state();controller.close(),state.trigger("update",state.get("library")),controller.setState(controller.options.state),controller.reset()}}}}))},editState(){const selection=this.state("gallery").get("selection"),view=new wp.media.view.EditImage({model:selection.single(),controller:this}).render();this.content.set(view),view.loadEditor()},createStates:function createStates(){this.on("toolbar:create:main-gallery",this.galleryToolbar,this),this.on("content:render:edit-image",this.editState,this),this.states.add([new wp.media.controller.Library({id:"gallery",title:wp.media.view.l10n.createGalleryTitle,priority:40,toolbar:"main-gallery",filterable:"uploaded",multiple:"add",editable:!1,library:wp.media.query({type:"image",...this.options.library})}),new wp.media.controller.EditImage({model:this.options.editImage}),new wp.media.controller.GalleryEdit({library:this.options.selection,editing:this.options.editing,menu:"gallery",displaySettings:!1,multiple:!0}),new wp.media.controller.GalleryAdd])}})},slimImageObject=img=>["sizes","mime","type","subtype","id","url","alt","link","caption"].reduce(((result,key)=>(img?.hasOwnProperty(key)&&(result[key]=img[key]),result)),{}),getAttachmentsCollection=ids=>{const{wp}=window;return wp.media.query({order:"ASC",orderby:"post__in",post__in:ids,posts_per_page:-1,query:!0,type:"image"})};class MediaUpload extends react.Component{constructor(){super(...arguments),this.openModal=this.openModal.bind(this),this.onOpen=this.onOpen.bind(this),this.onSelect=this.onSelect.bind(this),this.onUpdate=this.onUpdate.bind(this),this.onClose=this.onClose.bind(this)}initializeListeners(){this.frame.on("select",this.onSelect),this.frame.on("update",this.onUpdate),this.frame.on("open",this.onOpen),this.frame.on("close",this.onClose)}buildAndSetGalleryFrame(){const{addToGallery=!1,allowedTypes,multiple=!1,value=DEFAULT_EMPTY_GALLERY}=this.props;if(value===this.lastGalleryValue)return;const{wp}=window;let currentState;this.lastGalleryValue=value,this.frame&&this.frame.remove(),currentState=addToGallery?"gallery-library":value&&value.length?"gallery-edit":"gallery",this.GalleryDetailsMediaFrame||(this.GalleryDetailsMediaFrame=getGalleryDetailsMediaFrame());const attachments=getAttachmentsCollection(value),selection=new wp.media.model.Selection(attachments.models,{props:attachments.props.toJSON(),multiple});this.frame=new this.GalleryDetailsMediaFrame({mimeType:allowedTypes,state:currentState,multiple,selection,editing:!(!value||!value.length)}),wp.media.frame=this.frame,this.initializeListeners()}buildAndSetFeatureImageFrame(){const{wp}=window,{value:featuredImageId,multiple,allowedTypes}=this.props,featuredImageFrame=getFeaturedImageMediaFrame(),attachments=getAttachmentsCollection(featuredImageId),selection=new wp.media.model.Selection(attachments.models,{props:attachments.props.toJSON()});this.frame=new featuredImageFrame({mimeType:allowedTypes,state:"featured-image",multiple,selection,editing:featuredImageId}),wp.media.frame=this.frame,wp.media.view.settings.post={...wp.media.view.settings.post,featuredImageId:featuredImageId||-1}}componentWillUnmount(){this.frame?.remove()}onUpdate(selections){const{onSelect,multiple=!1}=this.props,state=this.frame.state(),selectedImages=selections||state.get("selection");selectedImages&&selectedImages.models.length&&onSelect(multiple?selectedImages.models.map((model=>slimImageObject(model.toJSON()))):slimImageObject(selectedImages.models[0].toJSON()))}onSelect(){const{onSelect,multiple=!1}=this.props,attachment=this.frame.state().get("selection").toJSON();onSelect(multiple?attachment:attachment[0])}onOpen(){const{wp}=window,{value}=this.props;this.updateCollection(),this.props.mode&&this.frame.content.mode(this.props.mode);if(!(Array.isArray(value)?!!value?.length:!!value))return;const isGallery=this.props.gallery,selection=this.frame.state().get("selection"),valueArray=Array.isArray(value)?value:[value];isGallery||valueArray.forEach((id=>{selection.add(wp.media.attachment(id))}));const attachments=getAttachmentsCollection(valueArray);attachments.more().done((function(){isGallery&&attachments?.models?.length&&selection.add(attachments.models)}))}onClose(){const{onClose}=this.props;onClose&&onClose(),this.frame.detach()}updateCollection(){const frameContent=this.frame.content.get();if(frameContent&&frameContent.collection){const collection=frameContent.collection;collection.toArray().forEach((model=>model.trigger("destroy",model))),collection.mirroring._hasMore=!0,collection.more()}}openModal(){const{allowedTypes,gallery=!1,unstableFeaturedImageFlow=!1,modalClass,multiple=!1,title=(0,i18n_build_module.__)("Select or Upload Media")}=this.props,{wp}=window;if(gallery)this.buildAndSetGalleryFrame();else{const frameConfig={title,multiple};allowedTypes&&(frameConfig.library={type:allowedTypes}),this.frame=wp.media(frameConfig)}modalClass&&this.frame.$el.addClass(modalClass),unstableFeaturedImageFlow&&this.buildAndSetFeatureImageFrame(),this.initializeListeners(),this.frame.open()}render(){return this.props.render({open:this.openModal})}}MediaUpload.displayName="MediaUpload";const media_upload=MediaUpload;function flattenFormData(formData,key,data){if(function isPlainObject(data){return null!==data&&"object"==typeof data&&Object.getPrototypeOf(data)===Object.prototype}(data))for(const[name,value]of Object.entries(data))flattenFormData(formData,`${key}[${name}]`,value);else void 0!==data&&formData.append(key,String(data))}class UploadError extends Error{constructor({code,message,file,cause}){super(message,{cause}),Object.setPrototypeOf(this,new.target.prototype),this.code=code,this.file=file}}function validateMimeType(file,allowedTypes){if(!allowedTypes)return;const isAllowedType=allowedTypes.some((allowedType=>allowedType.includes("/")?allowedType===file.type:file.type.startsWith(`${allowedType}/`)));if(file.type&&!isAllowedType)throw new UploadError({code:"MIME_TYPE_NOT_SUPPORTED",message:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s: Sorry, this file type is not supported here."),file.name),file})}function validateMimeTypeForUser(file,wpAllowedMimeTypes){const allowedMimeTypesForUser=function getMimeTypesArray(wpMimeTypesObject){return wpMimeTypesObject?Object.entries(wpMimeTypesObject).flatMap((([extensionsString,mime])=>{const[type]=mime.split("/");return[mime,...extensionsString.split("|").map((extension=>`${type}/${extension}`))]})):null}(wpAllowedMimeTypes);if(!allowedMimeTypesForUser)return;const isAllowedMimeTypeForUser=allowedMimeTypesForUser.includes(file.type);if(file.type&&!isAllowedMimeTypeForUser)throw new UploadError({code:"MIME_TYPE_NOT_ALLOWED_FOR_USER",message:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s: Sorry, you are not allowed to upload this file type."),file.name),file})}function validateFileSize(file,maxUploadFileSize){if(file.size<=0)throw new UploadError({code:"EMPTY_FILE",message:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s: This file is empty."),file.name),file});if(maxUploadFileSize&&file.size>maxUploadFileSize)throw new UploadError({code:"SIZE_ABOVE_LIMIT",message:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s: This file exceeds the maximum upload size for this site."),file.name),file})}function uploadMedia({wpAllowedMimeTypes,allowedTypes,additionalData={},filesList,maxUploadFileSize,onError,onFileChange,signal}){const validFiles=[],filesSet=[],setAndUpdateFiles=(index,value)=>{filesSet[index]?.url&&(0,blob_build_module.hK)(filesSet[index].url),filesSet[index]=value,onFileChange?.(filesSet.filter((attachment=>null!==attachment)))};for(const mediaFile of filesList){try{validateMimeTypeForUser(mediaFile,wpAllowedMimeTypes)}catch(error){onError?.(error);continue}try{validateMimeType(mediaFile,allowedTypes)}catch(error){onError?.(error);continue}try{validateFileSize(mediaFile,maxUploadFileSize)}catch(error){onError?.(error);continue}validFiles.push(mediaFile),filesSet.push({url:(0,blob_build_module.bW)(mediaFile)}),onFileChange?.(filesSet)}validFiles.map((async(file,index)=>{try{const attachment=await async function uploadToServer(file,additionalData={},signal){const data=new FormData;data.append("file",file,file.name||file.type.replace("/","."));for(const[key,value]of Object.entries(additionalData))flattenFormData(data,key,value);return function transformAttachment(attachment){var _attachment$caption$r;const{alt_text,source_url,...savedMediaProps}=attachment;return{...savedMediaProps,alt:attachment.alt_text,caption:null!==(_attachment$caption$r=attachment.caption?.raw)&&void 0!==_attachment$caption$r?_attachment$caption$r:"",title:attachment.title.raw,url:attachment.source_url,poster:attachment._embedded?.["wp:featuredmedia"]?.[0]?.source_url||void 0}}(await(0,api_fetch_build_module.A)({path:"/wp/v2/media?_embed=wp:featuredmedia",body:data,method:"POST",signal}))}(file,additionalData,signal);setAndUpdateFiles(index,attachment)}catch(error){let message;setAndUpdateFiles(index,null),message=error instanceof Error?error.message:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Error while uploading file %s to the media library."),file.name),onError?.(new UploadError({code:"GENERAL",message,file,cause:error instanceof Error?error:void 0}))}}))}(0,hooks_build_module.U2)("editor.MediaUpload","core/editor/components/media-upload",(()=>media_upload));const{PatternOverridesControls,ResetOverridesControl,PatternOverridesBlockControls,PATTERN_TYPES:pattern_overrides_PATTERN_TYPES,PARTIAL_SYNCING_SUPPORTED_BLOCKS,PATTERN_SYNC_TYPES}=lock_unlock_unlock(patterns_build_module.j),withPatternOverrideControls=(0,create_higher_order_component.f)((BlockEdit=>props=>{const isSupportedBlock=!!PARTIAL_SYNCING_SUPPORTED_BLOCKS[props.name];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(BlockEdit,{...props},"edit"),props.isSelected&&isSupportedBlock&&(0,jsx_runtime.jsx)(ControlsWithStoreSubscription,{...props}),isSupportedBlock&&(0,jsx_runtime.jsx)(PatternOverridesBlockControls,{})]})}),"withPatternOverrideControls");function ControlsWithStoreSubscription(props){const blockEditingMode=(0,build_module.wp)(),{hasPatternOverridesSource,isEditingSyncedPattern}=(0,use_select.A)((select=>{const{getCurrentPostType,getEditedPostAttribute}=select(store_store);return{hasPatternOverridesSource:!!(0,blocks_build_module.Xm)("core/pattern-overrides"),isEditingSyncedPattern:getCurrentPostType()===pattern_overrides_PATTERN_TYPES.user&&getEditedPostAttribute("meta")?.wp_pattern_sync_status!==PATTERN_SYNC_TYPES.unsynced&&getEditedPostAttribute("wp_pattern_sync_status")!==PATTERN_SYNC_TYPES.unsynced}}),[]),bindings=props.attributes.metadata?.bindings,hasPatternBindings=!!bindings&&Object.values(bindings).some((binding=>"core/pattern-overrides"===binding.source)),shouldShowPatternOverridesControls=isEditingSyncedPattern&&"default"===blockEditingMode,shouldShowResetOverridesControl=!isEditingSyncedPattern&&!!props.attributes.metadata?.name&&"disabled"!==blockEditingMode&&hasPatternBindings;return hasPatternOverridesSource?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[shouldShowPatternOverridesControls&&(0,jsx_runtime.jsx)(PatternOverridesControls,{...props}),shouldShowResetOverridesControl&&(0,jsx_runtime.jsx)(ResetOverridesControl,{...props})]}):null}(0,hooks_build_module.U2)("editor.BlockEdit","core/editor/with-pattern-override-controls",withPatternOverrideControls);var clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),slot_fill=__webpack_require__("./packages/components/build-module/slot-fill/index.js"),AnimatePresence=__webpack_require__("./node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs"),motion=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion.mjs"),panel=__webpack_require__("./packages/components/build-module/panel/index.js"),star_filled=__webpack_require__("./packages/icons/build-module/library/star-filled.js"),star_empty=__webpack_require__("./packages/icons/build-module/library/star-empty.js"),debounce=__webpack_require__("./packages/compose/build-module/utils/debounce/index.js");const build_module_store_reducer=function reducer_reducer(state={},action){return"SET_IS_MATCHING"===action.type?action.values:state};function setIsMatching(values){return{type:"SET_IS_MATCHING",values}}function isViewportMatch(state,query){return-1===query.indexOf(" ")&&(query=">= "+query),!!state[query]}const build_module_store_store=(0,redux_store.A)("core/viewport",{reducer:build_module_store_reducer,actions:store_actions_namespaceObject,selectors:store_selectors_namespaceObject});(0,data_build_module.kz)(build_module_store_store);const listener=(breakpoints,operators)=>{const setIsMatching=(0,debounce.s)((()=>{const values=Object.fromEntries(queries.map((([key,query])=>[key,query.matches])));(0,build_module_dispatch.J)(build_module_store_store).setIsMatching(values)}),0,{leading:!0}),operatorEntries=Object.entries(operators),queries=Object.entries(breakpoints).flatMap((([name,width])=>operatorEntries.map((([operator,condition])=>{const list=window.matchMedia(`(${condition}: ${width}px)`);return list.addEventListener("change",setIsMatching),[`${operator} ${name}`,list]}))));window.addEventListener("orientationchange",setIsMatching),setIsMatching(),setIsMatching.flush()};listener({huge:1440,wide:1280,large:960,medium:782,small:600,mobile:480},{"<":"max-width",">=":"min-width"});var use_reduced_motion=__webpack_require__("./packages/compose/build-module/hooks/use-reduced-motion/index.js"),use_viewport_match=__webpack_require__("./packages/compose/build-module/hooks/use-viewport-match/index.js"),use_previous=__webpack_require__("./packages/compose/build-module/hooks/use-previous/index.js"),dist=__webpack_require__("./node_modules/memize/dist/index.js");const Context=(0,react.createContext)({name:null,icon:null});Context.Provider;function usePluginContext(){return(0,react.useContext)(Context)}class plugin_error_boundary_PluginErrorBoundary extends react.Component{constructor(props){super(props),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(error){const{name,onError}=this.props;onError&&onError(name,error)}render(){return this.state.hasError?null:this.props.children}}plugin_error_boundary_PluginErrorBoundary.displayName="PluginErrorBoundary";(0,dist.A)(((icon,name)=>({icon,name})));function normalizeComplementaryAreaScope(scope){return["core/edit-post","core/edit-site"].includes(scope)?((0,deprecated_build_module.A)(`${scope} interface scope`,{alternative:"core interface scope",hint:"core/edit-post and core/edit-site are merging.",version:"6.6"}),"core"):scope}function normalizeComplementaryAreaName(scope,name){return"core"===scope&&"edit-site/template"===name?((0,deprecated_build_module.A)("edit-site/template sidebar",{alternative:"edit-post/document",version:"6.6"}),"edit-post/document"):"core"===scope&&"edit-site/block-inspector"===name?((0,deprecated_build_module.A)("edit-site/block-inspector sidebar",{alternative:"edit-post/block",version:"6.6"}),"edit-post/block"):name}const setDefaultComplementaryArea=(scope,area)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:scope=normalizeComplementaryAreaScope(scope),area:area=normalizeComplementaryAreaName(scope,area)}),enableComplementaryArea=(scope,area)=>({registry,dispatch})=>{if(!area)return;scope=normalizeComplementaryAreaScope(scope),area=normalizeComplementaryAreaName(scope,area);registry.select(store.M).get(scope,"isComplementaryAreaVisible")||registry.dispatch(store.M).set(scope,"isComplementaryAreaVisible",!0),dispatch({type:"ENABLE_COMPLEMENTARY_AREA",scope,area})},disableComplementaryArea=scope=>({registry})=>{scope=normalizeComplementaryAreaScope(scope);registry.select(store.M).get(scope,"isComplementaryAreaVisible")&&registry.dispatch(store.M).set(scope,"isComplementaryAreaVisible",!1)},pinItem=(scope,item)=>({registry})=>{if(!item)return;scope=normalizeComplementaryAreaScope(scope),item=normalizeComplementaryAreaName(scope,item);const pinnedItems=registry.select(store.M).get(scope,"pinnedItems");!0!==pinnedItems?.[item]&&registry.dispatch(store.M).set(scope,"pinnedItems",{...pinnedItems,[item]:!0})},unpinItem=(scope,item)=>({registry})=>{if(!item)return;scope=normalizeComplementaryAreaScope(scope),item=normalizeComplementaryAreaName(scope,item);const pinnedItems=registry.select(store.M).get(scope,"pinnedItems");registry.dispatch(store.M).set(scope,"pinnedItems",{...pinnedItems,[item]:!1})};function toggleFeature(scope,featureName){return function({registry}){(0,deprecated_build_module.A)("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),registry.dispatch(store.M).toggle(scope,featureName)}}function setFeatureValue(scope,featureName,value){return function({registry}){(0,deprecated_build_module.A)("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),registry.dispatch(store.M).set(scope,featureName,!!value)}}function setFeatureDefaults(scope,defaults){return function({registry}){(0,deprecated_build_module.A)("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),registry.dispatch(store.M).setDefaults(scope,defaults)}}function openModal(name){return{type:"OPEN_MODAL",name}}function closeModal(){return{type:"CLOSE_MODAL"}}const getActiveComplementaryArea=(0,factory.N)((select=>(state,scope)=>{scope=normalizeComplementaryAreaScope(scope);const isComplementaryAreaVisible=select(store.M).get(scope,"isComplementaryAreaVisible");if(void 0!==isComplementaryAreaVisible)return!1===isComplementaryAreaVisible?null:state?.complementaryAreas?.[scope]})),isComplementaryAreaLoading=(0,factory.N)((select=>(state,scope)=>{scope=normalizeComplementaryAreaScope(scope);const isVisible=select(store.M).get(scope,"isComplementaryAreaVisible"),identifier=state?.complementaryAreas?.[scope];return isVisible&&void 0===identifier})),isItemPinned=(0,factory.N)((select=>(state,scope,item)=>{var _pinnedItems$item;item=normalizeComplementaryAreaName(scope=normalizeComplementaryAreaScope(scope),item);const pinnedItems=select(store.M).get(scope,"pinnedItems");return null===(_pinnedItems$item=pinnedItems?.[item])||void 0===_pinnedItems$item||_pinnedItems$item})),isFeatureActive=(0,factory.N)((select=>(state,scope,featureName)=>((0,deprecated_build_module.A)("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!select(store.M).get(scope,featureName))));function isModalActive(state,modalName){return state.activeModal===modalName}const interface_build_module_store_reducer=(0,data_build_module.HY)({complementaryAreas:function complementaryAreas(state={},action){switch(action.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope,area}=action;return state[scope]?state:{...state,[scope]:area}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope,area}=action;return{...state,[scope]:area}}}return state},activeModal:function activeModal(state=null,action){switch(action.type){case"OPEN_MODAL":return action.name;case"CLOSE_MODAL":return null}return state}}),interface_build_module_store_store=(0,redux_store.A)("core/interface",{reducer:interface_build_module_store_reducer,actions:build_module_store_actions_namespaceObject,selectors:build_module_store_selectors_namespaceObject});function ComplementaryAreaToggle({as=build_module_button.Ay,scope,identifier:identifierProp,icon:iconProp,selectedIcon,name,shortcut,...props}){const ComponentToUse=as,context=usePluginContext(),icon=iconProp||context.icon,identifier=identifierProp||`${context.name}/${name}`,isSelected=(0,use_select.A)((select=>select(interface_build_module_store_store).getActiveComplementaryArea(scope)===identifier),[identifier,scope]),{enableComplementaryArea,disableComplementaryArea}=(0,use_dispatch.A)(interface_build_module_store_store);return(0,jsx_runtime.jsx)(ComponentToUse,{icon:selectedIcon&&isSelected?selectedIcon:icon,"aria-controls":identifier.replace("/",":"),"aria-checked":(role=props.role,["checkbox","option","radio","switch","menuitemcheckbox","menuitemradio","treeitem"].includes(role)?isSelected:void 0),onClick:()=>{isSelected?disableComplementaryArea(scope):enableComplementaryArea(scope,identifier)},shortcut,...props});var role}(0,data_build_module.kz)(interface_build_module_store_store);const complementary_area_header=({children,className,toggleButtonProps})=>{const toggleButton=(0,jsx_runtime.jsx)(ComplementaryAreaToggle,{icon:close_small.A,...toggleButtonProps});return(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("components-panel__header","interface-complementary-area-header",className),tabIndex:-1,children:[children,toggleButton]})};var menu_item=__webpack_require__("./packages/components/build-module/menu-item/index.js");const noop=()=>{};function ActionItem({name,as:Component=build_module_button.Ay,onClick,...props}){return(0,jsx_runtime.jsx)(slot_fill.SQ,{name,children:({onClick:fpOnClick})=>(0,jsx_runtime.jsx)(Component,{onClick:onClick||fpOnClick?(...args)=>{(onClick||noop)(...args),(fpOnClick||noop)(...args)}:void 0,...props})})}ActionItem.Slot=function ActionItemSlot({name,as:Component=button_group.A,fillProps={},bubblesVirtually,...props}){return(0,jsx_runtime.jsx)(slot_fill.DX,{name,bubblesVirtually,fillProps,children:fills=>{if(!react.Children.toArray(fills).length)return null;const initializedByPlugins=[];react.Children.forEach(fills,(({props:{__unstableExplicitMenuItem,__unstableTarget}})=>{__unstableTarget&&__unstableExplicitMenuItem&&initializedByPlugins.push(__unstableTarget)}));const children=react.Children.map(fills,(child=>!child.props.__unstableExplicitMenuItem&&initializedByPlugins.includes(child.props.__unstableTarget)?null:child));return(0,jsx_runtime.jsx)(Component,{...props,children})}})};const action_item=ActionItem,PluginsMenuItem=({__unstableExplicitMenuItem,__unstableTarget,...restProps})=>(0,jsx_runtime.jsx)(menu_item.A,{...restProps});function ComplementaryAreaMoreMenuItem({scope,target,__unstableExplicitMenuItem,...props}){return(0,jsx_runtime.jsx)(ComplementaryAreaToggle,{as:toggleProps=>(0,jsx_runtime.jsx)(action_item,{__unstableExplicitMenuItem,__unstableTarget:`${scope}/${target}`,as:PluginsMenuItem,name:`${scope}/plugin-more-menu`,...toggleProps}),role:"menuitemcheckbox",selectedIcon:check.A,name:target,scope,...props})}function PinnedItems({scope,...props}){return(0,jsx_runtime.jsx)(slot_fill.SQ,{name:`PinnedItems/${scope}`,...props})}PinnedItems.Slot=function PinnedItemsSlot({scope,className,...props}){return(0,jsx_runtime.jsx)(slot_fill.DX,{name:`PinnedItems/${scope}`,...props,children:fills=>fills?.length>0&&(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)(className,"interface-pinned-items"),children:fills})})};const pinned_items=PinnedItems,ANIMATION_DURATION=.3;const SIDEBAR_WIDTH=280,variants={open:{width:SIDEBAR_WIDTH},closed:{width:0},mobileOpen:{width:"100vw"}};function ComplementaryAreaFill({activeArea,isActive,scope,children,className,id}){const disableMotion=(0,use_reduced_motion.A)(),isMobileViewport=(0,use_viewport_match.A)("medium","<"),previousActiveArea=(0,use_previous.A)(activeArea),previousIsActive=(0,use_previous.A)(isActive),[,setState]=(0,react.useState)({});(0,react.useEffect)((()=>{setState({})}),[isActive]);const transition={type:"tween",duration:disableMotion||isMobileViewport||previousActiveArea&&activeArea&&activeArea!==previousActiveArea?0:ANIMATION_DURATION,ease:[.6,0,.4,1]};return(0,jsx_runtime.jsx)(slot_fill.SQ,{name:`ComplementaryArea/${scope}`,children:(0,jsx_runtime.jsx)(AnimatePresence.N,{initial:!1,children:(previousIsActive||isActive)&&(0,jsx_runtime.jsx)(motion.P.div,{variants,initial:"closed",animate:isMobileViewport?"mobileOpen":"open",exit:"closed",transition,className:"interface-complementary-area__fill",children:(0,jsx_runtime.jsx)("div",{id,className,style:{width:isMobileViewport?"100vw":SIDEBAR_WIDTH},children})})})})}function ComplementaryArea({children,className,closeLabel=(0,i18n_build_module.__)("Close plugin"),identifier:identifierProp,header,headerClassName,icon:iconProp,isPinnable=!0,panelClassName,scope,name,title,toggleShortcut,isActiveByDefault}){const context=usePluginContext(),icon=iconProp||context.icon,identifier=identifierProp||`${context.name}/${name}`,[isReady,setIsReady]=(0,react.useState)(!1),{isLoading,isActive,isPinned,activeArea,isSmall,isLarge,showIconLabels}=(0,use_select.A)((select=>{const{getActiveComplementaryArea,isComplementaryAreaLoading,isItemPinned}=select(interface_build_module_store_store),{get}=select(store.M),_activeArea=getActiveComplementaryArea(scope);return{isLoading:isComplementaryAreaLoading(scope),isActive:_activeArea===identifier,isPinned:isItemPinned(scope,identifier),activeArea:_activeArea,isSmall:select(build_module_store_store).isViewportMatch("< medium"),isLarge:select(build_module_store_store).isViewportMatch("large"),showIconLabels:get("core","showIconLabels")}}),[identifier,scope]),isMobileViewport=(0,use_viewport_match.A)("medium","<");!function useAdjustComplementaryListener(scope,identifier,activeArea,isActive,isSmall){const previousIsSmallRef=(0,react.useRef)(!1),shouldOpenWhenNotSmallRef=(0,react.useRef)(!1),{enableComplementaryArea,disableComplementaryArea}=(0,use_dispatch.A)(interface_build_module_store_store);(0,react.useEffect)((()=>{isActive&&isSmall&&!previousIsSmallRef.current?(disableComplementaryArea(scope),shouldOpenWhenNotSmallRef.current=!0):shouldOpenWhenNotSmallRef.current&&!isSmall&&previousIsSmallRef.current?(shouldOpenWhenNotSmallRef.current=!1,enableComplementaryArea(scope,identifier)):shouldOpenWhenNotSmallRef.current&&activeArea&&activeArea!==identifier&&(shouldOpenWhenNotSmallRef.current=!1),isSmall!==previousIsSmallRef.current&&(previousIsSmallRef.current=isSmall)}),[isActive,isSmall,scope,identifier,activeArea,disableComplementaryArea,enableComplementaryArea])}(scope,identifier,activeArea,isActive,isSmall);const{enableComplementaryArea,disableComplementaryArea,pinItem,unpinItem}=(0,use_dispatch.A)(interface_build_module_store_store);if((0,react.useEffect)((()=>{isActiveByDefault&&void 0===activeArea&&!isSmall?enableComplementaryArea(scope,identifier):void 0===activeArea&&isSmall&&disableComplementaryArea(scope,identifier),setIsReady(!0)}),[activeArea,isActiveByDefault,scope,identifier,isSmall,enableComplementaryArea,disableComplementaryArea]),isReady)return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isPinnable&&(0,jsx_runtime.jsx)(pinned_items,{scope,children:isPinned&&(0,jsx_runtime.jsx)(ComplementaryAreaToggle,{scope,identifier,isPressed:isActive&&(!showIconLabels||isLarge),"aria-expanded":isActive,"aria-disabled":isLoading,label:title,icon:showIconLabels?check.A:icon,showTooltip:!showIconLabels,variant:showIconLabels?"tertiary":void 0,size:"compact",shortcut:toggleShortcut})}),name&&isPinnable&&(0,jsx_runtime.jsx)(ComplementaryAreaMoreMenuItem,{target:name,scope,icon,children:title}),(0,jsx_runtime.jsxs)(ComplementaryAreaFill,{activeArea,isActive,className:(0,clsx.A)("interface-complementary-area",className),scope,id:identifier.replace("/",":"),children:[(0,jsx_runtime.jsx)(complementary_area_header,{className:headerClassName,closeLabel,onClose:()=>disableComplementaryArea(scope),toggleButtonProps:{label:closeLabel,size:"small",shortcut:toggleShortcut,scope,identifier},children:header||(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{className:"interface-complementary-area-header__title",children:title}),isPinnable&&!isMobileViewport&&(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"interface-complementary-area__pin-unpin-item",icon:isPinned?star_filled.A:star_empty.A,label:isPinned?(0,i18n_build_module.__)("Unpin from toolbar"):(0,i18n_build_module.__)("Pin to toolbar"),onClick:()=>(isPinned?unpinItem:pinItem)(scope,identifier),isPressed:isPinned,"aria-expanded":isPinned,size:"compact"})]})}),(0,jsx_runtime.jsx)(panel.A,{className:panelClassName,children})]})]})}ComplementaryArea.Slot=function ComplementaryAreaSlot({scope,...props}){return(0,jsx_runtime.jsx)(slot_fill.DX,{name:`ComplementaryArea/${scope}`,...props})};const complementary_area=ComplementaryArea,fullscreen_mode=({isActive})=>((0,react.useEffect)((()=>{let isSticky=!1;return document.body.classList.contains("sticky-menu")&&(isSticky=!0,document.body.classList.remove("sticky-menu")),()=>{isSticky&&document.body.classList.add("sticky-menu")}}),[]),(0,react.useEffect)((()=>(isActive?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{isActive&&document.body.classList.remove("is-fullscreen-mode")})),[isActive]),null);var use_resize_observer=__webpack_require__("./packages/compose/build-module/hooks/use-resize-observer/index.js");const NavigableRegion=(0,react.forwardRef)((({children,className,ariaLabel,as:Tag="div",...props},ref)=>(0,jsx_runtime.jsx)(Tag,{ref,className:(0,clsx.A)("interface-navigable-region",className),"aria-label":ariaLabel,role:"region",tabIndex:"-1",...props,children})));NavigableRegion.displayName="NavigableRegion";const navigable_region=NavigableRegion,commonTransition={type:"tween",duration:.25,ease:[.6,0,.4,1]};const headerVariants={hidden:{opacity:1,marginTop:-60},visible:{opacity:1,marginTop:0},distractionFreeHover:{opacity:1,marginTop:0,transition:{...commonTransition,delay:.2,delayChildren:.2}},distractionFreeHidden:{opacity:0,marginTop:-60},distractionFreeDisabled:{opacity:0,marginTop:0,transition:{...commonTransition,delay:.8,delayChildren:.8}}};const interface_skeleton=(0,react.forwardRef)((function InterfaceSkeleton({isDistractionFree,footer,header,editorNotices,sidebar,secondarySidebar,content,actions,labels,className},ref){const[secondarySidebarResizeListener,secondarySidebarSize]=(0,use_resize_observer.A)(),isMobileViewport=(0,use_viewport_match.A)("medium","<"),defaultTransition={type:"tween",duration:(0,use_reduced_motion.A)()?0:.25,ease:[.6,0,.4,1]};!function useHTMLClass(className){(0,react.useEffect)((()=>{const element=document&&document.querySelector(`html:not(.${className})`);if(element)return element.classList.toggle(className),()=>{element.classList.toggle(className)}}),[className])}("interface-interface-skeleton__html-container");const mergedLabels={...{header:(0,i18n_build_module._x)("Header","header landmark area"),body:(0,i18n_build_module.__)("Content"),secondarySidebar:(0,i18n_build_module.__)("Block Library"),sidebar:(0,i18n_build_module.__)("Settings"),actions:(0,i18n_build_module.__)("Publish"),footer:(0,i18n_build_module.__)("Footer")},...labels};return(0,jsx_runtime.jsxs)("div",{ref,className:(0,clsx.A)(className,"interface-interface-skeleton",!!footer&&"has-footer"),children:[(0,jsx_runtime.jsxs)("div",{className:"interface-interface-skeleton__editor",children:[(0,jsx_runtime.jsx)(AnimatePresence.N,{initial:!1,children:!!header&&(0,jsx_runtime.jsx)(navigable_region,{as:motion.P.div,className:"interface-interface-skeleton__header","aria-label":mergedLabels.header,initial:isDistractionFree&&!isMobileViewport?"distractionFreeHidden":"hidden",whileHover:isDistractionFree&&!isMobileViewport?"distractionFreeHover":"visible",animate:isDistractionFree&&!isMobileViewport?"distractionFreeDisabled":"visible",exit:isDistractionFree&&!isMobileViewport?"distractionFreeHidden":"hidden",variants:headerVariants,transition:defaultTransition,children:header})}),isDistractionFree&&(0,jsx_runtime.jsx)("div",{className:"interface-interface-skeleton__header",children:editorNotices}),(0,jsx_runtime.jsxs)("div",{className:"interface-interface-skeleton__body",children:[(0,jsx_runtime.jsx)(AnimatePresence.N,{initial:!1,children:!!secondarySidebar&&(0,jsx_runtime.jsx)(navigable_region,{className:"interface-interface-skeleton__secondary-sidebar",ariaLabel:mergedLabels.secondarySidebar,as:motion.P.div,initial:"closed",animate:"open",exit:"closed",variants:{open:{width:secondarySidebarSize.width},closed:{width:0}},transition:defaultTransition,children:(0,jsx_runtime.jsxs)(motion.P.div,{style:{position:"absolute",width:isMobileViewport?"100vw":"fit-content",height:"100%",left:0},variants:{open:{x:0},closed:{x:"-100%"}},transition:defaultTransition,children:[secondarySidebarResizeListener,secondarySidebar]})})}),(0,jsx_runtime.jsx)(navigable_region,{className:"interface-interface-skeleton__content",ariaLabel:mergedLabels.body,children:content}),!!sidebar&&(0,jsx_runtime.jsx)(navigable_region,{className:"interface-interface-skeleton__sidebar",ariaLabel:mergedLabels.sidebar,children:sidebar}),!!actions&&(0,jsx_runtime.jsx)(navigable_region,{className:"interface-interface-skeleton__actions",ariaLabel:mergedLabels.actions,children:actions})]})]}),!!footer&&(0,jsx_runtime.jsx)(navigable_region,{className:"interface-interface-skeleton__footer",ariaLabel:mergedLabels.footer,children:footer})]})}));var create_interpolate_element=__webpack_require__("./packages/element/build-module/create-interpolate-element.js"),use_dialog=__webpack_require__("./packages/compose/build-module/hooks/use-dialog/index.js"),row=__webpack_require__("./packages/components/build-module/panel/row.js"),body=__webpack_require__("./packages/components/build-module/panel/body.js"),checkbox_control=__webpack_require__("./packages/components/build-module/checkbox-control/index.js");function EntityRecordItem({record,checked,onChange}){const{name,kind,title,key}=record,{entityRecordTitle,hasPostMetaChanges}=(0,use_select.A)((select=>{if("postType"!==kind||"wp_template"!==name)return{entityRecordTitle:title,hasPostMetaChanges:lock_unlock_unlock(select(store_store)).hasPostMetaChanges(name,key)};const template=select(core_data_build_module.M_).getEditedEntityRecord(kind,name,key);return{entityRecordTitle:select(store_store).__experimentalGetTemplateInfo(template).title,hasPostMetaChanges:lock_unlock_unlock(select(store_store)).hasPostMetaChanges(name,key)}}),[name,kind,title,key]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(row.A,{children:(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,label:(0,html_entities_build_module.S)(entityRecordTitle)||(0,i18n_build_module.__)("Untitled"),checked,onChange})}),hasPostMetaChanges&&(0,jsx_runtime.jsx)("ul",{className:"entities-saved-states__changes",children:(0,jsx_runtime.jsx)("li",{children:(0,i18n_build_module.__)("Post Meta.")})})]})}const{getGlobalStylesChanges,GlobalStylesContext}=lock_unlock_unlock(build_module.jb);function GlobalStylesDescription({record}){const{user:currentEditorGlobalStyles}=(0,react.useContext)(GlobalStylesContext),savedRecord=(0,use_select.A)((select=>select(core_data_build_module.M_).getEntityRecord(record.kind,record.name,record.key)),[record.kind,record.name,record.key]),globalStylesChanges=getGlobalStylesChanges(currentEditorGlobalStyles,savedRecord,{maxResults:10});return globalStylesChanges.length?(0,jsx_runtime.jsx)("ul",{className:"entities-saved-states__changes",children:globalStylesChanges.map((change=>(0,jsx_runtime.jsx)("li",{children:change},change)))}):null}function EntityDescription({record,count}){if("globalStyles"===record?.name)return null;const description=function getEntityDescription(entity,count){switch(entity){case"site":return 1===count?(0,i18n_build_module.__)("This change will affect your whole site."):(0,i18n_build_module.__)("These changes will affect your whole site.");case"wp_template":return(0,i18n_build_module.__)("This change will affect pages and posts that use this template.");case"page":case"post":return(0,i18n_build_module.__)("The following has been modified.")}}(record?.name,count);return description?(0,jsx_runtime.jsx)(row.A,{children:description}):null}function EntityTypeList({list,unselectedEntities,setUnselectedEntities}){const count=list.length,firstRecord=list[0];let entityLabel=(0,use_select.A)((select=>select(core_data_build_module.M_).getEntityConfig(firstRecord.kind,firstRecord.name)),[firstRecord.kind,firstRecord.name]).label;return"wp_template_part"===firstRecord?.name&&(entityLabel=1===count?(0,i18n_build_module.__)("Template Part"):(0,i18n_build_module.__)("Template Parts")),(0,jsx_runtime.jsxs)(body.Ay,{title:entityLabel,initialOpen:!0,children:[(0,jsx_runtime.jsx)(EntityDescription,{record:firstRecord,count}),list.map((record=>(0,jsx_runtime.jsx)(EntityRecordItem,{record,checked:!unselectedEntities.some((elt=>elt.kind===record.kind&&elt.name===record.name&&elt.key===record.key&&elt.property===record.property)),onChange:value=>setUnselectedEntities(record,value)},record.key||record.property))),"globalStyles"===firstRecord?.name&&(0,jsx_runtime.jsx)(GlobalStylesDescription,{record:firstRecord})]})}const useIsDirty=()=>{const{editedEntities,siteEdits,siteEntityConfig}=(0,use_select.A)((select=>{const{__experimentalGetDirtyEntityRecords,getEntityRecordEdits,getEntityConfig}=select(core_data_build_module.M_);return{editedEntities:__experimentalGetDirtyEntityRecords(),siteEdits:getEntityRecordEdits("root","site"),siteEntityConfig:getEntityConfig("root","site")}}),[]),dirtyEntityRecords=(0,react.useMemo)((()=>{var _siteEntityConfig$met;const editedEntitiesWithoutSite=editedEntities.filter((record=>!("root"===record.kind&&"site"===record.name))),siteEntityLabels=null!==(_siteEntityConfig$met=siteEntityConfig?.meta?.labels)&&void 0!==_siteEntityConfig$met?_siteEntityConfig$met:{},editedSiteEntities=[];for(const property in siteEdits)editedSiteEntities.push({kind:"root",name:"site",title:siteEntityLabels[property]||property,property});return[...editedEntitiesWithoutSite,...editedSiteEntities]}),[editedEntities,siteEdits,siteEntityConfig]),[unselectedEntities,_setUnselectedEntities]=(0,react.useState)([]);return{dirtyEntityRecords,isDirty:dirtyEntityRecords.length-unselectedEntities.length>0,setUnselectedEntities:({kind,name,key,property},checked)=>{_setUnselectedEntities(checked?unselectedEntities.filter((elt=>elt.kind!==kind||elt.name!==name||elt.key!==key||elt.property!==property)):[...unselectedEntities,{kind,name,key,property}])},unselectedEntities}};function identity(values){return values}function EntitiesSavedStates({close,renderDialog}){const isDirtyProps=useIsDirty();return(0,jsx_runtime.jsx)(EntitiesSavedStatesExtensible,{close,renderDialog,...isDirtyProps})}function EntitiesSavedStatesExtensible({additionalPrompt,close,onSave=identity,saveEnabled:saveEnabledProp,saveLabel=(0,i18n_build_module.__)("Save"),renderDialog,dirtyEntityRecords,isDirty,setUnselectedEntities,unselectedEntities}){const saveButtonRef=(0,react.useRef)(),{saveDirtyEntities}=lock_unlock_unlock((0,use_dispatch.A)(store_store)),partitionedSavables=dirtyEntityRecords.reduce(((acc,record)=>{const{name}=record;return acc[name]||(acc[name]=[]),acc[name].push(record),acc}),{}),{site:siteSavables,wp_template:templateSavables,wp_template_part:templatePartSavables,...contentSavables}=partitionedSavables,sortedPartitionedSavables=[siteSavables,templateSavables,templatePartSavables,...Object.values(contentSavables)].filter(Array.isArray),saveEnabled=null!=saveEnabledProp?saveEnabledProp:isDirty,dismissPanel=(0,react.useCallback)((()=>close()),[close]),[saveDialogRef,saveDialogProps]=(0,use_dialog.A)({onClose:()=>dismissPanel()}),dialogLabel=(0,use_instance_id.A)(EntitiesSavedStatesExtensible,"label"),dialogDescription=(0,use_instance_id.A)(EntitiesSavedStatesExtensible,"description");return(0,jsx_runtime.jsxs)("div",{ref:saveDialogRef,...saveDialogProps,className:"entities-saved-states__panel",role:renderDialog?"dialog":void 0,"aria-labelledby":renderDialog?dialogLabel:void 0,"aria-describedby":renderDialog?dialogDescription:void 0,children:[(0,jsx_runtime.jsxs)(flex_component.A,{className:"entities-saved-states__panel-header",gap:2,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,as:build_module_button.Ay,variant:"secondary",size:"compact",onClick:dismissPanel,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,as:build_module_button.Ay,ref:saveButtonRef,variant:"primary",size:"compact",disabled:!saveEnabled,accessibleWhenDisabled:!0,onClick:()=>saveDirtyEntities({onSave,dirtyEntityRecords,entitiesToSkip:unselectedEntities,close}),className:"editor-entities-saved-states__save-button",children:saveLabel})]}),(0,jsx_runtime.jsxs)("div",{className:"entities-saved-states__text-prompt",children:[(0,jsx_runtime.jsxs)("div",{className:"entities-saved-states__text-prompt--header-wrapper",id:renderDialog?dialogLabel:void 0,children:[(0,jsx_runtime.jsx)("strong",{className:"entities-saved-states__text-prompt--header",children:(0,i18n_build_module.__)("Are you ready to save?")}),additionalPrompt]}),(0,jsx_runtime.jsx)("p",{id:renderDialog?dialogDescription:void 0,children:isDirty?(0,create_interpolate_element.A)((0,i18n_build_module.nv)((0,i18n_build_module._n)("There is <strong>%d site change</strong> waiting to be saved.","There are <strong>%d site changes</strong> waiting to be saved.",sortedPartitionedSavables.length),sortedPartitionedSavables.length),{strong:(0,jsx_runtime.jsx)("strong",{})}):(0,i18n_build_module.__)("Select the items you want to save.")})]}),sortedPartitionedSavables.map((list=>(0,jsx_runtime.jsx)(EntityTypeList,{list,unselectedEntities,setUnselectedEntities},list[0].name)))]})}var private_apis=__webpack_require__("./packages/components/build-module/private-apis.js");const{createPrivateSlotFill}=lock_unlock_unlock(private_apis.j),content_slot_fill=createPrivateSlotFill("EditCanvasContainerSlot");var use_slot_fills=__webpack_require__("./packages/components/build-module/slot-fill/bubbles-virtually/use-slot-fills.js");const slotName="__experimentalMainDashboardButton",{Fill,Slot}=(0,slot_fill.QJ)(slotName),BackButton=Fill;BackButton.Slot=()=>{const fills=(0,use_slot_fills.A)(slotName);return(0,jsx_runtime.jsx)(Slot,{bubblesVirtually:!0,fillProps:{length:fills?fills.length:0}})};const back_button=BackButton;var build_module_notice=__webpack_require__("./packages/components/build-module/notice/index.js");const list_noop=()=>{};const list=function NoticeList({notices,onRemove=list_noop,className,children}){return className=(0,clsx.A)("components-notice-list",className),(0,jsx_runtime.jsxs)("div",{className,children:[children,[...notices].reverse().map((notice=>{const{content,...restNotice}=notice;return(0,react.createElement)(build_module_notice.A,{...restNotice,key:notice.id,onRemove:(id=notice.id,()=>onRemove(id))},notice.content);var id}))]})};var confirm_dialog_component=__webpack_require__("./packages/components/build-module/confirm-dialog/component.js");function TemplateValidationNotice(){const[showConfirmDialog,setShowConfirmDialog]=(0,react.useState)(!1),isValid=(0,use_select.A)((select=>select(build_module.M_).isValidTemplate()),[]),{setTemplateValidity,synchronizeTemplate}=(0,use_dispatch.A)(build_module.M_);return isValid?null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module_notice.A,{className:"editor-template-validation-notice",isDismissible:!1,status:"warning",actions:[{label:(0,i18n_build_module.__)("Keep it as is"),onClick:()=>setTemplateValidity(!0)},{label:(0,i18n_build_module.__)("Reset the template"),onClick:()=>setShowConfirmDialog(!0)}],children:(0,i18n_build_module.__)("The content of your post doesn’t match the template assigned to your post type.")}),(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen:showConfirmDialog,confirmButtonText:(0,i18n_build_module.__)("Reset"),onConfirm:()=>{setShowConfirmDialog(!1),synchronizeTemplate()},onCancel:()=>setShowConfirmDialog(!1),size:"medium",children:(0,i18n_build_module.__)("Resetting the template may result in loss of content, do you want to continue?")})]})}const editor_notices=function EditorNotices(){const{notices}=(0,use_select.A)((select=>({notices:select(notices_build_module.M).getNotices()})),[]),{removeNotice}=(0,use_dispatch.A)(notices_build_module.M),dismissibleNotices=notices.filter((({isDismissible,type})=>isDismissible&&"default"===type)),nonDismissibleNotices=notices.filter((({isDismissible,type})=>!isDismissible&&"default"===type));return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(list,{notices:nonDismissibleNotices,className:"components-editor-notices__pinned"}),(0,jsx_runtime.jsx)(list,{notices:dismissibleNotices,className:"components-editor-notices__dismissible",onRemove:removeNotice,children:(0,jsx_runtime.jsx)(TemplateValidationNotice,{})})]})};var use_media_query=__webpack_require__("./packages/compose/build-module/hooks/use-media-query/index.js"),comment=__webpack_require__("./packages/icons/build-module/library/comment.js");function PluginSidebar({className,...props}){return(0,jsx_runtime.jsx)(complementary_area,{panelClassName:className,className:"editor-sidebar",scope:"core",...props})}const collabSidebarName="edit-post/collab-sidebar";var raw_html=__webpack_require__("./packages/element/build-module/raw-html.js"),textarea_control=__webpack_require__("./packages/components/build-module/textarea-control/index.js"),dropdown_menu=__webpack_require__("./packages/components/build-module/dropdown-menu/index.js"),tooltip=__webpack_require__("./packages/components/build-module/tooltip/index.js");const library_published=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm11.53-1.47-1.06-1.06L11 12.94l-1.47-1.47-1.06 1.06L11 15.06l4.53-4.53Z"})});var more_vertical=__webpack_require__("./packages/icons/build-module/library/more-vertical.js"),icon=__webpack_require__("./packages/icons/build-module/icon/index.js");function sanitizeCommentString(str){return str.trim()}function Comments({threads,onEditComment,onAddReply,onCommentDelete,onCommentResolve}){const[actionState,setActionState]=(0,react.useState)(!1),[isConfirmDialogOpen,setIsConfirmDialogOpen]=(0,react.useState)(!1),handleConfirmDelete=()=>{onCommentDelete(actionState.id),setActionState(!1),setIsConfirmDialogOpen(!1)},handleConfirmResolve=()=>{onCommentResolve(actionState.id),setActionState(!1),setIsConfirmDialogOpen(!1)},handleCancelDelete=()=>{setActionState(!1),setIsConfirmDialogOpen(!1)},blockCommentId=(0,use_select.A)((select=>{var _select$getBlock$attr;const clientID=select(build_module.M_).getSelectedBlockClientId();return null!==(_select$getBlock$attr=select(build_module.M_).getBlock(clientID)?.attributes?.blockCommentId)&&void 0!==_select$getBlock$attr&&_select$getBlock$attr}),[]),CommentBoard=({thread,parentThread})=>{var _parentThread$status;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(CommentHeader,{thread,onResolve:()=>{var _parentThread$id;setActionState({action:"resolve",id:null!==(_parentThread$id=parentThread?.id)&&void 0!==_parentThread$id?_parentThread$id:thread.id}),setIsConfirmDialogOpen(!0)},onEdit:()=>setActionState({action:"edit",id:thread.id}),onDelete:()=>{setActionState({action:"delete",id:thread.id}),setIsConfirmDialogOpen(!0)},onReply:parentThread?void 0:()=>setActionState({action:"reply",id:thread.id}),status:null!==(_parentThread$status=parentThread?.status)&&void 0!==_parentThread$status?_parentThread$status:thread.status}),(0,jsx_runtime.jsx)(h_stack_component.A,{alignment:"left",spacing:"3",justify:"flex-start",className:"editor-collab-sidebar-panel__user-comment",children:(0,jsx_runtime.jsxs)(component.A,{spacing:"3",className:"editor-collab-sidebar-panel__comment-field",children:["edit"===actionState?.action&&thread.id===actionState?.id&&(0,jsx_runtime.jsx)(CommentForm,{onSubmit:value=>{onEditComment(thread.id,value),setActionState(!1)},onCancel:()=>setActionState(!1),thread}),(!actionState||"edit"!==actionState?.action)&&(0,jsx_runtime.jsx)(raw_html.A,{children:thread?.content?.raw})]})}),"resolve"===actionState?.action&&thread.id===actionState?.id&&(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen:isConfirmDialogOpen,onConfirm:handleConfirmResolve,onCancel:handleCancelDelete,confirmButtonText:"Yes",cancelButtonText:"No",children:(0,i18n_build_module.__)("Are you sure you want to mark this comment as resolved?")}),"delete"===actionState?.action&&thread.id===actionState?.id&&(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen:isConfirmDialogOpen,onConfirm:handleConfirmDelete,onCancel:handleCancelDelete,confirmButtonText:"Yes",cancelButtonText:"No",children:(0,i18n_build_module.__)("Are you sure you want to delete this comment?")})]})};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(!Array.isArray(threads)||0===threads.length)&&(0,jsx_runtime.jsx)(component.A,{alignment:"left",className:"editor-collab-sidebar-panel__thread",justify:"flex-start",spacing:"3",children:(0,i18n_build_module.__)("No comments available")}),Array.isArray(threads)&&threads.length>0&&threads.map((thread=>(0,jsx_runtime.jsxs)(component.A,{className:(0,clsx.A)("editor-collab-sidebar-panel__thread",{"editor-collab-sidebar-panel__active-thread":blockCommentId&&blockCommentId===thread.id}),id:thread.id,spacing:"3",children:[(0,jsx_runtime.jsx)(CommentBoard,{thread}),"reply"===actionState?.action&&thread.id===actionState?.id&&(0,jsx_runtime.jsx)(h_stack_component.A,{alignment:"left",spacing:"3",justify:"flex-start",className:"editor-collab-sidebar-panel__user-comment",children:(0,jsx_runtime.jsx)(component.A,{spacing:"3",className:"editor-collab-sidebar-panel__comment-field",children:(0,jsx_runtime.jsx)(CommentForm,{onSubmit:inputComment=>{onAddReply(inputComment,thread.id),setActionState(!1)},onCancel:()=>setActionState(!1)})})}),0<thread?.reply?.length&&thread.reply.map((reply=>(0,jsx_runtime.jsx)(component.A,{className:"editor-collab-sidebar-panel__child-thread",id:reply.id,spacing:"2",children:(0,jsx_runtime.jsx)(CommentBoard,{thread:reply,parentThread:thread})},reply.id)))]},thread.id)))]})}function CommentForm({onSubmit,onCancel,thread}){var _thread$content$raw;const[inputComment,setInputComment]=(0,react.useState)(null!==(_thread$content$raw=thread?.content?.raw)&&void 0!==_thread$content$raw?_thread$content$raw:"");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(textarea_control.A,{__nextHasNoMarginBottom:!0,value:null!=inputComment?inputComment:"",onChange:setInputComment}),(0,jsx_runtime.jsx)(component.A,{alignment:"left",spacing:"3",justify:"flex-start",children:(0,jsx_runtime.jsxs)(h_stack_component.A,{alignment:"left",spacing:"3",justify:"flex-start",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,accessibleWhenDisabled:!0,variant:"primary",onClick:()=>onSubmit(inputComment),disabled:0===sanitizeCommentString(inputComment).length,children:thread?(0,i18n_build_module._x)("Update","verb"):(0,i18n_build_module._x)("Reply","Add reply comment")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,onClick:onCancel,children:(0,i18n_build_module._x)("Cancel","Cancel comment edit")})]})})]})}function CommentHeader({thread,onResolve,onEdit,onDelete,onReply,status}){const dateSettings=(0,date_build_module.mt)(),[dateTimeFormat=dateSettings.formats.time]=(0,core_data_build_module.S$)("root","site","time_format"),moreActions=[{title:(0,i18n_build_module._x)("Edit","Edit comment"),onClick:onEdit},{title:(0,i18n_build_module._x)("Delete","Delete comment"),onClick:onDelete},{title:(0,i18n_build_module._x)("Reply","Reply on a comment"),onClick:onReply}].filter((item=>item.onClick));return(0,jsx_runtime.jsxs)(h_stack_component.A,{alignment:"left",spacing:"3",justify:"flex-start",children:[(0,jsx_runtime.jsx)("img",{src:thread?.author_avatar_urls?.[48],className:"editor-collab-sidebar-panel__user-avatar",alt:(0,i18n_build_module.__)("User avatar"),width:32,height:32}),(0,jsx_runtime.jsxs)(component.A,{spacing:"0",children:[(0,jsx_runtime.jsx)("span",{className:"editor-collab-sidebar-panel__user-name",children:thread.author_name}),(0,jsx_runtime.jsx)("time",{dateTime:(0,date_build_module.GP)("h:i A",thread.date),className:"editor-collab-sidebar-panel__user-time",children:(0,date_build_module.b5)(dateTimeFormat,thread.date)})]}),(0,jsx_runtime.jsxs)("span",{className:"editor-collab-sidebar-panel__comment-status",children:["approved"!==status&&(0,jsx_runtime.jsxs)(h_stack_component.A,{alignment:"right",justify:"flex-end",spacing:"0",children:[0===thread.parent&&onResolve&&(0,jsx_runtime.jsx)(build_module_button.Ay,{label:(0,i18n_build_module._x)("Resolve","Mark comment as resolved"),__next40pxDefaultSize:!0,icon:library_published,onClick:onResolve,showTooltip:!0}),(0,jsx_runtime.jsx)(dropdown_menu.A,{icon:more_vertical.A,label:(0,i18n_build_module._x)("Select an action","Select comment action"),className:"editor-collab-sidebar-panel__comment-dropdown-menu",controls:moreActions})]}),"approved"===status&&(0,jsx_runtime.jsx)(tooltip.Ay,{text:(0,i18n_build_module.__)("Resolved"),children:(0,jsx_runtime.jsx)(icon.A,{icon:check.A})})]})]})}function AddComment({onSubmit,showCommentBoard,setShowCommentBoard}){var _currentUser$name;const[inputComment,setInputComment]=(0,react.useState)(""),{defaultAvatar,clientId,blockCommentId,showAddCommentBoard,currentUser}=(0,use_select.A)((select=>{const{getSettings}=select(build_module.M_),{__experimentalDiscussionSettings}=getSettings(),selectedBlock=select(build_module.M_).getSelectedBlock(),userData=select(core_data_build_module.M_).getCurrentUser();return{defaultAvatar:__experimentalDiscussionSettings?.avatarURL,clientId:selectedBlock?.clientId,blockCommentId:selectedBlock?.attributes?.blockCommentId,showAddCommentBoard:showCommentBoard,currentUser:userData}})),userAvatar=currentUser&&currentUser.avatar_urls&&currentUser.avatar_urls[48]?currentUser.avatar_urls[48]:defaultAvatar;(0,react.useEffect)((()=>{setInputComment("")}),[clientId]);return showAddCommentBoard&&clientId&&void 0===blockCommentId?(0,jsx_runtime.jsxs)(component.A,{spacing:"3",className:"editor-collab-sidebar-panel__thread editor-collab-sidebar-panel__active-thread",children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{alignment:"left",spacing:"3",children:[(0,jsx_runtime.jsx)("img",{src:userAvatar,alt:(0,i18n_build_module.__)("User Avatar"),className:"editor-collab-sidebar-panel__user-avatar",width:32,height:32}),(0,jsx_runtime.jsx)("span",{className:"editor-collab-sidebar-panel__user-name",children:null!==(_currentUser$name=currentUser?.name)&&void 0!==_currentUser$name?_currentUser$name:""})]}),(0,jsx_runtime.jsx)(text_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,value:inputComment,onChange:setInputComment,placeholder:(0,i18n_build_module._x)("Comment","noun")}),(0,jsx_runtime.jsxs)(h_stack_component.A,{alignment:"right",spacing:"3",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",text:(0,i18n_build_module._x)("Cancel","Cancel comment button"),onClick:()=>{setShowCommentBoard(!1),setInputComment("")}}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,accessibleWhenDisabled:!0,variant:"primary",text:(0,i18n_build_module._x)("Comment","Add comment button"),disabled:0===sanitizeCommentString(inputComment).length,onClick:()=>{onSubmit(inputComment),setInputComment("")}})]})]}):null}const{__unstableCommentIconFill}=lock_unlock_unlock(build_module.jb),comment_button=({onClick})=>(0,jsx_runtime.jsx)(__unstableCommentIconFill,{children:(0,jsx_runtime.jsx)(menu_item.A,{icon:comment.A,onClick,"aria-haspopup":"dialog",children:(0,i18n_build_module._x)("Comment","Add comment button")})});var toolbar_button=__webpack_require__("./packages/components/build-module/toolbar/toolbar-button/index.js");const{__unstableCommentIconToolbarFill}=lock_unlock_unlock(build_module.jb),comment_button_toolbar=({onClick})=>(0,jsx_runtime.jsx)(__unstableCommentIconToolbarFill,{children:(0,jsx_runtime.jsx)(toolbar_button.A,{accessibleWhenDisabled:!0,icon:comment.A,label:(0,i18n_build_module._x)("Comment","View comment"),onClick})}),threadsEmptyArray=[],isBlockCommentExperimentEnabled=window?.__experimentalEnableBlockComment;function CollabSidebar(){const{createNotice}=(0,use_dispatch.A)(notices_build_module.M),{saveEntityRecord,deleteEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{getEntityRecord}=(0,data_build_module.dH)(core_data_build_module.M_),{enableComplementaryArea}=(0,use_dispatch.A)(interface_build_module_store_store),[blockCommentID,setBlockCommentID]=(0,react.useState)(null),[showCommentBoard,setShowCommentBoard]=(0,react.useState)(!1),{postId}=(0,use_select.A)((select=>({postId:select(store_store).getCurrentPostId()})),[]),threads=(0,use_select.A)((select=>{if(!postId)return threadsEmptyArray;const{getEntityRecords}=select(core_data_build_module.M_);return getEntityRecords("root","comment",{post:postId,type:"block_comment",status:"any",per_page:100})||threadsEmptyArray}),[postId]),clientId=(0,use_select.A)((select=>{const{getSelectedBlockClientId}=select(build_module.M_);return getSelectedBlockClientId()}),[]),blockDetails=(0,use_select.A)((select=>clientId?select(build_module.M_).getBlock(clientId):null),[clientId]),{updateBlockAttributes}=(0,use_dispatch.A)(build_module.M_),resultComments=(0,react.useMemo)((()=>{const compare={},result=[],filteredComments=threads.filter((comment=>"trash"!==comment.status));return filteredComments.forEach((item=>{compare[item.id]={...item,reply:[]}})),filteredComments.forEach((item=>{0===item.parent?result.push(compare[item.id]):compare[item.parent]&&compare[item.parent].reply.push(compare[item.id])})),result}),[threads]),openCollabBoard=()=>{setShowCommentBoard(!0),enableComplementaryArea("core","edit-post/collab-sidebar")},addNewComment=async(comment,parentCommentId)=>{const updatedArgs={...{post:postId,content:comment,comment_type:"block_comment",comment_approved:0},...parentCommentId?{parent:parentCommentId}:{}},savedRecord=await saveEntityRecord("root","comment",updatedArgs);savedRecord?(parentCommentId||updateBlockAttributes(clientId,{blockCommentId:savedRecord?.id}),createNotice("snackbar",parentCommentId?(0,i18n_build_module.__)("Reply added successfully."):(0,i18n_build_module.__)("Comment added successfully."),{type:"snackbar",isDismissible:!0})):onError()},onError=()=>{createNotice("error",(0,i18n_build_module.__)("Something went wrong. Please try publishing the post, or you may have already submitted your comment earlier."),{isDismissible:!0})};return(0,react.useEffect)((()=>{blockDetails&&setBlockCommentID(blockDetails?.attributes.blockCommentId)}),[postId,clientId]),isBlockCommentExperimentEnabled?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!blockCommentID&&(0,jsx_runtime.jsx)(comment_button,{onClick:openCollabBoard}),blockCommentID>0&&(0,jsx_runtime.jsx)(comment_button_toolbar,{onClick:openCollabBoard}),(0,jsx_runtime.jsx)(PluginSidebar,{identifier:collabSidebarName,title:(0,i18n_build_module.__)("Comments"),icon:comment.A,children:(0,jsx_runtime.jsxs)("div",{className:"editor-collab-sidebar-panel",children:[(0,jsx_runtime.jsx)(AddComment,{threads:resultComments,onSubmit:addNewComment,showCommentBoard,setShowCommentBoard}),(0,jsx_runtime.jsx)(Comments,{threads:resultComments,onEditComment:async(commentId,comment)=>{await saveEntityRecord("root","comment",{id:commentId,content:comment})?createNotice("snackbar",(0,i18n_build_module.__)("Comment edited successfully."),{type:"snackbar",isDismissible:!0}):onError()},onAddReply:addNewComment,onCommentDelete:async commentId=>{const childComment=await getEntityRecord("root","comment",commentId);await deleteEntityRecord("root","comment",commentId),childComment&&!childComment.parent&&updateBlockAttributes(clientId,{blockCommentId:void 0}),createNotice("snackbar",(0,i18n_build_module.__)("Comment deleted successfully."),{type:"snackbar",isDismissible:!0})},onCommentResolve:async commentId=>{await saveEntityRecord("root","comment",{id:commentId,status:"approved"})?createNotice("snackbar",(0,i18n_build_module.__)("Comment marked as resolved."),{type:"snackbar",isDismissible:!0}):onError()}})]})})]}):null}(0,hooks_build_module.U2)("blocks.registerBlockType","block-comment/modify-core-block-attributes",(settings=>(settings.attributes.blockCommentId||(settings.attributes={...settings.attributes,blockCommentId:{type:"number"}}),settings)));var popover=__webpack_require__("./packages/components/build-module/popover/index.js"),next=__webpack_require__("./packages/icons/build-module/library/next.js"),previous=__webpack_require__("./packages/icons/build-module/library/previous.js");const{useHasBlockToolbar}=lock_unlock_unlock(build_module.jb);function CollapsibleBlockToolbar({isCollapsed,onToggle}){const{blockSelectionStart}=(0,use_select.A)((select=>({blockSelectionStart:select(build_module.M_).getBlockSelectionStart()})),[]),hasBlockToolbar=useHasBlockToolbar(),hasBlockSelection=!!blockSelectionStart;return(0,react.useEffect)((()=>{blockSelectionStart&&onToggle(!1)}),[blockSelectionStart,onToggle]),hasBlockToolbar?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("editor-collapsible-block-toolbar",{"is-collapsed":isCollapsed||!hasBlockSelection}),children:(0,jsx_runtime.jsx)(build_module.Lz,{hideDragHandle:!0})}),(0,jsx_runtime.jsx)(popover.Ay.Slot,{name:"block-toolbar"}),(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"editor-collapsible-block-toolbar__toggle",icon:isCollapsed?next.A:previous.A,onClick:()=>{onToggle(!isCollapsed)},label:isCollapsed?(0,i18n_build_module.__)("Show block tools"):(0,i18n_build_module.__)("Hide block tools"),size:"compact"})]}):null}var chevron_right_small=__webpack_require__("./packages/icons/build-module/library/chevron-right-small.js"),chevron_left_small=__webpack_require__("./packages/icons/build-module/library/chevron-left-small.js"),keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js"),commands_build_module=__webpack_require__("./packages/commands/build-module/index.js");const MotionButton=(0,motion.P)(build_module_button.Ay);function DocumentBar(props){const{postType,postTypeLabel,documentTitle,isNotFound,isUnsyncedPattern,templateTitle,onNavigateToPreviousEntityRecord}=(0,use_select.A)((select=>{const{getCurrentPostType,getCurrentPostId,getEditorSettings,__experimentalGetTemplateInfo:getTemplateInfo}=select(store_store),{getEditedEntityRecord,getPostType,isResolving:isResolvingSelector}=select(core_data_build_module.M_),_postType=getCurrentPostType(),_postId=getCurrentPostId(),_document=getEditedEntityRecord("postType",_postType,_postId),_templateInfo=getTemplateInfo(_document),_postTypeLabel=getPostType(_postType)?.labels?.singular_name;return{postType:_postType,postTypeLabel:_postTypeLabel,documentTitle:_document.title,isNotFound:!_document&&!isResolvingSelector("getEditedEntityRecord","postType",_postType,_postId),isUnsyncedPattern:"unsynced"===_document?.wp_pattern_sync_status,templateTitle:_templateInfo.title,onNavigateToPreviousEntityRecord:getEditorSettings().onNavigateToPreviousEntityRecord}}),[]),{open:openCommandCenter}=(0,use_dispatch.A)(commands_build_module.M_),isReducedMotion=(0,use_reduced_motion.A)(),isTemplate=TEMPLATE_POST_TYPES.includes(postType),isGlobalEntity=GLOBAL_POST_TYPES.includes(postType),hasBackButton=!!onNavigateToPreviousEntityRecord,entityTitle=isTemplate?templateTitle:documentTitle,title=props.title||entityTitle,icon=props.icon,mountedRef=(0,react.useRef)(!1);return(0,react.useEffect)((()=>{mountedRef.current=!0}),[]),(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("editor-document-bar",{"has-back-button":hasBackButton,"is-global":isGlobalEntity&&!isUnsyncedPattern}),children:[(0,jsx_runtime.jsx)(AnimatePresence.N,{children:hasBackButton&&(0,jsx_runtime.jsx)(MotionButton,{className:"editor-document-bar__back",icon:(0,i18n_build_module.V8)()?chevron_right_small.A:chevron_left_small.A,onClick:event=>{event.stopPropagation(),onNavigateToPreviousEntityRecord()},size:"compact",initial:!!mountedRef.current&&{opacity:0,transform:"translateX(15%)"},animate:{opacity:1,transform:"translateX(0%)"},exit:{opacity:0,transform:"translateX(15%)"},transition:isReducedMotion?{duration:0}:void 0,children:(0,i18n_build_module.__)("Back")})}),isNotFound?(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.__)("Document not found")}):(0,jsx_runtime.jsxs)(build_module_button.Ay,{className:"editor-document-bar__command",onClick:()=>openCommandCenter(),size:"compact",children:[(0,jsx_runtime.jsxs)(motion.P.div,{className:"editor-document-bar__title",initial:!!mountedRef.current&&{opacity:0,transform:hasBackButton?"translateX(15%)":"translateX(-15%)"},animate:{opacity:1,transform:"translateX(0%)"},transition:isReducedMotion?{duration:0}:void 0,children:[icon&&(0,jsx_runtime.jsx)(build_module.th,{icon}),(0,jsx_runtime.jsxs)(text_component.A,{size:"body",as:"h1",children:[(0,jsx_runtime.jsx)("span",{className:"editor-document-bar__post-title",children:title?(0,html_entities_build_module.S)(title):(0,i18n_build_module.__)("No title")}),postTypeLabel&&!props.title&&(0,jsx_runtime.jsx)("span",{className:"editor-document-bar__post-type-label",children:"· "+(0,html_entities_build_module.S)(postTypeLabel)})]})]},hasBackButton),(0,jsx_runtime.jsx)("span",{className:"editor-document-bar__shortcut",children:keycodes_build_module.dz.primary("k")})]})]})}var toolbar_item=__webpack_require__("./packages/components/build-module/toolbar/toolbar-item/index.js"),plus=__webpack_require__("./packages/icons/build-module/library/plus.js"),list_view=__webpack_require__("./packages/icons/build-module/library/list-view.js"),keyboard_shortcuts_build_module=__webpack_require__("./packages/keyboard-shortcuts/build-module/index.js"),build_module_platform=__webpack_require__("./packages/keycodes/build-module/platform.js"),library_redo=__webpack_require__("./packages/icons/build-module/library/redo.js"),library_undo=__webpack_require__("./packages/icons/build-module/library/undo.js");const editor_history_redo=(0,react.forwardRef)((function EditorHistoryRedo(props,ref){const shortcut=(0,build_module_platform.H)()?keycodes_build_module.dz.primaryShift("z"):keycodes_build_module.dz.primary("y"),hasRedo=(0,use_select.A)((select=>select(store_store).hasEditorRedo()),[]),{redo}=(0,use_dispatch.A)(store_store);return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,...props,ref,icon:(0,i18n_build_module.V8)()?library_undo.A:library_redo.A,label:(0,i18n_build_module.__)("Redo"),shortcut,"aria-disabled":!hasRedo,onClick:hasRedo?redo:void 0,className:"editor-history__redo"})}));const editor_history_undo=(0,react.forwardRef)((function EditorHistoryUndo(props,ref){const hasUndo=(0,use_select.A)((select=>select(store_store).hasEditorUndo()),[]),{undo}=(0,use_dispatch.A)(store_store);return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,...props,ref,icon:(0,i18n_build_module.V8)()?library_redo.A:library_undo.A,label:(0,i18n_build_module.__)("Undo"),shortcut:keycodes_build_module.dz.primary("z"),"aria-disabled":!hasUndo,onClick:hasUndo?undo:void 0,className:"editor-history__undo"})}));const document_tools=function DocumentTools({className,disableBlockTools=!1}){const{setIsInserterOpened,setIsListViewOpened}=(0,use_dispatch.A)(store_store),{isDistractionFree,isInserterOpened,isListViewOpen,listViewShortcut,inserterSidebarToggleRef,listViewToggleRef,showIconLabels}=(0,use_select.A)((select=>{const{get}=select(store.M),{isListViewOpened,getEditorMode,getInserterSidebarToggleRef,getListViewToggleRef}=lock_unlock_unlock(select(store_store)),{getShortcutRepresentation}=select(keyboard_shortcuts_build_module.M_);return{isInserterOpened:select(store_store).isInserterOpened(),isListViewOpen:isListViewOpened(),listViewShortcut:getShortcutRepresentation("core/editor/toggle-list-view"),inserterSidebarToggleRef:getInserterSidebarToggleRef(),listViewToggleRef:getListViewToggleRef(),showIconLabels:get("core","showIconLabels"),isDistractionFree:get("core","distractionFree"),isVisualMode:"visual"===getEditorMode()}}),[]),isLargeViewport=(0,use_viewport_match.A)("medium"),isWideViewport=(0,use_viewport_match.A)("wide"),toolbarAriaLabel=(0,i18n_build_module.__)("Document tools"),toggleListView=(0,react.useCallback)((()=>setIsListViewOpened(!isListViewOpen)),[setIsListViewOpened,isListViewOpen]),toggleInserter=(0,react.useCallback)((()=>setIsInserterOpened(!isInserterOpened)),[isInserterOpened,setIsInserterOpened]),longLabel=(0,i18n_build_module._x)("Block Inserter","Generic label for block inserter button"),shortLabel=isInserterOpened?(0,i18n_build_module.__)("Close"):(0,i18n_build_module.__)("Add");return(0,jsx_runtime.jsx)(build_module.rn,{className:(0,clsx.A)("editor-document-tools","edit-post-header-toolbar",className),"aria-label":toolbarAriaLabel,variant:"unstyled",children:(0,jsx_runtime.jsxs)("div",{className:"editor-document-tools__left",children:[!isDistractionFree&&(0,jsx_runtime.jsx)(toolbar_item.A,{ref:inserterSidebarToggleRef,as:build_module_button.Ay,className:"editor-document-tools__inserter-toggle",variant:"primary",isPressed:isInserterOpened,onMouseDown:event=>{isInserterOpened&&event.preventDefault()},onClick:toggleInserter,disabled:disableBlockTools,icon:plus.A,label:showIconLabels?shortLabel:longLabel,showTooltip:!showIconLabels,"aria-expanded":isInserterOpened}),(isWideViewport||!showIconLabels)&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isLargeViewport&&(0,jsx_runtime.jsx)(toolbar_item.A,{as:build_module.yR,showTooltip:!showIconLabels,variant:showIconLabels?"tertiary":void 0,disabled:disableBlockTools,size:"compact"}),(0,jsx_runtime.jsx)(toolbar_item.A,{as:editor_history_undo,showTooltip:!showIconLabels,variant:showIconLabels?"tertiary":void 0,size:"compact"}),(0,jsx_runtime.jsx)(toolbar_item.A,{as:editor_history_redo,showTooltip:!showIconLabels,variant:showIconLabels?"tertiary":void 0,size:"compact"}),!isDistractionFree&&(0,jsx_runtime.jsx)(toolbar_item.A,{as:build_module_button.Ay,className:"editor-document-tools__document-overview-toggle",icon:list_view.A,disabled:disableBlockTools,isPressed:isListViewOpen,label:(0,i18n_build_module.__)("Document Overview"),onClick:toggleListView,shortcut:listViewShortcut,showTooltip:!showIconLabels,variant:showIconLabels?"tertiary":void 0,"aria-expanded":isListViewOpen,ref:listViewToggleRef,size:"compact"})]})]})})};var menu_group=__webpack_require__("./packages/components/build-module/menu-group/index.js");function PreferenceToggleMenuItem({scope,name,label,info,messageActivated,messageDeactivated,shortcut,handleToggling=!0,onToggle=()=>null,disabled=!1}){const isActive=(0,use_select.A)((select=>!!select(store.M).get(scope,name)),[scope,name]),{toggle}=(0,use_dispatch.A)(store.M);return(0,jsx_runtime.jsx)(menu_item.A,{icon:isActive&&check.A,isSelected:isActive,onClick:()=>{onToggle(),handleToggling&&toggle(scope,name),(()=>{if(isActive){const message=messageDeactivated||(0,i18n_build_module.nv)((0,i18n_build_module.__)("Preference deactivated - %s"),label);(0,a11y_build_module.L)(message)}else{const message=messageActivated||(0,i18n_build_module.nv)((0,i18n_build_module.__)("Preference activated - %s"),label);(0,a11y_build_module.L)(message)}})()},role:"menuitemcheckbox",info,shortcut,disabled,children:label})}var use_copy_to_clipboard=__webpack_require__("./packages/compose/build-module/hooks/use-copy-to-clipboard/index.js");function CopyContentMenuItem(){const{createNotice}=(0,use_dispatch.A)(notices_build_module.M),{getCurrentPostId,getCurrentPostType}=(0,use_select.A)(store_store),{getEditedEntityRecord}=(0,use_select.A)(core_data_build_module.M_);const ref=(0,use_copy_to_clipboard.A)((function getText(){const record=getEditedEntityRecord("postType",getCurrentPostType(),getCurrentPostId());return record?"function"==typeof record.content?record.content(record):record.blocks?(0,blocks_build_module.RM)(record.blocks):record.content?record.content:void 0:""}),(function onSuccess(){createNotice("info",(0,i18n_build_module.__)("All content copied."),{isDismissible:!0,type:"snackbar"})}));return(0,jsx_runtime.jsx)(menu_item.A,{ref,children:(0,i18n_build_module.__)("Copy all blocks")})}var menu_items_choice=__webpack_require__("./packages/components/build-module/menu-items-choice/index.js");const MODES=[{value:"visual",label:(0,i18n_build_module.__)("Visual editor")},{value:"text",label:(0,i18n_build_module.__)("Code editor")}];const mode_switcher=function ModeSwitcher(){const{shortcut,isRichEditingEnabled,isCodeEditingEnabled,mode}=(0,use_select.A)((select=>({shortcut:select(keyboard_shortcuts_build_module.M_).getShortcutRepresentation("core/editor/toggle-mode"),isRichEditingEnabled:select(store_store).getEditorSettings().richEditingEnabled,isCodeEditingEnabled:select(store_store).getEditorSettings().codeEditingEnabled,mode:select(store_store).getEditorMode()})),[]),{switchEditorMode}=(0,use_dispatch.A)(store_store);let selectedMode=mode;isRichEditingEnabled||"visual"!==mode||(selectedMode="text"),isCodeEditingEnabled||"text"!==mode||(selectedMode="visual");const choices=MODES.map((choice=>(isCodeEditingEnabled||"text"!==choice.value||(choice={...choice,disabled:!0}),isRichEditingEnabled||"visual"!==choice.value||(choice={...choice,disabled:!0,info:(0,i18n_build_module.__)("You can enable the visual editor in your profile settings.")}),choice.value===selectedMode||choice.disabled?choice:{...choice,shortcut})));return(0,jsx_runtime.jsx)(menu_group.A,{label:(0,i18n_build_module.__)("Editor"),children:(0,jsx_runtime.jsx)(menu_items_choice.A,{choices,value:selectedMode,onSelect:switchEditorMode})})},{Fill:ToolsMoreMenuGroup,Slot:tools_more_menu_group_Slot}=(0,slot_fill.QJ)("ToolsMoreMenuGroup");ToolsMoreMenuGroup.Slot=({fillProps})=>(0,jsx_runtime.jsx)(tools_more_menu_group_Slot,{fillProps});const tools_more_menu_group=ToolsMoreMenuGroup,{Fill:ViewMoreMenuGroup,Slot:view_more_menu_group_Slot}=(0,slot_fill.QJ)("web"===platform.A.OS?Symbol("ViewMoreMenuGroup"):"ViewMoreMenuGroup");ViewMoreMenuGroup.Slot=({fillProps})=>(0,jsx_runtime.jsx)(view_more_menu_group_Slot,{fillProps});const view_more_menu_group=ViewMoreMenuGroup;function MoreMenu(){const{openModal}=(0,use_dispatch.A)(interface_build_module_store_store),{set:setPreference}=(0,use_dispatch.A)(store.M),{toggleDistractionFree}=(0,use_dispatch.A)(store_store),showIconLabels=(0,use_select.A)((select=>select(store.M).get("core","showIconLabels")),[]),turnOffDistractionFree=()=>{setPreference("core","distractionFree",!1)};return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(dropdown_menu.A,{icon:more_vertical.A,label:(0,i18n_build_module.__)("Options"),popoverProps:{placement:"bottom-end",className:"more-menu-dropdown__content"},toggleProps:{showTooltip:!showIconLabels,...showIconLabels&&{variant:"tertiary"},tooltipPosition:"bottom",size:"compact"},children:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu_group.A,{label:(0,i18n_build_module._x)("View","noun"),children:[(0,jsx_runtime.jsx)(PreferenceToggleMenuItem,{scope:"core",name:"fixedToolbar",onToggle:turnOffDistractionFree,label:(0,i18n_build_module.__)("Top toolbar"),info:(0,i18n_build_module.__)("Access all block and document tools in a single place"),messageActivated:(0,i18n_build_module.__)("Top toolbar activated"),messageDeactivated:(0,i18n_build_module.__)("Top toolbar deactivated")}),(0,jsx_runtime.jsx)(PreferenceToggleMenuItem,{scope:"core",name:"distractionFree",label:(0,i18n_build_module.__)("Distraction free"),info:(0,i18n_build_module.__)("Write with calmness"),handleToggling:!1,onToggle:toggleDistractionFree,messageActivated:(0,i18n_build_module.__)("Distraction free mode activated"),messageDeactivated:(0,i18n_build_module.__)("Distraction free mode deactivated"),shortcut:keycodes_build_module.dz.primaryShift("\\")}),(0,jsx_runtime.jsx)(PreferenceToggleMenuItem,{scope:"core",name:"focusMode",label:(0,i18n_build_module.__)("Spotlight mode"),info:(0,i18n_build_module.__)("Focus on one block at a time"),messageActivated:(0,i18n_build_module.__)("Spotlight mode activated"),messageDeactivated:(0,i18n_build_module.__)("Spotlight mode deactivated")}),(0,jsx_runtime.jsx)(view_more_menu_group.Slot,{fillProps:{onClose}})]}),(0,jsx_runtime.jsx)(mode_switcher,{}),(0,jsx_runtime.jsx)(action_item.Slot,{name:"core/plugin-more-menu",label:(0,i18n_build_module.__)("Plugins"),as:menu_group.A,fillProps:{onClick:onClose}}),(0,jsx_runtime.jsxs)(menu_group.A,{label:(0,i18n_build_module.__)("Tools"),children:[(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>openModal("editor/keyboard-shortcut-help"),shortcut:keycodes_build_module.dz.access("h"),children:(0,i18n_build_module.__)("Keyboard shortcuts")}),(0,jsx_runtime.jsx)(CopyContentMenuItem,{}),(0,jsx_runtime.jsxs)(menu_item.A,{icon:external.A,href:(0,i18n_build_module.__)("https://wordpress.org/documentation/article/wordpress-block-editor/"),target:"_blank",rel:"noopener noreferrer",children:[(0,i18n_build_module.__)("Help"),(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"span",children:(0,i18n_build_module.__)("(opens in a new tab)")})]}),(0,jsx_runtime.jsx)(tools_more_menu_group.Slot,{fillProps:{onClose}})]}),(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>openModal("editor/preferences"),children:(0,i18n_build_module.__)("Preferences")})})]})})})}var serialize=__webpack_require__("./packages/element/build-module/serialize.js");function PostPreviewButton({className,textContent,forceIsAutosaveable,role,onPreview}){const{postId,currentPostLink,previewLink,isSaveable,isViewable}=(0,use_select.A)((select=>{var _postType$viewable;const editor=select(store_store),postType=select(core_data_build_module.M_).getPostType(editor.getCurrentPostType("type"));return{postId:editor.getCurrentPostId(),currentPostLink:editor.getCurrentPostAttribute("link"),previewLink:editor.getEditedPostPreviewLink(),isSaveable:editor.isEditedPostSaveable(),isViewable:null!==(_postType$viewable=postType?.viewable)&&void 0!==_postType$viewable&&_postType$viewable}}),[]),{__unstableSaveForPreview}=(0,use_dispatch.A)(store_store);if(!isViewable)return null;const targetId=`wp-preview-${postId}`,href=previewLink||currentPostLink;return(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:className?void 0:"tertiary",className:className||"editor-post-preview",href,target:targetId,accessibleWhenDisabled:!0,disabled:!isSaveable,onClick:async event=>{event.preventDefault();const previewWindow=window.open("",targetId);previewWindow.focus(),function writeInterstitialMessage(targetDocument){let markup=(0,serialize.Ay)((0,jsx_runtime.jsxs)("div",{className:"editor-post-preview-button__interstitial-message",children:[(0,jsx_runtime.jsxs)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 96 96",children:[(0,jsx_runtime.jsx)(svg.wA,{className:"outer",d:"M48 12c19.9 0 36 16.1 36 36S67.9 84 48 84 12 67.9 12 48s16.1-36 36-36",fill:"none"}),(0,jsx_runtime.jsx)(svg.wA,{className:"inner",d:"M69.5 46.4c0-3.9-1.4-6.7-2.6-8.8-1.6-2.6-3.1-4.9-3.1-7.5 0-2.9 2.2-5.7 5.4-5.7h.4C63.9 19.2 56.4 16 48 16c-11.2 0-21 5.7-26.7 14.4h2.1c3.3 0 8.5-.4 8.5-.4 1.7-.1 1.9 2.4.2 2.6 0 0-1.7.2-3.7.3L40 67.5l7-20.9L42 33c-1.7-.1-3.3-.3-3.3-.3-1.7-.1-1.5-2.7.2-2.6 0 0 5.3.4 8.4.4 3.3 0 8.5-.4 8.5-.4 1.7-.1 1.9 2.4.2 2.6 0 0-1.7.2-3.7.3l11.5 34.3 3.3-10.4c1.6-4.5 2.4-7.8 2.4-10.5zM16.1 48c0 12.6 7.3 23.5 18 28.7L18.8 35c-1.7 4-2.7 8.4-2.7 13zm32.5 2.8L39 78.6c2.9.8 5.9 1.3 9 1.3 3.7 0 7.3-.6 10.6-1.8-.1-.1-.2-.3-.2-.4l-9.8-26.9zM76.2 36c0 3.2-.6 6.9-2.4 11.4L64 75.6c9.5-5.5 15.9-15.8 15.9-27.6 0-5.5-1.4-10.8-3.9-15.3.1 1 .2 2.1.2 3.3z",fill:"none"})]}),(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("Generating preview…")})]}));markup+='\n\t\t<style>\n\t\t\tbody {\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t\t.editor-post-preview-button__interstitial-message {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\theight: 100vh;\n\t\t\t\twidth: 100vw;\n\t\t\t}\n\t\t\t@-webkit-keyframes paint {\n\t\t\t\t0% {\n\t\t\t\t\tstroke-dashoffset: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t@-moz-keyframes paint {\n\t\t\t\t0% {\n\t\t\t\t\tstroke-dashoffset: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t@-o-keyframes paint {\n\t\t\t\t0% {\n\t\t\t\t\tstroke-dashoffset: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t@keyframes paint {\n\t\t\t\t0% {\n\t\t\t\t\tstroke-dashoffset: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.editor-post-preview-button__interstitial-message svg {\n\t\t\t\twidth: 192px;\n\t\t\t\theight: 192px;\n\t\t\t\tstroke: #555d66;\n\t\t\t\tstroke-width: 0.75;\n\t\t\t}\n\t\t\t.editor-post-preview-button__interstitial-message svg .outer,\n\t\t\t.editor-post-preview-button__interstitial-message svg .inner {\n\t\t\t\tstroke-dasharray: 280;\n\t\t\t\tstroke-dashoffset: 280;\n\t\t\t\t-webkit-animation: paint 1.5s ease infinite alternate;\n\t\t\t\t-moz-animation: paint 1.5s ease infinite alternate;\n\t\t\t\t-o-animation: paint 1.5s ease infinite alternate;\n\t\t\t\tanimation: paint 1.5s ease infinite alternate;\n\t\t\t}\n\t\t\tp {\n\t\t\t\ttext-align: center;\n\t\t\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;\n\t\t\t}\n\t\t</style>\n\t',markup=(0,hooks_build_module.W5)("editor.PostPreview.interstitialMarkup",markup),targetDocument.write(markup),targetDocument.title=(0,i18n_build_module.__)("Generating preview…"),targetDocument.close()}(previewWindow.document);const link=await __unstableSaveForPreview({forceIsAutosaveable});previewWindow.location=link,onPreview?.()},role,size:"compact",children:textContent||(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,i18n_build_module._x)("Preview","imperative verb"),(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"span",children:(0,i18n_build_module.__)("(opens in a new tab)")})]})})}var higher_order_compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),with_select=__webpack_require__("./packages/data/build-module/components/with-select/index.js"),with_dispatch=__webpack_require__("./packages/data/build-module/components/with-dispatch/index.js");function PublishButtonLabel(){const isSmallerThanMediumViewport=(0,use_viewport_match.A)("medium","<"),{isPublished,isBeingScheduled,isSaving,isPublishing,hasPublishAction,isAutosaving,hasNonPostEntityChanges,postStatusHasChanged,postStatus}=(0,use_select.A)((select=>{var _getCurrentPost$_link;const{isCurrentPostPublished,isEditedPostBeingScheduled,isSavingPost,isPublishingPost,getCurrentPost,getCurrentPostType,isAutosavingPost,getPostEdits,getEditedPostAttribute}=select(store_store);return{isPublished:isCurrentPostPublished(),isBeingScheduled:isEditedPostBeingScheduled(),isSaving:isSavingPost(),isPublishing:isPublishingPost(),hasPublishAction:null!==(_getCurrentPost$_link=getCurrentPost()._links?.["wp:action-publish"])&&void 0!==_getCurrentPost$_link&&_getCurrentPost$_link,postType:getCurrentPostType(),isAutosaving:isAutosavingPost(),hasNonPostEntityChanges:select(store_store).hasNonPostEntityChanges(),postStatusHasChanged:!!getPostEdits()?.status,postStatus:getEditedPostAttribute("status")}}),[]);return isPublishing?(0,i18n_build_module.__)("Publishing…"):(isPublished||isBeingScheduled)&&isSaving&&!isAutosaving?(0,i18n_build_module.__)("Saving…"):hasPublishAction?hasNonPostEntityChanges||isPublished||postStatusHasChanged&&!["future","publish"].includes(postStatus)||!postStatusHasChanged&&"future"===postStatus?(0,i18n_build_module.__)("Save"):isBeingScheduled?(0,i18n_build_module.__)("Schedule"):(0,i18n_build_module.__)("Publish"):isSmallerThanMediumViewport?(0,i18n_build_module.__)("Publish"):(0,i18n_build_module.__)("Submit for Review")}const post_publish_button_noop=()=>{};class PostPublishButton extends react.Component{constructor(props){super(props),this.createOnClick=this.createOnClick.bind(this),this.closeEntitiesSavedStates=this.closeEntitiesSavedStates.bind(this),this.state={entitiesSavedStatesCallback:!1}}createOnClick(callback){return(...args)=>{const{hasNonPostEntityChanges,setEntitiesSavedStatesCallback}=this.props;return hasNonPostEntityChanges&&setEntitiesSavedStatesCallback?(this.setState({entitiesSavedStatesCallback:()=>callback(...args)}),setEntitiesSavedStatesCallback((()=>this.closeEntitiesSavedStates)),post_publish_button_noop):callback(...args)}}closeEntitiesSavedStates(savedEntities){const{postType,postId}=this.props,{entitiesSavedStatesCallback}=this.state;this.setState({entitiesSavedStatesCallback:!1},(()=>{savedEntities&&savedEntities.some((elt=>"postType"===elt.kind&&elt.name===postType&&elt.key===postId))&&entitiesSavedStatesCallback()}))}render(){const{forceIsDirty,hasPublishAction,isBeingScheduled,isOpen,isPostSavingLocked,isPublishable,isPublished,isSaveable,isSaving,isAutoSaving,isToggle,savePostStatus,onSubmit=post_publish_button_noop,onToggle,visibility,hasNonPostEntityChanges,isSavingNonPostEntityChanges,postStatus,postStatusHasChanged}=this.props,isButtonDisabled=(isSaving||!isSaveable||isPostSavingLocked||!isPublishable&&!forceIsDirty)&&(!hasNonPostEntityChanges||isSavingNonPostEntityChanges),isToggleDisabled=(isPublished||isSaving||!isSaveable||!isPublishable&&!forceIsDirty)&&(!hasNonPostEntityChanges||isSavingNonPostEntityChanges);let publishStatus="publish";postStatusHasChanged?publishStatus=postStatus:hasPublishAction?"private"===visibility?publishStatus="private":isBeingScheduled&&(publishStatus="future"):publishStatus="pending";const buttonProps={"aria-disabled":isButtonDisabled,className:"editor-post-publish-button",isBusy:!isAutoSaving&&isSaving,variant:"primary",onClick:this.createOnClick((()=>{isButtonDisabled||(onSubmit(),savePostStatus(publishStatus))}))},toggleProps={"aria-disabled":isToggleDisabled,"aria-expanded":isOpen,className:"editor-post-publish-panel__toggle",isBusy:isSaving&&isPublished,variant:"primary",size:"compact",onClick:this.createOnClick((()=>{isToggleDisabled||onToggle()}))},componentProps=isToggle?toggleProps:buttonProps;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{...componentProps,className:`${componentProps.className} editor-post-publish-button__button`,size:"compact",children:(0,jsx_runtime.jsx)(PublishButtonLabel,{})})})}}PostPublishButton.displayName="PostPublishButton";const post_publish_button=(0,higher_order_compose.A)([(0,with_select.A)((select=>{var _getCurrentPost$_link;const{isSavingPost,isAutosavingPost,isEditedPostBeingScheduled,getEditedPostVisibility,isCurrentPostPublished,isEditedPostSaveable,isEditedPostPublishable,isPostSavingLocked,getCurrentPost,getCurrentPostType,getCurrentPostId,hasNonPostEntityChanges,isSavingNonPostEntityChanges,getEditedPostAttribute,getPostEdits}=select(store_store);return{isSaving:isSavingPost(),isAutoSaving:isAutosavingPost(),isBeingScheduled:isEditedPostBeingScheduled(),visibility:getEditedPostVisibility(),isSaveable:isEditedPostSaveable(),isPostSavingLocked:isPostSavingLocked(),isPublishable:isEditedPostPublishable(),isPublished:isCurrentPostPublished(),hasPublishAction:null!==(_getCurrentPost$_link=getCurrentPost()._links?.["wp:action-publish"])&&void 0!==_getCurrentPost$_link&&_getCurrentPost$_link,postType:getCurrentPostType(),postId:getCurrentPostId(),postStatus:getEditedPostAttribute("status"),postStatusHasChanged:getPostEdits()?.status,hasNonPostEntityChanges:hasNonPostEntityChanges(),isSavingNonPostEntityChanges:isSavingNonPostEntityChanges()}})),(0,with_dispatch.A)((dispatch=>{const{editPost,savePost}=dispatch(store_store);return{savePostStatus:status=>{editPost({status},{undoIgnore:!0}),savePost()}}}))])(PostPublishButton);const post_publish_button_or_toggle=(0,higher_order_compose.A)((0,with_select.A)((select=>{var _select$getCurrentPos;return{hasPublishAction:null!==(_select$getCurrentPos=select(store_store).getCurrentPost()?._links?.["wp:action-publish"])&&void 0!==_select$getCurrentPos&&_select$getCurrentPos,isBeingScheduled:select(store_store).isEditedPostBeingScheduled(),isPending:select(store_store).isCurrentPostPending(),isPublished:select(store_store).isCurrentPostPublished(),isPublishSidebarEnabled:select(store_store).isPublishSidebarEnabled(),isPublishSidebarOpened:select(store_store).isPublishSidebarOpened(),isScheduled:select(store_store).isCurrentPostScheduled(),postStatus:select(store_store).getEditedPostAttribute("status"),postStatusHasChanged:select(store_store).getPostEdits()?.status}})),(0,with_dispatch.A)((dispatch=>{const{togglePublishSidebar}=dispatch(store_store);return{togglePublishSidebar}})))((function PostPublishButtonOrToggle({forceIsDirty,hasPublishAction,isBeingScheduled,isPending,isPublished,isPublishSidebarEnabled,isPublishSidebarOpened,isScheduled,togglePublishSidebar,setEntitiesSavedStatesCallback,postStatusHasChanged,postStatus}){const isSmallerThanMediumViewport=(0,use_viewport_match.A)("medium","<");let component;return component=isPublished||postStatusHasChanged&&!["future","publish"].includes(postStatus)||isScheduled&&isBeingScheduled||isPending&&!hasPublishAction&&!isSmallerThanMediumViewport?"button":isSmallerThanMediumViewport||isPublishSidebarEnabled?"toggle":"button",(0,jsx_runtime.jsx)(post_publish_button,{forceIsDirty,isOpen:isPublishSidebarOpened,isToggle:"toggle"===component,onToggle:togglePublishSidebar,setEntitiesSavedStatesCallback})}));var animate=__webpack_require__("./packages/components/build-module/animate/index.js");const cloud_upload=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M17.3 10.1C17.3 7.60001 15.2 5.70001 12.5 5.70001C10.3 5.70001 8.4 7.10001 7.9 9.00001H7.7C5.7 9.00001 4 10.7 4 12.8C4 14.9 5.7 16.6 7.7 16.6H9.5V15.2H7.7C6.5 15.2 5.5 14.1 5.5 12.9C5.5 11.7 6.5 10.5 7.7 10.5H9L9.3 9.40001C9.7 8.10001 11 7.20001 12.5 7.20001C14.3 7.20001 15.8 8.50001 15.8 10.1V11.4L17.1 11.6C17.9 11.7 18.5 12.5 18.5 13.4C18.5 14.4 17.7 15.2 16.8 15.2H14.5V16.6H16.7C18.5 16.6 19.9 15.1 19.9 13.3C20 11.7 18.8 10.4 17.3 10.1Z M14.1245 14.2426L15.1852 13.182L12.0032 10L8.82007 13.1831L9.88072 14.2438L11.25 12.8745V18H12.75V12.8681L14.1245 14.2426Z"})}),library_cloud=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M17.3 10.1c0-2.5-2.1-4.4-4.8-4.4-2.2 0-4.1 1.4-4.6 3.3h-.2C5.7 9 4 10.7 4 12.8c0 2.1 1.7 3.8 3.7 3.8h9c1.8 0 3.2-1.5 3.2-3.3.1-1.6-1.1-2.9-2.6-3.2zm-.5 5.1h-9c-1.2 0-2.2-1.1-2.2-2.3s1-2.4 2.2-2.4h1.3l.3-1.1c.4-1.3 1.7-2.2 3.2-2.2 1.8 0 3.3 1.3 3.3 2.9v1.3l1.3.2c.8.1 1.4.9 1.4 1.8-.1 1-.9 1.8-1.8 1.8z"})}),library_drafts=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm8 4a4 4 0 0 0 4-4H8a4 4 0 0 0 4 4Z"})}),library_pending=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm8 4a4 4 0 0 1-4-4h4V8a4 4 0 0 1 0 8Z"})}),not_allowed=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.5A6.5 6.5 0 0 1 6.93 7.931l9.139 9.138A6.473 6.473 0 0 1 12 18.5Zm5.123-2.498a6.5 6.5 0 0 0-9.124-9.124l9.124 9.124ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z"})}),library_scheduled=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm9 1V8h-1.5v3.5h-2V13H13Z"})}),post_panel_row=(0,react.forwardRef)((({className,label,children},ref)=>(0,jsx_runtime.jsxs)(h_stack_component.A,{className:(0,clsx.A)("editor-post-panel__row",className),ref,children:[label&&(0,jsx_runtime.jsx)("div",{className:"editor-post-panel__row-label",children:label}),(0,jsx_runtime.jsx)("div",{className:"editor-post-panel__row-control",children})]})));function PostStickyCheck({children}){const{hasStickyAction,postType}=(0,use_select.A)((select=>{var _post$_links$wpActio;const post=select(store_store).getCurrentPost();return{hasStickyAction:null!==(_post$_links$wpActio=post._links?.["wp:action-sticky"])&&void 0!==_post$_links$wpActio&&_post$_links$wpActio,postType:select(store_store).getCurrentPostType()}}),[]);return"post"===postType&&hasStickyAction?children:null}function PostSticky(){const postSticky=(0,use_select.A)((select=>{var _select$getEditedPost;return null!==(_select$getEditedPost=select(store_store).getEditedPostAttribute("sticky"))&&void 0!==_select$getEditedPost&&_select$getEditedPost}),[]),{editPost}=(0,use_dispatch.A)(store_store);return(0,jsx_runtime.jsx)(PostStickyCheck,{children:(0,jsx_runtime.jsx)(checkbox_control.A,{className:"editor-post-sticky__checkbox-control",label:(0,i18n_build_module.__)("Sticky"),help:(0,i18n_build_module.__)("Pin this post to the top of the blog"),checked:postSticky,onChange:()=>editPost({sticky:!postSticky}),__nextHasNoMarginBottom:!0})})}var startOfMonth=__webpack_require__("./node_modules/date-fns/startOfMonth.mjs"),endOfMonth=__webpack_require__("./node_modules/date-fns/endOfMonth.mjs"),constants=__webpack_require__("./node_modules/date-fns/constants.mjs");function parseISO(argument,options){const additionalDigits=options?.additionalDigits??2,dateStrings=function splitDateString(dateString){const dateStrings={},array=dateString.split(patterns.dateTimeDelimiter);let timeString;if(array.length>2)return dateStrings;/:/.test(array[0])?timeString=array[0]:(dateStrings.date=array[0],timeString=array[1],patterns.timeZoneDelimiter.test(dateStrings.date)&&(dateStrings.date=dateString.split(patterns.timeZoneDelimiter)[0],timeString=dateString.substr(dateStrings.date.length,dateString.length)));if(timeString){const token=patterns.timezone.exec(timeString);token?(dateStrings.time=timeString.replace(token[1],""),dateStrings.timezone=token[1]):dateStrings.time=timeString}return dateStrings}(argument);let date;if(dateStrings.date){const parseYearResult=function parseYear(dateString,additionalDigits){const regex=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+additionalDigits)+"})|(\\d{2}|[+-]\\d{"+(2+additionalDigits)+"})$)"),captures=dateString.match(regex);if(!captures)return{year:NaN,restDateString:""};const year=captures[1]?parseInt(captures[1]):null,century=captures[2]?parseInt(captures[2]):null;return{year:null===century?year:100*century,restDateString:dateString.slice((captures[1]||captures[2]).length)}}(dateStrings.date,additionalDigits);date=function parseDate(dateString,year){if(null===year)return new Date(NaN);const captures=dateString.match(dateRegex);if(!captures)return new Date(NaN);const isWeekDate=!!captures[4],dayOfYear=parseDateUnit(captures[1]),month=parseDateUnit(captures[2])-1,day=parseDateUnit(captures[3]),week=parseDateUnit(captures[4]),dayOfWeek=parseDateUnit(captures[5])-1;if(isWeekDate)return function validateWeekDate(_year,week,day){return week>=1&&week<=53&&day>=0&&day<=6}(0,week,dayOfWeek)?function dayOfISOWeekYear(isoWeekYear,week,day){const date=new Date(0);date.setUTCFullYear(isoWeekYear,0,4);const fourthOfJanuaryDay=date.getUTCDay()||7,diff=7*(week-1)+day+1-fourthOfJanuaryDay;return date.setUTCDate(date.getUTCDate()+diff),date}(year,week,dayOfWeek):new Date(NaN);{const date=new Date(0);return function validateDate(year,month,date){return month>=0&&month<=11&&date>=1&&date<=(daysInMonths[month]||(isLeapYearIndex(year)?29:28))}(year,month,day)&&function validateDayOfYearDate(year,dayOfYear){return dayOfYear>=1&&dayOfYear<=(isLeapYearIndex(year)?366:365)}(year,dayOfYear)?(date.setUTCFullYear(year,month,Math.max(dayOfYear,day)),date):new Date(NaN)}}(parseYearResult.restDateString,parseYearResult.year)}if(!date||isNaN(date.getTime()))return new Date(NaN);const timestamp=date.getTime();let offset,time=0;if(dateStrings.time&&(time=function parseTime(timeString){const captures=timeString.match(timeRegex);if(!captures)return NaN;const hours=parseTimeUnit(captures[1]),minutes=parseTimeUnit(captures[2]),seconds=parseTimeUnit(captures[3]);if(!function validateTime(hours,minutes,seconds){if(24===hours)return 0===minutes&&0===seconds;return seconds>=0&&seconds<60&&minutes>=0&&minutes<60&&hours>=0&&hours<25}(hours,minutes,seconds))return NaN;return hours*constants.s0+minutes*constants.Cg+1e3*seconds}(dateStrings.time),isNaN(time)))return new Date(NaN);if(!dateStrings.timezone){const dirtyDate=new Date(timestamp+time),result=new Date(0);return result.setFullYear(dirtyDate.getUTCFullYear(),dirtyDate.getUTCMonth(),dirtyDate.getUTCDate()),result.setHours(dirtyDate.getUTCHours(),dirtyDate.getUTCMinutes(),dirtyDate.getUTCSeconds(),dirtyDate.getUTCMilliseconds()),result}return offset=function parseTimezone(timezoneString){if("Z"===timezoneString)return 0;const captures=timezoneString.match(timezoneRegex);if(!captures)return 0;const sign="+"===captures[1]?-1:1,hours=parseInt(captures[2]),minutes=captures[3]&&parseInt(captures[3])||0;if(!function validateTimezone(_hours,minutes){return minutes>=0&&minutes<=59}(0,minutes))return NaN;return sign*(hours*constants.s0+minutes*constants.Cg)}(dateStrings.timezone),isNaN(offset)?new Date(NaN):new Date(timestamp+time+offset)}const patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function parseDateUnit(value){return value?parseInt(value):1}function parseTimeUnit(value){return value&&parseFloat(value.replace(",","."))||0}const daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(year){return year%400==0||year%4==0&&year%100!=0}const{PrivatePublishDateTimePicker}=lock_unlock_unlock(build_module.jb);function PostSchedule(props){return(0,jsx_runtime.jsx)(PrivatePostSchedule,{...props,showPopoverHeaderActions:!0,isCompact:!1})}function PrivatePostSchedule({onClose,showPopoverHeaderActions,isCompact}){const{postDate,postType}=(0,use_select.A)((select=>({postDate:select(store_store).getEditedPostAttribute("date"),postType:select(store_store).getCurrentPostType()})),[]),{editPost}=(0,use_dispatch.A)(store_store),[previewedMonth,setPreviewedMonth]=(0,react.useState)((0,startOfMonth.w)(new Date(postDate))),eventsByPostType=(0,use_select.A)((select=>select(core_data_build_module.M_).getEntityRecords("postType",postType,{status:"publish,future",after:(0,startOfMonth.w)(previewedMonth).toISOString(),before:(0,endOfMonth.p)(previewedMonth).toISOString(),exclude:[select(store_store).getCurrentPostId()],per_page:100,_fields:"id,date"})),[previewedMonth,postType]),events=(0,react.useMemo)((()=>(eventsByPostType||[]).map((({date:eventDate})=>({date:new Date(eventDate)})))),[eventsByPostType]),settings=(0,date_build_module.mt)(),is12HourTime=/a(?!\\)/i.test(settings.formats.time.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));return(0,jsx_runtime.jsx)(PrivatePublishDateTimePicker,{currentDate:postDate,onChange:date=>editPost({date}),is12Hour:is12HourTime,dateOrder:(0,i18n_build_module._x)("dmy","date order"),events,onMonthPreviewed:date=>setPreviewedMonth(parseISO(date)),onClose,isCompact,showPopoverHeaderActions})}const postStatusesInfo={"auto-draft":{label:(0,i18n_build_module.__)("Draft"),icon:library_drafts},draft:{label:(0,i18n_build_module.__)("Draft"),icon:library_drafts},pending:{label:(0,i18n_build_module.__)("Pending"),icon:library_pending},private:{label:(0,i18n_build_module.__)("Private"),icon:not_allowed},future:{label:(0,i18n_build_module.__)("Scheduled"),icon:library_scheduled},publish:{label:(0,i18n_build_module.__)("Published"),icon:library_published}},STATUS_OPTIONS=[{label:(0,i18n_build_module.__)("Draft"),value:"draft",description:(0,i18n_build_module.__)("Not ready to publish.")},{label:(0,i18n_build_module.__)("Pending"),value:"pending",description:(0,i18n_build_module.__)("Waiting for review before publishing.")},{label:(0,i18n_build_module.__)("Private"),value:"private",description:(0,i18n_build_module.__)("Only visible to site admins and editors.")},{label:(0,i18n_build_module.__)("Scheduled"),value:"future",description:(0,i18n_build_module.__)("Publish automatically on a chosen date.")},{label:(0,i18n_build_module.__)("Published"),value:"publish",description:(0,i18n_build_module.__)("Visible to everyone.")}],DESIGN_POST_TYPES=[constants_TEMPLATE_POST_TYPE,constants_TEMPLATE_PART_POST_TYPE,PATTERN_POST_TYPE,NAVIGATION_POST_TYPE];function PostStatus(){const{status,date,password,postId,postType,canEdit}=(0,use_select.A)((select=>{var _getCurrentPost$_link;const{getEditedPostAttribute,getCurrentPostId,getCurrentPostType,getCurrentPost}=select(store_store);return{status:getEditedPostAttribute("status"),date:getEditedPostAttribute("date"),password:getEditedPostAttribute("password"),postId:getCurrentPostId(),postType:getCurrentPostType(),canEdit:null!==(_getCurrentPost$_link=getCurrentPost()._links?.["wp:action-publish"])&&void 0!==_getCurrentPost$_link&&_getCurrentPost$_link}}),[]),[showPassword,setShowPassword]=(0,react.useState)(!!password),passwordInputId=(0,use_instance_id.A)(PostStatus,"editor-change-status__password-input"),{editEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,"aria-label":(0,i18n_build_module.__)("Status & visibility"),headerTitle:(0,i18n_build_module.__)("Status & visibility"),placement:"left-start",offset:36,shift:!0})),[popoverAnchor]);if(DESIGN_POST_TYPES.includes(postType))return null;const updatePost=({status:newStatus=status,password:newPassword=password,date:newDate=date})=>{editEntityRecord("postType",postType,postId,{status:newStatus,date:newDate,password:newPassword})},handleTogglePassword=value=>{setShowPassword(value),value||updatePost({password:""})},handleStatus=value=>{let newDate=date,newPassword=password;"future"===status&&new Date(date)>new Date&&(newDate=null),"private"===value&&password&&(newPassword=""),updatePost({status:value,date:newDate,password:newPassword})};return(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Status"),ref:setPopoverAnchor,children:canEdit?(0,jsx_runtime.jsx)(dropdown.A,{className:"editor-post-status",contentClassName:"editor-change-status__content",popoverProps,focusOnMount:!0,renderToggle:({onToggle,isOpen})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"editor-post-status__toggle",variant:"tertiary",size:"compact",onClick:onToggle,icon:postStatusesInfo[status]?.icon,"aria-label":(0,i18n_build_module.nv)((0,i18n_build_module.__)("Change status: %s"),postStatusesInfo[status]?.label),"aria-expanded":isOpen,children:postStatusesInfo[status]?.label}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Status & visibility"),onClose}),(0,jsx_runtime.jsx)("form",{children:(0,jsx_runtime.jsxs)(component.A,{spacing:4,children:[(0,jsx_runtime.jsx)(radio_control.A,{className:"editor-change-status__options",hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Status"),options:STATUS_OPTIONS,onChange:handleStatus,selected:"auto-draft"===status?"draft":status}),"future"===status&&(0,jsx_runtime.jsx)("div",{className:"editor-change-status__publish-date-wrapper",children:(0,jsx_runtime.jsx)(PrivatePostSchedule,{showPopoverHeaderActions:!1,isCompact:!0})}),"private"!==status&&(0,jsx_runtime.jsxs)(component.A,{as:"fieldset",spacing:4,className:"editor-change-status__password-fieldset",children:[(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Password protected"),help:(0,i18n_build_module.__)("Only visible to those who know the password"),checked:showPassword,onChange:handleTogglePassword}),showPassword&&(0,jsx_runtime.jsx)("div",{className:"editor-change-status__password-input",children:(0,jsx_runtime.jsx)(text_control.A,{label:(0,i18n_build_module.__)("Password"),onChange:value=>updatePost({password:value}),value:password,placeholder:(0,i18n_build_module.__)("Use a secure password"),type:"text",id:passwordInputId,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,maxLength:255})})]}),(0,jsx_runtime.jsx)(PostSticky,{})]})})]})}):(0,jsx_runtime.jsx)("div",{className:"editor-post-status is-read-only",children:postStatusesInfo[status]?.label})})}function PostSavedState({forceIsDirty}){const[forceSavedMessage,setForceSavedMessage]=(0,react.useState)(!1),isLargeViewport=(0,use_viewport_match.A)("small"),{isAutosaving,isDirty,isNew,isPublished,isSaveable,isSaving,isScheduled,hasPublishAction,showIconLabels,postStatus,postStatusHasChanged}=(0,use_select.A)((select=>{var _getCurrentPost$_link;const{isEditedPostNew,isCurrentPostPublished,isCurrentPostScheduled,isEditedPostDirty,isSavingPost,isEditedPostSaveable,getCurrentPost,isAutosavingPost,getEditedPostAttribute,getPostEdits}=select(store_store),{get}=select(store.M);return{isAutosaving:isAutosavingPost(),isDirty:forceIsDirty||isEditedPostDirty(),isNew:isEditedPostNew(),isPublished:isCurrentPostPublished(),isSaving:isSavingPost(),isSaveable:isEditedPostSaveable(),isScheduled:isCurrentPostScheduled(),hasPublishAction:null!==(_getCurrentPost$_link=getCurrentPost()?._links?.["wp:action-publish"])&&void 0!==_getCurrentPost$_link&&_getCurrentPost$_link,showIconLabels:get("core","showIconLabels"),postStatus:getEditedPostAttribute("status"),postStatusHasChanged:!!getPostEdits()?.status}}),[forceIsDirty]),isPending="pending"===postStatus,{savePost}=(0,use_dispatch.A)(store_store),wasSaving=(0,use_previous.A)(isSaving);if((0,react.useEffect)((()=>{let timeoutId;return wasSaving&&!isSaving&&(setForceSavedMessage(!0),timeoutId=setTimeout((()=>{setForceSavedMessage(!1)}),1e3)),()=>clearTimeout(timeoutId)}),[isSaving]),!hasPublishAction&&isPending)return null;const isIneligibleStatus=!["pending","draft","auto-draft"].includes(postStatus)&&STATUS_OPTIONS.map((({value})=>value)).includes(postStatus);if(isPublished||isScheduled||isIneligibleStatus||postStatusHasChanged&&["pending","draft"].includes(postStatus))return null;const label=isPending?(0,i18n_build_module.__)("Save as pending"):(0,i18n_build_module.__)("Save draft"),shortLabel=(0,i18n_build_module.__)("Save"),isSaved=forceSavedMessage||!isNew&&!isDirty,isSavedState=isSaving||isSaved,isDisabled=isSaving||isSaved||!isSaveable;let text;return isSaving?text=isAutosaving?(0,i18n_build_module.__)("Autosaving"):(0,i18n_build_module.__)("Saving"):isSaved?text=(0,i18n_build_module.__)("Saved"):isLargeViewport?text=label:showIconLabels&&(text=shortLabel),(0,jsx_runtime.jsxs)(build_module_button.Ay,{className:isSaveable||isSaving?(0,clsx.A)({"editor-post-save-draft":!isSavedState,"editor-post-saved-state":isSavedState,"is-saving":isSaving,"is-autosaving":isAutosaving,"is-saved":isSaved,[(0,animate.L9)({type:"loading"})]:isSaving}):void 0,onClick:isDisabled?void 0:()=>savePost(),shortcut:isDisabled?void 0:keycodes_build_module.dz.primary("s"),variant:"tertiary",size:"compact",icon:isLargeViewport?void 0:cloud_upload,label:text||label,"aria-disabled":isDisabled,children:[isSavedState&&(0,jsx_runtime.jsx)(icon.A,{icon:isSaved?check.A:library_cloud}),text]})}function PostViewLink(){const{hasLoaded,permalink,isPublished,label,showIconLabels}=(0,use_select.A)((select=>{const postTypeSlug=select(store_store).getCurrentPostType(),postType=select(core_data_build_module.M_).getPostType(postTypeSlug),{get}=select(store.M);return{permalink:select(store_store).getPermalink(),isPublished:select(store_store).isCurrentPostPublished(),label:postType?.labels.view_item,hasLoaded:!!postType,showIconLabels:get("core","showIconLabels")}}),[]);return isPublished&&permalink&&hasLoaded?(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:external.A,label:label||(0,i18n_build_module.__)("View post"),href:permalink,target:"_blank",showTooltip:!showIconLabels,size:"compact"}):null}var desktop=__webpack_require__("./packages/icons/build-module/library/desktop.js"),mobile=__webpack_require__("./packages/icons/build-module/library/mobile.js"),tablet=__webpack_require__("./packages/icons/build-module/library/tablet.js");function PreviewDropdown({forceIsAutosaveable,disabled}){const{deviceType,homeUrl,isTemplate,isViewable,showIconLabels}=(0,use_select.A)((select=>{var _getPostType$viewable;const{getDeviceType,getCurrentPostType}=select(store_store),{getEntityRecord,getPostType}=select(core_data_build_module.M_),{get}=select(store.M),_currentPostType=getCurrentPostType();return{deviceType:getDeviceType(),homeUrl:getEntityRecord("root","__unstableBase")?.home,isTemplate:"wp_template"===_currentPostType,isViewable:null!==(_getPostType$viewable=getPostType(_currentPostType)?.viewable)&&void 0!==_getPostType$viewable&&_getPostType$viewable,showIconLabels:get("core","showIconLabels")}}),[]),{setDeviceType}=(0,use_dispatch.A)(store_store),{resetZoomLevel}=lock_unlock_unlock((0,use_dispatch.A)(build_module.M_)),handleDevicePreviewChange=newDeviceType=>{setDeviceType(newDeviceType),resetZoomLevel()};if((0,use_viewport_match.A)("medium","<"))return null;const toggleProps={className:"editor-preview-dropdown__toggle",iconPosition:"right",size:"compact",showTooltip:!showIconLabels,disabled,accessibleWhenDisabled:disabled},menuProps={"aria-label":(0,i18n_build_module.__)("View options")},deviceIcons={desktop:desktop.A,mobile:mobile.A,tablet:tablet.A},choices=[{value:"Desktop",label:(0,i18n_build_module.__)("Desktop"),icon:desktop.A},{value:"Tablet",label:(0,i18n_build_module.__)("Tablet"),icon:tablet.A},{value:"Mobile",label:(0,i18n_build_module.__)("Mobile"),icon:mobile.A}];return(0,jsx_runtime.jsx)(dropdown_menu.A,{className:(0,clsx.A)("editor-preview-dropdown",`editor-preview-dropdown--${deviceType.toLowerCase()}`),popoverProps:{placement:"bottom-end"},toggleProps,menuProps,icon:deviceIcons[deviceType.toLowerCase()],label:(0,i18n_build_module.__)("View"),disableOpenOnArrowDown:disabled,children:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(menu_items_choice.A,{choices,value:deviceType,onSelect:handleDevicePreviewChange})}),isTemplate&&(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsxs)(menu_item.A,{href:homeUrl,target:"_blank",icon:external.A,onClick:onClose,children:[(0,i18n_build_module.__)("View site"),(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"span",children:(0,i18n_build_module.__)("(opens in a new tab)")})]})}),isViewable&&(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(PostPreviewButton,{className:"editor-preview-dropdown__button-external",role:"menuitem",forceIsAutosaveable,"aria-label":(0,i18n_build_module.__)("Preview in new tab"),textContent:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,i18n_build_module.__)("Preview in new tab"),(0,jsx_runtime.jsx)(build_module_icon.A,{icon:external.A})]}),onPreview:onClose})}),(0,jsx_runtime.jsx)(action_item.Slot,{name:"core/plugin-preview-menu",as:menu_group.A,fillProps:{onClick:onClose}})]})})}const library_square=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,jsx_runtime.jsx)(svg.wA,{fill:"none",d:"M5.75 12.75V18.25H11.25M12.75 5.75H18.25V11.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"square"})}),zoom_out_toggle=({disabled})=>{const{isZoomOut,showIconLabels}=(0,use_select.A)((select=>({isZoomOut:lock_unlock_unlock(select(build_module.M_)).isZoomOut(),showIconLabels:select(store.M).get("core","showIconLabels")}))),{resetZoomLevel,setZoomLevel}=lock_unlock_unlock((0,use_dispatch.A)(build_module.M_));return(0,jsx_runtime.jsx)(build_module_button.Ay,{accessibleWhenDisabled:!0,disabled,onClick:()=>{isZoomOut?resetZoomLevel():setZoomLevel("auto-scaled")},icon:library_square,label:(0,i18n_build_module.__)("Zoom Out"),isPressed:isZoomOut,size:"compact",showTooltip:!showIconLabels})},toolbarVariations={distractionFreeDisabled:{y:"-50px"},distractionFreeHover:{y:0},distractionFreeHidden:{y:"-50px"},visible:{y:0},hidden:{y:0}},backButtonVariations={distractionFreeDisabled:{x:"-100%"},distractionFreeHover:{x:0},distractionFreeHidden:{x:"-100%"},visible:{x:0},hidden:{x:0}};const components_header=function header_Header({customSaveButton,forceIsDirty,forceDisableBlockTools,setEntitiesSavedStatesCallback,title,isEditorIframed}){const isWideViewport=(0,use_viewport_match.A)("large"),isLargeViewport=(0,use_viewport_match.A)("medium"),isTooNarrowForDocumentBar=(0,use_media_query.A)("(max-width: 403px)"),{postType,isTextEditor,isPublishSidebarOpened,showIconLabels,hasFixedToolbar,hasBlockSelection,isNestedEntity}=(0,use_select.A)((select=>{const{get:getPreference}=select(store.M),{getEditorMode,getEditorSettings,getCurrentPostType,isPublishSidebarOpened:_isPublishSidebarOpened}=select(store_store);return{postType:getCurrentPostType(),isTextEditor:"text"===getEditorMode(),isPublishSidebarOpened:_isPublishSidebarOpened(),showIconLabels:getPreference("core","showIconLabels"),hasFixedToolbar:getPreference("core","fixedToolbar"),hasBlockSelection:!!select(build_module.M_).getBlockSelectionStart(),isNestedEntity:!!getEditorSettings().onNavigateToPreviousEntityRecord}}),[]),canBeZoomedOut=["post","page","wp_template"].includes(postType),[isBlockToolsCollapsed,setIsBlockToolsCollapsed]=(0,react.useState)(!0),hasCenter=(!hasBlockSelection||isBlockToolsCollapsed)&&!isTooNarrowForDocumentBar,hasBackButton=(()=>{const fills=(0,use_slot_fills.A)(slotName);return Boolean(fills&&fills.length)})();return(0,jsx_runtime.jsxs)("div",{className:"editor-header edit-post-header",children:[hasBackButton&&(0,jsx_runtime.jsx)(motion.P.div,{className:"editor-header__back-button",variants:backButtonVariations,transition:{type:"tween"},children:(0,jsx_runtime.jsx)(back_button.Slot,{})}),(0,jsx_runtime.jsxs)(motion.P.div,{variants:toolbarVariations,className:"editor-header__toolbar",transition:{type:"tween"},children:[(0,jsx_runtime.jsx)(document_tools,{disableBlockTools:forceDisableBlockTools||isTextEditor}),hasFixedToolbar&&isLargeViewport&&(0,jsx_runtime.jsx)(CollapsibleBlockToolbar,{isCollapsed:isBlockToolsCollapsed,onToggle:setIsBlockToolsCollapsed})]}),hasCenter&&(0,jsx_runtime.jsx)(motion.P.div,{className:"editor-header__center",variants:toolbarVariations,transition:{type:"tween"},children:(0,jsx_runtime.jsx)(DocumentBar,{title})}),(0,jsx_runtime.jsxs)(motion.P.div,{variants:toolbarVariations,transition:{type:"tween"},className:"editor-header__settings",children:[!customSaveButton&&!isPublishSidebarOpened&&(0,jsx_runtime.jsx)(PostSavedState,{forceIsDirty}),canBeZoomedOut&&isEditorIframed&&isWideViewport&&(0,jsx_runtime.jsx)(zoom_out_toggle,{disabled:forceDisableBlockTools}),(0,jsx_runtime.jsx)(PreviewDropdown,{forceIsAutosaveable:forceIsDirty,disabled:isNestedEntity}),(0,jsx_runtime.jsx)(PostPreviewButton,{className:"editor-header__post-preview-button",forceIsAutosaveable:forceIsDirty}),(0,jsx_runtime.jsx)(PostViewLink,{}),(isWideViewport||!showIconLabels)&&(0,jsx_runtime.jsx)(pinned_items.Slot,{scope:"core"}),!customSaveButton&&(0,jsx_runtime.jsx)(post_publish_button_or_toggle,{forceIsDirty,setEntitiesSavedStatesCallback}),(0,jsx_runtime.jsx)(CollabSidebar,{}),customSaveButton,(0,jsx_runtime.jsx)(MoreMenu,{})]})]})},{PrivateInserterLibrary}=lock_unlock_unlock(build_module.jb);function InserterSidebar(){const{blockSectionRootClientId,inserterSidebarToggleRef,inserter,showMostUsedBlocks,sidebarIsOpened}=(0,use_select.A)((select=>{const{getInserterSidebarToggleRef,getInserter,isPublishSidebarOpened}=lock_unlock_unlock(select(store_store)),{getBlockRootClientId,isZoomOut,getSectionRootClientId}=lock_unlock_unlock(select(build_module.M_)),{get}=select(store.M),{getActiveComplementaryArea}=select(interface_build_module_store_store);return{inserterSidebarToggleRef:getInserterSidebarToggleRef(),inserter:getInserter(),showMostUsedBlocks:get("core","mostUsedBlocks"),blockSectionRootClientId:(()=>{if(isZoomOut()){const sectionRootClientId=getSectionRootClientId();if(sectionRootClientId)return sectionRootClientId}return getBlockRootClientId()})(),sidebarIsOpened:!(!getActiveComplementaryArea("core")&&!isPublishSidebarOpened())}}),[]),{setIsInserterOpened}=(0,use_dispatch.A)(store_store),{disableComplementaryArea}=(0,use_dispatch.A)(interface_build_module_store_store),isMobileViewport=(0,use_viewport_match.A)("medium","<"),libraryRef=(0,react.useRef)(),closeInserterSidebar=(0,react.useCallback)((()=>{setIsInserterOpened(!1),inserterSidebarToggleRef.current?.focus()}),[inserterSidebarToggleRef,setIsInserterOpened]),closeOnEscape=(0,react.useCallback)((event=>{event.keyCode!==keycodes_build_module._f||event.defaultPrevented||(event.preventDefault(),closeInserterSidebar())}),[closeInserterSidebar]),inserterContents=(0,jsx_runtime.jsx)("div",{className:"editor-inserter-sidebar__content",children:(0,jsx_runtime.jsx)(PrivateInserterLibrary,{showMostUsedBlocks,showInserterHelpPanel:!0,shouldFocusBlock:isMobileViewport,rootClientId:blockSectionRootClientId,onSelect:inserter.onSelect,__experimentalInitialTab:inserter.tab,__experimentalInitialCategory:inserter.category,__experimentalFilterValue:inserter.filterValue,onPatternCategorySelection:sidebarIsOpened?()=>disableComplementaryArea("core"):void 0,ref:libraryRef,onClose:closeInserterSidebar})});return(0,jsx_runtime.jsx)("div",{onKeyDown:closeOnEscape,className:"editor-inserter-sidebar",children:inserterContents})}var use_focus_on_mount=__webpack_require__("./packages/compose/build-module/hooks/use-focus-on-mount/index.js"),use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),dom_build_module=__webpack_require__("./packages/dom/build-module/index.js"),wordcount_build_module=__webpack_require__("./packages/wordcount/build-module/index.js");function CharacterCount(){const content=(0,use_select.A)((select=>select(store_store).getEditedPostAttribute("content")),[]);return(0,wordcount_build_module.U)(content,"characters_including_spaces")}function WordCount(){const content=(0,use_select.A)((select=>select(store_store).getEditedPostAttribute("content")),[]),wordCountType=(0,i18n_build_module._x)("words","Word count type. Do not translate!");return(0,jsx_runtime.jsx)("span",{className:"word-count",children:(0,wordcount_build_module.U)(content,wordCountType)})}const AVERAGE_READING_RATE=189;function TimeToRead(){const content=(0,use_select.A)((select=>select(store_store).getEditedPostAttribute("content")),[]),wordCountType=(0,i18n_build_module._x)("words","Word count type. Do not translate!"),minutesToRead=Math.round((0,wordcount_build_module.U)(content,wordCountType)/AVERAGE_READING_RATE),minutesToReadString=0===minutesToRead?(0,create_interpolate_element.A)((0,i18n_build_module.__)("<span>< 1</span> minute"),{span:(0,jsx_runtime.jsx)("span",{})}):(0,create_interpolate_element.A)((0,i18n_build_module.nv)((0,i18n_build_module._n)("<span>%d</span> minute","<span>%d</span> minutes",minutesToRead),minutesToRead),{span:(0,jsx_runtime.jsx)("span",{})});return(0,jsx_runtime.jsx)("span",{className:"time-to-read",children:minutesToReadString})}var rich_text_build_module=__webpack_require__("./packages/rich-text/build-module/index.js");const document_outline_item=({children,isValid,level,href,onSelect})=>(0,jsx_runtime.jsx)("li",{className:(0,clsx.A)("document-outline__item",`is-${level.toLowerCase()}`,{"is-invalid":!isValid}),children:(0,jsx_runtime.jsxs)("a",{href,className:"document-outline__button",onClick:onSelect,children:[(0,jsx_runtime.jsx)("span",{className:"document-outline__emdash","aria-hidden":"true"}),(0,jsx_runtime.jsx)("strong",{className:"document-outline__level",children:level}),(0,jsx_runtime.jsx)("span",{className:"document-outline__item-content",children})]})}),emptyHeadingContent=(0,jsx_runtime.jsx)("em",{children:(0,i18n_build_module.__)("(Empty heading)")}),incorrectLevelContent=[(0,jsx_runtime.jsx)("br",{},"incorrect-break"),(0,jsx_runtime.jsx)("em",{children:(0,i18n_build_module.__)("(Incorrect heading level)")},"incorrect-message")],singleH1Headings=[(0,jsx_runtime.jsx)("br",{},"incorrect-break-h1"),(0,jsx_runtime.jsx)("em",{children:(0,i18n_build_module.__)("(Your theme may already use a H1 for the post title)")},"incorrect-message-h1")],multipleH1Headings=[(0,jsx_runtime.jsx)("br",{},"incorrect-break-multiple-h1"),(0,jsx_runtime.jsx)("em",{children:(0,i18n_build_module.__)("(Multiple H1 headings are not recommended)")},"incorrect-message-multiple-h1")];function EmptyOutlineIllustration(){return(0,jsx_runtime.jsxs)(svg.t4,{width:"138",height:"148",viewBox:"0 0 138 148",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,jsx_runtime.jsx)(svg.rw,{width:"138",height:"148",rx:"4",fill:"#F0F6FC"}),(0,jsx_runtime.jsx)(svg.N1,{x1:"44",y1:"28",x2:"24",y2:"28",stroke:"#DDDDDD"}),(0,jsx_runtime.jsx)(svg.rw,{x:"48",y:"16",width:"27",height:"23",rx:"4",fill:"#DDDDDD"}),(0,jsx_runtime.jsx)(svg.wA,{d:"M54.7585 32V23.2727H56.6037V26.8736H60.3494V23.2727H62.1903V32H60.3494V28.3949H56.6037V32H54.7585ZM67.4574 23.2727V32H65.6122V25.0241H65.5611L63.5625 26.277V24.6406L65.723 23.2727H67.4574Z",fill:"black"}),(0,jsx_runtime.jsx)(svg.N1,{x1:"55",y1:"59",x2:"24",y2:"59",stroke:"#DDDDDD"}),(0,jsx_runtime.jsx)(svg.rw,{x:"59",y:"47",width:"29",height:"23",rx:"4",fill:"#DDDDDD"}),(0,jsx_runtime.jsx)(svg.wA,{d:"M65.7585 63V54.2727H67.6037V57.8736H71.3494V54.2727H73.1903V63H71.3494V59.3949H67.6037V63H65.7585ZM74.6605 63V61.6705L77.767 58.794C78.0313 58.5384 78.2528 58.3082 78.4318 58.1037C78.6136 57.8991 78.7514 57.6989 78.8452 57.5028C78.9389 57.304 78.9858 57.0895 78.9858 56.8594C78.9858 56.6037 78.9276 56.3835 78.8111 56.1989C78.6946 56.0114 78.5355 55.8679 78.3338 55.7685C78.1321 55.6662 77.9034 55.6151 77.6477 55.6151C77.3807 55.6151 77.1477 55.669 76.9489 55.777C76.75 55.8849 76.5966 56.0398 76.4886 56.2415C76.3807 56.4432 76.3267 56.6832 76.3267 56.9616H74.5753C74.5753 56.3906 74.7045 55.8949 74.9631 55.4744C75.2216 55.054 75.5838 54.7287 76.0497 54.4986C76.5156 54.2685 77.0526 54.1534 77.6605 54.1534C78.2855 54.1534 78.8295 54.2642 79.2926 54.4858C79.7585 54.7045 80.1207 55.0085 80.3793 55.3977C80.6378 55.7869 80.767 56.233 80.767 56.7358C80.767 57.0653 80.7017 57.3906 80.571 57.7116C80.4432 58.0327 80.2145 58.3892 79.8849 58.7812C79.5554 59.1705 79.0909 59.6378 78.4915 60.1832L77.2173 61.4318V61.4915H80.8821V63H74.6605Z",fill:"black"}),(0,jsx_runtime.jsx)(svg.N1,{x1:"80",y1:"90",x2:"24",y2:"90",stroke:"#DDDDDD"}),(0,jsx_runtime.jsx)(svg.rw,{x:"84",y:"78",width:"30",height:"23",rx:"4",fill:"#F0B849"}),(0,jsx_runtime.jsx)(svg.wA,{d:"M90.7585 94V85.2727H92.6037V88.8736H96.3494V85.2727H98.1903V94H96.3494V90.3949H92.6037V94H90.7585ZM99.5284 92.4659V91.0128L103.172 85.2727H104.425V87.2841H103.683L101.386 90.919V90.9872H106.564V92.4659H99.5284ZM103.717 94V92.0227L103.751 91.3793V85.2727H105.482V94H103.717Z",fill:"black"}),(0,jsx_runtime.jsx)(svg.N1,{x1:"66",y1:"121",x2:"24",y2:"121",stroke:"#DDDDDD"}),(0,jsx_runtime.jsx)(svg.rw,{x:"70",y:"109",width:"29",height:"23",rx:"4",fill:"#DDDDDD"}),(0,jsx_runtime.jsx)(svg.wA,{d:"M76.7585 125V116.273H78.6037V119.874H82.3494V116.273H84.1903V125H82.3494V121.395H78.6037V125H76.7585ZM88.8864 125.119C88.25 125.119 87.6832 125.01 87.1861 124.791C86.6918 124.57 86.3011 124.266 86.0142 123.879C85.7301 123.49 85.5838 123.041 85.5753 122.533H87.4332C87.4446 122.746 87.5142 122.933 87.642 123.095C87.7727 123.254 87.946 123.378 88.1619 123.466C88.3778 123.554 88.6207 123.598 88.8906 123.598C89.1719 123.598 89.4205 123.548 89.6364 123.449C89.8523 123.349 90.0213 123.212 90.1435 123.036C90.2656 122.859 90.3267 122.656 90.3267 122.426C90.3267 122.193 90.2614 121.987 90.1307 121.808C90.0028 121.626 89.8182 121.484 89.5767 121.382C89.3381 121.28 89.054 121.229 88.7244 121.229H87.9105V119.874H88.7244C89.0028 119.874 89.2486 119.825 89.4616 119.729C89.6776 119.632 89.8452 119.499 89.9645 119.328C90.0838 119.155 90.1435 118.953 90.1435 118.723C90.1435 118.504 90.0909 118.312 89.9858 118.148C89.8835 117.98 89.7386 117.849 89.5511 117.756C89.3665 117.662 89.1506 117.615 88.9034 117.615C88.6534 117.615 88.4247 117.661 88.2173 117.751C88.0099 117.839 87.8438 117.966 87.7188 118.131C87.5938 118.295 87.527 118.489 87.5185 118.71H85.75C85.7585 118.207 85.902 117.764 86.1804 117.381C86.4588 116.997 86.8338 116.697 87.3054 116.482C87.7798 116.263 88.3153 116.153 88.9119 116.153C89.5142 116.153 90.0412 116.263 90.4929 116.482C90.9446 116.7 91.2955 116.996 91.5455 117.368C91.7983 117.737 91.9233 118.152 91.9205 118.612C91.9233 119.101 91.7713 119.509 91.4645 119.835C91.1605 120.162 90.7642 120.369 90.2756 120.457V120.526C90.9176 120.608 91.4063 120.831 91.7415 121.195C92.0795 121.555 92.2472 122.007 92.2443 122.55C92.2472 123.047 92.1037 123.489 91.8139 123.875C91.527 124.261 91.1307 124.565 90.625 124.787C90.1193 125.009 89.5398 125.119 88.8864 125.119Z",fill:"black"})]})}const computeOutlineHeadings=(blocks=[])=>blocks.flatMap(((block={})=>"core/heading"===block.name?{...block,level:block.attributes.level,isEmpty:isEmptyHeading(block)}:computeOutlineHeadings(block.innerBlocks))),isEmptyHeading=heading=>!heading.attributes.content||0===heading.attributes.content.trim().length;function DocumentOutline({onSelect,isTitleSupported,hasOutlineItemsDisabled}){const{selectBlock}=(0,use_dispatch.A)(build_module.M_),{blocks,title}=(0,use_select.A)((select=>{var _postType$supports$ti;const{getBlocks}=select(build_module.M_),{getEditedPostAttribute}=select(store_store),{getPostType}=select(core_data_build_module.M_),postType=getPostType(getEditedPostAttribute("type"));return{title:getEditedPostAttribute("title"),blocks:getBlocks(),isTitleSupported:null!==(_postType$supports$ti=postType?.supports?.title)&&void 0!==_postType$supports$ti&&_postType$supports$ti}})),headings=computeOutlineHeadings(blocks);if(headings.length<1)return(0,jsx_runtime.jsxs)("div",{className:"editor-document-outline has-no-headings",children:[(0,jsx_runtime.jsx)(EmptyOutlineIllustration,{}),(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("Navigate the structure of your document and address issues like empty or incorrect heading levels.")})]});let prevHeadingLevel=1;const titleNode=document.querySelector(".editor-post-title__input"),hasTitle=isTitleSupported&&title&&titleNode,hasMultipleH1=headings.reduce(((acc,heading)=>({...acc,[heading.level]:(acc[heading.level]||0)+1})),{})[1]>1;return(0,jsx_runtime.jsx)("div",{className:"document-outline",children:(0,jsx_runtime.jsxs)("ul",{children:[hasTitle&&(0,jsx_runtime.jsx)(document_outline_item,{level:(0,i18n_build_module.__)("Title"),isValid:!0,onSelect,href:`#${titleNode.id}`,isDisabled:hasOutlineItemsDisabled,children:title}),headings.map(((item,index)=>{const isIncorrectLevel=item.level>prevHeadingLevel+1,isValid=!(item.isEmpty||isIncorrectLevel||!item.level||1===item.level&&(hasMultipleH1||hasTitle));return prevHeadingLevel=item.level,(0,jsx_runtime.jsxs)(document_outline_item,{level:`H${item.level}`,isValid,isDisabled:hasOutlineItemsDisabled,href:`#block-${item.clientId}`,onSelect:()=>{selectBlock(item.clientId),onSelect?.()},children:[item.isEmpty?emptyHeadingContent:(0,rich_text_build_module.rf)((0,rich_text_build_module.vt)({html:item.attributes.content})),isIncorrectLevel&&incorrectLevelContent,1===item.level&&hasMultipleH1&&multipleH1Headings,hasTitle&&1===item.level&&!hasMultipleH1&&singleH1Headings]},index)}))]})})}function ListViewOutline(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"editor-list-view-sidebar__outline",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.__)("Characters:")}),(0,jsx_runtime.jsx)(text_component.A,{children:(0,jsx_runtime.jsx)(CharacterCount,{})})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.__)("Words:")}),(0,jsx_runtime.jsx)(WordCount,{})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.__)("Time to read:")}),(0,jsx_runtime.jsx)(TimeToRead,{})]})]}),(0,jsx_runtime.jsx)(DocumentOutline,{})]})}const{TabbedSidebar}=lock_unlock_unlock(build_module.jb);function ListViewSidebar(){const{setIsListViewOpened}=(0,use_dispatch.A)(store_store),{getListViewToggleRef}=lock_unlock_unlock((0,use_select.A)(store_store)),focusOnMountRef=(0,use_focus_on_mount.A)("firstElement"),closeListView=(0,react.useCallback)((()=>{setIsListViewOpened(!1),getListViewToggleRef().current?.focus()}),[getListViewToggleRef,setIsListViewOpened]),closeOnEscape=(0,react.useCallback)((event=>{event.keyCode!==keycodes_build_module._f||event.defaultPrevented||(event.preventDefault(),closeListView())}),[closeListView]),[dropZoneElement,setDropZoneElement]=(0,react.useState)(null),[tab,setTab]=(0,react.useState)("list-view"),sidebarRef=(0,react.useRef)(),tabsRef=(0,react.useRef)(),listViewRef=(0,react.useRef)(),listViewContainerRef=(0,use_merge_refs.A)([focusOnMountRef,listViewRef,setDropZoneElement]);const handleToggleListViewShortcut=(0,react.useCallback)((()=>{sidebarRef.current.contains(sidebarRef.current.ownerDocument.activeElement)?closeListView():function handleSidebarFocus(currentTab){const tabPanelFocus=dom_build_module.XC.tabbable.find(tabsRef.current)[0];if("list-view"===currentTab){const listViewApplicationFocus=dom_build_module.XC.tabbable.find(listViewRef.current)[0];(sidebarRef.current.contains(listViewApplicationFocus)?listViewApplicationFocus:tabPanelFocus).focus()}else tabPanelFocus.focus()}(tab)}),[closeListView,tab]);return(0,keyboard_shortcuts_build_module.wk)("core/editor/toggle-list-view",handleToggleListViewShortcut),(0,jsx_runtime.jsx)("div",{className:"editor-list-view-sidebar",onKeyDown:closeOnEscape,ref:sidebarRef,children:(0,jsx_runtime.jsx)(TabbedSidebar,{tabs:[{name:"list-view",title:(0,i18n_build_module._x)("List View","Post overview"),panel:(0,jsx_runtime.jsx)("div",{className:"editor-list-view-sidebar__list-view-container",children:(0,jsx_runtime.jsx)("div",{className:"editor-list-view-sidebar__list-view-panel-content",children:(0,jsx_runtime.jsx)(build_module.as,{dropZoneElement})})}),panelRef:listViewContainerRef},{name:"outline",title:(0,i18n_build_module._x)("Outline","Post overview"),panel:(0,jsx_runtime.jsx)("div",{className:"editor-list-view-sidebar__list-view-container",children:(0,jsx_runtime.jsx)(ListViewOutline,{})})}],onClose:closeListView,onSelect:tabName=>setTab(tabName),defaultTabId:"list-view",ref:tabsRef,closeButtonLabel:(0,i18n_build_module.__)("Close")})})}var spinner=__webpack_require__("./packages/components/build-module/spinner/index.js"),use_focus_return=__webpack_require__("./packages/compose/build-module/hooks/use-focus-return/index.js");const with_focus_return=(0,create_higher_order_component.f)((options=>{const HoC=({onFocusReturn}={})=>WrappedComponent=>props=>{const ref=(0,use_focus_return.A)(onFocusReturn);return(0,jsx_runtime.jsx)("div",{ref,children:(0,jsx_runtime.jsx)(WrappedComponent,{...props})})};if(function isComponentLike(object){return object instanceof react.Component||"function"==typeof object}(options)){const WrappedComponent=options;return HoC()(WrappedComponent)}return HoC(options)}),"withFocusReturn");var use_constrained_tabbing=__webpack_require__("./packages/compose/build-module/hooks/use-constrained-tabbing/index.js");const with_constrained_tabbing=(0,create_higher_order_component.f)((WrappedComponent=>function ComponentWithConstrainedTabbing(props){const ref=(0,use_constrained_tabbing.A)();return(0,jsx_runtime.jsx)("div",{ref,tabIndex:-1,children:(0,jsx_runtime.jsx)(WrappedComponent,{...props})})}),"withConstrainedTabbing");var wordpress=__webpack_require__("./packages/icons/build-module/library/wordpress.js"),filter_url_for_display=__webpack_require__("./packages/url/build-module/filter-url-for-display.js");const visibilityOptions={public:{label:(0,i18n_build_module.__)("Public"),info:(0,i18n_build_module.__)("Visible to everyone.")},private:{label:(0,i18n_build_module.__)("Private"),info:(0,i18n_build_module.__)("Only visible to site admins and editors.")},password:{label:(0,i18n_build_module.__)("Password protected"),info:(0,i18n_build_module.__)("Only those with the password can view this post.")}};function PostVisibility({onClose}){const instanceId=(0,use_instance_id.A)(PostVisibility),{status,visibility,password}=(0,use_select.A)((select=>({status:select(store_store).getEditedPostAttribute("status"),visibility:select(store_store).getEditedPostVisibility(),password:select(store_store).getEditedPostAttribute("password")}))),{editPost,savePost}=(0,use_dispatch.A)(store_store),[hasPassword,setHasPassword]=(0,react.useState)(!!password),[showPrivateConfirmDialog,setShowPrivateConfirmDialog]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{className:"editor-post-visibility",children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Visibility"),help:(0,i18n_build_module.__)("Control how this post is viewed."),onClose}),(0,jsx_runtime.jsxs)("fieldset",{className:"editor-post-visibility__fieldset",children:[(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"legend",children:(0,i18n_build_module.__)("Visibility")}),(0,jsx_runtime.jsx)(PostVisibilityChoice,{instanceId,value:"public",label:visibilityOptions.public.label,info:visibilityOptions.public.info,checked:"public"===visibility&&!hasPassword,onChange:()=>{editPost({status:"private"===visibility?"draft":status,password:""}),setHasPassword(!1)}}),(0,jsx_runtime.jsx)(PostVisibilityChoice,{instanceId,value:"private",label:visibilityOptions.private.label,info:visibilityOptions.private.info,checked:"private"===visibility,onChange:()=>{setShowPrivateConfirmDialog(!0)}}),(0,jsx_runtime.jsx)(PostVisibilityChoice,{instanceId,value:"password",label:visibilityOptions.password.label,info:visibilityOptions.password.info,checked:hasPassword,onChange:()=>{editPost({status:"private"===visibility?"draft":status,password:password||""}),setHasPassword(!0)}}),hasPassword&&(0,jsx_runtime.jsxs)("div",{className:"editor-post-visibility__password",children:[(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"label",htmlFor:`editor-post-visibility__password-input-${instanceId}`,children:(0,i18n_build_module.__)("Create password")}),(0,jsx_runtime.jsx)("input",{className:"editor-post-visibility__password-input",id:`editor-post-visibility__password-input-${instanceId}`,type:"text",onChange:event=>{editPost({password:event.target.value})},value:password,placeholder:(0,i18n_build_module.__)("Use a secure password")})]})]}),(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen:showPrivateConfirmDialog,onConfirm:()=>{editPost({status:"private",password:""}),setHasPassword(!1),setShowPrivateConfirmDialog(!1),savePost()},onCancel:()=>{setShowPrivateConfirmDialog(!1)},confirmButtonText:(0,i18n_build_module.__)("Publish"),size:"medium",children:(0,i18n_build_module.__)("Would you like to privately publish this post now?")})]})}function PostVisibilityChoice({instanceId,value,label,info,...props}){return(0,jsx_runtime.jsxs)("div",{className:"editor-post-visibility__choice",children:[(0,jsx_runtime.jsx)("input",{type:"radio",name:`editor-post-visibility__setting-${instanceId}`,value,id:`editor-post-${value}-${instanceId}`,"aria-describedby":`editor-post-${value}-${instanceId}-description`,className:"editor-post-visibility__radio",...props}),(0,jsx_runtime.jsx)("label",{htmlFor:`editor-post-${value}-${instanceId}`,className:"editor-post-visibility__label",children:label}),(0,jsx_runtime.jsx)("p",{id:`editor-post-${value}-${instanceId}-description`,className:"editor-post-visibility__info",children:info})]})}function PostVisibilityLabel(){return function usePostVisibilityLabel(){const visibility=(0,use_select.A)((select=>select(store_store).getEditedPostVisibility()));return visibilityOptions[visibility]?.label}()}function PostScheduleLabel(props){return usePostScheduleLabel(props)}function usePostScheduleLabel({full=!1}={}){const{date,isFloating}=(0,use_select.A)((select=>({date:select(store_store).getEditedPostAttribute("date"),isFloating:select(store_store).isEditedPostDateFloating()})),[]);return full?getFullPostScheduleLabel(date):function getPostScheduleLabel(dateAttribute,{isFloating=!1,now=new Date}={}){if(!dateAttribute||isFloating)return(0,i18n_build_module.__)("Immediately");if(!function isTimezoneSameAsSiteTimezone(date){const{timezone}=(0,date_build_module.mt)(),siteOffset=Number(timezone.offset),dateOffset=date.getTimezoneOffset()/60*-1;return siteOffset===dateOffset}(now))return getFullPostScheduleLabel(dateAttribute);const date=(0,date_build_module.pp)(dateAttribute);if(isSameDay(date,now))return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Today at %s"),(0,date_build_module.b5)((0,i18n_build_module._x)("g:i a","post schedule time format"),date));const tomorrow=new Date(now);if(tomorrow.setDate(tomorrow.getDate()+1),isSameDay(date,tomorrow))return(0,i18n_build_module.nv)((0,i18n_build_module.__)("Tomorrow at %s"),(0,date_build_module.b5)((0,i18n_build_module._x)("g:i a","post schedule time format"),date));if(date.getFullYear()===now.getFullYear())return(0,date_build_module.b5)((0,i18n_build_module._x)("F j g:i a","post schedule date format without year"),date);return(0,date_build_module.b5)((0,i18n_build_module._x)("F j, Y g:i a","post schedule full date format"),date)}(date,{isFloating})}function getFullPostScheduleLabel(dateAttribute){const date=(0,date_build_module.pp)(dateAttribute),timezoneAbbreviation=function getTimezoneAbbreviation(){const{timezone}=(0,date_build_module.mt)();if(timezone.abbr&&isNaN(Number(timezone.abbr)))return timezone.abbr;const symbol=timezone.offset<0?"":"+";return`UTC${symbol}${timezone.offsetFormatted}`}(),formattedDate=(0,date_build_module.b5)((0,i18n_build_module._x)("F j, Y g:i a","post schedule full date format"),date);return(0,i18n_build_module.V8)()?`${timezoneAbbreviation} ${formattedDate}`:`${formattedDate} ${timezoneAbbreviation}`}function isSameDay(left,right){return left.getDate()===right.getDate()&&left.getMonth()===right.getMonth()&&left.getFullYear()===right.getFullYear()}var form_token_field=__webpack_require__("./packages/components/build-module/form-token-field/index.js"),with_filters=__webpack_require__("./packages/components/build-module/higher-order/with-filters/index.js"),use_debounce=__webpack_require__("./packages/compose/build-module/hooks/use-debounce/index.js");function buildTermsTree(flatTerms){const flatTermsWithParentAndChildren=flatTerms.map((term=>({children:[],parent:null,...term})));if(flatTermsWithParentAndChildren.some((({parent})=>null===parent)))return flatTermsWithParentAndChildren;const termsByParent=flatTermsWithParentAndChildren.reduce(((acc,term)=>{const{parent}=term;return acc[parent]||(acc[parent]=[]),acc[parent].push(term),acc}),{}),fillWithChildren=terms=>terms.map((term=>{const children=termsByParent[term.id];return{...term,children:children&&children.length?fillWithChildren(children):[]}}));return fillWithChildren(termsByParent[0]||[])}const unescapeString=arg=>(0,html_entities_build_module.S)(arg),unescapeTerm=term=>({...term,name:unescapeString(term.name)}),unescapeTerms=terms=>(null!=terms?terms:[]).map(unescapeTerm),MIN_MOST_USED_TERMS=3,DEFAULT_QUERY={per_page:10,orderby:"count",order:"desc",hide_empty:!0,_fields:"id,name,count",context:"view"};function MostUsedTerms({onSelect,taxonomy}){const{_terms,showTerms}=(0,use_select.A)((select=>{const mostUsedTerms=select(core_data_build_module.M_).getEntityRecords("taxonomy",taxonomy.slug,DEFAULT_QUERY);return{_terms:mostUsedTerms,showTerms:mostUsedTerms?.length>=MIN_MOST_USED_TERMS}}),[taxonomy.slug]);if(!showTerms)return null;const terms=unescapeTerms(_terms);return(0,jsx_runtime.jsxs)("div",{className:"editor-post-taxonomies__flat-term-most-used",children:[(0,jsx_runtime.jsx)(base_control.Ay.VisualLabel,{as:"h3",className:"editor-post-taxonomies__flat-term-most-used-label",children:taxonomy.labels.most_used}),(0,jsx_runtime.jsx)("ul",{role:"list",className:"editor-post-taxonomies__flat-term-most-used-list",children:terms.map((term=>(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"link",onClick:()=>onSelect(term),children:term.name})},term.id)))})]})}const flat_term_selector_EMPTY_ARRAY=[],flat_term_selector_DEFAULT_QUERY={per_page:100,_fields:"id,name",context:"view"},isSameTermName=(termA,termB)=>unescapeString(termA).toLowerCase()===unescapeString(termB).toLowerCase(),termNamesToIds=(names,terms)=>names.map((termName=>terms.find((term=>isSameTermName(term.name,termName)))?.id)).filter((id=>void 0!==id));const flat_term_selector=(0,with_filters.A)("editor.PostTaxonomyType")((function FlatTermSelector({slug,__nextHasNoMarginBottom}){var _taxonomy$labels$add_,_taxonomy$labels$sing2;const[values,setValues]=(0,react.useState)([]),[search,setSearch]=(0,react.useState)(""),debouncedSearch=(0,use_debounce.A)(setSearch,500);__nextHasNoMarginBottom||(0,deprecated_build_module.A)("Bottom margin styles for wp.editor.PostTaxonomiesFlatTermSelector",{since:"6.7",version:"7.0",hint:"Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version."});const{terms,termIds,taxonomy,hasAssignAction,hasCreateAction,hasResolvedTerms}=(0,use_select.A)((select=>{var _post$_links,_post$_links2;const{getCurrentPost,getEditedPostAttribute}=select(store_store),{getEntityRecords,getTaxonomy,hasFinishedResolution}=select(core_data_build_module.M_),post=getCurrentPost(),_taxonomy=getTaxonomy(slug),_termIds=_taxonomy?getEditedPostAttribute(_taxonomy.rest_base):flat_term_selector_EMPTY_ARRAY,query={...flat_term_selector_DEFAULT_QUERY,include:_termIds?.join(","),per_page:-1};return{hasCreateAction:!!_taxonomy&&(null!==(_post$_links=post._links?.["wp:action-create-"+_taxonomy.rest_base])&&void 0!==_post$_links&&_post$_links),hasAssignAction:!!_taxonomy&&(null!==(_post$_links2=post._links?.["wp:action-assign-"+_taxonomy.rest_base])&&void 0!==_post$_links2&&_post$_links2),taxonomy:_taxonomy,termIds:_termIds,terms:_termIds?.length?getEntityRecords("taxonomy",slug,query):flat_term_selector_EMPTY_ARRAY,hasResolvedTerms:hasFinishedResolution("getEntityRecords",["taxonomy",slug,query])}}),[slug]),{searchResults}=(0,use_select.A)((select=>{const{getEntityRecords}=select(core_data_build_module.M_);return{searchResults:search?getEntityRecords("taxonomy",slug,{...flat_term_selector_DEFAULT_QUERY,search}):flat_term_selector_EMPTY_ARRAY}}),[search,slug]);(0,react.useEffect)((()=>{if(hasResolvedTerms){const newValues=(null!=terms?terms:[]).map((term=>unescapeString(term.name)));setValues(newValues)}}),[terms,hasResolvedTerms]);const suggestions=(0,react.useMemo)((()=>(null!=searchResults?searchResults:[]).map((term=>unescapeString(term.name)))),[searchResults]),{editPost}=(0,use_dispatch.A)(store_store),{saveEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M);if(!hasAssignAction)return null;function onUpdateTerms(newTermIds){editPost({[taxonomy.rest_base]:newTermIds})}const newTermLabel=null!==(_taxonomy$labels$add_=taxonomy?.labels?.add_new_item)&&void 0!==_taxonomy$labels$add_?_taxonomy$labels$add_:"post_tag"===slug?(0,i18n_build_module.__)("Add new tag"):(0,i18n_build_module.__)("Add new Term"),singularName=null!==(_taxonomy$labels$sing2=taxonomy?.labels?.singular_name)&&void 0!==_taxonomy$labels$sing2?_taxonomy$labels$sing2:"post_tag"===slug?(0,i18n_build_module.__)("Tag"):(0,i18n_build_module.__)("Term"),termAddedLabel=(0,i18n_build_module.nv)((0,i18n_build_module._x)("%s added","term"),singularName),termRemovedLabel=(0,i18n_build_module.nv)((0,i18n_build_module._x)("%s removed","term"),singularName),removeTermLabel=(0,i18n_build_module.nv)((0,i18n_build_module._x)("Remove %s","term"),singularName);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(form_token_field.A,{__next40pxDefaultSize:!0,value:values,suggestions,onChange:function onChange(termNames){const availableTerms=[...null!=terms?terms:[],...null!=searchResults?searchResults:[]],uniqueTerms=termNames.reduce(((acc,name)=>(acc.some((n=>n.toLowerCase()===name.toLowerCase()))||acc.push(name),acc)),[]),newTermNames=uniqueTerms.filter((termName=>!availableTerms.find((term=>isSameTermName(term.name,termName)))));setValues(uniqueTerms),0!==newTermNames.length?hasCreateAction&&Promise.all(newTermNames.map((termName=>async function findOrCreateTerm(term){try{const newTerm=await saveEntityRecord("taxonomy",slug,term,{throwOnError:!0});return unescapeTerm(newTerm)}catch(error){if("term_exists"!==error.code)throw error;return{id:error.data.term_id,name:term.name}}}({name:termName})))).then((newTerms=>{const newAvailableTerms=availableTerms.concat(newTerms);onUpdateTerms(termNamesToIds(uniqueTerms,newAvailableTerms))})).catch((error=>{createErrorNotice(error.message,{type:"snackbar"}),onUpdateTerms(termNamesToIds(uniqueTerms,availableTerms))})):onUpdateTerms(termNamesToIds(uniqueTerms,availableTerms))},onInputChange:debouncedSearch,maxSuggestions:100,label:newTermLabel,messages:{added:termAddedLabel,removed:termRemovedLabel,remove:removeTermLabel},__nextHasNoMarginBottom}),(0,jsx_runtime.jsx)(MostUsedTerms,{taxonomy,onSelect:function appendTerm(newTerm){var _taxonomy$labels$sing;if(termIds.includes(newTerm.id))return;const newTermIds=[...termIds,newTerm.id],defaultName="post_tag"===slug?(0,i18n_build_module.__)("Tag"):(0,i18n_build_module.__)("Term"),termAddedMessage=(0,i18n_build_module.nv)((0,i18n_build_module._x)("%s added","term"),null!==(_taxonomy$labels$sing=taxonomy?.labels?.singular_name)&&void 0!==_taxonomy$labels$sing?_taxonomy$labels$sing:defaultName);(0,a11y_build_module.L)(termAddedMessage,"assertive"),onUpdateTerms(newTermIds)}})]})})),TagsPanel=()=>{const panelBodyTitle=[(0,i18n_build_module.__)("Suggestion:"),(0,jsx_runtime.jsx)("span",{className:"editor-post-publish-panel__link",children:(0,i18n_build_module.__)("Add tags")},"label")];return(0,jsx_runtime.jsxs)(body.Ay,{initialOpen:!1,title:panelBodyTitle,children:[(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("Tags help users and search engines navigate your site and find your content. Add a few keywords to describe your post.")}),(0,jsx_runtime.jsx)(flat_term_selector,{slug:"post_tag",__nextHasNoMarginBottom:!0})]})},maybe_tags_panel=()=>{const{hasTags,isPostTypeSupported}=(0,use_select.A)((select=>{const postType=select(store_store).getCurrentPostType(),tagsTaxonomy=select(core_data_build_module.M_).getTaxonomy("post_tag"),_isPostTypeSupported=tagsTaxonomy?.types?.includes(postType),areTagsFetched=void 0!==tagsTaxonomy,tags=tagsTaxonomy&&select(store_store).getEditedPostAttribute(tagsTaxonomy.rest_base);return{hasTags:!!tags?.length,isPostTypeSupported:areTagsFetched&&_isPostTypeSupported}}),[]),[hadTagsWhenOpeningThePanel]=(0,react.useState)(hasTags);return isPostTypeSupported?hadTagsWhenOpeningThePanel?null:(0,jsx_runtime.jsx)(TagsPanel,{}):null};const post_type_support_check=function PostTypeSupportCheck({children,supportKeys}){const postType=(0,use_select.A)((select=>{const{getEditedPostAttribute}=select(store_store),{getPostType}=select(core_data_build_module.M_);return getPostType(getEditedPostAttribute("type"))}),[]);let isSupported=!!postType;return postType&&(isSupported=(Array.isArray(supportKeys)?supportKeys:[supportKeys]).some((key=>!!postType.supports[key]))),isSupported?children:null};const post_format_check=function PostFormatCheck({children}){return(0,use_select.A)((select=>select(store_store).getEditorSettings().disablePostFormats),[])?null:(0,jsx_runtime.jsx)(post_type_support_check,{supportKeys:"post-formats",children})},POST_FORMATS=[{id:"aside",caption:(0,i18n_build_module.__)("Aside")},{id:"audio",caption:(0,i18n_build_module.__)("Audio")},{id:"chat",caption:(0,i18n_build_module.__)("Chat")},{id:"gallery",caption:(0,i18n_build_module.__)("Gallery")},{id:"image",caption:(0,i18n_build_module.__)("Image")},{id:"link",caption:(0,i18n_build_module.__)("Link")},{id:"quote",caption:(0,i18n_build_module.__)("Quote")},{id:"standard",caption:(0,i18n_build_module.__)("Standard")},{id:"status",caption:(0,i18n_build_module.__)("Status")},{id:"video",caption:(0,i18n_build_module.__)("Video")}].sort(((a,b)=>{const normalizedA=a.caption.toUpperCase(),normalizedB=b.caption.toUpperCase();return normalizedA<normalizedB?-1:normalizedA>normalizedB?1:0}));function PostFormat(){const postFormatSelectorId=`post-format-selector-${(0,use_instance_id.A)(PostFormat)}`,{postFormat,suggestedFormat,supportedFormats}=(0,use_select.A)((select=>{const{getEditedPostAttribute,getSuggestedPostFormat}=select(store_store),_postFormat=getEditedPostAttribute("format"),themeSupports=select(core_data_build_module.M_).getThemeSupports();return{postFormat:null!=_postFormat?_postFormat:"standard",suggestedFormat:getSuggestedPostFormat(),supportedFormats:themeSupports.formats}}),[]),formats=POST_FORMATS.filter((format=>supportedFormats?.includes(format.id)||postFormat===format.id)),suggestion=formats.find((format=>format.id===suggestedFormat)),{editPost}=(0,use_dispatch.A)(store_store),onUpdatePostFormat=format=>editPost({format});return(0,jsx_runtime.jsx)(post_format_check,{children:(0,jsx_runtime.jsxs)("div",{className:"editor-post-format",children:[(0,jsx_runtime.jsx)(radio_control.A,{className:"editor-post-format__options",label:(0,i18n_build_module.__)("Post Format"),selected:postFormat,onChange:format=>onUpdatePostFormat(format),id:postFormatSelectorId,options:formats.map((format=>({label:format.caption,value:format.id}))),hideLabelFromVision:!0}),suggestion&&suggestion.id!==postFormat&&(0,jsx_runtime.jsx)("p",{className:"editor-post-format__suggestion",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"link",onClick:()=>onUpdatePostFormat(suggestion.id),children:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Apply suggested format: %s"),suggestion.caption)})})]})})}const getSuggestion=(supportedFormats,suggestedPostFormat)=>POST_FORMATS.filter((format=>supportedFormats?.includes(format.id))).find((format=>format.id===suggestedPostFormat)),PostFormatSuggestion=({suggestedPostFormat,suggestionText,onUpdatePostFormat})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"link",onClick:()=>onUpdatePostFormat(suggestedPostFormat),children:suggestionText});function PostFormatPanel(){const{currentPostFormat,suggestion}=(0,use_select.A)((select=>{var _select$getThemeSuppo;const{getEditedPostAttribute,getSuggestedPostFormat}=select(store_store),supportedFormats=null!==(_select$getThemeSuppo=select(core_data_build_module.M_).getThemeSupports().formats)&&void 0!==_select$getThemeSuppo?_select$getThemeSuppo:[];return{currentPostFormat:getEditedPostAttribute("format"),suggestion:getSuggestion(supportedFormats,getSuggestedPostFormat())}}),[]),{editPost}=(0,use_dispatch.A)(store_store),panelBodyTitle=[(0,i18n_build_module.__)("Suggestion:"),(0,jsx_runtime.jsx)("span",{className:"editor-post-publish-panel__link",children:(0,i18n_build_module.__)("Use a post format")},"label")];return suggestion&&suggestion.id!==currentPostFormat?(0,jsx_runtime.jsxs)(body.Ay,{initialOpen:!1,title:panelBodyTitle,children:[(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("Your theme uses post formats to highlight different kinds of content, like images or videos. Apply a post format to see this special styling.")}),(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsx)(PostFormatSuggestion,{onUpdatePostFormat:format=>editPost({format}),suggestedPostFormat:suggestion.id,suggestionText:(0,i18n_build_module.nv)((0,i18n_build_module.__)('Apply the "%1$s" format.'),suggestion.caption)})})]}):null}var search_control=__webpack_require__("./packages/components/build-module/search-control/index.js"),tree_select=__webpack_require__("./packages/components/build-module/tree-select/index.js");const hierarchical_term_selector_DEFAULT_QUERY={per_page:-1,orderby:"name",order:"asc",_fields:"id,name,parent",context:"view"},hierarchical_term_selector_EMPTY_ARRAY=[];const hierarchical_term_selector=(0,with_filters.A)("editor.PostTaxonomyType")((function HierarchicalTermSelector({slug}){var _taxonomy$labels$sear,_taxonomy$name;const[adding,setAdding]=(0,react.useState)(!1),[formName,setFormName]=(0,react.useState)(""),[formParent,setFormParent]=(0,react.useState)(""),[showForm,setShowForm]=(0,react.useState)(!1),[filterValue,setFilterValue]=(0,react.useState)(""),[filteredTermsTree,setFilteredTermsTree]=(0,react.useState)([]),debouncedSpeak=(0,use_debounce.A)(a11y_build_module.L,500),{hasCreateAction,hasAssignAction,terms,loading,availableTerms,taxonomy}=(0,use_select.A)((select=>{var _post$_links,_post$_links2;const{getCurrentPost,getEditedPostAttribute}=select(store_store),{getTaxonomy,getEntityRecords,isResolving}=select(core_data_build_module.M_),_taxonomy=getTaxonomy(slug),post=getCurrentPost();return{hasCreateAction:!!_taxonomy&&(null!==(_post$_links=post._links?.["wp:action-create-"+_taxonomy.rest_base])&&void 0!==_post$_links&&_post$_links),hasAssignAction:!!_taxonomy&&(null!==(_post$_links2=post._links?.["wp:action-assign-"+_taxonomy.rest_base])&&void 0!==_post$_links2&&_post$_links2),terms:_taxonomy?getEditedPostAttribute(_taxonomy.rest_base):hierarchical_term_selector_EMPTY_ARRAY,loading:isResolving("getEntityRecords",["taxonomy",slug,hierarchical_term_selector_DEFAULT_QUERY]),availableTerms:getEntityRecords("taxonomy",slug,hierarchical_term_selector_DEFAULT_QUERY)||hierarchical_term_selector_EMPTY_ARRAY,taxonomy:_taxonomy}}),[slug]),{editPost}=(0,use_dispatch.A)(store_store),{saveEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),availableTermsTree=(0,react.useMemo)((()=>function sortBySelected(termsTree,terms){const treeHasSelection=termTree=>-1!==terms.indexOf(termTree.id)||void 0!==termTree.children&&termTree.children.map(treeHasSelection).filter((child=>child)).length>0,newTermTree=[...termsTree];return newTermTree.sort(((termA,termB)=>{const termASelected=treeHasSelection(termA),termBSelected=treeHasSelection(termB);return termASelected===termBSelected?0:termASelected&&!termBSelected?-1:!termASelected&&termBSelected?1:0})),newTermTree}(buildTermsTree(availableTerms),terms)),[availableTerms]),{createErrorNotice}=(0,use_dispatch.A)(notices_build_module.M);if(!hasAssignAction)return null;const onUpdateTerms=termIds=>{editPost({[taxonomy.rest_base]:termIds})},renderTerms=renderedTerms=>renderedTerms.map((term=>(0,jsx_runtime.jsxs)("div",{className:"editor-post-taxonomies__hierarchical-terms-choice",children:[(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,checked:-1!==terms.indexOf(term.id),onChange:()=>{(termId=>{const newTerms=terms.includes(termId)?terms.filter((id=>id!==termId)):[...terms,termId];onUpdateTerms(newTerms)})(parseInt(term.id,10))},label:(0,html_entities_build_module.S)(term.name)}),!!term.children.length&&(0,jsx_runtime.jsx)("div",{className:"editor-post-taxonomies__hierarchical-terms-subchoices",children:renderTerms(term.children)})]},term.id))),labelWithFallback=(labelProperty,fallbackIsCategory,fallbackIsNotCategory)=>{var _taxonomy$labels$labe;return null!==(_taxonomy$labels$labe=taxonomy?.labels?.[labelProperty])&&void 0!==_taxonomy$labels$labe?_taxonomy$labels$labe:"category"===slug?fallbackIsCategory:fallbackIsNotCategory},newTermButtonLabel=labelWithFallback("add_new_item",(0,i18n_build_module.__)("Add new category"),(0,i18n_build_module.__)("Add new term")),newTermLabel=labelWithFallback("new_item_name",(0,i18n_build_module.__)("Add new category"),(0,i18n_build_module.__)("Add new term")),parentSelectLabel=labelWithFallback("parent_item",(0,i18n_build_module.__)("Parent Category"),(0,i18n_build_module.__)("Parent Term")),noParentOption=`— ${parentSelectLabel} —`,newTermSubmitLabel=newTermButtonLabel,filterLabel=null!==(_taxonomy$labels$sear=taxonomy?.labels?.search_items)&&void 0!==_taxonomy$labels$sear?_taxonomy$labels$sear:(0,i18n_build_module.__)("Search Terms"),groupLabel=null!==(_taxonomy$name=taxonomy?.name)&&void 0!==_taxonomy$name?_taxonomy$name:(0,i18n_build_module.__)("Terms"),showFilter=availableTerms.length>=8;return(0,jsx_runtime.jsxs)(flex_component.A,{direction:"column",gap:"4",children:[showFilter&&(0,jsx_runtime.jsx)(search_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:filterLabel,placeholder:filterLabel,value:filterValue,onChange:value=>{const newFilteredTermsTree=availableTermsTree.map(function getFilterMatcher(filterValue){const matchTermsForFilter=originalTerm=>{if(""===filterValue)return originalTerm;const term={...originalTerm};return term.children.length>0&&(term.children=term.children.map(matchTermsForFilter).filter((child=>child))),(-1!==term.name.toLowerCase().indexOf(filterValue.toLowerCase())||term.children.length>0)&&term};return matchTermsForFilter}(value)).filter((term=>term)),getResultCount=termsTree=>{let count=0;for(let i=0;i<termsTree.length;i++)count++,void 0!==termsTree[i].children&&(count+=getResultCount(termsTree[i].children));return count};setFilterValue(value),setFilteredTermsTree(newFilteredTermsTree);const resultCount=getResultCount(newFilteredTermsTree),resultsFoundMessage=(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d result found.","%d results found.",resultCount),resultCount);debouncedSpeak(resultsFoundMessage,"assertive")}}),(0,jsx_runtime.jsx)("div",{className:"editor-post-taxonomies__hierarchical-terms-list",tabIndex:"0",role:"group","aria-label":groupLabel,children:renderTerms(""!==filterValue?filteredTermsTree:availableTermsTree)}),!loading&&hasCreateAction&&(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,onClick:()=>{setShowForm(!showForm)},className:"editor-post-taxonomies__hierarchical-terms-add","aria-expanded":showForm,variant:"link",children:newTermButtonLabel})}),showForm&&(0,jsx_runtime.jsx)("form",{onSubmit:async event=>{var _taxonomy$labels$sing;if(event.preventDefault(),""===formName||adding)return;const existingTerm=function findTerm(terms,parent,name){return terms.find((term=>(!term.parent&&!parent||parseInt(term.parent)===parseInt(parent))&&term.name.toLowerCase()===name.toLowerCase()))}(availableTerms,formParent,formName);if(existingTerm)return terms.some((term=>term===existingTerm.id))||onUpdateTerms([...terms,existingTerm.id]),setFormName(""),void setFormParent("");let newTerm;setAdding(!0);try{newTerm=await(term={name:formName,parent:formParent||void 0},saveEntityRecord("taxonomy",slug,term,{throwOnError:!0}))}catch(error){return void createErrorNotice(error.message,{type:"snackbar"})}var term;const defaultName="category"===slug?(0,i18n_build_module.__)("Category"):(0,i18n_build_module.__)("Term"),termAddedMessage=(0,i18n_build_module.nv)((0,i18n_build_module._x)("%s added","term"),null!==(_taxonomy$labels$sing=taxonomy?.labels?.singular_name)&&void 0!==_taxonomy$labels$sing?_taxonomy$labels$sing:defaultName);(0,a11y_build_module.L)(termAddedMessage,"assertive"),setAdding(!1),setFormName(""),setFormParent(""),onUpdateTerms([...terms,newTerm.id])},children:(0,jsx_runtime.jsxs)(flex_component.A,{direction:"column",gap:"4",children:[(0,jsx_runtime.jsx)(text_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,className:"editor-post-taxonomies__hierarchical-terms-input",label:newTermLabel,value:formName,onChange:value=>{setFormName(value)},required:!0}),!!availableTerms.length&&(0,jsx_runtime.jsx)(tree_select.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:parentSelectLabel,noOptionLabel:noParentOption,onChange:parentId=>{setFormParent(parentId)},selectedId:formParent,tree:availableTermsTree}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",type:"submit",className:"editor-post-taxonomies__hierarchical-terms-submit",children:newTermSubmitLabel})})]})})]})}));const maybe_category_panel=function MaybeCategoryPanel(){const hasNoCategory=(0,use_select.A)((select=>{const postType=select(store_store).getCurrentPostType(),{canUser,getEntityRecord,getTaxonomy}=select(core_data_build_module.M_),categoriesTaxonomy=getTaxonomy("category"),defaultCategoryId=canUser("read",{kind:"root",name:"site"})?getEntityRecord("root","site")?.default_category:void 0,defaultCategory=defaultCategoryId?getEntityRecord("taxonomy","category",defaultCategoryId):void 0,postTypeSupportsCategories=categoriesTaxonomy&&categoriesTaxonomy.types.some((type=>type===postType)),categories=categoriesTaxonomy&&select(store_store).getEditedPostAttribute(categoriesTaxonomy.rest_base);return!!categoriesTaxonomy&&!!defaultCategory&&postTypeSupportsCategories&&(0===categories?.length||1===categories?.length&&defaultCategory?.id===categories[0])}),[]),[shouldShowPanel,setShouldShowPanel]=(0,react.useState)(!1);if((0,react.useEffect)((()=>{hasNoCategory&&setShouldShowPanel(!0)}),[hasNoCategory]),!shouldShowPanel)return null;const panelBodyTitle=[(0,i18n_build_module.__)("Suggestion:"),(0,jsx_runtime.jsx)("span",{className:"editor-post-publish-panel__link",children:(0,i18n_build_module.__)("Assign a category")},"label")];return(0,jsx_runtime.jsxs)(body.Ay,{initialOpen:!1,title:panelBodyTitle,children:[(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("Categories provide a helpful way to group related posts together and to quickly tell readers what a post is about.")}),(0,jsx_runtime.jsx)(hierarchical_term_selector,{slug:"category"})]})};var v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),get_filename=__webpack_require__("./packages/url/build-module/get-filename.js");function fetchMedia(urls){return Object.fromEntries(Object.entries(function generateUniqueBasenames(urls){const basenames=new Set;return Object.fromEntries(urls.map((url=>{const filename=(0,get_filename.e)(url);let basename="";if(filename){const parts=filename.split(".");parts.length>1&&parts.pop(),basename=parts.join(".")}return basename||(basename=(0,v4.A)()),basenames.has(basename)&&(basename=`${basename}-${(0,v4.A)()}`),basenames.add(basename),[url,basename]})))}(urls)).map((([url,basename])=>{const filePromise=window.fetch(url.includes("?")?url:url+"?").then((response=>response.blob())).then((blob=>new File([blob],`${basename}.png`,{type:blob.type})));return[url,filePromise]})))}function flattenBlocks(blocks){const result=[];return blocks.forEach((block=>{result.push(block),result.push(...flattenBlocks(block.innerBlocks))})),result}function getMediaInfo(block){if("core/image"===block.name||"core/cover"===block.name){const{url,alt,id}=block.attributes;return{url,alt,id}}if("core/media-text"===block.name){const{mediaUrl:url,mediaAlt:alt,mediaId:id}=block.attributes;return{url,alt,id}}return{}}function Image({clientId,alt,url}){const{selectBlock}=(0,use_dispatch.A)(build_module.M_);return(0,jsx_runtime.jsx)(motion.P.img,{tabIndex:0,role:"button","aria-label":(0,i18n_build_module.__)("Select image block."),onClick:()=>{selectBlock(clientId)},onKeyDown:event=>{"Enter"!==event.key&&" "!==event.key||(selectBlock(clientId),event.preventDefault())},alt,src:url,animate:{opacity:1},exit:{opacity:0,scale:0},style:{width:"32px",height:"32px",objectFit:"cover",borderRadius:"2px",cursor:"pointer"},whileHover:{scale:1.08}},clientId)}function MaybeUploadMediaPanel(){const[isUploading,setIsUploading]=(0,react.useState)(!1),[isAnimating,setIsAnimating]=(0,react.useState)(!1),[hadUploadError,setHadUploadError]=(0,react.useState)(!1),{editorBlocks,mediaUpload}=(0,use_select.A)((select=>({editorBlocks:select(build_module.M_).getBlocks(),mediaUpload:select(build_module.M_).getSettings().mediaUpload})),[]),blocksWithExternalMedia=flattenBlocks(editorBlocks).filter((block=>function hasExternalMedia(block){return"core/image"===block.name||"core/cover"===block.name?block.attributes.url&&!block.attributes.id:"core/media-text"===block.name?block.attributes.mediaUrl&&!block.attributes.mediaId:void 0}(block))),{updateBlockAttributes}=(0,use_dispatch.A)(build_module.M_);if(!mediaUpload||!blocksWithExternalMedia.length)return null;const panelBodyTitle=[(0,i18n_build_module.__)("Suggestion:"),(0,jsx_runtime.jsx)("span",{className:"editor-post-publish-panel__link",children:(0,i18n_build_module.__)("External media")},"label")];return(0,jsx_runtime.jsxs)(body.Ay,{initialOpen:!0,title:panelBodyTitle,children:[(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("Upload external images to the Media Library. Images from different domains may load slowly, display incorrectly, or be removed unexpectedly.")}),(0,jsx_runtime.jsxs)("div",{style:{display:"inline-flex",flexWrap:"wrap",gap:"8px"},children:[(0,jsx_runtime.jsx)(AnimatePresence.N,{onExitComplete:()=>setIsAnimating(!1),children:blocksWithExternalMedia.map((block=>{const{url,alt}=getMediaInfo(block);return(0,jsx_runtime.jsx)(Image,{clientId:block.clientId,url,alt},block.clientId)}))}),isUploading||isAnimating?(0,jsx_runtime.jsx)(spinner.Ay,{}):(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",variant:"primary",onClick:function uploadImages(){setIsUploading(!0),setHadUploadError(!1);const mediaUrls=new Set(blocksWithExternalMedia.map((block=>{const{url}=getMediaInfo(block);return url}))),uploadPromises=Object.fromEntries(Object.entries(fetchMedia([...mediaUrls])).map((([url,filePromise])=>[url,filePromise.then((blob=>new Promise(((resolve,reject)=>{mediaUpload({filesList:[blob],onFileChange:([media])=>{(0,blob_build_module.H8)(media.url)||resolve(media)},onError(){reject()}})}))))])));Promise.allSettled(blocksWithExternalMedia.map((block=>{const{url}=getMediaInfo(block);return uploadPromises[url].then((media=>function updateBlockWithUploadedMedia(block,media){"core/image"!==block.name&&"core/cover"!==block.name||updateBlockAttributes(block.clientId,{id:media.id,url:media.url}),"core/media-text"===block.name&&updateBlockAttributes(block.clientId,{mediaId:media.id,mediaUrl:media.url})}(block,media))).then((()=>setIsAnimating(!0))).catch((()=>setHadUploadError(!0)))}))).finally((()=>{setIsUploading(!1)}))},children:(0,i18n_build_module.__)("Upload")})]}),hadUploadError&&(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("Upload failed, try again.")})]})}const prepublish=function PostPublishPanelPrepublish({children}){const{isBeingScheduled,isRequestingSiteIcon,hasPublishAction,siteIconUrl,siteTitle,siteHome}=(0,use_select.A)((select=>{var _getCurrentPost$_link;const{getCurrentPost,isEditedPostBeingScheduled}=select(store_store),{getEntityRecord,isResolving}=select(core_data_build_module.M_),siteData=getEntityRecord("root","__unstableBase",void 0)||{};return{hasPublishAction:null!==(_getCurrentPost$_link=getCurrentPost()._links?.["wp:action-publish"])&&void 0!==_getCurrentPost$_link&&_getCurrentPost$_link,isBeingScheduled:isEditedPostBeingScheduled(),isRequestingSiteIcon:isResolving("getEntityRecord",["root","__unstableBase",void 0]),siteIconUrl:siteData.site_icon_url,siteTitle:siteData.name,siteHome:siteData.home&&(0,filter_url_for_display.r)(siteData.home)}}),[]);let prePublishTitle,prePublishBodyText,siteIcon=(0,jsx_runtime.jsx)(build_module_icon.A,{className:"components-site-icon",size:"36px",icon:wordpress.A});return siteIconUrl&&(siteIcon=(0,jsx_runtime.jsx)("img",{alt:(0,i18n_build_module.__)("Site Icon"),className:"components-site-icon",src:siteIconUrl})),isRequestingSiteIcon&&(siteIcon=null),hasPublishAction?isBeingScheduled?(prePublishTitle=(0,i18n_build_module.__)("Are you ready to schedule?"),prePublishBodyText=(0,i18n_build_module.__)("Your work will be published at the specified date and time.")):(prePublishTitle=(0,i18n_build_module.__)("Are you ready to publish?"),prePublishBodyText=(0,i18n_build_module.__)("Double-check your settings before publishing.")):(prePublishTitle=(0,i18n_build_module.__)("Are you ready to submit for review?"),prePublishBodyText=(0,i18n_build_module.__)("When you’re ready, submit your work for review, and an Editor will be able to approve it for you.")),(0,jsx_runtime.jsxs)("div",{className:"editor-post-publish-panel__prepublish",children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("strong",{children:prePublishTitle})}),(0,jsx_runtime.jsx)("p",{children:prePublishBodyText}),(0,jsx_runtime.jsxs)("div",{className:"components-site-card",children:[siteIcon,(0,jsx_runtime.jsxs)("div",{className:"components-site-info",children:[(0,jsx_runtime.jsx)("span",{className:"components-site-name",children:(0,html_entities_build_module.S)(siteTitle)||(0,i18n_build_module.__)("(Untitled)")}),(0,jsx_runtime.jsx)("span",{className:"components-site-home",children:siteHome})]})]}),(0,jsx_runtime.jsx)(MaybeUploadMediaPanel,{}),hasPublishAction&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(body.Ay,{initialOpen:!1,title:[(0,i18n_build_module.__)("Visibility:"),(0,jsx_runtime.jsx)("span",{className:"editor-post-publish-panel__link",children:(0,jsx_runtime.jsx)(PostVisibilityLabel,{})},"label")],children:(0,jsx_runtime.jsx)(PostVisibility,{})}),(0,jsx_runtime.jsx)(body.Ay,{initialOpen:!1,title:[(0,i18n_build_module.__)("Publish:"),(0,jsx_runtime.jsx)("span",{className:"editor-post-publish-panel__link",children:(0,jsx_runtime.jsx)(PostScheduleLabel,{})},"label")],children:(0,jsx_runtime.jsx)(PostSchedule,{})})]}),(0,jsx_runtime.jsx)(PostFormatPanel,{}),(0,jsx_runtime.jsx)(maybe_tags_panel,{}),(0,jsx_runtime.jsx)(maybe_category_panel,{}),children]})};var safe_decode_uri_component=__webpack_require__("./packages/url/build-module/safe-decode-uri-component.js");function CopyButton({text,onCopy,children}){const ref=(0,use_copy_to_clipboard.A)(text,onCopy);return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",ref,children})}class PostPublishPanelPostpublish extends react.Component{constructor(){super(...arguments),this.state={showCopyConfirmation:!1},this.onCopy=this.onCopy.bind(this),this.onSelectInput=this.onSelectInput.bind(this),this.postLink=(0,react.createRef)()}componentDidMount(){this.props.focusOnMount&&this.postLink.current.focus()}componentWillUnmount(){clearTimeout(this.dismissCopyConfirmation)}onCopy(){this.setState({showCopyConfirmation:!0}),clearTimeout(this.dismissCopyConfirmation),this.dismissCopyConfirmation=setTimeout((()=>{this.setState({showCopyConfirmation:!1})}),4e3)}onSelectInput(event){event.target.select()}render(){const{children,isScheduled,post,postType}=this.props,postLabel=postType?.labels?.singular_name,viewPostLabel=postType?.labels?.view_item,addNewPostLabel=postType?.labels?.add_new_item,link="future"===post.status?(post=>{const{slug}=post;return post.permalink_template.includes("%postname%")?post.permalink_template.replace("%postname%",slug):post.permalink_template.includes("%pagename%")?post.permalink_template.replace("%pagename%",slug):post.permalink_template})(post):post.link,addLink=(0,add_query_args.F)("post-new.php",{post_type:post.type}),postPublishNonLinkHeader=isScheduled?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,i18n_build_module.__)("is now scheduled. It will go live on")," ",(0,jsx_runtime.jsx)(PostScheduleLabel,{}),"."]}):(0,i18n_build_module.__)("is now live.");return(0,jsx_runtime.jsxs)("div",{className:"post-publish-panel__postpublish",children:[(0,jsx_runtime.jsxs)(body.Ay,{className:"post-publish-panel__postpublish-header",children:[(0,jsx_runtime.jsx)("a",{ref:this.postLink,href:link,children:(0,html_entities_build_module.S)(post.title)||(0,i18n_build_module.__)("(no title)")})," ",postPublishNonLinkHeader]}),(0,jsx_runtime.jsxs)(body.Ay,{children:[(0,jsx_runtime.jsx)("p",{className:"post-publish-panel__postpublish-subheader",children:(0,jsx_runtime.jsx)("strong",{children:(0,i18n_build_module.__)("What’s next?")})}),(0,jsx_runtime.jsxs)("div",{className:"post-publish-panel__postpublish-post-address-container",children:[(0,jsx_runtime.jsx)(text_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,className:"post-publish-panel__postpublish-post-address",readOnly:!0,label:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%s address"),postLabel),value:(0,safe_decode_uri_component.T)(link),onFocus:this.onSelectInput}),(0,jsx_runtime.jsx)("div",{className:"post-publish-panel__postpublish-post-address__copy-button-wrap",children:(0,jsx_runtime.jsx)(CopyButton,{text:link,onCopy:this.onCopy,children:this.state.showCopyConfirmation?(0,i18n_build_module.__)("Copied!"):(0,i18n_build_module.__)("Copy")})})]}),(0,jsx_runtime.jsxs)("div",{className:"post-publish-panel__postpublish-buttons",children:[!isScheduled&&(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"primary",href:link,__next40pxDefaultSize:!0,children:viewPostLabel}),(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:isScheduled?"primary":"secondary",__next40pxDefaultSize:!0,href:addLink,children:addNewPostLabel})]})]}),children]})}}PostPublishPanelPostpublish.displayName="PostPublishPanelPostpublish";const postpublish=(0,with_select.A)((select=>{const{getEditedPostAttribute,getCurrentPost,isCurrentPostScheduled}=select(store_store),{getPostType}=select(core_data_build_module.M_);return{post:getCurrentPost(),postType:getPostType(getEditedPostAttribute("type")),isScheduled:isCurrentPostScheduled()}}))(PostPublishPanelPostpublish);class PostPublishPanel extends react.Component{constructor(){super(...arguments),this.onSubmit=this.onSubmit.bind(this),this.cancelButtonNode=(0,react.createRef)()}componentDidMount(){this.timeoutID=setTimeout((()=>{this.cancelButtonNode.current.focus()}),0)}componentWillUnmount(){clearTimeout(this.timeoutID)}componentDidUpdate(prevProps){prevProps.isPublished&&!this.props.isSaving&&this.props.isDirty&&this.props.onClose()}onSubmit(){const{onClose,hasPublishAction,isPostTypeViewable}=this.props;hasPublishAction&&isPostTypeViewable||onClose()}render(){const{forceIsDirty,isBeingScheduled,isPublished,isPublishSidebarEnabled,isScheduled,isSaving,isSavingNonPostEntityChanges,onClose,onTogglePublishSidebar,PostPublishExtension,PrePublishExtension,...additionalProps}=this.props,{hasPublishAction,isDirty,isPostTypeViewable,...propsForPanel}=additionalProps,isPublishedOrScheduled=isPublished||isScheduled&&isBeingScheduled,isPrePublish=!isPublishedOrScheduled&&!isSaving,isPostPublish=isPublishedOrScheduled&&!isSaving;return(0,jsx_runtime.jsxs)("div",{className:"editor-post-publish-panel",...propsForPanel,children:[(0,jsx_runtime.jsx)("div",{className:"editor-post-publish-panel__header",children:isPostPublish?(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",onClick:onClose,icon:close_small.A,label:(0,i18n_build_module.__)("Close panel")}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"editor-post-publish-panel__header-cancel-button",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{ref:this.cancelButtonNode,accessibleWhenDisabled:!0,disabled:isSavingNonPostEntityChanges,onClick:onClose,variant:"secondary",size:"compact",children:(0,i18n_build_module.__)("Cancel")})}),(0,jsx_runtime.jsx)("div",{className:"editor-post-publish-panel__header-publish-button",children:(0,jsx_runtime.jsx)(post_publish_button,{onSubmit:this.onSubmit,forceIsDirty})})]})}),(0,jsx_runtime.jsxs)("div",{className:"editor-post-publish-panel__content",children:[isPrePublish&&(0,jsx_runtime.jsx)(prepublish,{children:PrePublishExtension&&(0,jsx_runtime.jsx)(PrePublishExtension,{})}),isPostPublish&&(0,jsx_runtime.jsx)(postpublish,{focusOnMount:!0,children:PostPublishExtension&&(0,jsx_runtime.jsx)(PostPublishExtension,{})}),isSaving&&(0,jsx_runtime.jsx)(spinner.Ay,{})]}),(0,jsx_runtime.jsx)("div",{className:"editor-post-publish-panel__footer",children:(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Always show pre-publish checks."),checked:isPublishSidebarEnabled,onChange:onTogglePublishSidebar})})]})}}PostPublishPanel.displayName="PostPublishPanel";const post_publish_panel=(0,higher_order_compose.A)([(0,with_select.A)((select=>{var _getCurrentPost$_link;const{getPostType}=select(core_data_build_module.M_),{getCurrentPost,getEditedPostAttribute,isCurrentPostPublished,isCurrentPostScheduled,isEditedPostBeingScheduled,isEditedPostDirty,isAutosavingPost,isSavingPost,isSavingNonPostEntityChanges}=select(store_store),{isPublishSidebarEnabled}=select(store_store),postType=getPostType(getEditedPostAttribute("type"));return{hasPublishAction:null!==(_getCurrentPost$_link=getCurrentPost()._links?.["wp:action-publish"])&&void 0!==_getCurrentPost$_link&&_getCurrentPost$_link,isPostTypeViewable:postType?.viewable,isBeingScheduled:isEditedPostBeingScheduled(),isDirty:isEditedPostDirty(),isPublished:isCurrentPostPublished(),isPublishSidebarEnabled:isPublishSidebarEnabled(),isSaving:isSavingPost()&&!isAutosavingPost(),isSavingNonPostEntityChanges:isSavingNonPostEntityChanges(),isScheduled:isCurrentPostScheduled()}})),(0,with_dispatch.A)(((dispatch,{isPublishSidebarEnabled})=>{const{disablePublishSidebar,enablePublishSidebar}=dispatch(store_store);return{onTogglePublishSidebar:()=>{isPublishSidebarEnabled?disablePublishSidebar():enablePublishSidebar()}}})),with_focus_return,with_constrained_tabbing])(PostPublishPanel),{Fill:plugin_pre_publish_panel_Fill,Slot:plugin_pre_publish_panel_Slot}=(0,slot_fill.QJ)("PluginPrePublishPanel"),PluginPrePublishPanel=({children,className,title,initialOpen=!1,icon})=>{const{icon:pluginIcon}=usePluginContext();return(0,jsx_runtime.jsx)(plugin_pre_publish_panel_Fill,{children:(0,jsx_runtime.jsx)(body.Ay,{className,initialOpen:initialOpen||!title,title,icon:null!=icon?icon:pluginIcon,children})})};PluginPrePublishPanel.Slot=plugin_pre_publish_panel_Slot;const plugin_pre_publish_panel=PluginPrePublishPanel,{Fill:plugin_post_publish_panel_Fill,Slot:plugin_post_publish_panel_Slot}=(0,slot_fill.QJ)("PluginPostPublishPanel"),PluginPostPublishPanel=({children,className,title,initialOpen=!1,icon})=>{const{icon:pluginIcon}=usePluginContext();return(0,jsx_runtime.jsx)(plugin_post_publish_panel_Fill,{children:(0,jsx_runtime.jsx)(body.Ay,{className,initialOpen:initialOpen||!title,title,icon:null!=icon?icon:pluginIcon,children})})};PluginPostPublishPanel.Slot=plugin_post_publish_panel_Slot;const plugin_post_publish_panel=PluginPostPublishPanel,{Fill:save_publish_panels_Fill,Slot:save_publish_panels_Slot}=(0,slot_fill.QJ)("ActionsPanel");function SavePublishPanels({setEntitiesSavedStatesCallback,closeEntitiesSavedStates,isEntitiesSavedStatesOpen,forceIsDirtyPublishPanel}){const{closePublishSidebar,togglePublishSidebar}=(0,use_dispatch.A)(store_store),{publishSidebarOpened,isPublishable,isDirty,hasOtherEntitiesChanges}=(0,use_select.A)((select=>{const{isPublishSidebarOpened,isEditedPostPublishable,isCurrentPostPublished,isEditedPostDirty,hasNonPostEntityChanges}=select(store_store),_hasOtherEntitiesChanges=hasNonPostEntityChanges();return{publishSidebarOpened:isPublishSidebarOpened(),isPublishable:!isCurrentPostPublished()&&isEditedPostPublishable(),isDirty:_hasOtherEntitiesChanges||isEditedPostDirty(),hasOtherEntitiesChanges:_hasOtherEntitiesChanges}}),[]),openEntitiesSavedStates=(0,react.useCallback)((()=>setEntitiesSavedStatesCallback(!0)),[]);let unmountableContent;return unmountableContent=publishSidebarOpened?(0,jsx_runtime.jsx)(post_publish_panel,{onClose:closePublishSidebar,forceIsDirty:forceIsDirtyPublishPanel,PrePublishExtension:plugin_pre_publish_panel.Slot,PostPublishExtension:plugin_post_publish_panel.Slot}):isPublishable&&!hasOtherEntitiesChanges?(0,jsx_runtime.jsx)("div",{className:"editor-layout__toggle-publish-panel",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",onClick:togglePublishSidebar,"aria-expanded":!1,children:(0,i18n_build_module.__)("Open publish panel")})}):(0,jsx_runtime.jsx)("div",{className:"editor-layout__toggle-entities-saved-states-panel",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",onClick:openEntitiesSavedStates,"aria-expanded":!1,disabled:!isDirty,accessibleWhenDisabled:!0,children:(0,i18n_build_module.__)("Open save panel")})}),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isEntitiesSavedStatesOpen&&(0,jsx_runtime.jsx)(EntitiesSavedStates,{close:closeEntitiesSavedStates}),(0,jsx_runtime.jsx)(save_publish_panels_Slot,{bubblesVirtually:!0}),!isEntitiesSavedStatesOpen&&unmountableContent]})}var lib=__webpack_require__("./node_modules/react-autosize-textarea/lib/index.js");function PostTextEditor(){const instanceId=(0,use_instance_id.A)(PostTextEditor),{content,blocks,type,id}=(0,use_select.A)((select=>{const{getEditedEntityRecord}=select(core_data_build_module.M_),{getCurrentPostType,getCurrentPostId}=select(store_store),_type=getCurrentPostType(),_id=getCurrentPostId(),editedRecord=getEditedEntityRecord("postType",_type,_id);return{content:editedRecord?.content,blocks:editedRecord?.blocks,type:_type,id:_id}}),[]),{editEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),value=(0,react.useMemo)((()=>content instanceof Function?content({blocks}):blocks?(0,blocks_build_module.RM)(blocks):content),[content,blocks]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(visually_hidden_component.A,{as:"label",htmlFor:`post-content-${instanceId}`,children:(0,i18n_build_module.__)("Type text or HTML")}),(0,jsx_runtime.jsx)(lib.A,{autoComplete:"off",dir:"auto",value,onChange:event=>{editEntityRecord("postType",type,id,{content:event.target.value,blocks:void 0,selection:void 0})},className:"editor-post-text-editor",id:`post-content-${instanceId}`,placeholder:(0,i18n_build_module.__)("Start writing with text or HTML")})]})}const DEFAULT_CLASSNAMES="wp-block wp-block-post-title block-editor-block-list__block editor-post-title editor-post-title__input rich-text",REGEXP_NEWLINES=/[\r\n]+/g;function usePostTitleFocus(forwardedRef){const ref=(0,react.useRef)(),{isCleanNewPost}=(0,use_select.A)((select=>{const{isCleanNewPost:_isCleanNewPost}=select(store_store);return{isCleanNewPost:_isCleanNewPost()}}),[]);return(0,react.useImperativeHandle)(forwardedRef,(()=>({focus:()=>{ref?.current?.focus()}}))),(0,react.useEffect)((()=>{if(!ref.current)return;const{defaultView}=ref.current.ownerDocument,{name,parent}=defaultView,ownerDocument="editor-canvas"===name?parent.document:defaultView.document,{activeElement,body}=ownerDocument;!isCleanNewPost||activeElement&&body!==activeElement||ref.current.focus()}),[isCleanNewPost]),{ref}}function usePostTitle(){const{editPost}=(0,use_dispatch.A)(store_store),{title}=(0,use_select.A)((select=>{const{getEditedPostAttribute}=select(store_store);return{title:getEditedPostAttribute("title")}}),[]);return{title,setTitle:function updateTitle(newTitle){editPost({title:newTitle})}}}const post_title_raw=(0,react.forwardRef)((function PostTitleRaw(_,forwardedRef){const{placeholder}=(0,use_select.A)((select=>{const{getSettings}=select(build_module.M_),{titlePlaceholder}=getSettings();return{placeholder:titlePlaceholder}}),[]),[isSelected,setIsSelected]=(0,react.useState)(!1),{title,setTitle:onUpdate}=usePostTitle(),{ref:focusRef}=usePostTitleFocus(forwardedRef),className=(0,clsx.A)(DEFAULT_CLASSNAMES,{"is-selected":isSelected,"is-raw-text":!0}),decodedPlaceholder=(0,html_entities_build_module.S)(placeholder)||(0,i18n_build_module.__)("Add title");return(0,jsx_runtime.jsx)(textarea_control.A,{ref:focusRef,value:title,onChange:function onChange(value){onUpdate(value.replace(REGEXP_NEWLINES," "))},onFocus:function onSelect(){setIsSelected(!0)},onBlur:function onUnselect(){setIsSelected(!1)},label:placeholder,className,placeholder:decodedPlaceholder,hideLabelFromVision:!0,autoComplete:"off",dir:"auto",rows:1,__nextHasNoMarginBottom:!0})}));function TextEditor({autoFocus=!1}){const{switchEditorMode}=(0,use_dispatch.A)(store_store),{shortcut,isRichEditingEnabled}=(0,use_select.A)((select=>{const{getEditorSettings}=select(store_store),{getShortcutRepresentation}=select(keyboard_shortcuts_build_module.M_);return{shortcut:getShortcutRepresentation("core/editor/toggle-mode"),isRichEditingEnabled:getEditorSettings().richEditingEnabled}}),[]),titleRef=(0,react.useRef)();return(0,react.useEffect)((()=>{autoFocus||titleRef?.current?.focus()}),[autoFocus]),(0,jsx_runtime.jsxs)("div",{className:"editor-text-editor",children:[isRichEditingEnabled&&(0,jsx_runtime.jsxs)("div",{className:"editor-text-editor__toolbar",children:[(0,jsx_runtime.jsx)("h2",{children:(0,i18n_build_module.__)("Editing code")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>switchEditorMode("visual"),shortcut,children:(0,i18n_build_module.__)("Exit code editor")})]}),(0,jsx_runtime.jsxs)("div",{className:"editor-text-editor__body",children:[(0,jsx_runtime.jsx)(post_title_raw,{ref:titleRef}),(0,jsx_runtime.jsx)(PostTextEditor,{})]})]})}var strip_html=__webpack_require__("./packages/dom/build-module/dom/strip-html.js");const post_title=(0,react.forwardRef)((function PostTitle(_,forwardedRef){const{placeholder}=(0,use_select.A)((select=>{const{getSettings}=select(build_module.M_),{titlePlaceholder}=getSettings();return{placeholder:titlePlaceholder}}),[]),[isSelected,setIsSelected]=(0,react.useState)(!1),{ref:focusRef}=usePostTitleFocus(forwardedRef),{title,setTitle:onUpdate}=usePostTitle(),[selection,setSelection]=(0,react.useState)({}),{clearSelectedBlock,insertBlocks,insertDefaultBlock}=(0,use_dispatch.A)(build_module.M_),decodedPlaceholder=(0,html_entities_build_module.S)(placeholder)||(0,i18n_build_module.__)("Add title"),{value,onChange,ref:richTextRef}=(0,rich_text_build_module.lL)({value:title,onChange(newValue){onUpdate(newValue.replace(REGEXP_NEWLINES," "))},placeholder:decodedPlaceholder,selectionStart:selection.start,selectionEnd:selection.end,onSelectionChange(newStart,newEnd){setSelection((sel=>{const{start,end}=sel;return start===newStart&&end===newEnd?sel:{start:newStart,end:newEnd}}))},__unstableDisableFormats:!1});function onInsertBlockAfter(blocks){insertBlocks(blocks,0)}const className=(0,clsx.A)(DEFAULT_CLASSNAMES,{"is-selected":isSelected});return(0,jsx_runtime.jsx)(post_type_support_check,{supportKeys:"title",children:(0,jsx_runtime.jsx)("h1",{ref:(0,use_merge_refs.A)([richTextRef,focusRef]),contentEditable:!0,className,"aria-label":decodedPlaceholder,role:"textbox","aria-multiline":"true",onFocus:function onSelect(){setIsSelected(!0),clearSelectedBlock()},onBlur:function onUnselect(){setIsSelected(!1),setSelection({})},onKeyDown:function onKeyDown(event){event.keyCode===keycodes_build_module.Fm&&(event.preventDefault(),function onEnterPress(){insertDefaultBlock(void 0,void 0,0)}())},onPaste:function onPaste(event){const clipboardData=event.clipboardData;let plainText="",html="";try{plainText=clipboardData.getData("text/plain"),html=clipboardData.getData("text/html")}catch(error){return}window.console.log("Received HTML:\n\n",html),window.console.log("Received plain text:\n\n",plainText);const content=(0,blocks_build_module.Gk)({HTML:html,plainText});if(event.preventDefault(),content.length)if("string"!=typeof content){const[firstBlock]=content;if(title||"core/heading"!==firstBlock.name&&"core/paragraph"!==firstBlock.name)onInsertBlockAfter(content);else{const contentNoHTML=(0,strip_html.A)(firstBlock.attributes.content);onUpdate(contentNoHTML),onInsertBlockAfter(content.slice(1))}}else{const contentNoHTML=(0,strip_html.A)(content);onChange((0,rich_text_build_module.Yr)(value,(0,rich_text_build_module.vt)({html:contentNoHTML})))}}})})}));function EditTemplateBlocksNotification({contentRef}){const{onNavigateToEntityRecord,templateId}=(0,use_select.A)((select=>{const{getEditorSettings,getCurrentTemplateId}=select(store_store);return{onNavigateToEntityRecord:getEditorSettings().onNavigateToEntityRecord,templateId:getCurrentTemplateId()}}),[]),canEditTemplate=(0,use_select.A)((select=>!!select(core_data_build_module.M_).canUser("create",{kind:"postType",name:"wp_template"})),[]),[isDialogOpen,setIsDialogOpen]=(0,react.useState)(!1);return(0,react.useEffect)((()=>{const handleDblClick=event=>{canEditTemplate&&event.target.classList.contains("is-root-container")&&"core/template-part"!==event.target.dataset?.type&&(event.defaultPrevented||(event.preventDefault(),setIsDialogOpen(!0)))},canvas=contentRef.current;return canvas?.addEventListener("dblclick",handleDblClick),()=>{canvas?.removeEventListener("dblclick",handleDblClick)}}),[contentRef,canEditTemplate]),canEditTemplate?(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen:isDialogOpen,confirmButtonText:(0,i18n_build_module.__)("Edit template"),onConfirm:()=>{setIsDialogOpen(!1),onNavigateToEntityRecord({postId:templateId,postType:"wp_template"})},onCancel:()=>setIsDialogOpen(!1),size:"medium",children:(0,i18n_build_module.__)("You’ve tried to select a block that is part of a template, which may be used on other posts and pages. Would you like to edit the template?")}):null}var resizable_box=__webpack_require__("./packages/components/build-module/resizable-box/index.js");const DELTA_DISTANCE=20;function ResizeHandle({direction,resizeWidthBy}){const resizableHandleHelpId=`resizable-editor__resize-help-${direction}`;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(tooltip.Ay,{text:(0,i18n_build_module.__)("Drag to resize"),children:(0,jsx_runtime.jsx)(motion.P.button,{className:`editor-resizable-editor__resize-handle is-${direction}`,"aria-label":(0,i18n_build_module.__)("Drag to resize"),"aria-describedby":resizableHandleHelpId,onKeyDown:function handleKeyDown(event){const{keyCode}=event;keyCode!==keycodes_build_module.M3&&keyCode!==keycodes_build_module.NS||(event.preventDefault(),"left"===direction&&keyCode===keycodes_build_module.M3||"right"===direction&&keyCode===keycodes_build_module.NS?resizeWidthBy(DELTA_DISTANCE):("left"===direction&&keyCode===keycodes_build_module.NS||"right"===direction&&keyCode===keycodes_build_module.M3)&&resizeWidthBy(-DELTA_DISTANCE))},variants:{active:{opacity:1,scaleY:1.3}},whileFocus:"active",whileHover:"active",whileTap:"active",role:"separator","aria-orientation":"vertical"},"handle")}),(0,jsx_runtime.jsx)(visually_hidden_component.A,{id:resizableHandleHelpId,children:(0,i18n_build_module.__)("Use left and right arrow keys to resize the canvas.")})]})}const HANDLE_STYLES_OVERRIDE={position:void 0,userSelect:void 0,cursor:void 0,width:void 0,height:void 0,top:void 0,right:void 0,bottom:void 0,left:void 0};const resizable_editor=function ResizableEditor({className,enableResizing,height,children}){const[width,setWidth]=(0,react.useState)("100%"),resizableRef=(0,react.useRef)(),resizeWidthBy=(0,react.useCallback)((deltaPixels=>{resizableRef.current&&setWidth(resizableRef.current.offsetWidth+deltaPixels)}),[]);return(0,jsx_runtime.jsx)(resizable_box.A,{className:(0,clsx.A)("editor-resizable-editor",className,{"is-resizable":enableResizing}),ref:api=>{resizableRef.current=api?.resizable},size:{width:enableResizing?width:"100%",height:enableResizing&&height?height:"100%"},onResizeStop:(event,direction,element)=>{setWidth(element.style.width)},minWidth:300,maxWidth:"100%",maxHeight:"100%",enable:{left:enableResizing,right:enableResizing},showHandle:enableResizing,resizeRatio:2,handleComponent:{left:(0,jsx_runtime.jsx)(ResizeHandle,{direction:"left",resizeWidthBy}),right:(0,jsx_runtime.jsx)(ResizeHandle,{direction:"right",resizeWidthBy})},handleClasses:void 0,handleStyles:{left:HANDLE_STYLES_OVERRIDE,right:HANDLE_STYLES_OVERRIDE},children})};var use_ref_effect=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js");const DISTANCE_THRESHOLD=500;function clamp(value,min,max){return Math.min(Math.max(value,min),max)}function distanceFromRect(x,y,rect){const dx=x-clamp(x,rect.left,rect.right),dy=y-clamp(y,rect.top,rect.bottom);return Math.sqrt(dx*dx+dy*dy)}function useSelectNearestEditableBlock({isEnabled=!0}={}){const{getEnabledClientIdsTree,getBlockName,getBlockOrder}=lock_unlock_unlock((0,use_select.A)(build_module.M_)),{selectBlock}=(0,use_dispatch.A)(build_module.M_);return(0,use_ref_effect.A)((element=>{if(!isEnabled)return;const handleClick=event=>{(event.target===element||event.target.classList.contains("is-root-container"))&&((x,y)=>{const editableBlockClientIds=getEnabledClientIdsTree().flatMap((({clientId})=>{const blockName=getBlockName(clientId);if("core/template-part"===blockName)return[];if("core/post-content"===blockName){const innerBlocks=getBlockOrder(clientId);if(innerBlocks.length)return innerBlocks}return[clientId]}));let nearestDistance=1/0,nearestClientId=null;for(const clientId of editableBlockClientIds){const block=element.querySelector(`[data-block="${clientId}"]`);if(!block)continue;const distance=distanceFromRect(x,y,block.getBoundingClientRect());distance<nearestDistance&&distance<DISTANCE_THRESHOLD&&(nearestDistance=distance,nearestClientId=clientId)}nearestClientId&&selectBlock(nearestClientId)})(event.clientX,event.clientY)};return element.addEventListener("click",handleClick),()=>element.removeEventListener("click",handleClick)}),[isEnabled])}function useZoomOutModeExit(){const{getSettings,isZoomOut}=lock_unlock_unlock((0,use_select.A)(build_module.M_)),{resetZoomLevel}=lock_unlock_unlock((0,use_dispatch.A)(build_module.M_));return(0,use_ref_effect.A)((node=>{function onDoubleClick(event){if(isZoomOut()&&!event.defaultPrevented){event.preventDefault();const{__experimentalSetIsInserterOpened}=getSettings();"function"==typeof __experimentalSetIsInserterOpened&&__experimentalSetIsInserterOpened(!1),resetZoomLevel()}}return node.addEventListener("dblclick",onDoubleClick),()=>{node.removeEventListener("dblclick",onDoubleClick)}}),[getSettings,isZoomOut,resetZoomLevel])}const{LayoutStyle,useLayoutClasses,useLayoutStyles,ExperimentalBlockCanvas:BlockCanvas,useFlashEditableBlocks}=lock_unlock_unlock(build_module.jb),visual_editor_DESIGN_POST_TYPES=[PATTERN_POST_TYPE,constants_TEMPLATE_POST_TYPE,NAVIGATION_POST_TYPE,constants_TEMPLATE_PART_POST_TYPE];function getPostContentAttributes(blocks){for(let i=0;i<blocks.length;i++){if("core/post-content"===blocks[i].name)return blocks[i].attributes;if(blocks[i].innerBlocks.length){const nestedPostContent=getPostContentAttributes(blocks[i].innerBlocks);if(nestedPostContent)return nestedPostContent}}}function checkForPostContentAtRootLevel(blocks){for(let i=0;i<blocks.length;i++)if("core/post-content"===blocks[i].name)return!0;return!1}const visual_editor=function VisualEditor({autoFocus,styles,disableIframe=!1,iframeProps,contentRef,className}){const[resizeObserver,sizes]=(0,use_resize_observer.A)(),isMobileViewport=(0,use_viewport_match.A)("small","<"),{renderingMode,postContentAttributes,editedPostTemplate={},wrapperBlockName,wrapperUniqueId,deviceType,isFocusedEntity,isDesignPostType,postType,isPreview}=(0,use_select.A)((select=>{const{getCurrentPostId,getCurrentPostType,getCurrentTemplateId,getEditorSettings,getRenderingMode,getDeviceType}=select(store_store),{getPostType,getEditedEntityRecord}=select(core_data_build_module.M_),postTypeSlug=getCurrentPostType(),_renderingMode=getRenderingMode();let _wrapperBlockName;postTypeSlug===PATTERN_POST_TYPE?_wrapperBlockName="core/block":"post-only"===_renderingMode&&(_wrapperBlockName="core/post-content");const editorSettings=getEditorSettings(),supportsTemplateMode=editorSettings.supportsTemplateMode,postTypeObject=getPostType(postTypeSlug),currentTemplateId=getCurrentTemplateId(),template=currentTemplateId?getEditedEntityRecord("postType",constants_TEMPLATE_POST_TYPE,currentTemplateId):void 0;return{renderingMode:_renderingMode,postContentAttributes:editorSettings.postContentAttributes,isDesignPostType:visual_editor_DESIGN_POST_TYPES.includes(postTypeSlug),editedPostTemplate:postTypeObject?.viewable&&supportsTemplateMode?template:void 0,wrapperBlockName:_wrapperBlockName,wrapperUniqueId:getCurrentPostId(),deviceType:getDeviceType(),isFocusedEntity:!!editorSettings.onNavigateToPreviousEntityRecord,postType:postTypeSlug,isPreview:editorSettings.isPreviewMode}}),[]),{isCleanNewPost}=(0,use_select.A)(store_store),{hasRootPaddingAwareAlignments,themeHasDisabledLayoutStyles,themeSupportsLayout,isZoomedOut}=(0,use_select.A)((select=>{const{getSettings,isZoomOut:_isZoomOut}=lock_unlock_unlock(select(build_module.M_)),_settings=getSettings();return{themeHasDisabledLayoutStyles:_settings.disableLayoutStyles,themeSupportsLayout:_settings.supportsLayout,hasRootPaddingAwareAlignments:_settings.__experimentalFeatures?.useRootPaddingAwareAlignments,isZoomedOut:_isZoomOut()}}),[]),deviceStyles=(0,build_module.aG)(deviceType),[globalLayoutSettings]=(0,build_module.t0)("layout"),fallbackLayout=(0,react.useMemo)((()=>"post-only"!==renderingMode||isDesignPostType?{type:"default"}:themeSupportsLayout?{...globalLayoutSettings,type:"constrained"}:{type:"default"}),[renderingMode,themeSupportsLayout,globalLayoutSettings,isDesignPostType]),newestPostContentAttributes=(0,react.useMemo)((()=>{if(!editedPostTemplate?.content&&!editedPostTemplate?.blocks&&postContentAttributes)return postContentAttributes;if(editedPostTemplate?.blocks)return getPostContentAttributes(editedPostTemplate?.blocks);const parseableContent="string"==typeof editedPostTemplate?.content?editedPostTemplate?.content:"";return getPostContentAttributes((0,blocks_build_module.qg)(parseableContent))||{}}),[editedPostTemplate?.content,editedPostTemplate?.blocks,postContentAttributes]),hasPostContentAtRootLevel=(0,react.useMemo)((()=>{if(!editedPostTemplate?.content&&!editedPostTemplate?.blocks)return!1;if(editedPostTemplate?.blocks)return checkForPostContentAtRootLevel(editedPostTemplate?.blocks);const parseableContent="string"==typeof editedPostTemplate?.content?editedPostTemplate?.content:"";return checkForPostContentAtRootLevel((0,blocks_build_module.qg)(parseableContent))||!1}),[editedPostTemplate?.content,editedPostTemplate?.blocks]),{layout={},align=""}=newestPostContentAttributes||{},postContentLayoutClasses=useLayoutClasses(newestPostContentAttributes,"core/post-content"),blockListLayoutClass=(0,clsx.A)({"is-layout-flow":!themeSupportsLayout},themeSupportsLayout&&postContentLayoutClasses,align&&`align${align}`),postContentLayoutStyles=useLayoutStyles(newestPostContentAttributes,"core/post-content",".block-editor-block-list__layout.is-root-container"),postContentLayout=(0,react.useMemo)((()=>layout&&("constrained"===layout?.type||layout?.inherit||layout?.contentSize||layout?.wideSize)?{...globalLayoutSettings,...layout,type:"constrained"}:{...globalLayoutSettings,...layout,type:"default"}),[layout?.type,layout?.inherit,layout?.contentSize,layout?.wideSize,globalLayoutSettings]),blockListLayout=postContentAttributes?postContentLayout:fallbackLayout,postEditorLayout="default"!==blockListLayout?.type||hasPostContentAtRootLevel?blockListLayout:fallbackLayout,observeTypingRef=(0,build_module.rK)(),titleRef=(0,react.useRef)();(0,react.useEffect)((()=>{autoFocus&&isCleanNewPost()&&titleRef?.current?.focus()}),[autoFocus,isCleanNewPost]);const localRef=(0,react.useRef)(),typewriterRef=(0,build_module.jZ)();contentRef=(0,use_merge_refs.A)([localRef,contentRef,"post-only"===renderingMode?typewriterRef:null,useFlashEditableBlocks({isEnabled:"template-locked"===renderingMode}),useSelectNearestEditableBlock({isEnabled:"template-locked"===renderingMode}),useZoomOutModeExit()]);const forceFullHeight=postType===NAVIGATION_POST_TYPE,enableResizing=[NAVIGATION_POST_TYPE,constants_TEMPLATE_PART_POST_TYPE,PATTERN_POST_TYPE].includes(postType)&&!isPreview&&!isMobileViewport&&!isZoomedOut,iframeStyles=(0,react.useMemo)((()=>[...null!=styles?styles:[],{css:`.is-root-container{display:flow-root;${enableResizing?"min-height:0!important;":""}}`}]),[styles,enableResizing]);return(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("editor-visual-editor","edit-post-visual-editor",className,{"has-padding":isFocusedEntity||enableResizing,"is-resizable":enableResizing,"is-iframed":!disableIframe}),children:(0,jsx_runtime.jsx)(resizable_editor,{enableResizing,height:sizes.height&&!forceFullHeight?sizes.height:"100%",children:(0,jsx_runtime.jsxs)(BlockCanvas,{shouldIframe:!disableIframe,contentRef,styles:iframeStyles,height:"100%",iframeProps:{...iframeProps,style:{...iframeProps?.style,...deviceStyles}},children:[themeSupportsLayout&&!themeHasDisabledLayoutStyles&&"post-only"===renderingMode&&!isDesignPostType&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LayoutStyle,{selector:".editor-visual-editor__post-title-wrapper",layout:fallbackLayout}),(0,jsx_runtime.jsx)(LayoutStyle,{selector:".block-editor-block-list__layout.is-root-container",layout:postEditorLayout}),align&&(0,jsx_runtime.jsx)(LayoutStyle,{css:".is-root-container.alignwide { max-width: var(--wp--style--global--wide-size); margin-left: auto; margin-right: auto;}\n\t\t.is-root-container.alignwide:where(.is-layout-flow) > :not(.alignleft):not(.alignright) { max-width: var(--wp--style--global--wide-size);}\n\t\t.is-root-container.alignfull { max-width: none; margin-left: auto; margin-right: auto;}\n\t\t.is-root-container.alignfull:where(.is-layout-flow) > :not(.alignleft):not(.alignright) { max-width: none;}"}),postContentLayoutStyles&&(0,jsx_runtime.jsx)(LayoutStyle,{layout:postContentLayout,css:postContentLayoutStyles})]}),"post-only"===renderingMode&&!isDesignPostType&&(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("editor-visual-editor__post-title-wrapper","edit-post-visual-editor__post-title-wrapper",{"has-global-padding":hasRootPaddingAwareAlignments}),contentEditable:!1,ref:observeTypingRef,style:{marginTop:"4rem"},children:(0,jsx_runtime.jsx)(post_title,{ref:titleRef})}),(0,jsx_runtime.jsxs)(build_module.ip,{blockName:wrapperBlockName,uniqueId:wrapperUniqueId,children:[(0,jsx_runtime.jsx)(build_module.m9,{className:(0,clsx.A)("is-"+deviceType.toLowerCase()+"-preview","post-only"!==renderingMode||isDesignPostType?"wp-site-blocks":`${blockListLayoutClass} wp-block-post-content`),layout:blockListLayout,dropZoneElement:disableIframe?localRef.current:localRef.current?.parentNode,__unstableDisableDropZone:"template-locked"===renderingMode}),"template-locked"===renderingMode&&(0,jsx_runtime.jsx)(EditTemplateBlocksNotification,{contentRef:localRef})]}),enableResizing&&resizeObserver]})})})},interfaceLabels={header:(0,i18n_build_module.__)("Editor top bar"),body:(0,i18n_build_module.__)("Editor content"),sidebar:(0,i18n_build_module.__)("Editor settings"),actions:(0,i18n_build_module.__)("Editor publish"),footer:(0,i18n_build_module.__)("Editor footer")};function EditorInterface({className,styles,children,forceIsDirty,contentRef,disableIframe,autoFocus,customSaveButton,customSavePanel,forceDisableBlockTools,title,iframeProps}){const{mode,isRichEditingEnabled,isInserterOpened,isListViewOpened,isDistractionFree,isPreviewMode,showBlockBreadcrumbs,documentLabel,isZoomOut}=(0,use_select.A)((select=>{const{get}=select(store.M),{getEditorSettings,getPostTypeLabel}=select(store_store),editorSettings=getEditorSettings(),postTypeLabel=getPostTypeLabel(),{isZoomOut:_isZoomOut}=lock_unlock_unlock(select(build_module.M_));return{mode:select(store_store).getEditorMode(),isRichEditingEnabled:editorSettings.richEditingEnabled,isInserterOpened:select(store_store).isInserterOpened(),isListViewOpened:select(store_store).isListViewOpened(),isDistractionFree:get("core","distractionFree"),isPreviewMode:editorSettings.isPreviewMode,showBlockBreadcrumbs:get("core","showBlockBreadcrumbs"),documentLabel:postTypeLabel||(0,i18n_build_module._x)("Document","noun"),isZoomOut:_isZoomOut()}}),[]),isLargeViewport=(0,use_viewport_match.A)("medium"),secondarySidebarLabel=isListViewOpened?(0,i18n_build_module.__)("Document Overview"):(0,i18n_build_module.__)("Block Library"),[entitiesSavedStatesCallback,setEntitiesSavedStatesCallback]=(0,react.useState)(!1),closeEntitiesSavedStates=(0,react.useCallback)((arg=>{"function"==typeof entitiesSavedStatesCallback&&entitiesSavedStatesCallback(arg),setEntitiesSavedStatesCallback(!1)}),[entitiesSavedStatesCallback]);return(0,jsx_runtime.jsx)(interface_skeleton,{isDistractionFree,className:(0,clsx.A)("editor-editor-interface",className,{"is-entity-save-view-open":!!entitiesSavedStatesCallback,"is-distraction-free":isDistractionFree&&!isPreviewMode}),labels:{...interfaceLabels,secondarySidebar:secondarySidebarLabel},header:!isPreviewMode&&(0,jsx_runtime.jsx)(components_header,{forceIsDirty,setEntitiesSavedStatesCallback,customSaveButton,forceDisableBlockTools,title,isEditorIframed:!disableIframe}),editorNotices:(0,jsx_runtime.jsx)(editor_notices,{}),secondarySidebar:!isPreviewMode&&"visual"===mode&&(isInserterOpened&&(0,jsx_runtime.jsx)(InserterSidebar,{})||isListViewOpened&&(0,jsx_runtime.jsx)(ListViewSidebar,{})),sidebar:!isPreviewMode&&!isDistractionFree&&(0,jsx_runtime.jsx)(complementary_area.Slot,{scope:"core"}),content:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isDistractionFree&&!isPreviewMode&&(0,jsx_runtime.jsx)(editor_notices,{}),(0,jsx_runtime.jsx)(content_slot_fill.Slot,{children:([editorCanvasView])=>editorCanvasView||(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!isPreviewMode&&("text"===mode||!isRichEditingEnabled)&&(0,jsx_runtime.jsx)(TextEditor,{autoFocus}),!isPreviewMode&&!isLargeViewport&&"visual"===mode&&(0,jsx_runtime.jsx)(build_module.Lz,{hideDragHandle:!0}),(isPreviewMode||isRichEditingEnabled&&"visual"===mode)&&(0,jsx_runtime.jsx)(visual_editor,{styles,contentRef,disableIframe,autoFocus,iframeProps}),children]})})]}),footer:!isPreviewMode&&!isDistractionFree&&isLargeViewport&&showBlockBreadcrumbs&&isRichEditingEnabled&&!isZoomOut&&"visual"===mode&&(0,jsx_runtime.jsx)(build_module.j_,{rootLabelText:documentLabel}),actions:isPreviewMode?void 0:customSavePanel||(0,jsx_runtime.jsx)(SavePublishPanels,{closeEntitiesSavedStates,isEntitiesSavedStatesOpen:entitiesSavedStatesCallback,setEntitiesSavedStatesCallback,forceIsDirtyPublishPanel:forceIsDirty})})}var build_module_registry=__webpack_require__("./packages/data/build-module/registry.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),context=__webpack_require__("./packages/data/build-module/components/registry-provider/context.js");const with_registry_provider=(0,create_higher_order_component.f)((WrappedComponent=>({useSubRegistry=!0,...props})=>{const registry=(0,use_registry.A)(),[subRegistries]=(0,react.useState)((()=>new WeakMap)),subRegistry=function getSubRegistry(subRegistries,registry,useSubRegistry){if(!useSubRegistry)return registry;let subRegistry=subRegistries.get(registry);return subRegistry||(subRegistry=(0,build_module_registry.I)({"core/block-editor":build_module.iy},registry),subRegistry.registerStore("core/editor",storeConfig),subRegistries.set(registry,subRegistry)),subRegistry}(subRegistries,registry,useSubRegistry);return subRegistry===registry?(0,jsx_runtime.jsx)(WrappedComponent,{registry,...props}):(0,jsx_runtime.jsx)(context.Ay,{value:subRegistry,children:(0,jsx_runtime.jsx)(WrappedComponent,{registry:subRegistry,...props})})}),"withRegistryProvider"),getExternalLink=(url,text)=>`<a ${getExternalLinkAttributes(url)}>${text}</a>`,getExternalLinkAttributes=url=>`href="${url}" target="_blank" rel="noreferrer noopener"`,getOpenverseCaption=item=>{const{title,foreign_landing_url:foreignLandingUrl,creator,creator_url:creatorUrl,license,license_version:licenseVersion,license_url:licenseUrl}=item,fullLicense=((license,licenseVersion)=>{let licenseName=license.trim();return"pdm"!==license&&(licenseName=license.toUpperCase().replace("SAMPLING","Sampling")),licenseVersion&&(licenseName+=` ${licenseVersion}`),["pdm","cc0"].includes(license)||(licenseName=`CC ${licenseName}`),licenseName})(license,licenseVersion),_creator=(0,html_entities_build_module.S)(creator);let _caption;return _caption=_creator?title?(0,i18n_build_module.nv)((0,i18n_build_module._x)('"%1$s" by %2$s/ %3$s',"caption"),getExternalLink(foreignLandingUrl,(0,html_entities_build_module.S)(title)),creatorUrl?getExternalLink(creatorUrl,_creator):_creator,licenseUrl?getExternalLink(`${licenseUrl}?ref=openverse`,fullLicense):fullLicense):(0,i18n_build_module.nv)((0,i18n_build_module._x)("<a %1$s>Work</a> by %2$s/ %3$s","caption"),getExternalLinkAttributes(foreignLandingUrl),creatorUrl?getExternalLink(creatorUrl,_creator):_creator,licenseUrl?getExternalLink(`${licenseUrl}?ref=openverse`,fullLicense):fullLicense):title?(0,i18n_build_module.nv)((0,i18n_build_module._x)('"%1$s"/ %2$s',"caption"),getExternalLink(foreignLandingUrl,(0,html_entities_build_module.S)(title)),licenseUrl?getExternalLink(`${licenseUrl}?ref=openverse`,fullLicense):fullLicense):(0,i18n_build_module.nv)((0,i18n_build_module._x)("<a %1$s>Work</a>/ %2$s","caption"),getExternalLinkAttributes(foreignLandingUrl),licenseUrl?getExternalLink(`${licenseUrl}?ref=openverse`,fullLicense):fullLicense),_caption.replace(/\s{2}/g," ")},coreMediaFetch=async(query={})=>(await(0,data_build_module.dH)(core_data_build_module.M_).getMediaItems({...query,orderBy:query?.search?"relevance":"date"})).map((mediaItem=>({...mediaItem,alt:mediaItem.alt_text,url:mediaItem.source_url,previewUrl:mediaItem.media_details?.sizes?.medium?.source_url,caption:mediaItem.caption?.raw}))),media_categories=[{name:"images",labels:{name:(0,i18n_build_module.__)("Images"),search_items:(0,i18n_build_module.__)("Search images")},mediaType:"image",fetch:async(query={})=>coreMediaFetch({...query,media_type:"image"})},{name:"videos",labels:{name:(0,i18n_build_module.__)("Videos"),search_items:(0,i18n_build_module.__)("Search videos")},mediaType:"video",fetch:async(query={})=>coreMediaFetch({...query,media_type:"video"})},{name:"audio",labels:{name:(0,i18n_build_module.__)("Audio"),search_items:(0,i18n_build_module.__)("Search audio")},mediaType:"audio",fetch:async(query={})=>coreMediaFetch({...query,media_type:"audio"})},{name:"openverse",labels:{name:(0,i18n_build_module.__)("Openverse"),search_items:(0,i18n_build_module.__)("Search Openverse")},mediaType:"image",async fetch(query={}){const finalQuery={...query,mature:!1,excluded_source:"flickr,inaturalist,wikimedia",license:"pdm,cc0"},mapFromInserterMediaRequest={per_page:"page_size",search:"q"},url=new URL("https://api.openverse.org/v1/images/");Object.entries(finalQuery).forEach((([key,value])=>{const queryKey=mapFromInserterMediaRequest[key]||key;url.searchParams.set(queryKey,value)}));const response=await window.fetch(url,{headers:{"User-Agent":"WordPress/inserter-media-fetch"}});return(await response.json()).results.map((result=>({...result,title:result.title?.toLowerCase().startsWith("file:")?result.title.slice(5):result.title,sourceId:result.id,id:void 0,caption:getOpenverseCaption(result),previewUrl:result.thumbnail})))},getReportUrl:({sourceId})=>`https://wordpress.org/openverse/image/${sourceId}/report/`,isExternalResource:!0}],media_upload_noop=()=>{};function mediaUpload({additionalData={},allowedTypes,filesList,maxUploadFileSize,onError=media_upload_noop,onFileChange}){const{getCurrentPost,getEditorSettings}=(0,build_module_select.L)(store_store),{lockPostAutosaving,unlockPostAutosaving,lockPostSaving,unlockPostSaving}=(0,build_module_dispatch.J)(store_store),wpAllowedMimeTypes=getEditorSettings().allowedMimeTypes,lockKey=`image-upload-${(0,v4.A)()}`;let imageIsUploading=!1;maxUploadFileSize=maxUploadFileSize||getEditorSettings().maxUploadFileSize;const currentPost=getCurrentPost(),currentPostId="number"==typeof currentPost?.id?currentPost.id:currentPost?.wp_id,clearSaveLock=()=>{unlockPostSaving(lockKey),unlockPostAutosaving(lockKey),imageIsUploading=!1};uploadMedia({allowedTypes,filesList,onFileChange:file=>{imageIsUploading?clearSaveLock():(lockPostSaving(lockKey),lockPostAutosaving(lockKey),imageIsUploading=!0),onFileChange(file)},additionalData:{...currentPostId?{post:currentPostId}:{},...additionalData},maxUploadFileSize,onError:({message})=>{clearSaveLock(),onError(message)},wpAllowedMimeTypes})}var cjs=__webpack_require__("./node_modules/deepmerge/dist/cjs.js"),cjs_default=__webpack_require__.n(cjs),is_plain_object=__webpack_require__("./node_modules/is-plain-object/dist/is-plain-object.mjs");const{GlobalStylesContext:global_styles_provider_GlobalStylesContext,cleanEmptyObject}=lock_unlock_unlock(build_module.jb);function mergeBaseAndUserConfigs(base,user){return cjs_default()(base,user,{isMergeableObject:is_plain_object.Q,customMerge:key=>{if("backgroundImage"===key)return(baseConfig,userConfig)=>userConfig}})}function useGlobalStylesContext(){const[isUserConfigReady,userConfig,setUserConfig]=function useGlobalStylesUserConfig(){const{globalStylesId,isReady,settings,styles,_links}=(0,use_select.A)((select=>{const{getEntityRecord,getEditedEntityRecord,hasFinishedResolution,canUser}=select(core_data_build_module.M_),_globalStylesId=select(core_data_build_module.M_).__experimentalGetCurrentGlobalStylesId();let record;const userCanEditGlobalStyles=canUser("update",{kind:"root",name:"globalStyles",id:_globalStylesId});_globalStylesId&&(record=userCanEditGlobalStyles?getEditedEntityRecord("root","globalStyles",_globalStylesId):getEntityRecord("root","globalStyles",_globalStylesId,{context:"view"}));let hasResolved=!1;return hasFinishedResolution("__experimentalGetCurrentGlobalStylesId")&&(hasResolved=!_globalStylesId||(userCanEditGlobalStyles?hasFinishedResolution("getEditedEntityRecord",["root","globalStyles",_globalStylesId]):hasFinishedResolution("getEntityRecord",["root","globalStyles",_globalStylesId,{context:"view"}]))),{globalStylesId:_globalStylesId,isReady:hasResolved,settings:record?.settings,styles:record?.styles,_links:record?._links}}),[]),{getEditedEntityRecord}=(0,use_select.A)(core_data_build_module.M_),{editEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_);return[isReady,(0,react.useMemo)((()=>({settings:null!=settings?settings:{},styles:null!=styles?styles:{},_links:null!=_links?_links:{}})),[settings,styles,_links]),(0,react.useCallback)(((callbackOrObject,options={})=>{var _record$styles,_record$settings,_record$_links;const record=getEditedEntityRecord("root","globalStyles",globalStylesId),currentConfig={styles:null!==(_record$styles=record?.styles)&&void 0!==_record$styles?_record$styles:{},settings:null!==(_record$settings=record?.settings)&&void 0!==_record$settings?_record$settings:{},_links:null!==(_record$_links=record?._links)&&void 0!==_record$_links?_record$_links:{}},updatedConfig="function"==typeof callbackOrObject?callbackOrObject(currentConfig):callbackOrObject;editEntityRecord("root","globalStyles",globalStylesId,{styles:cleanEmptyObject(updatedConfig.styles)||{},settings:cleanEmptyObject(updatedConfig.settings)||{},_links:cleanEmptyObject(updatedConfig._links)||{}},options)}),[globalStylesId,editEntityRecord,getEditedEntityRecord])]}(),[isBaseConfigReady,baseConfig]=function useGlobalStylesBaseConfig(){const baseConfig=(0,use_select.A)((select=>select(core_data_build_module.M_).__experimentalGetCurrentThemeBaseGlobalStyles()),[]);return[!!baseConfig,baseConfig]}(),mergedConfig=(0,react.useMemo)((()=>baseConfig&&userConfig?mergeBaseAndUserConfigs(baseConfig,userConfig):{}),[userConfig,baseConfig]);return(0,react.useMemo)((()=>({isReady:isUserConfigReady&&isBaseConfigReady,user:userConfig,base:baseConfig,merged:mergedConfig,setUserConfig})),[mergedConfig,userConfig,baseConfig,setUserConfig,isUserConfigReady,isBaseConfigReady])}const use_block_editor_settings_EMPTY_OBJECT={};function __experimentalReusableBlocksSelect(select){const{getEntityRecords,hasFinishedResolution}=select(core_data_build_module.M_),reusableBlocks=getEntityRecords("postType","wp_block",{per_page:-1});return hasFinishedResolution("getEntityRecords",["postType","wp_block",{per_page:-1}])?reusableBlocks:void 0}const BLOCK_EDITOR_SETTINGS=["__experimentalBlockDirectory","__experimentalDiscussionSettings","__experimentalFeatures","__experimentalGlobalStylesBaseStyles","alignWide","blockInspectorTabs","allowedMimeTypes","bodyPlaceholder","canLockBlocks","canUpdateBlockBindings","capabilities","clearBlockSelection","codeEditingEnabled","colors","disableCustomColors","disableCustomFontSizes","disableCustomSpacingSizes","disableCustomGradients","disableLayoutStyles","enableCustomLineHeight","enableCustomSpacing","enableCustomUnits","enableOpenverseMediaCategory","fontSizes","gradients","generateAnchors","onNavigateToEntityRecord","imageDefaultSize","imageDimensions","imageEditing","imageSizes","isPreviewMode","isRTL","locale","maxWidth","postContentAttributes","postsPerPage","readOnly","styles","titlePlaceholder","supportsLayout","widgetTypesToHideFromLegacyWidgetBlock","__unstableHasCustomAppender","__unstableResolvedAssets","__unstableIsBlockBasedTheme"],{globalStylesDataKey,globalStylesLinksDataKey,selectBlockPatternsKey,reusableBlocksSelectKey,sectionRootClientIdKey}=lock_unlock_unlock(build_module.jb);const use_block_editor_settings=function useBlockEditorSettings(settings,postType,postId,renderingMode){var _mergedGlobalStyles$s,_mergedGlobalStyles$_,_settings$__experimen,_settings$__experimen2;const isLargeViewport=(0,use_viewport_match.A)("medium"),{allowRightClickOverrides,blockTypes,focusMode,hasFixedToolbar,isDistractionFree,keepCaretInsideBlock,hasUploadPermissions,hiddenBlockTypes,canUseUnfilteredHTML,userCanCreatePages,pageOnFront,pageForPosts,userPatternCategories,restBlockPatternCategories,sectionRootClientId}=(0,use_select.A)((select=>{var _canUser;const{canUser,getRawEntityRecord,getEntityRecord,getUserPatternCategories,getBlockPatternCategories}=select(core_data_build_module.M_),{get}=select(store.M),{getBlockTypes}=select(blocks_build_module.M_),{getBlocksByName,getBlockAttributes}=select(build_module.M_),siteSettings=canUser("read",{kind:"root",name:"site"})?getEntityRecord("root","site"):void 0;return{allowRightClickOverrides:get("core","allowRightClickOverrides"),blockTypes:getBlockTypes(),canUseUnfilteredHTML:getRawEntityRecord("postType",postType,postId)?._links?.hasOwnProperty("wp:action-unfiltered-html"),focusMode:get("core","focusMode"),hasFixedToolbar:get("core","fixedToolbar")||!isLargeViewport,hiddenBlockTypes:get("core","hiddenBlockTypes"),isDistractionFree:get("core","distractionFree"),keepCaretInsideBlock:get("core","keepCaretInsideBlock"),hasUploadPermissions:null===(_canUser=canUser("create",{kind:"root",name:"media"}))||void 0===_canUser||_canUser,userCanCreatePages:canUser("create",{kind:"postType",name:"page"}),pageOnFront:siteSettings?.page_on_front,pageForPosts:siteSettings?.page_for_posts,userPatternCategories:getUserPatternCategories(),restBlockPatternCategories:getBlockPatternCategories(),sectionRootClientId:function getSectionRootBlock(){var _getBlocksByName$find,_getBlocksByName$;return"template-locked"===renderingMode?null!==(_getBlocksByName$=getBlocksByName("core/post-content")?.[0])&&void 0!==_getBlocksByName$?_getBlocksByName$:"":null!==(_getBlocksByName$find=getBlocksByName("core/group").find((clientId=>"main"===getBlockAttributes(clientId)?.tagName)))&&void 0!==_getBlocksByName$find?_getBlocksByName$find:""}()}}),[postType,postId,isLargeViewport,renderingMode]),{merged:mergedGlobalStyles}=useGlobalStylesContext(),globalStylesData=null!==(_mergedGlobalStyles$s=mergedGlobalStyles.styles)&&void 0!==_mergedGlobalStyles$s?_mergedGlobalStyles$s:use_block_editor_settings_EMPTY_OBJECT,globalStylesLinksData=null!==(_mergedGlobalStyles$_=mergedGlobalStyles._links)&&void 0!==_mergedGlobalStyles$_?_mergedGlobalStyles$_:use_block_editor_settings_EMPTY_OBJECT,settingsBlockPatterns=null!==(_settings$__experimen=settings.__experimentalAdditionalBlockPatterns)&&void 0!==_settings$__experimen?_settings$__experimen:settings.__experimentalBlockPatterns,settingsBlockPatternCategories=null!==(_settings$__experimen2=settings.__experimentalAdditionalBlockPatternCategories)&&void 0!==_settings$__experimen2?_settings$__experimen2:settings.__experimentalBlockPatternCategories,blockPatterns=(0,react.useMemo)((()=>[...settingsBlockPatterns||[]].filter((({postTypes})=>!postTypes||Array.isArray(postTypes)&&postTypes.includes(postType)))),[settingsBlockPatterns,postType]),blockPatternCategories=(0,react.useMemo)((()=>[...settingsBlockPatternCategories||[],...restBlockPatternCategories||[]].filter(((x,index,arr)=>index===arr.findIndex((y=>x.name===y.name))))),[settingsBlockPatternCategories,restBlockPatternCategories]),{undo,setIsInserterOpened}=(0,use_dispatch.A)(store_store),{saveEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),createPageEntity=(0,react.useCallback)((options=>userCanCreatePages?saveEntityRecord("postType","page",options):Promise.reject({message:(0,i18n_build_module.__)("You do not have permission to create Pages.")})),[saveEntityRecord,userCanCreatePages]),allowedBlockTypes=(0,react.useMemo)((()=>{if(hiddenBlockTypes&&hiddenBlockTypes.length>0){return(!0===settings.allowedBlockTypes?blockTypes.map((({name})=>name)):settings.allowedBlockTypes||[]).filter((type=>!hiddenBlockTypes.includes(type)))}return settings.allowedBlockTypes}),[settings.allowedBlockTypes,hiddenBlockTypes,blockTypes]),forceDisableFocusMode=!1===settings.focusMode;return(0,react.useMemo)((()=>{const blockEditorSettings={...Object.fromEntries(Object.entries(settings).filter((([key])=>BLOCK_EDITOR_SETTINGS.includes(key)))),[globalStylesDataKey]:globalStylesData,[globalStylesLinksDataKey]:globalStylesLinksData,allowedBlockTypes,allowRightClickOverrides,focusMode:focusMode&&!forceDisableFocusMode,hasFixedToolbar,isDistractionFree,keepCaretInsideBlock,mediaUpload:hasUploadPermissions?mediaUpload:void 0,__experimentalBlockPatterns:blockPatterns,[selectBlockPatternsKey]:select=>{const{hasFinishedResolution,getBlockPatternsForPostType}=lock_unlock_unlock(select(core_data_build_module.M_)),patterns=getBlockPatternsForPostType(postType);return hasFinishedResolution("getBlockPatterns")?patterns:void 0},[reusableBlocksSelectKey]:__experimentalReusableBlocksSelect,__experimentalBlockPatternCategories:blockPatternCategories,__experimentalUserPatternCategories:userPatternCategories,__experimentalFetchLinkSuggestions:(search,searchOptions)=>(0,core_data_build_module.Y3)(search,searchOptions,settings),inserterMediaCategories:media_categories,__experimentalFetchRichUrlData:core_data_build_module.gr,__experimentalCanUserUseUnfilteredHTML:canUseUnfilteredHTML,__experimentalUndo:undo,outlineMode:!isDistractionFree&&"wp_template"===postType,__experimentalCreatePageEntity:createPageEntity,__experimentalUserCanCreatePages:userCanCreatePages,pageOnFront,pageForPosts,__experimentalPreferPatternsOnRoot:"wp_template"===postType,templateLock:"wp_navigation"===postType?"insert":settings.templateLock,template:"wp_navigation"===postType?[["core/navigation",{},[]]]:settings.template,__experimentalSetIsInserterOpened:setIsInserterOpened,[sectionRootClientIdKey]:sectionRootClientId};return blockEditorSettings}),[allowedBlockTypes,allowRightClickOverrides,focusMode,forceDisableFocusMode,hasFixedToolbar,isDistractionFree,keepCaretInsideBlock,settings,hasUploadPermissions,userPatternCategories,blockPatterns,blockPatternCategories,canUseUnfilteredHTML,undo,createPageEntity,userCanCreatePages,pageOnFront,pageForPosts,postType,setIsInserterOpened,sectionRootClientId,globalStylesData,globalStylesLinksData])},POST_CONTENT_BLOCK_TYPES=["core/post-title","core/post-featured-image","core/post-content"];function usePostContentBlocks(){const contentOnlyBlockTypes=(0,react.useMemo)((()=>[...(0,hooks_build_module.W5)("editor.postContentBlockTypes",POST_CONTENT_BLOCK_TYPES)]),[]),contentOnlyIds=(0,use_select.A)((select=>{const{getPostBlocksByName}=lock_unlock_unlock(select(store_store));return getPostBlocksByName(contentOnlyBlockTypes)}),[contentOnlyBlockTypes]);return contentOnlyIds}function DisableNonPageContentBlocks(){const contentOnlyIds=usePostContentBlocks(),templateParts=(0,use_select.A)((select=>{const{getBlocksByName}=select(build_module.M_);return getBlocksByName("core/template-part")}),[]),disabledIds=(0,use_select.A)((select=>{const{getBlockOrder}=select(build_module.M_);return templateParts.flatMap((clientId=>getBlockOrder(clientId)))}),[templateParts]),registry=(0,use_registry.A)();return(0,react.useEffect)((()=>{const{setBlockEditingMode,unsetBlockEditingMode}=registry.dispatch(build_module.M_);return registry.batch((()=>{setBlockEditingMode("","disabled");for(const clientId of contentOnlyIds)setBlockEditingMode(clientId,"contentOnly");for(const clientId of templateParts)setBlockEditingMode(clientId,"contentOnly");for(const clientId of disabledIds)setBlockEditingMode(clientId,"disabled")})),()=>{registry.batch((()=>{unsetBlockEditingMode("");for(const clientId of contentOnlyIds)unsetBlockEditingMode(clientId);for(const clientId of templateParts)unsetBlockEditingMode(clientId);for(const clientId of disabledIds)unsetBlockEditingMode(clientId)}))}}),[templateParts,contentOnlyIds,disabledIds,registry]),null}function NavigationBlockEditingMode(){const blockClientId=(0,use_select.A)((select=>select(build_module.M_).getBlockOrder()?.[0]),[]),{setBlockEditingMode,unsetBlockEditingMode}=(0,use_dispatch.A)(build_module.M_);(0,react.useEffect)((()=>{if(blockClientId)return setBlockEditingMode(blockClientId,"contentOnly"),()=>{unsetBlockEditingMode(blockClientId)}}),[blockClientId,unsetBlockEditingMode,setBlockEditingMode])}const POST_TYPES_ALLOWING_POST_CONTENT_TEMPLATE_PART=["wp_block","wp_template","wp_template_part"];const library_keyboard=(0,jsx_runtime.jsxs)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,jsx_runtime.jsx)(svg.wA,{d:"m16 15.5h-8v-1.5h8zm-7.5-2.5h-2v-2h2zm3 0h-2v-2h2zm3 0h-2v-2h2zm3 0h-2v-2h2zm-9-3h-2v-2h2zm3 0h-2v-2h2zm3 0h-2v-2h2zm3 0h-2v-2h2z"}),(0,jsx_runtime.jsx)(svg.wA,{d:"m18.5 6.5h-13a.5.5 0 0 0 -.5.5v9.5a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9.5a.5.5 0 0 0 -.5-.5zm-13-1.5h13a2 2 0 0 1 2 2v9.5a2 2 0 0 1 -2 2h-13a2 2 0 0 1 -2-2v-9.5a2 2 0 0 1 2-2z"})]});var code=__webpack_require__("./packages/icons/build-module/library/code.js");const drawer_left=(0,jsx_runtime.jsx)(svg.t4,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM8.5 18.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h2.5v13zm10-.5c0 .3-.2.5-.5.5h-8v-13h8c.3 0 .5.2.5.5v12z"})}),drawer_right=(0,jsx_runtime.jsx)(svg.t4,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4 14.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h8v13zm4.5-.5c0 .3-.2.5-.5.5h-2.5v-13H18c.3 0 .5.2.5.5v12z"})});var block_default=__webpack_require__("./packages/icons/build-module/library/block-default.js"),format_list_bullets=__webpack_require__("./packages/icons/build-module/library/format-list-bullets.js"),edit=__webpack_require__("./packages/icons/build-module/library/edit.js");const{RenamePatternModal}=lock_unlock_unlock(patterns_build_module.j),modalName="editor/pattern-rename";function PatternRenameModal(){const{record,postType}=(0,use_select.A)((select=>{const{getCurrentPostType,getCurrentPostId}=select(store_store),{getEditedEntityRecord}=select(core_data_build_module.M_),_postType=getCurrentPostType();return{record:getEditedEntityRecord("postType",_postType,getCurrentPostId()),postType:_postType}}),[]),{closeModal}=(0,use_dispatch.A)(interface_build_module_store_store);return(0,use_select.A)((select=>select(interface_build_module_store_store).isModalActive(modalName)))&&postType===PATTERN_POST_TYPE?(0,jsx_runtime.jsx)(RenamePatternModal,{onClose:closeModal,pattern:record}):null}const{DuplicatePatternModal}=lock_unlock_unlock(patterns_build_module.j),pattern_duplicate_modal_modalName="editor/pattern-duplicate";function PatternDuplicateModal(){const{record,postType}=(0,use_select.A)((select=>{const{getCurrentPostType,getCurrentPostId}=select(store_store),{getEditedEntityRecord}=select(core_data_build_module.M_),_postType=getCurrentPostType();return{record:getEditedEntityRecord("postType",_postType,getCurrentPostId()),postType:_postType}}),[]),{closeModal}=(0,use_dispatch.A)(interface_build_module_store_store);return(0,use_select.A)((select=>select(interface_build_module_store_store).isModalActive(pattern_duplicate_modal_modalName)))&&postType===PATTERN_POST_TYPE?(0,jsx_runtime.jsx)(DuplicatePatternModal,{onClose:closeModal,onSuccess:()=>closeModal(),pattern:record}):null}function useEditorCommandLoader(){const{editorMode,isListViewOpen,showBlockBreadcrumbs,isDistractionFree,isTopToolbar,isFocusMode,isPreviewMode,isViewable,isCodeEditingEnabled,isRichEditingEnabled,isPublishSidebarEnabled}=(0,use_select.A)((select=>{var _get,_getPostType$viewable;const{get}=select(store.M),{isListViewOpened,getCurrentPostType,getEditorSettings}=select(store_store),{getSettings}=select(build_module.M_),{getPostType}=select(core_data_build_module.M_);return{editorMode:null!==(_get=get("core","editorMode"))&&void 0!==_get?_get:"visual",isListViewOpen:isListViewOpened(),showBlockBreadcrumbs:get("core","showBlockBreadcrumbs"),isDistractionFree:get("core","distractionFree"),isFocusMode:get("core","focusMode"),isTopToolbar:get("core","fixedToolbar"),isPreviewMode:getSettings().isPreviewMode,isViewable:null!==(_getPostType$viewable=getPostType(getCurrentPostType())?.viewable)&&void 0!==_getPostType$viewable&&_getPostType$viewable,isCodeEditingEnabled:getEditorSettings().codeEditingEnabled,isRichEditingEnabled:getEditorSettings().richEditingEnabled,isPublishSidebarEnabled:select(store_store).isPublishSidebarEnabled()}}),[]),{getActiveComplementaryArea}=(0,use_select.A)(interface_build_module_store_store),{toggle}=(0,use_dispatch.A)(store.M),{createInfoNotice}=(0,use_dispatch.A)(notices_build_module.M),{__unstableSaveForPreview,setIsListViewOpened,switchEditorMode,toggleDistractionFree}=(0,use_dispatch.A)(store_store),{openModal,enableComplementaryArea,disableComplementaryArea}=(0,use_dispatch.A)(interface_build_module_store_store),{getCurrentPostId}=(0,use_select.A)(store_store),allowSwitchEditorMode=isCodeEditingEnabled&&isRichEditingEnabled;if(isPreviewMode)return{commands:[],isLoading:!1};const commands=[];return commands.push({name:"core/open-shortcut-help",label:(0,i18n_build_module.__)("Keyboard shortcuts"),icon:library_keyboard,callback:({close})=>{close(),openModal("editor/keyboard-shortcut-help")}}),commands.push({name:"core/toggle-distraction-free",label:isDistractionFree?(0,i18n_build_module.__)("Exit Distraction Free"):(0,i18n_build_module.__)("Enter Distraction Free"),callback:({close})=>{toggleDistractionFree(),close()}}),commands.push({name:"core/open-preferences",label:(0,i18n_build_module.__)("Editor preferences"),callback:({close})=>{close(),openModal("editor/preferences")}}),commands.push({name:"core/toggle-spotlight-mode",label:(0,i18n_build_module.__)("Toggle spotlight"),callback:({close})=>{toggle("core","focusMode"),close(),createInfoNotice(isFocusMode?(0,i18n_build_module.__)("Spotlight off."):(0,i18n_build_module.__)("Spotlight on."),{id:"core/editor/toggle-spotlight-mode/notice",type:"snackbar",actions:[{label:(0,i18n_build_module.__)("Undo"),onClick:()=>{toggle("core","focusMode")}}]})}}),commands.push({name:"core/toggle-list-view",label:isListViewOpen?(0,i18n_build_module.__)("Close List View"):(0,i18n_build_module.__)("Open List View"),icon:list_view.A,callback:({close})=>{setIsListViewOpened(!isListViewOpen),close(),createInfoNotice(isListViewOpen?(0,i18n_build_module.__)("List View off."):(0,i18n_build_module.__)("List View on."),{id:"core/editor/toggle-list-view/notice",type:"snackbar"})}}),commands.push({name:"core/toggle-top-toolbar",label:(0,i18n_build_module.__)("Toggle top toolbar"),callback:({close})=>{toggle("core","fixedToolbar"),isDistractionFree&&toggleDistractionFree(),close(),createInfoNotice(isTopToolbar?(0,i18n_build_module.__)("Top toolbar off."):(0,i18n_build_module.__)("Top toolbar on."),{id:"core/editor/toggle-top-toolbar/notice",type:"snackbar",actions:[{label:(0,i18n_build_module.__)("Undo"),onClick:()=>{toggle("core","fixedToolbar")}}]})}}),allowSwitchEditorMode&&commands.push({name:"core/toggle-code-editor",label:"visual"===editorMode?(0,i18n_build_module.__)("Open code editor"):(0,i18n_build_module.__)("Exit code editor"),icon:code.A,callback:({close})=>{switchEditorMode("visual"===editorMode?"text":"visual"),close()}}),commands.push({name:"core/toggle-breadcrumbs",label:showBlockBreadcrumbs?(0,i18n_build_module.__)("Hide block breadcrumbs"):(0,i18n_build_module.__)("Show block breadcrumbs"),callback:({close})=>{toggle("core","showBlockBreadcrumbs"),close(),createInfoNotice(showBlockBreadcrumbs?(0,i18n_build_module.__)("Breadcrumbs hidden."):(0,i18n_build_module.__)("Breadcrumbs visible."),{id:"core/editor/toggle-breadcrumbs/notice",type:"snackbar"})}}),commands.push({name:"core/open-settings-sidebar",label:(0,i18n_build_module.__)("Toggle settings sidebar"),icon:(0,i18n_build_module.V8)()?drawer_left:drawer_right,callback:({close})=>{const activeSidebar=getActiveComplementaryArea("core");close(),"edit-post/document"===activeSidebar?disableComplementaryArea("core"):enableComplementaryArea("core","edit-post/document")}}),commands.push({name:"core/open-block-inspector",label:(0,i18n_build_module.__)("Toggle block inspector"),icon:block_default.A,callback:({close})=>{const activeSidebar=getActiveComplementaryArea("core");close(),"edit-post/block"===activeSidebar?disableComplementaryArea("core"):enableComplementaryArea("core","edit-post/block")}}),commands.push({name:"core/toggle-publish-sidebar",label:isPublishSidebarEnabled?(0,i18n_build_module.__)("Disable pre-publish checks"):(0,i18n_build_module.__)("Enable pre-publish checks"),icon:format_list_bullets.A,callback:({close})=>{close(),toggle("core","isPublishSidebarEnabled"),createInfoNotice(isPublishSidebarEnabled?(0,i18n_build_module.__)("Pre-publish checks disabled."):(0,i18n_build_module.__)("Pre-publish checks enabled."),{id:"core/editor/publish-sidebar/notice",type:"snackbar"})}}),isViewable&&commands.push({name:"core/preview-link",label:(0,i18n_build_module.__)("Preview in a new tab"),icon:external.A,callback:async({close})=>{close();const postId=getCurrentPostId(),link=await __unstableSaveForPreview();window.open(link,`wp-preview-${postId}`)}}),{commands,isLoading:!1}}function useEditedEntityContextualCommands(){const{postType}=(0,use_select.A)((select=>{const{getCurrentPostType}=select(store_store);return{postType:getCurrentPostType()}}),[]),{openModal}=(0,use_dispatch.A)(interface_build_module_store_store),commands=[];return postType===PATTERN_POST_TYPE&&(commands.push({name:"core/rename-pattern",label:(0,i18n_build_module.__)("Rename pattern"),icon:edit.A,callback:({close})=>{openModal(modalName),close()}}),commands.push({name:"core/duplicate-pattern",label:(0,i18n_build_module.__)("Duplicate pattern"),icon:symbol.A,callback:({close})=>{openModal(pattern_duplicate_modal_modalName),close()}})),{isLoading:!1,commands}}const{BlockRemovalWarningModal}=lock_unlock_unlock(build_module.jb),TEMPLATE_BLOCKS=["core/post-content","core/post-template","core/query"],BLOCK_REMOVAL_RULES=[{postTypes:["wp_template","wp_template_part"],callback(removedBlocks){if(removedBlocks.filter((({name})=>TEMPLATE_BLOCKS.includes(name))).length)return(0,i18n_build_module._n)("Deleting this block will stop your post or page content from displaying on this template. It is not recommended.","Some of the deleted blocks will stop your post or page content from displaying on this template. It is not recommended.",removedBlocks.length)}},{postTypes:["wp_block"],callback(removedBlocks){if(removedBlocks.filter((({attributes})=>attributes?.metadata?.bindings&&Object.values(attributes.metadata.bindings).some((binding=>"core/pattern-overrides"===binding.source)))).length)return(0,i18n_build_module._n)("The deleted block allows instance overrides. Removing it may result in content not displaying where this pattern is used. Are you sure you want to proceed?","Some of the deleted blocks allow instance overrides. Removing them may result in content not displaying where this pattern is used. Are you sure you want to proceed?",removedBlocks.length)}}];function BlockRemovalWarnings(){const currentPostType=(0,use_select.A)((select=>select(store_store).getCurrentPostType()),[]),removalRulesForPostType=(0,react.useMemo)((()=>BLOCK_REMOVAL_RULES.filter((rule=>rule.postTypes.includes(currentPostType)))),[currentPostType]);return BlockRemovalWarningModal&&removalRulesForPostType?(0,jsx_runtime.jsx)(BlockRemovalWarningModal,{rules:removalRulesForPostType}):null}var use_async_list=__webpack_require__("./packages/compose/build-module/hooks/use-async-list/index.js");function useStartPatterns(){const{blockPatternsWithPostContentBlockType,postType}=(0,use_select.A)((select=>{const{getPatternsByBlockTypes,getBlocksByName}=select(build_module.M_),{getCurrentPostType,getRenderingMode}=select(store_store);return{blockPatternsWithPostContentBlockType:getPatternsByBlockTypes("core/post-content","post-only"===getRenderingMode()?"":getBlocksByName("core/post-content")?.[0]),postType:getCurrentPostType()}}),[]);return(0,react.useMemo)((()=>blockPatternsWithPostContentBlockType?.length?blockPatternsWithPostContentBlockType.filter((pattern=>"page"===postType&&!pattern.postTypes||Array.isArray(pattern.postTypes)&&pattern.postTypes.includes(postType))):[]),[postType,blockPatternsWithPostContentBlockType])}function PatternSelection({blockPatterns,onChoosePattern}){const shownBlockPatterns=(0,use_async_list.A)(blockPatterns),{editEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{postType,postId}=(0,use_select.A)((select=>{const{getCurrentPostType,getCurrentPostId}=select(store_store);return{postType:getCurrentPostType(),postId:getCurrentPostId()}}),[]);return(0,jsx_runtime.jsx)(build_module.RM,{blockPatterns,shownPatterns:shownBlockPatterns,onClickPattern:(_pattern,blocks)=>{editEntityRecord("postType",postType,postId,{blocks,content:({blocks:blocksForSerialization=[]})=>(0,blocks_build_module.RM)(blocksForSerialization)}),onChoosePattern()}})}function StartPageOptionsModal({onClose}){const startPatterns=useStartPatterns();return startPatterns.length>0?(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Choose a pattern"),isFullScreen:!0,onRequestClose:onClose,children:(0,jsx_runtime.jsx)("div",{className:"editor-start-page-options__modal-content",children:(0,jsx_runtime.jsx)(PatternSelection,{blockPatterns:startPatterns,onChoosePattern:onClose})})}):null}function StartPageOptions(){const[isClosed,setIsClosed]=(0,react.useState)(!1),shouldEnableModal=(0,use_select.A)((select=>{const{isEditedPostDirty,isEditedPostEmpty,getCurrentPostType}=select(store_store),preferencesModalActive=select(interface_build_module_store_store).isModalActive("editor/preferences");return select(store.M).get("core","enableChoosePatternModal")&&!preferencesModalActive&&!isEditedPostDirty()&&isEditedPostEmpty()&&constants_TEMPLATE_POST_TYPE!==getCurrentPostType()}),[]);return!shouldEnableModal||isClosed?null:(0,jsx_runtime.jsx)(StartPageOptionsModal,{onClose:()=>setIsClosed(!0)})}const textFormattingShortcuts=[{keyCombination:{modifier:"primary",character:"b"},description:(0,i18n_build_module.__)("Make the selected text bold.")},{keyCombination:{modifier:"primary",character:"i"},description:(0,i18n_build_module.__)("Make the selected text italic.")},{keyCombination:{modifier:"primary",character:"k"},description:(0,i18n_build_module.__)("Convert the selected text into a link.")},{keyCombination:{modifier:"primaryShift",character:"k"},description:(0,i18n_build_module.__)("Remove a link.")},{keyCombination:{character:"[["},description:(0,i18n_build_module.__)("Insert a link to a post or page.")},{keyCombination:{modifier:"primary",character:"u"},description:(0,i18n_build_module.__)("Underline the selected text.")},{keyCombination:{modifier:"access",character:"d"},description:(0,i18n_build_module.__)("Strikethrough the selected text.")},{keyCombination:{modifier:"access",character:"x"},description:(0,i18n_build_module.__)("Make the selected text inline code.")},{keyCombination:{modifier:"access",character:"0"},aliases:[{modifier:"access",character:"7"}],description:(0,i18n_build_module.__)("Convert the current heading to a paragraph.")},{keyCombination:{modifier:"access",character:"1-6"},description:(0,i18n_build_module.__)("Convert the current paragraph or heading to a heading of level 1 to 6.")},{keyCombination:{modifier:"primaryShift",character:"SPACE"},description:(0,i18n_build_module.__)("Add non breaking space.")}];function KeyCombination({keyCombination,forceAriaLabel}){const shortcut=keyCombination.modifier?keycodes_build_module.b[keyCombination.modifier](keyCombination.character):keyCombination.character,ariaLabel=keyCombination.modifier?keycodes_build_module._A[keyCombination.modifier](keyCombination.character):keyCombination.character;return(0,jsx_runtime.jsx)("kbd",{className:"editor-keyboard-shortcut-help-modal__shortcut-key-combination","aria-label":forceAriaLabel||ariaLabel,children:(Array.isArray(shortcut)?shortcut:[shortcut]).map(((character,index)=>"+"===character?(0,jsx_runtime.jsx)(react.Fragment,{children:character},index):(0,jsx_runtime.jsx)("kbd",{className:"editor-keyboard-shortcut-help-modal__shortcut-key",children:character},index)))})}const keyboard_shortcut_help_modal_shortcut=function Shortcut({description,keyCombination,aliases=[],ariaLabel}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"editor-keyboard-shortcut-help-modal__shortcut-description",children:description}),(0,jsx_runtime.jsxs)("div",{className:"editor-keyboard-shortcut-help-modal__shortcut-term",children:[(0,jsx_runtime.jsx)(KeyCombination,{keyCombination,forceAriaLabel:ariaLabel}),aliases.map(((alias,index)=>(0,jsx_runtime.jsx)(KeyCombination,{keyCombination:alias,forceAriaLabel:ariaLabel},index)))]})]})};const dynamic_shortcut=function DynamicShortcut({name}){const{keyCombination,description,aliases}=(0,use_select.A)((select=>{const{getShortcutKeyCombination,getShortcutDescription,getShortcutAliases}=select(keyboard_shortcuts_build_module.M_);return{keyCombination:getShortcutKeyCombination(name),aliases:getShortcutAliases(name),description:getShortcutDescription(name)}}),[name]);return keyCombination?(0,jsx_runtime.jsx)(keyboard_shortcut_help_modal_shortcut,{keyCombination,description,aliases}):null},ShortcutList=({shortcuts})=>(0,jsx_runtime.jsx)("ul",{className:"editor-keyboard-shortcut-help-modal__shortcut-list",role:"list",children:shortcuts.map(((shortcut,index)=>(0,jsx_runtime.jsx)("li",{className:"editor-keyboard-shortcut-help-modal__shortcut",children:"string"==typeof shortcut?(0,jsx_runtime.jsx)(dynamic_shortcut,{name:shortcut}):(0,jsx_runtime.jsx)(keyboard_shortcut_help_modal_shortcut,{...shortcut})},index)))}),ShortcutSection=({title,shortcuts,className})=>(0,jsx_runtime.jsxs)("section",{className:(0,clsx.A)("editor-keyboard-shortcut-help-modal__section",className),children:[!!title&&(0,jsx_runtime.jsx)("h2",{className:"editor-keyboard-shortcut-help-modal__section-title",children:title}),(0,jsx_runtime.jsx)(ShortcutList,{shortcuts})]}),ShortcutCategorySection=({title,categoryName,additionalShortcuts=[]})=>{const categoryShortcuts=(0,use_select.A)((select=>select(keyboard_shortcuts_build_module.M_).getCategoryShortcuts(categoryName)),[categoryName]);return(0,jsx_runtime.jsx)(ShortcutSection,{title,shortcuts:categoryShortcuts.concat(additionalShortcuts)})};const keyboard_shortcut_help_modal=function KeyboardShortcutHelpModal(){const isModalActive=(0,use_select.A)((select=>select(interface_build_module_store_store).isModalActive("editor/keyboard-shortcut-help")),[]),{openModal,closeModal}=(0,use_dispatch.A)(interface_build_module_store_store),toggleModal=()=>{isModalActive?closeModal():openModal("editor/keyboard-shortcut-help")};return(0,keyboard_shortcuts_build_module.wk)("core/editor/keyboard-shortcuts",toggleModal),isModalActive?(0,jsx_runtime.jsxs)(modal.A,{className:"editor-keyboard-shortcut-help-modal",title:(0,i18n_build_module.__)("Keyboard shortcuts"),closeButtonLabel:(0,i18n_build_module.__)("Close"),onRequestClose:toggleModal,children:[(0,jsx_runtime.jsx)(ShortcutSection,{className:"editor-keyboard-shortcut-help-modal__main-shortcuts",shortcuts:["core/editor/keyboard-shortcuts"]}),(0,jsx_runtime.jsx)(ShortcutCategorySection,{title:(0,i18n_build_module.__)("Global shortcuts"),categoryName:"global"}),(0,jsx_runtime.jsx)(ShortcutCategorySection,{title:(0,i18n_build_module.__)("Selection shortcuts"),categoryName:"selection"}),(0,jsx_runtime.jsx)(ShortcutCategorySection,{title:(0,i18n_build_module.__)("Block shortcuts"),categoryName:"block",additionalShortcuts:[{keyCombination:{character:"/"},description:(0,i18n_build_module.__)("Change the block type after adding a new paragraph."),ariaLabel:(0,i18n_build_module.__)("Forward-slash")}]}),(0,jsx_runtime.jsx)(ShortcutSection,{title:(0,i18n_build_module.__)("Text formatting"),shortcuts:textFormattingShortcuts}),(0,jsx_runtime.jsx)(ShortcutCategorySection,{title:(0,i18n_build_module.__)("List View shortcuts"),categoryName:"list-view"})]}):null};function ContentOnlySettingsMenuItems({clientId,onClose}){const postContentBlocks=usePostContentBlocks(),{entity,onNavigateToEntityRecord,canEditTemplates}=(0,use_select.A)((select=>{const{getBlockParentsByBlockName,getSettings,getBlockAttributes,getBlockParents}=select(build_module.M_),{getCurrentTemplateId,getRenderingMode}=select(store_store),patternParent=getBlockParentsByBlockName(clientId,"core/block",!0)[0];let record;if(patternParent?record=select(core_data_build_module.M_).getEntityRecord("postType","wp_block",getBlockAttributes(patternParent).ref):"template-locked"!==getRenderingMode()||getBlockParents(clientId).some((parent=>postContentBlocks.includes(parent)))||(record=select(core_data_build_module.M_).getEntityRecord("postType","wp_template",getCurrentTemplateId())),!record)return{};return{canEditTemplates:select(core_data_build_module.M_).canUser("create",{kind:"postType",name:"wp_template"}),entity:record,onNavigateToEntityRecord:getSettings().onNavigateToEntityRecord}}),[clientId,postContentBlocks]);if(!entity)return(0,jsx_runtime.jsx)(TemplateLockContentOnlyMenuItems,{clientId,onClose});const isPattern="wp_block"===entity.type;let helpText=isPattern?(0,i18n_build_module.__)("Edit the pattern to move, delete, or make further changes to this block."):(0,i18n_build_module.__)("Edit the template to move, delete, or make further changes to this block.");return canEditTemplates||(helpText=(0,i18n_build_module.__)("Only users with permissions to edit the template can move or delete this block")),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module.N9,{children:(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{onNavigateToEntityRecord({postId:entity.id,postType:entity.type})},disabled:!canEditTemplates,children:isPattern?(0,i18n_build_module.__)("Edit pattern"):(0,i18n_build_module.__)("Edit template")})}),(0,jsx_runtime.jsx)(text_component.A,{variant:"muted",as:"p",className:"editor-content-only-settings-menu__description",children:helpText})]})}function TemplateLockContentOnlyMenuItems({clientId,onClose}){const{contentLockingParent}=(0,use_select.A)((select=>{const{getContentLockingParent}=lock_unlock_unlock(select(build_module.M_));return{contentLockingParent:getContentLockingParent(clientId)}}),[clientId]),blockDisplayInformation=(0,build_module.Pn)(contentLockingParent),blockEditorActions=(0,use_dispatch.A)(build_module.M_);if(!blockDisplayInformation?.title)return null;const{modifyContentLockBlock}=lock_unlock_unlock(blockEditorActions);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module.N9,{children:(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{modifyContentLockBlock(contentLockingParent),onClose()},children:(0,i18n_build_module._x)("Unlock","Unlock content locked blocks")})}),(0,jsx_runtime.jsx)(text_component.A,{variant:"muted",as:"p",className:"editor-content-only-settings-menu__description",children:(0,i18n_build_module.__)("Temporarily unlock the parent block to edit, delete or make further changes to this block.")})]})}function ContentOnlySettingsMenu(){return(0,jsx_runtime.jsx)(build_module.Or,{children:({selectedClientIds,onClose})=>1===selectedClientIds.length&&(0,jsx_runtime.jsx)(ContentOnlySettingsMenuItems,{clientId:selectedClientIds[0],onClose})})}function start_template_options_useStartPatterns(fallbackContent){const{slug,patterns}=(0,use_select.A)((select=>{const{getCurrentPostType,getCurrentPostId}=select(store_store),{getEntityRecord,getBlockPatterns}=select(core_data_build_module.M_),postId=getCurrentPostId();return{slug:getEntityRecord("postType",getCurrentPostType(),postId).slug,patterns:getBlockPatterns()}}),[]),currentThemeStylesheet=(0,use_select.A)((select=>select(core_data_build_module.M_).getCurrentTheme().stylesheet));return(0,react.useMemo)((()=>[{name:"fallback",blocks:(0,blocks_build_module.qg)(fallbackContent),title:(0,i18n_build_module.__)("Fallback content")},...patterns.filter((pattern=>Array.isArray(pattern.templateTypes)&&pattern.templateTypes.some((templateType=>slug.startsWith(templateType))))).map((pattern=>({...pattern,blocks:(0,blocks_build_module.qg)(pattern.content).map((block=>function injectThemeAttributeInBlockTemplateContent(block){return block.innerBlocks.find((innerBlock=>"core/template-part"===innerBlock.name))&&(block.innerBlocks=block.innerBlocks.map((innerBlock=>("core/template-part"===innerBlock.name&&void 0===innerBlock.attributes.theme&&(innerBlock.attributes.theme=currentThemeStylesheet),innerBlock)))),"core/template-part"===block.name&&void 0===block.attributes.theme&&(block.attributes.theme=currentThemeStylesheet),block}(block)))})))]),[fallbackContent,slug,patterns])}function start_template_options_PatternSelection({fallbackContent,onChoosePattern,postType}){const[,,onChange]=(0,core_data_build_module.hg)("postType",postType),blockPatterns=start_template_options_useStartPatterns(fallbackContent),shownBlockPatterns=(0,use_async_list.A)(blockPatterns);return(0,jsx_runtime.jsx)(build_module.RM,{blockPatterns,shownPatterns:shownBlockPatterns,onClickPattern:(pattern,blocks)=>{onChange(blocks,{selection:void 0}),onChoosePattern()}})}function StartModal({slug,isCustom,onClose,postType}){const fallbackContent=function useFallbackTemplateContent(slug,isCustom=!1){return(0,use_select.A)((select=>{const{getEntityRecord,getDefaultTemplateId}=select(core_data_build_module.M_),templateId=getDefaultTemplateId({slug,is_custom:isCustom,ignore_empty:!0});return templateId?getEntityRecord("postType",constants_TEMPLATE_POST_TYPE,templateId)?.content?.raw:void 0}),[slug,isCustom])}(slug,isCustom);return fallbackContent?(0,jsx_runtime.jsxs)(modal.A,{className:"editor-start-template-options__modal",title:(0,i18n_build_module.__)("Choose a pattern"),closeLabel:(0,i18n_build_module.__)("Cancel"),focusOnMount:"firstElement",onRequestClose:onClose,isFullScreen:!0,children:[(0,jsx_runtime.jsx)("div",{className:"editor-start-template-options__modal-content",children:(0,jsx_runtime.jsx)(start_template_options_PatternSelection,{fallbackContent,slug,isCustom,postType,onChoosePattern:()=>{onClose()}})}),(0,jsx_runtime.jsx)(flex_component.A,{className:"editor-start-template-options__modal__actions",justify:"flex-end",expanded:!1,children:(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:onClose,children:(0,i18n_build_module.__)("Skip")})})})]}):null}function StartTemplateOptions(){const[isClosed,setIsClosed]=(0,react.useState)(!1),{shouldOpenModal,slug,isCustom,postType,postId}=(0,use_select.A)((select=>{const{getCurrentPostType,getCurrentPostId}=select(store_store),_postType=getCurrentPostType(),_postId=getCurrentPostId(),{getEditedEntityRecord,hasEditsForEntityRecord}=select(core_data_build_module.M_),templateRecord=getEditedEntityRecord("postType",_postType,_postId);return{shouldOpenModal:!hasEditsForEntityRecord("postType",_postType,_postId)&&""===templateRecord.content&&constants_TEMPLATE_POST_TYPE===_postType,slug:templateRecord.slug,isCustom:templateRecord.is_custom,postType:_postType,postId:_postId}}),[]);return(0,react.useEffect)((()=>{setIsClosed(!1)}),[postType,postId]),!shouldOpenModal||isClosed?null:(0,jsx_runtime.jsx)(StartModal,{slug,isCustom,postType,onClose:()=>setIsClosed(!0)})}function EditorKeyboardShortcuts(){const isModeToggleDisabled=(0,use_select.A)((select=>{const{richEditingEnabled,codeEditingEnabled}=select(store_store).getEditorSettings();return!richEditingEnabled||!codeEditingEnabled}),[]),{getBlockSelectionStart}=(0,use_select.A)(build_module.M_),{getActiveComplementaryArea}=(0,use_select.A)(interface_build_module_store_store),{enableComplementaryArea,disableComplementaryArea}=(0,use_dispatch.A)(interface_build_module_store_store),{redo,undo,savePost,setIsListViewOpened,switchEditorMode,toggleDistractionFree}=(0,use_dispatch.A)(store_store),{isEditedPostDirty,isPostSavingLocked,isListViewOpened,getEditorMode}=(0,use_select.A)(store_store);return(0,keyboard_shortcuts_build_module.wk)("core/editor/toggle-mode",(()=>{switchEditorMode("visual"===getEditorMode()?"text":"visual")}),{isDisabled:isModeToggleDisabled}),(0,keyboard_shortcuts_build_module.wk)("core/editor/toggle-distraction-free",(()=>{toggleDistractionFree()})),(0,keyboard_shortcuts_build_module.wk)("core/editor/undo",(event=>{undo(),event.preventDefault()})),(0,keyboard_shortcuts_build_module.wk)("core/editor/redo",(event=>{redo(),event.preventDefault()})),(0,keyboard_shortcuts_build_module.wk)("core/editor/save",(event=>{event.preventDefault(),isPostSavingLocked()||isEditedPostDirty()&&savePost()})),(0,keyboard_shortcuts_build_module.wk)("core/editor/toggle-list-view",(event=>{isListViewOpened()||(event.preventDefault(),setIsListViewOpened(!0))})),(0,keyboard_shortcuts_build_module.wk)("core/editor/toggle-sidebar",(event=>{event.preventDefault();if(["edit-post/document","edit-post/block"].includes(getActiveComplementaryArea("core")))disableComplementaryArea("core");else{const sidebarToOpen=getBlockSelectionStart()?"edit-post/block":"edit-post/document";enableComplementaryArea("core",sidebarToOpen)}})),null}function ConvertToRegularBlocks({clientId,onClose}){const{getBlocks}=(0,use_select.A)(build_module.M_),{replaceBlocks}=(0,use_dispatch.A)(build_module.M_);return(0,use_select.A)((select=>select(build_module.M_).canRemoveBlock(clientId)),[clientId])?(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{replaceBlocks(clientId,getBlocks(clientId)),onClose()},children:(0,i18n_build_module.__)("Detach")}):null}function ConvertToTemplatePart({clientIds,blocks}){const[isModalOpen,setIsModalOpen]=(0,react.useState)(!1),{replaceBlocks}=(0,use_dispatch.A)(build_module.M_),{createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M),{canCreate}=(0,use_select.A)((select=>({canCreate:select(build_module.M_).canInsertBlockType("core/template-part")})),[]);if(!canCreate)return null;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.A,{icon:symbol_filled.A,onClick:()=>{setIsModalOpen(!0)},"aria-expanded":isModalOpen,"aria-haspopup":"dialog",children:(0,i18n_build_module.__)("Create template part")}),isModalOpen&&(0,jsx_runtime.jsx)(CreateTemplatePartModal,{closeModal:()=>{setIsModalOpen(!1)},blocks,onCreate:async templatePart=>{replaceBlocks(clientIds,(0,blocks_build_module.Wv)("core/template-part",{slug:templatePart.slug,theme:templatePart.theme})),createSuccessNotice((0,i18n_build_module.__)("Template part created."),{type:"snackbar"})}})]})}function TemplatePartMenuItems(){return(0,jsx_runtime.jsx)(build_module.Or,{children:({selectedClientIds,onClose})=>(0,jsx_runtime.jsx)(TemplatePartConverterMenuItem,{clientIds:selectedClientIds,onClose})})}function TemplatePartConverterMenuItem({clientIds,onClose}){const{isContentOnly,blocks}=(0,use_select.A)((select=>{const{getBlocksByClientId,getBlockEditingMode}=select(build_module.M_);return{blocks:getBlocksByClientId(clientIds),isContentOnly:1===clientIds.length&&"contentOnly"===getBlockEditingMode(clientIds[0])}}),[clientIds]);return isContentOnly?null:1===blocks.length&&"core/template-part"===blocks[0]?.name?(0,jsx_runtime.jsx)(ConvertToRegularBlocks,{clientId:clientIds[0],onClose}):(0,jsx_runtime.jsx)(ConvertToTemplatePart,{clientIds,blocks})}const{ExperimentalBlockEditorProvider}=lock_unlock_unlock(build_module.jb),{PatternsMenuItems}=lock_unlock_unlock(patterns_build_module.j),provider_noop=()=>{},NON_CONTEXTUAL_POST_TYPES=["wp_block","wp_navigation","wp_template_part"];const ExperimentalEditorProvider=with_registry_provider((({post,settings,recovery,initialEdits,children,BlockEditorProviderComponent=ExperimentalBlockEditorProvider,__unstableTemplate:template})=>{const{editorSettings,selection,isReady,mode,postTypeEntities}=(0,use_select.A)((select=>{const{getEditorSettings,getEditorSelection,getRenderingMode,__unstableIsEditorReady}=select(store_store),{getEntitiesConfig}=select(core_data_build_module.M_);return{editorSettings:getEditorSettings(),isReady:__unstableIsEditorReady(),mode:getRenderingMode(),selection:getEditorSelection(),postTypeEntities:"wp_template"===post.type?getEntitiesConfig("postType"):null}}),[post.type]),shouldRenderTemplate=!!template&&"post-only"!==mode,rootLevelPost=shouldRenderTemplate?template:post,defaultBlockContext=(0,react.useMemo)((()=>{const postContext={};if("wp_template"===post.type){if("page"===post.slug)postContext.postType="page";else if("single"===post.slug)postContext.postType="post";else if("single"===post.slug.split("-")[0]){const postTypeNames=postTypeEntities?.map((entity=>entity.name))||[],match=post.slug.match(`^single-(${postTypeNames.join("|")})(?:-.+)?$`);match&&(postContext.postType=match[1])}}else NON_CONTEXTUAL_POST_TYPES.includes(rootLevelPost.type)&&!shouldRenderTemplate||(postContext.postId=post.id,postContext.postType=post.type);return{...postContext,templateSlug:"wp_template"===rootLevelPost.type?rootLevelPost.slug:void 0}}),[shouldRenderTemplate,post.id,post.type,post.slug,rootLevelPost.type,rootLevelPost.slug,postTypeEntities]),{id,type}=rootLevelPost,blockEditorSettings=use_block_editor_settings(editorSettings,type,id,mode),[blocks,onInput,onChange]=function useBlockEditorProps(post,template,mode){const rootLevelPost="post-only"!==mode&&template?"template":"post",[postBlocks,onInput,onChange]=(0,core_data_build_module.hg)("postType",post.type,{id:post.id}),[templateBlocks,onInputTemplate,onChangeTemplate]=(0,core_data_build_module.hg)("postType",template?.type,{id:template?.id}),maybeNavigationBlocks=(0,react.useMemo)((()=>{if("wp_navigation"===post.type)return[(0,blocks_build_module.Wv)("core/navigation",{ref:post.id,templateLock:!1})]}),[post.type,post.id]),blocks=(0,react.useMemo)((()=>maybeNavigationBlocks||("template"===rootLevelPost?templateBlocks:postBlocks)),[maybeNavigationBlocks,rootLevelPost,templateBlocks,postBlocks]);return template&&"template-locked"===mode||"wp_navigation"===post.type?[blocks,provider_noop,provider_noop]:[blocks,"post"===rootLevelPost?onInput:onInputTemplate,"post"===rootLevelPost?onChange:onChangeTemplate]}(post,template,mode),{updatePostLock,setupEditor,updateEditorSettings,setCurrentTemplateId,setEditedPost,setRenderingMode}=lock_unlock_unlock((0,use_dispatch.A)(store_store)),{createWarningNotice}=(0,use_dispatch.A)(notices_build_module.M);return(0,react.useLayoutEffect)((()=>{recovery||(updatePostLock(settings.postLock),setupEditor(post,initialEdits,settings.template),settings.autosave&&createWarningNotice((0,i18n_build_module.__)("There is an autosave of this post that is more recent than the version below."),{id:"autosave-exists",actions:[{label:(0,i18n_build_module.__)("View the autosave"),url:settings.autosave.editLink}]}))}),[]),(0,react.useEffect)((()=>{setEditedPost(post.type,post.id)}),[post.type,post.id,setEditedPost]),(0,react.useEffect)((()=>{updateEditorSettings(settings)}),[settings,updateEditorSettings]),(0,react.useEffect)((()=>{setCurrentTemplateId(template?.id)}),[template?.id,setCurrentTemplateId]),(0,react.useEffect)((()=>{var _settings$defaultRend;setRenderingMode(null!==(_settings$defaultRend=settings.defaultRenderingMode)&&void 0!==_settings$defaultRend?_settings$defaultRend:"post-only")}),[settings.defaultRenderingMode,setRenderingMode]),function useHideBlocksFromInserter(postType,mode){(0,react.useEffect)((()=>((0,hooks_build_module.U2)("blockEditor.__unstableCanInsertBlockType","removeTemplatePartsFromInserter",((canInsert,blockType)=>!(!POST_TYPES_ALLOWING_POST_CONTENT_TEMPLATE_PART.includes(postType)&&"core/template-part"===blockType.name&&"post-only"===mode)&&canInsert)),(0,hooks_build_module.U2)("blockEditor.__unstableCanInsertBlockType","removePostContentFromInserter",((canInsert,blockType,rootClientId,{getBlockParentsByBlockName})=>POST_TYPES_ALLOWING_POST_CONTENT_TEMPLATE_PART.includes(postType)||"core/post-content"!==blockType.name?canInsert:getBlockParentsByBlockName(rootClientId,"core/query").length>0)),()=>{(0,hooks_build_module.VT)("blockEditor.__unstableCanInsertBlockType","removeTemplatePartsFromInserter"),(0,hooks_build_module.VT)("blockEditor.__unstableCanInsertBlockType","removePostContentFromInserter")})),[postType,mode])}(post.type,mode),function useCommands(){(0,commands_build_module.ml)({name:"core/editor/edit-ui",hook:useEditorCommandLoader}),(0,commands_build_module.ml)({name:"core/editor/contextual-commands",hook:useEditedEntityContextualCommands,context:"entity-edit"})}(),isReady?(0,jsx_runtime.jsx)(core_data_build_module.XU,{kind:"root",type:"site",children:(0,jsx_runtime.jsx)(core_data_build_module.XU,{kind:"postType",type:post.type,id:post.id,children:(0,jsx_runtime.jsx)(build_module._C,{value:defaultBlockContext,children:(0,jsx_runtime.jsxs)(BlockEditorProviderComponent,{value:blocks,onChange,onInput,selection,settings:blockEditorSettings,useSubRegistry:!1,children:[children,!settings.isPreviewMode&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PatternsMenuItems,{}),(0,jsx_runtime.jsx)(TemplatePartMenuItems,{}),(0,jsx_runtime.jsx)(ContentOnlySettingsMenu,{}),"template-locked"===mode&&(0,jsx_runtime.jsx)(DisableNonPageContentBlocks,{}),"wp_navigation"===type&&(0,jsx_runtime.jsx)(NavigationBlockEditingMode,{}),(0,jsx_runtime.jsx)(EditorKeyboardShortcuts,{}),(0,jsx_runtime.jsx)(keyboard_shortcut_help_modal,{}),(0,jsx_runtime.jsx)(BlockRemovalWarnings,{}),(0,jsx_runtime.jsx)(StartPageOptions,{}),(0,jsx_runtime.jsx)(StartTemplateOptions,{}),(0,jsx_runtime.jsx)(PatternRenameModal,{}),(0,jsx_runtime.jsx)(PatternDuplicateModal,{})]})]})})})}):null}));const{OverridesPanel}=lock_unlock_unlock(patterns_build_module.j);function PatternOverridesPanel(){return(0,use_select.A)((select=>"wp_block"===select(store_store).getCurrentPostType()),[])?(0,jsx_runtime.jsx)(OverridesPanel,{}):null}var warning_build_module=__webpack_require__("./packages/warning/build-module/index.js"),if_condition=__webpack_require__("./packages/compose/build-module/higher-order/if-condition/index.js"),toggle_control=__webpack_require__("./packages/components/build-module/toggle-control/index.js");const preference_base_option=function BaseOption({help,label,isChecked,onChange,children}){return(0,jsx_runtime.jsxs)("div",{className:"preference-base-option",children:[(0,jsx_runtime.jsx)(toggle_control.A,{__nextHasNoMarginBottom:!0,help,label,checked:isChecked,onChange}),children]})};const preference_toggle_control=function PreferenceToggleControl(props){const{scope,featureName,onToggle=()=>{},...remainingProps}=props,isChecked=(0,use_select.A)((select=>!!select(store.M).get(scope,featureName)),[scope,featureName]),{toggle}=(0,use_dispatch.A)(store.M);return(0,jsx_runtime.jsx)(preference_base_option,{onChange:()=>{onToggle(),toggle(scope,featureName)},isChecked,...remainingProps})};const preferences_modal_section=({description,title,children})=>(0,jsx_runtime.jsxs)("fieldset",{className:"preferences-modal__section",children:[(0,jsx_runtime.jsxs)("legend",{className:"preferences-modal__section-legend",children:[(0,jsx_runtime.jsx)("h2",{className:"preferences-modal__section-title",children:title}),description&&(0,jsx_runtime.jsx)("p",{className:"preferences-modal__section-description",children:description})]}),(0,jsx_runtime.jsx)("div",{className:"preferences-modal__section-content",children})]});var build_module_navigator=__webpack_require__("./packages/components/build-module/navigator/index.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),context_system_provider=__webpack_require__("./packages/components/build-module/context/context-system-provider.js"),context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),view_component=__webpack_require__("./packages/components/build-module/view/component.js"),use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js");const Elevation={name:"12ip69d",styles:"background:transparent;display:block;margin:0!important;pointer-events:none;position:absolute;will-change:box-shadow"};var config_values=__webpack_require__("./packages/components/build-module/utils/config-values.js"),use_cx=__webpack_require__("./packages/components/build-module/utils/hooks/use-cx.js"),values=__webpack_require__("./packages/components/build-module/utils/values.js");function getBoxShadow(value){return`0 ${value}px ${2*value}px 0\n\t${`rgba(0, 0, 0, ${value/20})`}`}const component_Elevation=(0,context_connect.KZ)((function UnconnectedElevation(props,forwardedRef){const elevationProps=function useElevation(props){const{active,borderRadius="inherit",className,focus,hover,isInteractive=!1,offset=0,value=0,...otherProps}=(0,use_context_system.A)(props,"Elevation"),cx=(0,use_cx.l)();return{...otherProps,className:(0,react.useMemo)((()=>{let hoverValue=(0,values.J5)(hover)?hover:2*value,activeValue=(0,values.J5)(active)?active:value/2;isInteractive||(hoverValue=(0,values.J5)(hover)?hover:void 0,activeValue=(0,values.J5)(active)?active:void 0);const transition=`box-shadow ${config_values.A.transitionDuration} ${config_values.A.transitionTimingFunction}`,sx={};return sx.Base=(0,emotion_react_browser_esm.AH)({borderRadius,bottom:offset,boxShadow:getBoxShadow(value),opacity:config_values.A.elevationIntensity,left:offset,right:offset,top:offset},(0,emotion_react_browser_esm.AH)("@media not ( prefers-reduced-motion ){transition:",transition,";}","","",""),"","","",""),(0,values.J5)(hoverValue)&&(sx.hover=(0,emotion_react_browser_esm.AH)("*:hover>&{box-shadow:",getBoxShadow(hoverValue),";}","","","")),(0,values.J5)(activeValue)&&(sx.active=(0,emotion_react_browser_esm.AH)("*:active>&{box-shadow:",getBoxShadow(activeValue),";}","","","")),(0,values.J5)(focus)&&(sx.focus=(0,emotion_react_browser_esm.AH)("*:focus>&{box-shadow:",getBoxShadow(focus),";}","","","")),cx(Elevation,sx.Base,sx.hover,sx.focus,sx.active,className)}),[active,borderRadius,className,cx,focus,hover,isInteractive,offset,value]),"aria-hidden":!0}}(props);return(0,jsx_runtime.jsx)(view_component.A,{...elevationProps,ref:forwardedRef})}),"Elevation"),elevation_component=component_Elevation;var colors_values=__webpack_require__("./packages/components/build-module/utils/colors-values.js");const adjustedBorderRadius=`calc(${config_values.A.radiusLarge} - 1px)`,Card=(0,emotion_react_browser_esm.AH)("box-shadow:0 0 0 1px ",config_values.A.surfaceBorderColor,";outline:none;","","",""),styles_Header={name:"1showjb",styles:"border-bottom:1px solid;box-sizing:border-box;&:last-child{border-bottom:none;}"},Content={name:"13udsys",styles:"height:100%"},Body={name:"6ywzd",styles:"box-sizing:border-box;height:auto;max-height:100%"},Media={name:"dq805e",styles:"box-sizing:border-box;overflow:hidden;&>img,&>iframe{display:block;height:auto;max-width:100%;width:100%;}"},Divider={name:"c990dr",styles:"box-sizing:border-box;display:block;width:100%"},borderRadius=(0,emotion_react_browser_esm.AH)("&:first-of-type{border-top-left-radius:",adjustedBorderRadius,";border-top-right-radius:",adjustedBorderRadius,";}&:last-of-type{border-bottom-left-radius:",adjustedBorderRadius,";border-bottom-right-radius:",adjustedBorderRadius,";}","","",""),borderColor=(0,emotion_react_browser_esm.AH)("border-color:",config_values.A.colorDivider,";","","",""),boxShadowless={name:"1t90u8d",styles:"box-shadow:none"},borderless={name:"1e1ncky",styles:"border:none"},rounded=(0,emotion_react_browser_esm.AH)("border-radius:",adjustedBorderRadius,";","","",""),xSmallCardPadding=(0,emotion_react_browser_esm.AH)("padding:",config_values.A.cardPaddingXSmall,";","","",""),cardPaddings={large:(0,emotion_react_browser_esm.AH)("padding:",config_values.A.cardPaddingLarge,";","","",""),medium:(0,emotion_react_browser_esm.AH)("padding:",config_values.A.cardPaddingMedium,";","","",""),small:(0,emotion_react_browser_esm.AH)("padding:",config_values.A.cardPaddingSmall,";","","",""),xSmall:xSmallCardPadding,extraSmall:xSmallCardPadding},shady=(0,emotion_react_browser_esm.AH)("background-color:",colors_values.l.ui.backgroundDisabled,";","","",""),Surface=(0,emotion_react_browser_esm.AH)("background-color:",config_values.A.surfaceColor,";color:",colors_values.l.gray[900],";position:relative;","","","");config_values.A.surfaceBackgroundColor;function getBorders({borderBottom,borderLeft,borderRight,borderTop}){const borderStyle=`1px solid ${config_values.A.surfaceBorderColor}`;return(0,emotion_react_browser_esm.AH)({borderBottom:borderBottom?borderStyle:void 0,borderLeft:borderLeft?borderStyle:void 0,borderRight:borderRight?borderStyle:void 0,borderTop:borderTop?borderStyle:void 0},"","","","")}const primary=(0,emotion_react_browser_esm.AH)("","","",""),secondary=(0,emotion_react_browser_esm.AH)("background:",config_values.A.surfaceBackgroundTintColor,";","","",""),tertiary=(0,emotion_react_browser_esm.AH)("background:",config_values.A.surfaceBackgroundTertiaryColor,";","","",""),customBackgroundSize=surfaceBackgroundSize=>[surfaceBackgroundSize,surfaceBackgroundSize].join(" "),dottedBackground1=surfaceBackgroundSizeDotted=>["90deg",[config_values.A.surfaceBackgroundColor,surfaceBackgroundSizeDotted].join(" "),"transparent 1%"].join(","),dottedBackground2=surfaceBackgroundSizeDotted=>[[config_values.A.surfaceBackgroundColor,surfaceBackgroundSizeDotted].join(" "),"transparent 1%"].join(","),getDotted=(surfaceBackgroundSize,surfaceBackgroundSizeDotted)=>(0,emotion_react_browser_esm.AH)("background:",(surfaceBackgroundSizeDotted=>[`linear-gradient( ${dottedBackground1(surfaceBackgroundSizeDotted)} ) center`,`linear-gradient( ${dottedBackground2(surfaceBackgroundSizeDotted)} ) center`,config_values.A.surfaceBorderBoldColor].join(","))(surfaceBackgroundSizeDotted),";background-size:",customBackgroundSize(surfaceBackgroundSize),";","","",""),gridBackgroundCombined=[`linear-gradient( ${[`${config_values.A.surfaceBorderSubtleColor} 1px`,"transparent 1px"].join(",")} )`,`linear-gradient( ${["90deg",`${config_values.A.surfaceBorderSubtleColor} 1px`,"transparent 1px"].join(",")} )`].join(","),getVariant=(variant,surfaceBackgroundSize,surfaceBackgroundSizeDotted)=>{switch(variant){case"dotted":return getDotted(surfaceBackgroundSize,surfaceBackgroundSizeDotted);case"grid":return(surfaceBackgroundSize=>(0,emotion_react_browser_esm.AH)("background:",config_values.A.surfaceBackgroundColor,";background-image:",gridBackgroundCombined,";background-size:",customBackgroundSize(surfaceBackgroundSize),";","","",""))(surfaceBackgroundSize);case"primary":return primary;case"secondary":return secondary;case"tertiary":return tertiary}};function useCard(props){const{className,elevation=0,isBorderless=!1,isRounded=!0,size="medium",...otherProps}=(0,use_context_system.A)(function useDeprecatedProps({elevation,isElevated,...otherProps}){const propsToReturn={...otherProps};let computedElevation=elevation;var _computedElevation;return isElevated&&((0,deprecated_build_module.A)("Card isElevated prop",{since:"5.9",alternative:"elevation"}),null!==(_computedElevation=computedElevation)&&void 0!==_computedElevation||(computedElevation=2)),void 0!==computedElevation&&(propsToReturn.elevation=computedElevation),propsToReturn}(props),"Card"),cx=(0,use_cx.l)(),surfaceProps=function useSurface(props){const{backgroundSize=12,borderBottom=!1,borderLeft=!1,borderRight=!1,borderTop=!1,className,variant="primary",...otherProps}=(0,use_context_system.A)(props,"Surface"),cx=(0,use_cx.l)();return{...otherProps,className:(0,react.useMemo)((()=>{const sx={borders:getBorders({borderBottom,borderLeft,borderRight,borderTop})};return cx(Surface,sx.borders,getVariant(variant,`${backgroundSize}px`,backgroundSize-1+"px"),className)}),[backgroundSize,borderBottom,borderLeft,borderRight,borderTop,className,cx,variant])}}({...otherProps,className:(0,react.useMemo)((()=>cx(Card,isBorderless&&boxShadowless,isRounded&&rounded,className)),[className,cx,isBorderless,isRounded])});return{...surfaceProps,elevation,isBorderless,isRounded,size}}const card_component=(0,context_connect.KZ)((function UnconnectedCard(props,forwardedRef){const{children,elevation,isBorderless,isRounded,size,...otherProps}=useCard(props),elevationBorderRadius=isRounded?config_values.A.radiusLarge:0,cx=(0,use_cx.l)(),elevationClassName=(0,react.useMemo)((()=>cx((0,emotion_react_browser_esm.AH)({borderRadius:elevationBorderRadius},"","","",""))),[cx,elevationBorderRadius]),contextProviderValue=(0,react.useMemo)((()=>{const contextProps={size,isBorderless};return{CardBody:contextProps,CardHeader:contextProps,CardFooter:contextProps}}),[isBorderless,size]);return(0,jsx_runtime.jsx)(context_system_provider.c7,{value:contextProviderValue,children:(0,jsx_runtime.jsxs)(view_component.A,{...otherProps,ref:forwardedRef,children:[(0,jsx_runtime.jsx)(view_component.A,{className:cx(Content),children}),(0,jsx_runtime.jsx)(elevation_component,{className:elevationClassName,isInteractive:!1,value:elevation?1:0}),(0,jsx_runtime.jsx)(elevation_component,{className:elevationClassName,isInteractive:!1,value:elevation})]})})}),"Card");const scrollableScrollbar=(0,emotion_react_browser_esm.AH)("@media only screen and ( min-device-width: 40em ){&::-webkit-scrollbar{height:12px;width:12px;}&::-webkit-scrollbar-track{background-color:transparent;}&::-webkit-scrollbar-track{background:",config_values.A.colorScrollbarTrack,";border-radius:8px;}&::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:",config_values.A.colorScrollbarThumb,";border:2px solid rgba( 0, 0, 0, 0 );border-radius:7px;}&:hover::-webkit-scrollbar-thumb{background-color:",config_values.A.colorScrollbarThumbHover,";}}","","",""),Scrollable={name:"13udsys",styles:"height:100%"},styles_smoothScroll={name:"7zq9w",styles:"scroll-behavior:smooth"},scrollX={name:"q33xhg",styles:"overflow-x:auto;overflow-y:hidden"},scrollY={name:"103x71s",styles:"overflow-x:hidden;overflow-y:auto"},scrollAuto={name:"umwchj",styles:"overflow-y:auto"};const scrollable_component=(0,context_connect.KZ)((function UnconnectedScrollable(props,forwardedRef){const scrollableProps=function useScrollable(props){const{className,scrollDirection="y",smoothScroll=!1,...otherProps}=(0,use_context_system.A)(props,"Scrollable"),cx=(0,use_cx.l)();return{...otherProps,className:(0,react.useMemo)((()=>cx(Scrollable,scrollableScrollbar,smoothScroll&&styles_smoothScroll,"x"===scrollDirection&&scrollX,"y"===scrollDirection&&scrollY,"auto"===scrollDirection&&scrollAuto,className)),[className,cx,scrollDirection,smoothScroll])}}(props);return(0,jsx_runtime.jsx)(view_component.A,{...scrollableProps,ref:forwardedRef})}),"Scrollable");const card_body_component=(0,context_connect.KZ)((function UnconnectedCardBody(props,forwardedRef){const{isScrollable,...otherProps}=function useCardBody(props){const{className,isScrollable=!1,isShady=!1,size="medium",...otherProps}=(0,use_context_system.A)(props,"CardBody"),cx=(0,use_cx.l)();return{...otherProps,className:(0,react.useMemo)((()=>cx(Body,borderRadius,cardPaddings[size],isShady&&shady,"components-card__body",className)),[className,cx,isShady,size]),isScrollable}}(props);return isScrollable?(0,jsx_runtime.jsx)(scrollable_component,{...otherProps,ref:forwardedRef}):(0,jsx_runtime.jsx)(view_component.A,{...otherProps,ref:forwardedRef})}),"CardBody");var item_group_component=__webpack_require__("./packages/components/build-module/item-group/item-group/component.js"),item_component=__webpack_require__("./packages/components/build-module/item-group/item/component.js"),truncate_component=__webpack_require__("./packages/components/build-module/truncate/component.js");const card_header_component=(0,context_connect.KZ)((function UnconnectedCardHeader(props,forwardedRef){const headerProps=function useCardHeader(props){const{className,isBorderless=!1,isShady=!1,size="medium",...otherProps}=(0,use_context_system.A)(props,"CardHeader"),cx=(0,use_cx.l)();return{...otherProps,className:(0,react.useMemo)((()=>cx(styles_Header,borderRadius,borderColor,cardPaddings[size],isBorderless&&borderless,isShady&&shady,"components-card__header",className)),[className,cx,isBorderless,isShady,size])}}(props);return(0,jsx_runtime.jsx)(flex_component.A,{...headerProps,ref:forwardedRef})}),"CardHeader");var chevron_left=__webpack_require__("./packages/icons/build-module/library/chevron-left.js"),chevron_right=__webpack_require__("./packages/icons/build-module/library/chevron-right.js");const{lock:build_module_lock_unlock_lock,unlock:preferences_build_module_lock_unlock_unlock}=(0,implementation.yf)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/preferences"),{Tabs}=preferences_build_module_lock_unlock_unlock(private_apis.j);const privateApis={};build_module_lock_unlock_lock(privateApis,{PreferenceBaseOption:preference_base_option,PreferenceToggleControl:preference_toggle_control,PreferencesModal:function PreferencesModal({closeModal,children}){return(0,jsx_runtime.jsx)(modal.A,{className:"preferences-modal",title:(0,i18n_build_module.__)("Preferences"),onRequestClose:closeModal,children})},PreferencesModalSection:preferences_modal_section,PreferencesModalTabs:function PreferencesModalTabs({sections}){const isLargeViewport=(0,use_viewport_match.A)("medium"),[activeMenu,setActiveMenu]=(0,react.useState)("preferences-menu"),{tabs,sectionsContentMap}=(0,react.useMemo)((()=>{let mappedTabs={tabs:[],sectionsContentMap:{}};return sections.length&&(mappedTabs=sections.reduce(((accumulator,{name,tabLabel:title,content})=>(accumulator.tabs.push({name,title}),accumulator.sectionsContentMap[name]=content,accumulator)),{tabs:[],sectionsContentMap:{}})),mappedTabs}),[sections]);let modalContent;return modalContent=isLargeViewport?(0,jsx_runtime.jsx)("div",{className:"preferences__tabs",children:(0,jsx_runtime.jsxs)(Tabs,{defaultTabId:"preferences-menu"!==activeMenu?activeMenu:void 0,onSelect:setActiveMenu,orientation:"vertical",children:[(0,jsx_runtime.jsx)(Tabs.TabList,{className:"preferences__tabs-tablist",children:tabs.map((tab=>(0,jsx_runtime.jsx)(Tabs.Tab,{tabId:tab.name,className:"preferences__tabs-tab",children:tab.title},tab.name)))}),tabs.map((tab=>(0,jsx_runtime.jsx)(Tabs.TabPanel,{tabId:tab.name,className:"preferences__tabs-tabpanel",focusable:!1,children:sectionsContentMap[tab.name]||null},tab.name)))]})}):(0,jsx_runtime.jsxs)(build_module_navigator.m,{initialPath:"/",className:"preferences__provider",children:[(0,jsx_runtime.jsx)(build_module_navigator.m.Screen,{path:"/",children:(0,jsx_runtime.jsx)(card_component,{isBorderless:!0,size:"small",children:(0,jsx_runtime.jsx)(card_body_component,{children:(0,jsx_runtime.jsx)(item_group_component.A,{children:tabs.map((tab=>(0,jsx_runtime.jsx)(build_module_navigator.m.Button,{path:`/${tab.name}`,as:item_component.A,isAction:!0,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(truncate_component.A,{children:tab.title})}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(icon.A,{icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A})})]})},tab.name)))})})})}),sections.length&&sections.map((section=>(0,jsx_runtime.jsx)(build_module_navigator.m.Screen,{path:`/${section.name}`,children:(0,jsx_runtime.jsxs)(card_component,{isBorderless:!0,size:"large",children:[(0,jsx_runtime.jsxs)(card_header_component,{isBorderless:!1,justify:"left",size:"small",gap:"6",children:[(0,jsx_runtime.jsx)(build_module_navigator.m.BackButton,{icon:(0,i18n_build_module.V8)()?chevron_right.A:chevron_left.A,label:(0,i18n_build_module.__)("Back")}),(0,jsx_runtime.jsx)(text_component.A,{size:"16",children:section.tabLabel})]}),(0,jsx_runtime.jsx)(card_body_component,{children:section.content})]})},`${section.name}-menu`)))]}),modalContent}});const{PreferenceBaseOption}=lock_unlock_unlock(privateApis),enable_panel=(0,higher_order_compose.A)((0,with_select.A)(((select,{panelName})=>{const{isEditorPanelEnabled,isEditorPanelRemoved}=select(store_store);return{isRemoved:isEditorPanelRemoved(panelName),isChecked:isEditorPanelEnabled(panelName)}})),(0,if_condition.A)((({isRemoved})=>!isRemoved)),(0,with_dispatch.A)(((dispatch,{panelName})=>({onChange:()=>dispatch(store_store).toggleEditorPanelEnabled(panelName)}))))(PreferenceBaseOption),{Fill:enable_plugin_document_setting_panel_Fill,Slot:enable_plugin_document_setting_panel_Slot}=(0,slot_fill.QJ)("EnablePluginDocumentSettingPanelOption"),EnablePluginDocumentSettingPanelOption=({label,panelName})=>(0,jsx_runtime.jsx)(enable_plugin_document_setting_panel_Fill,{children:(0,jsx_runtime.jsx)(enable_panel,{label,panelName})});EnablePluginDocumentSettingPanelOption.Slot=enable_plugin_document_setting_panel_Slot;const enable_plugin_document_setting_panel=EnablePluginDocumentSettingPanelOption,{Fill:plugin_document_setting_panel_Fill,Slot:plugin_document_setting_panel_Slot}=(0,slot_fill.QJ)("PluginDocumentSettingPanel"),PluginDocumentSettingPanel=({name,className,title,icon,children})=>{const{name:pluginName}=usePluginContext(),panelName=`${pluginName}/${name}`,{opened,isEnabled}=(0,use_select.A)((select=>{const{isEditorPanelOpened,isEditorPanelEnabled}=select(store_store);return{opened:isEditorPanelOpened(panelName),isEnabled:isEditorPanelEnabled(panelName)}}),[panelName]),{toggleEditorPanelOpened}=(0,use_dispatch.A)(store_store);return void 0===name&&!0===globalThis.SCRIPT_DEBUG&&!0===globalThis.SCRIPT_DEBUG&&(0,warning_build_module.A)("PluginDocumentSettingPanel requires a name property."),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(enable_plugin_document_setting_panel,{label:title,panelName}),(0,jsx_runtime.jsx)(plugin_document_setting_panel_Fill,{children:isEnabled&&(0,jsx_runtime.jsx)(body.Ay,{className,title,icon,opened,onToggle:()=>toggleEditorPanelOpened(panelName),children})})]})};PluginDocumentSettingPanel.Slot=plugin_document_setting_panel_Slot;const plugin_document_setting_panel=PluginDocumentSettingPanel,{Fill:plugin_post_status_info_Fill,Slot:plugin_post_status_info_Slot}=(0,slot_fill.QJ)("PluginPostStatusInfo"),PluginPostStatusInfo=({children,className})=>(0,jsx_runtime.jsx)(plugin_post_status_info_Fill,{children:(0,jsx_runtime.jsx)(row.A,{className,children})});PluginPostStatusInfo.Slot=plugin_post_status_info_Slot;const plugin_post_status_info=PluginPostStatusInfo,BASE_QUERY={_fields:"id,name",context:"view"},AUTHORS_QUERY={who:"authors",per_page:50,...BASE_QUERY};function PostAuthorCheck({children}){const{hasAssignAuthorAction,hasAuthors}=(0,use_select.A)((select=>{var _post$_links$wpActio;const post=select(store_store).getCurrentPost(),authors=select(core_data_build_module.M_).getUsers(AUTHORS_QUERY);return{hasAssignAuthorAction:null!==(_post$_links$wpActio=post._links?.["wp:action-assign-author"])&&void 0!==_post$_links$wpActio&&_post$_links$wpActio,hasAuthors:authors?.length>=1}}),[]);return hasAssignAuthorAction&&hasAuthors?(0,jsx_runtime.jsx)(post_type_support_check,{supportKeys:"author",children}):null}var combobox_control=__webpack_require__("./packages/components/build-module/combobox-control/index.js");function useAuthorsQuery(search){const{authorId,authors,postAuthor}=(0,use_select.A)((select=>{const{getUser,getUsers}=select(core_data_build_module.M_),{getEditedPostAttribute}=select(store_store),_authorId=getEditedPostAttribute("author"),query={...AUTHORS_QUERY};return search&&(query.search=search),{authorId:_authorId,authors:getUsers(query),postAuthor:getUser(_authorId,BASE_QUERY)}}),[search]);return{authorId,authorOptions:(0,react.useMemo)((()=>{const fetchedAuthors=(null!=authors?authors:[]).map((author=>({value:author.id,label:(0,html_entities_build_module.S)(author.name)}))),foundAuthor=fetchedAuthors.findIndex((({value})=>postAuthor?.id===value));let currentAuthor=[];return foundAuthor<0&&postAuthor?currentAuthor=[{value:postAuthor.id,label:(0,html_entities_build_module.S)(postAuthor.name)}]:foundAuthor<0&&!postAuthor&&(currentAuthor=[{value:0,label:(0,i18n_build_module.__)("(No author)")}]),[...currentAuthor,...fetchedAuthors]}),[authors,postAuthor]),postAuthor}}function PostAuthorCombobox(){const[fieldValue,setFieldValue]=(0,react.useState)(),{editPost}=(0,use_dispatch.A)(store_store),{authorId,authorOptions}=useAuthorsQuery(fieldValue);return(0,jsx_runtime.jsx)(combobox_control.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Author"),options:authorOptions,value:authorId,onFilterValueChange:(0,debounce.s)((inputValue=>{setFieldValue(inputValue)}),300),onChange:postAuthorId=>{postAuthorId&&editPost({author:postAuthorId})},allowReset:!1,hideLabelFromVision:!0})}function PostAuthorSelect(){const{editPost}=(0,use_dispatch.A)(store_store),{authorId,authorOptions}=useAuthorsQuery();return(0,jsx_runtime.jsx)(select_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,className:"post-author-selector",label:(0,i18n_build_module.__)("Author"),options:authorOptions,onChange:value=>{const author=Number(value);editPost({author})},value:authorId,hideLabelFromVision:!0})}const post_author=function PostAuthor(){return(0,use_select.A)((select=>{const authors=select(core_data_build_module.M_).getUsers(AUTHORS_QUERY);return authors?.length>=25}),[])?(0,jsx_runtime.jsx)(PostAuthorCombobox,{}):(0,jsx_runtime.jsx)(PostAuthorSelect,{})};function PostAuthorToggle({isOpen,onClick}){const{postAuthor}=useAuthorsQuery(),authorName=(0,html_entities_build_module.S)(postAuthor?.name)||(0,i18n_build_module.__)("(No author)");return(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",className:"editor-post-author__panel-toggle",variant:"tertiary","aria-expanded":isOpen,"aria-label":(0,i18n_build_module.nv)((0,i18n_build_module.__)("Change author: %s"),authorName),onClick,children:authorName})}const post_author_panel=function panel_PostAuthor(){const[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,placement:"left-start",offset:36,shift:!0})),[popoverAnchor]);return(0,jsx_runtime.jsx)(PostAuthorCheck,{children:(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Author"),ref:setPopoverAnchor,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,contentClassName:"editor-post-author__panel-dialog",focusOnMount:!0,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(PostAuthorToggle,{isOpen,onClick:onToggle}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)("div",{className:"editor-post-author",children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Author"),onClose}),(0,jsx_runtime.jsx)(post_author,{onClose})]})})})})};function usePostActions({postType,onActionPerformed,context}){const{defaultActions}=(0,use_select.A)((select=>{const{getEntityActions}=lock_unlock_unlock(select(store_store));return{defaultActions:getEntityActions("postType",postType)}}),[postType]),{registerPostTypeActions}=lock_unlock_unlock((0,use_dispatch.A)(store_store));return(0,react.useEffect)((()=>{registerPostTypeActions(postType)}),[registerPostTypeActions,postType]),(0,react.useMemo)((()=>{const actions=defaultActions.filter((action=>!action.context||action.context===context));if(onActionPerformed)for(let i=0;i<actions.length;++i){if(actions[i].callback){const existingCallback=actions[i].callback;actions[i]={...actions[i],callback:(items,argsObject)=>{existingCallback(items,{...argsObject,onActionPerformed:_items=>{argsObject?.onActionPerformed&&argsObject.onActionPerformed(_items),onActionPerformed(actions[i].id,_items)}})}}}if(actions[i].RenderModal){const ExistingRenderModal=actions[i].RenderModal;actions[i]={...actions[i],RenderModal:props=>(0,jsx_runtime.jsx)(ExistingRenderModal,{...props,onActionPerformed:_items=>{props.onActionPerformed&&props.onActionPerformed(_items),onActionPerformed(actions[i].id,_items)}})}}}return actions}),[defaultActions,onActionPerformed,context])}const{DropdownMenuV2,kebabCase}=lock_unlock_unlock(private_apis.j);function PostActions({postType,postId,onActionPerformed}){const[isActionsMenuOpen,setIsActionsMenuOpen]=(0,react.useState)(!1),{item,permissions}=(0,use_select.A)((select=>{const{getEditedEntityRecord,getEntityRecordPermissions}=lock_unlock_unlock(select(core_data_build_module.M_));return{item:getEditedEntityRecord("postType",postType,postId),permissions:getEntityRecordPermissions("postType",postType,postId)}}),[postId,postType]),itemWithPermissions=(0,react.useMemo)((()=>({...item,permissions})),[item,permissions]),allActions=usePostActions({postType,onActionPerformed}),actions=(0,react.useMemo)((()=>allActions.filter((action=>!action.isEligible||action.isEligible(itemWithPermissions)))),[allActions,itemWithPermissions]);return(0,jsx_runtime.jsx)(DropdownMenuV2,{open:isActionsMenuOpen,trigger:(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",icon:more_vertical.A,label:(0,i18n_build_module.__)("Actions"),disabled:!actions.length,accessibleWhenDisabled:!0,className:"editor-all-actions-button",onClick:()=>setIsActionsMenuOpen(!isActionsMenuOpen)}),onOpenChange:setIsActionsMenuOpen,placement:"bottom-end",children:(0,jsx_runtime.jsx)(ActionsDropdownMenuGroup,{actions,item:itemWithPermissions,onClose:()=>{setIsActionsMenuOpen(!1)}})})}function DropdownMenuItemTrigger({action,onClick,items}){const label="string"==typeof action.label?action.label:action.label(items);return(0,jsx_runtime.jsx)(DropdownMenuV2.Item,{onClick,hideOnClick:!action.RenderModal,children:(0,jsx_runtime.jsx)(DropdownMenuV2.ItemLabel,{children:label})})}function ActionWithModal({action,item,ActionTrigger,onClose}){const[isModalOpen,setIsModalOpen]=(0,react.useState)(!1),actionTriggerProps={action,onClick:()=>setIsModalOpen(!0),items:[item]},{RenderModal,hideModalHeader}=action;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ActionTrigger,{...actionTriggerProps}),isModalOpen&&(0,jsx_runtime.jsx)(modal.A,{title:action.modalHeader||action.label,__experimentalHideHeader:!!hideModalHeader,onRequestClose:()=>{setIsModalOpen(!1)},overlayClassName:`editor-action-modal editor-action-modal__${kebabCase(action.id)}`,focusOnMount:"firstContentElement",size:"small",children:(0,jsx_runtime.jsx)(RenderModal,{items:[item],closeModal:()=>{setIsModalOpen(!1),onClose()}})})]})}function ActionsDropdownMenuGroup({actions,item,onClose}){return(0,jsx_runtime.jsx)(DropdownMenuV2.Group,{children:actions.map((action=>action.RenderModal?(0,jsx_runtime.jsx)(ActionWithModal,{action,item,ActionTrigger:DropdownMenuItemTrigger,onClose},action.id):(0,jsx_runtime.jsx)(DropdownMenuItemTrigger,{action,onClick:()=>action.callback([item]),items:[item]},action.id)))})}function PostCardPanel({postType,postId,onActionPerformed}){const{isFrontPage,isPostsPage,title,icon,isSync}=(0,use_select.A)((select=>{const{__experimentalGetTemplateInfo}=select(store_store),{canUser,getEditedEntityRecord}=select(core_data_build_module.M_),siteSettings=canUser("read",{kind:"root",name:"site"})?getEditedEntityRecord("root","site"):void 0,_record=getEditedEntityRecord("postType",postType,postId),_templateInfo=[constants_TEMPLATE_POST_TYPE,constants_TEMPLATE_PART_POST_TYPE].includes(postType)&&__experimentalGetTemplateInfo(_record);let _isSync=!1;if(GLOBAL_POST_TYPES.includes(postType))if(PATTERN_POST_TYPE===postType){_isSync="unsynced"!==("unsynced"===_record?.meta?.wp_pattern_sync_status?"unsynced":_record?.wp_pattern_sync_status)}else _isSync=!0;return{title:_templateInfo?.title||_record?.title,icon:lock_unlock_unlock(select(store_store)).getPostIcon(postType,{area:_record?.area}),isSync:_isSync,isFrontPage:siteSettings?.page_on_front===postId,isPostsPage:siteSettings?.page_for_posts===postId}}),[postId,postType]);return(0,jsx_runtime.jsx)("div",{className:"editor-post-card-panel",children:(0,jsx_runtime.jsxs)(h_stack_component.A,{spacing:2,className:"editor-post-card-panel__header",align:"flex-start",children:[(0,jsx_runtime.jsx)(build_module_icon.A,{className:(0,clsx.A)("editor-post-card-panel__icon",{"is-sync":isSync}),icon}),(0,jsx_runtime.jsxs)(text_component.A,{numberOfLines:2,truncate:!0,className:"editor-post-card-panel__title",weight:500,as:"h2",lineHeight:"20px",children:[title?(0,html_entities_build_module.S)(title):(0,i18n_build_module.__)("No title"),isFrontPage&&(0,jsx_runtime.jsx)("span",{className:"editor-post-card-panel__title-badge",children:(0,i18n_build_module.__)("Homepage")}),isPostsPage&&(0,jsx_runtime.jsx)("span",{className:"editor-post-card-panel__title-badge",children:(0,i18n_build_module.__)("Posts Page")})]}),(0,jsx_runtime.jsx)(PostActions,{postType,postId,onActionPerformed})]})})}const post_content_information_AVERAGE_READING_RATE=189;function PostContentInformation(){const{postContent}=(0,use_select.A)((select=>{const{getEditedPostAttribute,getCurrentPostType,getCurrentPostId}=select(store_store),{canUser}=select(core_data_build_module.M_),{getEntityRecord}=select(core_data_build_module.M_),siteSettings=canUser("read",{kind:"root",name:"site"})?getEntityRecord("root","site"):void 0,postType=getCurrentPostType();return{postContent:!(+getCurrentPostId()===siteSettings?.page_for_posts)&&![constants_TEMPLATE_POST_TYPE,constants_TEMPLATE_PART_POST_TYPE].includes(postType)&&getEditedPostAttribute("content")}}),[]),wordCountType=(0,i18n_build_module._x)("words","Word count type. Do not translate!"),wordsCounted=(0,react.useMemo)((()=>postContent?(0,wordcount_build_module.U)(postContent,wordCountType):0),[postContent,wordCountType]);if(!wordsCounted)return null;const readingTime=Math.round(wordsCounted/post_content_information_AVERAGE_READING_RATE),wordsCountText=(0,i18n_build_module.nv)((0,i18n_build_module._n)("%s word","%s words",wordsCounted),wordsCounted.toLocaleString()),minutesText=readingTime<=1?(0,i18n_build_module.__)("1 minute"):(0,i18n_build_module.nv)((0,i18n_build_module._n)("%s minute","%s minutes",readingTime),readingTime.toLocaleString());return(0,jsx_runtime.jsx)("div",{className:"editor-post-content-information",children:(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.nv)((0,i18n_build_module.__)("%1$s, %2$s read time."),wordsCountText,minutesText)})})}const page_attributes_check=function PageAttributesCheck({children}){const supportsPageAttributes=(0,use_select.A)((select=>{const{getEditedPostAttribute}=select(store_store),{getPostType}=select(core_data_build_module.M_),postType=getPostType(getEditedPostAttribute("type"));return!!postType?.supports?.["page-attributes"]}),[]);return supportsPageAttributes?children:null};var external_link=__webpack_require__("./packages/components/build-module/external-link/index.js");function getTitle(post){return post?.title?.rendered?(0,html_entities_build_module.S)(post.title.rendered):`#${post.id} (${(0,i18n_build_module.__)("no title")})`}const getItemPriority=(name,searchValue)=>{const normalizedName=remove_accents_default()(name||"").toLowerCase(),normalizedSearch=remove_accents_default()(searchValue||"").toLowerCase();return normalizedName===normalizedSearch?0:normalizedName.startsWith(normalizedSearch)?normalizedName.length:1/0};function PageAttributesParent(){const{editPost}=(0,use_dispatch.A)(store_store),[fieldValue,setFieldValue]=(0,react.useState)(!1),{isHierarchical,parentPostId,parentPostTitle,pageItems}=(0,use_select.A)((select=>{var _pType$hierarchical;const{getPostType,getEntityRecords,getEntityRecord}=select(core_data_build_module.M_),{getCurrentPostId,getEditedPostAttribute}=select(store_store),postTypeSlug=getEditedPostAttribute("type"),pageId=getEditedPostAttribute("parent"),pType=getPostType(postTypeSlug),postId=getCurrentPostId(),postIsHierarchical=null!==(_pType$hierarchical=pType?.hierarchical)&&void 0!==_pType$hierarchical&&_pType$hierarchical,query={per_page:100,exclude:postId,parent_exclude:postId,orderby:"menu_order",order:"asc",_fields:"id,title,parent"};fieldValue&&(query.search=fieldValue);const parentPost=pageId?getEntityRecord("postType",postTypeSlug,pageId):null;return{isHierarchical:postIsHierarchical,parentPostId:pageId,parentPostTitle:parentPost?getTitle(parentPost):"",pageItems:postIsHierarchical?getEntityRecords("postType",postTypeSlug,query):null}}),[fieldValue]),parentOptions=(0,react.useMemo)((()=>{const getOptionsFromTree=(tree,level=0)=>{const sortedNodes=tree.map((treeNode=>[{value:treeNode.id,label:"— ".repeat(level)+(0,html_entities_build_module.S)(treeNode.name),rawName:treeNode.name},...getOptionsFromTree(treeNode.children||[],level+1)])).sort((([a],[b])=>getItemPriority(a.rawName,fieldValue)>=getItemPriority(b.rawName,fieldValue)?1:-1));return sortedNodes.flat()};if(!pageItems)return[];let tree=pageItems.map((item=>({id:item.id,parent:item.parent,name:getTitle(item)})));fieldValue||(tree=buildTermsTree(tree));const opts=getOptionsFromTree(tree),optsHasParent=opts.find((item=>item.value===parentPostId));return parentPostTitle&&!optsHasParent&&opts.unshift({value:parentPostId,label:parentPostTitle}),opts}),[pageItems,fieldValue,parentPostTitle,parentPostId]);if(!isHierarchical)return null;return(0,jsx_runtime.jsx)(combobox_control.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,className:"editor-page-attributes__parent",label:(0,i18n_build_module.__)("Parent"),help:(0,i18n_build_module.__)("Choose a parent page."),value:parentPostId,options:parentOptions,onFilterValueChange:(0,debounce.s)((inputValue=>{setFieldValue(inputValue)}),300),onChange:selectedPostId=>{editPost({parent:selectedPostId})},hideLabelFromVision:!0})}function PostParentToggle({isOpen,onClick}){const parentPost=(0,use_select.A)((select=>{const{getEditedPostAttribute}=select(store_store),parentPostId=getEditedPostAttribute("parent");if(!parentPostId)return null;const{getEntityRecord}=select(core_data_build_module.M_);return getEntityRecord("postType",getEditedPostAttribute("type"),parentPostId)}),[]),parentTitle=(0,react.useMemo)((()=>parentPost?getTitle(parentPost):(0,i18n_build_module.__)("None")),[parentPost]);return(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",className:"editor-post-parent__panel-toggle",variant:"tertiary","aria-expanded":isOpen,"aria-label":(0,i18n_build_module.nv)((0,i18n_build_module.__)("Change parent: %s"),parentTitle),onClick,children:parentTitle})}function ParentRow(){const homeUrl=(0,use_select.A)((select=>select(core_data_build_module.M_).getEntityRecord("root","__unstableBase")?.home),[]),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,placement:"left-start",offset:36,shift:!0})),[popoverAnchor]);return(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Parent"),ref:setPopoverAnchor,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,className:"editor-post-parent__panel-dropdown",contentClassName:"editor-post-parent__panel-dialog",focusOnMount:!0,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(PostParentToggle,{isOpen,onClick:onToggle}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)("div",{className:"editor-post-parent",children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Parent"),onClose}),(0,jsx_runtime.jsxs)("div",{children:[(0,create_interpolate_element.A)((0,i18n_build_module.nv)((0,i18n_build_module.__)('Child pages inherit characteristics from their parent, such as URL structure. For instance, if "Pricing" is a child of "Services", its URL would be %1$s<wbr />/services<wbr />/pricing.'),(0,filter_url_for_display.r)(homeUrl).replace(/([/.])/g,"<wbr />$1")),{wbr:(0,jsx_runtime.jsx)("wbr",{})}),(0,jsx_runtime.jsx)("p",{children:(0,create_interpolate_element.A)((0,i18n_build_module.__)("They also show up as sub-items in the default navigation menu. <a>Learn more.</a>"),{a:(0,jsx_runtime.jsx)(external_link.A,{href:(0,i18n_build_module.__)("https://wordpress.org/documentation/article/page-post-settings-sidebar/#page-attributes")})})})]}),(0,jsx_runtime.jsx)(PageAttributesParent,{})]})})})}const PANEL_NAME="page-attributes";function AttributesPanel(){const{isEnabled,postType}=(0,use_select.A)((select=>{const{getEditedPostAttribute,isEditorPanelEnabled}=select(store_store),{getPostType}=select(core_data_build_module.M_);return{isEnabled:isEditorPanelEnabled(PANEL_NAME),postType:getPostType(getEditedPostAttribute("type"))}}),[]);return isEnabled&&postType?(0,jsx_runtime.jsx)(ParentRow,{}):null}function PageAttributesPanel(){return(0,jsx_runtime.jsx)(page_attributes_check,{children:(0,jsx_runtime.jsx)(AttributesPanel,{})})}const COMMENT_OPTIONS=[{label:(0,i18n_build_module._x)("Open",'Adjective: e.g. "Comments are open"'),value:"open",description:(0,i18n_build_module.__)("Visitors can add new comments and replies.")},{label:(0,i18n_build_module.__)("Closed"),value:"closed",description:[(0,i18n_build_module.__)("Visitors cannot add new comments or replies."),(0,i18n_build_module.__)("Existing comments remain visible.")].join(" ")}];const post_comments=function PostComments(){const commentStatus=(0,use_select.A)((select=>{var _select$getEditedPost;return null!==(_select$getEditedPost=select(store_store).getEditedPostAttribute("comment_status"))&&void 0!==_select$getEditedPost?_select$getEditedPost:"open"}),[]),{editPost}=(0,use_dispatch.A)(store_store);return(0,jsx_runtime.jsx)("form",{children:(0,jsx_runtime.jsx)(component.A,{spacing:4,children:(0,jsx_runtime.jsx)(radio_control.A,{className:"editor-change-status__options",hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Comment status"),options:COMMENT_OPTIONS,onChange:newCommentStatus=>editPost({comment_status:newCommentStatus}),selected:commentStatus})})})};const post_pingbacks=function PostPingbacks(){const pingStatus=(0,use_select.A)((select=>{var _select$getEditedPost;return null!==(_select$getEditedPost=select(store_store).getEditedPostAttribute("ping_status"))&&void 0!==_select$getEditedPost?_select$getEditedPost:"open"}),[]),{editPost}=(0,use_dispatch.A)(store_store);return(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Enable pingbacks & trackbacks"),checked:"open"===pingStatus,onChange:()=>editPost({ping_status:"open"===pingStatus?"closed":"open"}),help:(0,jsx_runtime.jsx)(external_link.A,{href:(0,i18n_build_module.__)("https://wordpress.org/documentation/article/trackbacks-and-pingbacks/"),children:(0,i18n_build_module.__)("Learn more about pingbacks & trackbacks")})})},panel_PANEL_NAME="discussion-panel";function ModalContents({onClose}){return(0,jsx_runtime.jsxs)("div",{className:"editor-post-discussion",children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Discussion"),onClose}),(0,jsx_runtime.jsxs)(component.A,{spacing:4,children:[(0,jsx_runtime.jsx)(post_type_support_check,{supportKeys:"comments",children:(0,jsx_runtime.jsx)(post_comments,{})}),(0,jsx_runtime.jsx)(post_type_support_check,{supportKeys:"trackbacks",children:(0,jsx_runtime.jsx)(post_pingbacks,{})})]})]})}function PostDiscussionToggle({isOpen,onClick}){const{commentStatus,pingStatus,commentsSupported,trackbacksSupported}=(0,use_select.A)((select=>{var _getEditedPostAttribu,_getEditedPostAttribu2;const{getEditedPostAttribute}=select(store_store),{getPostType}=select(core_data_build_module.M_),postType=getPostType(getEditedPostAttribute("type"));return{commentStatus:null!==(_getEditedPostAttribu=getEditedPostAttribute("comment_status"))&&void 0!==_getEditedPostAttribu?_getEditedPostAttribu:"open",pingStatus:null!==(_getEditedPostAttribu2=getEditedPostAttribute("ping_status"))&&void 0!==_getEditedPostAttribu2?_getEditedPostAttribu2:"open",commentsSupported:!!postType.supports.comments,trackbacksSupported:!!postType.supports.trackbacks}}),[]);let label;return label="open"===commentStatus?"open"===pingStatus?(0,i18n_build_module._x)("Open",'Adjective: e.g. "Comments are open"'):trackbacksSupported?(0,i18n_build_module.__)("Comments only"):(0,i18n_build_module._x)("Open",'Adjective: e.g. "Comments are open"'):"open"===pingStatus?commentsSupported?(0,i18n_build_module.__)("Pings only"):(0,i18n_build_module.__)("Pings enabled"):(0,i18n_build_module.__)("Closed"),(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",className:"editor-post-discussion__panel-toggle",variant:"tertiary","aria-label":(0,i18n_build_module.__)("Change discussion options"),"aria-expanded":isOpen,onClick,children:label})}function PostDiscussionPanel(){const{isEnabled}=(0,use_select.A)((select=>{const{isEditorPanelEnabled}=select(store_store);return{isEnabled:isEditorPanelEnabled(panel_PANEL_NAME)}}),[]),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,placement:"left-start",offset:36,shift:!0})),[popoverAnchor]);return isEnabled?(0,jsx_runtime.jsx)(post_type_support_check,{supportKeys:["comments","trackbacks"],children:(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Discussion"),ref:setPopoverAnchor,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,className:"editor-post-discussion__panel-dropdown",contentClassName:"editor-post-discussion__panel-dialog",focusOnMount:!0,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(PostDiscussionToggle,{isOpen,onClick:onToggle}),renderContent:({onClose})=>(0,jsx_runtime.jsx)(ModalContents,{onClose})})})}):null}function PostExcerpt({hideLabelFromVision=!1,updateOnBlur=!1}){const{excerpt,shouldUseDescriptionLabel,usedAttribute}=(0,use_select.A)((select=>{const{getCurrentPostType,getEditedPostAttribute}=select(store_store),postType=getCurrentPostType(),_usedAttribute=["wp_template","wp_template_part"].includes(postType)?"description":"excerpt";return{excerpt:getEditedPostAttribute(_usedAttribute),shouldUseDescriptionLabel:["wp_template","wp_template_part","wp_block"].includes(postType),usedAttribute:_usedAttribute}}),[]),{editPost}=(0,use_dispatch.A)(store_store),[localExcerpt,setLocalExcerpt]=(0,react.useState)((0,html_entities_build_module.S)(excerpt)),updatePost=value=>{editPost({[usedAttribute]:value})},label=shouldUseDescriptionLabel?(0,i18n_build_module.__)("Write a description (optional)"):(0,i18n_build_module.__)("Write an excerpt (optional)");return(0,jsx_runtime.jsx)("div",{className:"editor-post-excerpt",children:(0,jsx_runtime.jsx)(textarea_control.A,{__nextHasNoMarginBottom:!0,label,hideLabelFromVision,className:"editor-post-excerpt__textarea",onChange:updateOnBlur?setLocalExcerpt:updatePost,onBlur:updateOnBlur?()=>updatePost(localExcerpt):void 0,value:updateOnBlur?localExcerpt:excerpt,help:shouldUseDescriptionLabel?(0,i18n_build_module.__)("Write a description"):(0,jsx_runtime.jsx)(external_link.A,{href:(0,i18n_build_module.__)("https://wordpress.org/documentation/article/page-post-settings-sidebar/#excerpt"),children:(0,i18n_build_module.__)("Learn more about manual excerpts")})})})}const post_excerpt_check=function check_PostExcerptCheck({children}){return(0,jsx_runtime.jsx)(post_type_support_check,{supportKeys:"excerpt",children})},{Fill:plugin_Fill,Slot:plugin_Slot}=(0,slot_fill.QJ)("PluginPostExcerpt"),plugin_PluginPostExcerpt=({children,className})=>(0,jsx_runtime.jsx)(plugin_Fill,{children:(0,jsx_runtime.jsx)(row.A,{className,children})});plugin_PluginPostExcerpt.Slot=plugin_Slot;const post_excerpt_plugin=plugin_PluginPostExcerpt,post_excerpt_panel_PANEL_NAME="post-excerpt";function PrivatePostExcerptPanel(){return(0,jsx_runtime.jsx)(post_excerpt_check,{children:(0,jsx_runtime.jsx)(PrivateExcerpt,{})})}function PrivateExcerpt(){const{shouldRender,excerpt,shouldBeUsedAsDescription,allowEditing}=(0,use_select.A)((select=>{const{getCurrentPostType,getCurrentPostId,getEditedPostAttribute,isEditorPanelEnabled}=select(store_store),postType=getCurrentPostType(),isTemplateOrTemplatePart=["wp_template","wp_template_part"].includes(postType),isPattern="wp_block"===postType,_shouldBeUsedAsDescription=isTemplateOrTemplatePart||isPattern,_usedAttribute=isTemplateOrTemplatePart?"description":"excerpt",template=isTemplateOrTemplatePart&&select(core_data_build_module.M_).getEntityRecord("postType",postType,getCurrentPostId()),_shouldRender=isEditorPanelEnabled(post_excerpt_panel_PANEL_NAME)||_shouldBeUsedAsDescription;return{excerpt:getEditedPostAttribute(_usedAttribute),shouldRender:_shouldRender,shouldBeUsedAsDescription:_shouldBeUsedAsDescription,allowEditing:_shouldRender&&(!_shouldBeUsedAsDescription||isPattern||template&&template.source===constants_TEMPLATE_ORIGINS.custom&&!template.has_theme_file&&template.is_custom)}}),[]),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),label=shouldBeUsedAsDescription?(0,i18n_build_module.__)("Description"):(0,i18n_build_module.__)("Excerpt"),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,"aria-label":label,headerTitle:label,placement:"left-start",offset:36,shift:!0})),[popoverAnchor,label]);if(!shouldRender)return!1;const excerptText=!!excerpt&&(0,jsx_runtime.jsx)(text_component.A,{align:"left",numberOfLines:4,truncate:allowEditing,children:(0,html_entities_build_module.S)(excerpt)});if(!allowEditing)return excerptText;const excerptPlaceholder=shouldBeUsedAsDescription?(0,i18n_build_module.__)("Add a description…"):(0,i18n_build_module.__)("Add an excerpt…"),triggerEditLabel=shouldBeUsedAsDescription?(0,i18n_build_module.__)("Edit description"):(0,i18n_build_module.__)("Edit excerpt");return(0,jsx_runtime.jsxs)(component.A,{children:[excerptText,(0,jsx_runtime.jsx)(dropdown.A,{className:"editor-post-excerpt__dropdown",contentClassName:"editor-post-excerpt__dropdown__content",popoverProps,focusOnMount:!0,ref:setPopoverAnchor,renderToggle:({onToggle})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,onClick:onToggle,variant:"link",children:excerptText?triggerEditLabel:excerptPlaceholder}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module.MI,{title:label,onClose}),(0,jsx_runtime.jsx)(component.A,{spacing:4,children:(0,jsx_runtime.jsx)(post_excerpt_plugin.Slot,{children:fills=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PostExcerpt,{hideLabelFromVision:!0,updateOnBlur:!0}),fills]})})})]})})]})}var drop_zone=__webpack_require__("./packages/components/build-module/drop-zone/index.js"),esm_browser_v4=__webpack_require__("./packages/components/node_modules/uuid/dist/esm-browser/v4.js");const with_notices=(0,create_higher_order_component.f)((OriginalComponent=>{function Component(props,ref){const[noticeList,setNoticeList]=(0,react.useState)([]),noticeOperations=(0,react.useMemo)((()=>{const createNotice=notice=>{const noticeToAdd=notice.id?notice:{...notice,id:(0,esm_browser_v4.A)()};setNoticeList((current=>[...current,noticeToAdd]))};return{createNotice,createErrorNotice:msg=>{createNotice({status:"error",content:msg})},removeNotice:id=>{setNoticeList((current=>current.filter((notice=>notice.id!==id))))},removeAllNotices:()=>{setNoticeList([])}}}),[]),propsOut={...props,noticeList,noticeOperations,noticeUI:noticeList.length>0&&(0,jsx_runtime.jsx)(list,{className:"components-with-notices-ui",notices:noticeList,onRemove:noticeOperations.removeNotice})};return isForwardRef?(0,jsx_runtime.jsx)(OriginalComponent,{...propsOut,ref}):(0,jsx_runtime.jsx)(OriginalComponent,{...propsOut})}let isForwardRef;const{render}=OriginalComponent;return"function"==typeof render?(isForwardRef=!0,(0,react.forwardRef)(Component)):Component}),"withNotices");function ThemeSupportCheck({children,supportKeys}){const{postType,themeSupports}=(0,use_select.A)((select=>({postType:select(store_store).getEditedPostAttribute("type"),themeSupports:select(core_data_build_module.M_).getThemeSupports()})),[]);return(Array.isArray(supportKeys)?supportKeys:[supportKeys]).some((key=>{var _themeSupports$key;const supported=null!==(_themeSupports$key=themeSupports?.[key])&&void 0!==_themeSupports$key&&_themeSupports$key;return"post-thumbnails"===key&&Array.isArray(supported)?supported.includes(postType):supported}))?children:null}const post_featured_image_check=function PostFeaturedImageCheck({children}){return(0,jsx_runtime.jsx)(ThemeSupportCheck,{supportKeys:"post-thumbnails",children:(0,jsx_runtime.jsx)(post_type_support_check,{supportKeys:"thumbnail",children})})},ALLOWED_MEDIA_TYPES=["image"],DEFAULT_FEATURE_IMAGE_LABEL=(0,i18n_build_module.__)("Featured image"),DEFAULT_SET_FEATURE_IMAGE_LABEL=(0,i18n_build_module.__)("Add a featured image"),instructions=(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.__)("To edit the featured image, you need permission to upload media.")});const applyWithSelect=(0,with_select.A)((select=>{const{getMedia,getPostType}=select(core_data_build_module.M_),{getCurrentPostId,getEditedPostAttribute}=select(store_store),featuredImageId=getEditedPostAttribute("featured_media");return{media:featuredImageId?getMedia(featuredImageId,{context:"view"}):null,currentPostId:getCurrentPostId(),postType:getPostType(getEditedPostAttribute("type")),featuredImageId}})),applyWithDispatch=(0,with_dispatch.A)(((dispatch,{noticeOperations},{select})=>{const{editPost}=dispatch(store_store);return{onUpdateImage(image){editPost({featured_media:image.id})},onDropImage(filesList){select(build_module.M_).getSettings().mediaUpload({allowedTypes:["image"],filesList,onFileChange([image]){editPost({featured_media:image.id})},onError(message){noticeOperations.removeAllNotices(),noticeOperations.createErrorNotice(message)}})},onRemoveImage(){editPost({featured_media:0})}}})),post_featured_image=(0,higher_order_compose.A)(with_notices,applyWithSelect,applyWithDispatch,(0,with_filters.A)("editor.PostFeaturedImage"))((function PostFeaturedImage({currentPostId,featuredImageId,onUpdateImage,onRemoveImage,media,postType,noticeUI,noticeOperations}){const toggleRef=(0,react.useRef)(),[isLoading,setIsLoading]=(0,react.useState)(!1),{getSettings}=(0,use_select.A)(build_module.M_),{mediaSourceUrl}=function getMediaDetails(media,postId){var _media$media_details$,_media$media_details$2;if(!media)return{};const defaultSize=(0,hooks_build_module.W5)("editor.PostFeaturedImage.imageSize","large",media.id,postId);if(defaultSize in(null!==(_media$media_details$=media?.media_details?.sizes)&&void 0!==_media$media_details$?_media$media_details$:{}))return{mediaWidth:media.media_details.sizes[defaultSize].width,mediaHeight:media.media_details.sizes[defaultSize].height,mediaSourceUrl:media.media_details.sizes[defaultSize].source_url};const fallbackSize=(0,hooks_build_module.W5)("editor.PostFeaturedImage.imageSize","thumbnail",media.id,postId);return fallbackSize in(null!==(_media$media_details$2=media?.media_details?.sizes)&&void 0!==_media$media_details$2?_media$media_details$2:{})?{mediaWidth:media.media_details.sizes[fallbackSize].width,mediaHeight:media.media_details.sizes[fallbackSize].height,mediaSourceUrl:media.media_details.sizes[fallbackSize].source_url}:{mediaWidth:media.media_details.width,mediaHeight:media.media_details.height,mediaSourceUrl:media.source_url}}(media,currentPostId);function onDropFiles(filesList){getSettings().mediaUpload({allowedTypes:ALLOWED_MEDIA_TYPES,filesList,onFileChange([image]){(0,blob_build_module.H8)(image?.url)?setIsLoading(!0):(image&&onUpdateImage(image),setIsLoading(!1))},onError(message){noticeOperations.removeAllNotices(),noticeOperations.createErrorNotice(message)}})}function getImageDescription(imageMedia){return imageMedia.alt_text?(0,i18n_build_module.nv)((0,i18n_build_module.__)("Current image: %s"),imageMedia.alt_text):(0,i18n_build_module.nv)((0,i18n_build_module.__)("The current image has no alternative text. The file name is: %s"),imageMedia.media_details.sizes?.full?.file||imageMedia.slug)}return(0,jsx_runtime.jsxs)(post_featured_image_check,{children:[noticeUI,(0,jsx_runtime.jsxs)("div",{className:"editor-post-featured-image",children:[media&&(0,jsx_runtime.jsx)("div",{id:`editor-post-featured-image-${featuredImageId}-describedby`,className:"hidden",children:getImageDescription(media)}),(0,jsx_runtime.jsx)(build_module.qJ,{fallback:instructions,children:(0,jsx_runtime.jsx)(build_module.Q8,{title:postType?.labels?.featured_image||DEFAULT_FEATURE_IMAGE_LABEL,onSelect:onUpdateImage,unstableFeaturedImageFlow:!0,allowedTypes:ALLOWED_MEDIA_TYPES,modalClass:"editor-post-featured-image__media-modal",render:({open})=>(0,jsx_runtime.jsxs)("div",{className:"editor-post-featured-image__container",children:[(0,jsx_runtime.jsxs)(build_module_button.Ay,{__next40pxDefaultSize:!0,ref:toggleRef,className:featuredImageId?"editor-post-featured-image__preview":"editor-post-featured-image__toggle",onClick:open,"aria-label":featuredImageId?(0,i18n_build_module.__)("Edit or replace the featured image"):null,"aria-describedby":featuredImageId?`editor-post-featured-image-${featuredImageId}-describedby`:null,"aria-haspopup":"dialog",disabled:isLoading,accessibleWhenDisabled:!0,children:[!!featuredImageId&&media&&(0,jsx_runtime.jsx)("img",{className:"editor-post-featured-image__preview-image",src:mediaSourceUrl,alt:getImageDescription(media)}),isLoading&&(0,jsx_runtime.jsx)(spinner.Ay,{}),!featuredImageId&&!isLoading&&(postType?.labels?.set_featured_image||DEFAULT_SET_FEATURE_IMAGE_LABEL)]}),!!featuredImageId&&(0,jsx_runtime.jsxs)(h_stack_component.A,{className:"editor-post-featured-image__actions",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"editor-post-featured-image__action",onClick:open,"aria-haspopup":"dialog",children:(0,i18n_build_module.__)("Replace")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"editor-post-featured-image__action",onClick:()=>{onRemoveImage(),toggleRef.current.focus()},children:(0,i18n_build_module.__)("Remove")})]}),(0,jsx_runtime.jsx)(drop_zone.A,{onFilesDrop:onDropFiles})]}),value:featuredImageId})})]})]})})),post_featured_image_panel_PANEL_NAME="featured-image";function PostFeaturedImagePanel({withPanelBody=!0}){var _postType$labels$feat;const{postType,isEnabled,isOpened}=(0,use_select.A)((select=>{const{getEditedPostAttribute,isEditorPanelEnabled,isEditorPanelOpened}=select(store_store),{getPostType}=select(core_data_build_module.M_);return{postType:getPostType(getEditedPostAttribute("type")),isEnabled:isEditorPanelEnabled(post_featured_image_panel_PANEL_NAME),isOpened:isEditorPanelOpened(post_featured_image_panel_PANEL_NAME)}}),[]),{toggleEditorPanelOpened}=(0,use_dispatch.A)(store_store);return isEnabled?withPanelBody?(0,jsx_runtime.jsx)(post_featured_image_check,{children:(0,jsx_runtime.jsx)(body.Ay,{title:null!==(_postType$labels$feat=postType?.labels?.featured_image)&&void 0!==_postType$labels$feat?_postType$labels$feat:(0,i18n_build_module.__)("Featured image"),opened:isOpened,onToggle:()=>toggleEditorPanelOpened(post_featured_image_panel_PANEL_NAME),children:(0,jsx_runtime.jsx)(post_featured_image,{})})}):(0,jsx_runtime.jsx)(post_featured_image_check,{children:(0,jsx_runtime.jsx)(post_featured_image,{})}):null}const post_format_panel=function panel_PostFormat(){const{postFormat}=(0,use_select.A)((select=>{const{getEditedPostAttribute}=select(store_store),_postFormat=getEditedPostAttribute("format");return{postFormat:null!=_postFormat?_postFormat:"standard"}}),[]),activeFormat=POST_FORMATS.find((format=>format.id===postFormat)),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,placement:"left-start",offset:36,shift:!0})),[popoverAnchor]);return(0,jsx_runtime.jsx)(post_format_check,{children:(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Format"),ref:setPopoverAnchor,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,contentClassName:"editor-post-format__dialog",focusOnMount:!0,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",variant:"tertiary","aria-expanded":isOpen,"aria-label":(0,i18n_build_module.nv)((0,i18n_build_module.__)("Change format: %s"),activeFormat?.caption),onClick:onToggle,children:activeFormat?.caption}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)("div",{className:"editor-post-format__dialog-content",children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Format"),onClose}),(0,jsx_runtime.jsx)(PostFormat,{})]})})})})};function PostLastEditedPanel(){const modified=(0,use_select.A)((select=>select(store_store).getEditedPostAttribute("modified")),[]),lastEditedText=modified&&(0,i18n_build_module.nv)((0,i18n_build_module.__)("Last edited %s."),(0,date_build_module.mk)(modified));return lastEditedText?(0,jsx_runtime.jsx)("div",{className:"editor-post-last-edited-panel",children:(0,jsx_runtime.jsx)(text_component.A,{children:lastEditedText})}):null}const post_panel_section=function PostPanelSection({className,children}){return(0,jsx_runtime.jsx)(component.A,{className:(0,clsx.A)("editor-post-panel__section",className),children})};function PostScheduleCheck({children}){return(0,use_select.A)((select=>{var _select$getCurrentPos;return null!==(_select$getCurrentPos=select(store_store).getCurrentPost()._links?.["wp:action-publish"])&&void 0!==_select$getCurrentPos&&_select$getCurrentPos}),[])?children:null}const panel_DESIGN_POST_TYPES=[constants_TEMPLATE_POST_TYPE,constants_TEMPLATE_PART_POST_TYPE,PATTERN_POST_TYPE,NAVIGATION_POST_TYPE];function PostSchedulePanel(){const[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),postType=(0,use_select.A)((select=>select(store_store).getCurrentPostType()),[]),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,"aria-label":(0,i18n_build_module.__)("Change publish date"),placement:"left-start",offset:36,shift:!0})),[popoverAnchor]),label=usePostScheduleLabel(),fullLabel=usePostScheduleLabel({full:!0});return panel_DESIGN_POST_TYPES.includes(postType)?null:(0,jsx_runtime.jsx)(PostScheduleCheck,{children:(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Publish"),ref:setPopoverAnchor,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,focusOnMount:!0,className:"editor-post-schedule__panel-dropdown",contentClassName:"editor-post-schedule__dialog",renderToggle:({onToggle,isOpen})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",className:"editor-post-schedule__dialog-toggle",variant:"tertiary",tooltipPosition:"middle left",onClick:onToggle,"aria-label":(0,i18n_build_module.nv)((0,i18n_build_module.__)("Change date: %s"),label),label:fullLabel,showTooltip:label!==fullLabel,"aria-expanded":isOpen,children:label}),renderContent:({onClose})=>(0,jsx_runtime.jsx)(PostSchedule,{onClose})})})})}function PostSyncStatus(){const{syncStatus,postType}=(0,use_select.A)((select=>{const{getEditedPostAttribute}=select(store_store),meta=getEditedPostAttribute("meta");return{syncStatus:"unsynced"===meta?.wp_pattern_sync_status?"unsynced":getEditedPostAttribute("wp_pattern_sync_status"),postType:getEditedPostAttribute("type")}}));return"wp_block"!==postType?null:(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Sync status"),children:(0,jsx_runtime.jsx)("div",{className:"editor-post-sync-status__value",children:"unsynced"===syncStatus?(0,i18n_build_module._x)("Not synced","pattern (singular)"):(0,i18n_build_module._x)("Synced","pattern (singular)")})})}const add_template=(0,jsx_runtime.jsx)(svg.t4,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)(svg.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M18.5 5.5V8H20V5.5H22.5V4H20V1.5H18.5V4H16V5.5H18.5ZM13.9624 4H6C4.89543 4 4 4.89543 4 6V18C4 19.1046 4.89543 20 6 20H18C19.1046 20 20 19.1046 20 18V10.0391H18.5V18C18.5 18.2761 18.2761 18.5 18 18.5H10L10 10.4917L16.4589 10.5139L16.4641 9.01389L5.5 8.97618V6C5.5 5.72386 5.72386 5.5 6 5.5H13.9624V4ZM5.5 10.4762V18C5.5 18.2761 5.72386 18.5 6 18.5H8.5L8.5 10.4865L5.5 10.4762Z"})}),DEFAULT_TITLE=(0,i18n_build_module.__)("Custom Template");function CreateNewTemplateModal({onClose}){const{defaultBlockTemplate,onNavigateToEntityRecord}=(0,use_select.A)((select=>{const{getEditorSettings,getCurrentTemplateId}=select(store_store);return{defaultBlockTemplate:getEditorSettings().defaultBlockTemplate,onNavigateToEntityRecord:getEditorSettings().onNavigateToEntityRecord,getTemplateId:getCurrentTemplateId}})),{createTemplate}=lock_unlock_unlock((0,use_dispatch.A)(store_store)),[title,setTitle]=(0,react.useState)(""),[isBusy,setIsBusy]=(0,react.useState)(!1),cancel=()=>{setTitle(""),onClose()};return(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Create custom template"),onRequestClose:cancel,focusOnMount:"firstContentElement",size:"small",children:(0,jsx_runtime.jsx)("form",{className:"editor-post-template__create-form",onSubmit:async event=>{if(event.preventDefault(),isBusy)return;setIsBusy(!0);const newTemplateContent=null!=defaultBlockTemplate?defaultBlockTemplate:(0,blocks_build_module.lK)([(0,blocks_build_module.Wv)("core/group",{tagName:"header",layout:{inherit:!0}},[(0,blocks_build_module.Wv)("core/site-title"),(0,blocks_build_module.Wv)("core/site-tagline")]),(0,blocks_build_module.Wv)("core/separator"),(0,blocks_build_module.Wv)("core/group",{tagName:"main"},[(0,blocks_build_module.Wv)("core/group",{layout:{inherit:!0}},[(0,blocks_build_module.Wv)("core/post-title")]),(0,blocks_build_module.Wv)("core/post-content",{layout:{inherit:!0}})])]),newTemplate=await createTemplate({slug:cleanForSlug(title||DEFAULT_TITLE),content:newTemplateContent,title:title||DEFAULT_TITLE});setIsBusy(!1),onNavigateToEntityRecord({postId:newTemplate.id,postType:"wp_template"}),cancel()},children:(0,jsx_runtime.jsxs)(component.A,{spacing:"3",children:[(0,jsx_runtime.jsx)(text_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Name"),value:title,onChange:setTitle,placeholder:DEFAULT_TITLE,disabled:isBusy,help:(0,i18n_build_module.__)('Describe the template, e.g. "Post with sidebar". A custom template can be manually applied to any post or page.')}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:cancel,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",isBusy,"aria-disabled":isBusy,children:(0,i18n_build_module.__)("Create")})]})]})})})}function useEditedPostContext(){return(0,use_select.A)((select=>{const{getCurrentPostId,getCurrentPostType}=select(store_store);return{postId:getCurrentPostId(),postType:getCurrentPostType()}}),[])}function useAllowSwitchingTemplates(){const{postType,postId}=useEditedPostContext();return(0,use_select.A)((select=>{const{canUser,getEntityRecord,getEntityRecords}=select(core_data_build_module.M_),siteSettings=canUser("read",{kind:"root",name:"site"})?getEntityRecord("root","site"):void 0,templates=getEntityRecords("postType","wp_template",{per_page:-1}),isPostsPage=+postId===siteSettings?.page_for_posts,isFrontPage="page"===postType&&+postId===siteSettings?.page_on_front&&templates?.some((({slug})=>"front-page"===slug));return!isPostsPage&&!isFrontPage}),[postId,postType])}function useTemplates(postType){return(0,use_select.A)((select=>select(core_data_build_module.M_).getEntityRecords("postType","wp_template",{per_page:-1,post_type:postType})),[postType])}function useAvailableTemplates(postType){const currentTemplateSlug=useCurrentTemplateSlug(),allowSwitchingTemplate=useAllowSwitchingTemplates(),templates=useTemplates(postType);return(0,react.useMemo)((()=>allowSwitchingTemplate&&templates?.filter((template=>template.is_custom&&template.slug!==currentTemplateSlug&&!!template.content.raw))),[templates,currentTemplateSlug,allowSwitchingTemplate])}function useCurrentTemplateSlug(){const{postType,postId}=useEditedPostContext(),templates=useTemplates(postType),entityTemplate=(0,use_select.A)((select=>{const post=select(core_data_build_module.M_).getEditedEntityRecord("postType",postType,postId);return post?.template}),[postType,postId]);if(entityTemplate)return templates?.find((template=>template.slug===entityTemplate))?.slug}const POPOVER_PROPS={className:"editor-post-template__dropdown",placement:"bottom-start"};function PostTemplateToggle({isOpen,onClick}){const templateTitle=(0,use_select.A)((select=>{const templateSlug=select(store_store).getEditedPostAttribute("template"),{supportsTemplateMode,availableTemplates}=select(store_store).getEditorSettings();if(!supportsTemplateMode&&availableTemplates[templateSlug])return availableTemplates[templateSlug];const template=select(core_data_build_module.M_).canUser("create",{kind:"postType",name:"wp_template"})&&select(store_store).getCurrentTemplateId();return template?.title||template?.slug||availableTemplates?.[templateSlug]}),[]);return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary","aria-expanded":isOpen,"aria-label":(0,i18n_build_module.__)("Template options"),onClick,children:null!=templateTitle?templateTitle:(0,i18n_build_module.__)("Default template")})}function PostTemplateDropdownContent({onClose}){var _options$find,_selectedOption$value;const allowSwitchingTemplate=useAllowSwitchingTemplates(),{availableTemplates,fetchedTemplates,selectedTemplateSlug,canCreate,canEdit,currentTemplateId,onNavigateToEntityRecord,getEditorSettings}=(0,use_select.A)((select=>{const{canUser,getEntityRecords}=select(core_data_build_module.M_),editorSettings=select(store_store).getEditorSettings(),canCreateTemplates=canUser("create",{kind:"postType",name:"wp_template"}),_currentTemplateId=select(store_store).getCurrentTemplateId();return{availableTemplates:editorSettings.availableTemplates,fetchedTemplates:canCreateTemplates?getEntityRecords("postType","wp_template",{post_type:select(store_store).getCurrentPostType(),per_page:-1}):void 0,selectedTemplateSlug:select(store_store).getEditedPostAttribute("template"),canCreate:allowSwitchingTemplate&&canCreateTemplates&&editorSettings.supportsTemplateMode,canEdit:allowSwitchingTemplate&&canCreateTemplates&&editorSettings.supportsTemplateMode&&!!_currentTemplateId,currentTemplateId:_currentTemplateId,onNavigateToEntityRecord:editorSettings.onNavigateToEntityRecord,getEditorSettings:select(store_store).getEditorSettings}}),[allowSwitchingTemplate]),options=(0,react.useMemo)((()=>Object.entries({...availableTemplates,...Object.fromEntries((null!=fetchedTemplates?fetchedTemplates:[]).map((({slug,title})=>[slug,title.rendered])))}).map((([slug,title])=>({value:slug,label:title})))),[availableTemplates,fetchedTemplates]),selectedOption=null!==(_options$find=options.find((option=>option.value===selectedTemplateSlug)))&&void 0!==_options$find?_options$find:options.find((option=>!option.value)),{editPost}=(0,use_dispatch.A)(store_store),{createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M),[isCreateModalOpen,setIsCreateModalOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)("div",{className:"editor-post-template__classic-theme-dropdown",children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Template"),help:(0,i18n_build_module.__)("Templates define the way content is displayed when viewing your site."),actions:canCreate?[{icon:add_template,label:(0,i18n_build_module.__)("Add template"),onClick:()=>setIsCreateModalOpen(!0)}]:[],onClose}),allowSwitchingTemplate?(0,jsx_runtime.jsx)(select_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Template"),value:null!==(_selectedOption$value=selectedOption?.value)&&void 0!==_selectedOption$value?_selectedOption$value:"",options,onChange:slug=>editPost({template:slug||""})}):(0,jsx_runtime.jsx)(build_module_notice.A,{status:"warning",isDismissible:!1,children:(0,i18n_build_module.__)("The posts page template cannot be changed.")}),canEdit&&onNavigateToEntityRecord&&(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"link",onClick:()=>{onNavigateToEntityRecord({postId:currentTemplateId,postType:"wp_template"}),onClose(),createSuccessNotice((0,i18n_build_module.__)("Editing template. Changes made here affect all posts and pages that use the template."),{type:"snackbar",actions:[{label:(0,i18n_build_module.__)("Go back"),onClick:()=>getEditorSettings().onNavigateToPreviousEntityRecord()}]})},children:(0,i18n_build_module.__)("Edit template")})}),isCreateModalOpen&&(0,jsx_runtime.jsx)(CreateNewTemplateModal,{onClose:()=>setIsCreateModalOpen(!1)})]})}const classic_theme=function ClassicThemeControl(){return(0,jsx_runtime.jsx)(dropdown.A,{popoverProps:POPOVER_PROPS,focusOnMount:!0,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(PostTemplateToggle,{isOpen,onClick:onToggle}),renderContent:({onClose})=>(0,jsx_runtime.jsx)(PostTemplateDropdownContent,{onClose})})};function SwapTemplateButton({onClick}){const[showModal,setShowModal]=(0,react.useState)(!1),{postType,postId}=useEditedPostContext(),availableTemplates=useAvailableTemplates(postType),{editEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_);if(!availableTemplates?.length)return null;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>setShowModal(!0),children:(0,i18n_build_module.__)("Swap template")}),showModal&&(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Choose a template"),onRequestClose:()=>setShowModal(!1),overlayClassName:"editor-post-template__swap-template-modal",isFullScreen:!0,children:(0,jsx_runtime.jsx)("div",{className:"editor-post-template__swap-template-modal-content",children:(0,jsx_runtime.jsx)(TemplatesList,{postType,onSelect:async template=>{editEntityRecord("postType",postType,postId,{template:template.name},{undoIgnore:!0}),setShowModal(!1),onClick()}})})})]})}function TemplatesList({postType,onSelect}){const availableTemplates=useAvailableTemplates(postType),templatesAsPatterns=(0,react.useMemo)((()=>availableTemplates.map((template=>({name:template.slug,blocks:(0,blocks_build_module.qg)(template.content.raw),title:(0,html_entities_build_module.S)(template.title.rendered),id:template.id})))),[availableTemplates]),shownTemplates=(0,use_async_list.A)(templatesAsPatterns);return(0,jsx_runtime.jsx)(build_module.RM,{label:(0,i18n_build_module.__)("Templates"),blockPatterns:templatesAsPatterns,shownPatterns:shownTemplates,onClickPattern:onSelect})}function ResetDefaultTemplate({onClick}){const currentTemplateSlug=useCurrentTemplateSlug(),allowSwitchingTemplate=useAllowSwitchingTemplates(),{postType,postId}=useEditedPostContext(),{editEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_);return currentTemplateSlug&&allowSwitchingTemplate?(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{editEntityRecord("postType",postType,postId,{template:""},{undoIgnore:!0}),onClick()},children:(0,i18n_build_module.__)("Use default template")}):null}function CreateNewTemplate({onClick}){const{canCreateTemplates}=(0,use_select.A)((select=>{const{canUser}=select(core_data_build_module.M_);return{canCreateTemplates:canUser("create",{kind:"postType",name:"wp_template"})}}),[]),[isCreateModalOpen,setIsCreateModalOpen]=(0,react.useState)(!1),allowSwitchingTemplate=useAllowSwitchingTemplates();return canCreateTemplates&&allowSwitchingTemplate?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{setIsCreateModalOpen(!0)},children:(0,i18n_build_module.__)("Create new template")}),isCreateModalOpen&&(0,jsx_runtime.jsx)(CreateNewTemplateModal,{onClose:()=>{setIsCreateModalOpen(!1),onClick()}})]}):null}const block_theme_POPOVER_PROPS={className:"editor-post-template__dropdown",placement:"bottom-start"};function BlockThemeControl({id}){const{isTemplateHidden,onNavigateToEntityRecord,getEditorSettings,hasGoBack}=(0,use_select.A)((select=>{const{getRenderingMode,getEditorSettings:_getEditorSettings}=lock_unlock_unlock(select(store_store)),editorSettings=_getEditorSettings();return{isTemplateHidden:"post-only"===getRenderingMode(),onNavigateToEntityRecord:editorSettings.onNavigateToEntityRecord,getEditorSettings:_getEditorSettings,hasGoBack:editorSettings.hasOwnProperty("onNavigateToPreviousEntityRecord")}}),[]),{get:getPreference}=(0,use_select.A)(store.M),{editedRecord:template,hasResolved}=(0,core_data_build_module.MA)("postType","wp_template",id),{createSuccessNotice}=(0,use_dispatch.A)(notices_build_module.M),{setRenderingMode}=(0,use_dispatch.A)(store_store),canCreateTemplate=(0,use_select.A)((select=>!!select(core_data_build_module.M_).canUser("create",{kind:"postType",name:"wp_template"})),[]);if(!hasResolved)return null;const notificationAction=hasGoBack?[{label:(0,i18n_build_module.__)("Go back"),onClick:()=>getEditorSettings().onNavigateToPreviousEntityRecord()}]:void 0;return(0,jsx_runtime.jsx)(dropdown_menu.A,{popoverProps:block_theme_POPOVER_PROPS,focusOnMount:!0,toggleProps:{size:"compact",variant:"tertiary",tooltipPosition:"middle left"},label:(0,i18n_build_module.__)("Template options"),text:(0,html_entities_build_module.S)(template.title),icon:null,children:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu_group.A,{children:[canCreateTemplate&&(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{onNavigateToEntityRecord({postId:template.id,postType:"wp_template"}),onClose(),getPreference("core/edit-site","welcomeGuideTemplate")||createSuccessNotice((0,i18n_build_module.__)("Editing template. Changes made here affect all posts and pages that use the template."),{type:"snackbar",actions:notificationAction})},children:(0,i18n_build_module.__)("Edit template")}),(0,jsx_runtime.jsx)(SwapTemplateButton,{onClick:onClose}),(0,jsx_runtime.jsx)(ResetDefaultTemplate,{onClick:onClose}),canCreateTemplate&&(0,jsx_runtime.jsx)(CreateNewTemplate,{onClick:onClose})]}),(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(menu_item.A,{icon:isTemplateHidden?void 0:check.A,isSelected:!isTemplateHidden,role:"menuitemcheckbox",onClick:()=>{setRenderingMode(isTemplateHidden?"template-locked":"post-only")},children:(0,i18n_build_module.__)("Show template")})})]})})}function PostTemplatePanel(){const{templateId,isBlockTheme}=(0,use_select.A)((select=>{const{getCurrentTemplateId,getEditorSettings}=select(store_store);return{templateId:getCurrentTemplateId(),isBlockTheme:getEditorSettings().__unstableIsBlockBasedTheme}}),[]),isVisible=(0,use_select.A)((select=>{var _select$canUser;const postTypeSlug=select(store_store).getCurrentPostType(),postType=select(core_data_build_module.M_).getPostType(postTypeSlug);if(!postType?.viewable)return!1;const settings=select(store_store).getEditorSettings();if(!!settings.availableTemplates&&Object.keys(settings.availableTemplates).length>0)return!0;if(!settings.supportsTemplateMode)return!1;return null!==(_select$canUser=select(core_data_build_module.M_).canUser("create",{kind:"postType",name:"wp_template"}))&&void 0!==_select$canUser&&_select$canUser}),[]),canViewTemplates=(0,use_select.A)((select=>{var _select$canUser2;return null!==(_select$canUser2=select(core_data_build_module.M_).canUser("read",{kind:"postType",name:"wp_template"}))&&void 0!==_select$canUser2&&_select$canUser2}),[]);return isBlockTheme&&canViewTemplates||!isVisible?isBlockTheme&&templateId?(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Template"),children:(0,jsx_runtime.jsx)(BlockThemeControl,{id:templateId})}):null:(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Template"),children:(0,jsx_runtime.jsx)(classic_theme,{})})}function PostURLCheck({children}){const isVisible=(0,use_select.A)((select=>{const postTypeSlug=select(store_store).getCurrentPostType(),postType=select(core_data_build_module.M_).getPostType(postTypeSlug);if(!postType?.viewable)return!1;if(!select(store_store).getCurrentPost().link)return!1;return!!select(store_store).getPermalinkParts()}),[]);return isVisible?children:null}var input_control=__webpack_require__("./packages/components/build-module/input-control/index.js"),input_prefix_wrapper=__webpack_require__("./packages/components/build-module/input-control/input-prefix-wrapper.js"),input_suffix_wrapper=__webpack_require__("./packages/components/build-module/input-control/input-suffix-wrapper.js"),copy_small=__webpack_require__("./packages/icons/build-module/library/copy-small.js");function PostURL({onClose}){const{isEditable,postSlug,postLink,permalinkPrefix,permalinkSuffix,permalink}=(0,use_select.A)((select=>{var _post$_links$wpActio;const post=select(store_store).getCurrentPost(),postTypeSlug=select(store_store).getCurrentPostType(),postType=select(core_data_build_module.M_).getPostType(postTypeSlug),permalinkParts=select(store_store).getPermalinkParts(),hasPublishAction=null!==(_post$_links$wpActio=post?._links?.["wp:action-publish"])&&void 0!==_post$_links$wpActio&&_post$_links$wpActio;return{isEditable:select(store_store).isPermalinkEditable()&&hasPublishAction,postSlug:(0,safe_decode_uri_component.T)(select(store_store).getEditedPostSlug()),viewPostLabel:postType?.labels.view_item,postLink:post.link,permalinkPrefix:permalinkParts?.prefix,permalinkSuffix:permalinkParts?.suffix,permalink:(0,safe_decode_uri_component.T)(select(store_store).getPermalink())}}),[]),{editPost}=(0,use_dispatch.A)(store_store),{createNotice}=(0,use_dispatch.A)(notices_build_module.M),[forceEmptyField,setForceEmptyField]=(0,react.useState)(!1),copyButtonRef=(0,use_copy_to_clipboard.A)(permalink,(()=>{createNotice("info",(0,i18n_build_module.__)("Copied Permalink to clipboard."),{isDismissible:!0,type:"snackbar"})})),postUrlSlugDescriptionId="editor-post-url__slug-description-"+(0,use_instance_id.A)(PostURL);return(0,jsx_runtime.jsxs)("div",{className:"editor-post-url",children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Slug"),onClose}),(0,jsx_runtime.jsxs)(component.A,{spacing:3,children:[isEditable&&(0,jsx_runtime.jsx)("p",{className:"editor-post-url__intro",children:(0,create_interpolate_element.A)((0,i18n_build_module.__)("<span>Customize the last part of the Permalink.</span> <a>Learn more.</a>"),{span:(0,jsx_runtime.jsx)("span",{id:postUrlSlugDescriptionId}),a:(0,jsx_runtime.jsx)(external_link.A,{href:(0,i18n_build_module.__)("https://wordpress.org/documentation/article/page-post-settings-sidebar/#permalink")})})}),(0,jsx_runtime.jsxs)("div",{children:[isEditable&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(input_control.Ay,{__next40pxDefaultSize:!0,prefix:(0,jsx_runtime.jsx)(input_prefix_wrapper.A,{children:"/"}),suffix:(0,jsx_runtime.jsx)(input_suffix_wrapper.A,{variant:"control",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:copy_small.A,ref:copyButtonRef,size:"small",label:"Copy"})}),label:(0,i18n_build_module.__)("Slug"),hideLabelFromVision:!0,value:forceEmptyField?"":postSlug,autoComplete:"off",spellCheck:"false",type:"text",className:"editor-post-url__input",onChange:newValue=>{editPost({slug:newValue}),newValue?forceEmptyField&&setForceEmptyField(!1):forceEmptyField||setForceEmptyField(!0)},onBlur:event=>{editPost({slug:cleanForSlug(event.target.value)}),forceEmptyField&&setForceEmptyField(!1)},"aria-describedby":postUrlSlugDescriptionId}),(0,jsx_runtime.jsxs)("p",{className:"editor-post-url__permalink",children:[(0,jsx_runtime.jsx)("span",{className:"editor-post-url__permalink-visual-label",children:(0,i18n_build_module.__)("Permalink:")}),(0,jsx_runtime.jsxs)(external_link.A,{className:"editor-post-url__link",href:postLink,target:"_blank",children:[(0,jsx_runtime.jsx)("span",{className:"editor-post-url__link-prefix",children:permalinkPrefix}),(0,jsx_runtime.jsx)("span",{className:"editor-post-url__link-slug",children:postSlug}),(0,jsx_runtime.jsx)("span",{className:"editor-post-url__link-suffix",children:permalinkSuffix})]})]})]}),!isEditable&&(0,jsx_runtime.jsx)(external_link.A,{className:"editor-post-url__link",href:postLink,target:"_blank",children:postLink})]})]})]})}function PostURLPanel(){const{isFrontPage}=(0,use_select.A)((select=>{const{getCurrentPostId}=select(store_store),{getEditedEntityRecord,canUser}=select(core_data_build_module.M_),siteSettings=canUser("read",{kind:"root",name:"site"})?getEditedEntityRecord("root","site"):void 0,_id=getCurrentPostId();return{isFrontPage:siteSettings?.page_on_front===_id}}),[]),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,placement:"left-start",offset:36,shift:!0})),[popoverAnchor]),label=isFrontPage?(0,i18n_build_module.__)("Link"):(0,i18n_build_module.__)("Slug");return(0,jsx_runtime.jsx)(PostURLCheck,{children:(0,jsx_runtime.jsxs)(post_panel_row,{label,ref:setPopoverAnchor,children:[!isFrontPage&&(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,className:"editor-post-url__panel-dropdown",contentClassName:"editor-post-url__panel-dialog",focusOnMount:!0,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(PostURLToggle,{isOpen,onClick:onToggle}),renderContent:({onClose})=>(0,jsx_runtime.jsx)(PostURL,{onClose})}),isFrontPage&&(0,jsx_runtime.jsx)(FrontPageLink,{})]})})}function PostURLToggle({isOpen,onClick}){const{slug}=(0,use_select.A)((select=>({slug:select(store_store).getEditedPostSlug()})),[]),decodedSlug=(0,safe_decode_uri_component.T)(slug);return(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",className:"editor-post-url__panel-toggle",variant:"tertiary","aria-expanded":isOpen,"aria-label":(0,i18n_build_module.nv)((0,i18n_build_module.__)("Change link: %s"),decodedSlug),onClick,children:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:decodedSlug})})}function FrontPageLink(){const{postLink}=(0,use_select.A)((select=>{const{getCurrentPost}=select(store_store);return{postLink:getCurrentPost()?.link}}),[]);return(0,jsx_runtime.jsx)(external_link.A,{className:"editor-post-url__front-page-link",href:postLink,target:"_blank",children:postLink})}const blog_title_EMPTY_OBJECT={};function BlogTitle(){const{editEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{postsPageTitle,postsPageId,isTemplate,postSlug}=(0,use_select.A)((select=>{const{getEntityRecord,getEditedEntityRecord,canUser}=select(core_data_build_module.M_),siteSettings=canUser("read",{kind:"root",name:"site"})?getEntityRecord("root","site"):void 0,_postsPageRecord=siteSettings?.page_for_posts?getEditedEntityRecord("postType","page",siteSettings?.page_for_posts):blog_title_EMPTY_OBJECT,{getEditedPostAttribute,getCurrentPostType}=select(store_store);return{postsPageId:_postsPageRecord?.id,postsPageTitle:_postsPageRecord?.title,isTemplate:getCurrentPostType()===constants_TEMPLATE_POST_TYPE,postSlug:getEditedPostAttribute("slug")}}),[]),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,placement:"left-start",offset:36,shift:!0})),[popoverAnchor]);if(!isTemplate||!["home","index"].includes(postSlug)||!postsPageId)return null;const setPostsPageTitle=newValue=>{editEntityRecord("postType","page",postsPageId,{title:newValue})},decodedTitle=(0,html_entities_build_module.S)(postsPageTitle);return(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Blog title"),ref:setPopoverAnchor,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,contentClassName:"editor-blog-title-dropdown__content",focusOnMount:!0,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",variant:"tertiary","aria-expanded":isOpen,"aria-label":(0,i18n_build_module.nv)((0,i18n_build_module.__)("Change blog title: %s"),decodedTitle),onClick:onToggle,children:decodedTitle}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Blog title"),onClose}),(0,jsx_runtime.jsx)(input_control.Ay,{placeholder:(0,i18n_build_module.__)("No title"),size:"__unstable-large",value:postsPageTitle,onChange:(0,debounce.s)(setPostsPageTitle,300),label:(0,i18n_build_module.__)("Blog title"),help:(0,i18n_build_module.__)("Set the Posts Page title. Appears in search results, and when the page is shared on social media."),hideLabelFromVision:!0})]})})})}function PostsPerPage(){const{editEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{postsPerPage,isTemplate,postSlug}=(0,use_select.A)((select=>{const{getEditedPostAttribute,getCurrentPostType}=select(store_store),{getEditedEntityRecord,canUser}=select(core_data_build_module.M_),siteSettings=canUser("read",{kind:"root",name:"site"})?getEditedEntityRecord("root","site"):void 0;return{isTemplate:getCurrentPostType()===constants_TEMPLATE_POST_TYPE,postSlug:getEditedPostAttribute("slug"),postsPerPage:siteSettings?.posts_per_page||1}}),[]),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,placement:"left-start",offset:36,shift:!0})),[popoverAnchor]);if(!isTemplate||!["home","index"].includes(postSlug))return null;const setPostsPerPage=newValue=>{editEntityRecord("root","site",void 0,{posts_per_page:newValue})};return(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Posts per page"),ref:setPopoverAnchor,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,contentClassName:"editor-posts-per-page-dropdown__content",focusOnMount:!0,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",variant:"tertiary","aria-expanded":isOpen,"aria-label":(0,i18n_build_module.__)("Change posts per page"),onClick:onToggle,children:postsPerPage}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Posts per page"),onClose}),(0,jsx_runtime.jsx)(number_control.A,{placeholder:0,value:postsPerPage,size:"__unstable-large",spinControls:"custom",step:"1",min:"1",onChange:setPostsPerPage,label:(0,i18n_build_module.__)("Posts per page"),help:(0,i18n_build_module.__)("Set the default number of posts to display on blog pages, including categories and tags. Some templates may override this setting."),hideLabelFromVision:!0})]})})})}const site_discussion_COMMENT_OPTIONS=[{label:(0,i18n_build_module._x)("Open",'Adjective: e.g. "Comments are open"'),value:"open",description:(0,i18n_build_module.__)("Visitors can add new comments and replies.")},{label:(0,i18n_build_module.__)("Closed"),value:"",description:[(0,i18n_build_module.__)("Visitors cannot add new comments or replies."),(0,i18n_build_module.__)("Existing comments remain visible.")].join(" ")}];function SiteDiscussion(){const{editEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{allowCommentsOnNewPosts,isTemplate,postSlug}=(0,use_select.A)((select=>{const{getEditedPostAttribute,getCurrentPostType}=select(store_store),{getEditedEntityRecord,canUser}=select(core_data_build_module.M_),siteSettings=canUser("read",{kind:"root",name:"site"})?getEditedEntityRecord("root","site"):void 0;return{isTemplate:getCurrentPostType()===constants_TEMPLATE_POST_TYPE,postSlug:getEditedPostAttribute("slug"),allowCommentsOnNewPosts:siteSettings?.default_comment_status||""}}),[]),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({anchor:popoverAnchor,placement:"left-start",offset:36,shift:!0})),[popoverAnchor]);if(!isTemplate||!["home","index"].includes(postSlug))return null;const setAllowCommentsOnNewPosts=newValue=>{editEntityRecord("root","site",void 0,{default_comment_status:newValue?"open":null})};return(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Discussion"),ref:setPopoverAnchor,children:(0,jsx_runtime.jsx)(dropdown.A,{popoverProps,contentClassName:"editor-site-discussion-dropdown__content",focusOnMount:!0,renderToggle:({isOpen,onToggle})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",variant:"tertiary","aria-expanded":isOpen,"aria-label":(0,i18n_build_module.__)("Change discussion settings"),onClick:onToggle,children:allowCommentsOnNewPosts?(0,i18n_build_module.__)("Comments open"):(0,i18n_build_module.__)("Comments closed")}),renderContent:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(build_module.MI,{title:(0,i18n_build_module.__)("Discussion"),onClose}),(0,jsx_runtime.jsxs)(component.A,{spacing:3,children:[(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.__)("Changes will apply to new posts only. Individual posts may override these settings.")}),(0,jsx_runtime.jsx)(radio_control.A,{className:"editor-site-discussion__options",hideLabelFromVision:!0,label:(0,i18n_build_module.__)("Comment status"),options:site_discussion_COMMENT_OPTIONS,onChange:setAllowCommentsOnNewPosts,selected:allowCommentsOnNewPosts})]})]})})})}const post_last_revision_check=function check_PostLastRevisionCheck({children}){const{lastRevisionId,revisionsCount}=(0,use_select.A)((select=>{const{getCurrentPostLastRevisionId,getCurrentPostRevisionsCount}=select(store_store);return{lastRevisionId:getCurrentPostLastRevisionId(),revisionsCount:getCurrentPostRevisionsCount()}}),[]);return!lastRevisionId||revisionsCount<2?null:(0,jsx_runtime.jsx)(post_type_support_check,{supportKeys:"revisions",children})};function usePostLastRevisionInfo(){return(0,use_select.A)((select=>{const{getCurrentPostLastRevisionId,getCurrentPostRevisionsCount}=select(store_store);return{lastRevisionId:getCurrentPostLastRevisionId(),revisionsCount:getCurrentPostRevisionsCount()}}),[])}function PrivatePostLastRevision(){const{lastRevisionId,revisionsCount}=usePostLastRevisionInfo();return(0,jsx_runtime.jsx)(post_last_revision_check,{children:(0,jsx_runtime.jsx)(post_panel_row,{label:(0,i18n_build_module.__)("Revisions"),children:(0,jsx_runtime.jsx)(build_module_button.Ay,{href:(0,add_query_args.F)("revision.php",{revision:lastRevisionId}),className:"editor-private-post-last-revision__button",text:revisionsCount,variant:"tertiary",size:"compact"})})})}function PostTrashCheck({children}){const{canTrashPost}=(0,use_select.A)((select=>{const{isEditedPostNew,getCurrentPostId,getCurrentPostType}=select(store_store),{canUser}=select(core_data_build_module.M_),postType=getCurrentPostType(),postId=getCurrentPostId(),isNew=isEditedPostNew(),canUserDelete=!!postId&&canUser("delete",{kind:"postType",name:postType,id:postId});return{canTrashPost:(!isNew||postId)&&canUserDelete&&!GLOBAL_POST_TYPES.includes(postType)}}),[]);return canTrashPost?children:null}function PostTrash({onActionPerformed}){const registry=(0,use_registry.A)(),{isNew,isDeleting,postId,title}=(0,use_select.A)((select=>{const store=select(store_store);return{isNew:store.isEditedPostNew(),isDeleting:store.isDeletingPost(),postId:store.getCurrentPostId(),title:store.getCurrentPostAttribute("title")}}),[]),{trashPost}=(0,use_dispatch.A)(store_store),[showConfirmDialog,setShowConfirmDialog]=(0,react.useState)(!1);if(isNew||!postId)return null;return(0,jsx_runtime.jsxs)(PostTrashCheck,{children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"editor-post-trash",isDestructive:!0,variant:"secondary",isBusy:isDeleting,"aria-disabled":isDeleting,onClick:isDeleting?void 0:()=>setShowConfirmDialog(!0),children:(0,i18n_build_module.__)("Move to trash")}),(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen:showConfirmDialog,onConfirm:async()=>{setShowConfirmDialog(!1),await trashPost();const item=await registry.resolveSelect(store_store).getCurrentPost();onActionPerformed?.("move-to-trash",[item])},onCancel:()=>setShowConfirmDialog(!1),confirmButtonText:(0,i18n_build_module.__)("Move to trash"),size:"small",children:(0,i18n_build_module.nv)((0,i18n_build_module.__)('Are you sure you want to move "%s" to the trash?'),title)})]})}function PostSummary({onActionPerformed}){const{isRemovedPostStatusPanel,postType,postId}=(0,use_select.A)((select=>{const{isEditorPanelRemoved,getCurrentPostType,getCurrentPostId}=select(store_store);return{isRemovedPostStatusPanel:isEditorPanelRemoved("post-status"),postType:getCurrentPostType(),postId:getCurrentPostId()}}),[]);return(0,jsx_runtime.jsx)(post_panel_section,{className:"editor-post-summary",children:(0,jsx_runtime.jsx)(plugin_post_status_info.Slot,{children:fills=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(component.A,{spacing:4,children:[(0,jsx_runtime.jsx)(PostCardPanel,{postType,postId,onActionPerformed}),(0,jsx_runtime.jsx)(PostFeaturedImagePanel,{withPanelBody:!1}),(0,jsx_runtime.jsx)(PrivatePostExcerptPanel,{}),(0,jsx_runtime.jsxs)(component.A,{spacing:1,children:[(0,jsx_runtime.jsx)(PostContentInformation,{}),(0,jsx_runtime.jsx)(PostLastEditedPanel,{})]}),!isRemovedPostStatusPanel&&(0,jsx_runtime.jsxs)(component.A,{spacing:4,children:[(0,jsx_runtime.jsxs)(component.A,{spacing:1,children:[(0,jsx_runtime.jsx)(PostStatus,{}),(0,jsx_runtime.jsx)(PostSchedulePanel,{}),(0,jsx_runtime.jsx)(PostURLPanel,{}),(0,jsx_runtime.jsx)(post_author_panel,{}),(0,jsx_runtime.jsx)(PostTemplatePanel,{}),(0,jsx_runtime.jsx)(PostDiscussionPanel,{}),(0,jsx_runtime.jsx)(PrivatePostLastRevision,{}),(0,jsx_runtime.jsx)(PageAttributesPanel,{}),(0,jsx_runtime.jsx)(PostSyncStatus,{}),(0,jsx_runtime.jsx)(BlogTitle,{}),(0,jsx_runtime.jsx)(PostsPerPage,{}),(0,jsx_runtime.jsx)(SiteDiscussion,{}),(0,jsx_runtime.jsx)(post_format_panel,{})]}),(0,jsx_runtime.jsx)(PostTrash,{onActionPerformed}),fills]})]})})})})}const post_taxonomies_identity=x=>x;const post_taxonomies=function PostTaxonomies({taxonomyWrapper=post_taxonomies_identity}){const{postType,taxonomies}=(0,use_select.A)((select=>({postType:select(store_store).getCurrentPostType(),taxonomies:select(core_data_build_module.M_).getTaxonomies({per_page:-1})})),[]);return(null!=taxonomies?taxonomies:[]).filter((taxonomy=>taxonomy.types.includes(postType)&&taxonomy.visibility?.show_ui)).map((taxonomy=>{const TaxonomyComponent=taxonomy.hierarchical?hierarchical_term_selector:flat_term_selector,taxonomyComponentProps={slug:taxonomy.slug,...taxonomy.hierarchical?{}:{__nextHasNoMarginBottom:!0}};return(0,jsx_runtime.jsx)(react.Fragment,{children:taxonomyWrapper((0,jsx_runtime.jsx)(TaxonomyComponent,{...taxonomyComponentProps}),taxonomy)},`taxonomy-${taxonomy.slug}`)}))};function PostTaxonomiesCheck({children}){const hasTaxonomies=(0,use_select.A)((select=>{const postType=select(store_store).getCurrentPostType(),taxonomies=select(core_data_build_module.M_).getTaxonomies({per_page:-1});return taxonomies?.some((taxonomy=>taxonomy.types.includes(postType)))}),[]);return hasTaxonomies?children:null}function TaxonomyPanel({taxonomy,children}){const slug=taxonomy?.slug,panelName=slug?`taxonomy-panel-${slug}`:"",{isEnabled,isOpened}=(0,use_select.A)((select=>{const{isEditorPanelEnabled,isEditorPanelOpened}=select(store_store);return{isEnabled:!!slug&&isEditorPanelEnabled(panelName),isOpened:!!slug&&isEditorPanelOpened(panelName)}}),[panelName,slug]),{toggleEditorPanelOpened}=(0,use_dispatch.A)(store_store);if(!isEnabled)return null;const taxonomyMenuName=taxonomy?.labels?.menu_name;return taxonomyMenuName?(0,jsx_runtime.jsx)(body.Ay,{title:taxonomyMenuName,opened:isOpened,onToggle:()=>toggleEditorPanelOpened(panelName),children}):null}const post_taxonomies_panel=function panel_PostTaxonomies(){return(0,jsx_runtime.jsx)(PostTaxonomiesCheck,{children:(0,jsx_runtime.jsx)(post_taxonomies,{taxonomyWrapper:(content,taxonomy)=>(0,jsx_runtime.jsx)(TaxonomyPanel,{taxonomy,children:content})})})},{EXCLUDED_PATTERN_SOURCES,PATTERN_TYPES:hooks_PATTERN_TYPES}=lock_unlock_unlock(patterns_build_module.j);function injectThemeAttributeInBlockTemplateContent(block,currentThemeStylesheet){return block.innerBlocks=block.innerBlocks.map((innerBlock=>injectThemeAttributeInBlockTemplateContent(innerBlock,currentThemeStylesheet))),"core/template-part"===block.name&&void 0===block.attributes.theme&&(block.attributes.theme=currentThemeStylesheet),block}function filterPatterns(patterns,template){return patterns.filter(((pattern,index,items)=>((currentItem,index,items)=>index===items.findIndex((item=>currentItem.name===item.name)))(pattern,index,items)&&(pattern=>!EXCLUDED_PATTERN_SOURCES.includes(pattern.source))(pattern)&&(pattern=>pattern.templateTypes?.includes(template.slug)||pattern.blockTypes?.includes("core/template-part/"+template.area))(pattern)))}function preparePatterns(patterns,currentThemeStylesheet){return patterns.map((pattern=>({...pattern,keywords:pattern.keywords||[],type:hooks_PATTERN_TYPES.theme,blocks:(0,blocks_build_module.qg)(pattern.content,{__unstableSkipMigrationLogs:!0}).map((block=>injectThemeAttributeInBlockTemplateContent(block,currentThemeStylesheet)))})))}function post_transform_panel_TemplatesList({availableTemplates,onSelect}){const shownTemplates=(0,use_async_list.A)(availableTemplates);return availableTemplates&&0!==availableTemplates?.length?(0,jsx_runtime.jsx)(build_module.RM,{label:(0,i18n_build_module.__)("Templates"),blockPatterns:availableTemplates,shownPatterns:shownTemplates,onClickPattern:onSelect,showTitlesAsTooltip:!0}):null}function PostTransform(){const{record,postType,postId}=(0,use_select.A)((select=>{const{getCurrentPostType,getCurrentPostId}=select(store_store),{getEditedEntityRecord}=select(core_data_build_module.M_),type=getCurrentPostType(),id=getCurrentPostId();return{postType:type,postId:id,record:getEditedEntityRecord("postType",type,id)}}),[]),{editEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),availablePatterns=function useAvailablePatterns(template){const{blockPatterns,restBlockPatterns,currentThemeStylesheet}=(0,use_select.A)((select=>{var _settings$__experimen;const{getEditorSettings}=select(store_store),settings=getEditorSettings();return{blockPatterns:null!==(_settings$__experimen=settings.__experimentalAdditionalBlockPatterns)&&void 0!==_settings$__experimen?_settings$__experimen:settings.__experimentalBlockPatterns,restBlockPatterns:select(core_data_build_module.M_).getBlockPatterns(),currentThemeStylesheet:select(core_data_build_module.M_).getCurrentTheme().stylesheet}}),[]);return(0,react.useMemo)((()=>preparePatterns(filterPatterns([...blockPatterns||[],...restBlockPatterns||[]],template),template)),[blockPatterns,restBlockPatterns,template,currentThemeStylesheet])}(record);return availablePatterns?.length?(0,jsx_runtime.jsx)(body.Ay,{title:(0,i18n_build_module.__)("Design"),initialOpen:record.type===constants_TEMPLATE_PART_POST_TYPE,children:(0,jsx_runtime.jsx)(post_transform_panel_TemplatesList,{availableTemplates:availablePatterns,onSelect:async selectedTemplate=>{await editEntityRecord("postType",postType,postId,{blocks:selectedTemplate.blocks,content:(0,blocks_build_module.lK)(selectedTemplate.blocks)})}})}):null}function PostTransformPanel(){const{postType}=(0,use_select.A)((select=>{const{getCurrentPostType}=select(store_store);return{postType:getCurrentPostType()}}),[]);return[constants_TEMPLATE_PART_POST_TYPE,constants_TEMPLATE_POST_TYPE].includes(postType)?(0,jsx_runtime.jsx)(PostTransform,{}):null}const sidebars={document:"edit-post/document",block:"edit-post/block"},{Tabs:header_Tabs}=lock_unlock_unlock(private_apis.j),sidebar_header=(0,react.forwardRef)(((_,ref)=>{const{documentLabel}=(0,use_select.A)((select=>{const{getPostTypeLabel}=select(store_store);return{documentLabel:getPostTypeLabel()||(0,i18n_build_module._x)("Document","noun")}}),[]);return(0,jsx_runtime.jsxs)(header_Tabs.TabList,{ref,children:[(0,jsx_runtime.jsx)(header_Tabs.Tab,{tabId:sidebars.document,"data-tab-id":sidebars.document,children:documentLabel}),(0,jsx_runtime.jsx)(header_Tabs.Tab,{tabId:sidebars.block,"data-tab-id":sidebars.block,children:(0,i18n_build_module.__)("Block")})]})})),{BlockQuickNavigation}=lock_unlock_unlock(build_module.jb),template_content_panel_POST_CONTENT_BLOCK_TYPES=["core/post-title","core/post-featured-image","core/post-content"];function TemplateContentPanel(){const postContentBlockTypes=(0,react.useMemo)((()=>(0,hooks_build_module.W5)("editor.postContentBlockTypes",template_content_panel_POST_CONTENT_BLOCK_TYPES)),[]),{clientIds,postType,renderingMode}=(0,use_select.A)((select=>{const{getCurrentPostType,getPostBlocksByName,getRenderingMode}=lock_unlock_unlock(select(store_store)),_postType=getCurrentPostType();return{postType:_postType,clientIds:getPostBlocksByName(constants_TEMPLATE_POST_TYPE===_postType?"core/template-part":postContentBlockTypes),renderingMode:getRenderingMode()}}),[postContentBlockTypes]),{enableComplementaryArea}=(0,use_dispatch.A)(interface_build_module_store_store);return"post-only"===renderingMode&&postType!==constants_TEMPLATE_POST_TYPE||0===clientIds.length?null:(0,jsx_runtime.jsx)(body.Ay,{title:(0,i18n_build_module.__)("Content"),children:(0,jsx_runtime.jsx)(BlockQuickNavigation,{clientIds,onSelect:()=>{enableComplementaryArea("core","edit-post/document")}})})}const{BlockQuickNavigation:template_part_content_panel_BlockQuickNavigation}=lock_unlock_unlock(build_module.jb);function TemplatePartContentPanelInner(){const blockTypes=(0,use_select.A)((select=>{const{getBlockTypes}=select(blocks_build_module.M_);return getBlockTypes()}),[]),themeBlockNames=(0,react.useMemo)((()=>blockTypes.filter((blockType=>"theme"===blockType.category)).map((({name})=>name))),[blockTypes]),themeBlocks=(0,use_select.A)((select=>{const{getBlocksByName}=select(build_module.M_);return getBlocksByName(themeBlockNames)}),[themeBlockNames]);return 0===themeBlocks.length?null:(0,jsx_runtime.jsx)(body.Ay,{title:(0,i18n_build_module.__)("Content"),children:(0,jsx_runtime.jsx)(template_part_content_panel_BlockQuickNavigation,{clientIds:themeBlocks})})}function TemplatePartContentPanel(){const postType=(0,use_select.A)((select=>{const{getCurrentPostType}=select(store_store);return getCurrentPostType()}),[]);return postType!==constants_TEMPLATE_PART_POST_TYPE?null:(0,jsx_runtime.jsx)(TemplatePartContentPanelInner,{})}const use_auto_switch_editor_sidebars=function useAutoSwitchEditorSidebars(){const{hasBlockSelection}=(0,use_select.A)((select=>({hasBlockSelection:!!select(build_module.M_).getBlockSelectionStart()})),[]),{getActiveComplementaryArea}=(0,use_select.A)(interface_build_module_store_store),{enableComplementaryArea}=(0,use_dispatch.A)(interface_build_module_store_store),{get:getPreference}=(0,use_select.A)(store.M);(0,react.useEffect)((()=>{const activeGeneralSidebar=getActiveComplementaryArea("core"),isEditorSidebarOpened=["edit-post/document","edit-post/block"].includes(activeGeneralSidebar),isDistractionFree=getPreference("core","distractionFree");isEditorSidebarOpened&&!isDistractionFree&&enableComplementaryArea("core",hasBlockSelection?"edit-post/block":"edit-post/document")}),[hasBlockSelection,getActiveComplementaryArea,enableComplementaryArea,getPreference])},{Tabs:sidebar_Tabs}=lock_unlock_unlock(private_apis.j),SIDEBAR_ACTIVE_BY_DEFAULT=platform.A.select({web:!0,native:!1}),SidebarContent=({tabName,keyboardShortcut,onActionPerformed,extraPanels})=>{const tabListRef=(0,react.useRef)(null),tabsContextValue=(0,react.useContext)(sidebar_Tabs.Context);return(0,react.useEffect)((()=>{const tabsElements=Array.from(tabListRef.current?.querySelectorAll('[role="tab"]')||[]),selectedTabElement=tabsElements.find((element=>element.getAttribute("data-tab-id")===tabName)),activeElement=selectedTabElement?.ownerDocument.activeElement;tabsElements.some((element=>activeElement&&activeElement.id===element.id))&&selectedTabElement&&selectedTabElement.id!==activeElement?.id&&selectedTabElement?.focus()}),[tabName]),(0,jsx_runtime.jsx)(PluginSidebar,{identifier:tabName,header:(0,jsx_runtime.jsx)(sidebar_Tabs.Context.Provider,{value:tabsContextValue,children:(0,jsx_runtime.jsx)(sidebar_header,{ref:tabListRef})}),closeLabel:(0,i18n_build_module.__)("Close Settings"),className:"editor-sidebar__panel",headerClassName:"editor-sidebar__panel-tabs",title:(0,i18n_build_module.__)("Settings"),toggleShortcut:keyboardShortcut,icon:(0,i18n_build_module.V8)()?drawer_left:drawer_right,isActiveByDefault:SIDEBAR_ACTIVE_BY_DEFAULT,children:(0,jsx_runtime.jsxs)(sidebar_Tabs.Context.Provider,{value:tabsContextValue,children:[(0,jsx_runtime.jsxs)(sidebar_Tabs.TabPanel,{tabId:sidebars.document,focusable:!1,children:[(0,jsx_runtime.jsx)(PostSummary,{onActionPerformed}),(0,jsx_runtime.jsx)(plugin_document_setting_panel.Slot,{}),(0,jsx_runtime.jsx)(TemplateContentPanel,{}),(0,jsx_runtime.jsx)(TemplatePartContentPanel,{}),(0,jsx_runtime.jsx)(PostTransformPanel,{}),(0,jsx_runtime.jsx)(post_taxonomies_panel,{}),(0,jsx_runtime.jsx)(PatternOverridesPanel,{}),extraPanels]}),(0,jsx_runtime.jsx)(sidebar_Tabs.TabPanel,{tabId:sidebars.block,focusable:!1,children:(0,jsx_runtime.jsx)(build_module.Nh,{})})]})})},components_sidebar=({extraPanels,onActionPerformed})=>{use_auto_switch_editor_sidebars();const{tabName,keyboardShortcut,showSummary}=(0,use_select.A)((select=>{const shortcut=select(keyboard_shortcuts_build_module.M_).getShortcutRepresentation("core/editor/toggle-sidebar"),sidebar=select(interface_build_module_store_store).getActiveComplementaryArea("core");let _tabName=sidebar;return[sidebars.block,sidebars.document].includes(sidebar)||(_tabName=select(build_module.M_).getBlockSelectionStart()?sidebars.block:sidebars.document),{tabName:_tabName,keyboardShortcut:shortcut,showSummary:![constants_TEMPLATE_POST_TYPE,constants_TEMPLATE_PART_POST_TYPE,NAVIGATION_POST_TYPE].includes(select(store_store).getCurrentPostType())}}),[]),{enableComplementaryArea}=(0,use_dispatch.A)(interface_build_module_store_store),onTabSelect=(0,react.useCallback)((newSelectedTabId=>{newSelectedTabId&&enableComplementaryArea("core",newSelectedTabId)}),[enableComplementaryArea]);return(0,jsx_runtime.jsx)(sidebar_Tabs,{selectedTabId:tabName,onSelect:onTabSelect,selectOnMove:!1,children:(0,jsx_runtime.jsx)(SidebarContent,{tabName,keyboardShortcut,showSummary,onActionPerformed,extraPanels})})};const editor=function Editor({postType,postId,templateId,settings,children,initialEdits,onActionPerformed,extraContent,extraSidebarPanels,...props}){const{post,template,hasLoadedPost}=(0,use_select.A)((select=>{const{getEntityRecord,hasFinishedResolution}=select(core_data_build_module.M_);return{post:getEntityRecord("postType",postType,postId),template:templateId?getEntityRecord("postType",constants_TEMPLATE_POST_TYPE,templateId):void 0,hasLoadedPost:hasFinishedResolution("getEntityRecord",["postType",postType,postId])}}),[postType,postId,templateId]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[hasLoadedPost&&!post&&(0,jsx_runtime.jsx)(build_module_notice.A,{status:"warning",isDismissible:!1,children:(0,i18n_build_module.__)("You attempted to edit an item that doesn't exist. Perhaps it was deleted?")}),!!post&&(0,jsx_runtime.jsxs)(ExperimentalEditorProvider,{post,__unstableTemplate:template,settings,initialEdits,useSubRegistry:!1,children:[(0,jsx_runtime.jsx)(EditorInterface,{...props,children:extraContent}),children,(0,jsx_runtime.jsx)(components_sidebar,{onActionPerformed,extraPanels:extraSidebarPanels})]})]})},{PreferenceBaseOption:enable_publish_sidebar_PreferenceBaseOption}=lock_unlock_unlock(privateApis),enable_publish_sidebar=(0,higher_order_compose.A)((0,with_select.A)((select=>({isChecked:select(store_store).isPublishSidebarEnabled()}))),(0,with_dispatch.A)((dispatch=>{const{enablePublishSidebar,disablePublishSidebar}=dispatch(store_store);return{onChange:isEnabled=>isEnabled?enablePublishSidebar():disablePublishSidebar()}})))(enable_publish_sidebar_PreferenceBaseOption);const checklist=function BlockTypesChecklist({blockTypes,value,onItemChange}){return(0,jsx_runtime.jsx)("ul",{className:"editor-block-manager__checklist",children:blockTypes.map((blockType=>(0,jsx_runtime.jsxs)("li",{className:"editor-block-manager__checklist-item",children:[(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,label:blockType.title,checked:value.includes(blockType.name),onChange:(...args)=>onItemChange(blockType.name,...args)}),(0,jsx_runtime.jsx)(build_module.th,{icon:blockType.icon})]},blockType.name)))})};const block_manager_category=function BlockManagerCategory({title,blockTypes}){const instanceId=(0,use_instance_id.A)(BlockManagerCategory),{allowedBlockTypes,hiddenBlockTypes}=(0,use_select.A)((select=>{const{getEditorSettings}=select(store_store),{get}=select(store.M);return{allowedBlockTypes:getEditorSettings().allowedBlockTypes,hiddenBlockTypes:get("core","hiddenBlockTypes")}}),[]),filteredBlockTypes=(0,react.useMemo)((()=>!0===allowedBlockTypes?blockTypes:blockTypes.filter((({name})=>allowedBlockTypes?.includes(name)))),[allowedBlockTypes,blockTypes]),{showBlockTypes,hideBlockTypes}=lock_unlock_unlock((0,use_dispatch.A)(store_store)),toggleVisible=(0,react.useCallback)(((blockName,nextIsChecked)=>{nextIsChecked?showBlockTypes(blockName):hideBlockTypes(blockName)}),[showBlockTypes,hideBlockTypes]),toggleAllVisible=(0,react.useCallback)((nextIsChecked=>{const blockNames=blockTypes.map((({name})=>name));nextIsChecked?showBlockTypes(blockNames):hideBlockTypes(blockNames)}),[blockTypes,showBlockTypes,hideBlockTypes]);if(!filteredBlockTypes.length)return null;const checkedBlockNames=filteredBlockTypes.map((({name})=>name)).filter((type=>!(null!=hiddenBlockTypes?hiddenBlockTypes:[]).includes(type))),titleId="editor-block-manager__category-title-"+instanceId,isAllChecked=checkedBlockNames.length===filteredBlockTypes.length,isIndeterminate=!isAllChecked&&checkedBlockNames.length>0;return(0,jsx_runtime.jsxs)("div",{role:"group","aria-labelledby":titleId,className:"editor-block-manager__category",children:[(0,jsx_runtime.jsx)(checkbox_control.A,{__nextHasNoMarginBottom:!0,checked:isAllChecked,onChange:toggleAllVisible,className:"editor-block-manager__category-title",indeterminate:isIndeterminate,label:(0,jsx_runtime.jsx)("span",{id:titleId,children:title})}),(0,jsx_runtime.jsx)(checklist,{blockTypes:filteredBlockTypes,value:checkedBlockNames,onItemChange:toggleVisible})]})};function BlockManager(){const debouncedSpeak=(0,use_debounce.A)(a11y_build_module.L,500),[search,setSearch]=(0,react.useState)(""),{showBlockTypes}=lock_unlock_unlock((0,use_dispatch.A)(store_store)),{blockTypes,categories,hasBlockSupport,isMatchingSearchTerm,numberOfHiddenBlocks}=(0,use_select.A)((select=>{var _select$get;const _blockTypes=select(blocks_build_module.M_).getBlockTypes(),hiddenBlockTypes=(null!==(_select$get=select(store.M).get("core","hiddenBlockTypes"))&&void 0!==_select$get?_select$get:[]).filter((hiddenBlock=>_blockTypes.some((registeredBlock=>registeredBlock.name===hiddenBlock))));return{blockTypes:_blockTypes,categories:select(blocks_build_module.M_).getCategories(),hasBlockSupport:select(blocks_build_module.M_).hasBlockSupport,isMatchingSearchTerm:select(blocks_build_module.M_).isMatchingSearchTerm,numberOfHiddenBlocks:Array.isArray(hiddenBlockTypes)&&hiddenBlockTypes.length}}),[]);const filteredBlockTypes=blockTypes.filter((blockType=>hasBlockSupport(blockType,"inserter",!0)&&(!search||isMatchingSearchTerm(blockType,search))&&(!blockType.parent||blockType.parent.includes("core/post-content"))));return(0,react.useEffect)((()=>{if(!search)return;const count=filteredBlockTypes.length,resultsFoundMessage=(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage)}),[filteredBlockTypes?.length,search,debouncedSpeak]),(0,jsx_runtime.jsxs)("div",{className:"editor-block-manager__content",children:[!!numberOfHiddenBlocks&&(0,jsx_runtime.jsxs)("div",{className:"editor-block-manager__disabled-blocks-count",children:[(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d block is hidden.","%d blocks are hidden.",numberOfHiddenBlocks),numberOfHiddenBlocks),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"link",onClick:()=>function enableAllBlockTypes(newBlockTypes){const blockNames=newBlockTypes.map((({name})=>name));showBlockTypes(blockNames)}(filteredBlockTypes),children:(0,i18n_build_module.__)("Reset")})]}),(0,jsx_runtime.jsx)(search_control.A,{__nextHasNoMarginBottom:!0,label:(0,i18n_build_module.__)("Search for a block"),placeholder:(0,i18n_build_module.__)("Search for a block"),value:search,onChange:nextSearch=>setSearch(nextSearch),className:"editor-block-manager__search"}),(0,jsx_runtime.jsxs)("div",{tabIndex:"0",role:"region","aria-label":(0,i18n_build_module.__)("Available block types"),className:"editor-block-manager__results",children:[0===filteredBlockTypes.length&&(0,jsx_runtime.jsx)("p",{className:"editor-block-manager__no-results",children:(0,i18n_build_module.__)("No blocks found.")}),categories.map((category=>(0,jsx_runtime.jsx)(block_manager_category,{title:category.title,blockTypes:filteredBlockTypes.filter((blockType=>blockType.category===category.slug))},category.slug))),(0,jsx_runtime.jsx)(block_manager_category,{title:(0,i18n_build_module.__)("Uncategorized"),blockTypes:filteredBlockTypes.filter((({category})=>!category))})]})]})}const{PreferencesModal:preferences_modal_PreferencesModal,PreferencesModalTabs:preferences_modal_PreferencesModalTabs,PreferencesModalSection,PreferenceToggleControl:preferences_modal_PreferenceToggleControl}=lock_unlock_unlock(privateApis);const CONTENT="content",pattern_overrides={name:"core/pattern-overrides",getValues({select,clientId,context,bindings}){const patternOverridesContent=context["pattern/overrides"],{getBlockAttributes}=select(build_module.M_),currentBlockAttributes=getBlockAttributes(clientId),overridesValues={};for(const attributeName of Object.keys(bindings)){const overridableValue=patternOverridesContent?.[currentBlockAttributes?.metadata?.name]?.[attributeName];void 0!==overridableValue?overridesValues[attributeName]=""===overridableValue?void 0:overridableValue:overridesValues[attributeName]=currentBlockAttributes[attributeName]}return overridesValues},setValues({select,dispatch,clientId,bindings}){const{getBlockAttributes,getBlockParentsByBlockName,getBlocks}=select(build_module.M_),currentBlockAttributes=getBlockAttributes(clientId),blockName=currentBlockAttributes?.metadata?.name;if(!blockName)return;const[patternClientId]=getBlockParentsByBlockName(clientId,"core/block",!0),attributes=Object.entries(bindings).reduce(((attrs,[key,{newValue}])=>(attrs[key]=newValue,attrs)),{});if(!patternClientId){const syncBlocksWithSameName=blocks=>{for(const block of blocks)block.attributes?.metadata?.name===blockName&&dispatch(build_module.M_).updateBlockAttributes(block.clientId,attributes),syncBlocksWithSameName(block.innerBlocks)};return void syncBlocksWithSameName(getBlocks())}const currentBindingValue=getBlockAttributes(patternClientId)?.content;dispatch(build_module.M_).updateBlockAttributes(patternClientId,{[CONTENT]:{...currentBindingValue,[blockName]:{...currentBindingValue?.[blockName],...Object.entries(attributes).reduce(((acc,[key,value])=>(acc[key]=void 0===value?"":value,acc)),{})}}})},canUserEditValue:()=>!0};function getPostMetaFields(select,context){const{getEditedEntityRecord}=select(core_data_build_module.M_),{getRegisteredPostMeta}=lock_unlock_unlock(select(core_data_build_module.M_));let entityMetaValues;context?.postType&&context?.postId&&(entityMetaValues=getEditedEntityRecord("postType",context?.postType,context?.postId).meta);const registeredFields=getRegisteredPostMeta(context?.postType),metaFields={};return Object.entries(registeredFields||{}).forEach((([key,props])=>{var _entityMetaValues$key;"footnotes"!==key&&"_"!==key.charAt(0)&&(metaFields[key]={label:props.title||key,value:null!==(_entityMetaValues$key=entityMetaValues?.[key])&&void 0!==_entityMetaValues$key?_entityMetaValues$key:props.default||void 0,type:props.type})})),Object.keys(metaFields||{}).length?metaFields:null}const post_meta={name:"core/post-meta",getValues({select,context,bindings}){const metaFields=getPostMetaFields(select,context),newValues={};for(const[attributeName,source]of Object.entries(bindings)){var _ref;const fieldKey=source.args.key,{value:fieldValue,label:fieldLabel}=metaFields?.[fieldKey]||{};newValues[attributeName]=null!==(_ref=null!=fieldValue?fieldValue:fieldLabel)&&void 0!==_ref?_ref:fieldKey}return newValues},setValues({dispatch,context,bindings}){const newMeta={};Object.values(bindings).forEach((({args,newValue})=>{newMeta[args.key]=newValue})),dispatch(core_data_build_module.M_).editEntityRecord("postType",context?.postType,context?.postId,{meta:newMeta})},canUserEditValue({select,context,args}){if(context?.query||context?.queryId)return!1;if("wp_template"===(context?.postType||select(store_store).getCurrentPostType()))return!1;const fieldValue=getPostMetaFields(select,context)?.[args.key]?.value;if(void 0===fieldValue)return!1;if(select(store_store).getEditorSettings().enableCustomFields)return!1;return!!select(core_data_build_module.M_).canUser("update",{kind:"postType",name:context?.postType,id:context?.postId})},getFieldsList:({select,context})=>getPostMetaFields(select,context)};const{store:interfaceStore,...remainingInterfaceApis}=interface_build_module_namespaceObject,private_apis_privateApis={};lock(private_apis_privateApis,{CreateTemplatePartModal,BackButton:back_button,EntitiesSavedStatesExtensible,Editor:editor,EditorContentSlotFill:content_slot_fill,GlobalStylesProvider:function GlobalStylesProvider({children}){const context=useGlobalStylesContext();return context.isReady?(0,jsx_runtime.jsx)(global_styles_provider_GlobalStylesContext.Provider,{value:context,children}):null},mergeBaseAndUserConfigs,PluginPostExcerpt:post_excerpt_plugin,PostCardPanel,PreferencesModal:function EditorPreferencesModal({extraSections={}}){const isLargeViewport=(0,use_viewport_match.A)("medium"),{isActive,showBlockBreadcrumbsOption}=(0,use_select.A)((select=>{const{getEditorSettings}=select(store_store),{get}=select(store.M),{isModalActive}=select(interface_build_module_store_store),isRichEditingEnabled=getEditorSettings().richEditingEnabled;return{showBlockBreadcrumbsOption:!get("core","distractionFree")&&isLargeViewport&&isRichEditingEnabled,isActive:isModalActive("editor/preferences")}}),[isLargeViewport]),{closeModal}=(0,use_dispatch.A)(interface_build_module_store_store),{setIsListViewOpened,setIsInserterOpened}=(0,use_dispatch.A)(store_store),{set:setPreference}=(0,use_dispatch.A)(store.M),hasStarterPatterns=!!useStartPatterns().length,sections=(0,react.useMemo)((()=>[{name:"general",tabLabel:(0,i18n_build_module.__)("General"),content:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(PreferencesModalSection,{title:(0,i18n_build_module.__)("Interface"),children:[(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core",featureName:"showListViewByDefault",help:(0,i18n_build_module.__)("Opens the List View sidebar by default."),label:(0,i18n_build_module.__)("Always open List View")}),showBlockBreadcrumbsOption&&(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core",featureName:"showBlockBreadcrumbs",help:(0,i18n_build_module.__)("Display the block hierarchy trail at the bottom of the editor."),label:(0,i18n_build_module.__)("Show block breadcrumbs")}),(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core",featureName:"allowRightClickOverrides",help:(0,i18n_build_module.__)("Allows contextual List View menus via right-click, overriding browser defaults."),label:(0,i18n_build_module.__)("Allow right-click contextual menus")}),hasStarterPatterns&&(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core",featureName:"enableChoosePatternModal",help:(0,i18n_build_module.__)("Shows starter patterns when creating a new page."),label:(0,i18n_build_module.__)("Show starter patterns")})]}),(0,jsx_runtime.jsxs)(PreferencesModalSection,{title:(0,i18n_build_module.__)("Document settings"),description:(0,i18n_build_module.__)("Select what settings are shown in the document panel."),children:[(0,jsx_runtime.jsx)(enable_plugin_document_setting_panel.Slot,{}),(0,jsx_runtime.jsx)(post_taxonomies,{taxonomyWrapper:(content,taxonomy)=>(0,jsx_runtime.jsx)(enable_panel,{label:taxonomy.labels.menu_name,panelName:`taxonomy-panel-${taxonomy.slug}`})}),(0,jsx_runtime.jsx)(post_featured_image_check,{children:(0,jsx_runtime.jsx)(enable_panel,{label:(0,i18n_build_module.__)("Featured image"),panelName:"featured-image"})}),(0,jsx_runtime.jsx)(post_excerpt_check,{children:(0,jsx_runtime.jsx)(enable_panel,{label:(0,i18n_build_module.__)("Excerpt"),panelName:"post-excerpt"})}),(0,jsx_runtime.jsx)(post_type_support_check,{supportKeys:["comments","trackbacks"],children:(0,jsx_runtime.jsx)(enable_panel,{label:(0,i18n_build_module.__)("Discussion"),panelName:"discussion-panel"})}),(0,jsx_runtime.jsx)(page_attributes_check,{children:(0,jsx_runtime.jsx)(enable_panel,{label:(0,i18n_build_module.__)("Page attributes"),panelName:"page-attributes"})})]}),isLargeViewport&&(0,jsx_runtime.jsx)(PreferencesModalSection,{title:(0,i18n_build_module.__)("Publishing"),children:(0,jsx_runtime.jsx)(enable_publish_sidebar,{help:(0,i18n_build_module.__)("Review settings, such as visibility and tags."),label:(0,i18n_build_module.__)("Enable pre-publish checks")})}),extraSections?.general]})},{name:"appearance",tabLabel:(0,i18n_build_module.__)("Appearance"),content:(0,jsx_runtime.jsxs)(PreferencesModalSection,{title:(0,i18n_build_module.__)("Appearance"),description:(0,i18n_build_module.__)("Customize the editor interface to suit your needs."),children:[(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core",featureName:"fixedToolbar",onToggle:()=>setPreference("core","distractionFree",!1),help:(0,i18n_build_module.__)("Access all block and document tools in a single place."),label:(0,i18n_build_module.__)("Top toolbar")}),(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core",featureName:"distractionFree",onToggle:()=>{setPreference("core","fixedToolbar",!0),setIsInserterOpened(!1),setIsListViewOpened(!1)},help:(0,i18n_build_module.__)("Reduce visual distractions by hiding the toolbar and other elements to focus on writing."),label:(0,i18n_build_module.__)("Distraction free")}),(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core",featureName:"focusMode",help:(0,i18n_build_module.__)("Highlights the current block and fades other content."),label:(0,i18n_build_module.__)("Spotlight mode")}),extraSections?.appearance]})},{name:"accessibility",tabLabel:(0,i18n_build_module.__)("Accessibility"),content:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PreferencesModalSection,{title:(0,i18n_build_module.__)("Navigation"),description:(0,i18n_build_module.__)("Optimize the editing experience for enhanced control."),children:(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core",featureName:"keepCaretInsideBlock",help:(0,i18n_build_module.__)("Keeps the text cursor within the block boundaries, aiding users with screen readers by preventing unintentional cursor movement outside the block."),label:(0,i18n_build_module.__)("Contain text cursor inside block")})}),(0,jsx_runtime.jsx)(PreferencesModalSection,{title:(0,i18n_build_module.__)("Interface"),children:(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core",featureName:"showIconLabels",label:(0,i18n_build_module.__)("Show button text labels"),help:(0,i18n_build_module.__)("Show text instead of icons on buttons across the interface.")})})]})},{name:"blocks",tabLabel:(0,i18n_build_module.__)("Blocks"),content:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PreferencesModalSection,{title:(0,i18n_build_module.__)("Inserter"),children:(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core",featureName:"mostUsedBlocks",help:(0,i18n_build_module.__)("Adds a category with the most frequently used blocks in the inserter."),label:(0,i18n_build_module.__)("Show most used blocks")})}),(0,jsx_runtime.jsx)(PreferencesModalSection,{title:(0,i18n_build_module.__)("Manage block visibility"),description:(0,i18n_build_module.__)("Disable blocks that you don't want to appear in the inserter. They can always be toggled back on later."),children:(0,jsx_runtime.jsx)(BlockManager,{})})]})},window.__experimentalMediaProcessing&&{name:"media",tabLabel:(0,i18n_build_module.__)("Media"),content:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(PreferencesModalSection,{title:(0,i18n_build_module.__)("General"),description:(0,i18n_build_module.__)("Customize options related to the media upload flow."),children:[(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core/media",featureName:"optimizeOnUpload",help:(0,i18n_build_module.__)("Compress media items before uploading to the server."),label:(0,i18n_build_module.__)("Pre-upload compression")}),(0,jsx_runtime.jsx)(preferences_modal_PreferenceToggleControl,{scope:"core/media",featureName:"requireApproval",help:(0,i18n_build_module.__)("Require approval step when optimizing existing media."),label:(0,i18n_build_module.__)("Approval step")})]})})}].filter(Boolean)),[showBlockBreadcrumbsOption,extraSections,setIsInserterOpened,setIsListViewOpened,setPreference,isLargeViewport,hasStarterPatterns]);return isActive?(0,jsx_runtime.jsx)(preferences_modal_PreferencesModal,{closeModal,children:(0,jsx_runtime.jsx)(preferences_modal_PreferencesModalTabs,{sections})}):null},usePostActions,ToolsMoreMenuGroup:tools_more_menu_group,ViewMoreMenuGroup:view_more_menu_group,ResizableEditor:resizable_editor,registerCoreBlockBindingsSources:function registerCoreBlockBindingsSources(){(0,blocks_build_module.ss)(pattern_overrides),(0,blocks_build_module.ss)(post_meta)},interfaceStore,...remainingInterfaceApis});var use_navigator=__webpack_require__("./packages/components/build-module/navigator/use-navigator.js");const card_media_component=(0,context_connect.KZ)((function UnconnectedCardMedia(props,forwardedRef){const cardMediaProps=function useCardMedia(props){const{className,...otherProps}=(0,use_context_system.A)(props,"CardMedia"),cx=(0,use_cx.l)();return{...otherProps,className:(0,react.useMemo)((()=>cx(Media,borderRadius,"components-card__media",className)),[className,cx])}}(props);return(0,jsx_runtime.jsx)(view_component.A,{...cardMediaProps,ref:forwardedRef})}),"CardMedia");var LOI6GHIP=__webpack_require__("./packages/components/node_modules/@ariakit/react-core/esm/__chunks/LOI6GHIP.js"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),space=__webpack_require__("./packages/components/build-module/utils/space.js"),rtl=__webpack_require__("./packages/components/build-module/utils/rtl.js");const MARGIN_DIRECTIONS={vertical:{start:"marginLeft",end:"marginRight"},horizontal:{start:"marginTop",end:"marginBottom"}},renderMargin=({"aria-orientation":orientation="horizontal",margin,marginStart,marginEnd})=>(0,emotion_react_browser_esm.AH)((0,rtl.h)({[MARGIN_DIRECTIONS[orientation].start]:(0,space.x)(null!=marginStart?marginStart:margin),[MARGIN_DIRECTIONS[orientation].end]:(0,space.x)(null!=marginEnd?marginEnd:margin)})(),"","","","");var _ref={name:"1u4hpl4",styles:"display:inline"};const renderDisplay=({"aria-orientation":orientation="horizontal"})=>"vertical"===orientation?_ref:void 0,renderBorder=({"aria-orientation":orientation="horizontal"})=>(0,emotion_react_browser_esm.AH)({["vertical"===orientation?"borderRight":"borderBottom"]:"1px solid currentColor"},"","","",""),renderSize=({"aria-orientation":orientation="horizontal"})=>(0,emotion_react_browser_esm.AH)({height:"vertical"===orientation?"auto":0,width:"vertical"===orientation?0:"auto"},"","","",""),DividerView=(0,emotion_styled_base_browser_esm.A)("hr",{target:"e19on6iw0"})("border:0;margin:0;",renderDisplay," ",renderBorder," ",renderSize," ",renderMargin,";");const divider_component=(0,context_connect.KZ)((function UnconnectedDivider(props,forwardedRef){const contextProps=(0,use_context_system.A)(props,"Divider");return(0,jsx_runtime.jsx)(LOI6GHIP.w,{render:(0,jsx_runtime.jsx)(DividerView,{}),...contextProps,ref:forwardedRef})}),"Divider");const card_divider_component=(0,context_connect.KZ)((function UnconnectedCardDivider(props,forwardedRef){const dividerProps=function useCardDivider(props){const{className,...otherProps}=(0,use_context_system.A)(props,"CardDivider"),cx=(0,use_cx.l)();return{...otherProps,className:(0,react.useMemo)((()=>cx(Divider,borderColor,"components-card__divider",className)),[className,cx])}}(props);return(0,jsx_runtime.jsx)(divider_component,{...dividerProps,ref:forwardedRef})}),"CardDivider");function IconWithCurrentColor({className,...props}){return(0,jsx_runtime.jsx)(build_module_icon.A,{className:(0,clsx.A)(className,"edit-site-global-styles-icon-with-current-color"),...props})}function GenericNavigationButton({icon,children,...props}){return(0,jsx_runtime.jsxs)(item_component.A,{...props,children:[icon&&(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-start",children:[(0,jsx_runtime.jsx)(IconWithCurrentColor,{icon,size:24}),(0,jsx_runtime.jsx)(flex_item_component.A,{children})]}),!icon&&children]})}function NavigationButtonAsItem(props){return(0,jsx_runtime.jsx)(build_module_navigator.m.Button,{as:GenericNavigationButton,...props})}function NavigationBackButtonAsItem(props){return(0,jsx_runtime.jsx)(build_module_navigator.m.BackButton,{as:GenericNavigationButton,...props})}IconWithCurrentColor.displayName="IconWithCurrentColor",IconWithCurrentColor.__docgenInfo={description:"",methods:[],displayName:"IconWithCurrentColor"},GenericNavigationButton.displayName="GenericNavigationButton",NavigationButtonAsItem.displayName="NavigationButtonAsItem",NavigationBackButtonAsItem.displayName="NavigationBackButtonAsItem",NavigationButtonAsItem.__docgenInfo={description:"",methods:[],displayName:"NavigationButtonAsItem"},NavigationBackButtonAsItem.__docgenInfo={description:"",methods:[],displayName:"NavigationBackButtonAsItem"};const library_typography=(0,jsx_runtime.jsx)(svg.t4,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)(svg.wA,{d:"M6.9 7L3 17.8h1.7l1-2.8h4.1l1 2.8h1.7L8.6 7H6.9zm-.7 6.6l1.5-4.3 1.5 4.3h-3zM21.6 17c-.1.1-.2.2-.3.2-.1.1-.2.1-.4.1s-.3-.1-.4-.2c-.1-.1-.1-.3-.1-.6V12c0-.5 0-1-.1-1.4-.1-.4-.3-.7-.5-1-.2-.2-.5-.4-.9-.5-.4 0-.8-.1-1.3-.1s-1 .1-1.4.2c-.4.1-.7.3-1 .4-.2.2-.4.3-.6.5-.1.2-.2.4-.2.7 0 .3.1.5.2.8.2.2.4.3.8.3.3 0 .6-.1.8-.3.2-.2.3-.4.3-.7 0-.3-.1-.5-.2-.7-.2-.2-.4-.3-.6-.4.2-.2.4-.3.7-.4.3-.1.6-.1.8-.1.3 0 .6 0 .8.1.2.1.4.3.5.5.1.2.2.5.2.9v1.1c0 .3-.1.5-.3.6-.2.2-.5.3-.9.4-.3.1-.7.3-1.1.4-.4.1-.8.3-1.1.5-.3.2-.6.4-.8.7-.2.3-.3.7-.3 1.2 0 .6.2 1.1.5 1.4.3.4.9.5 1.6.5.5 0 1-.1 1.4-.3.4-.2.8-.6 1.1-1.1 0 .4.1.7.3 1 .2.3.6.4 1.2.4.4 0 .7-.1.9-.2.2-.1.5-.3.7-.4h-.3zm-3-.9c-.2.4-.5.7-.8.8-.3.2-.6.2-.8.2-.4 0-.6-.1-.9-.3-.2-.2-.3-.6-.3-1.1 0-.5.1-.9.3-1.2s.5-.5.8-.7c.3-.2.7-.3 1-.5.3-.1.6-.3.7-.6v3.4z"})});var color=__webpack_require__("./packages/icons/build-module/library/color.js");const library_background=(0,jsx_runtime.jsx)(svg.t4,{width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)(svg.wA,{fillRule:"evenodd",clipRule:"evenodd",d:"M11.53 4.47a.75.75 0 1 0-1.06 1.06l8 8a.75.75 0 1 0 1.06-1.06l-8-8Zm5 1a.75.75 0 1 0-1.06 1.06l2 2a.75.75 0 1 0 1.06-1.06l-2-2Zm-11.06 10a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06Zm.06-5a.75.75 0 0 0-1.06 1.06l8 8a.75.75 0 1 0 1.06-1.06l-8-8Zm-.06-3a.75.75 0 0 1 1.06 0l10 10a.75.75 0 1 1-1.06 1.06l-10-10a.75.75 0 0 1 0-1.06Zm3.06-2a.75.75 0 0 0-1.06 1.06l10 10a.75.75 0 1 0 1.06-1.06l-10-10Z"})});var library_shadow=__webpack_require__("./packages/icons/build-module/library/shadow.js");const{lock:src_lock_unlock_lock,unlock:src_lock_unlock_unlock}=(0,implementation.yf)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/edit-site"),{useHasDimensionsPanel,useHasTypographyPanel,useHasColorPanel,useGlobalSetting,useSettingsForBlockElement,useHasBackgroundPanel}=src_lock_unlock_unlock(build_module.jb);function RootMenu(){const[rawSettings]=useGlobalSetting(""),settings=useSettingsForBlockElement(rawSettings),hasBackgroundPanel=useHasBackgroundPanel(rawSettings),hasTypographyPanel=useHasTypographyPanel(settings),hasColorPanel=useHasColorPanel(settings),hasLayoutPanel=useHasDimensionsPanel(settings);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(item_group_component.A,{children:[hasTypographyPanel&&(0,jsx_runtime.jsx)(NavigationButtonAsItem,{icon:library_typography,path:"/typography",children:(0,i18n_build_module.__)("Typography")}),hasColorPanel&&(0,jsx_runtime.jsx)(NavigationButtonAsItem,{icon:color.A,path:"/colors",children:(0,i18n_build_module.__)("Colors")}),hasBackgroundPanel&&(0,jsx_runtime.jsx)(NavigationButtonAsItem,{icon:library_background,path:"/background","aria-label":(0,i18n_build_module.__)("Background styles"),children:(0,i18n_build_module.__)("Background")}),(0,jsx_runtime.jsx)(NavigationButtonAsItem,{icon:library_shadow.A,path:"/shadows",children:(0,i18n_build_module.__)("Shadows")}),hasLayoutPanel&&(0,jsx_runtime.jsx)(NavigationButtonAsItem,{icon:layout.A,path:"/layout",children:(0,i18n_build_module.__)("Layout")})]})})}const root_menu=RootMenu;RootMenu.__docgenInfo={description:"",methods:[],displayName:"RootMenu"};var colord=__webpack_require__("./node_modules/colord/index.mjs"),a11y=__webpack_require__("./node_modules/colord/plugins/a11y.mjs");const{useGlobalSetting:hooks_useGlobalSetting,useGlobalStyle}=src_lock_unlock_unlock(build_module.jb);function useStylesPreviewColors(){const[textColor="black"]=useGlobalStyle("color.text"),[backgroundColor="white"]=useGlobalStyle("color.background"),[headingColor=textColor]=useGlobalStyle("elements.h1.color.text"),[linkColor=headingColor]=useGlobalStyle("elements.link.color.text"),[buttonBackgroundColor=linkColor]=useGlobalStyle("elements.button.color.background"),[coreColors]=hooks_useGlobalSetting("color.palette.core"),[themeColors]=hooks_useGlobalSetting("color.palette.theme"),[customColors]=hooks_useGlobalSetting("color.palette.custom"),paletteColors=(null!=themeColors?themeColors:[]).concat(null!=customColors?customColors:[]).concat(null!=coreColors?coreColors:[]),textColorObject=paletteColors.filter((({color})=>color===textColor)),buttonBackgroundColorObject=paletteColors.filter((({color})=>color===buttonBackgroundColor)),highlightedColors=textColorObject.concat(buttonBackgroundColorObject).concat(paletteColors).filter((({color})=>color!==backgroundColor)).slice(0,2);return{paletteColors,highlightedColors}}function formatFontFamily(input){const regex=/^(?!generic\([ a-zA-Z\-]+\)$)(?!^[a-zA-Z\-]+$).+/,output=input.trim(),formatItem=item=>(item=item.trim()).match(regex)?`"${item=item.replace(/^["']|["']$/g,"")}"`:item;return output.includes(",")?output.split(",").map(formatItem).filter((item=>""!==item)).join(", "):formatItem(output)}function formatFontFaceName(input){if(!input)return"";let output=input.trim();return output.includes(",")&&(output=output.split(",").find((item=>""!==item.trim())).trim()),output=output.replace(/^["']|["']$/g,""),window.navigator.userAgent.toLowerCase().includes("firefox")&&(output=`"${output}"`),output}function getFamilyPreviewStyle(family){const style={fontFamily:formatFontFamily(family.fontFamily)};if(!Array.isArray(family.fontFace))return style.fontWeight="400",style.fontStyle="normal",style;if(family.fontFace){const normalFaces=family.fontFace.filter((face=>face?.fontStyle&&"normal"===face.fontStyle.toLowerCase()));if(normalFaces.length>0){style.fontStyle="normal";const normalWeights=function extractFontWeights(fontFaces){const result=[];return fontFaces.forEach((face=>{const weights=String(face.fontWeight).split(" ");if(2===weights.length){const start=parseInt(weights[0]),end=parseInt(weights[1]);for(let i=start;i<=end;i+=100)result.push(i)}else 1===weights.length&&result.push(parseInt(weights[0]))})),result}(normalFaces),nearestWeight=function findNearest(input,numbers){return 0===numbers.length?null:(numbers.sort(((a,b)=>Math.abs(input-a)-Math.abs(input-b))),numbers[0])}(400,normalWeights);style.fontWeight=String(nearestWeight)||"400"}else style.fontStyle=family.fontFace.length&&family.fontFace[0].fontStyle||"normal",style.fontWeight=family.fontFace.length&&String(family.fontFace[0].fontWeight)||"400"}return style}function getVariationClassName(variation){return variation?`is-style-${variation}`:""}function getNewIndexFromPresets(presets,slugPrefix){const nameRegex=new RegExp(`^${slugPrefix}([\\d]+)$`);return presets.reduce(((currentHighest,preset)=>{if("string"==typeof preset?.slug){const matches=preset?.slug.match(nameRegex);if(matches){const id=parseInt(matches[1],10);if(id>currentHighest)return id}}return currentHighest}),0)+1}function getFontFamilyFromSetting(fontFamilies,setting){if(!Array.isArray(fontFamilies)||!setting)return null;const fontFamilyVariable=setting.replace("var(","").replace(")",""),fontFamilySlug=fontFamilyVariable?.split("--").slice(-1)[0];return fontFamilies.find((fontFamily=>fontFamily.slug===fontFamilySlug))}(0,colord.X$)([a11y.A]);const{GlobalStylesContext:typography_example_GlobalStylesContext}=src_lock_unlock_unlock(build_module.jb),{mergeBaseAndUserConfigs:typography_example_mergeBaseAndUserConfigs}=src_lock_unlock_unlock(private_apis_privateApis);function PreviewTypography({fontSize,variation}){const{base}=(0,react.useContext)(typography_example_GlobalStylesContext);let config=base;variation&&(config=typography_example_mergeBaseAndUserConfigs(base,variation));const[bodyFontFamilies,headingFontFamilies]=function getFontFamilies(themeJson){const themeFontFamilies=themeJson?.settings?.typography?.fontFamilies?.theme,customFontFamilies=themeJson?.settings?.typography?.fontFamilies?.custom;let fontFamilies=[];themeFontFamilies&&customFontFamilies?fontFamilies=[...themeFontFamilies,...customFontFamilies]:themeFontFamilies?fontFamilies=themeFontFamilies:customFontFamilies&&(fontFamilies=customFontFamilies);const bodyFontFamilySetting=themeJson?.styles?.typography?.fontFamily,bodyFontFamily=getFontFamilyFromSetting(fontFamilies,bodyFontFamilySetting),headingFontFamilySetting=themeJson?.styles?.elements?.heading?.typography?.fontFamily;let headingFontFamily;return headingFontFamily=headingFontFamilySetting?getFontFamilyFromSetting(fontFamilies,themeJson?.styles?.elements?.heading?.typography?.fontFamily):bodyFontFamily,[bodyFontFamily,headingFontFamily]}(config),bodyPreviewStyle=bodyFontFamilies?getFamilyPreviewStyle(bodyFontFamilies):{},headingPreviewStyle=headingFontFamilies?getFamilyPreviewStyle(headingFontFamilies):{};return fontSize&&(bodyPreviewStyle.fontSize=fontSize,headingPreviewStyle.fontSize=fontSize),(0,jsx_runtime.jsxs)(motion.P.div,{animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:.3,type:"tween"},style:{textAlign:"center"},children:[(0,jsx_runtime.jsx)("span",{style:headingPreviewStyle,children:(0,i18n_build_module._x)("A","Uppercase letter A")}),(0,jsx_runtime.jsx)("span",{style:bodyPreviewStyle,children:(0,i18n_build_module._x)("a","Lowercase letter A")})]})}function HighlightedColors({normalizedColorSwatchSize,ratio}){const{highlightedColors}=useStylesPreviewColors(),scaledSwatchSize=normalizedColorSwatchSize*ratio;return highlightedColors.map((({slug,color},index)=>(0,jsx_runtime.jsx)(motion.P.div,{style:{height:scaledSwatchSize,width:scaledSwatchSize,background:color,borderRadius:scaledSwatchSize/2},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:1===index?.2:.1}},`${slug}-${index}`)))}PreviewTypography.displayName="PreviewTypography",PreviewTypography.__docgenInfo={description:"",methods:[],displayName:"PreviewTypography"};var use_throttle=__webpack_require__("./packages/compose/build-module/hooks/use-throttle/index.js");const{useGlobalStyle:preview_iframe_useGlobalStyle,useGlobalStylesOutput}=src_lock_unlock_unlock(build_module.jb),THROTTLE_OPTIONS={leading:!0,trailing:!0};function PreviewIframe({children,label,isFocused,withHoverView}){const[backgroundColor="white"]=preview_iframe_useGlobalStyle("color.background"),[gradientValue]=preview_iframe_useGlobalStyle("color.gradient"),[styles]=useGlobalStylesOutput(),disableMotion=(0,use_reduced_motion.A)(),[isHovered,setIsHovered]=(0,react.useState)(!1),[containerResizeListener,{width}]=(0,use_resize_observer.A)(),[throttledWidth,setThrottledWidthState]=(0,react.useState)(width),[ratioState,setRatioState]=(0,react.useState)(),setThrottledWidth=(0,use_throttle.A)(setThrottledWidthState,250,THROTTLE_OPTIONS);(0,react.useLayoutEffect)((()=>{width&&setThrottledWidth(width)}),[width,setThrottledWidth]),(0,react.useLayoutEffect)((()=>{const newRatio=throttledWidth?throttledWidth/248:1,ratioDiff=newRatio-(ratioState||0);!(Math.abs(ratioDiff)>.1)&&ratioState||setRatioState(newRatio)}),[throttledWidth,ratioState]);const ratio=ratioState||(width?width/248:1),editorStyles=(0,react.useMemo)((()=>styles?[...styles,{css:"html{overflow:hidden}body{min-width: 0;padding: 0;border: none;cursor: pointer;}",isGlobalStyles:!0}]:styles),[styles]),isReady=!!width;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{style:{position:"relative"},children:containerResizeListener}),isReady&&(0,jsx_runtime.jsxs)(build_module.tX,{className:"edit-site-global-styles-preview__iframe",style:{height:152*ratio},onMouseEnter:()=>setIsHovered(!0),onMouseLeave:()=>setIsHovered(!1),tabIndex:-1,children:[(0,jsx_runtime.jsx)(build_module.ui,{styles:editorStyles}),(0,jsx_runtime.jsx)(motion.P.div,{style:{height:152*ratio,width:"100%",background:null!=gradientValue?gradientValue:backgroundColor,cursor:withHoverView?"pointer":void 0},initial:"start",animate:(isHovered||isFocused)&&!disableMotion&&label?"hover":"start",children:[].concat(children).map(((child,key)=>child({ratio,key})))})]})]})}PreviewIframe.__docgenInfo={description:"",methods:[],displayName:"PreviewIframe"};const{useGlobalStyle:preview_styles_useGlobalStyle}=src_lock_unlock_unlock(build_module.jb),firstFrameVariants={start:{scale:1,opacity:1},hover:{scale:0,opacity:0}},midFrameVariants={hover:{opacity:1},start:{opacity:.5}},secondFrameVariants={hover:{scale:1,opacity:1},start:{scale:0,opacity:0}},PreviewStyles=({label,isFocused,withHoverView,variation})=>{const[fontWeight]=preview_styles_useGlobalStyle("typography.fontWeight"),[fontFamily="serif"]=preview_styles_useGlobalStyle("typography.fontFamily"),[headingFontFamily=fontFamily]=preview_styles_useGlobalStyle("elements.h1.typography.fontFamily"),[headingFontWeight=fontWeight]=preview_styles_useGlobalStyle("elements.h1.typography.fontWeight"),[textColor="black"]=preview_styles_useGlobalStyle("color.text"),[headingColor=textColor]=preview_styles_useGlobalStyle("elements.h1.color.text"),{paletteColors}=useStylesPreviewColors();return(0,jsx_runtime.jsxs)(PreviewIframe,{label,isFocused,withHoverView,children:[({ratio,key})=>(0,jsx_runtime.jsx)(motion.P.div,{variants:firstFrameVariants,style:{height:"100%",overflow:"hidden"},children:(0,jsx_runtime.jsxs)(h_stack_component.A,{spacing:10*ratio,justify:"center",style:{height:"100%",overflow:"hidden"},children:[(0,jsx_runtime.jsx)(PreviewTypography,{fontSize:65*ratio,variation}),(0,jsx_runtime.jsx)(component.A,{spacing:4*ratio,children:(0,jsx_runtime.jsx)(HighlightedColors,{normalizedColorSwatchSize:32,ratio})})]})},key),({key})=>(0,jsx_runtime.jsx)(motion.P.div,{variants:withHoverView&&midFrameVariants,style:{height:"100%",width:"100%",position:"absolute",top:0,overflow:"hidden",filter:"blur(60px)",opacity:.1},children:(0,jsx_runtime.jsx)(h_stack_component.A,{spacing:0,justify:"flex-start",style:{height:"100%",overflow:"hidden"},children:paletteColors.slice(0,4).map((({color},index)=>(0,jsx_runtime.jsx)("div",{style:{height:"100%",background:color,flexGrow:1}},index)))})},key),({ratio,key})=>(0,jsx_runtime.jsx)(motion.P.div,{variants:secondFrameVariants,style:{height:"100%",width:"100%",overflow:"hidden",position:"absolute",top:0},children:(0,jsx_runtime.jsx)(component.A,{spacing:3*ratio,justify:"center",style:{height:"100%",overflow:"hidden",padding:10*ratio,boxSizing:"border-box"},children:label&&(0,jsx_runtime.jsx)("div",{style:{fontSize:40*ratio,fontFamily:headingFontFamily,color:headingColor,fontWeight:headingFontWeight,lineHeight:"1em",textAlign:"center"},children:label})})},key)]})};PreviewStyles.displayName="PreviewStyles";const preview_styles=PreviewStyles;PreviewStyles.__docgenInfo={description:"",methods:[],displayName:"PreviewStyles"};const{useGlobalStyle:screen_root_useGlobalStyle}=src_lock_unlock_unlock(build_module.jb);function ScreenRoot(){const[customCSS]=screen_root_useGlobalStyle("css"),{hasVariations,canEditCSS}=(0,use_select.A)((select=>{const{getEntityRecord,__experimentalGetCurrentGlobalStylesId,__experimentalGetCurrentThemeGlobalStylesVariations}=select(core_data_build_module.M_),globalStylesId=__experimentalGetCurrentGlobalStylesId(),globalStyles=globalStylesId?getEntityRecord("root","globalStyles",globalStylesId):void 0;return{hasVariations:!!__experimentalGetCurrentThemeGlobalStylesVariations()?.length,canEditCSS:!!globalStyles?._links?.["wp:action-edit-css"]}}),[]);return(0,jsx_runtime.jsxs)(card_component,{size:"small",className:"edit-site-global-styles-screen-root",isRounded:!1,children:[(0,jsx_runtime.jsx)(card_body_component,{children:(0,jsx_runtime.jsxs)(component.A,{spacing:4,children:[(0,jsx_runtime.jsx)(card_component,{className:"edit-site-global-styles-screen-root__active-style-tile",children:(0,jsx_runtime.jsx)(card_media_component,{className:"edit-site-global-styles-screen-root__active-style-tile-preview",children:(0,jsx_runtime.jsx)(preview_styles,{})})}),hasVariations&&(0,jsx_runtime.jsx)(item_group_component.A,{children:(0,jsx_runtime.jsx)(NavigationButtonAsItem,{path:"/variations",children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,i18n_build_module.__)("Browse styles")}),(0,jsx_runtime.jsx)(IconWithCurrentColor,{icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A})]})})}),(0,jsx_runtime.jsx)(root_menu,{})]})}),(0,jsx_runtime.jsx)(card_divider_component,{}),(0,jsx_runtime.jsxs)(card_body_component,{children:[(0,jsx_runtime.jsx)(spacer_component.A,{as:"p",paddingTop:2,paddingX:"13px",marginBottom:4,children:(0,i18n_build_module.__)("Customize the appearance of specific blocks for the whole site.")}),(0,jsx_runtime.jsx)(item_group_component.A,{children:(0,jsx_runtime.jsx)(NavigationButtonAsItem,{path:"/blocks",children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,i18n_build_module.__)("Blocks")}),(0,jsx_runtime.jsx)(IconWithCurrentColor,{icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A})]})})})]}),canEditCSS&&!!customCSS&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(card_divider_component,{}),(0,jsx_runtime.jsxs)(card_body_component,{children:[(0,jsx_runtime.jsx)(spacer_component.A,{as:"p",paddingTop:2,paddingX:"13px",marginBottom:4,children:(0,i18n_build_module.__)("Add your own CSS to customize the appearance and layout of your site.")}),(0,jsx_runtime.jsx)(item_group_component.A,{children:(0,jsx_runtime.jsx)(NavigationButtonAsItem,{path:"/css",children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,i18n_build_module.__)("Additional CSS")}),(0,jsx_runtime.jsx)(IconWithCurrentColor,{icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A})]})})})]})]})]})}ScreenRoot.displayName="ScreenRoot";const screen_root=ScreenRoot;ScreenRoot.__docgenInfo={description:"",methods:[],displayName:"ScreenRoot"};const{useGlobalStyle:variations_panel_useGlobalStyle}=src_lock_unlock_unlock(build_module.jb);function useBlockVariations(name){const blockStyles=(0,use_select.A)((select=>{const{getBlockStyles}=select(blocks_build_module.M_);return getBlockStyles(name)}),[name]),[variations]=variations_panel_useGlobalStyle("variations",name);return function getFilteredBlockStyles(blockStyles,variations){return blockStyles?.filter((style=>"block"===style.source||variations.includes(style.name)))}(blockStyles,Object.keys(null!=variations?variations:{}))}function VariationsPanel({name}){const coreBlockStyles=useBlockVariations(name);return(0,jsx_runtime.jsx)(item_group_component.A,{isBordered:!0,isSeparated:!0,children:coreBlockStyles.map(((style,index)=>style?.isDefault?null:(0,jsx_runtime.jsx)(NavigationButtonAsItem,{path:"/blocks/"+encodeURIComponent(name)+"/variations/"+encodeURIComponent(style.name),children:style.label},index)))})}function ScreenHeader({title,description,onBack}){return(0,jsx_runtime.jsxs)(component.A,{spacing:0,children:[(0,jsx_runtime.jsx)(view_component.A,{children:(0,jsx_runtime.jsx)(spacer_component.A,{marginBottom:0,paddingX:4,paddingY:3,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{spacing:2,children:[(0,jsx_runtime.jsx)(build_module_navigator.m.BackButton,{icon:(0,i18n_build_module.V8)()?chevron_right.A:chevron_left.A,size:"small",label:(0,i18n_build_module.__)("Back"),onClick:onBack}),(0,jsx_runtime.jsx)(spacer_component.A,{children:(0,jsx_runtime.jsx)(heading_component.A,{className:"edit-site-global-styles-header",level:2,size:13,children:title})})]})})}),description&&(0,jsx_runtime.jsx)("p",{className:"edit-site-global-styles-header__description",children:description})]})}VariationsPanel.displayName="VariationsPanel",VariationsPanel.__docgenInfo={description:"",methods:[],displayName:"VariationsPanel"},ScreenHeader.displayName="ScreenHeader";const global_styles_header=ScreenHeader;ScreenHeader.__docgenInfo={description:"",methods:[],displayName:"ScreenHeader"};const{useHasDimensionsPanel:screen_block_list_useHasDimensionsPanel,useHasTypographyPanel:screen_block_list_useHasTypographyPanel,useHasBorderPanel,useGlobalSetting:screen_block_list_useGlobalSetting,useSettingsForBlockElement:screen_block_list_useSettingsForBlockElement,useHasColorPanel:screen_block_list_useHasColorPanel}=src_lock_unlock_unlock(build_module.jb);function useBlockHasGlobalStyles(blockName){const[rawSettings]=screen_block_list_useGlobalSetting("",blockName),settings=screen_block_list_useSettingsForBlockElement(rawSettings,blockName),hasTypographyPanel=screen_block_list_useHasTypographyPanel(settings),hasColorPanel=screen_block_list_useHasColorPanel(settings),hasBorderPanel=useHasBorderPanel(settings),hasDimensionsPanel=screen_block_list_useHasDimensionsPanel(settings),hasLayoutPanel=hasBorderPanel||hasDimensionsPanel,hasVariationsPanel=!!useBlockVariations(blockName)?.length;return hasTypographyPanel||hasColorPanel||hasLayoutPanel||hasVariationsPanel}function BlockMenuItem({block}){return useBlockHasGlobalStyles(block.name)?(0,jsx_runtime.jsx)(NavigationButtonAsItem,{path:"/blocks/"+encodeURIComponent(block.name),children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-start",children:[(0,jsx_runtime.jsx)(build_module.th,{icon:block.icon}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:block.title})]})}):null}function BlockList({filterValue}){const sortedBlockTypes=function useSortedBlockTypes(){const blockItems=(0,use_select.A)((select=>select(blocks_build_module.M_).getBlockTypes()),[]),{core:coreItems,noncore:nonCoreItems}=blockItems.reduce(((blocks,block)=>{const{core,noncore}=blocks;return(block.name.startsWith("core/")?core:noncore).push(block),blocks}),{core:[],noncore:[]});return[...coreItems,...nonCoreItems]}(),debouncedSpeak=(0,use_debounce.A)(a11y_build_module.L,500),{isMatchingSearchTerm}=(0,use_select.A)(blocks_build_module.M_),filteredBlockTypes=filterValue?sortedBlockTypes.filter((blockType=>isMatchingSearchTerm(blockType,filterValue))):sortedBlockTypes,blockTypesListRef=(0,react.useRef)();return(0,react.useEffect)((()=>{if(!filterValue)return;const count=blockTypesListRef.current.childElementCount,resultsFoundMessage=(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d result found.","%d results found.",count),count);debouncedSpeak(resultsFoundMessage,count)}),[filterValue,debouncedSpeak]),(0,jsx_runtime.jsx)("div",{ref:blockTypesListRef,className:"edit-site-block-types-item-list",children:filteredBlockTypes.map((block=>(0,jsx_runtime.jsx)(BlockMenuItem,{block},"menu-itemblock-"+block.name)))})}BlockMenuItem.displayName="BlockMenuItem",BlockList.displayName="BlockList";const MemoizedBlockList=(0,react.memo)(BlockList);function ScreenBlockList(){const[filterValue,setFilterValue]=(0,react.useState)(""),deferredFilterValue=(0,react.useDeferredValue)(filterValue);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:(0,i18n_build_module.__)("Blocks"),description:(0,i18n_build_module.__)("Customize the appearance of specific blocks and for the whole site.")}),(0,jsx_runtime.jsx)(search_control.A,{__nextHasNoMarginBottom:!0,className:"edit-site-block-types-search",onChange:setFilterValue,value:filterValue,label:(0,i18n_build_module.__)("Search"),placeholder:(0,i18n_build_module.__)("Search")}),(0,jsx_runtime.jsx)(MemoizedBlockList,{filterValue:deferredFilterValue})]})}const screen_block_list=ScreenBlockList;ScreenBlockList.__docgenInfo={description:"",methods:[],displayName:"ScreenBlockList"};var utils=__webpack_require__("./packages/components/build-module/border-box-control/utils.js");const BlockPreviewPanel=({name,variation=""})=>{var _blockExample$viewpor;const blockExample=(0,blocks_build_module.E7)(name)?.example,blocks=(0,react.useMemo)((()=>{if(!blockExample)return null;let example=blockExample;return variation&&(example={...example,attributes:{...example.attributes,className:getVariationClassName(variation)}}),(0,blocks_build_module.KL)(name,example)}),[name,blockExample,variation]),viewportWidth=null!==(_blockExample$viewpor=blockExample?.viewportWidth)&&void 0!==_blockExample$viewpor?_blockExample$viewpor:500,scale=235/viewportWidth,minHeight=0!==scale&&scale<1?144/scale:144;return blockExample?(0,jsx_runtime.jsx)(spacer_component.A,{marginX:4,marginBottom:4,children:(0,jsx_runtime.jsx)("div",{className:"edit-site-global-styles__block-preview-panel",style:{maxHeight:144,boxSizing:"initial"},children:(0,jsx_runtime.jsx)(build_module.su,{blocks,viewportWidth,minHeight:144,additionalStyles:[{css:`\n\t\t\t\t\t\t\t\tbody{\n\t\t\t\t\t\t\t\t\tpadding: 24px;\n\t\t\t\t\t\t\t\t\tmin-height:${Math.round(minHeight)}px;\n\t\t\t\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\t\t\t\talign-items:center;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t.is-root-container { width: 100%; }\n\t\t\t\t\t\t\t`}]})})}):null};BlockPreviewPanel.displayName="BlockPreviewPanel";const block_preview_panel=BlockPreviewPanel;function Subtitle({children,level}){return(0,jsx_runtime.jsx)(heading_component.A,{className:"edit-site-global-styles-subtitle",level:null!=level?level:2,children})}BlockPreviewPanel.__docgenInfo={description:"",methods:[],displayName:"BlockPreviewPanel",props:{variation:{defaultValue:{value:"''",computed:!1},required:!1}}},Subtitle.displayName="Subtitle";const subtitle=Subtitle;Subtitle.__docgenInfo={description:"",methods:[],displayName:"Subtitle"};const BACKGROUND_BLOCK_DEFAULT_VALUES={backgroundSize:"cover",backgroundPosition:"50% 50%"};function applyFallbackStyle(border){if(!border)return border;const hasColorOrWidth=border.color||border.width;return!border.style&&hasColorOrWidth?{...border,style:"solid"}:!border.style||hasColorOrWidth?border:void 0}const{useHasDimensionsPanel:screen_block_useHasDimensionsPanel,useHasTypographyPanel:screen_block_useHasTypographyPanel,useHasBorderPanel:screen_block_useHasBorderPanel,useGlobalSetting:screen_block_useGlobalSetting,useSettingsForBlockElement:screen_block_useSettingsForBlockElement,useHasColorPanel:screen_block_useHasColorPanel,useHasFiltersPanel,useHasImageSettingsPanel,useGlobalStyle:screen_block_useGlobalStyle,useHasBackgroundPanel:screen_block_useHasBackgroundPanel,BackgroundPanel:StylesBackgroundPanel,BorderPanel:StylesBorderPanel,ColorPanel:StylesColorPanel,TypographyPanel:StylesTypographyPanel,DimensionsPanel:StylesDimensionsPanel,FiltersPanel:StylesFiltersPanel,ImageSettingsPanel,AdvancedPanel:StylesAdvancedPanel}=src_lock_unlock_unlock(build_module.jb);function ScreenBlock({name,variation}){let prefixParts=[];variation&&(prefixParts=["variations",variation].concat(prefixParts));const prefix=prefixParts.join("."),[style]=screen_block_useGlobalStyle(prefix,name,"user",{shouldDecodeEncode:!1}),[inheritedStyle,setStyle]=screen_block_useGlobalStyle(prefix,name,"all",{shouldDecodeEncode:!1}),[userSettings]=screen_block_useGlobalSetting("",name,"user"),[rawSettings,setSettings]=screen_block_useGlobalSetting("",name),settings=screen_block_useSettingsForBlockElement(rawSettings,name),blockType=(0,blocks_build_module.E7)(name);settings?.spacing?.blockGap&&blockType?.supports?.spacing?.blockGap&&(!0===blockType?.supports?.spacing?.__experimentalSkipSerialization||blockType?.supports?.spacing?.__experimentalSkipSerialization?.some?.((spacingType=>"blockGap"===spacingType)))&&(settings.spacing.blockGap=!1),settings?.dimensions?.aspectRatio&&"core/group"===name&&(settings.dimensions.aspectRatio=!1);const blockVariations=useBlockVariations(name),hasBackgroundPanel=screen_block_useHasBackgroundPanel(settings),hasTypographyPanel=screen_block_useHasTypographyPanel(settings),hasColorPanel=screen_block_useHasColorPanel(settings),hasBorderPanel=screen_block_useHasBorderPanel(settings),hasDimensionsPanel=screen_block_useHasDimensionsPanel(settings),hasFiltersPanel=useHasFiltersPanel(settings),hasImageSettingsPanel=useHasImageSettingsPanel(name,userSettings,settings),hasVariationsPanel=!!blockVariations?.length&&!variation,{canEditCSS}=(0,use_select.A)((select=>{const{getEntityRecord,__experimentalGetCurrentGlobalStylesId}=select(core_data_build_module.M_),globalStylesId=__experimentalGetCurrentGlobalStylesId(),globalStyles=globalStylesId?getEntityRecord("root","globalStyles",globalStylesId):void 0;return{canEditCSS:!!globalStyles?._links?.["wp:action-edit-css"]}}),[]),currentBlockStyle=variation?blockVariations.find((s=>s.name===variation)):null,inheritedStyleWithLayout=(0,react.useMemo)((()=>({...inheritedStyle,layout:settings.layout})),[inheritedStyle,settings.layout]),styleWithLayout=(0,react.useMemo)((()=>({...style,layout:userSettings.layout})),[style,userSettings.layout]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:variation?currentBlockStyle?.label:blockType.title}),(0,jsx_runtime.jsx)(block_preview_panel,{name,variation}),hasVariationsPanel&&(0,jsx_runtime.jsx)("div",{className:"edit-site-global-styles-screen-variations",children:(0,jsx_runtime.jsxs)(component.A,{spacing:3,children:[(0,jsx_runtime.jsx)(subtitle,{children:(0,i18n_build_module.__)("Style Variations")}),(0,jsx_runtime.jsx)(VariationsPanel,{name})]})}),hasColorPanel&&(0,jsx_runtime.jsx)(StylesColorPanel,{inheritedValue:inheritedStyle,value:style,onChange:setStyle,settings}),hasBackgroundPanel&&(0,jsx_runtime.jsx)(StylesBackgroundPanel,{inheritedValue:inheritedStyle,value:style,onChange:setStyle,settings,defaultValues:BACKGROUND_BLOCK_DEFAULT_VALUES}),hasTypographyPanel&&(0,jsx_runtime.jsx)(StylesTypographyPanel,{inheritedValue:inheritedStyle,value:style,onChange:setStyle,settings}),hasDimensionsPanel&&(0,jsx_runtime.jsx)(StylesDimensionsPanel,{inheritedValue:inheritedStyleWithLayout,value:styleWithLayout,onChange:newStyle=>{const updatedStyle={...newStyle};delete updatedStyle.layout,setStyle(updatedStyle),newStyle.layout!==userSettings.layout&&setSettings({...userSettings,layout:newStyle.layout})},settings,includeLayoutControls:!0}),hasBorderPanel&&(0,jsx_runtime.jsx)(StylesBorderPanel,{inheritedValue:inheritedStyle,value:style,onChange:newStyle=>{if(!newStyle?.border)return void setStyle(newStyle);const{radius,...newBorder}=newStyle.border,border=function applyAllFallbackStyles(border){return border?(0,utils.wN)(border)?{top:applyFallbackStyle(border.top),right:applyFallbackStyle(border.right),bottom:applyFallbackStyle(border.bottom),left:applyFallbackStyle(border.left)}:applyFallbackStyle(border):border}(newBorder),updatedBorder=(0,utils.wN)(border)?{color:null,style:null,width:null,...border}:{top:border,right:border,bottom:border,left:border};setStyle({...newStyle,border:{...updatedBorder,radius}})},settings}),hasFiltersPanel&&(0,jsx_runtime.jsx)(StylesFiltersPanel,{inheritedValue:inheritedStyleWithLayout,value:styleWithLayout,onChange:setStyle,settings,includeLayoutControls:!0}),hasImageSettingsPanel&&(0,jsx_runtime.jsx)(ImageSettingsPanel,{onChange:newSetting=>{setSettings(void 0===newSetting?{...rawSettings,lightbox:void 0}:{...rawSettings,lightbox:{...rawSettings.lightbox,...newSetting}})},value:userSettings,inheritedValue:settings}),canEditCSS&&(0,jsx_runtime.jsxs)(body.Ay,{title:(0,i18n_build_module.__)("Advanced"),initialOpen:!1,children:[(0,jsx_runtime.jsx)("p",{children:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Add your own CSS to customize the appearance of the %s block. You do not need to include a CSS selector, just add the property and value."),blockType?.title)}),(0,jsx_runtime.jsx)(StylesAdvancedPanel,{value:style,onChange:setStyle,inheritedValue:inheritedStyle})]})]})}const screen_block=ScreenBlock;ScreenBlock.__docgenInfo={description:"",methods:[],displayName:"ScreenBlock"};const{useGlobalStyle:typography_elements_useGlobalStyle}=src_lock_unlock_unlock(build_module.jb);function ElementItem({parentMenu,element,label}){var _ref;const prefix="text"!==element&&element?`elements.${element}.`:"",extraStyles="link"===element?{textDecoration:"underline"}:{},[fontFamily]=typography_elements_useGlobalStyle(prefix+"typography.fontFamily"),[fontStyle]=typography_elements_useGlobalStyle(prefix+"typography.fontStyle"),[fontWeight]=typography_elements_useGlobalStyle(prefix+"typography.fontWeight"),[backgroundColor]=typography_elements_useGlobalStyle(prefix+"color.background"),[fallbackBackgroundColor]=typography_elements_useGlobalStyle("color.background"),[gradientValue]=typography_elements_useGlobalStyle(prefix+"color.gradient"),[color]=typography_elements_useGlobalStyle(prefix+"color.text");return(0,jsx_runtime.jsx)(NavigationButtonAsItem,{path:parentMenu+"/typography/"+element,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-start",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{className:"edit-site-global-styles-screen-typography__indicator",style:{fontFamily:null!=fontFamily?fontFamily:"serif",background:null!==(_ref=null!=gradientValue?gradientValue:backgroundColor)&&void 0!==_ref?_ref:fallbackBackgroundColor,color,fontStyle,fontWeight,...extraStyles},"aria-hidden":"true",children:(0,i18n_build_module.__)("Aa")}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:label})]})})}function TypographyElements(){return(0,jsx_runtime.jsxs)(component.A,{spacing:3,children:[(0,jsx_runtime.jsx)(subtitle,{level:3,children:(0,i18n_build_module.__)("Elements")}),(0,jsx_runtime.jsxs)(item_group_component.A,{isBordered:!0,isSeparated:!0,children:[(0,jsx_runtime.jsx)(ElementItem,{parentMenu:"",element:"text",label:(0,i18n_build_module.__)("Text")}),(0,jsx_runtime.jsx)(ElementItem,{parentMenu:"",element:"link",label:(0,i18n_build_module.__)("Links")}),(0,jsx_runtime.jsx)(ElementItem,{parentMenu:"",element:"heading",label:(0,i18n_build_module.__)("Headings")}),(0,jsx_runtime.jsx)(ElementItem,{parentMenu:"",element:"caption",label:(0,i18n_build_module.__)("Captions")}),(0,jsx_runtime.jsx)(ElementItem,{parentMenu:"",element:"button",label:(0,i18n_build_module.__)("Buttons")})]})]})}ElementItem.displayName="ElementItem",TypographyElements.displayName="TypographyElements";const typography_elements=TypographyElements;TypographyElements.__docgenInfo={description:"",methods:[],displayName:"TypographyElements"};var grid_component=__webpack_require__("./packages/components/build-module/grid/component.js");const StylesPreviewTypography=({variation,isFocused,withHoverView})=>(0,jsx_runtime.jsx)(PreviewIframe,{label:variation.title,isFocused,withHoverView,children:({ratio,key})=>(0,jsx_runtime.jsx)(h_stack_component.A,{spacing:10*ratio,justify:"center",style:{height:"100%",overflow:"hidden"},children:(0,jsx_runtime.jsx)(PreviewTypography,{variation,fontSize:85*ratio})},key)});StylesPreviewTypography.displayName="StylesPreviewTypography";const preview_typography=StylesPreviewTypography;StylesPreviewTypography.__docgenInfo={description:"",methods:[],displayName:"StylesPreviewTypography"};const use_theme_style_variations_by_property_EMPTY_ARRAY=[],{GlobalStylesContext:use_theme_style_variations_by_property_GlobalStylesContext,areGlobalStyleConfigsEqual}=src_lock_unlock_unlock(build_module.jb),{mergeBaseAndUserConfigs:use_theme_style_variations_by_property_mergeBaseAndUserConfigs}=src_lock_unlock_unlock(private_apis_privateApis);function removePropertiesFromObject(object,properties){if(!properties?.length)return object;if("object"!=typeof object||!object||!Object.keys(object).length)return object;for(const key in object)properties.includes(key)?delete object[key]:"object"==typeof object[key]&&removePropertiesFromObject(object[key],properties);return object}function hasThemeVariation({title,settings,styles}){return title===(0,i18n_build_module.__)("Default")||Object.keys(settings).length>0||Object.keys(styles).length>0}function useCurrentMergeThemeStyleVariationsWithUserConfig(properties=[]){const{variationsFromTheme}=(0,use_select.A)((select=>({variationsFromTheme:select(core_data_build_module.M_).__experimentalGetCurrentThemeGlobalStylesVariations()||use_theme_style_variations_by_property_EMPTY_ARRAY})),[]),{user:userVariation}=(0,react.useContext)(use_theme_style_variations_by_property_GlobalStylesContext),propertiesAsString=properties.toString();return(0,react.useMemo)((()=>{const userVariationWithoutProperties=removePropertiesFromObject(structuredClone(userVariation),properties);userVariationWithoutProperties.title=(0,i18n_build_module.__)("Default");const variationsWithPropertiesAndBase=variationsFromTheme.filter((variation=>isVariationWithProperties(variation,properties))).map((variation=>use_theme_style_variations_by_property_mergeBaseAndUserConfigs(userVariationWithoutProperties,variation))),variationsByProperties=[userVariationWithoutProperties,...variationsWithPropertiesAndBase];return variationsByProperties?.length?variationsByProperties.filter(hasThemeVariation):[]}),[propertiesAsString,userVariation,variationsFromTheme])}const filterObjectByProperties=(object,properties)=>{if(!object||!properties?.length)return{};const newObject={};return Object.keys(object).forEach((key=>{if(properties.includes(key))newObject[key]=object[key];else if("object"==typeof object[key]){const newFilter=filterObjectByProperties(object[key],properties);Object.keys(newFilter).length&&(newObject[key]=newFilter)}})),newObject};function isVariationWithProperties(variation,properties){const variationWithProperties=filterObjectByProperties(structuredClone(variation),properties);return areGlobalStyleConfigsEqual(variationWithProperties,variation)}const{mergeBaseAndUserConfigs:variation_mergeBaseAndUserConfigs}=src_lock_unlock_unlock(private_apis_privateApis),{GlobalStylesContext:variation_GlobalStylesContext,areGlobalStyleConfigsEqual:variation_areGlobalStyleConfigsEqual}=src_lock_unlock_unlock(build_module.jb);function Variation({variation,children,isPill,properties,showTooltip}){const[isFocused,setIsFocused]=(0,react.useState)(!1),{base,user,setUserConfig}=(0,react.useContext)(variation_GlobalStylesContext),context=(0,react.useMemo)((()=>{let merged=variation_mergeBaseAndUserConfigs(base,variation);return properties&&(merged=filterObjectByProperties(merged,properties)),{user:variation,base,merged,setUserConfig:()=>{}}}),[variation,base,properties]),selectVariation=()=>setUserConfig(variation),isActive=(0,react.useMemo)((()=>variation_areGlobalStyleConfigsEqual(user,variation)),[user,variation]);let label=variation?.title;variation?.description&&(label=(0,i18n_build_module.nv)((0,i18n_build_module.__)("%1$s (%2$s)"),variation?.title,variation?.description));const content=(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("edit-site-global-styles-variations_item",{"is-active":isActive}),role:"button",onClick:selectVariation,onKeyDown:event=>{event.keyCode===keycodes_build_module.Fm&&(event.preventDefault(),selectVariation())},tabIndex:"0","aria-label":label,"aria-current":isActive,onFocus:()=>setIsFocused(!0),onBlur:()=>setIsFocused(!1),children:(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)("edit-site-global-styles-variations_item-preview",{"is-pill":isPill}),children:children(isFocused)})});return(0,jsx_runtime.jsx)(variation_GlobalStylesContext.Provider,{value:context,children:showTooltip?(0,jsx_runtime.jsx)(tooltip.Ay,{text:variation?.title,children:content}):content})}function TypographyVariations({title,gap=2}){const propertiesToFilter=["typography"],typographyVariations=useCurrentMergeThemeStyleVariationsWithUserConfig(propertiesToFilter);return typographyVariations?.length<=1?null:(0,jsx_runtime.jsxs)(component.A,{spacing:3,children:[title&&(0,jsx_runtime.jsx)(subtitle,{level:3,children:title}),(0,jsx_runtime.jsx)(grid_component.A,{columns:3,gap,className:"edit-site-global-styles-style-variations-container",children:typographyVariations.map(((variation,index)=>(0,jsx_runtime.jsx)(Variation,{variation,properties:propertiesToFilter,showTooltip:!0,children:()=>(0,jsx_runtime.jsx)(preview_typography,{variation})},index)))})]})}function FontSizes(){return(0,jsx_runtime.jsxs)(component.A,{spacing:2,children:[(0,jsx_runtime.jsx)(h_stack_component.A,{justify:"space-between",children:(0,jsx_runtime.jsx)(subtitle,{level:3,children:(0,i18n_build_module.__)("Font Sizes")})}),(0,jsx_runtime.jsx)(item_group_component.A,{isBordered:!0,isSeparated:!0,children:(0,jsx_runtime.jsx)(NavigationButtonAsItem,{path:"/typography/font-sizes",children:(0,jsx_runtime.jsxs)(h_stack_component.A,{direction:"row",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,i18n_build_module.__)("Font size presets")}),(0,jsx_runtime.jsx)(icon.A,{icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A})]})})})]})}Variation.displayName="Variation",Variation.__docgenInfo={description:"",methods:[],displayName:"Variation"},TypographyVariations.displayName="TypographyVariations",TypographyVariations.__docgenInfo={description:"",methods:[],displayName:"TypographyVariations",props:{gap:{defaultValue:{value:"2",computed:!1},required:!1}}},FontSizes.displayName="FontSizes";const font_sizes_count=FontSizes;FontSizes.__docgenInfo={description:"",methods:[],displayName:"FontSizes"};var settings=__webpack_require__("./packages/icons/build-module/library/settings.js");const FONT_FAMILIES_URL="/wp/v2/font-families",FONT_COLLECTIONS_URL="/wp/v2/font-collections";async function fetchInstallFontFamily(data){const config={path:FONT_FAMILIES_URL,method:"POST",body:data},response=await(0,api_fetch_build_module.A)(config);return{id:response.id,...response.font_family_settings,fontFace:[]}}async function fetchInstallFontFace(fontFamilyId,data){const config={path:`${FONT_FAMILIES_URL}/${fontFamilyId}/font-faces`,method:"POST",body:data},response=await(0,api_fetch_build_module.A)(config);return{id:response.id,...response.font_face_settings}}async function fetchGetFontFamilyBySlug(slug){const config={path:`${FONT_FAMILIES_URL}?slug=${slug}&_embed=true`,method:"GET"},response=await(0,api_fetch_build_module.A)(config);if(!response||0===response.length)return null;const fontFamilyPost=response[0];return{id:fontFamilyPost.id,...fontFamilyPost.font_family_settings,fontFace:fontFamilyPost?._embedded?.font_faces.map((face=>face.font_face_settings))||[]}}async function fetchUninstallFontFamily(fontFamilyId){const config={path:`${FONT_FAMILIES_URL}/${fontFamilyId}?force=true`,method:"DELETE"};return await(0,api_fetch_build_module.A)(config)}const ALLOWED_FILE_EXTENSIONS=["otf","ttf","woff","woff2"],FONT_WEIGHTS={100:(0,i18n_build_module._x)("Thin","font weight"),200:(0,i18n_build_module._x)("Extra-light","font weight"),300:(0,i18n_build_module._x)("Light","font weight"),400:(0,i18n_build_module._x)("Normal","font weight"),500:(0,i18n_build_module._x)("Medium","font weight"),600:(0,i18n_build_module._x)("Semi-bold","font weight"),700:(0,i18n_build_module._x)("Bold","font weight"),800:(0,i18n_build_module._x)("Extra-bold","font weight"),900:(0,i18n_build_module._x)("Black","font weight")},FONT_STYLES={normal:(0,i18n_build_module._x)("Normal","font style"),italic:(0,i18n_build_module._x)("Italic","font style")},{File:utils_File}=window,{kebabCase:utils_kebabCase}=src_lock_unlock_unlock(private_apis.j);function setUIValuesNeeded(font,extraValues={}){return font.name||!font.fontFamily&&!font.slug||(font.name=font.fontFamily||font.slug),{...font,...extraValues}}function getFontFaceVariantName(face){return`${FONT_WEIGHTS[face.fontWeight]||face.fontWeight} ${"normal"===face.fontStyle?"":FONT_STYLES[face.fontStyle]||face.fontStyle}`}function mergeFontFaces(existing=[],incoming=[]){const map=new Map;for(const face of existing)map.set(`${face.fontWeight}${face.fontStyle}`,face);for(const face of incoming)map.set(`${face.fontWeight}${face.fontStyle}`,face);return Array.from(map.values())}function mergeFontFamilies(existing=[],incoming=[]){const map=new Map;for(const font of existing)map.set(font.slug,{...font});for(const font of incoming)if(map.has(font.slug)){const{fontFace:incomingFontFaces,...restIncoming}=font,mergedFontFaces=mergeFontFaces(map.get(font.slug).fontFace,incomingFontFaces);map.set(font.slug,{...restIncoming,fontFace:mergedFontFaces})}else map.set(font.slug,{...font});return Array.from(map.values())}async function loadFontFaceInBrowser(fontFace,source,addTo="all"){let dataSource;if("string"==typeof source)dataSource=`url(${source})`;else{if(!(source instanceof utils_File))return;dataSource=await source.arrayBuffer()}const newFont=new window.FontFace(formatFontFaceName(fontFace.fontFamily),dataSource,{style:fontFace.fontStyle,weight:fontFace.fontWeight}),loadedFace=await newFont.load();if("document"!==addTo&&"all"!==addTo||document.fonts.add(loadedFace),"iframe"===addTo||"all"===addTo){document.querySelector('iframe[name="editor-canvas"]').contentDocument.fonts.add(loadedFace)}}function unloadFontFaceInBrowser(fontFace,removeFrom="all"){const unloadFontFace=fonts=>{fonts.forEach((f=>{f.family===formatFontFaceName(fontFace?.fontFamily)&&f.weight===fontFace?.fontWeight&&f.style===fontFace?.fontStyle&&fonts.delete(f)}))};if("document"!==removeFrom&&"all"!==removeFrom||unloadFontFace(document.fonts),"iframe"===removeFrom||"all"===removeFrom){unloadFontFace(document.querySelector('iframe[name="editor-canvas"]').contentDocument.fonts)}}function getDisplaySrcFromFontFace(input){if(!input)return;let src;return src=Array.isArray(input)?input[0]:input,src.startsWith("file:.")?void 0:(function isUrlEncoded(url){return"string"==typeof url&&url!==decodeURIComponent(url)}(src)||(src=encodeURI(src)),src)}function makeFontFamilyFormData(fontFamily){const formData=new FormData,{fontFace,category,...familyWithValidParameters}=fontFamily,fontFamilySettings={...familyWithValidParameters,slug:utils_kebabCase(fontFamily.slug)};return formData.append("font_family_settings",JSON.stringify(fontFamilySettings)),formData}function makeFontFacesFormData(font){if(font?.fontFace){return font.fontFace.map(((item,faceIndex)=>{const face={...item},formData=new FormData;if(face.file){const files=Array.isArray(face.file)?face.file:[face.file],src=[];files.forEach(((file,key)=>{const fileId=`file-${faceIndex}-${key}`;formData.append(fileId,file,file.name),src.push(fileId)})),face.src=1===src.length?src[0]:src,delete face.file,formData.append("font_face_settings",JSON.stringify(face))}else formData.append("font_face_settings",JSON.stringify(face));return formData}))}}async function batchInstallFontFaces(fontFamilyId,fontFacesData){const responses=[];for(const faceData of fontFacesData)try{const response=await fetchInstallFontFace(fontFamilyId,faceData);responses.push({status:"fulfilled",value:response})}catch(error){responses.push({status:"rejected",reason:error})}const results={errors:[],successes:[]};return responses.forEach(((result,index)=>{if("fulfilled"===result.status){const response=result.value;response.id?results.successes.push(response):results.errors.push({data:fontFacesData[index],message:`Error: ${response.message}`})}else results.errors.push({data:fontFacesData[index],message:result.reason.message})})),results}function checkFontFaceInstalled(fontFace,collection){return-1!==collection.findIndex((collectionFontFace=>collectionFontFace.fontWeight===fontFace.fontWeight&&collectionFontFace.fontStyle===fontFace.fontStyle))}function toggleFont(font,face,initialfonts){const isFontActivated=f=>f.slug===font.slug,activatedFont=initialfonts.find(isFontActivated);return face?(activatedFont=>{const isFaceActivated=f=>f.fontWeight===face.fontWeight&&f.fontStyle===face.fontStyle;if(!activatedFont)return[...initialfonts,{...font,fontFace:[face]}];let newFontFaces=activatedFont.fontFace||[];return newFontFaces=newFontFaces.find(isFaceActivated)?newFontFaces.filter((f=>!isFaceActivated(f))):[...newFontFaces,face],0===newFontFaces.length?initialfonts.filter((f=>!isFontActivated(f))):initialfonts.map((f=>isFontActivated(f)?{...f,fontFace:newFontFaces}:f))})(activatedFont):(activatedFont=>activatedFont?initialfonts.filter((f=>!isFontActivated(f))):[...initialfonts,font])(activatedFont)}const{useGlobalSetting:context_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb),FontLibraryContext=(0,react.createContext)({});function FontLibraryProvider({children}){const{saveEntityRecord}=(0,use_dispatch.A)(core_data_build_module.M_),{globalStylesId}=(0,use_select.A)((select=>{const{__experimentalGetCurrentGlobalStylesId}=select(core_data_build_module.M_);return{globalStylesId:__experimentalGetCurrentGlobalStylesId()}})),globalStyles=(0,core_data_build_module.MA)("root","globalStyles",globalStylesId),[isInstalling,setIsInstalling]=(0,react.useState)(!1),[refreshKey,setRefreshKey]=(0,react.useState)(0),refreshLibrary=()=>{setRefreshKey(Date.now())},{records:libraryPosts=[],isResolving:isResolvingLibrary}=(0,core_data_build_module.$u)("postType","wp_font_family",{refreshKey,_embed:!0}),libraryFonts=(libraryPosts||[]).map((fontFamilyPost=>({id:fontFamilyPost.id,...fontFamilyPost.font_family_settings,fontFace:fontFamilyPost?._embedded?.font_faces.map((face=>face.font_face_settings))||[]})))||[],[fontFamilies,setFontFamilies]=context_useGlobalSetting("typography.fontFamilies"),saveFontFamilies=async fonts=>{const updatedGlobalStyles=globalStyles.record;!function setNestedValue(object,path,value){return object&&"object"==typeof object?(path.reduce(((acc,key,idx)=>(void 0===acc[key]&&(Number.isInteger(path[idx+1])?acc[key]=[]:acc[key]={}),idx===path.length-1&&(acc[key]=value),acc[key])),object),object):object}(updatedGlobalStyles,["settings","typography","fontFamilies"],fonts),await saveEntityRecord("root","globalStyles",updatedGlobalStyles)},[modalTabOpen,setModalTabOpen]=(0,react.useState)(!1),[libraryFontSelected,setLibraryFontSelected]=(0,react.useState)(null),themeFonts=fontFamilies?.theme?fontFamilies.theme.map((f=>setUIValuesNeeded(f,{source:"theme"}))).sort(((a,b)=>a.name.localeCompare(b.name))):[],customFonts=fontFamilies?.custom?fontFamilies.custom.map((f=>setUIValuesNeeded(f,{source:"custom"}))).sort(((a,b)=>a.name.localeCompare(b.name))):[],baseCustomFonts=libraryFonts?libraryFonts.map((f=>setUIValuesNeeded(f,{source:"custom"}))).sort(((a,b)=>a.name.localeCompare(b.name))):[];(0,react.useEffect)((()=>{modalTabOpen||setLibraryFontSelected(null)}),[modalTabOpen]);const[loadedFontUrls]=(0,react.useState)(new Set),getAvailableFontsOutline=availableFontFamilies=>availableFontFamilies.reduce(((acc,font)=>{const availableFontFaces=font?.fontFace&&font.fontFace?.length>0?font?.fontFace.map((face=>`${face.fontStyle+face.fontWeight}`)):["normal400"];return acc[font.slug]=availableFontFaces,acc}),{}),getActivatedFontsOutline=source=>getAvailableFontsOutline("theme"===source?themeFonts:customFonts),isFontActivated=(slug,style,weight,source)=>style||weight?!!getActivatedFontsOutline(source)[slug]?.includes(style+weight):!!getActivatedFontsOutline(source)[slug];const deactivateFontFamily=font=>{var _fontFamilies$font$so;const newCustomFonts=(null!==(_fontFamilies$font$so=fontFamilies?.[font.source])&&void 0!==_fontFamilies$font$so?_fontFamilies$font$so:[]).filter((f=>f.slug!==font.slug)),activeFonts={...fontFamilies,[font.source]:newCustomFonts};return setFontFamilies(activeFonts),font.fontFace&&font.fontFace.forEach((face=>{unloadFontFaceInBrowser(face,"all")})),activeFonts},activateCustomFontFamilies=fontsToAdd=>{const fontsToActivate=cleanFontsForSave(fontsToAdd),activeFonts={...fontFamilies,custom:mergeFontFamilies(fontFamilies?.custom,fontsToActivate)};return setFontFamilies(activeFonts),loadFontsInBrowser(fontsToActivate),activeFonts},cleanFontsForSave=fonts=>fonts.map((({id:_familyDbId,fontFace,...font})=>({...font,...fontFace&&fontFace.length>0?{fontFace:fontFace.map((({id:_faceDbId,...face})=>face))}:{}}))),loadFontsInBrowser=fonts=>{fonts.forEach((font=>{font.fontFace&&font.fontFace.forEach((face=>{loadFontFaceInBrowser(face,getDisplaySrcFromFontFace(face.src),"all")}))}))},[collections,setFontCollections]=(0,react.useState)([]),getFontCollections=async()=>{const response=await async function fetchFontCollections(){const config={path:`${FONT_COLLECTIONS_URL}?_fields=slug,name,description`,method:"GET"};return await(0,api_fetch_build_module.A)(config)}();setFontCollections(response)};return(0,react.useEffect)((()=>{getFontCollections()}),[]),(0,jsx_runtime.jsx)(FontLibraryContext.Provider,{value:{libraryFontSelected,handleSetLibraryFontSelected:font=>{if(!font)return void setLibraryFontSelected(null);const fontSelected=("theme"===font.source?themeFonts:baseCustomFonts).find((f=>f.slug===font.slug));setLibraryFontSelected({...fontSelected||font,source:font.source})},fontFamilies,baseCustomFonts,isFontActivated,getFontFacesActivated:(slug,source)=>getActivatedFontsOutline(source)[slug]||[],loadFontFaceAsset:async fontFace=>{if(!fontFace.src)return;const src=getDisplaySrcFromFontFace(fontFace.src);src&&!loadedFontUrls.has(src)&&(loadFontFaceInBrowser(fontFace,src,"document"),loadedFontUrls.add(src))},installFonts:async function installFonts(fontFamiliesToInstall){setIsInstalling(!0);try{const fontFamiliesToActivate=[];let installationErrors=[];for(const fontFamilyToInstall of fontFamiliesToInstall){let isANewFontFamily=!1,installedFontFamily=await fetchGetFontFamilyBySlug(fontFamilyToInstall.slug);installedFontFamily||(isANewFontFamily=!0,installedFontFamily=await fetchInstallFontFamily(makeFontFamilyFormData(fontFamilyToInstall)));const alreadyInstalledFontFaces=installedFontFamily.fontFace&&fontFamilyToInstall.fontFace?installedFontFamily.fontFace.filter((fontFaceToInstall=>checkFontFaceInstalled(fontFaceToInstall,fontFamilyToInstall.fontFace))):[];installedFontFamily.fontFace&&fontFamilyToInstall.fontFace&&(fontFamilyToInstall.fontFace=fontFamilyToInstall.fontFace.filter((fontFaceToInstall=>!checkFontFaceInstalled(fontFaceToInstall,installedFontFamily.fontFace))));let successfullyInstalledFontFaces=[],unsuccessfullyInstalledFontFaces=[];if(fontFamilyToInstall?.fontFace?.length>0){const response=await batchInstallFontFaces(installedFontFamily.id,makeFontFacesFormData(fontFamilyToInstall));successfullyInstalledFontFaces=response?.successes,unsuccessfullyInstalledFontFaces=response?.errors}(successfullyInstalledFontFaces?.length>0||alreadyInstalledFontFaces?.length>0)&&(installedFontFamily.fontFace=[...successfullyInstalledFontFaces],fontFamiliesToActivate.push(installedFontFamily)),installedFontFamily&&!fontFamilyToInstall?.fontFace?.length&&fontFamiliesToActivate.push(installedFontFamily),isANewFontFamily&&fontFamilyToInstall?.fontFace?.length>0&&0===successfullyInstalledFontFaces?.length&&await fetchUninstallFontFamily(installedFontFamily.id),installationErrors=installationErrors.concat(unsuccessfullyInstalledFontFaces)}if(installationErrors=installationErrors.reduce(((unique,item)=>unique.includes(item.message)?unique:[...unique,item.message]),[]),fontFamiliesToActivate.length>0){const activeFonts=activateCustomFontFamilies(fontFamiliesToActivate);await saveFontFamilies(activeFonts),refreshLibrary()}if(installationErrors.length>0){const installError=new Error((0,i18n_build_module.__)("There was an error installing fonts."));throw installError.installationErrors=installationErrors,installError}}finally{setIsInstalling(!1)}},uninstallFontFamily:async function uninstallFontFamily(fontFamilyToUninstall){try{const uninstalledFontFamily=await fetchUninstallFontFamily(fontFamilyToUninstall.id);if(uninstalledFontFamily.deleted){const activeFonts=deactivateFontFamily(fontFamilyToUninstall);await saveFontFamilies(activeFonts)}return refreshLibrary(),uninstalledFontFamily}catch(error){throw console.error("There was an error uninstalling the font family:",error),error}},toggleActivateFont:(font,face)=>{var _fontFamilies$font$so2;const newFonts=toggleFont(font,face,null!==(_fontFamilies$font$so2=fontFamilies?.[font.source])&&void 0!==_fontFamilies$font$so2?_fontFamilies$font$so2:[]);setFontFamilies({...fontFamilies,[font.source]:newFonts});isFontActivated(font.slug,face?.fontStyle,face?.fontWeight,font.source)?unloadFontFaceInBrowser(face,"all"):loadFontFaceInBrowser(face,getDisplaySrcFromFontFace(face?.src),"all")},getAvailableFontsOutline,modalTabOpen,setModalTabOpen,refreshLibrary,saveFontFamilies,isResolvingLibrary,isInstalling,collections,getFontCollection:async slug=>{try{if(!!collections.find((collection=>collection.slug===slug))?.font_families)return;const response=await async function fetchFontCollection(id){const config={path:`${FONT_COLLECTIONS_URL}/${id}`,method:"GET"};return await(0,api_fetch_build_module.A)(config)}(slug),updatedCollections=collections.map((collection=>collection.slug===slug?{...collection,...response}:collection));setFontCollections(updatedCollections)}catch(e){throw console.error(e),e}}},children})}FontLibraryProvider.displayName="FontLibraryProvider";const font_library_modal_context=FontLibraryProvider;function animateProgressBar(isRtl=!1){const animationDirection=isRtl?"right":"left";return(0,emotion_react_browser_esm.i7)({"0%":{[animationDirection]:"-50%"},"100%":{[animationDirection]:"100%"}})}FontLibraryProvider.__docgenInfo={description:"",methods:[],displayName:"FontLibraryProvider"};const Track=(0,emotion_styled_base_browser_esm.A)("div",{target:"e15u147w2"})("position:relative;overflow:hidden;height:",config_values.A.borderWidthFocus,";background-color:color-mix(\n\t\tin srgb,\n\t\t",colors_values.l.theme.foreground,",\n\t\ttransparent 90%\n\t);border-radius:",config_values.A.radiusFull,";outline:2px solid transparent;outline-offset:2px;:where( & ){width:160px;}");var styles_ref={name:"152sa26",styles:"width:var(--indicator-width);transition:width 0.4s ease-in-out"};const Indicator=(0,emotion_styled_base_browser_esm.A)("div",{target:"e15u147w1"})("display:inline-block;position:absolute;top:0;height:100%;border-radius:",config_values.A.radiusFull,";background-color:color-mix(\n\t\tin srgb,\n\t\t",colors_values.l.theme.foreground,",\n\t\ttransparent 10%\n\t);outline:2px solid transparent;outline-offset:-2px;",(({isIndeterminate})=>isIndeterminate?(0,emotion_react_browser_esm.AH)({animationDuration:"1.5s",animationTimingFunction:"ease-in-out",animationIterationCount:"infinite",animationName:animateProgressBar((0,i18n_build_module.V8)()),width:"50%"},"","","",""):styles_ref),";"),ProgressElement=(0,emotion_styled_base_browser_esm.A)("progress",{target:"e15u147w0"})({name:"11fb690",styles:"position:absolute;top:0;left:0;opacity:0;width:100%;height:100%"});const progress_bar=(0,react.forwardRef)((function UnforwardedProgressBar(props,ref){const{className,value,...progressProps}=props,isIndeterminate=!Number.isFinite(value);return(0,jsx_runtime.jsxs)(Track,{className,children:[(0,jsx_runtime.jsx)(Indicator,{style:{"--indicator-width":isIndeterminate?void 0:`${value}%`},isIndeterminate}),(0,jsx_runtime.jsx)(ProgressElement,{max:100,value,"aria-label":(0,i18n_build_module.__)("Loading …"),ref,...progressProps})]})}));function FontDemo({font,text}){const ref=(0,react.useRef)(null),fontFace=function getDisplayFontFace(font){return font.fontStyle||font.fontWeight?font:font.fontFace&&font.fontFace.length?font.fontFace.find((face=>"normal"===face.fontStyle&&"400"===face.fontWeight))||font.fontFace[0]:{fontStyle:"normal",fontWeight:"400",fontFamily:font.fontFamily,fake:!0}}(font),style=getFamilyPreviewStyle(font);text=text||font.name;const customPreviewUrl=font.preview,[isIntersecting,setIsIntersecting]=(0,react.useState)(!1),[isAssetLoaded,setIsAssetLoaded]=(0,react.useState)(!1),{loadFontFaceAsset}=(0,react.useContext)(FontLibraryContext),previewUrl=null!=customPreviewUrl?customPreviewUrl:function getPreviewUrl(fontFace){return fontFace.preview?fontFace.preview:fontFace.src?Array.isArray(fontFace.src)?fontFace.src[0]:fontFace.src:void 0}(fontFace),isPreviewImage=previewUrl&&previewUrl.match(/\.(png|jpg|jpeg|gif|svg)$/i),textDemoStyle={fontSize:"18px",lineHeight:1,opacity:isAssetLoaded?"1":"0",...style,...function getFacePreviewStyle(face){return{fontFamily:formatFontFamily(face.fontFamily),fontStyle:face.fontStyle||"normal",fontWeight:face.fontWeight||"400"}}(fontFace)};return(0,react.useEffect)((()=>{const observer=new window.IntersectionObserver((([entry])=>{setIsIntersecting(entry.isIntersecting)}),{});return observer.observe(ref.current),()=>observer.disconnect()}),[ref]),(0,react.useEffect)((()=>{(async()=>{isIntersecting&&(!isPreviewImage&&fontFace.src&&await loadFontFaceAsset(fontFace),setIsAssetLoaded(!0))})()}),[fontFace,isIntersecting,loadFontFaceAsset,isPreviewImage]),(0,jsx_runtime.jsx)("div",{ref,children:isPreviewImage?(0,jsx_runtime.jsx)("img",{src:previewUrl,loading:"lazy",alt:text,className:"font-library-modal__font-variant_demo-image"}):(0,jsx_runtime.jsx)(text_component.A,{style:textDemoStyle,className:"font-library-modal__font-variant_demo-text",children:text})})}FontDemo.displayName="FontDemo";const font_demo=FontDemo;function FontCard({font,onClick,variantsText,navigatorPath}){const variantsCount=font.fontFace?.length||1,style={cursor:onClick?"pointer":"default"},navigator=(0,use_navigator.b)();return(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,onClick:()=>{onClick(),navigatorPath&&navigator.goTo(navigatorPath)},style,className:"font-library-modal__font-card",children:(0,jsx_runtime.jsxs)(flex_component.A,{justify:"space-between",wrap:!1,children:[(0,jsx_runtime.jsx)(font_demo,{font}),(0,jsx_runtime.jsxs)(flex_component.A,{justify:"flex-end",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(text_component.A,{className:"font-library-modal__font-card__count",children:variantsText||(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d variant","%d variants",variantsCount),variantsCount)})}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_icon.A,{icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A})})]})]})})}FontDemo.__docgenInfo={description:"",methods:[],displayName:"FontDemo"},FontCard.displayName="FontCard";const font_card=FontCard;FontCard.__docgenInfo={description:"",methods:[],displayName:"FontCard"};const{kebabCase:library_font_variant_kebabCase}=src_lock_unlock_unlock(private_apis.j);function LibraryFontVariant({face,font}){const{isFontActivated,toggleActivateFont}=(0,react.useContext)(FontLibraryContext),isInstalled=font?.fontFace?.length>0?isFontActivated(font.slug,face.fontStyle,face.fontWeight,font.source):isFontActivated(font.slug,null,null,font.source),handleToggleActivation=()=>{font?.fontFace?.length>0?toggleActivateFont(font,face):toggleActivateFont(font)},displayName=font.name+" "+getFontFaceVariantName(face),checkboxId=library_font_variant_kebabCase(`${font.slug}-${getFontFaceVariantName(face)}`);return(0,jsx_runtime.jsx)("div",{className:"font-library-modal__font-card",children:(0,jsx_runtime.jsxs)(flex_component.A,{justify:"flex-start",align:"center",gap:"1rem",children:[(0,jsx_runtime.jsx)(checkbox_control.A,{checked:isInstalled,onChange:handleToggleActivation,__nextHasNoMarginBottom:!0,id:checkboxId}),(0,jsx_runtime.jsx)("label",{htmlFor:checkboxId,children:(0,jsx_runtime.jsx)(font_demo,{font:face,text:displayName,onClick:handleToggleActivation})})]})})}LibraryFontVariant.displayName="LibraryFontVariant";const library_font_variant=LibraryFontVariant;function getNumericFontWeight(value){switch(value){case"normal":return 400;case"bold":return 700;case"bolder":return 500;case"lighter":return 300;default:return parseInt(value,10)}}function sortFontFaces(faces){return faces.sort(((a,b)=>"normal"===a.fontStyle&&"normal"!==b.fontStyle?-1:"normal"===b.fontStyle&&"normal"!==a.fontStyle?1:a.fontStyle===b.fontStyle?getNumericFontWeight(a.fontWeight)-getNumericFontWeight(b.fontWeight):a.fontStyle.localeCompare(b.fontStyle)))}LibraryFontVariant.__docgenInfo={description:"",methods:[],displayName:"LibraryFontVariant"};const{useGlobalSetting:installed_fonts_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb);function InstalledFonts(){var _libraryFontSelected$;const{baseCustomFonts,libraryFontSelected,handleSetLibraryFontSelected,refreshLibrary,uninstallFontFamily,isResolvingLibrary,isInstalling,saveFontFamilies,getFontFacesActivated}=(0,react.useContext)(FontLibraryContext),[fontFamilies,setFontFamilies]=installed_fonts_useGlobalSetting("typography.fontFamilies"),[isConfirmDeleteOpen,setIsConfirmDeleteOpen]=(0,react.useState)(!1),[notice,setNotice]=(0,react.useState)(!1),[baseFontFamilies]=installed_fonts_useGlobalSetting("typography.fontFamilies",void 0,"base"),globalStylesId=(0,use_select.A)((select=>{const{__experimentalGetCurrentGlobalStylesId}=select(core_data_build_module.M_);return __experimentalGetCurrentGlobalStylesId()})),globalStyles=(0,core_data_build_module.MA)("root","globalStyles",globalStylesId),fontFamiliesHasChanges=!!globalStyles?.edits?.settings?.typography?.fontFamilies,themeFonts=fontFamilies?.theme?fontFamilies.theme.map((f=>setUIValuesNeeded(f,{source:"theme"}))).sort(((a,b)=>a.name.localeCompare(b.name))):[],themeFontsSlugs=new Set(themeFonts.map((f=>f.slug))),baseThemeFonts=baseFontFamilies?.theme?themeFonts.concat(baseFontFamilies.theme.filter((f=>!themeFontsSlugs.has(f.slug))).map((f=>setUIValuesNeeded(f,{source:"theme"}))).sort(((a,b)=>a.name.localeCompare(b.name)))):[],customFontFamilyId="custom"===libraryFontSelected?.source&&libraryFontSelected?.id,canUserDelete=(0,use_select.A)((select=>{const{canUser}=select(core_data_build_module.M_);return customFontFamilyId&&canUser("delete",{kind:"postType",name:"wp_font_family",id:customFontFamilyId})}),[customFontFamilyId]),shouldDisplayDeleteButton=!!libraryFontSelected&&"theme"!==libraryFontSelected?.source&&canUserDelete,getFontCardVariantsText=font=>{const variantsInstalled=font?.fontFace?.length>0?font.fontFace.length:1,variantsActive=getFontFacesActivated(font.slug,font.source).length;return(0,i18n_build_module.nv)((0,i18n_build_module.__)("%1$s/%2$s variants active"),variantsActive,variantsInstalled)};(0,react.useEffect)((()=>{handleSetLibraryFontSelected(libraryFontSelected),refreshLibrary()}),[]);const activeFontsCount=libraryFontSelected?getFontFacesActivated(libraryFontSelected.slug,libraryFontSelected.source).length:0,selectedFontsCount=null!==(_libraryFontSelected$=libraryFontSelected?.fontFace?.length)&&void 0!==_libraryFontSelected$?_libraryFontSelected$:libraryFontSelected?.fontFamily?1:0,isIndeterminate=activeFontsCount>0&&activeFontsCount!==selectedFontsCount,isSelectAllChecked=activeFontsCount===selectedFontsCount,hasFonts=baseThemeFonts.length>0||baseCustomFonts.length>0;return(0,jsx_runtime.jsxs)("div",{className:"font-library-modal__tabpanel-layout",children:[isResolvingLibrary&&(0,jsx_runtime.jsx)("div",{className:"font-library-modal__loading",children:(0,jsx_runtime.jsx)(progress_bar,{})}),!isResolvingLibrary&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(build_module_navigator.m,{initialPath:libraryFontSelected?"/fontFamily":"/",children:[(0,jsx_runtime.jsx)(build_module_navigator.m.Screen,{path:"/",children:(0,jsx_runtime.jsxs)(component.A,{spacing:"8",children:[notice&&(0,jsx_runtime.jsx)(build_module_notice.A,{status:notice.type,onRemove:()=>setNotice(null),children:notice.message}),!hasFonts&&(0,jsx_runtime.jsx)(text_component.A,{as:"p",children:(0,i18n_build_module.__)("No fonts installed.")}),baseThemeFonts.length>0&&(0,jsx_runtime.jsxs)(component.A,{children:[(0,jsx_runtime.jsx)("h2",{className:"font-library-modal__fonts-title",children:(0,i18n_build_module._x)("Theme","font source")}),(0,jsx_runtime.jsx)("ul",{role:"list",className:"font-library-modal__fonts-list",children:baseThemeFonts.map((font=>(0,jsx_runtime.jsx)("li",{className:"font-library-modal__fonts-list-item",children:(0,jsx_runtime.jsx)(font_card,{font,navigatorPath:"/fontFamily",variantsText:getFontCardVariantsText(font),onClick:()=>{setNotice(null),handleSetLibraryFontSelected(font)}})},font.slug)))})]}),baseCustomFonts.length>0&&(0,jsx_runtime.jsxs)(component.A,{children:[(0,jsx_runtime.jsx)("h2",{className:"font-library-modal__fonts-title",children:(0,i18n_build_module._x)("Custom","font source")}),(0,jsx_runtime.jsx)("ul",{role:"list",className:"font-library-modal__fonts-list",children:baseCustomFonts.map((font=>(0,jsx_runtime.jsx)("li",{className:"font-library-modal__fonts-list-item",children:(0,jsx_runtime.jsx)(font_card,{font,navigatorPath:"/fontFamily",variantsText:getFontCardVariantsText(font),onClick:()=>{setNotice(null),handleSetLibraryFontSelected(font)}})},font.slug)))})]})]})}),(0,jsx_runtime.jsxs)(build_module_navigator.m.Screen,{path:"/fontFamily",children:[(0,jsx_runtime.jsx)(ConfirmDeleteDialog,{font:libraryFontSelected,isOpen:isConfirmDeleteOpen,setIsOpen:setIsConfirmDeleteOpen,setNotice,uninstallFontFamily,handleSetLibraryFontSelected}),(0,jsx_runtime.jsxs)(flex_component.A,{justify:"flex-start",children:[(0,jsx_runtime.jsx)(build_module_navigator.m.BackButton,{icon:(0,i18n_build_module.V8)()?chevron_right.A:chevron_left.A,size:"small",onClick:()=>{handleSetLibraryFontSelected(null),setNotice(null)},label:(0,i18n_build_module.__)("Back")}),(0,jsx_runtime.jsx)(heading_component.A,{level:2,size:13,className:"edit-site-global-styles-header",children:libraryFontSelected?.name})]}),notice&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(spacer_component.A,{margin:1}),(0,jsx_runtime.jsx)(build_module_notice.A,{status:notice.type,onRemove:()=>setNotice(null),children:notice.message}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:1})]}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:4}),(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.__)("Choose font variants. Keep in mind that too many variants could make your site slower.")}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:4}),(0,jsx_runtime.jsxs)(component.A,{spacing:0,children:[(0,jsx_runtime.jsx)(checkbox_control.A,{className:"font-library-modal__select-all",label:(0,i18n_build_module.__)("Select all"),checked:isSelectAllChecked,onChange:()=>{var _fontFamilies$library;const initialFonts=null!==(_fontFamilies$library=fontFamilies?.[libraryFontSelected.source]?.filter((f=>f.slug!==libraryFontSelected.slug)))&&void 0!==_fontFamilies$library?_fontFamilies$library:[],newFonts=isSelectAllChecked?initialFonts:[...initialFonts,libraryFontSelected];setFontFamilies({...fontFamilies,[libraryFontSelected.source]:newFonts}),libraryFontSelected.fontFace&&libraryFontSelected.fontFace.forEach((face=>{isSelectAllChecked?unloadFontFaceInBrowser(face,"all"):loadFontFaceInBrowser(face,getDisplaySrcFromFontFace(face?.src),"all")}))},indeterminate:isIndeterminate,__nextHasNoMarginBottom:!0}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:8}),(0,jsx_runtime.jsx)("ul",{role:"list",className:"font-library-modal__fonts-list",children:(font=>font?font.fontFace&&font.fontFace.length?sortFontFaces(font.fontFace):[{fontFamily:font.fontFamily,fontStyle:"normal",fontWeight:"400"}]:[])(libraryFontSelected).map(((face,i)=>(0,jsx_runtime.jsx)("li",{className:"font-library-modal__fonts-list-item",children:(0,jsx_runtime.jsx)(library_font_variant,{font:libraryFontSelected,face},`face${i}`)},`face${i}`)))})]})]})]}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-end",className:"font-library-modal__footer",children:[isInstalling&&(0,jsx_runtime.jsx)(progress_bar,{}),shouldDisplayDeleteButton&&(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,isDestructive:!0,variant:"tertiary",onClick:()=>{setIsConfirmDeleteOpen(!0)},children:(0,i18n_build_module.__)("Delete")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",onClick:async()=>{setNotice(null);try{await saveFontFamilies(fontFamilies),setNotice({type:"success",message:(0,i18n_build_module.__)("Font family updated successfully.")})}catch(error){setNotice({type:"error",message:(0,i18n_build_module.nv)((0,i18n_build_module.__)("There was an error updating the font family. %s"),error.message)})}},disabled:!fontFamiliesHasChanges,accessibleWhenDisabled:!0,children:(0,i18n_build_module.__)("Update")})]})]})]})}function ConfirmDeleteDialog({font,isOpen,setIsOpen,setNotice,uninstallFontFamily,handleSetLibraryFontSelected}){const navigator=(0,use_navigator.b)();return(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen,cancelButtonText:(0,i18n_build_module.__)("Cancel"),confirmButtonText:(0,i18n_build_module.__)("Delete"),onCancel:()=>{setIsOpen(!1)},onConfirm:async()=>{setNotice(null),setIsOpen(!1);try{await uninstallFontFamily(font),navigator.goBack(),handleSetLibraryFontSelected(null),setNotice({type:"success",message:(0,i18n_build_module.__)("Font family uninstalled successfully.")})}catch(error){setNotice({type:"error",message:(0,i18n_build_module.__)("There was an error uninstalling the font family.")+error.message})}},size:"medium",children:font&&(0,i18n_build_module.nv)((0,i18n_build_module.__)('Are you sure you want to delete "%s" font and all its variants and assets?'),font.name)})}InstalledFonts.displayName="InstalledFonts",ConfirmDeleteDialog.displayName="ConfirmDeleteDialog";const installed_fonts=InstalledFonts;function isFontFontFaceInOutline(slug,face,outline){return face?!!outline[slug]?.[`${face.fontStyle}-${face.fontWeight}`]:!!outline[slug]}function GoogleFontsConfirmDialog(){return(0,jsx_runtime.jsx)("div",{className:"font-library__google-fonts-confirm",children:(0,jsx_runtime.jsx)(card_component,{children:(0,jsx_runtime.jsxs)(card_body_component,{children:[(0,jsx_runtime.jsx)(heading_component.A,{level:2,children:(0,i18n_build_module.__)("Connect to Google Fonts")}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:6}),(0,jsx_runtime.jsx)(text_component.A,{as:"p",children:(0,i18n_build_module.__)("To install fonts from Google you must give permission to connect directly to Google servers. The fonts you install will be downloaded from Google and stored on your site. Your site will then use these locally-hosted fonts.")}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:3}),(0,jsx_runtime.jsx)(text_component.A,{as:"p",children:(0,i18n_build_module.__)("You can alternatively upload files directly on the Upload tab.")}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:6}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",onClick:()=>{window.localStorage.setItem("wp-font-library-google-fonts-permission","true"),window.dispatchEvent(new Event("storage"))},children:(0,i18n_build_module.__)("Allow access to Google Fonts")})]})})})}InstalledFonts.__docgenInfo={description:"",methods:[],displayName:"InstalledFonts"},GoogleFontsConfirmDialog.displayName="GoogleFontsConfirmDialog";const google_fonts_confirm_dialog=GoogleFontsConfirmDialog;GoogleFontsConfirmDialog.__docgenInfo={description:"",methods:[],displayName:"GoogleFontsConfirmDialog"};const{kebabCase:collection_font_variant_kebabCase}=src_lock_unlock_unlock(private_apis.j);function CollectionFontVariant({face,font,handleToggleVariant,selected}){const handleToggleActivation=()=>{font?.fontFace?handleToggleVariant(font,face):handleToggleVariant(font)},displayName=font.name+" "+getFontFaceVariantName(face),checkboxId=collection_font_variant_kebabCase(`${font.slug}-${getFontFaceVariantName(face)}`);return(0,jsx_runtime.jsx)("div",{className:"font-library-modal__font-card",children:(0,jsx_runtime.jsxs)(flex_component.A,{justify:"flex-start",align:"center",gap:"1rem",children:[(0,jsx_runtime.jsx)(checkbox_control.A,{checked:selected,onChange:handleToggleActivation,__nextHasNoMarginBottom:!0,id:checkboxId}),(0,jsx_runtime.jsx)("label",{htmlFor:checkboxId,children:(0,jsx_runtime.jsx)(font_demo,{font:face,text:displayName,onClick:handleToggleActivation})})]})})}CollectionFontVariant.displayName="CollectionFontVariant";const collection_font_variant=CollectionFontVariant;CollectionFontVariant.__docgenInfo={description:"",methods:[],displayName:"CollectionFontVariant"};const DEFAULT_CATEGORY={slug:"all",name:(0,i18n_build_module._x)("All","font categories")};function FontCollection({slug}){var _selectedCollection$c;const requiresPermission="google-fonts"===slug,getGoogleFontsPermissionFromStorage=()=>"true"===window.localStorage.getItem("wp-font-library-google-fonts-permission"),[selectedFont,setSelectedFont]=(0,react.useState)(null),[notice,setNotice]=(0,react.useState)(!1),[fontsToInstall,setFontsToInstall]=(0,react.useState)([]),[page,setPage]=(0,react.useState)(1),[filters,setFilters]=(0,react.useState)({}),[renderConfirmDialog,setRenderConfirmDialog]=(0,react.useState)(requiresPermission&&!getGoogleFontsPermissionFromStorage()),{collections,getFontCollection,installFonts,isInstalling}=(0,react.useContext)(FontLibraryContext),selectedCollection=collections.find((collection=>collection.slug===slug));(0,react.useEffect)((()=>{const handleStorage=()=>{setRenderConfirmDialog(requiresPermission&&!getGoogleFontsPermissionFromStorage())};return handleStorage(),window.addEventListener("storage",handleStorage),()=>window.removeEventListener("storage",handleStorage)}),[slug,requiresPermission]);const revokeAccess=()=>{window.localStorage.setItem("wp-font-library-google-fonts-permission","false"),window.dispatchEvent(new Event("storage"))};(0,react.useEffect)((()=>{(async()=>{try{await getFontCollection(slug),resetFilters()}catch(e){notice||setNotice({type:"error",message:e?.message})}})()}),[slug,getFontCollection,setNotice,notice]),(0,react.useEffect)((()=>{setSelectedFont(null)}),[slug]),(0,react.useEffect)((()=>{setFontsToInstall([])}),[selectedFont]);const collectionFonts=(0,react.useMemo)((()=>{var _selectedCollection$f;return null!==(_selectedCollection$f=selectedCollection?.font_families)&&void 0!==_selectedCollection$f?_selectedCollection$f:[]}),[selectedCollection]),collectionCategories=null!==(_selectedCollection$c=selectedCollection?.categories)&&void 0!==_selectedCollection$c?_selectedCollection$c:[],categories=[DEFAULT_CATEGORY,...collectionCategories],fonts=(0,react.useMemo)((()=>function filterFonts(fonts,filters){const{category,search}=filters;let filteredFonts=fonts||[];return category&&"all"!==category&&(filteredFonts=filteredFonts.filter((font=>-1!==font.categories.indexOf(category)))),search&&(filteredFonts=filteredFonts.filter((font=>font.font_family_settings.name.toLowerCase().includes(search.toLowerCase())))),filteredFonts}(collectionFonts,filters)),[collectionFonts,filters]),isLoading=!selectedCollection?.font_families&&!notice,windowHeight=Math.max(window.innerHeight,500),pageSize=Math.floor((windowHeight-417)/61),totalPages=Math.ceil(fonts.length/pageSize),itemsStart=(page-1)*pageSize,itemsLimit=page*pageSize,items=fonts.slice(itemsStart,itemsLimit),debouncedUpdateSearchInput=(0,debounce.s)((value=>{setFilters({...filters,search:value}),setPage(1)}),300),resetFilters=()=>{setFilters({}),setPage(1)},handleToggleVariant=(font,face)=>{const newFontsToInstall=toggleFont(font,face,fontsToInstall);setFontsToInstall(newFontsToInstall)},fontToInstallOutline=function getFontsOutline(fonts){return fonts.reduce(((acc,font)=>({...acc,[font.slug]:(font?.fontFace||[]).reduce(((faces,face)=>({...faces,[`${face.fontStyle}-${face.fontWeight}`]:!0})),{})})),{})}(fontsToInstall),selectFontCount=fontsToInstall.length>0?fontsToInstall[0]?.fontFace?.length:0,isIndeterminate=selectFontCount>0&&selectFontCount!==selectedFont?.fontFace?.length,isSelectAllChecked=selectFontCount===selectedFont?.fontFace?.length;if(renderConfirmDialog)return(0,jsx_runtime.jsx)(google_fonts_confirm_dialog,{});const ActionsComponent=()=>"google-fonts"!==slug||renderConfirmDialog||selectedFont?null:(0,jsx_runtime.jsx)(dropdown_menu.A,{icon:more_vertical.A,label:(0,i18n_build_module.__)("Actions"),popoverProps:{position:"bottom left"},controls:[{title:(0,i18n_build_module.__)("Revoke access to Google Fonts"),onClick:revokeAccess}]});return(0,jsx_runtime.jsxs)("div",{className:"font-library-modal__tabpanel-layout",children:[isLoading&&(0,jsx_runtime.jsx)("div",{className:"font-library-modal__loading",children:(0,jsx_runtime.jsx)(progress_bar,{})}),!isLoading&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(build_module_navigator.m,{initialPath:"/",className:"font-library-modal__tabpanel-layout",children:[(0,jsx_runtime.jsxs)(build_module_navigator.m.Screen,{path:"/",children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",children:[(0,jsx_runtime.jsxs)(component.A,{children:[(0,jsx_runtime.jsx)(heading_component.A,{level:2,size:13,children:selectedCollection.name}),(0,jsx_runtime.jsx)(text_component.A,{children:selectedCollection.description})]}),(0,jsx_runtime.jsx)(ActionsComponent,{})]}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:4}),(0,jsx_runtime.jsxs)(flex_component.A,{children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(search_control.A,{className:"font-library-modal__search",value:filters.search,placeholder:(0,i18n_build_module.__)("Font name…"),label:(0,i18n_build_module.__)("Search"),onChange:debouncedUpdateSearchInput,__nextHasNoMarginBottom:!0,hideLabelFromVision:!1})}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(select_control.A,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,i18n_build_module.__)("Category"),value:filters.category,onChange:category=>{setFilters({...filters,category}),setPage(1)},children:categories&&categories.map((category=>(0,jsx_runtime.jsx)("option",{value:category.slug,children:category.name},category.slug)))})})]}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:4}),!!selectedCollection?.font_families?.length&&!fonts.length&&(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.__)("No fonts found. Try with a different search term")}),(0,jsx_runtime.jsx)("div",{className:"font-library-modal__fonts-grid__main",children:(0,jsx_runtime.jsx)("ul",{role:"list",className:"font-library-modal__fonts-list",children:items.map((font=>(0,jsx_runtime.jsx)("li",{className:"font-library-modal__fonts-list-item",children:(0,jsx_runtime.jsx)(font_card,{font:font.font_family_settings,navigatorPath:"/fontFamily",onClick:()=>{setSelectedFont(font.font_family_settings)}})},font.font_family_settings.slug)))})})]}),(0,jsx_runtime.jsxs)(build_module_navigator.m.Screen,{path:"/fontFamily",children:[(0,jsx_runtime.jsxs)(flex_component.A,{justify:"flex-start",children:[(0,jsx_runtime.jsx)(build_module_navigator.m.BackButton,{icon:(0,i18n_build_module.V8)()?chevron_right.A:chevron_left.A,size:"small",onClick:()=>{setSelectedFont(null),setNotice(null)},label:(0,i18n_build_module.__)("Back")}),(0,jsx_runtime.jsx)(heading_component.A,{level:2,size:13,className:"edit-site-global-styles-header",children:selectedFont?.name})]}),notice&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(spacer_component.A,{margin:1}),(0,jsx_runtime.jsx)(build_module_notice.A,{status:notice.type,onRemove:()=>setNotice(null),children:notice.message}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:1})]}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:4}),(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.__)("Select font variants to install.")}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:4}),(0,jsx_runtime.jsx)(checkbox_control.A,{className:"font-library-modal__select-all",label:(0,i18n_build_module.__)("Select all"),checked:isSelectAllChecked,onChange:()=>{setFontsToInstall(isSelectAllChecked?[]:[selectedFont])},indeterminate:isIndeterminate,__nextHasNoMarginBottom:!0}),(0,jsx_runtime.jsx)(component.A,{spacing:0,children:(0,jsx_runtime.jsx)("ul",{role:"list",className:"font-library-modal__fonts-list",children:(fontFamily=selectedFont,fontFamily?fontFamily.fontFace&&fontFamily.fontFace.length?sortFontFaces(fontFamily.fontFace):[{fontFamily:fontFamily.fontFamily,fontStyle:"normal",fontWeight:"400"}]:[]).map(((face,i)=>(0,jsx_runtime.jsx)("li",{className:"font-library-modal__fonts-list-item",children:(0,jsx_runtime.jsx)(collection_font_variant,{font:selectedFont,face,handleToggleVariant,selected:isFontFontFaceInOutline(selectedFont.slug,selectedFont.fontFace?face:null,fontToInstallOutline)})},`face${i}`)))})}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:16})]})]}),selectedFont&&(0,jsx_runtime.jsx)(flex_component.A,{justify:"flex-end",className:"font-library-modal__footer",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",onClick:async()=>{setNotice(null);const fontFamily=fontsToInstall[0];try{fontFamily?.fontFace&&await Promise.all(fontFamily.fontFace.map((async fontFace=>{fontFace.src&&(fontFace.file=await async function downloadFontFaceAssets(src){src=Array.isArray(src)?src:[src];const files=await Promise.all(src.map((async url=>fetch(new Request(url)).then((response=>{if(!response.ok)throw new Error(`Error downloading font face asset from ${url}. Server responded with status: ${response.status}`);return response.blob()})).then((blob=>{const filename=url.split("/").pop();return new utils_File([blob],filename,{type:blob.type})})))));return 1===files.length?files[0]:files}(fontFace.src))})))}catch(error){return void setNotice({type:"error",message:(0,i18n_build_module.__)("Error installing the fonts, could not be downloaded.")})}try{await installFonts([fontFamily]),setNotice({type:"success",message:(0,i18n_build_module.__)("Fonts were installed successfully.")})}catch(error){setNotice({type:"error",message:error.message})}setFontsToInstall([])},isBusy:isInstalling,disabled:0===fontsToInstall.length||isInstalling,accessibleWhenDisabled:!0,children:(0,i18n_build_module.__)("Install")})}),!selectedFont&&(0,jsx_runtime.jsxs)(h_stack_component.A,{spacing:4,justify:"center",className:"font-library-modal__footer",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{label:(0,i18n_build_module.__)("Previous page"),size:"compact",onClick:()=>setPage(page-1),disabled:1===page,showTooltip:!0,accessibleWhenDisabled:!0,icon:(0,i18n_build_module.V8)()?chevron_right.A:chevron_left.A,tooltipPosition:"top"}),(0,jsx_runtime.jsx)(h_stack_component.A,{justify:"flex-start",expanded:!1,spacing:2,className:"font-library-modal__page-selection",children:(0,create_interpolate_element.A)((0,i18n_build_module.nv)((0,i18n_build_module._x)("Page <CurrentPageControl /> of %s","paging"),totalPages),{CurrentPageControl:(0,jsx_runtime.jsx)(select_control.A,{"aria-label":(0,i18n_build_module.__)("Current page"),value:page,options:[...Array(totalPages)].map(((e,i)=>({label:i+1,value:i+1}))),onChange:newPage=>setPage(parseInt(newPage)),size:"compact",__nextHasNoMarginBottom:!0})})}),(0,jsx_runtime.jsx)(build_module_button.Ay,{label:(0,i18n_build_module.__)("Next page"),size:"compact",onClick:()=>setPage(page+1),disabled:page===totalPages,accessibleWhenDisabled:!0,icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A,tooltipPosition:"top"})]})]})]});var fontFamily}FontCollection.displayName="FontCollection";const font_collection=FontCollection;FontCollection.__docgenInfo={description:"",methods:[],displayName:"FontCollection"};var form_file_upload=__webpack_require__("./packages/components/build-module/form-file-upload/index.js"),unbrotli=__webpack_require__("./packages/edit-site/lib/unbrotli.js"),unbrotli_default=__webpack_require__.n(unbrotli),inflate=__webpack_require__("./packages/edit-site/lib/inflate.js"),inflate_default=__webpack_require__.n(inflate);globalThis.fetch;class lib_font_browser_Event{constructor(type,detail={},msg){this.type=type,this.detail=detail,this.msg=msg,Object.defineProperty(this,"__mayPropagate",{enumerable:!1,writable:!0}),this.__mayPropagate=!0}preventDefault(){}stopPropagation(){this.__mayPropagate=!1}valueOf(){return this}toString(){return this.msg?`[${this.type} event]: ${this.msg}`:`[${this.type} event]`}}class EventManager{constructor(){this.listeners={}}addEventListener(type,listener,useCapture){let bin=this.listeners[type]||[];useCapture?bin.unshift(listener):bin.push(listener),this.listeners[type]=bin}removeEventListener(type,listener){let bin=this.listeners[type]||[],pos=bin.findIndex((e=>e===listener));pos>-1&&(bin.splice(pos,1),this.listeners[type]=bin)}dispatch(event){let bin=this.listeners[event.type];if(bin)for(let l=0,e=bin.length;l<e&&event.__mayPropagate;l++)bin[l](event)}}const startDate=new Date("1904-01-01T00:00:00+0000").getTime();class Parser{constructor(dict,dataview,name){this.name=(name||dict.tag||"").trim(),this.length=dict.length,this.start=dict.offset,this.offset=0,this.data=dataview,["getInt8","getUint8","getInt16","getUint16","getInt32","getUint32","getBigInt64","getBigUint64"].forEach((name=>{let fn=name.replace(/get(Big)?/,"").toLowerCase(),increment=parseInt(name.replace(/[^\d]/g,""))/8;Object.defineProperty(this,fn,{get:()=>this.getValue(name,increment)})}))}get currentPosition(){return this.start+this.offset}set currentPosition(position){this.start=position,this.offset=0}skip(n=0,bits=8){this.offset+=n*bits/8}getValue(type,increment){let pos=this.start+this.offset;this.offset+=increment;try{return this.data[type](pos)}catch(e){throw console.error("parser",type,increment,this),console.error("parser",this.start,this.offset),e}}flags(n){if(8===n||16===n||32===n||64===n)return this[`uint${n}`].toString(2).padStart(n,0).split("").map((v=>"1"===v));console.error("Error parsing flags: flag types can only be 1, 2, 4, or 8 bytes long"),console.trace()}get tag(){const t=this.uint32;return function asText(data){return Array.from(data).map((v=>String.fromCharCode(v))).join("")}([t>>24&255,t>>16&255,t>>8&255,255&t])}get fixed(){return this.int16+Math.round(1e3*this.uint16/65356)/1e3}get legacyFixed(){let major=this.uint16,minor=this.uint16.toString(16).padStart(4,0);return parseFloat(`${major}.${minor}`)}get uint24(){return(this.uint8<<16)+(this.uint8<<8)+this.uint8}get uint128(){let value=0;for(let i=0;i<5;i++){let byte=this.uint8;if(value=128*value+(127&byte),byte<128)break}return value}get longdatetime(){return new Date(startDate+1e3*parseInt(this.int64.toString()))}get fword(){return this.int16}get ufword(){return this.uint16}get Offset16(){return this.uint16}get Offset32(){return this.uint32}get F2DOT14(){const bits=p.uint16;return[0,1,-2,-1][bits>>14]+(16383&bits)/16384}verifyLength(){this.offset!=this.length&&console.error(`unexpected parsed table size (${this.offset}) for "${this.name}" (expected ${this.length})`)}readBytes(n=0,position=0,bits=8,signed=!1){if(0===(n=n||this.length))return[];position&&(this.currentPosition=position);const fn=`${signed?"":"u"}int${bits}`,slice=[];for(;n--;)slice.push(this[fn]);return slice}}class ParsedData{constructor(parser){const pGetter={enumerable:!1,get:()=>parser};Object.defineProperty(this,"parser",pGetter);const start=parser.currentPosition,startGetter={enumerable:!1,get:()=>start};Object.defineProperty(this,"start",startGetter)}load(struct){Object.keys(struct).forEach((p=>{let props=Object.getOwnPropertyDescriptor(struct,p);props.get?this[p]=props.get.bind(this):void 0!==props.value&&(this[p]=props.value)})),this.parser.length&&this.parser.verifyLength()}}class SimpleTable extends ParsedData{constructor(dict,dataview,name){const{parser,start}=super(new Parser(dict,dataview,name)),pGetter={enumerable:!1,get:()=>parser};Object.defineProperty(this,"p",pGetter);const startGetter={enumerable:!1,get:()=>start};Object.defineProperty(this,"tableStart",startGetter)}}function lazy$1(object,property,getter){let val;Object.defineProperty(object,property,{get:()=>val||(val=getter(),val),enumerable:!0})}class SFNT extends SimpleTable{constructor(font,dataview,createTable){const{p}=super({offset:0,length:12},dataview,"sfnt");this.version=p.uint32,this.numTables=p.uint16,this.searchRange=p.uint16,this.entrySelector=p.uint16,this.rangeShift=p.uint16,p.verifyLength(),this.directory=[...new Array(this.numTables)].map((_=>new TableRecord(p))),this.tables={},this.directory.forEach((entry=>{lazy$1(this.tables,entry.tag.trim(),(()=>createTable(this.tables,{tag:entry.tag,offset:entry.offset,length:entry.length},dataview)))}))}}class TableRecord{constructor(p){this.tag=p.tag,this.checksum=p.uint32,this.offset=p.uint32,this.length=p.uint32}}const gzipDecode=inflate_default().inflate||void 0;let nativeGzipDecode;class WOFF$1 extends SimpleTable{constructor(font,dataview,createTable){const{p}=super({offset:0,length:44},dataview,"woff");this.signature=p.tag,this.flavor=p.uint32,this.length=p.uint32,this.numTables=p.uint16,p.uint16,this.totalSfntSize=p.uint32,this.majorVersion=p.uint16,this.minorVersion=p.uint16,this.metaOffset=p.uint32,this.metaLength=p.uint32,this.metaOrigLength=p.uint32,this.privOffset=p.uint32,this.privLength=p.uint32,p.verifyLength(),this.directory=[...new Array(this.numTables)].map((_=>new WoffTableDirectoryEntry(p))),buildWoffLazyLookups(this,dataview,createTable)}}class WoffTableDirectoryEntry{constructor(p){this.tag=p.tag,this.offset=p.uint32,this.compLength=p.uint32,this.origLength=p.uint32,this.origChecksum=p.uint32}}function buildWoffLazyLookups(woff,dataview,createTable){woff.tables={},woff.directory.forEach((entry=>{lazy$1(woff.tables,entry.tag.trim(),(()=>{let offset=0,view=dataview;if(entry.compLength!==entry.origLength){const data=dataview.buffer.slice(entry.offset,entry.offset+entry.compLength);let unpacked;if(gzipDecode)unpacked=gzipDecode(new Uint8Array(data));else{if(!nativeGzipDecode){const msg="no brotli decoder available to decode WOFF2 font";throw font.onerror&&font.onerror(msg),new Error(msg)}unpacked=nativeGzipDecode(new Uint8Array(data))}view=new DataView(unpacked.buffer)}else offset=entry.offset;return createTable(woff.tables,{tag:entry.tag,offset,length:entry.origLength},view)}))}))}const brotliDecode=unbrotli_default();let nativeBrotliDecode;class WOFF2$1 extends SimpleTable{constructor(font,dataview,createTable){const{p}=super({offset:0,length:48},dataview,"woff2");this.signature=p.tag,this.flavor=p.uint32,this.length=p.uint32,this.numTables=p.uint16,p.uint16,this.totalSfntSize=p.uint32,this.totalCompressedSize=p.uint32,this.majorVersion=p.uint16,this.minorVersion=p.uint16,this.metaOffset=p.uint32,this.metaLength=p.uint32,this.metaOrigLength=p.uint32,this.privOffset=p.uint32,this.privLength=p.uint32,p.verifyLength(),this.directory=[...new Array(this.numTables)].map((_=>new Woff2TableDirectoryEntry(p)));let decoded,dictOffset=p.currentPosition;this.directory[0].offset=0,this.directory.forEach(((e,i)=>{let next=this.directory[i+1];next&&(next.offset=e.offset+(void 0!==e.transformLength?e.transformLength:e.origLength))}));let buffer=dataview.buffer.slice(dictOffset);if(brotliDecode)decoded=brotliDecode(new Uint8Array(buffer));else{if(!nativeBrotliDecode){const msg="no brotli decoder available to decode WOFF2 font";throw font.onerror&&font.onerror(msg),new Error(msg)}decoded=new Uint8Array(nativeBrotliDecode(buffer))}!function buildWoff2LazyLookups(woff2,decoded,createTable){woff2.tables={},woff2.directory.forEach((entry=>{lazy$1(woff2.tables,entry.tag.trim(),(()=>{const start=entry.offset,end=start+(entry.transformLength?entry.transformLength:entry.origLength),data=new DataView(decoded.slice(start,end).buffer);try{return createTable(woff2.tables,{tag:entry.tag,offset:0,length:entry.origLength},data)}catch(e){console.error(e)}}))}))}(this,decoded,createTable)}}class Woff2TableDirectoryEntry{constructor(p){this.flags=p.uint8;const tagNumber=this.tagNumber=63&this.flags;this.tag=63===tagNumber?p.tag:function getWOFF2Tag(flag){return["cmap","head","hhea","hmtx","maxp","name","OS/2","post","cvt ","fpgm","glyf","loca","prep","CFF ","VORG","EBDT","EBLC","gasp","hdmx","kern","LTSH","PCLT","VDMX","vhea","vmtx","BASE","GDEF","GPOS","GSUB","EBSC","JSTF","MATH","CBDT","CBLC","COLR","CPAL","SVG ","sbix","acnt","avar","bdat","bloc","bsln","cvar","fdsc","feat","fmtx","fvar","gvar","hsty","just","lcar","mort","morx","opbd","prop","trak","Zapf","Silf","Glat","Gloc","Feat","Sill"][63&flag]}(tagNumber);let hasTransforms=0!==(this.transformVersion=(192&this.flags)>>6);"glyf"!==this.tag&&"loca"!==this.tag||(hasTransforms=3!==this.transformVersion),this.origLength=p.uint128,hasTransforms&&(this.transformLength=p.uint128)}}const tableClasses={};let tableClassesLoaded=!1;function createTable(tables,dict,dataview){let name=dict.tag.replace(/[^\w\d]/g,""),Type=tableClasses[name];return Type?new Type(dict,dataview,tables):(console.warn(`lib-font has no definition for ${name}. The table was skipped.`),{})}function loadTableClasses(){let count=0;function checkLoaded(resolve,reject){if(!tableClassesLoaded)return count>10?reject(new Error("loading took too long")):(count++,setTimeout((()=>checkLoaded(resolve)),250));resolve(createTable)}return new Promise(((resolve,reject)=>checkLoaded(resolve)))}async function setupFontFace(name,url,options={}){if(!globalThis.document)return;let format=function getFontCSSFormat(path,errorOnStyle){let pos=path.lastIndexOf("."),ext=(path.substring(pos+1)||"").toLowerCase(),format={ttf:"truetype",otf:"opentype",woff:"woff",woff2:"woff2"}[ext];if(format)return format;let msg={eot:"The .eot format is not supported: it died in January 12, 2016, when Microsoft retired all versions of IE that didn't already support WOFF.",svg:"The .svg format is not supported: SVG fonts (not to be confused with OpenType with embedded SVG) were so bad we took the entire fonts chapter out of the SVG specification again.",fon:"The .fon format is not supported: this is an ancient Windows bitmap font format.",ttc:"Based on the current CSS specification, font collections are not (yet?) supported."}[ext];if(msg||(msg=`${path} is not a known webfont format.`),errorOnStyle)throw new Error(msg);console.warn(`Could not load font: ${msg}`)}(url,options.errorOnStyle);if(!format)return;let style=document.createElement("style");style.className="injected-by-Font-js";let rules=[];return options.styleRules&&(rules=Object.entries(options.styleRules).map((([key,value])=>`${key}: ${value};`))),style.textContent=`\n@font-face {\n    font-family: "${name}";\n    ${rules.join("\n\t")}\n    src: url("${url}") format("${format}");\n}`,globalThis.document.head.appendChild(style),style}Promise.all([Promise.resolve().then((function(){return cmap$1})),Promise.resolve().then((function(){return head$1})),Promise.resolve().then((function(){return hhea$1})),Promise.resolve().then((function(){return hmtx$1})),Promise.resolve().then((function(){return maxp$1})),Promise.resolve().then((function(){return name$1})),Promise.resolve().then((function(){return OS2$1})),Promise.resolve().then((function(){return post$1})),Promise.resolve().then((function(){return BASE$1})),Promise.resolve().then((function(){return GDEF$1})),Promise.resolve().then((function(){return GSUB$1})),Promise.resolve().then((function(){return GPOS$1})),Promise.resolve().then((function(){return SVG$1})),Promise.resolve().then((function(){return fvar$1})),Promise.resolve().then((function(){return cvt$1})),Promise.resolve().then((function(){return fpgm$1})),Promise.resolve().then((function(){return gasp$1})),Promise.resolve().then((function(){return glyf$1})),Promise.resolve().then((function(){return loca$1})),Promise.resolve().then((function(){return prep$1})),Promise.resolve().then((function(){return CFF$1})),Promise.resolve().then((function(){return CFF2$1})),Promise.resolve().then((function(){return VORG$1})),Promise.resolve().then((function(){return EBLC$1})),Promise.resolve().then((function(){return EBDT$1})),Promise.resolve().then((function(){return EBSC$1})),Promise.resolve().then((function(){return CBLC$1})),Promise.resolve().then((function(){return CBDT$1})),Promise.resolve().then((function(){return sbix$1})),Promise.resolve().then((function(){return COLR$1})),Promise.resolve().then((function(){return CPAL$1})),Promise.resolve().then((function(){return DSIG$1})),Promise.resolve().then((function(){return hdmx$1})),Promise.resolve().then((function(){return kern$1})),Promise.resolve().then((function(){return LTSH$1})),Promise.resolve().then((function(){return MERG$1})),Promise.resolve().then((function(){return meta$1})),Promise.resolve().then((function(){return PCLT$1})),Promise.resolve().then((function(){return VDMX$1})),Promise.resolve().then((function(){return vhea$1})),Promise.resolve().then((function(){return vmtx$1}))]).then((data=>{data.forEach((e=>{let name=Object.keys(e)[0];tableClasses[name]=e[name]})),tableClassesLoaded=!0}));const TTF=[0,1,0,0],OTF=[79,84,84,79],WOFF=[119,79,70,70],WOFF2=[119,79,70,50];function match(ar1,ar2){if(ar1.length===ar2.length){for(let i=0;i<ar1.length;i++)if(ar1[i]!==ar2[i])return;return!0}}class Font extends EventManager{constructor(name,options={}){super(),this.name=name,this.options=options,this.metrics=!1}get src(){return this.__src}set src(src){this.__src=src,(async()=>{globalThis.document&&!this.options.skipStyleSheet&&await setupFontFace(this.name,src,this.options),this.loadFont(src)})()}async loadFont(url,filename){fetch(url).then((response=>function checkFetchResponseStatus(response){if(!response.ok)throw new Error(`HTTP ${response.status} - ${response.statusText}`);return response}(response)&&response.arrayBuffer())).then((buffer=>this.fromDataBuffer(buffer,filename||url))).catch((err=>{const evt=new lib_font_browser_Event("error",err,`Failed to load font at ${filename||url}`);this.dispatch(evt),this.onerror&&this.onerror(evt)}))}async fromDataBuffer(buffer,filenameOrUrL){this.fontData=new DataView(buffer);let type=function validFontFormat(dataview){const LEAD_BYTES=[dataview.getUint8(0),dataview.getUint8(1),dataview.getUint8(2),dataview.getUint8(3)];return match(LEAD_BYTES,TTF)||match(LEAD_BYTES,OTF)?"SFNT":match(LEAD_BYTES,WOFF)?"WOFF":match(LEAD_BYTES,WOFF2)?"WOFF2":void 0}(this.fontData);if(!type)throw new Error(`${filenameOrUrL} is either an unsupported font format, or not a font at all.`);await this.parseBasicData(type);const evt=new lib_font_browser_Event("load",{font:this});this.dispatch(evt),this.onload&&this.onload(evt)}async parseBasicData(type){return loadTableClasses().then((createTable=>("SFNT"===type&&(this.opentype=new SFNT(this,this.fontData,createTable)),"WOFF"===type&&(this.opentype=new WOFF$1(this,this.fontData,createTable)),"WOFF2"===type&&(this.opentype=new WOFF2$1(this,this.fontData,createTable)),this.opentype)))}getGlyphId(char){return this.opentype.tables.cmap.getGlyphId(char)}reverse(glyphid){return this.opentype.tables.cmap.reverse(glyphid)}supports(char){return 0!==this.getGlyphId(char)}supportsVariation(variation){return!1!==this.opentype.tables.cmap.supportsVariation(variation)}measureText(text,size=16){if(this.__unloaded)throw new Error("Cannot measure text: font was unloaded. Please reload before calling measureText()");let d=document.createElement("div");d.textContent=text,d.style.fontFamily=this.name,d.style.fontSize=`${size}px`,d.style.color="transparent",d.style.background="transparent",d.style.top="0",d.style.left="0",d.style.position="absolute",document.body.appendChild(d);let bbox=d.getBoundingClientRect();document.body.removeChild(d);const OS2=this.opentype.tables["OS/2"];return bbox.fontSize=size,bbox.ascender=OS2.sTypoAscender,bbox.descender=OS2.sTypoDescender,bbox}unload(){if(this.styleElement.parentNode){this.styleElement.parentNode.removeElement(this.styleElement);const evt=new lib_font_browser_Event("unload",{font:this});this.dispatch(evt),this.onunload&&this.onunload(evt)}this._unloaded=!0}load(){if(this.__unloaded){delete this.__unloaded,document.head.appendChild(this.styleElement);const evt=new lib_font_browser_Event("load",{font:this});this.dispatch(evt),this.onload&&this.onload(evt)}}}globalThis.Font=Font;class Subtable extends ParsedData{constructor(p,plaformID,encodingID){super(p),this.plaformID=plaformID,this.encodingID=encodingID}}class Format0 extends Subtable{constructor(p,platformID,encodingID){super(p,platformID,encodingID),this.format=0,this.length=p.uint16,this.language=p.uint16,this.glyphIdArray=[...new Array(256)].map((_=>p.uint8))}supports(charCode){return charCode.charCodeAt&&(charCode=-1,console.warn("supports(character) not implemented for cmap subtable format 0. only supports(id) is implemented.")),0<=charCode&&charCode<=255}reverse(glyphID){return console.warn("reverse not implemented for cmap subtable format 0"),{}}getSupportedCharCodes(){return[{start:1,end:256}]}}class Format2 extends Subtable{constructor(p,platformID,encodingID){super(p,platformID,encodingID),this.format=2,this.length=p.uint16,this.language=p.uint16,this.subHeaderKeys=[...new Array(256)].map((_=>p.uint16));const subHeaderCount=Math.max(...this.subHeaderKeys),subHeaderOffset=p.currentPosition;lazy$1(this,"subHeaders",(()=>(p.currentPosition=subHeaderOffset,[...new Array(subHeaderCount)].map((_=>new SubHeader(p))))));const glyphIndexOffset=subHeaderOffset+8*subHeaderCount;lazy$1(this,"glyphIndexArray",(()=>(p.currentPosition=glyphIndexOffset,[...new Array(subHeaderCount)].map((_=>p.uint16)))))}supports(charCode){charCode.charCodeAt&&(charCode=-1,console.warn("supports(character) not implemented for cmap subtable format 2. only supports(id) is implemented."));const low=charCode&&255,high=charCode&&65280,subHeaderKey=this.subHeaders[high],subheader=this.subHeaders[subHeaderKey],first=subheader.firstCode,last=first+subheader.entryCount;return first<=low&&low<=last}reverse(glyphID){return console.warn("reverse not implemented for cmap subtable format 2"),{}}getSupportedCharCodes(preservePropNames=!1){return preservePropNames?this.subHeaders.map((h=>({firstCode:h.firstCode,lastCode:h.lastCode}))):this.subHeaders.map((h=>({start:h.firstCode,end:h.lastCode})))}}class SubHeader{constructor(p){this.firstCode=p.uint16,this.entryCount=p.uint16,this.lastCode=this.first+this.entryCount,this.idDelta=p.int16,this.idRangeOffset=p.uint16}}class Format4 extends Subtable{constructor(p,platformID,encodingID){super(p,platformID,encodingID),this.format=4,this.length=p.uint16,this.language=p.uint16,this.segCountX2=p.uint16,this.segCount=this.segCountX2/2,this.searchRange=p.uint16,this.entrySelector=p.uint16,this.rangeShift=p.uint16;const endCodePosition=p.currentPosition;lazy$1(this,"endCode",(()=>p.readBytes(this.segCount,endCodePosition,16)));const startCodePosition=endCodePosition+2+this.segCountX2;lazy$1(this,"startCode",(()=>p.readBytes(this.segCount,startCodePosition,16)));const idDeltaPosition=startCodePosition+this.segCountX2;lazy$1(this,"idDelta",(()=>p.readBytes(this.segCount,idDeltaPosition,16,!0)));const idRangePosition=idDeltaPosition+this.segCountX2;lazy$1(this,"idRangeOffset",(()=>p.readBytes(this.segCount,idRangePosition,16)));const glyphIdArrayPosition=idRangePosition+this.segCountX2,glyphIdArrayLength=this.length-(glyphIdArrayPosition-this.tableStart);lazy$1(this,"glyphIdArray",(()=>p.readBytes(glyphIdArrayLength,glyphIdArrayPosition,16))),lazy$1(this,"segments",(()=>this.buildSegments(idRangePosition,glyphIdArrayPosition,p)))}buildSegments(idRangePosition,glyphIdArrayPosition,p){return[...new Array(this.segCount)].map(((_,i)=>{let startCode=this.startCode[i],endCode=this.endCode[i],idDelta=this.idDelta[i],idRangeOffset=this.idRangeOffset[i],idRangeOffsetPointer=idRangePosition+2*i,glyphIDs=[];if(0===idRangeOffset)for(let i=startCode+idDelta,e=endCode+idDelta;i<=e;i++)glyphIDs.push(i);else for(let i=0,e=endCode-startCode;i<=e;i++)p.currentPosition=idRangeOffsetPointer+idRangeOffset+2*i,glyphIDs.push(p.uint16);return{startCode,endCode,idDelta,idRangeOffset,glyphIDs}}))}reverse(glyphID){let s=this.segments.find((v=>v.glyphIDs.includes(glyphID)));if(!s)return{};const code=s.startCode+s.glyphIDs.indexOf(glyphID);return{code,unicode:String.fromCodePoint(code)}}getGlyphId(charCode){if(charCode.charCodeAt&&(charCode=charCode.charCodeAt(0)),55296<=charCode&&charCode<=57343)return 0;if(!(65534&~charCode&&65535&~charCode))return 0;let segment=this.segments.find((s=>s.startCode<=charCode&&charCode<=s.endCode));return segment?segment.glyphIDs[charCode-segment.startCode]:0}supports(charCode){return 0!==this.getGlyphId(charCode)}getSupportedCharCodes(preservePropNames=!1){return preservePropNames?this.segments:this.segments.map((v=>({start:v.startCode,end:v.endCode})))}}class Format6 extends Subtable{constructor(p,platformID,encodingID){super(p,platformID,encodingID),this.format=6,this.length=p.uint16,this.language=p.uint16,this.firstCode=p.uint16,this.entryCount=p.uint16,this.lastCode=this.firstCode+this.entryCount-1;lazy$1(this,"glyphIdArray",(()=>[...new Array(this.entryCount)].map((_=>p.uint16))))}supports(charCode){if(charCode.charCodeAt&&(charCode=-1,console.warn("supports(character) not implemented for cmap subtable format 6. only supports(id) is implemented.")),charCode<this.firstCode)return{};if(charCode>this.firstCode+this.entryCount)return{};const code=charCode-this.firstCode;return{code,unicode:String.fromCodePoint(code)}}reverse(glyphID){let pos=this.glyphIdArray.indexOf(glyphID);if(pos>-1)return this.firstCode+pos}getSupportedCharCodes(preservePropNames=!1){return preservePropNames?[{firstCode:this.firstCode,lastCode:this.lastCode}]:[{start:this.firstCode,end:this.lastCode}]}}class Format8 extends Subtable{constructor(p,platformID,encodingID){super(p,platformID,encodingID),this.format=8,p.uint16,this.length=p.uint32,this.language=p.uint32,this.is32=[...new Array(8192)].map((_=>p.uint8)),this.numGroups=p.uint32;lazy$1(this,"groups",(()=>[...new Array(this.numGroups)].map((_=>new SequentialMapGroup$1(p)))))}supports(charCode){return charCode.charCodeAt&&(charCode=-1,console.warn("supports(character) not implemented for cmap subtable format 8. only supports(id) is implemented.")),-1!==this.groups.findIndex((s=>s.startcharCode<=charCode&&charCode<=s.endcharCode))}reverse(glyphID){return console.warn("reverse not implemented for cmap subtable format 8"),{}}getSupportedCharCodes(preservePropNames=!1){return preservePropNames?this.groups:this.groups.map((v=>({start:v.startcharCode,end:v.endcharCode})))}}class SequentialMapGroup$1{constructor(p){this.startcharCode=p.uint32,this.endcharCode=p.uint32,this.startGlyphID=p.uint32}}class Format10 extends Subtable{constructor(p,platformID,encodingID){super(p,platformID,encodingID),this.format=10,p.uint16,this.length=p.uint32,this.language=p.uint32,this.startCharCode=p.uint32,this.numChars=p.uint32,this.endCharCode=this.startCharCode+this.numChars;lazy$1(this,"glyphs",(()=>[...new Array(this.numChars)].map((_=>p.uint16))))}supports(charCode){return charCode.charCodeAt&&(charCode=-1,console.warn("supports(character) not implemented for cmap subtable format 10. only supports(id) is implemented.")),!(charCode<this.startCharCode)&&(!(charCode>this.startCharCode+this.numChars)&&charCode-this.startCharCode)}reverse(glyphID){return console.warn("reverse not implemented for cmap subtable format 10"),{}}getSupportedCharCodes(preservePropNames=!1){return preservePropNames?[{startCharCode:this.startCharCode,endCharCode:this.endCharCode}]:[{start:this.startCharCode,end:this.endCharCode}]}}class Format12 extends Subtable{constructor(p,platformID,encodingID){super(p,platformID,encodingID),this.format=12,p.uint16,this.length=p.uint32,this.language=p.uint32,this.numGroups=p.uint32;lazy$1(this,"groups",(()=>[...new Array(this.numGroups)].map((_=>new SequentialMapGroup(p)))))}supports(charCode){return charCode.charCodeAt&&(charCode=charCode.charCodeAt(0)),55296<=charCode&&charCode<=57343?0:65534&~charCode&&65535&~charCode?-1!==this.groups.findIndex((s=>s.startCharCode<=charCode&&charCode<=s.endCharCode)):0}reverse(glyphID){for(let group of this.groups){let start=group.startGlyphID;if(start>glyphID)continue;if(start===glyphID)return group.startCharCode;if(start+(group.endCharCode-group.startCharCode)<glyphID)continue;const code=group.startCharCode+(glyphID-start);return{code,unicode:String.fromCodePoint(code)}}return{}}getSupportedCharCodes(preservePropNames=!1){return preservePropNames?this.groups:this.groups.map((v=>({start:v.startCharCode,end:v.endCharCode})))}}class SequentialMapGroup{constructor(p){this.startCharCode=p.uint32,this.endCharCode=p.uint32,this.startGlyphID=p.uint32}}class Format13 extends Subtable{constructor(p,platformID,encodingID){super(p,platformID,encodingID),this.format=13,p.uint16,this.length=p.uint32,this.language=p.uint32,this.numGroups=p.uint32;lazy$1(this,"groups",[...new Array(this.numGroups)].map((_=>new ConstantMapGroup(p))))}supports(charCode){return charCode.charCodeAt&&(charCode=charCode.charCodeAt(0)),-1!==this.groups.findIndex((s=>s.startCharCode<=charCode&&charCode<=s.endCharCode))}reverse(glyphID){return console.warn("reverse not implemented for cmap subtable format 13"),{}}getSupportedCharCodes(preservePropNames=!1){return preservePropNames?this.groups:this.groups.map((v=>({start:v.startCharCode,end:v.endCharCode})))}}class ConstantMapGroup{constructor(p){this.startCharCode=p.uint32,this.endCharCode=p.uint32,this.glyphID=p.uint32}}class Format14 extends Subtable{constructor(p,platformID,encodingID){super(p,platformID,encodingID),this.subTableStart=p.currentPosition,this.format=14,this.length=p.uint32,this.numVarSelectorRecords=p.uint32,lazy$1(this,"varSelectors",(()=>[...new Array(this.numVarSelectorRecords)].map((_=>new VariationSelector(p)))))}supports(){return console.warn("supports not implemented for cmap subtable format 14"),0}getSupportedCharCodes(){return console.warn("getSupportedCharCodes not implemented for cmap subtable format 14"),[]}reverse(glyphID){return console.warn("reverse not implemented for cmap subtable format 14"),{}}supportsVariation(variation){let v=this.varSelector.find((uvs=>uvs.varSelector===variation));return v||!1}getSupportedVariations(){return this.varSelectors.map((v=>v.varSelector))}}class VariationSelector{constructor(p){this.varSelector=p.uint24,this.defaultUVSOffset=p.Offset32,this.nonDefaultUVSOffset=p.Offset32}}class EncodingRecord{constructor(p,tableStart){const platformID=this.platformID=p.uint16,encodingID=this.encodingID=p.uint16,offset=this.offset=p.Offset32;lazy$1(this,"table",(()=>(p.currentPosition=tableStart+offset,function createSubTable(parser,platformID,encodingID){const format=parser.uint16;return 0===format?new Format0(parser,platformID,encodingID):2===format?new Format2(parser,platformID,encodingID):4===format?new Format4(parser,platformID,encodingID):6===format?new Format6(parser,platformID,encodingID):8===format?new Format8(parser,platformID,encodingID):10===format?new Format10(parser,platformID,encodingID):12===format?new Format12(parser,platformID,encodingID):13===format?new Format13(parser,platformID,encodingID):14===format?new Format14(parser,platformID,encodingID):{}}(p,platformID,encodingID))))}}var cmap$1=Object.freeze({__proto__:null,cmap:class cmap extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint16,this.numTables=p.uint16,this.encodingRecords=[...new Array(this.numTables)].map((_=>new EncodingRecord(p,this.tableStart)))}getSubTable(tableID){return this.encodingRecords[tableID].table}getSupportedEncodings(){return this.encodingRecords.map((r=>({platformID:r.platformID,encodingId:r.encodingID})))}getSupportedCharCodes(platformID,encodingID){const recordID=this.encodingRecords.findIndex((r=>r.platformID===platformID&&r.encodingID===encodingID));if(-1===recordID)return!1;return this.getSubTable(recordID).getSupportedCharCodes()}reverse(glyphid){for(let i=0;i<this.numTables;i++){let code=this.getSubTable(i).reverse(glyphid);if(code)return code}}getGlyphId(char){let last=0;return this.encodingRecords.some(((_,tableID)=>{let t=this.getSubTable(tableID);return!!t.getGlyphId&&(last=t.getGlyphId(char),0!==last)})),last}supports(char){return this.encodingRecords.some(((_,tableID)=>{const t=this.getSubTable(tableID);return t.supports&&!1!==t.supports(char)}))}supportsVariation(variation){return this.encodingRecords.some(((_,tableID)=>{const t=this.getSubTable(tableID);return t.supportsVariation&&!1!==t.supportsVariation(variation)}))}}});var head$1=Object.freeze({__proto__:null,head:class head extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.load({majorVersion:p.uint16,minorVersion:p.uint16,fontRevision:p.fixed,checkSumAdjustment:p.uint32,magicNumber:p.uint32,flags:p.flags(16),unitsPerEm:p.uint16,created:p.longdatetime,modified:p.longdatetime,xMin:p.int16,yMin:p.int16,xMax:p.int16,yMax:p.int16,macStyle:p.flags(16),lowestRecPPEM:p.uint16,fontDirectionHint:p.uint16,indexToLocFormat:p.uint16,glyphDataFormat:p.uint16})}}});var hhea$1=Object.freeze({__proto__:null,hhea:class hhea extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.majorVersion=p.uint16,this.minorVersion=p.uint16,this.ascender=p.fword,this.descender=p.fword,this.lineGap=p.fword,this.advanceWidthMax=p.ufword,this.minLeftSideBearing=p.fword,this.minRightSideBearing=p.fword,this.xMaxExtent=p.fword,this.caretSlopeRise=p.int16,this.caretSlopeRun=p.int16,this.caretOffset=p.int16,p.int16,p.int16,p.int16,p.int16,this.metricDataFormat=p.int16,this.numberOfHMetrics=p.uint16,p.verifyLength()}}});class LongHorMetric{constructor(w,b){this.advanceWidth=w,this.lsb=b}}var hmtx$1=Object.freeze({__proto__:null,hmtx:class hmtx extends SimpleTable{constructor(dict,dataview,tables){const{p}=super(dict,dataview),numberOfHMetrics=tables.hhea.numberOfHMetrics,numGlyphs=tables.maxp.numGlyphs,metricsStart=p.currentPosition;if(lazy$1(this,"hMetrics",(()=>(p.currentPosition=metricsStart,[...new Array(numberOfHMetrics)].map((_=>new LongHorMetric(p.uint16,p.int16)))))),numberOfHMetrics<numGlyphs){const lsbStart=metricsStart+4*numberOfHMetrics;lazy$1(this,"leftSideBearings",(()=>(p.currentPosition=lsbStart,[...new Array(numGlyphs-numberOfHMetrics)].map((_=>p.int16)))))}}}});var maxp$1=Object.freeze({__proto__:null,maxp:class maxp extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.legacyFixed,this.numGlyphs=p.uint16,1===this.version&&(this.maxPoints=p.uint16,this.maxContours=p.uint16,this.maxCompositePoints=p.uint16,this.maxCompositeContours=p.uint16,this.maxZones=p.uint16,this.maxTwilightPoints=p.uint16,this.maxStorage=p.uint16,this.maxFunctionDefs=p.uint16,this.maxInstructionDefs=p.uint16,this.maxStackElements=p.uint16,this.maxSizeOfInstructions=p.uint16,this.maxComponentElements=p.uint16,this.maxComponentDepth=p.uint16),p.verifyLength()}}});class LangTagRecord{constructor(length,offset){this.length=length,this.offset=offset}}class NameRecord{constructor(p,nameTable){this.platformID=p.uint16,this.encodingID=p.uint16,this.languageID=p.uint16,this.nameID=p.uint16,this.length=p.uint16,this.offset=p.Offset16,lazy$1(this,"string",(()=>(p.currentPosition=nameTable.stringStart+this.offset,function decodeString(p,record){const{platformID,length}=record;if(0===length)return"";if(0===platformID||3===platformID){const str=[];for(let i=0,e=length/2;i<e;i++)str[i]=String.fromCharCode(p.uint16);return str.join("")}const bytes=p.readBytes(length),str=[];return bytes.forEach((function(b,i){str[i]=String.fromCharCode(b)})),str.join("")}(p,this))))}}var name$1=Object.freeze({__proto__:null,name:class lib_font_browser_name extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.format=p.uint16,this.count=p.uint16,this.stringOffset=p.Offset16,this.nameRecords=[...new Array(this.count)].map((_=>new NameRecord(p,this))),1===this.format&&(this.langTagCount=p.uint16,this.langTagRecords=[...new Array(this.langTagCount)].map((_=>new LangTagRecord(p.uint16,p.Offset16)))),this.stringStart=this.tableStart+this.stringOffset}get(nameID){let record=this.nameRecords.find((record=>record.nameID===nameID));if(record)return record.string}}});var OS2$1=Object.freeze({__proto__:null,OS2:class OS2 extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);return this.version=p.uint16,this.xAvgCharWidth=p.int16,this.usWeightClass=p.uint16,this.usWidthClass=p.uint16,this.fsType=p.uint16,this.ySubscriptXSize=p.int16,this.ySubscriptYSize=p.int16,this.ySubscriptXOffset=p.int16,this.ySubscriptYOffset=p.int16,this.ySuperscriptXSize=p.int16,this.ySuperscriptYSize=p.int16,this.ySuperscriptXOffset=p.int16,this.ySuperscriptYOffset=p.int16,this.yStrikeoutSize=p.int16,this.yStrikeoutPosition=p.int16,this.sFamilyClass=p.int16,this.panose=[...new Array(10)].map((_=>p.uint8)),this.ulUnicodeRange1=p.flags(32),this.ulUnicodeRange2=p.flags(32),this.ulUnicodeRange3=p.flags(32),this.ulUnicodeRange4=p.flags(32),this.achVendID=p.tag,this.fsSelection=p.uint16,this.usFirstCharIndex=p.uint16,this.usLastCharIndex=p.uint16,this.sTypoAscender=p.int16,this.sTypoDescender=p.int16,this.sTypoLineGap=p.int16,this.usWinAscent=p.uint16,this.usWinDescent=p.uint16,0===this.version?p.verifyLength():(this.ulCodePageRange1=p.flags(32),this.ulCodePageRange2=p.flags(32),1===this.version?p.verifyLength():(this.sxHeight=p.int16,this.sCapHeight=p.int16,this.usDefaultChar=p.uint16,this.usBreakChar=p.uint16,this.usMaxContext=p.uint16,this.version<=4?p.verifyLength():(this.usLowerOpticalPointSize=p.uint16,this.usUpperOpticalPointSize=p.uint16,5===this.version?p.verifyLength():void 0)))}}});const macStrings=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];var post$1=Object.freeze({__proto__:null,post:class post extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);if(this.version=p.legacyFixed,this.italicAngle=p.fixed,this.underlinePosition=p.fword,this.underlineThickness=p.fword,this.isFixedPitch=p.uint32,this.minMemType42=p.uint32,this.maxMemType42=p.uint32,this.minMemType1=p.uint32,this.maxMemType1=p.uint32,1===this.version||3===this.version)return p.verifyLength();if(this.numGlyphs=p.uint16,2===this.version){this.glyphNameIndex=[...new Array(this.numGlyphs)].map((_=>p.uint16)),this.namesOffset=p.currentPosition,this.glyphNameOffsets=[1];for(let i=0;i<this.numGlyphs;i++){if(this.glyphNameIndex[i]<macStrings.length){this.glyphNameOffsets.push(this.glyphNameOffsets[i]);continue}let bytelength=p.int8;p.skip(bytelength),this.glyphNameOffsets.push(this.glyphNameOffsets[i]+bytelength+1)}}2.5===this.version&&(this.offset=[...new Array(this.numGlyphs)].map((_=>p.int8)))}getGlyphName(glyphid){if(2!==this.version)return console.warn(`post table version ${this.version} does not support glyph name lookups`),"";let index=this.glyphNameIndex[glyphid];if(index<258)return macStrings[index];let offset=this.glyphNameOffsets[glyphid],len=this.glyphNameOffsets[glyphid+1]-offset-1;if(0===len)return".notdef.";this.parser.currentPosition=this.namesOffset+offset;return this.parser.readBytes(len,this.namesOffset+offset,8,!0).map((b=>String.fromCharCode(b))).join("")}}});class AxisTable extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview,"AxisTable");this.baseTagListOffset=p.Offset16,this.baseScriptListOffset=p.Offset16,lazy$1(this,"baseTagList",(()=>new BaseTagListTable({offset:dict.offset+this.baseTagListOffset},dataview))),lazy$1(this,"baseScriptList",(()=>new BaseScriptListTable({offset:dict.offset+this.baseScriptListOffset},dataview)))}}class BaseTagListTable extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview,"BaseTagListTable");this.baseTagCount=p.uint16,this.baselineTags=[...new Array(this.baseTagCount)].map((_=>p.tag))}}class BaseScriptListTable extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview,"BaseScriptListTable");this.baseScriptCount=p.uint16;const recordStart=p.currentPosition;lazy$1(this,"baseScriptRecords",(()=>(p.currentPosition=recordStart,[...new Array(this.baseScriptCount)].map((_=>new BaseScriptRecord(this.start,p))))))}}class BaseScriptRecord{constructor(baseScriptListTableStart,p){this.baseScriptTag=p.tag,this.baseScriptOffset=p.Offset16,lazy$1(this,"baseScriptTable",(()=>(p.currentPosition=baseScriptListTableStart+this.baseScriptOffset,new BaseScriptTable(p))))}}class BaseScriptTable{constructor(p){this.start=p.currentPosition,this.baseValuesOffset=p.Offset16,this.defaultMinMaxOffset=p.Offset16,this.baseLangSysCount=p.uint16,this.baseLangSysRecords=[...new Array(this.baseLangSysCount)].map((_=>new BaseLangSysRecord(this.start,p))),lazy$1(this,"baseValues",(()=>(p.currentPosition=this.start+this.baseValuesOffset,new BaseValuesTable(p)))),lazy$1(this,"defaultMinMax",(()=>(p.currentPosition=this.start+this.defaultMinMaxOffset,new MinMaxTable(p))))}}class BaseLangSysRecord{constructor(baseScriptTableStart,p){this.baseLangSysTag=p.tag,this.minMaxOffset=p.Offset16,lazy$1(this,"minMax",(()=>(p.currentPosition=baseScriptTableStart+this.minMaxOffset,new MinMaxTable(p))))}}class BaseValuesTable{constructor(p){this.parser=p,this.start=p.currentPosition,this.defaultBaselineIndex=p.uint16,this.baseCoordCount=p.uint16,this.baseCoords=[...new Array(this.baseCoordCount)].map((_=>p.Offset16))}getTable(id){return this.parser.currentPosition=this.start+this.baseCoords[id],new BaseCoordTable(this.parser)}}class MinMaxTable{constructor(p){this.minCoord=p.Offset16,this.maxCoord=p.Offset16,this.featMinMaxCount=p.uint16;const recordStart=p.currentPosition;lazy$1(this,"featMinMaxRecords",(()=>(p.currentPosition=recordStart,[...new Array(this.featMinMaxCount)].map((_=>new FeatMinMaxRecord(p))))))}}class FeatMinMaxRecord{constructor(p){this.featureTableTag=p.tag,this.minCoord=p.Offset16,this.maxCoord=p.Offset16}}class BaseCoordTable{constructor(p){this.baseCoordFormat=p.uint16,this.coordinate=p.int16,2===this.baseCoordFormat&&(this.referenceGlyph=p.uint16,this.baseCoordPoint=p.uint16),3===this.baseCoordFormat&&(this.deviceTable=p.Offset16)}}var BASE$1=Object.freeze({__proto__:null,BASE:class BASE extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.majorVersion=p.uint16,this.minorVersion=p.uint16,this.horizAxisOffset=p.Offset16,this.vertAxisOffset=p.Offset16,lazy$1(this,"horizAxis",(()=>new AxisTable({offset:dict.offset+this.horizAxisOffset},dataview))),lazy$1(this,"vertAxis",(()=>new AxisTable({offset:dict.offset+this.vertAxisOffset},dataview))),1===this.majorVersion&&1===this.minorVersion&&(this.itemVarStoreOffset=p.Offset32,lazy$1(this,"itemVarStore",(()=>new AxisTable({offset:dict.offset+this.itemVarStoreOffset},dataview))))}}});class ClassDefinition{constructor(p){this.classFormat=p.uint16,1===this.classFormat&&(this.startGlyphID=p.uint16,this.glyphCount=p.uint16,this.classValueArray=[...new Array(this.glyphCount)].map((_=>p.uint16))),2===this.classFormat&&(this.classRangeCount=p.uint16,this.classRangeRecords=[...new Array(this.classRangeCount)].map((_=>new ClassRangeRecord(p))))}}class ClassRangeRecord{constructor(p){this.startGlyphID=p.uint16,this.endGlyphID=p.uint16,this.class=p.uint16}}class CoverageTable extends ParsedData{constructor(p){super(p),this.coverageFormat=p.uint16,1===this.coverageFormat&&(this.glyphCount=p.uint16,this.glyphArray=[...new Array(this.glyphCount)].map((_=>p.uint16))),2===this.coverageFormat&&(this.rangeCount=p.uint16,this.rangeRecords=[...new Array(this.rangeCount)].map((_=>new CoverageRangeRecord(p))))}}class CoverageRangeRecord{constructor(p){this.startGlyphID=p.uint16,this.endGlyphID=p.uint16,this.startCoverageIndex=p.uint16}}class ItemVariationStoreTable{constructor(table,p){this.table=table,this.parser=p,this.start=p.currentPosition,this.format=p.uint16,this.variationRegionListOffset=p.Offset32,this.itemVariationDataCount=p.uint16,this.itemVariationDataOffsets=[...new Array(this.itemVariationDataCount)].map((_=>p.Offset32))}}class AttachList extends ParsedData{constructor(p){super(p),this.coverageOffset=p.Offset16,this.glyphCount=p.uint16,this.attachPointOffsets=[...new Array(this.glyphCount)].map((_=>p.Offset16))}getPoint(pointID){return this.parser.currentPosition=this.start+this.attachPointOffsets[pointID],new AttachPoint(this.parser)}}class AttachPoint{constructor(p){this.pointCount=p.uint16,this.pointIndices=[...new Array(this.pointCount)].map((_=>p.uint16))}}class LigCaretList extends ParsedData{constructor(p){super(p),this.coverageOffset=p.Offset16,lazy$1(this,"coverage",(()=>(p.currentPosition=this.start+this.coverageOffset,new CoverageTable(p)))),this.ligGlyphCount=p.uint16,this.ligGlyphOffsets=[...new Array(this.ligGlyphCount)].map((_=>p.Offset16))}getLigGlyph(ligGlyphID){return this.parser.currentPosition=this.start+this.ligGlyphOffsets[ligGlyphID],new LigGlyph(this.parser)}}class LigGlyph extends ParsedData{constructor(p){super(p),this.caretCount=p.uint16,this.caretValueOffsets=[...new Array(this.caretCount)].map((_=>p.Offset16))}getCaretValue(caretID){return this.parser.currentPosition=this.start+this.caretValueOffsets[caretID],new CaretValue(this.parser)}}class CaretValue{constructor(p){this.caretValueFormat=p.uint16,1===this.caretValueFormat&&(this.coordinate=p.int16),2===this.caretValueFormat&&(this.caretValuePointIndex=p.uint16),3===this.caretValueFormat&&(this.coordinate=p.int16,this.deviceOffset=p.Offset16)}}class MarkGlyphSetsTable extends ParsedData{constructor(p){super(p),this.markGlyphSetTableFormat=p.uint16,this.markGlyphSetCount=p.uint16,this.coverageOffsets=[...new Array(this.markGlyphSetCount)].map((_=>p.Offset32))}getMarkGlyphSet(markGlyphSetID){return this.parser.currentPosition=this.start+this.coverageOffsets[markGlyphSetID],new CoverageTable(this.parser)}}var GDEF$1=Object.freeze({__proto__:null,GDEF:class GDEF extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.majorVersion=p.uint16,this.minorVersion=p.uint16,this.glyphClassDefOffset=p.Offset16,lazy$1(this,"glyphClassDefs",(()=>{if(0!==this.glyphClassDefOffset)return p.currentPosition=this.tableStart+this.glyphClassDefOffset,new ClassDefinition(p)})),this.attachListOffset=p.Offset16,lazy$1(this,"attachList",(()=>{if(0!==this.attachListOffset)return p.currentPosition=this.tableStart+this.attachListOffset,new AttachList(p)})),this.ligCaretListOffset=p.Offset16,lazy$1(this,"ligCaretList",(()=>{if(0!==this.ligCaretListOffset)return p.currentPosition=this.tableStart+this.ligCaretListOffset,new LigCaretList(p)})),this.markAttachClassDefOffset=p.Offset16,lazy$1(this,"markAttachClassDef",(()=>{if(0!==this.markAttachClassDefOffset)return p.currentPosition=this.tableStart+this.markAttachClassDefOffset,new ClassDefinition(p)})),this.minorVersion>=2&&(this.markGlyphSetsDefOffset=p.Offset16,lazy$1(this,"markGlyphSetsDef",(()=>{if(0!==this.markGlyphSetsDefOffset)return p.currentPosition=this.tableStart+this.markGlyphSetsDefOffset,new MarkGlyphSetsTable(p)}))),3===this.minorVersion&&(this.itemVarStoreOffset=p.Offset32,lazy$1(this,"itemVarStore",(()=>{if(0!==this.itemVarStoreOffset)return p.currentPosition=this.tableStart+this.itemVarStoreOffset,new ItemVariationStoreTable(p)})))}}});class ScriptList extends ParsedData{static EMPTY={scriptCount:0,scriptRecords:[]};constructor(p){super(p),this.scriptCount=p.uint16,this.scriptRecords=[...new Array(this.scriptCount)].map((_=>new ScriptRecord(p)))}}class ScriptRecord{constructor(p){this.scriptTag=p.tag,this.scriptOffset=p.Offset16}}class ScriptTable extends ParsedData{constructor(p){super(p),this.defaultLangSys=p.Offset16,this.langSysCount=p.uint16,this.langSysRecords=[...new Array(this.langSysCount)].map((_=>new LangSysRecord(p)))}}class LangSysRecord{constructor(p){this.langSysTag=p.tag,this.langSysOffset=p.Offset16}}class LangSysTable{constructor(p){this.lookupOrder=p.Offset16,this.requiredFeatureIndex=p.uint16,this.featureIndexCount=p.uint16,this.featureIndices=[...new Array(this.featureIndexCount)].map((_=>p.uint16))}}class FeatureList extends ParsedData{static EMPTY={featureCount:0,featureRecords:[]};constructor(p){super(p),this.featureCount=p.uint16,this.featureRecords=[...new Array(this.featureCount)].map((_=>new FeatureRecord(p)))}}class FeatureRecord{constructor(p){this.featureTag=p.tag,this.featureOffset=p.Offset16}}class FeatureTable extends ParsedData{constructor(p){super(p),this.featureParams=p.Offset16,this.lookupIndexCount=p.uint16,this.lookupListIndices=[...new Array(this.lookupIndexCount)].map((_=>p.uint16))}getFeatureParams(){if(this.featureParams>0){const p=this.parser;p.currentPosition=this.start+this.featureParams;const tag=this.featureTag;if("size"===tag)return new Size(p);if(tag.startsWith("cc"))return new CharacterVariant(p);if(tag.startsWith("ss"))return new StylisticSet(p)}}}class CharacterVariant{constructor(p){this.format=p.uint16,this.featUiLabelNameId=p.uint16,this.featUiTooltipTextNameId=p.uint16,this.sampleTextNameId=p.uint16,this.numNamedParameters=p.uint16,this.firstParamUiLabelNameId=p.uint16,this.charCount=p.uint16,this.character=[...new Array(this.charCount)].map((_=>p.uint24))}}class Size{constructor(p){this.designSize=p.uint16,this.subfamilyIdentifier=p.uint16,this.subfamilyNameID=p.uint16,this.smallEnd=p.uint16,this.largeEnd=p.uint16}}class StylisticSet{constructor(p){this.version=p.uint16,this.UINameID=p.uint16}}function undoCoverageOffsetParsing(instance){instance.parser.currentPosition-=2,delete instance.coverageOffset,delete instance.getCoverageTable}class LookupType$1 extends ParsedData{constructor(p){super(p),this.substFormat=p.uint16,this.coverageOffset=p.Offset16}getCoverageTable(){let p=this.parser;return p.currentPosition=this.start+this.coverageOffset,new CoverageTable(p)}}class SubstLookupRecord{constructor(p){this.glyphSequenceIndex=p.uint16,this.lookupListIndex=p.uint16}}class LookupType1$1 extends LookupType$1{constructor(p){super(p),this.deltaGlyphID=p.int16}}class LookupType2$1 extends LookupType$1{constructor(p){super(p),this.sequenceCount=p.uint16,this.sequenceOffsets=[...new Array(this.sequenceCount)].map((_=>p.Offset16))}getSequence(index){let p=this.parser;return p.currentPosition=this.start+this.sequenceOffsets[index],new SequenceTable(p)}}class SequenceTable{constructor(p){this.glyphCount=p.uint16,this.substituteGlyphIDs=[...new Array(this.glyphCount)].map((_=>p.uint16))}}class LookupType3$1 extends LookupType$1{constructor(p){super(p),this.alternateSetCount=p.uint16,this.alternateSetOffsets=[...new Array(this.alternateSetCount)].map((_=>p.Offset16))}getAlternateSet(index){let p=this.parser;return p.currentPosition=this.start+this.alternateSetOffsets[index],new AlternateSetTable(p)}}class AlternateSetTable{constructor(p){this.glyphCount=p.uint16,this.alternateGlyphIDs=[...new Array(this.glyphCount)].map((_=>p.uint16))}}class LookupType4$1 extends LookupType$1{constructor(p){super(p),this.ligatureSetCount=p.uint16,this.ligatureSetOffsets=[...new Array(this.ligatureSetCount)].map((_=>p.Offset16))}getLigatureSet(index){let p=this.parser;return p.currentPosition=this.start+this.ligatureSetOffsets[index],new LigatureSetTable(p)}}class LigatureSetTable extends ParsedData{constructor(p){super(p),this.ligatureCount=p.uint16,this.ligatureOffsets=[...new Array(this.ligatureCount)].map((_=>p.Offset16))}getLigature(index){let p=this.parser;return p.currentPosition=this.start+this.ligatureOffsets[index],new LigatureTable(p)}}class LigatureTable{constructor(p){this.ligatureGlyph=p.uint16,this.componentCount=p.uint16,this.componentGlyphIDs=[...new Array(this.componentCount-1)].map((_=>p.uint16))}}class LookupType5$1 extends LookupType$1{constructor(p){super(p),1===this.substFormat&&(this.subRuleSetCount=p.uint16,this.subRuleSetOffsets=[...new Array(this.subRuleSetCount)].map((_=>p.Offset16))),2===this.substFormat&&(this.classDefOffset=p.Offset16,this.subClassSetCount=p.uint16,this.subClassSetOffsets=[...new Array(this.subClassSetCount)].map((_=>p.Offset16))),3===this.substFormat&&(undoCoverageOffsetParsing(this),this.glyphCount=p.uint16,this.substitutionCount=p.uint16,this.coverageOffsets=[...new Array(this.glyphCount)].map((_=>p.Offset16)),this.substLookupRecords=[...new Array(this.substitutionCount)].map((_=>new SubstLookupRecord(p))))}getSubRuleSet(index){if(1!==this.substFormat)throw new Error(`lookup type 5.${this.substFormat} has no subrule sets.`);let p=this.parser;return p.currentPosition=this.start+this.subRuleSetOffsets[index],new SubRuleSetTable(p)}getSubClassSet(index){if(2!==this.substFormat)throw new Error(`lookup type 5.${this.substFormat} has no subclass sets.`);let p=this.parser;return p.currentPosition=this.start+this.subClassSetOffsets[index],new SubClassSetTable(p)}getCoverageTable(index){if(3!==this.substFormat&&!index)return super.getCoverageTable();if(!index)throw new Error(`lookup type 5.${this.substFormat} requires an coverage table index.`);let p=this.parser;return p.currentPosition=this.start+this.coverageOffsets[index],new CoverageTable(p)}}class SubRuleSetTable extends ParsedData{constructor(p){super(p),this.subRuleCount=p.uint16,this.subRuleOffsets=[...new Array(this.subRuleCount)].map((_=>p.Offset16))}getSubRule(index){let p=this.parser;return p.currentPosition=this.start+this.subRuleOffsets[index],new SubRuleTable(p)}}class SubRuleTable{constructor(p){this.glyphCount=p.uint16,this.substitutionCount=p.uint16,this.inputSequence=[...new Array(this.glyphCount-1)].map((_=>p.uint16)),this.substLookupRecords=[...new Array(this.substitutionCount)].map((_=>new SubstLookupRecord(p)))}}class SubClassSetTable extends ParsedData{constructor(p){super(p),this.subClassRuleCount=p.uint16,this.subClassRuleOffsets=[...new Array(this.subClassRuleCount)].map((_=>p.Offset16))}getSubClass(index){let p=this.parser;return p.currentPosition=this.start+this.subClassRuleOffsets[index],new SubClassRuleTable(p)}}class SubClassRuleTable extends SubRuleTable{constructor(p){super(p)}}class LookupType6$1 extends LookupType$1{constructor(p){super(p),1===this.substFormat&&(this.chainSubRuleSetCount=p.uint16,this.chainSubRuleSetOffsets=[...new Array(this.chainSubRuleSetCount)].map((_=>p.Offset16))),2===this.substFormat&&(this.backtrackClassDefOffset=p.Offset16,this.inputClassDefOffset=p.Offset16,this.lookaheadClassDefOffset=p.Offset16,this.chainSubClassSetCount=p.uint16,this.chainSubClassSetOffsets=[...new Array(this.chainSubClassSetCount)].map((_=>p.Offset16))),3===this.substFormat&&(undoCoverageOffsetParsing(this),this.backtrackGlyphCount=p.uint16,this.backtrackCoverageOffsets=[...new Array(this.backtrackGlyphCount)].map((_=>p.Offset16)),this.inputGlyphCount=p.uint16,this.inputCoverageOffsets=[...new Array(this.inputGlyphCount)].map((_=>p.Offset16)),this.lookaheadGlyphCount=p.uint16,this.lookaheadCoverageOffsets=[...new Array(this.lookaheadGlyphCount)].map((_=>p.Offset16)),this.seqLookupCount=p.uint16,this.seqLookupRecords=[...new Array(this.substitutionCount)].map((_=>new SequenceLookupRecord(p))))}getChainSubRuleSet(index){if(1!==this.substFormat)throw new Error(`lookup type 6.${this.substFormat} has no chainsubrule sets.`);let p=this.parser;return p.currentPosition=this.start+this.chainSubRuleSetOffsets[index],new ChainSubRuleSetTable(p)}getChainSubClassSet(index){if(2!==this.substFormat)throw new Error(`lookup type 6.${this.substFormat} has no chainsubclass sets.`);let p=this.parser;return p.currentPosition=this.start+this.chainSubClassSetOffsets[index],new ChainSubClassSetTable(p)}getCoverageFromOffset(offset){if(3!==this.substFormat)throw new Error(`lookup type 6.${this.substFormat} does not use contextual coverage offsets.`);let p=this.parser;return p.currentPosition=this.start+offset,new CoverageTable(p)}}class ChainSubRuleSetTable extends ParsedData{constructor(p){super(p),this.chainSubRuleCount=p.uint16,this.chainSubRuleOffsets=[...new Array(this.chainSubRuleCount)].map((_=>p.Offset16))}getSubRule(index){let p=this.parser;return p.currentPosition=this.start+this.chainSubRuleOffsets[index],new ChainSubRuleTable(p)}}class ChainSubRuleTable{constructor(p){this.backtrackGlyphCount=p.uint16,this.backtrackSequence=[...new Array(this.backtrackGlyphCount)].map((_=>p.uint16)),this.inputGlyphCount=p.uint16,this.inputSequence=[...new Array(this.inputGlyphCount-1)].map((_=>p.uint16)),this.lookaheadGlyphCount=p.uint16,this.lookAheadSequence=[...new Array(this.lookAheadGlyphCount)].map((_=>p.uint16)),this.substitutionCount=p.uint16,this.substLookupRecords=[...new Array(this.SubstCount)].map((_=>new SubstLookupRecord(p)))}}class ChainSubClassSetTable extends ParsedData{constructor(p){super(p),this.chainSubClassRuleCount=p.uint16,this.chainSubClassRuleOffsets=[...new Array(this.chainSubClassRuleCount)].map((_=>p.Offset16))}getSubClass(index){let p=this.parser;return p.currentPosition=this.start+this.chainSubRuleOffsets[index],new ChainSubClassRuleTable(p)}}class ChainSubClassRuleTable{constructor(p){this.backtrackGlyphCount=p.uint16,this.backtrackSequence=[...new Array(this.backtrackGlyphCount)].map((_=>p.uint16)),this.inputGlyphCount=p.uint16,this.inputSequence=[...new Array(this.inputGlyphCount-1)].map((_=>p.uint16)),this.lookaheadGlyphCount=p.uint16,this.lookAheadSequence=[...new Array(this.lookAheadGlyphCount)].map((_=>p.uint16)),this.substitutionCount=p.uint16,this.substLookupRecords=[...new Array(this.substitutionCount)].map((_=>new SequenceLookupRecord(p)))}}class SequenceLookupRecord extends ParsedData{constructor(p){super(p),this.sequenceIndex=p.uint16,this.lookupListIndex=p.uint16}}class LookupType7$1 extends ParsedData{constructor(p){super(p),this.substFormat=p.uint16,this.extensionLookupType=p.uint16,this.extensionOffset=p.Offset32}}class LookupType8$1 extends LookupType$1{constructor(p){super(p),this.backtrackGlyphCount=p.uint16,this.backtrackCoverageOffsets=[...new Array(this.backtrackGlyphCount)].map((_=>p.Offset16)),this.lookaheadGlyphCount=p.uint16,this.lookaheadCoverageOffsets=[new Array(this.lookaheadGlyphCount)].map((_=>p.Offset16)),this.glyphCount=p.uint16,this.substituteGlyphIDs=[...new Array(this.glyphCount)].map((_=>p.uint16))}}var GSUBtables={buildSubtable:function(type,p){const subtable=new[void 0,LookupType1$1,LookupType2$1,LookupType3$1,LookupType4$1,LookupType5$1,LookupType6$1,LookupType7$1,LookupType8$1][type](p);return subtable.type=type,subtable}};class LookupType extends ParsedData{constructor(p){super(p)}}class LookupType1 extends LookupType{constructor(p){super(p),console.log("lookup type 1")}}class LookupType2 extends LookupType{constructor(p){super(p),console.log("lookup type 2")}}class LookupType3 extends LookupType{constructor(p){super(p),console.log("lookup type 3")}}class LookupType4 extends LookupType{constructor(p){super(p),console.log("lookup type 4")}}class LookupType5 extends LookupType{constructor(p){super(p),console.log("lookup type 5")}}class LookupType6 extends LookupType{constructor(p){super(p),console.log("lookup type 6")}}class LookupType7 extends LookupType{constructor(p){super(p),console.log("lookup type 7")}}class LookupType8 extends LookupType{constructor(p){super(p),console.log("lookup type 8")}}class LookupType9 extends LookupType{constructor(p){super(p),console.log("lookup type 9")}}var GPOStables={buildSubtable:function(type,p){const subtable=new[void 0,LookupType1,LookupType2,LookupType3,LookupType4,LookupType5,LookupType6,LookupType7,LookupType8,LookupType9][type](p);return subtable.type=type,subtable}};class LookupList extends ParsedData{static EMPTY={lookupCount:0,lookups:[]};constructor(p){super(p),this.lookupCount=p.uint16,this.lookups=[...new Array(this.lookupCount)].map((_=>p.Offset16))}}class LookupTable extends ParsedData{constructor(p,type){super(p),this.ctType=type,this.lookupType=p.uint16,this.lookupFlag=p.uint16,this.subTableCount=p.uint16,this.subtableOffsets=[...new Array(this.subTableCount)].map((_=>p.Offset16)),this.markFilteringSet=p.uint16}get rightToLeft(){return!0&this.lookupFlag}get ignoreBaseGlyphs(){return!0&this.lookupFlag}get ignoreLigatures(){return!0&this.lookupFlag}get ignoreMarks(){return!0&this.lookupFlag}get useMarkFilteringSet(){return!0&this.lookupFlag}get markAttachmentType(){return!0&this.lookupFlag}getSubTable(index){const builder="GSUB"===this.ctType?GSUBtables:GPOStables;return this.parser.currentPosition=this.start+this.subtableOffsets[index],builder.buildSubtable(this.lookupType,this.parser)}}class CommonLayoutTable extends SimpleTable{constructor(dict,dataview,name){const{p,tableStart}=super(dict,dataview,name);this.majorVersion=p.uint16,this.minorVersion=p.uint16,this.scriptListOffset=p.Offset16,this.featureListOffset=p.Offset16,this.lookupListOffset=p.Offset16,1===this.majorVersion&&1===this.minorVersion&&(this.featureVariationsOffset=p.Offset32);const no_content=!(this.scriptListOffset||this.featureListOffset||this.lookupListOffset);lazy$1(this,"scriptList",(()=>no_content?ScriptList.EMPTY:(p.currentPosition=tableStart+this.scriptListOffset,new ScriptList(p)))),lazy$1(this,"featureList",(()=>no_content?FeatureList.EMPTY:(p.currentPosition=tableStart+this.featureListOffset,new FeatureList(p)))),lazy$1(this,"lookupList",(()=>no_content?LookupList.EMPTY:(p.currentPosition=tableStart+this.lookupListOffset,new LookupList(p)))),this.featureVariationsOffset&&lazy$1(this,"featureVariations",(()=>no_content?FeatureVariations.EMPTY:(p.currentPosition=tableStart+this.featureVariationsOffset,new FeatureVariations(p))))}getSupportedScripts(){return this.scriptList.scriptRecords.map((r=>r.scriptTag))}getScriptTable(scriptTag){let record=this.scriptList.scriptRecords.find((r=>r.scriptTag===scriptTag));this.parser.currentPosition=this.scriptList.start+record.scriptOffset;let table=new ScriptTable(this.parser);return table.scriptTag=scriptTag,table}ensureScriptTable(arg){return"string"==typeof arg?this.getScriptTable(arg):arg}getSupportedLangSys(scriptTable){const hasDefault=0!==(scriptTable=this.ensureScriptTable(scriptTable)).defaultLangSys,supported=scriptTable.langSysRecords.map((l=>l.langSysTag));return hasDefault&&supported.unshift("dflt"),supported}getDefaultLangSysTable(scriptTable){let offset=(scriptTable=this.ensureScriptTable(scriptTable)).defaultLangSys;if(0!==offset){this.parser.currentPosition=scriptTable.start+offset;let table=new LangSysTable(this.parser);return table.langSysTag="",table.defaultForScript=scriptTable.scriptTag,table}}getLangSysTable(scriptTable,langSysTag="dflt"){if("dflt"===langSysTag)return this.getDefaultLangSysTable(scriptTable);let record=(scriptTable=this.ensureScriptTable(scriptTable)).langSysRecords.find((l=>l.langSysTag===langSysTag));this.parser.currentPosition=scriptTable.start+record.langSysOffset;let table=new LangSysTable(this.parser);return table.langSysTag=langSysTag,table}getFeatures(langSysTable){return langSysTable.featureIndices.map((index=>this.getFeature(index)))}getFeature(indexOrTag){let record;if(record=parseInt(indexOrTag)==indexOrTag?this.featureList.featureRecords[indexOrTag]:this.featureList.featureRecords.find((f=>f.featureTag===indexOrTag)),!record)return;this.parser.currentPosition=this.featureList.start+record.featureOffset;let table=new FeatureTable(this.parser);return table.featureTag=record.featureTag,table}getLookups(featureTable){return featureTable.lookupListIndices.map((index=>this.getLookup(index)))}getLookup(lookupIndex,type){let lookupOffset=this.lookupList.lookups[lookupIndex];return this.parser.currentPosition=this.lookupList.start+lookupOffset,new LookupTable(this.parser,type)}}var GSUB$1=Object.freeze({__proto__:null,GSUB:class GSUB extends CommonLayoutTable{constructor(dict,dataview){super(dict,dataview,"GSUB")}getLookup(lookupIndex){return super.getLookup(lookupIndex,"GSUB")}}});var GPOS$1=Object.freeze({__proto__:null,GPOS:class GPOS extends CommonLayoutTable{constructor(dict,dataview){super(dict,dataview,"GPOS")}getLookup(lookupIndex){return super.getLookup(lookupIndex,"GPOS")}}});class SVGDocumentList extends ParsedData{constructor(p){super(p),this.numEntries=p.uint16,this.documentRecords=[...new Array(this.numEntries)].map((_=>new SVGDocumentRecord(p)))}getDocument(documentID){let record=this.documentRecords[documentID];if(!record)return"";let offset=this.start+record.svgDocOffset;return this.parser.currentPosition=offset,this.parser.readBytes(record.svgDocLength)}getDocumentForGlyph(glyphID){let id=this.documentRecords.findIndex((d=>d.startGlyphID<=glyphID&&glyphID<=d.endGlyphID));return-1===id?"":this.getDocument(id)}}class SVGDocumentRecord{constructor(p){this.startGlyphID=p.uint16,this.endGlyphID=p.uint16,this.svgDocOffset=p.Offset32,this.svgDocLength=p.uint32}}var SVG$1=Object.freeze({__proto__:null,SVG:class SVG extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint16,this.offsetToSVGDocumentList=p.Offset32,p.currentPosition=this.tableStart+this.offsetToSVGDocumentList,this.documentList=new SVGDocumentList(p)}}});class VariationAxisRecord{constructor(p){this.tag=p.tag,this.minValue=p.fixed,this.defaultValue=p.fixed,this.maxValue=p.fixed,this.flags=p.flags(16),this.axisNameID=p.uint16}}class InstanceRecord{constructor(p,axisCount,size){let start=p.currentPosition;this.subfamilyNameID=p.uint16,p.uint16,this.coordinates=[...new Array(axisCount)].map((_=>p.fixed)),p.currentPosition-start<size&&(this.postScriptNameID=p.uint16)}}var fvar$1=Object.freeze({__proto__:null,fvar:class fvar extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.majorVersion=p.uint16,this.minorVersion=p.uint16,this.axesArrayOffset=p.Offset16,p.uint16,this.axisCount=p.uint16,this.axisSize=p.uint16,this.instanceCount=p.uint16,this.instanceSize=p.uint16;const axisStart=this.tableStart+this.axesArrayOffset;lazy$1(this,"axes",(()=>(p.currentPosition=axisStart,[...new Array(this.axisCount)].map((_=>new VariationAxisRecord(p))))));const instanceStart=axisStart+this.axisCount*this.axisSize;lazy$1(this,"instances",(()=>{let instances=[];for(let i=0;i<this.instanceCount;i++)p.currentPosition=instanceStart+i*this.instanceSize,instances.push(new InstanceRecord(p,this.axisCount,this.instanceSize));return instances}))}getSupportedAxes(){return this.axes.map((a=>a.tag))}getAxis(name){return this.axes.find((a=>a.tag===name))}}});var cvt$1=Object.freeze({__proto__:null,cvt:class cvt extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview),n=dict.length/2;lazy$1(this,"items",(()=>[...new Array(n)].map((_=>p.fword))))}}});var fpgm$1=Object.freeze({__proto__:null,fpgm:class fpgm extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);lazy$1(this,"instructions",(()=>[...new Array(dict.length)].map((_=>p.uint8))))}}});class GASPRange{constructor(p){this.rangeMaxPPEM=p.uint16,this.rangeGaspBehavior=p.uint16}}var gasp$1=Object.freeze({__proto__:null,gasp:class gasp extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint16,this.numRanges=p.uint16;lazy$1(this,"gaspRanges",(()=>[...new Array(this.numRanges)].map((_=>new GASPRange(p)))))}}});var glyf$1=Object.freeze({__proto__:null,glyf:class glyf extends SimpleTable{constructor(dict,dataview){super(dict,dataview)}getGlyphData(offset,length){return this.parser.currentPosition=this.tableStart+offset,this.parser.readBytes(length)}}});var loca$1=Object.freeze({__proto__:null,loca:class loca extends SimpleTable{constructor(dict,dataview,tables){const{p}=super(dict,dataview),n=tables.maxp.numGlyphs+1;0===tables.head.indexToLocFormat?(this.x2=!0,lazy$1(this,"offsets",(()=>[...new Array(n)].map((_=>p.Offset16))))):lazy$1(this,"offsets",(()=>[...new Array(n)].map((_=>p.Offset32))))}getGlyphDataOffsetAndLength(glyphID){let offset=this.offsets[glyphID]*this.x2?2:1;return{offset,length:(this.offsets[glyphID+1]*this.x2?2:1)-offset}}}});var prep$1=Object.freeze({__proto__:null,prep:class prep extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);lazy$1(this,"instructions",(()=>[...new Array(dict.length)].map((_=>p.uint8))))}}});var CFF$1=Object.freeze({__proto__:null,CFF:class CFF extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);lazy$1(this,"data",(()=>p.readBytes()))}}});var CFF2$1=Object.freeze({__proto__:null,CFF2:class CFF2 extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);lazy$1(this,"data",(()=>p.readBytes()))}}});class VertOriginYMetric{constructor(p){this.glyphIndex=p.uint16,this.vertOriginY=p.int16}}var VORG$1=Object.freeze({__proto__:null,VORG:class VORG extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.majorVersion=p.uint16,this.minorVersion=p.uint16,this.defaultVertOriginY=p.int16,this.numVertOriginYMetrics=p.uint16,lazy$1(this,"vertORiginYMetrics",(()=>[...new Array(this.numVertOriginYMetrics)].map((_=>new VertOriginYMetric(p)))))}}});class BitmapSize{constructor(p){this.indexSubTableArrayOffset=p.Offset32,this.indexTablesSize=p.uint32,this.numberofIndexSubTables=p.uint32,this.colorRef=p.uint32,this.hori=new SbitLineMetrics(p),this.vert=new SbitLineMetrics(p),this.startGlyphIndex=p.uint16,this.endGlyphIndex=p.uint16,this.ppemX=p.uint8,this.ppemY=p.uint8,this.bitDepth=p.uint8,this.flags=p.int8}}class BitmapScale{constructor(p){this.hori=new SbitLineMetrics(p),this.vert=new SbitLineMetrics(p),this.ppemX=p.uint8,this.ppemY=p.uint8,this.substitutePpemX=p.uint8,this.substitutePpemY=p.uint8}}class SbitLineMetrics{constructor(p){this.ascender=p.int8,this.descender=p.int8,this.widthMax=p.uint8,this.caretSlopeNumerator=p.int8,this.caretSlopeDenominator=p.int8,this.caretOffset=p.int8,this.minOriginSB=p.int8,this.minAdvanceSB=p.int8,this.maxBeforeBL=p.int8,this.minAfterBL=p.int8,this.pad1=p.int8,this.pad2=p.int8}}class EBLC extends SimpleTable{constructor(dict,dataview,name){const{p}=super(dict,dataview,name);this.majorVersion=p.uint16,this.minorVersion=p.uint16,this.numSizes=p.uint32,lazy$1(this,"bitMapSizes",(()=>[...new Array(this.numSizes)].map((_=>new BitmapSize(p)))))}}var EBLC$1=Object.freeze({__proto__:null,EBLC});class EBDT extends SimpleTable{constructor(dict,dataview,name){const{p}=super(dict,dataview,name);this.majorVersion=p.uint16,this.minorVersion=p.uint16}}var EBDT$1=Object.freeze({__proto__:null,EBDT});var EBSC$1=Object.freeze({__proto__:null,EBSC:class EBSC extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.majorVersion=p.uint16,this.minorVersion=p.uint16,this.numSizes=p.uint32,lazy$1(this,"bitmapScales",(()=>[...new Array(this.numSizes)].map((_=>new BitmapScale(p)))))}}});var CBLC$1=Object.freeze({__proto__:null,CBLC:class CBLC extends EBLC{constructor(dict,dataview){super(dict,dataview,"CBLC")}}});var CBDT$1=Object.freeze({__proto__:null,CBDT:class CBDT extends EBDT{constructor(dict,dataview){super(dict,dataview,"CBDT")}}});var sbix$1=Object.freeze({__proto__:null,sbix:class sbix extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint16,this.flags=p.flags(16),this.numStrikes=p.uint32,lazy$1(this,"strikeOffsets",(()=>[...new Array(this.numStrikes)].map((_=>p.Offset32))))}}});class BaseGlyphRecord{constructor(p){this.gID=p.uint16,this.firstLayerIndex=p.uint16,this.numLayers=p.uint16}}class LayerRecord{constructor(p){this.gID=p.uint16,this.paletteIndex=p.uint16}}var COLR$1=Object.freeze({__proto__:null,COLR:class COLR extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint16,this.numBaseGlyphRecords=p.uint16,this.baseGlyphRecordsOffset=p.Offset32,this.layerRecordsOffset=p.Offset32,this.numLayerRecords=p.uint16}getBaseGlyphRecord(glyphID){let start=this.tableStart+this.baseGlyphRecordsOffset;this.parser.currentPosition=start;let first=new BaseGlyphRecord(this.parser),firstID=first.gID,end=this.tableStart+this.layerRecordsOffset-6;this.parser.currentPosition=end;let last=new BaseGlyphRecord(this.parser),lastID=last.gID;if(firstID===glyphID)return first;if(lastID===glyphID)return last;for(;start!==end;){let mid=start+(end-start)/12;this.parser.currentPosition=mid;let middle=new BaseGlyphRecord(this.parser),midID=middle.gID;if(midID===glyphID)return middle;midID>glyphID?end=mid:midID<glyphID&&(start=mid)}return!1}getLayers(glyphID){let record=this.getBaseGlyphRecord(glyphID);return this.parser.currentPosition=this.tableStart+this.layerRecordsOffset+4*record.firstLayerIndex,[...new Array(record.numLayers)].map((_=>new LayerRecord(p)))}}});class ColorRecord{constructor(p){this.blue=p.uint8,this.green=p.uint8,this.red=p.uint8,this.alpha=p.uint8}}class PaletteTypeArray{constructor(p,numPalettes){this.paletteTypes=[...new Array(numPalettes)].map((_=>p.uint32))}}class PaletteLabelsArray{constructor(p,numPalettes){this.paletteLabels=[...new Array(numPalettes)].map((_=>p.uint16))}}class PaletteEntryLabelArray{constructor(p,numPalettes){this.paletteEntryLabels=[...new Array(numPalettes)].map((_=>p.uint16))}}var CPAL$1=Object.freeze({__proto__:null,CPAL:class CPAL extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint16,this.numPaletteEntries=p.uint16;const numPalettes=this.numPalettes=p.uint16;this.numColorRecords=p.uint16,this.offsetFirstColorRecord=p.Offset32,this.colorRecordIndices=[...new Array(this.numPalettes)].map((_=>p.uint16)),lazy$1(this,"colorRecords",(()=>(p.currentPosition=this.tableStart+this.offsetFirstColorRecord,[...new Array(this.numColorRecords)].map((_=>new ColorRecord(p)))))),1===this.version&&(this.offsetPaletteTypeArray=p.Offset32,this.offsetPaletteLabelArray=p.Offset32,this.offsetPaletteEntryLabelArray=p.Offset32,lazy$1(this,"paletteTypeArray",(()=>(p.currentPosition=this.tableStart+this.offsetPaletteTypeArray,new PaletteTypeArray(p,numPalettes)))),lazy$1(this,"paletteLabelArray",(()=>(p.currentPosition=this.tableStart+this.offsetPaletteLabelArray,new PaletteLabelsArray(p,numPalettes)))),lazy$1(this,"paletteEntryLabelArray",(()=>(p.currentPosition=this.tableStart+this.offsetPaletteEntryLabelArray,new PaletteEntryLabelArray(p,numPalettes)))))}}});class SignatureRecord{constructor(p){this.format=p.uint32,this.length=p.uint32,this.offset=p.Offset32}}class SignatureBlockFormat1{constructor(p){p.uint16,p.uint16,this.signatureLength=p.uint32,this.signature=p.readBytes(this.signatureLength)}}var DSIG$1=Object.freeze({__proto__:null,DSIG:class DSIG extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint32,this.numSignatures=p.uint16,this.flags=p.uint16,this.signatureRecords=[...new Array(this.numSignatures)].map((_=>new SignatureRecord(p)))}getData(signatureID){const record=this.signatureRecords[signatureID];return this.parser.currentPosition=this.tableStart+record.offset,new SignatureBlockFormat1(this.parser)}}});class DeviceRecord{constructor(p,numGlyphs){this.pixelSize=p.uint8,this.maxWidth=p.uint8,this.widths=p.readBytes(numGlyphs)}}var hdmx$1=Object.freeze({__proto__:null,hdmx:class hdmx extends SimpleTable{constructor(dict,dataview,tables){const{p}=super(dict,dataview),numGlyphs=tables.hmtx.numGlyphs;this.version=p.uint16,this.numRecords=p.int16,this.sizeDeviceRecord=p.int32,this.records=[...new Array(numRecords)].map((_=>new DeviceRecord(p,numGlyphs)))}}});class KernSubTable{constructor(p){this.version=p.uint16,this.length=p.uint16,this.coverage=p.flags(8),this.format=p.uint8,0===this.format&&(this.nPairs=p.uint16,this.searchRange=p.uint16,this.entrySelector=p.uint16,this.rangeShift=p.uint16,lazy$1(this,"pairs",(()=>[...new Array(this.nPairs)].map((_=>new Pair(p)))))),2===this.format&&console.warn("Kern subtable format 2 is not supported: this parser currently only parses universal table data.")}get horizontal(){return this.coverage[0]}get minimum(){return this.coverage[1]}get crossstream(){return this.coverage[2]}get override(){return this.coverage[3]}}class Pair{constructor(p){this.left=p.uint16,this.right=p.uint16,this.value=p.fword}}var kern$1=Object.freeze({__proto__:null,kern:class kern extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint16,this.nTables=p.uint16,lazy$1(this,"tables",(()=>{let offset=this.tableStart+4;const tables=[];for(let i=0;i<this.nTables;i++){p.currentPosition=offset;let subtable=new KernSubTable(p);tables.push(subtable),offset+=subtable}return tables}))}}});var LTSH$1=Object.freeze({__proto__:null,LTSH:class LTSH extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint16,this.numGlyphs=p.uint16,this.yPels=p.readBytes(this.numGlyphs)}}});var MERG$1=Object.freeze({__proto__:null,MERG:class MERG extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint16,this.mergeClassCount=p.uint16,this.mergeDataOffset=p.Offset16,this.classDefCount=p.uint16,this.offsetToClassDefOffsets=p.Offset16,lazy$1(this,"mergeEntryMatrix",(()=>[...new Array(this.mergeClassCount)].map((_=>p.readBytes(this.mergeClassCount))))),console.warn("Full MERG parsing is currently not supported."),console.warn("If you need this table parsed, please file an issue, or better yet, a PR.")}}});class DataMap{constructor(tableStart,p){this.tableStart=tableStart,this.parser=p,this.tag=p.tag,this.dataOffset=p.Offset32,this.dataLength=p.uint32}getData(){return this.parser.currentField=this.tableStart+this.dataOffset,this.parser.readBytes(this.dataLength)}}var meta$1=Object.freeze({__proto__:null,meta:class meta extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint32,this.flags=p.uint32,p.uint32,this.dataMapsCount=p.uint32,this.dataMaps=[...new Array(this.dataMapsCount)].map((_=>new DataMap(this.tableStart,p)))}}});var PCLT$1=Object.freeze({__proto__:null,PCLT:class PCLT extends SimpleTable{constructor(dict,dataview){super(dict,dataview),console.warn("This font uses a PCLT table, which is currently not supported by this parser."),console.warn("If you need this table parsed, please file an issue, or better yet, a PR.")}}});class RatioRange{constructor(p){this.bCharSet=p.uint8,this.xRatio=p.uint8,this.yStartRatio=p.uint8,this.yEndRatio=p.uint8}}class VDMXGroup{constructor(p){this.recs=p.uint16,this.startsz=p.uint8,this.endsz=p.uint8,this.records=[...new Array(this.recs)].map((_=>new vTable(p)))}}class vTable{constructor(p){this.yPelHeight=p.uint16,this.yMax=p.int16,this.yMin=p.int16}}var VDMX$1=Object.freeze({__proto__:null,VDMX:class VDMX extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.uint16,this.numRecs=p.uint16,this.numRatios=p.uint16,this.ratRanges=[...new Array(this.numRatios)].map((_=>new RatioRange(p))),this.offsets=[...new Array(this.numRatios)].map((_=>p.Offset16)),this.VDMXGroups=[...new Array(this.numRecs)].map((_=>new VDMXGroup(p)))}}});var vhea$1=Object.freeze({__proto__:null,vhea:class vhea extends SimpleTable{constructor(dict,dataview){const{p}=super(dict,dataview);this.version=p.fixed,this.ascent=this.vertTypoAscender=p.int16,this.descent=this.vertTypoDescender=p.int16,this.lineGap=this.vertTypoLineGap=p.int16,this.advanceHeightMax=p.int16,this.minTopSideBearing=p.int16,this.minBottomSideBearing=p.int16,this.yMaxExtent=p.int16,this.caretSlopeRise=p.int16,this.caretSlopeRun=p.int16,this.caretOffset=p.int16,this.reserved=p.int16,this.reserved=p.int16,this.reserved=p.int16,this.reserved=p.int16,this.metricDataFormat=p.int16,this.numOfLongVerMetrics=p.uint16,p.verifyLength()}}});class LongVertMetric{constructor(h,b){this.advanceHeight=h,this.topSideBearing=b}}var vmtx$1=Object.freeze({__proto__:null,vmtx:class vmtx extends SimpleTable{constructor(dict,dataview,tables){super(dict,dataview);const numOfLongVerMetrics=tables.vhea.numOfLongVerMetrics,numGlyphs=tables.maxp.numGlyphs,metricsStart=p.currentPosition;if(lazy(this,"vMetrics",(()=>(p.currentPosition=metricsStart,[...new Array(numOfLongVerMetrics)].map((_=>new LongVertMetric(p.uint16,p.int16)))))),numOfLongVerMetrics<numGlyphs){const tsbStart=metricsStart+4*numOfLongVerMetrics;lazy(this,"topSideBearings",(()=>(p.currentPosition=tsbStart,[...new Array(numGlyphs-numOfLongVerMetrics)].map((_=>p.int16)))))}}}});const{kebabCase:make_families_from_faces_kebabCase}=src_lock_unlock_unlock(private_apis.j);function UploadFonts(){const{installFonts}=(0,react.useContext)(FontLibraryContext),[isUploading,setIsUploading]=(0,react.useState)(!1),[notice,setNotice]=(0,react.useState)(!1),handleFilesUpload=async files=>{setNotice(null),setIsUploading(!0);const uniqueFilenames=new Set,selectedFiles=[...files];let hasInvalidFiles=!1;const checkFilesPromises=selectedFiles.map((async file=>{const isFont=await async function isFontFile(file){const font=new Font("Uploaded Font");try{const buffer=await readFileAsArrayBuffer(file);return await font.fromDataBuffer(buffer,"font"),!0}catch(error){return!1}}(file);if(!isFont)return hasInvalidFiles=!0,null;if(uniqueFilenames.has(file.name))return null;const fileExtension=file.name.split(".").pop().toLowerCase();return ALLOWED_FILE_EXTENSIONS.includes(fileExtension)?(uniqueFilenames.add(file.name),file):null})),allowedFiles=(await Promise.all(checkFilesPromises)).filter((file=>null!==file));if(allowedFiles.length>0)loadFiles(allowedFiles);else{const message=hasInvalidFiles?(0,i18n_build_module.__)("Sorry, you are not allowed to upload this file type."):(0,i18n_build_module.__)("No fonts found to install.");setNotice({type:"error",message}),setIsUploading(!1)}},loadFiles=async files=>{const fontFacesLoaded=await Promise.all(files.map((async fontFile=>{const fontFaceData=await getFontFaceMetadata(fontFile);return await loadFontFaceInBrowser(fontFaceData,fontFaceData.file,"all"),fontFaceData})));handleInstall(fontFacesLoaded)};async function readFileAsArrayBuffer(file){return new Promise(((resolve,reject)=>{const reader=new window.FileReader;reader.readAsArrayBuffer(file),reader.onload=()=>resolve(reader.result),reader.onerror=reject}))}const getFontFaceMetadata=async fontFile=>{const buffer=await readFileAsArrayBuffer(fontFile),fontObj=new Font("Uploaded Font");fontObj.fromDataBuffer(buffer,fontFile.name);const font=(await new Promise((resolve=>fontObj.onload=resolve))).detail.font,{name}=font.opentype.tables,fontName=name.get(16)||name.get(1),isItalic=name.get(2).toLowerCase().includes("italic"),fontWeight=font.opentype.tables["OS/2"].usWeightClass||"normal",weightAxis=!!font.opentype.tables.fvar&&font.opentype.tables.fvar.axes.find((({tag})=>"wght"===tag));return{file:fontFile,fontFamily:fontName,fontStyle:isItalic?"italic":"normal",fontWeight:(weightAxis?`${weightAxis.minValue} ${weightAxis.maxValue}`:null)||fontWeight}},handleInstall=async fontFaces=>{const fontFamilies=function makeFamiliesFromFaces(fontFaces){const fontFamiliesObject=fontFaces.reduce(((acc,item)=>(acc[item.fontFamily]||(acc[item.fontFamily]={name:item.fontFamily,fontFamily:item.fontFamily,slug:make_families_from_faces_kebabCase(item.fontFamily.toLowerCase()),fontFace:[]}),acc[item.fontFamily].fontFace.push(item),acc)),{});return Object.values(fontFamiliesObject)}(fontFaces);try{await installFonts(fontFamilies),setNotice({type:"success",message:(0,i18n_build_module.__)("Fonts were installed successfully.")})}catch(error){setNotice({type:"error",message:error.message,errors:error?.installationErrors})}setIsUploading(!1)};return(0,jsx_runtime.jsxs)("div",{className:"font-library-modal__tabpanel-layout",children:[(0,jsx_runtime.jsx)(drop_zone.A,{onFilesDrop:files=>{handleFilesUpload(files)}}),(0,jsx_runtime.jsxs)(component.A,{className:"font-library-modal__local-fonts",children:[notice&&(0,jsx_runtime.jsxs)(build_module_notice.A,{status:notice.type,__unstableHTML:!0,onRemove:()=>setNotice(null),children:[notice.message,notice.errors&&(0,jsx_runtime.jsx)("ul",{children:notice.errors.map(((error,index)=>(0,jsx_runtime.jsx)("li",{children:error},index)))})]}),isUploading&&(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)("div",{className:"font-library-modal__upload-area",children:(0,jsx_runtime.jsx)(progress_bar,{})})}),!isUploading&&(0,jsx_runtime.jsx)(form_file_upload.A,{accept:ALLOWED_FILE_EXTENSIONS.map((ext=>`.${ext}`)).join(","),multiple:!0,onChange:event=>{handleFilesUpload(event.target.files)},render:({openFileDialog})=>(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"font-library-modal__upload-area",onClick:openFileDialog,children:(0,i18n_build_module.__)("Upload font")})}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:2}),(0,jsx_runtime.jsx)(text_component.A,{className:"font-library-modal__upload-area__text",children:(0,i18n_build_module.__)("Uploaded fonts appear in your library and can be used in your theme. Supported formats: .ttf, .otf, .woff, and .woff2.")})]})]})}UploadFonts.displayName="UploadFonts";const upload_fonts=UploadFonts;UploadFonts.__docgenInfo={description:"",methods:[],displayName:"UploadFonts"};const{Tabs:font_library_modal_Tabs}=src_lock_unlock_unlock(private_apis.j),DEFAULT_TAB={id:"installed-fonts",title:(0,i18n_build_module._x)("Library","Font library")},UPLOAD_TAB={id:"upload-fonts",title:(0,i18n_build_module.__)("Upload")};function FontLibraryModal({onRequestClose,defaultTabId="installed-fonts"}){const{collections}=(0,react.useContext)(FontLibraryContext),canUserCreate=(0,use_select.A)((select=>select(core_data_build_module.M_).canUser("create",{kind:"postType",name:"wp_font_family"})),[]),tabs=[DEFAULT_TAB];return canUserCreate&&(tabs.push(UPLOAD_TAB),tabs.push(...(collections=>collections.map((({slug,name})=>({id:slug,title:1===collections.length&&"google-fonts"===slug?(0,i18n_build_module.__)("Install Fonts"):name}))))(collections||[]))),(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Fonts"),onRequestClose,isFullScreen:!0,className:"font-library-modal",children:(0,jsx_runtime.jsxs)(font_library_modal_Tabs,{defaultTabId,children:[(0,jsx_runtime.jsx)("div",{className:"font-library-modal__tablist-container",children:(0,jsx_runtime.jsx)(font_library_modal_Tabs.TabList,{children:tabs.map((({id,title})=>(0,jsx_runtime.jsx)(font_library_modal_Tabs.Tab,{tabId:id,children:title},id)))})}),tabs.map((({id})=>{let contents;switch(id){case"upload-fonts":contents=(0,jsx_runtime.jsx)(upload_fonts,{});break;case"installed-fonts":contents=(0,jsx_runtime.jsx)(installed_fonts,{});break;default:contents=(0,jsx_runtime.jsx)(font_collection,{slug:id})}return(0,jsx_runtime.jsx)(font_library_modal_Tabs.TabPanel,{tabId:id,focusable:!1,children:contents},id)}))]})})}FontLibraryModal.displayName="FontLibraryModal";const font_library_modal=FontLibraryModal;function FontFamilyItem({font}){const{handleSetLibraryFontSelected,setModalTabOpen}=(0,react.useContext)(FontLibraryContext),variantsCount=font?.fontFace?.length||1,previewStyle=getFamilyPreviewStyle(font);return(0,jsx_runtime.jsx)(item_component.A,{onClick:()=>{handleSetLibraryFontSelected(font),setModalTabOpen("installed-fonts")},children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{style:previewStyle,children:font.name}),(0,jsx_runtime.jsx)(flex_item_component.A,{className:"edit-site-global-styles-screen-typography__font-variants-count",children:(0,i18n_build_module.nv)((0,i18n_build_module._n)("%d variant","%d variants",variantsCount),variantsCount)})]})})}FontLibraryModal.__docgenInfo={description:"",methods:[],displayName:"FontLibraryModal",props:{defaultTabId:{defaultValue:{value:"'installed-fonts'",computed:!1},required:!1}}},FontFamilyItem.displayName="FontFamilyItem";const font_family_item=FontFamilyItem;FontFamilyItem.__docgenInfo={description:"",methods:[],displayName:"FontFamilyItem"};const{useGlobalSetting:font_families_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb);function mapFontsWithSource(fonts,source){return fonts?fonts.map((f=>setUIValuesNeeded(f,{source}))):[]}function FontFamilies(){const{baseCustomFonts,modalTabOpen,setModalTabOpen}=(0,react.useContext)(FontLibraryContext),[fontFamilies]=font_families_useGlobalSetting("typography.fontFamilies"),[baseFontFamilies]=font_families_useGlobalSetting("typography.fontFamilies",void 0,"base"),activeFonts=[...mapFontsWithSource(fontFamilies?.theme,"theme"),...mapFontsWithSource(fontFamilies?.custom,"custom")].sort(((a,b)=>a.name.localeCompare(b.name))),hasFonts=0<activeFonts.length,hasInstalledFonts=hasFonts||baseFontFamilies?.theme?.length>0||baseCustomFonts?.length>0;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!!modalTabOpen&&(0,jsx_runtime.jsx)(font_library_modal,{onRequestClose:()=>setModalTabOpen(null),defaultTabId:modalTabOpen}),(0,jsx_runtime.jsxs)(component.A,{spacing:2,children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",children:[(0,jsx_runtime.jsx)(subtitle,{level:3,children:(0,i18n_build_module.__)("Fonts")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{onClick:()=>setModalTabOpen("installed-fonts"),label:(0,i18n_build_module.__)("Manage fonts"),icon:settings.A,size:"small"})]}),activeFonts.length>0&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(item_group_component.A,{size:"large",isBordered:!0,isSeparated:!0,children:activeFonts.map((font=>(0,jsx_runtime.jsx)(font_family_item,{font},font.slug)))})}),!hasFonts&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(text_component.A,{as:"p",children:hasInstalledFonts?(0,i18n_build_module.__)("No fonts activated."):(0,i18n_build_module.__)("No fonts installed.")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{className:"edit-site-global-styles-font-families__manage-fonts",variant:"secondary",__next40pxDefaultSize:!0,onClick:()=>{setModalTabOpen(hasInstalledFonts?"installed-fonts":"upload-fonts")},children:hasInstalledFonts?(0,i18n_build_module.__)("Manage fonts"):(0,i18n_build_module.__)("Add fonts")})]})]})]})}const font_families=({...props})=>(0,jsx_runtime.jsx)(font_library_modal_context,{children:(0,jsx_runtime.jsx)(FontFamilies,{...props})});function ScreenTypography(){const fontLibraryEnabled=(0,use_select.A)((select=>select(store_store).getEditorSettings().fontLibraryEnabled),[]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:(0,i18n_build_module.__)("Typography"),description:(0,i18n_build_module.__)("Available fonts, typographic styles, and the application of those styles.")}),(0,jsx_runtime.jsx)("div",{className:"edit-site-global-styles-screen",children:(0,jsx_runtime.jsxs)(component.A,{spacing:7,children:[(0,jsx_runtime.jsx)(TypographyVariations,{title:(0,i18n_build_module.__)("Typesets")}),fontLibraryEnabled&&(0,jsx_runtime.jsx)(font_families,{}),(0,jsx_runtime.jsx)(typography_elements,{}),(0,jsx_runtime.jsx)(font_sizes_count,{})]})})]})}const screen_typography=ScreenTypography;ScreenTypography.__docgenInfo={description:"",methods:[],displayName:"ScreenTypography"};var toggle_group_control_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control/component.js"),toggle_group_control_option_component=__webpack_require__("./packages/components/build-module/toggle-group-control/toggle-group-control-option/component.js");const{useGlobalStyle:typography_panel_useGlobalStyle,useGlobalSetting:typography_panel_useGlobalSetting,useSettingsForBlockElement:typography_panel_useSettingsForBlockElement,TypographyPanel:typography_panel_StylesTypographyPanel}=src_lock_unlock_unlock(build_module.jb);function TypographyPanel({element,headingLevel}){let prefixParts=[];"heading"===element?prefixParts=prefixParts.concat(["elements",headingLevel]):element&&"text"!==element&&(prefixParts=prefixParts.concat(["elements",element]));const prefix=prefixParts.join("."),[style]=typography_panel_useGlobalStyle(prefix,void 0,"user",{shouldDecodeEncode:!1}),[inheritedStyle,setStyle]=typography_panel_useGlobalStyle(prefix,void 0,"all",{shouldDecodeEncode:!1}),[rawSettings]=typography_panel_useGlobalSetting(""),settings=typography_panel_useSettingsForBlockElement(rawSettings,void 0,"heading"===element?headingLevel:element);return(0,jsx_runtime.jsx)(typography_panel_StylesTypographyPanel,{inheritedValue:inheritedStyle,value:style,onChange:setStyle,settings})}TypographyPanel.displayName="TypographyPanel",TypographyPanel.__docgenInfo={description:"",methods:[],displayName:"TypographyPanel"};const{useGlobalStyle:typography_preview_useGlobalStyle}=src_lock_unlock_unlock(build_module.jb);function TypographyPreview({name,element,headingLevel}){var _ref;let prefix="";"heading"===element?prefix=`elements.${headingLevel}.`:element&&"text"!==element&&(prefix=`elements.${element}.`);const[fontFamily]=typography_preview_useGlobalStyle(prefix+"typography.fontFamily",name),[gradientValue]=typography_preview_useGlobalStyle(prefix+"color.gradient",name),[backgroundColor]=typography_preview_useGlobalStyle(prefix+"color.background",name),[fallbackBackgroundColor]=typography_preview_useGlobalStyle("color.background"),[color]=typography_preview_useGlobalStyle(prefix+"color.text",name),[fontSize]=typography_preview_useGlobalStyle(prefix+"typography.fontSize",name),[fontStyle]=typography_preview_useGlobalStyle(prefix+"typography.fontStyle",name),[fontWeight]=typography_preview_useGlobalStyle(prefix+"typography.fontWeight",name),[letterSpacing]=typography_preview_useGlobalStyle(prefix+"typography.letterSpacing",name),extraStyles="link"===element?{textDecoration:"underline"}:{};return(0,jsx_runtime.jsx)("div",{className:"edit-site-typography-preview",style:{fontFamily:null!=fontFamily?fontFamily:"serif",background:null!==(_ref=null!=gradientValue?gradientValue:backgroundColor)&&void 0!==_ref?_ref:fallbackBackgroundColor,color,fontSize,fontStyle,fontWeight,letterSpacing,...extraStyles},children:"Aa"})}TypographyPreview.displayName="TypographyPreview",TypographyPreview.__docgenInfo={description:"",methods:[],displayName:"TypographyPreview"};const screen_typography_element_elements={text:{description:(0,i18n_build_module.__)("Manage the fonts used on the site."),title:(0,i18n_build_module.__)("Text")},link:{description:(0,i18n_build_module.__)("Manage the fonts and typography used on the links."),title:(0,i18n_build_module.__)("Links")},heading:{description:(0,i18n_build_module.__)("Manage the fonts and typography used on headings."),title:(0,i18n_build_module.__)("Headings")},caption:{description:(0,i18n_build_module.__)("Manage the fonts and typography used on captions."),title:(0,i18n_build_module.__)("Captions")},button:{description:(0,i18n_build_module.__)("Manage the fonts and typography used on buttons."),title:(0,i18n_build_module.__)("Buttons")}};function ScreenTypographyElement({element}){const[headingLevel,setHeadingLevel]=(0,react.useState)("heading");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:screen_typography_element_elements[element].title,description:screen_typography_element_elements[element].description}),(0,jsx_runtime.jsx)(spacer_component.A,{marginX:4,children:(0,jsx_runtime.jsx)(TypographyPreview,{element,headingLevel})}),"heading"===element&&(0,jsx_runtime.jsx)(spacer_component.A,{marginX:4,marginBottom:"1em",children:(0,jsx_runtime.jsxs)(toggle_group_control_component.A,{label:(0,i18n_build_module.__)("Select heading level"),hideLabelFromVision:!0,value:headingLevel,onChange:setHeadingLevel,isBlock:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0,children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"heading",showTooltip:!0,"aria-label":(0,i18n_build_module.__)("All headings"),label:(0,i18n_build_module._x)("All","heading levels")}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"h1",showTooltip:!0,"aria-label":(0,i18n_build_module.__)("Heading 1"),label:(0,i18n_build_module.__)("H1")}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"h2",showTooltip:!0,"aria-label":(0,i18n_build_module.__)("Heading 2"),label:(0,i18n_build_module.__)("H2")}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"h3",showTooltip:!0,"aria-label":(0,i18n_build_module.__)("Heading 3"),label:(0,i18n_build_module.__)("H3")}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"h4",showTooltip:!0,"aria-label":(0,i18n_build_module.__)("Heading 4"),label:(0,i18n_build_module.__)("H4")}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"h5",showTooltip:!0,"aria-label":(0,i18n_build_module.__)("Heading 5"),label:(0,i18n_build_module.__)("H5")}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"h6",showTooltip:!0,"aria-label":(0,i18n_build_module.__)("Heading 6"),label:(0,i18n_build_module.__)("H6")})]})}),(0,jsx_runtime.jsx)(TypographyPanel,{element,headingLevel})]})}const screen_typography_element=ScreenTypographyElement;ScreenTypographyElement.__docgenInfo={description:"",methods:[],displayName:"ScreenTypographyElement"};const{useGlobalStyle:font_size_preview_useGlobalStyle}=src_lock_unlock_unlock(build_module.jb);function FontSizePreview({fontSize}){var _font$fontFamily;const[font]=font_size_preview_useGlobalStyle("typography"),input=fontSize?.fluid?.min&&fontSize?.fluid?.max?{minimumFontSize:fontSize.fluid.min,maximumFontSize:fontSize.fluid.max}:{fontSize:fontSize.size},computedFontSize=(0,build_module.UE)(input);return(0,jsx_runtime.jsx)("div",{className:"edit-site-typography-preview",style:{fontSize:computedFontSize,fontFamily:null!==(_font$fontFamily=font?.fontFamily)&&void 0!==_font$fontFamily?_font$fontFamily:"serif"},children:(0,i18n_build_module.__)("Aa")})}FontSizePreview.displayName="FontSizePreview";const font_size_preview=FontSizePreview;function ConfirmDeleteFontSizeDialog({fontSize,isOpen,toggleOpen,handleRemoveFontSize}){return(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen,cancelButtonText:(0,i18n_build_module.__)("Cancel"),confirmButtonText:(0,i18n_build_module.__)("Delete"),onCancel:()=>{toggleOpen()},onConfirm:async()=>{toggleOpen(),handleRemoveFontSize(fontSize)},size:"medium",children:fontSize&&(0,i18n_build_module.nv)((0,i18n_build_module.__)('Are you sure you want to delete "%s" font size preset?'),fontSize.name)})}FontSizePreview.__docgenInfo={description:"",methods:[],displayName:"FontSizePreview"},ConfirmDeleteFontSizeDialog.displayName="ConfirmDeleteFontSizeDialog";const confirm_delete_font_size_dialog=ConfirmDeleteFontSizeDialog;function RenameFontSizeDialog({fontSize,toggleOpen,handleRename}){const[newName,setNewName]=(0,react.useState)(fontSize.name);return(0,jsx_runtime.jsx)(modal.A,{onRequestClose:toggleOpen,focusOnMount:"firstContentElement",title:(0,i18n_build_module.__)("Rename"),size:"small",children:(0,jsx_runtime.jsx)("form",{onSubmit:event=>{event.preventDefault(),newName.trim()&&handleRename(newName),toggleOpen(),toggleOpen()},children:(0,jsx_runtime.jsxs)(component.A,{spacing:"3",children:[(0,jsx_runtime.jsx)(input_control.Ay,{__next40pxDefaultSize:!0,autoComplete:"off",value:newName,onChange:setNewName,label:(0,i18n_build_module.__)("Name"),placeholder:(0,i18n_build_module.__)("Font size preset name")}),(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"right",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:toggleOpen,children:(0,i18n_build_module.__)("Cancel")}),(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,i18n_build_module.__)("Save")})]})]})})})}ConfirmDeleteFontSizeDialog.__docgenInfo={description:"",methods:[],displayName:"ConfirmDeleteFontSizeDialog"},RenameFontSizeDialog.displayName="RenameFontSizeDialog";const rename_font_size_dialog=RenameFontSizeDialog;RenameFontSizeDialog.__docgenInfo={description:"",methods:[],displayName:"RenameFontSizeDialog"};var unit_control_utils=__webpack_require__("./packages/components/build-module/unit-control/utils.js"),unit_control=__webpack_require__("./packages/components/build-module/unit-control/index.js"),range_control=__webpack_require__("./packages/components/build-module/range-control/index.js");const DEFAULT_UNITS=["px","em","rem","vw","vh"];function SizeControl({__nextHasNoMarginBottom,...props}){const{baseControlProps}=function useBaseControlProps(props){const{help,id:preferredId,...restProps}=props,uniqueId=(0,use_instance_id.A)(base_control.Ay,"wp-components-base-control",preferredId);return{baseControlProps:{id:uniqueId,help,...restProps},controlProps:{id:uniqueId,...help?{"aria-describedby":`${uniqueId}__help`}:{}}}}(props),{value,onChange,fallbackValue,disabled,label}=props,units=(0,unit_control_utils.E)({availableUnits:DEFAULT_UNITS}),[valueQuantity,valueUnit="px"]=(0,unit_control_utils.bu)(value,units),isValueUnitRelative=!!valueUnit&&["em","rem","vw","vh"].includes(valueUnit);return(0,jsx_runtime.jsx)(base_control.Ay,{...baseControlProps,__nextHasNoMarginBottom:!0,children:(0,jsx_runtime.jsxs)(flex_component.A,{children:[(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(unit_control.Ay,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label,hideLabelFromVision:!0,value,onChange:newValue=>{onChange(newValue)},units,min:0,disabled})}),(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,jsx_runtime.jsx)(spacer_component.A,{marginX:2,marginBottom:0,children:(0,jsx_runtime.jsx)(range_control.A,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label,hideLabelFromVision:!0,value:valueQuantity,initialPosition:fallbackValue,withInputField:!1,onChange:newValue=>{onChange?.(newValue+valueUnit)},min:0,max:isValueUnitRelative?10:100,step:isValueUnitRelative?.1:1,disabled})})})]})})}SizeControl.displayName="SizeControl";const size_control=SizeControl;SizeControl.__docgenInfo={description:"",methods:[],displayName:"SizeControl"};const{DropdownMenuV2:font_size_DropdownMenuV2}=src_lock_unlock_unlock(private_apis.j),{useGlobalSetting:font_size_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb);function FontSize(){var _fontSizes$origin;const[isDeleteConfirmOpen,setIsDeleteConfirmOpen]=(0,react.useState)(!1),[isRenameDialogOpen,setIsRenameDialogOpen]=(0,react.useState)(!1),{params:{origin,slug},goBack}=(0,use_navigator.b)(),[fontSizes,setFontSizes]=font_size_useGlobalSetting("typography.fontSizes"),[globalFluid]=font_size_useGlobalSetting("typography.fluid"),sizes=null!==(_fontSizes$origin=fontSizes[origin])&&void 0!==_fontSizes$origin?_fontSizes$origin:[],fontSize=sizes.find((size=>size.slug===slug));if((0,react.useEffect)((()=>{slug&&!fontSize&&goBack()}),[slug,fontSize,goBack]),!origin||!slug||!fontSize)return null;const isFluid=void 0!==fontSize?.fluid?!!fontSize.fluid:!!globalFluid,isCustomFluid="object"==typeof fontSize?.fluid,updateFontSize=(key,value)=>{const newFontSizes=sizes.map((size=>size.slug===slug?{...size,[key]:value}:size));setFontSizes({...fontSizes,[origin]:newFontSizes})},toggleDeleteConfirm=()=>{setIsDeleteConfirmOpen(!isDeleteConfirmOpen)},toggleRenameDialog=()=>{setIsRenameDialogOpen(!isRenameDialogOpen)};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(confirm_delete_font_size_dialog,{fontSize,isOpen:isDeleteConfirmOpen,toggleOpen:toggleDeleteConfirm,handleRemoveFontSize:()=>{const newFontSizes=sizes.filter((size=>size.slug!==slug));setFontSizes({...fontSizes,[origin]:newFontSizes})}}),isRenameDialogOpen&&(0,jsx_runtime.jsx)(rename_font_size_dialog,{fontSize,toggleOpen:toggleRenameDialog,handleRename:value=>{updateFontSize("name",value)}}),(0,jsx_runtime.jsxs)(component.A,{spacing:4,children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",align:"flex-start",children:[(0,jsx_runtime.jsx)(global_styles_header,{title:fontSize.name,description:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Manage the font size %s."),fontSize.name)}),"custom"===origin&&(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(spacer_component.A,{marginTop:3,marginBottom:0,paddingX:4,children:(0,jsx_runtime.jsxs)(font_size_DropdownMenuV2,{trigger:(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",icon:more_vertical.A,label:(0,i18n_build_module.__)("Font size options")}),children:[(0,jsx_runtime.jsx)(font_size_DropdownMenuV2.Item,{onClick:toggleRenameDialog,children:(0,jsx_runtime.jsx)(font_size_DropdownMenuV2.ItemLabel,{children:(0,i18n_build_module.__)("Rename")})}),(0,jsx_runtime.jsx)(font_size_DropdownMenuV2.Item,{onClick:toggleDeleteConfirm,children:(0,jsx_runtime.jsx)(font_size_DropdownMenuV2.ItemLabel,{children:(0,i18n_build_module.__)("Delete")})})]})})})]}),(0,jsx_runtime.jsx)(view_component.A,{children:(0,jsx_runtime.jsx)(spacer_component.A,{paddingX:4,marginBottom:0,paddingBottom:6,children:(0,jsx_runtime.jsxs)(component.A,{spacing:4,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(font_size_preview,{fontSize})}),(0,jsx_runtime.jsx)(size_control,{label:(0,i18n_build_module.__)("Size"),value:isCustomFluid?"":fontSize.size,onChange:value=>{updateFontSize("size",value)},disabled:isCustomFluid}),(0,jsx_runtime.jsx)(toggle_control.A,{label:(0,i18n_build_module.__)("Fluid typography"),help:(0,i18n_build_module.__)("Scale the font size dynamically to fit the screen or viewport."),checked:isFluid,onChange:value=>{updateFontSize("fluid",value)},__nextHasNoMarginBottom:!0}),isFluid&&(0,jsx_runtime.jsx)(toggle_control.A,{label:(0,i18n_build_module.__)("Custom fluid values"),help:(0,i18n_build_module.__)("Set custom min and max values for the fluid font size."),checked:isCustomFluid,onChange:value=>{updateFontSize("fluid",!value||{min:fontSize.size,max:fontSize.size})},__nextHasNoMarginBottom:!0}),isCustomFluid&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(size_control,{label:(0,i18n_build_module.__)("Minimum"),value:fontSize.fluid?.min,onChange:value=>{updateFontSize("fluid",{...fontSize.fluid,min:value})}}),(0,jsx_runtime.jsx)(size_control,{label:(0,i18n_build_module.__)("Maximum"),value:fontSize.fluid?.max,onChange:value=>{updateFontSize("fluid",{...fontSize.fluid,max:value})}})]})]})})})]})]})}const font_size=FontSize;function ConfirmResetFontSizesDialog({text,confirmButtonText,isOpen,toggleOpen,onConfirm}){return(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen,cancelButtonText:(0,i18n_build_module.__)("Cancel"),confirmButtonText,onCancel:()=>{toggleOpen()},onConfirm:async()=>{toggleOpen(),onConfirm()},size:"medium",children:text})}FontSize.__docgenInfo={description:"",methods:[],displayName:"FontSize"},ConfirmResetFontSizesDialog.displayName="ConfirmResetFontSizesDialog";const confirm_reset_font_sizes_dialog=ConfirmResetFontSizesDialog;ConfirmResetFontSizesDialog.__docgenInfo={description:"",methods:[],displayName:"ConfirmResetFontSizesDialog"};const{DropdownMenuV2:font_sizes_DropdownMenuV2}=src_lock_unlock_unlock(private_apis.j),{useGlobalSetting:font_sizes_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb);function FontSizeGroup({label,origin,sizes,handleAddFontSize,handleResetFontSizes}){const[isResetDialogOpen,setIsResetDialogOpen]=(0,react.useState)(!1),toggleResetDialog=()=>setIsResetDialogOpen(!isResetDialogOpen),resetDialogText="custom"===origin?(0,i18n_build_module.__)("Are you sure you want to remove all custom font size presets?"):(0,i18n_build_module.__)("Are you sure you want to reset all font size presets to their default values?");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isResetDialogOpen&&(0,jsx_runtime.jsx)(confirm_reset_font_sizes_dialog,{text:resetDialogText,confirmButtonText:"custom"===origin?(0,i18n_build_module.__)("Remove"):(0,i18n_build_module.__)("Reset"),isOpen:isResetDialogOpen,toggleOpen:toggleResetDialog,onConfirm:handleResetFontSizes}),(0,jsx_runtime.jsxs)(component.A,{spacing:4,children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",align:"center",children:[(0,jsx_runtime.jsx)(subtitle,{level:3,children:label}),(0,jsx_runtime.jsxs)(flex_item_component.A,{children:["custom"===origin&&(0,jsx_runtime.jsx)(build_module_button.Ay,{label:(0,i18n_build_module.__)("Add font size"),icon:plus.A,size:"small",onClick:handleAddFontSize}),!!handleResetFontSizes&&(0,jsx_runtime.jsx)(font_sizes_DropdownMenuV2,{trigger:(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",icon:more_vertical.A,label:(0,i18n_build_module.__)("Font size presets options")}),children:(0,jsx_runtime.jsx)(font_sizes_DropdownMenuV2.Item,{onClick:toggleResetDialog,children:(0,jsx_runtime.jsx)(font_sizes_DropdownMenuV2.ItemLabel,{children:"custom"===origin?(0,i18n_build_module.__)("Remove font size presets"):(0,i18n_build_module.__)("Reset font size presets")})})})]})]}),!!sizes.length&&(0,jsx_runtime.jsx)(item_group_component.A,{isBordered:!0,isSeparated:!0,children:sizes.map((size=>(0,jsx_runtime.jsx)(NavigationButtonAsItem,{path:`/typography/font-sizes/${origin}/${size.slug}`,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{direction:"row",children:[(0,jsx_runtime.jsx)(flex_item_component.A,{className:"edit-site-font-size__item",children:size.name}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-end",children:[(0,jsx_runtime.jsx)(flex_block_component.A,{className:"edit-site-font-size__item edit-site-font-size__item-value",children:size.size}),(0,jsx_runtime.jsx)(icon.A,{icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A})]})})]})},size.slug)))})]})]})}function font_sizes_FontSizes(){const[themeFontSizes,setThemeFontSizes]=font_sizes_useGlobalSetting("typography.fontSizes.theme"),[baseThemeFontSizes]=font_sizes_useGlobalSetting("typography.fontSizes.theme",null,"base"),[defaultFontSizes,setDefaultFontSizes]=font_sizes_useGlobalSetting("typography.fontSizes.default"),[baseDefaultFontSizes]=font_sizes_useGlobalSetting("typography.fontSizes.default",null,"base"),[customFontSizes=[],setCustomFontSizes]=font_sizes_useGlobalSetting("typography.fontSizes.custom"),[defaultFontSizesEnabled]=font_sizes_useGlobalSetting("typography.defaultFontSizes"),handleAddFontSize=()=>{const index=getNewIndexFromPresets(customFontSizes,"custom-"),newFontSize={name:(0,i18n_build_module.nv)((0,i18n_build_module.__)("New Font Size %d"),index),size:"16px",slug:`custom-${index}`};setCustomFontSizes([...customFontSizes,newFontSize])},hasSameSizeValues=(arr1,arr2)=>arr1.map((item=>item.size)).join("")===arr2.map((item=>item.size)).join("");return(0,jsx_runtime.jsxs)(component.A,{spacing:2,children:[(0,jsx_runtime.jsx)(global_styles_header,{title:(0,i18n_build_module.__)("Font size presets"),description:(0,i18n_build_module.__)("Create and edit the presets used for font sizes across the site.")}),(0,jsx_runtime.jsx)(view_component.A,{children:(0,jsx_runtime.jsx)(spacer_component.A,{paddingX:4,children:(0,jsx_runtime.jsxs)(component.A,{spacing:8,children:[!!themeFontSizes?.length&&(0,jsx_runtime.jsx)(FontSizeGroup,{label:(0,i18n_build_module.__)("Theme"),origin:"theme",sizes:themeFontSizes,baseSizes:baseThemeFontSizes,handleAddFontSize,handleResetFontSizes:hasSameSizeValues(themeFontSizes,baseThemeFontSizes)?null:()=>setThemeFontSizes(baseThemeFontSizes)}),defaultFontSizesEnabled&&!!defaultFontSizes?.length&&(0,jsx_runtime.jsx)(FontSizeGroup,{label:(0,i18n_build_module.__)("Default"),origin:"default",sizes:defaultFontSizes,baseSizes:baseDefaultFontSizes,handleAddFontSize,handleResetFontSizes:hasSameSizeValues(defaultFontSizes,baseDefaultFontSizes)?null:()=>setDefaultFontSizes(baseDefaultFontSizes)}),(0,jsx_runtime.jsx)(FontSizeGroup,{label:(0,i18n_build_module.__)("Custom"),origin:"custom",sizes:customFontSizes,handleAddFontSize,handleResetFontSizes:customFontSizes.length>0?()=>setCustomFontSizes([]):null})]})})})]})}font_sizes_FontSizes.displayName="FontSizes";const font_sizes=font_sizes_FontSizes;font_sizes_FontSizes.__docgenInfo={description:"",methods:[],displayName:"FontSizes"};var z_stack_component=__webpack_require__("./packages/components/build-module/z-stack/component.js"),color_indicator=__webpack_require__("./packages/components/build-module/color-indicator/index.js"),shuffle=__webpack_require__("./packages/icons/build-module/library/shuffle.js");function ColorIndicatorWrapper({className,...props}){return(0,jsx_runtime.jsx)(flex_component.A,{className:(0,clsx.A)("edit-site-global-styles__color-indicator-wrapper",className),...props})}ColorIndicatorWrapper.displayName="ColorIndicatorWrapper";const color_indicator_wrapper=ColorIndicatorWrapper;ColorIndicatorWrapper.__docgenInfo={description:"",methods:[],displayName:"ColorIndicatorWrapper"};const{useGlobalSetting:palette_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb),EMPTY_COLORS=[];function Palette({name}){const[customColors]=palette_useGlobalSetting("color.palette.custom"),[themeColors]=palette_useGlobalSetting("color.palette.theme"),[defaultColors]=palette_useGlobalSetting("color.palette.default"),[defaultPaletteEnabled]=palette_useGlobalSetting("color.defaultPalette",name),[randomizeThemeColors]=function useColorRandomizer(name){const[themeColors,setThemeColors]=hooks_useGlobalSetting("color.palette.theme",name);return window.__experimentalEnableColorRandomizer?[function randomizeColors(){const randomRotationValue=Math.floor(225*Math.random()),newColors=themeColors.map((colorObject=>{const{color}=colorObject,newColor=(0,colord.Mj)(color).rotate(randomRotationValue).toHex();return{...colorObject,color:newColor}}));setThemeColors(newColors)}]:[]}(),colors=(0,react.useMemo)((()=>[...customColors||EMPTY_COLORS,...themeColors||EMPTY_COLORS,...defaultColors&&defaultPaletteEnabled?defaultColors:EMPTY_COLORS]),[customColors,themeColors,defaultColors,defaultPaletteEnabled]),screenPath=name?"/blocks/"+encodeURIComponent(name)+"/colors/palette":"/colors/palette";return(0,jsx_runtime.jsxs)(component.A,{spacing:3,children:[(0,jsx_runtime.jsx)(subtitle,{level:3,children:(0,i18n_build_module.__)("Palette")}),(0,jsx_runtime.jsx)(item_group_component.A,{isBordered:!0,isSeparated:!0,children:(0,jsx_runtime.jsx)(NavigationButtonAsItem,{path:screenPath,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{direction:"row",children:[colors.length>0?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(z_stack_component.A,{isLayered:!1,offset:-8,children:colors.slice(0,5).map((({color},index)=>(0,jsx_runtime.jsx)(color_indicator_wrapper,{children:(0,jsx_runtime.jsx)(color_indicator.A,{colorValue:color})},`${color}-${index}`)))}),(0,jsx_runtime.jsx)(flex_item_component.A,{isBlock:!0,children:(0,i18n_build_module.__)("Edit palette")})]}):(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,i18n_build_module.__)("Add colors")}),(0,jsx_runtime.jsx)(icon.A,{icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A})]})})}),window.__experimentalEnableColorRandomizer&&themeColors?.length>0&&(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"secondary",icon:shuffle.A,onClick:randomizeThemeColors,children:(0,i18n_build_module.__)("Randomize colors")})]})}Palette.displayName="Palette";const palette=Palette;Palette.__docgenInfo={description:"",methods:[],displayName:"Palette"};const{useGlobalStyle:screen_colors_useGlobalStyle,useGlobalSetting:screen_colors_useGlobalSetting,useSettingsForBlockElement:screen_colors_useSettingsForBlockElement,ColorPanel:screen_colors_StylesColorPanel}=src_lock_unlock_unlock(build_module.jb);function ScreenColors(){const[style]=screen_colors_useGlobalStyle("",void 0,"user",{shouldDecodeEncode:!1}),[inheritedStyle,setStyle]=screen_colors_useGlobalStyle("",void 0,"all",{shouldDecodeEncode:!1}),[rawSettings]=screen_colors_useGlobalSetting(""),settings=screen_colors_useSettingsForBlockElement(rawSettings);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:(0,i18n_build_module.__)("Colors"),description:(0,i18n_build_module.__)("Palette colors and the application of those colors on site elements.")}),(0,jsx_runtime.jsx)("div",{className:"edit-site-global-styles-screen",children:(0,jsx_runtime.jsxs)(component.A,{spacing:7,children:[(0,jsx_runtime.jsx)(palette,{}),(0,jsx_runtime.jsx)(screen_colors_StylesColorPanel,{inheritedValue:inheritedStyle,value:style,onChange:setStyle,settings})]})})]})}const screen_colors=ScreenColors;ScreenColors.__docgenInfo={description:"",methods:[],displayName:"ScreenColors"};var line_solid=__webpack_require__("./packages/icons/build-module/library/line-solid.js"),legacy_adapter=__webpack_require__("./packages/components/build-module/color-picker/legacy-adapter.js"),gradient_picker=__webpack_require__("./packages/components/build-module/gradient-picker/index.js"),color_palette=__webpack_require__("./packages/components/build-module/color-palette/index.js"),input_control_styles=__webpack_require__("./packages/components/build-module/input-control/styles/input-control-styles.js");const IndicatorStyled=(0,emotion_styled_base_browser_esm.A)(color_indicator.A,{target:"e1lpqc908"})("&&{flex-shrink:0;width:",(0,space.x)(6),";height:",(0,space.x)(6),";}"),NameInputControl=(0,emotion_styled_base_browser_esm.A)(input_control.Ay,{target:"e1lpqc907"})(input_control_styles.mc,"{background:",colors_values.l.gray[100],";border-radius:",config_values.A.radiusXSmall,";",input_control_styles.pd,input_control_styles.pd,input_control_styles.pd,input_control_styles.pd,"{height:",(0,space.x)(8),";}",input_control_styles.Hr,input_control_styles.Hr,input_control_styles.Hr,"{border-color:transparent;box-shadow:none;}}"),NameContainer=(0,emotion_styled_base_browser_esm.A)("div",{target:"e1lpqc906"})("line-height:",(0,space.x)(8),";margin-left:",(0,space.x)(2),";margin-right:",(0,space.x)(2),";white-space:nowrap;overflow:hidden;"),PaletteHeading=(0,emotion_styled_base_browser_esm.A)(heading_component.A,{target:"e1lpqc905"})("text-transform:uppercase;line-height:",(0,space.x)(6),";font-weight:500;&&&{font-size:11px;margin-bottom:0;}"),PaletteActionsContainer=(0,emotion_styled_base_browser_esm.A)(view_component.A,{target:"e1lpqc904"})("height:",(0,space.x)(6),";display:flex;"),PaletteEditContents=(0,emotion_styled_base_browser_esm.A)(view_component.A,{target:"e1lpqc903"})("margin-top:",(0,space.x)(2),";"),PaletteEditStyles=(0,emotion_styled_base_browser_esm.A)(view_component.A,{target:"e1lpqc902"})({name:"u6wnko",styles:"&&&{.components-button.has-icon{min-width:0;padding:0;}}"}),DoneButton=(0,emotion_styled_base_browser_esm.A)(build_module_button.Ay,{target:"e1lpqc901"})("&&{color:",colors_values.l.theme.accent,";}"),RemoveButton=(0,emotion_styled_base_browser_esm.A)(build_module_button.Ay,{target:"e1lpqc900"})("&&{margin-top:",(0,space.x)(1),";}");var menu=__webpack_require__("./packages/components/build-module/navigable-container/menu.js"),custom_gradient_picker_constants=__webpack_require__("./packages/components/build-module/custom-gradient-picker/constants.js"),custom_gradient_picker=__webpack_require__("./packages/components/build-module/custom-gradient-picker/index.js"),strings=__webpack_require__("./packages/components/build-module/utils/strings.js");function NameInput({value,onChange,label}){return(0,jsx_runtime.jsx)(NameInputControl,{label,hideLabelFromVision:!0,value,onChange})}function ColorPickerPopover({isGradient,element,onChange,popoverProps:receivedPopoverProps,onClose=()=>{}}){const popoverProps=(0,react.useMemo)((()=>({shift:!0,offset:20,resize:!1,placement:"left-start",...receivedPopoverProps,className:(0,clsx.A)("components-palette-edit__popover",receivedPopoverProps?.className)})),[receivedPopoverProps]);return(0,jsx_runtime.jsxs)(popover.Ay,{...popoverProps,onClose,children:[!isGradient&&(0,jsx_runtime.jsx)(legacy_adapter.V,{color:element.color,enableAlpha:!0,onChange:newColor=>{onChange({...element,color:newColor})}}),isGradient&&(0,jsx_runtime.jsx)("div",{className:"components-palette-edit__popover-gradient-picker",children:(0,jsx_runtime.jsx)(custom_gradient_picker.A,{__experimentalIsRenderedInSidebar:!0,value:element.gradient,onChange:newGradient=>{onChange({...element,gradient:newGradient})}})})]})}function Option({canOnlyChangeValues,element,onChange,onRemove,popoverProps:receivedPopoverProps,slugPrefix,isGradient}){const value=isGradient?element.gradient:element.color,[isEditingColor,setIsEditingColor]=(0,react.useState)(!1),[popoverAnchor,setPopoverAnchor]=(0,react.useState)(null),popoverProps=(0,react.useMemo)((()=>({...receivedPopoverProps,anchor:popoverAnchor})),[popoverAnchor,receivedPopoverProps]);return(0,jsx_runtime.jsxs)(item_component.A,{ref:setPopoverAnchor,size:"small",children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"flex-start",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{onClick:()=>{setIsEditingColor(!0)},"aria-label":(0,i18n_build_module.nv)((0,i18n_build_module.__)("Edit: %s"),element.name.trim().length?element.name:value),style:{padding:0},children:(0,jsx_runtime.jsx)(IndicatorStyled,{colorValue:value})}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:canOnlyChangeValues?(0,jsx_runtime.jsx)(NameContainer,{children:element.name.trim().length?element.name:" "}):(0,jsx_runtime.jsx)(NameInput,{label:isGradient?(0,i18n_build_module.__)("Gradient name"):(0,i18n_build_module.__)("Color name"),value:element.name,onChange:nextName=>onChange({...element,name:nextName,slug:slugPrefix+(0,strings.kW)(null!=nextName?nextName:"")})})}),!canOnlyChangeValues&&(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(RemoveButton,{size:"small",icon:line_solid.A,label:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Remove color: %s"),element.name.trim().length?element.name:value),onClick:onRemove})})]}),isEditingColor&&(0,jsx_runtime.jsx)(ColorPickerPopover,{isGradient,onChange,element,popoverProps,onClose:()=>setIsEditingColor(!1)})]})}function PaletteEditListView({elements,onChange,canOnlyChangeValues,slugPrefix,isGradient,popoverProps,addColorRef}){const elementsReferenceRef=(0,react.useRef)();(0,react.useEffect)((()=>{elementsReferenceRef.current=elements}),[elements]);const debounceOnChange=(0,use_debounce.A)((updatedElements=>onChange(function deduplicateElementSlugs(elements){const slugCounts={};return elements.map((element=>{var _newSlug;let newSlug;const{slug}=element;return slugCounts[slug]=(slugCounts[slug]||0)+1,slugCounts[slug]>1&&(newSlug=`${slug}-${slugCounts[slug]-1}`),{...element,slug:null!==(_newSlug=newSlug)&&void 0!==_newSlug?_newSlug:slug}}))}(updatedElements))),100);return(0,jsx_runtime.jsx)(component.A,{spacing:3,children:(0,jsx_runtime.jsx)(item_group_component.A,{isRounded:!0,isBordered:!0,isSeparated:!0,children:elements.map(((element,index)=>(0,jsx_runtime.jsx)(Option,{isGradient,canOnlyChangeValues,element,onChange:newElement=>{debounceOnChange(elements.map(((currentElement,currentIndex)=>currentIndex===index?newElement:currentElement)))},onRemove:()=>{const newElements=elements.filter(((_currentElement,currentIndex)=>currentIndex!==index));onChange(newElements.length?newElements:void 0),addColorRef.current?.focus()},slugPrefix,popoverProps},index)))})})}const palette_edit_EMPTY_ARRAY=[];const palette_edit=function PaletteEdit({gradients,colors=palette_edit_EMPTY_ARRAY,onChange,paletteLabel,paletteLabelHeadingLevel=2,emptyMessage,canOnlyChangeValues,canReset,slugPrefix="",popoverProps}){const isGradient=!!gradients,elements=isGradient?gradients:colors,[isEditing,setIsEditing]=(0,react.useState)(!1),[editingElement,setEditingElement]=(0,react.useState)(null),isAdding=isEditing&&!!editingElement&&elements[editingElement]&&!elements[editingElement].slug,hasElements=elements.length>0,debounceOnChange=(0,use_debounce.A)(onChange,100),onSelectPaletteItem=(0,react.useCallback)(((value,newEditingElementIndex)=>{const selectedElement=void 0===newEditingElementIndex?void 0:elements[newEditingElementIndex];selectedElement&&selectedElement[isGradient?"gradient":"color"]===value?setEditingElement(newEditingElementIndex):setIsEditing(!0)}),[isGradient,elements]),addColorRef=(0,react.useRef)(null);return(0,jsx_runtime.jsxs)(PaletteEditStyles,{children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{children:[(0,jsx_runtime.jsx)(PaletteHeading,{level:paletteLabelHeadingLevel,children:paletteLabel}),(0,jsx_runtime.jsxs)(PaletteActionsContainer,{children:[hasElements&&isEditing&&(0,jsx_runtime.jsx)(DoneButton,{size:"small",onClick:()=>{setIsEditing(!1),setEditingElement(null)},children:(0,i18n_build_module.__)("Done")}),!canOnlyChangeValues&&(0,jsx_runtime.jsx)(build_module_button.Ay,{ref:addColorRef,size:"small",isPressed:isAdding,icon:plus.A,label:isGradient?(0,i18n_build_module.__)("Add gradient"):(0,i18n_build_module.__)("Add color"),onClick:()=>{const{name,slug}=function getNameAndSlugForPosition(elements,slugPrefix){const nameRegex=new RegExp(`^${slugPrefix}color-([\\d]+)$`),position=elements.reduce(((previousValue,currentValue)=>{if("string"==typeof currentValue?.slug){const matches=currentValue?.slug.match(nameRegex);if(matches){const id=parseInt(matches[1],10);if(id>=previousValue)return id+1}}return previousValue}),1);return{name:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Color %s"),position),slug:`${slugPrefix}color-${position}`}}(elements,slugPrefix);onChange(gradients?[...gradients,{gradient:custom_gradient_picker_constants.vK,name,slug}]:[...colors,{color:"#000",name,slug}]),setIsEditing(!0),setEditingElement(elements.length)}}),hasElements&&(!isEditing||!canOnlyChangeValues||canReset)&&(0,jsx_runtime.jsx)(dropdown_menu.A,{icon:more_vertical.A,label:isGradient?(0,i18n_build_module.__)("Gradient options"):(0,i18n_build_module.__)("Color options"),toggleProps:{size:"small"},children:({onClose})=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(menu.Ay,{role:"menu",children:[!isEditing&&(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:()=>{setIsEditing(!0),onClose()},className:"components-palette-edit__menu-button",children:(0,i18n_build_module.__)("Show details")}),!canOnlyChangeValues&&(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:()=>{setEditingElement(null),setIsEditing(!1),onChange(),onClose()},className:"components-palette-edit__menu-button",children:isGradient?(0,i18n_build_module.__)("Remove all gradients"):(0,i18n_build_module.__)("Remove all colors")}),canReset&&(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:"tertiary",onClick:()=>{setEditingElement(null),onChange(),onClose()},children:isGradient?(0,i18n_build_module.__)("Reset gradient"):(0,i18n_build_module.__)("Reset colors")})]})})})]})]}),hasElements&&(0,jsx_runtime.jsxs)(PaletteEditContents,{children:[isEditing&&(0,jsx_runtime.jsx)(PaletteEditListView,{canOnlyChangeValues,elements,onChange,slugPrefix,isGradient,popoverProps,addColorRef}),!isEditing&&null!==editingElement&&(0,jsx_runtime.jsx)(ColorPickerPopover,{isGradient,onClose:()=>setEditingElement(null),onChange:newElement=>{debounceOnChange(elements.map(((currentElement,currentIndex)=>currentIndex===editingElement?newElement:currentElement)))},element:elements[null!=editingElement?editingElement:-1],popoverProps}),!isEditing&&(isGradient?(0,jsx_runtime.jsx)(gradient_picker.A,{gradients,onChange:onSelectPaletteItem,clearable:!1,disableCustomGradients:!0}):(0,jsx_runtime.jsx)(color_palette.Ay,{colors,onChange:onSelectPaletteItem,clearable:!1,disableCustomColors:!0}))]}),!hasElements&&emptyMessage&&(0,jsx_runtime.jsx)(PaletteEditContents,{children:emptyMessage})]})};function PresetColors(){const{paletteColors}=useStylesPreviewColors();return paletteColors.slice(0,4).map((({slug,color},index)=>(0,jsx_runtime.jsx)("div",{style:{flexGrow:1,height:"100%",background:color}},`${slug}-${index}`)))}const preview_colors_firstFrameVariants={start:{scale:1,opacity:1},hover:{scale:0,opacity:0}},StylesPreviewColors=({label,isFocused,withHoverView})=>(0,jsx_runtime.jsx)(PreviewIframe,{label,isFocused,withHoverView,children:({key})=>(0,jsx_runtime.jsx)(motion.P.div,{variants:preview_colors_firstFrameVariants,style:{height:"100%",overflow:"hidden"},children:(0,jsx_runtime.jsx)(h_stack_component.A,{spacing:0,justify:"center",style:{height:"100%",overflow:"hidden"},children:(0,jsx_runtime.jsx)(PresetColors,{})})},key)});StylesPreviewColors.displayName="StylesPreviewColors";const preview_colors=StylesPreviewColors;function ColorVariations({title,gap=2}){const propertiesToFilter=["color"],colorVariations=useCurrentMergeThemeStyleVariationsWithUserConfig(propertiesToFilter);return colorVariations?.length<=1?null:(0,jsx_runtime.jsxs)(component.A,{spacing:3,children:[title&&(0,jsx_runtime.jsx)(subtitle,{level:3,children:title}),(0,jsx_runtime.jsx)(grid_component.A,{spacing:gap,children:colorVariations.map(((variation,index)=>(0,jsx_runtime.jsx)(Variation,{variation,isPill:!0,properties:propertiesToFilter,showTooltip:!0,children:()=>(0,jsx_runtime.jsx)(preview_colors,{})},index)))})]})}StylesPreviewColors.__docgenInfo={description:"",methods:[],displayName:"StylesPreviewColors"},ColorVariations.displayName="ColorVariations",ColorVariations.__docgenInfo={description:"",methods:[],displayName:"ColorVariations",props:{gap:{defaultValue:{value:"2",computed:!1},required:!1}}};const{useGlobalSetting:color_palette_panel_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb),mobilePopoverProps={placement:"bottom-start",offset:8};function ColorPalettePanel({name}){const[themeColors,setThemeColors]=color_palette_panel_useGlobalSetting("color.palette.theme",name),[baseThemeColors]=color_palette_panel_useGlobalSetting("color.palette.theme",name,"base"),[defaultColors,setDefaultColors]=color_palette_panel_useGlobalSetting("color.palette.default",name),[baseDefaultColors]=color_palette_panel_useGlobalSetting("color.palette.default",name,"base"),[customColors,setCustomColors]=color_palette_panel_useGlobalSetting("color.palette.custom",name),[defaultPaletteEnabled]=color_palette_panel_useGlobalSetting("color.defaultPalette",name),popoverProps=(0,use_viewport_match.A)("small","<")?mobilePopoverProps:void 0;return(0,jsx_runtime.jsxs)(component.A,{className:"edit-site-global-styles-color-palette-panel",spacing:8,children:[!!themeColors&&!!themeColors.length&&(0,jsx_runtime.jsx)(palette_edit,{canReset:themeColors!==baseThemeColors,canOnlyChangeValues:!0,colors:themeColors,onChange:setThemeColors,paletteLabel:(0,i18n_build_module.__)("Theme"),paletteLabelHeadingLevel:3,popoverProps}),!!defaultColors&&!!defaultColors.length&&!!defaultPaletteEnabled&&(0,jsx_runtime.jsx)(palette_edit,{canReset:defaultColors!==baseDefaultColors,canOnlyChangeValues:!0,colors:defaultColors,onChange:setDefaultColors,paletteLabel:(0,i18n_build_module.__)("Default"),paletteLabelHeadingLevel:3,popoverProps}),(0,jsx_runtime.jsx)(palette_edit,{colors:customColors,onChange:setCustomColors,paletteLabel:(0,i18n_build_module.__)("Custom"),paletteLabelHeadingLevel:3,slugPrefix:"custom-",popoverProps}),(0,jsx_runtime.jsx)(ColorVariations,{title:(0,i18n_build_module.__)("Palettes")})]})}ColorPalettePanel.displayName="ColorPalettePanel",ColorPalettePanel.__docgenInfo={description:"",methods:[],displayName:"ColorPalettePanel"};var duotone_picker=__webpack_require__("./packages/components/build-module/duotone-picker/duotone-picker.js");const{useGlobalSetting:gradients_palette_panel_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb),gradients_palette_panel_mobilePopoverProps={placement:"bottom-start",offset:8},gradients_palette_panel_noop=()=>{};function GradientPalettePanel({name}){const[themeGradients,setThemeGradients]=gradients_palette_panel_useGlobalSetting("color.gradients.theme",name),[baseThemeGradients]=gradients_palette_panel_useGlobalSetting("color.gradients.theme",name,"base"),[defaultGradients,setDefaultGradients]=gradients_palette_panel_useGlobalSetting("color.gradients.default",name),[baseDefaultGradients]=gradients_palette_panel_useGlobalSetting("color.gradients.default",name,"base"),[customGradients,setCustomGradients]=gradients_palette_panel_useGlobalSetting("color.gradients.custom",name),[defaultPaletteEnabled]=gradients_palette_panel_useGlobalSetting("color.defaultGradients",name),[customDuotone]=gradients_palette_panel_useGlobalSetting("color.duotone.custom")||[],[defaultDuotone]=gradients_palette_panel_useGlobalSetting("color.duotone.default")||[],[themeDuotone]=gradients_palette_panel_useGlobalSetting("color.duotone.theme")||[],[defaultDuotoneEnabled]=gradients_palette_panel_useGlobalSetting("color.defaultDuotone"),duotonePalette=[...customDuotone||[],...themeDuotone||[],...defaultDuotone&&defaultDuotoneEnabled?defaultDuotone:[]],popoverProps=(0,use_viewport_match.A)("small","<")?gradients_palette_panel_mobilePopoverProps:void 0;return(0,jsx_runtime.jsxs)(component.A,{className:"edit-site-global-styles-gradient-palette-panel",spacing:8,children:[!!themeGradients&&!!themeGradients.length&&(0,jsx_runtime.jsx)(palette_edit,{canReset:themeGradients!==baseThemeGradients,canOnlyChangeValues:!0,gradients:themeGradients,onChange:setThemeGradients,paletteLabel:(0,i18n_build_module.__)("Theme"),paletteLabelHeadingLevel:3,popoverProps}),!!defaultGradients&&!!defaultGradients.length&&!!defaultPaletteEnabled&&(0,jsx_runtime.jsx)(palette_edit,{canReset:defaultGradients!==baseDefaultGradients,canOnlyChangeValues:!0,gradients:defaultGradients,onChange:setDefaultGradients,paletteLabel:(0,i18n_build_module.__)("Default"),paletteLabelLevel:3,popoverProps}),(0,jsx_runtime.jsx)(palette_edit,{gradients:customGradients,onChange:setCustomGradients,paletteLabel:(0,i18n_build_module.__)("Custom"),paletteLabelLevel:3,slugPrefix:"custom-",popoverProps}),!!duotonePalette&&!!duotonePalette.length&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(subtitle,{level:3,children:(0,i18n_build_module.__)("Duotone")}),(0,jsx_runtime.jsx)(spacer_component.A,{margin:3}),(0,jsx_runtime.jsx)(duotone_picker.A,{duotonePalette,disableCustomDuotone:!0,disableCustomColors:!0,clearable:!1,onChange:gradients_palette_panel_noop})]})]})}GradientPalettePanel.displayName="GradientPalettePanel",GradientPalettePanel.__docgenInfo={description:"",methods:[],displayName:"GradientPalettePanel"};const{Tabs:screen_color_palette_Tabs}=src_lock_unlock_unlock(private_apis.j);function ScreenColorPalette({name}){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:(0,i18n_build_module.__)("Edit palette"),description:(0,i18n_build_module.__)("The combination of colors used across the site and in color pickers.")}),(0,jsx_runtime.jsxs)(screen_color_palette_Tabs,{children:[(0,jsx_runtime.jsxs)(screen_color_palette_Tabs.TabList,{children:[(0,jsx_runtime.jsx)(screen_color_palette_Tabs.Tab,{tabId:"color",children:(0,i18n_build_module.__)("Color")}),(0,jsx_runtime.jsx)(screen_color_palette_Tabs.Tab,{tabId:"gradient",children:(0,i18n_build_module.__)("Gradient")})]}),(0,jsx_runtime.jsx)(screen_color_palette_Tabs.TabPanel,{tabId:"color",focusable:!1,children:(0,jsx_runtime.jsx)(ColorPalettePanel,{name})}),(0,jsx_runtime.jsx)(screen_color_palette_Tabs.TabPanel,{tabId:"gradient",focusable:!1,children:(0,jsx_runtime.jsx)(GradientPalettePanel,{name})})]})]})}const screen_color_palette=ScreenColorPalette;ScreenColorPalette.__docgenInfo={description:"",methods:[],displayName:"ScreenColorPalette"};const BACKGROUND_DEFAULT_VALUES={backgroundSize:"auto"},{useGlobalStyle:background_panel_useGlobalStyle,useGlobalSetting:background_panel_useGlobalSetting,BackgroundPanel:background_panel_StylesBackgroundPanel}=src_lock_unlock_unlock(build_module.jb);function BackgroundPanel(){const[style]=background_panel_useGlobalStyle("",void 0,"user",{shouldDecodeEncode:!1}),[inheritedStyle,setStyle]=background_panel_useGlobalStyle("",void 0,"all",{shouldDecodeEncode:!1}),[settings]=background_panel_useGlobalSetting("");return(0,jsx_runtime.jsx)(background_panel_StylesBackgroundPanel,{inheritedValue:inheritedStyle,value:style,onChange:setStyle,settings,defaultValues:BACKGROUND_DEFAULT_VALUES})}BackgroundPanel.displayName="BackgroundPanel",BackgroundPanel.__docgenInfo={description:"",methods:[],displayName:"BackgroundPanel"};const{useHasBackgroundPanel:screen_background_useHasBackgroundPanel,useGlobalSetting:screen_background_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb);function ScreenBackground(){const[settings]=screen_background_useGlobalSetting(""),hasBackgroundPanel=screen_background_useHasBackgroundPanel(settings);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:(0,i18n_build_module.__)("Background"),description:(0,jsx_runtime.jsx)(text_component.A,{children:(0,i18n_build_module.__)("Set styles for the site’s background.")})}),hasBackgroundPanel&&(0,jsx_runtime.jsx)(BackgroundPanel,{})]})}const screen_background=ScreenBackground;ScreenBackground.__docgenInfo={description:"",methods:[],displayName:"ScreenBackground"};const{useGlobalSetting:shadows_panel_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb),defaultShadow="6px 6px 9px rgba(0, 0, 0, 0.2)";function ShadowsPanel(){const[defaultShadows]=shadows_panel_useGlobalSetting("shadow.presets.default"),[defaultShadowsEnabled]=shadows_panel_useGlobalSetting("shadow.defaultPresets"),[themeShadows]=shadows_panel_useGlobalSetting("shadow.presets.theme"),[customShadows,setCustomShadows]=shadows_panel_useGlobalSetting("shadow.presets.custom");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:(0,i18n_build_module.__)("Shadows"),description:(0,i18n_build_module.__)("Manage and create shadow styles for use across the site.")}),(0,jsx_runtime.jsx)("div",{className:"edit-site-global-styles-screen",children:(0,jsx_runtime.jsxs)(component.A,{className:"edit-site-global-styles__shadows-panel",spacing:7,children:[defaultShadowsEnabled&&(0,jsx_runtime.jsx)(ShadowList,{label:(0,i18n_build_module.__)("Default"),shadows:defaultShadows||[],category:"default"}),themeShadows&&themeShadows.length>0&&(0,jsx_runtime.jsx)(ShadowList,{label:(0,i18n_build_module.__)("Theme"),shadows:themeShadows||[],category:"theme"}),(0,jsx_runtime.jsx)(ShadowList,{label:(0,i18n_build_module.__)("Custom"),shadows:customShadows||[],category:"custom",canCreate:!0,onCreate:shadow=>{setCustomShadows([...customShadows||[],shadow])}})]})})]})}function ShadowList({label,shadows,category,canCreate,onCreate}){return(0,jsx_runtime.jsxs)(component.A,{spacing:2,children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",children:[(0,jsx_runtime.jsx)(flex_component.A,{align:"center",className:"edit-site-global-styles__shadows-panel__title",children:(0,jsx_runtime.jsx)(subtitle,{level:3,children:label})}),canCreate&&(0,jsx_runtime.jsx)(flex_item_component.A,{className:"edit-site-global-styles__shadows-panel__options-container",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",icon:plus.A,label:(0,i18n_build_module.__)("Add shadow"),onClick:()=>{(()=>{const newIndex=getNewIndexFromPresets(shadows,"shadow-");onCreate({name:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Shadow %s"),newIndex),shadow:defaultShadow,slug:`shadow-${newIndex}`})})()}})})]}),shadows.length>0&&(0,jsx_runtime.jsx)(item_group_component.A,{isBordered:!0,isSeparated:!0,children:shadows.map((shadow=>(0,jsx_runtime.jsx)(ShadowItem,{shadow,category},shadow.slug)))})]})}function ShadowItem({shadow,category}){return(0,jsx_runtime.jsx)(NavigationButtonAsItem,{path:`/shadows/edit/${category}/${shadow.slug}`,icon:library_shadow.A,children:shadow.name})}ShadowList.displayName="ShadowList",ShadowItem.displayName="ShadowItem",ShadowsPanel.__docgenInfo={description:"",methods:[],displayName:"ShadowsPanel"};var dropdown_content_wrapper=__webpack_require__("./packages/components/build-module/dropdown/dropdown-content-wrapper.js"),library_reset=__webpack_require__("./packages/icons/build-module/library/reset.js");const{useGlobalSetting:shadows_edit_panel_useGlobalSetting}=src_lock_unlock_unlock(build_module.jb),{DropdownMenuV2:shadows_edit_panel_DropdownMenuV2}=src_lock_unlock_unlock(private_apis.j),customShadowMenuItems=[{label:(0,i18n_build_module.__)("Rename"),action:"rename"},{label:(0,i18n_build_module.__)("Delete"),action:"delete"}],presetShadowMenuItems=[{label:(0,i18n_build_module.__)("Reset"),action:"reset"}];function ShadowsEditPanel(){const{goBack,params:{category,slug}}=(0,use_navigator.b)(),[shadows,setShadows]=shadows_edit_panel_useGlobalSetting(`shadow.presets.${category}`);(0,react.useEffect)((()=>{const hasCurrentShadow=shadows?.some((shadow=>shadow.slug===slug));slug&&!hasCurrentShadow&&goBack()}),[shadows,slug,goBack]);const[baseShadows]=shadows_edit_panel_useGlobalSetting(`shadow.presets.${category}`,void 0,"base"),[selectedShadow,setSelectedShadow]=(0,react.useState)((()=>(shadows||[]).find((shadow=>shadow.slug===slug)))),baseSelectedShadow=(0,react.useMemo)((()=>(baseShadows||[]).find((b=>b.slug===slug))),[baseShadows,slug]),[isConfirmDialogVisible,setIsConfirmDialogVisible]=(0,react.useState)(!1),[isRenameModalVisible,setIsRenameModalVisible]=(0,react.useState)(!1),[shadowName,setShadowName]=(0,react.useState)(selectedShadow.name);if(!category||!slug)return null;return selectedShadow?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",children:[(0,jsx_runtime.jsx)(global_styles_header,{title:selectedShadow.name}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(spacer_component.A,{marginTop:2,marginBottom:0,paddingX:4,children:(0,jsx_runtime.jsx)(shadows_edit_panel_DropdownMenuV2,{trigger:(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",icon:more_vertical.A,label:(0,i18n_build_module.__)("Menu")}),children:("custom"===category?customShadowMenuItems:presetShadowMenuItems).map((item=>(0,jsx_runtime.jsx)(shadows_edit_panel_DropdownMenuV2.Item,{onClick:()=>(action=>{if("reset"===action){const updatedShadows=shadows.map((s=>s.slug===slug?baseSelectedShadow:s));setSelectedShadow(baseSelectedShadow),setShadows(updatedShadows)}else"delete"===action?setIsConfirmDialogVisible(!0):"rename"===action&&setIsRenameModalVisible(!0)})(item.action),disabled:"reset"===item.action&&selectedShadow.shadow===baseSelectedShadow.shadow,children:(0,jsx_runtime.jsx)(shadows_edit_panel_DropdownMenuV2.ItemLabel,{children:item.label})},item.action)))})})})]}),(0,jsx_runtime.jsxs)("div",{className:"edit-site-global-styles-screen",children:[(0,jsx_runtime.jsx)(ShadowsPreview,{shadow:selectedShadow.shadow}),(0,jsx_runtime.jsx)(ShadowEditor,{shadow:selectedShadow.shadow,onChange:shadow=>{setSelectedShadow({...selectedShadow,shadow});const updatedShadows=shadows.map((s=>s.slug===slug?{...selectedShadow,shadow}:s));setShadows(updatedShadows)}})]}),isConfirmDialogVisible&&(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen:!0,onConfirm:()=>{setShadows(shadows.filter((s=>s.slug!==slug))),setIsConfirmDialogVisible(!1)},onCancel:()=>{setIsConfirmDialogVisible(!1)},confirmButtonText:(0,i18n_build_module.__)("Delete"),size:"medium",children:(0,i18n_build_module.nv)('Are you sure you want to delete "%s"?',selectedShadow.name)}),isRenameModalVisible&&(0,jsx_runtime.jsx)(modal.A,{title:(0,i18n_build_module.__)("Rename"),onRequestClose:()=>setIsRenameModalVisible(!1),size:"small",children:(0,jsx_runtime.jsxs)("form",{onSubmit:event=>{event.preventDefault(),(newName=>{if(!newName)return;const updatedShadows=shadows.map((s=>s.slug===slug?{...selectedShadow,name:newName}:s));setSelectedShadow({...selectedShadow,name:newName}),setShadows(updatedShadows)})(shadowName),setIsRenameModalVisible(!1)},children:[(0,jsx_runtime.jsx)(input_control.Ay,{__next40pxDefaultSize:!0,autoComplete:"off",label:(0,i18n_build_module.__)("Name"),placeholder:(0,i18n_build_module.__)("Shadow name"),value:shadowName,onChange:value=>setShadowName(value)}),(0,jsx_runtime.jsx)(spacer_component.A,{marginBottom:6}),(0,jsx_runtime.jsxs)(flex_component.A,{className:"block-editor-shadow-edit-modal__actions",justify:"flex-end",expanded:!1,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>setIsRenameModalVisible(!1),children:(0,i18n_build_module.__)("Cancel")})}),(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,i18n_build_module.__)("Save")})})]})]})})]}):(0,jsx_runtime.jsx)(global_styles_header,{title:""})}function ShadowsPreview({shadow}){const shadowStyle={boxShadow:shadow};return(0,jsx_runtime.jsx)(spacer_component.A,{marginBottom:4,marginTop:-2,children:(0,jsx_runtime.jsx)(h_stack_component.A,{align:"center",justify:"center",className:"edit-site-global-styles__shadow-preview-panel",children:(0,jsx_runtime.jsx)("div",{className:"edit-site-global-styles__shadow-preview-block",style:shadowStyle})})})}function ShadowEditor({shadow,onChange}){const shadowParts=(0,react.useMemo)((()=>function getShadowParts(shadow){return(shadow.match(/(?:[^,(]|\([^)]*\))+/g)||[]).map((value=>value.trim()))}(shadow)),[shadow]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(component.A,{spacing:2,children:(0,jsx_runtime.jsxs)(h_stack_component.A,{justify:"space-between",children:[(0,jsx_runtime.jsx)(flex_component.A,{align:"center",className:"edit-site-global-styles__shadows-panel__title",children:(0,jsx_runtime.jsx)(subtitle,{level:3,children:(0,i18n_build_module.__)("Shadows")})}),(0,jsx_runtime.jsx)(flex_item_component.A,{className:"edit-site-global-styles__shadows-panel__options-container",children:(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"small",icon:plus.A,label:(0,i18n_build_module.__)("Add shadow"),onClick:()=>{onChange([...shadowParts,defaultShadow].join(", "))}})})]})}),(0,jsx_runtime.jsx)(spacer_component.A,{}),(0,jsx_runtime.jsx)(item_group_component.A,{isBordered:!0,isSeparated:!0,children:shadowParts.map(((part,index)=>(0,jsx_runtime.jsx)(shadows_edit_panel_ShadowItem,{shadow:part,onChange:value=>((index,part)=>{const newShadowParts=[...shadowParts];newShadowParts[index]=part,onChange(newShadowParts.join(", "))})(index,value),canRemove:shadowParts.length>1,onRemove:()=>(index=>{onChange(shadowParts.filter(((p,i)=>i!==index)).join(", "))})(index)},index)))})]})}function shadows_edit_panel_ShadowItem({shadow,onChange,canRemove,onRemove}){const shadowObj=(0,react.useMemo)((()=>function shadowStringToObject(shadowValue){const defaultShadow={x:"0",y:"0",blur:"0",spread:"0",color:"#000",inset:!1};if(!shadowValue)return defaultShadow;if(shadowValue.includes("none"))return defaultShadow;const lengthsRegex=/((?:^|\s+)(-?\d*\.?\d+(?:px|%|in|cm|mm|em|rem|ex|pt|pc|vh|vw|vmin|vmax|ch|lh)?)(?=\s|$)(?![^(]*\))){1,4}/g,matches=shadowValue.match(lengthsRegex)||[];if(1!==matches.length)return defaultShadow;const lengths=matches[0].split(" ").map((value=>value.trim())).filter((value=>value));if(lengths.length<2)return defaultShadow;const insets=shadowValue.match(/inset/gi)||[];if(insets.length>1)return defaultShadow;const hasInset=1===insets.length;let colorString=shadowValue.replace(lengthsRegex,"").trim();hasInset&&(colorString=colorString.replace("inset","").replace("INSET","").trim());let colorMatches=(colorString.match(/^#([0-9a-f]{3}){1,2}$|^#([0-9a-f]{4}){1,2}$|^(?:rgb|hsl)a?\(?[\d*\.?\d+%?,?\/?\s]*\)$/gi)||[]).map((value=>value?.trim())).filter((value=>value));if(colorMatches.length>1)return defaultShadow;if(0===colorMatches.length&&(colorMatches=colorString.trim().split(" ").filter((value=>value)),colorMatches.length>1))return defaultShadow;const[x,y,blur,spread]=lengths;return{x,y,blur:blur||defaultShadow.blur,spread:spread||defaultShadow.spread,inset:hasInset,color:colorString||defaultShadow.color}}(shadow)),[shadow]),onShadowChange=newShadow=>{onChange(function shadowObjectToString(shadowObj){const shadowString=`${shadowObj.x||"0px"} ${shadowObj.y||"0px"} ${shadowObj.blur||"0px"} ${shadowObj.spread||"0px"}`;return`${shadowObj.inset?"inset":""} ${shadowString} ${shadowObj.color||""}`.trim()}(newShadow))};return(0,jsx_runtime.jsx)(dropdown.A,{popoverProps:{placement:"left-start",offset:36,shift:!0},className:"edit-site-global-styles__shadow-editor__dropdown",renderToggle:({onToggle,isOpen})=>{const toggleProps={onClick:onToggle,className:(0,clsx.A)("edit-site-global-styles__shadow-editor__dropdown-toggle",{"is-open":isOpen}),"aria-expanded":isOpen},removeButtonProps={onClick:onRemove,className:(0,clsx.A)("edit-site-global-styles__shadow-editor__remove-button",{"is-open":isOpen}),label:(0,i18n_build_module.__)("Remove shadow")};return(0,jsx_runtime.jsxs)(h_stack_component.A,{align:"center",justify:"flex-start",spacing:0,children:[(0,jsx_runtime.jsx)(flex_item_component.A,{style:{flexGrow:1},children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,icon:library_shadow.A,...toggleProps,children:shadowObj.inset?(0,i18n_build_module.__)("Inner shadow"):(0,i18n_build_module.__)("Drop shadow")})}),canRemove&&(0,jsx_runtime.jsx)(flex_item_component.A,{children:(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,icon:library_reset.A,...removeButtonProps})})]})},renderContent:()=>(0,jsx_runtime.jsx)(dropdown_content_wrapper.A,{paddingSize:"medium",className:"edit-site-global-styles__shadow-editor__dropdown-content",children:(0,jsx_runtime.jsx)(ShadowPopover,{shadowObj,onChange:onShadowChange})})})}function ShadowPopover({shadowObj,onChange}){const onShadowChange=(key,value)=>{const newShadow={...shadowObj,[key]:value};onChange(newShadow)};return(0,jsx_runtime.jsxs)(component.A,{spacing:4,className:"edit-site-global-styles__shadow-editor-panel",children:[(0,jsx_runtime.jsx)(color_palette.Ay,{clearable:!1,enableAlpha:!0,__experimentalIsRenderedInSidebar:!0,value:shadowObj.color,onChange:value=>onShadowChange("color",value)}),(0,jsx_runtime.jsxs)(toggle_group_control_component.A,{__nextHasNoMarginBottom:!0,value:shadowObj.inset?"inset":"outset",isBlock:!0,onChange:value=>onShadowChange("inset","inset"===value),hideLabelFromVision:!0,__next40pxDefaultSize:!0,children:[(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"outset",label:(0,i18n_build_module.__)("Outset")}),(0,jsx_runtime.jsx)(toggle_group_control_option_component.A,{value:"inset",label:(0,i18n_build_module.__)("Inset")})]}),(0,jsx_runtime.jsxs)(grid_component.A,{columns:2,gap:4,children:[(0,jsx_runtime.jsx)(ShadowInputControl,{label:(0,i18n_build_module.__)("X Position"),value:shadowObj.x,onChange:value=>onShadowChange("x",value)}),(0,jsx_runtime.jsx)(ShadowInputControl,{label:(0,i18n_build_module.__)("Y Position"),value:shadowObj.y,onChange:value=>onShadowChange("y",value)}),(0,jsx_runtime.jsx)(ShadowInputControl,{label:(0,i18n_build_module.__)("Blur"),value:shadowObj.blur,onChange:value=>onShadowChange("blur",value)}),(0,jsx_runtime.jsx)(ShadowInputControl,{label:(0,i18n_build_module.__)("Spread"),value:shadowObj.spread,onChange:value=>onShadowChange("spread",value)})]})]})}function ShadowInputControl({label,value,onChange}){return(0,jsx_runtime.jsx)(unit_control.Ay,{label,__next40pxDefaultSize:!0,value,onChange:next=>{const isNumeric=void 0!==next&&!isNaN(parseFloat(next));onChange(isNumeric?next:"0px")}})}function ScreenShadows(){return(0,jsx_runtime.jsx)(ShadowsPanel,{})}function ScreenShadowsEdit(){return(0,jsx_runtime.jsx)(ShadowsEditPanel,{})}ShadowsPreview.displayName="ShadowsPreview",shadows_edit_panel_ShadowItem.displayName="ShadowItem",ShadowPopover.displayName="ShadowPopover",ShadowInputControl.displayName="ShadowInputControl",ShadowsEditPanel.__docgenInfo={description:"",methods:[],displayName:"ShadowsEditPanel"},ScreenShadows.displayName="ScreenShadows",ScreenShadowsEdit.displayName="ScreenShadowsEdit",ScreenShadows.__docgenInfo={description:"",methods:[],displayName:"ScreenShadows"},ScreenShadowsEdit.__docgenInfo={description:"",methods:[],displayName:"ScreenShadowsEdit"};const{useGlobalStyle:dimensions_panel_useGlobalStyle,useGlobalSetting:dimensions_panel_useGlobalSetting,useSettingsForBlockElement:dimensions_panel_useSettingsForBlockElement,DimensionsPanel:dimensions_panel_StylesDimensionsPanel}=src_lock_unlock_unlock(build_module.jb),DEFAULT_CONTROLS={contentSize:!0,wideSize:!0,padding:!0,margin:!0,blockGap:!0,minHeight:!0,childLayout:!1};function DimensionsPanel(){const[style]=dimensions_panel_useGlobalStyle("",void 0,"user",{shouldDecodeEncode:!1}),[inheritedStyle,setStyle]=dimensions_panel_useGlobalStyle("",void 0,"all",{shouldDecodeEncode:!1}),[userSettings]=dimensions_panel_useGlobalSetting("",void 0,"user"),[rawSettings,setSettings]=dimensions_panel_useGlobalSetting(""),settings=dimensions_panel_useSettingsForBlockElement(rawSettings),inheritedStyleWithLayout=(0,react.useMemo)((()=>({...inheritedStyle,layout:settings.layout})),[inheritedStyle,settings.layout]),styleWithLayout=(0,react.useMemo)((()=>({...style,layout:userSettings.layout})),[style,userSettings.layout]);return(0,jsx_runtime.jsx)(dimensions_panel_StylesDimensionsPanel,{inheritedValue:inheritedStyleWithLayout,value:styleWithLayout,onChange:newStyle=>{const updatedStyle={...newStyle};if(delete updatedStyle.layout,setStyle(updatedStyle),newStyle.layout!==userSettings.layout){const updatedSettings={...userSettings,layout:newStyle.layout};updatedSettings.layout?.definitions&&delete updatedSettings.layout.definitions,setSettings(updatedSettings)}},settings,includeLayoutControls:!0,defaultControls:DEFAULT_CONTROLS})}DimensionsPanel.displayName="DimensionsPanel",DimensionsPanel.__docgenInfo={description:"",methods:[],displayName:"DimensionsPanel"};const{useHasDimensionsPanel:screen_layout_useHasDimensionsPanel,useGlobalSetting:screen_layout_useGlobalSetting,useSettingsForBlockElement:screen_layout_useSettingsForBlockElement}=src_lock_unlock_unlock(build_module.jb);function ScreenLayout(){const[rawSettings]=screen_layout_useGlobalSetting(""),settings=screen_layout_useSettingsForBlockElement(rawSettings),hasDimensionsPanel=screen_layout_useHasDimensionsPanel(settings);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:(0,i18n_build_module.__)("Layout")}),hasDimensionsPanel&&(0,jsx_runtime.jsx)(DimensionsPanel,{})]})}const screen_layout=ScreenLayout;ScreenLayout.__docgenInfo={description:"",methods:[],displayName:"ScreenLayout"};const{GlobalStylesContext:style_variations_container_GlobalStylesContext}=src_lock_unlock_unlock(build_module.jb);function StyleVariationsContainer({gap=2}){const{user}=(0,react.useContext)(style_variations_container_GlobalStylesContext),userStyles=user?.styles,variations=(0,use_select.A)((select=>select(core_data_build_module.M_).__experimentalGetCurrentThemeGlobalStylesVariations()),[]),fullStyleVariations=variations?.filter((variation=>!isVariationWithProperties(variation,["color"])&&!isVariationWithProperties(variation,["typography","spacing"]))),themeVariations=(0,react.useMemo)((()=>[...[{title:(0,i18n_build_module.__)("Default"),settings:{},styles:{}},...null!=fullStyleVariations?fullStyleVariations:[]].map((variation=>{var _variation$settings;const blockStyles={...variation?.styles?.blocks}||{};userStyles?.blocks&&Object.keys(userStyles.blocks).forEach((blockName=>{if(userStyles.blocks[blockName].css){const variationBlockStyles=blockStyles[blockName]||{},customCSS={css:`${blockStyles[blockName]?.css||""} ${userStyles.blocks[blockName].css.trim()||""}`};blockStyles[blockName]={...variationBlockStyles,...customCSS}}}));const css=userStyles?.css||variation.styles?.css?{css:`${variation.styles?.css||""} ${userStyles?.css||""}`}:{},blocks=Object.keys(blockStyles).length>0?{blocks:blockStyles}:{},styles={...variation.styles,...css,...blocks};return{...variation,settings:null!==(_variation$settings=variation.settings)&&void 0!==_variation$settings?_variation$settings:{},styles}}))]),[fullStyleVariations,userStyles?.blocks,userStyles?.css]);return!fullStyleVariations||fullStyleVariations?.length<1?null:(0,jsx_runtime.jsx)(grid_component.A,{columns:2,className:"edit-site-global-styles-style-variations-container",gap,children:themeVariations.map(((variation,index)=>(0,jsx_runtime.jsx)(Variation,{variation,children:isFocused=>(0,jsx_runtime.jsx)(preview_styles,{label:variation?.title,withHoverView:!0,isFocused,variation})},index)))})}StyleVariationsContainer.displayName="StyleVariationsContainer",StyleVariationsContainer.__docgenInfo={description:"",methods:[],displayName:"StyleVariationsContainer",props:{gap:{defaultValue:{value:"2",computed:!1},required:!1}}};const src_store_reducer=(0,data_build_module.HY)({settings:function reducer_settings(state={},action){return"UPDATE_SETTINGS"===action.type?{...state,...action.settings}:state},editedPost:function editedPost(state={},action){switch(action.type){case"SET_EDITED_POST":return{postType:action.postType,id:action.id,context:action.context};case"SET_EDITED_POST_CONTEXT":return{...state,context:action.context}}return state},saveViewPanel:function saveViewPanel(state=!1,action){return"SET_IS_SAVE_VIEW_OPENED"===action.type?action.isOpen:state},editorCanvasContainerView:function editorCanvasContainerView(state=void 0,action){return"SET_EDITOR_CANVAS_CONTAINER_VIEW"===action.type?action.view:state},routes:function routes(state=[],action){return"REGISTER_ROUTE"===action.type?[...state,action.route]:state}}),constants_NAVIGATION_POST_TYPE="wp_navigation",utils_constants_TEMPLATE_POST_TYPE="wp_template",utils_constants_TEMPLATE_PART_POST_TYPE="wp_template_part",{PATTERN_TYPES:constants_PATTERN_TYPES,PATTERN_DEFAULT_CATEGORY,PATTERN_USER_CATEGORY,EXCLUDED_PATTERN_SOURCES:constants_EXCLUDED_PATTERN_SOURCES,PATTERN_SYNC_TYPES:constants_PATTERN_SYNC_TYPES}=src_lock_unlock_unlock(patterns_build_module.j),{interfaceStore:actions_interfaceStore}=(constants_PATTERN_TYPES.user,(0,i18n_build_module.__)("Template"),(0,i18n_build_module.__)("Template part"),constants_PATTERN_TYPES.user,(0,i18n_build_module.__)("Pattern"),(0,i18n_build_module.__)("Navigation"),src_lock_unlock_unlock(private_apis_privateApis));function actions_toggleFeature(featureName){return function({registry}){(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).toggleFeature( featureName )",{since:"6.0",alternative:"dispatch( 'core/preferences').toggle( 'core/edit-site', featureName )"}),registry.dispatch(store.M).toggle("core/edit-site",featureName)}}const __experimentalSetPreviewDeviceType=deviceType=>({registry})=>{(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).__experimentalSetPreviewDeviceType",{since:"6.5",version:"6.7",hint:"registry.dispatch( editorStore ).setDeviceType"}),registry.dispatch(store_store).setDeviceType(deviceType)};function setTemplate(){return(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).setTemplate",{since:"6.5",version:"6.8",hint:"The setTemplate is not needed anymore, the correct entity is resolved from the URL automatically."}),{type:"NOTHING"}}const actions_addTemplate=template=>async({dispatch,registry})=>{(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).addTemplate",{since:"6.5",version:"6.8",hint:"use saveEntityRecord directly"});const newTemplate=await registry.dispatch(core_data_build_module.M_).saveEntityRecord("postType","wp_template",template);template.content&&registry.dispatch(core_data_build_module.M_).editEntityRecord("postType","wp_template",newTemplate.id,{blocks:(0,blocks_build_module.qg)(template.content)},{undoIgnore:!0}),dispatch({type:"SET_EDITED_POST",postType:"wp_template",id:newTemplate.id})},removeTemplate=template=>({registry})=>src_lock_unlock_unlock(registry.dispatch(store_store)).removeTemplates([template]);function setTemplatePart(templatePartId){return{type:"SET_EDITED_POST",postType:utils_constants_TEMPLATE_PART_POST_TYPE,id:templatePartId}}function setNavigationMenu(navigationMenuId){return{type:"SET_EDITED_POST",postType:constants_NAVIGATION_POST_TYPE,id:navigationMenuId}}function setEditedEntity(postType,postId,context){return{type:"SET_EDITED_POST",postType,id:postId,context}}function setHomeTemplateId(){return(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).setHomeTemplateId",{since:"6.2",version:"6.4"}),{type:"NOTHING"}}function setEditedPostContext(context){return{type:"SET_EDITED_POST_CONTEXT",context}}function setPage(){return(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).setPage",{since:"6.5",version:"6.8",hint:"The setPage is not needed anymore, the correct entity is resolved from the URL automatically."}),{type:"NOTHING"}}function setNavigationPanelActiveMenu(){return(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).setNavigationPanelActiveMenu",{since:"6.2",version:"6.4"}),{type:"NOTHING"}}function openNavigationPanelToMenu(){return(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).openNavigationPanelToMenu",{since:"6.2",version:"6.4"}),{type:"NOTHING"}}function setIsNavigationPanelOpened(){return(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).setIsNavigationPanelOpened",{since:"6.2",version:"6.4"}),{type:"NOTHING"}}const actions_setIsInserterOpened=value=>({registry})=>{(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).setIsInserterOpened",{since:"6.5",alternative:"dispatch( 'core/editor').setIsInserterOpened"}),registry.dispatch(store_store).setIsInserterOpened(value)},actions_setIsListViewOpened=isOpen=>({registry})=>{(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).setIsListViewOpened",{since:"6.5",alternative:"dispatch( 'core/editor').setIsListViewOpened"}),registry.dispatch(store_store).setIsListViewOpened(isOpen)};function updateSettings(settings){return{type:"UPDATE_SETTINGS",settings}}function setIsSaveViewOpened(isOpen){return{type:"SET_IS_SAVE_VIEW_OPENED",isOpen}}const actions_revertTemplate=(template,options)=>({registry})=>src_lock_unlock_unlock(registry.dispatch(store_store)).revertTemplate(template,options),openGeneralSidebar=name=>({registry})=>{registry.dispatch(actions_interfaceStore).enableComplementaryArea("core",name)},closeGeneralSidebar=()=>({registry})=>{registry.dispatch(actions_interfaceStore).disableComplementaryArea("core")},actions_switchEditorMode=mode=>({registry})=>{(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).switchEditorMode",{since:"6.6",alternative:"dispatch( 'core/editor').switchEditorMode"}),registry.dispatch(store_store).switchEditorMode(mode)},setHasPageContentFocus=hasPageContentFocus=>({dispatch,registry})=>{(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).setHasPageContentFocus",{since:"6.5"}),hasPageContentFocus&&registry.dispatch(build_module.M_).clearSelectedBlock(),dispatch({type:"SET_HAS_PAGE_CONTENT_FOCUS",hasPageContentFocus})},actions_toggleDistractionFree=()=>({registry})=>{(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).toggleDistractionFree",{since:"6.6",alternative:"dispatch( 'core/editor').toggleDistractionFree"}),registry.dispatch(store_store).toggleDistractionFree()},setEditorCanvasContainerView=view=>({dispatch})=>{dispatch({type:"SET_EDITOR_CANVAS_CONTAINER_VIEW",view})};function registerRoute(route){return{type:"REGISTER_ROUTE",route}}const get_filtered_template_parts_EMPTY_ARRAY=[];const selectors_isFeatureActive=(0,factory.N)((select=>(_,featureName)=>((0,deprecated_build_module.A)("select( 'core/edit-site' ).isFeatureActive",{since:"6.0",alternative:"select( 'core/preferences' ).get"}),!!select(store.M).get("core/edit-site",featureName)))),__experimentalGetPreviewDeviceType=(0,factory.N)((select=>()=>((0,deprecated_build_module.A)("select( 'core/edit-site' ).__experimentalGetPreviewDeviceType",{since:"6.5",version:"6.7",alternative:"select( 'core/editor' ).getDeviceType"}),select(store_store).getDeviceType()))),getCanUserCreateMedia=(0,factory.N)((select=>()=>((0,deprecated_build_module.A)("wp.data.select( 'core/edit-site' ).getCanUserCreateMedia()",{since:"6.7",alternative:"wp.data.select( 'core' ).canUser( 'create', { kind: 'root', type: 'media' } )"}),select(core_data_build_module.M_).canUser("create","media")))),getReusableBlocks=(0,factory.N)((select=>()=>{(0,deprecated_build_module.A)("select( 'core/edit-site' ).getReusableBlocks()",{since:"6.5",version:"6.8",alternative:"select( 'core/core' ).getEntityRecords( 'postType', 'wp_block' )"});return"web"===platform.A.OS?select(core_data_build_module.M_).getEntityRecords("postType","wp_block",{per_page:-1}):[]}));function getSettings(state){return state.settings}function getHomeTemplateId(){(0,deprecated_build_module.A)("select( 'core/edit-site' ).getHomeTemplateId",{since:"6.2",version:"6.4"})}function getEditedPostType(state){return state.editedPost.postType}function getEditedPostId(state){return state.editedPost.id}function getEditedPostContext(state){return state.editedPost.context}function getPage(state){return{context:state.editedPost.context}}const selectors_isInserterOpened=(0,factory.N)((select=>()=>((0,deprecated_build_module.A)("select( 'core/edit-site' ).isInserterOpened",{since:"6.5",alternative:"select( 'core/editor' ).isInserterOpened"}),select(store_store).isInserterOpened()))),__experimentalGetInsertionPoint=(0,factory.N)((select=>()=>((0,deprecated_build_module.A)("select( 'core/edit-site' ).__experimentalGetInsertionPoint",{since:"6.5",version:"6.7"}),src_lock_unlock_unlock(select(store_store)).getInserter()))),selectors_isListViewOpened=(0,factory.N)((select=>()=>((0,deprecated_build_module.A)("select( 'core/edit-site' ).isListViewOpened",{since:"6.5",alternative:"select( 'core/editor' ).isListViewOpened"}),select(store_store).isListViewOpened())));function isSaveViewOpened(state){return state.saveViewPanel}function getBlocksAndTemplateParts(select){const templateParts=select(core_data_build_module.M_).getEntityRecords("postType",utils_constants_TEMPLATE_PART_POST_TYPE,{per_page:-1}),{getBlocksByName,getBlocksByClientId}=select(build_module.M_);return[getBlocksByClientId(getBlocksByName("core/template-part")),templateParts]}const getCurrentTemplateTemplateParts=(0,factory.N)((select=>(0,rememo.A)((()=>((0,deprecated_build_module.A)("select( 'core/edit-site' ).getCurrentTemplateTemplateParts()",{since:"6.7",version:"6.9",alternative:"select( 'core/block-editor' ).getBlocksByName( 'core/template-part' )"}),function getFilteredTemplatePartBlocks(blocks=get_filtered_template_parts_EMPTY_ARRAY,templateParts){const templatePartsById=templateParts?templateParts.reduce(((newTemplateParts,part)=>({...newTemplateParts,[part.id]:part})),{}):{},result=[],stack=[...blocks];for(;stack.length;){const{innerBlocks,...block}=stack.shift();if(stack.unshift(...innerBlocks),(0,blocks_build_module.gc)(block)){const{attributes:{theme,slug}}=block,templatePart=templatePartsById[`${theme}//${slug}`];templatePart&&result.push({templatePart,block})}}return result}(...getBlocksAndTemplateParts(select)))),(()=>getBlocksAndTemplateParts(select))))),selectors_getEditorMode=(0,factory.N)((select=>()=>select(store.M).get("core","editorMode")));function getCurrentTemplateNavigationPanelSubMenu(){(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).getCurrentTemplateNavigationPanelSubMenu",{since:"6.2",version:"6.4"})}function getNavigationPanelActiveMenu(){(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).getNavigationPanelActiveMenu",{since:"6.2",version:"6.4"})}function isNavigationOpened(){(0,deprecated_build_module.A)("dispatch( 'core/edit-site' ).isNavigationOpened",{since:"6.2",version:"6.4"})}function isPage(state){return!!state.editedPost.context?.postId}function hasPageContentFocus(){return(0,deprecated_build_module.A)("select( 'core/edit-site' ).hasPageContentFocus",{since:"6.5"}),!1}function getEditorCanvasContainerView(state){return state.editorCanvasContainerView}function getRoutes(state){return state.routes}const store_storeConfig={reducer:src_store_reducer,actions:src_store_actions_namespaceObject,selectors:src_store_selectors_namespaceObject},src_store_store=(0,redux_store.A)("core/edit-site",store_storeConfig);(0,data_build_module.kz)(src_store_store),src_lock_unlock_unlock(src_store_store).registerPrivateSelectors(src_store_private_selectors_namespaceObject),src_lock_unlock_unlock(src_store_store).registerPrivateActions(src_store_private_actions_namespaceObject);const content_noop=()=>{};function SidebarNavigationScreenGlobalStylesContent(){const{storedSettings}=(0,use_select.A)((select=>{const{getSettings}=src_lock_unlock_unlock(select(src_store_store));return{storedSettings:getSettings()}}),[]);return(0,jsx_runtime.jsx)(build_module.oS,{settings:storedSettings,onChange:content_noop,onInput:content_noop,children:(0,jsx_runtime.jsxs)(component.A,{spacing:10,className:"edit-site-global-styles-variation-container",children:[(0,jsx_runtime.jsx)(StyleVariationsContainer,{gap:3}),(0,jsx_runtime.jsx)(ColorVariations,{title:(0,i18n_build_module.__)("Palettes"),gap:3}),(0,jsx_runtime.jsx)(TypographyVariations,{title:(0,i18n_build_module.__)("Typography"),gap:3})]})})}SidebarNavigationScreenGlobalStylesContent.displayName="SidebarNavigationScreenGlobalStylesContent",SidebarNavigationScreenGlobalStylesContent.__docgenInfo={description:"",methods:[],displayName:"SidebarNavigationScreenGlobalStylesContent"};const{useZoomOut}=src_lock_unlock_unlock(build_module.jb);function ScreenStyleVariations(){const{setDeviceType}=(0,use_dispatch.A)(store_store);return useZoomOut(),setDeviceType("desktop"),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:(0,i18n_build_module.__)("Browse styles"),description:(0,i18n_build_module.__)("Choose a variation to change the look of the site.")}),(0,jsx_runtime.jsx)(card_component,{size:"small",isBorderless:!0,className:"edit-site-global-styles-screen-style-variations",children:(0,jsx_runtime.jsx)(card_body_component,{children:(0,jsx_runtime.jsx)(SidebarNavigationScreenGlobalStylesContent,{})})})]})}const screen_style_variations=ScreenStyleVariations;ScreenStyleVariations.__docgenInfo={description:"",methods:[],displayName:"ScreenStyleVariations"};var composite=__webpack_require__("./packages/components/build-module/composite/index.js"),disabled=__webpack_require__("./packages/components/build-module/disabled/index.js");const{EditorContentSlotFill:editor_canvas_container_EditorContentSlotFill,ResizableEditor:editor_canvas_container_ResizableEditor}=src_lock_unlock_unlock(private_apis_privateApis);function EditorCanvasContainer({children,closeButtonLabel,onClose,enableResizing=!1}){const{editorCanvasContainerView,showListViewByDefault}=(0,use_select.A)((select=>({editorCanvasContainerView:src_lock_unlock_unlock(select(src_store_store)).getEditorCanvasContainerView(),showListViewByDefault:select(store.M).get("core","showListViewByDefault")})),[]),[isClosed,setIsClosed]=(0,react.useState)(!1),{setEditorCanvasContainerView}=src_lock_unlock_unlock((0,use_dispatch.A)(src_store_store)),{setIsListViewOpened}=(0,use_dispatch.A)(store_store),focusOnMountRef=(0,use_focus_on_mount.A)("firstElement"),sectionFocusReturnRef=(0,use_focus_return.A)();function onCloseContainer(){setIsListViewOpened(showListViewByDefault),setEditorCanvasContainerView(void 0),setIsClosed(!0),"function"==typeof onClose&&onClose()}const childrenWithProps=Array.isArray(children)?react.Children.map(children,((child,index)=>0===index?(0,react.cloneElement)(child,{ref:sectionFocusReturnRef}):child)):(0,react.cloneElement)(children,{ref:sectionFocusReturnRef});if(isClosed)return null;const title=function getEditorCanvasContainerTitle(view){switch(view){case"style-book":return(0,i18n_build_module.__)("Style Book");case"global-styles-revisions":case"global-styles-revisions:style-book":return(0,i18n_build_module.__)("Style Revisions");default:return""}}(editorCanvasContainerView),shouldShowCloseButton=onClose||closeButtonLabel;return(0,jsx_runtime.jsx)(editor_canvas_container_EditorContentSlotFill.Fill,{children:(0,jsx_runtime.jsx)("div",{className:"edit-site-editor-canvas-container",children:(0,jsx_runtime.jsx)(editor_canvas_container_ResizableEditor,{enableResizing,children:(0,jsx_runtime.jsxs)("section",{className:"edit-site-editor-canvas-container__section",ref:shouldShowCloseButton?focusOnMountRef:null,onKeyDown:function closeOnEscape(event){event.keyCode!==keycodes_build_module._f||event.defaultPrevented||(event.preventDefault(),onCloseContainer())},"aria-label":title,children:[shouldShowCloseButton&&(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",className:"edit-site-editor-canvas-container__close-button",icon:close_small.A,label:closeButtonLabel||(0,i18n_build_module.__)("Close"),onClick:onCloseContainer}),childrenWithProps]})})})})}EditorCanvasContainer.displayName="EditorCanvasContainer";const editor_canvas_container=EditorCanvasContainer;EditorCanvasContainer.__docgenInfo={description:"",methods:[],displayName:"EditorCanvasContainer",props:{enableResizing:{defaultValue:{value:"false",computed:!1},required:!1}}};const STYLE_BOOK_COLOR_GROUPS=[{slug:"theme-colors",title:(0,i18n_build_module.__)("Theme Colors"),origin:"theme",type:"colors"},{slug:"theme-gradients",title:(0,i18n_build_module.__)("Theme Gradients"),origin:"theme",type:"gradients"},{slug:"custom-colors",title:(0,i18n_build_module.__)("Custom Colors"),origin:"custom",type:"colors"},{slug:"custom-gradients",title:(0,i18n_build_module.__)("Custom Gradients"),origin:"custom",type:"gradients"},{slug:"duotones",title:(0,i18n_build_module.__)("Duotones"),origin:"theme",type:"duotones"},{slug:"default-colors",title:(0,i18n_build_module.__)("Default Colors"),origin:"default",type:"colors"},{slug:"default-gradients",title:(0,i18n_build_module.__)("Default Gradients"),origin:"default",type:"gradients"}],STYLE_BOOK_THEME_SUBCATEGORIES=[{slug:"site-identity",title:(0,i18n_build_module.__)("Site Identity"),blocks:["core/site-logo","core/site-title","core/site-tagline"]},{slug:"design",title:(0,i18n_build_module.__)("Design"),blocks:["core/navigation","core/avatar","core/post-time-to-read"],exclude:["core/home-link","core/navigation-link"]},{slug:"posts",title:(0,i18n_build_module.__)("Posts"),blocks:["core/post-title","core/post-excerpt","core/post-author","core/post-author-name","core/post-author-biography","core/post-date","core/post-terms","core/term-description","core/query-title","core/query-no-results","core/query-pagination","core/query-numbers"]},{slug:"comments",title:(0,i18n_build_module.__)("Comments"),blocks:["core/comments-title","core/comments-pagination","core/comments-pagination-numbers","core/comments","core/comments-author-name","core/comment-content","core/comment-date","core/comment-edit-link","core/comment-reply-link","core/comment-template","core/post-comments-count","core/post-comments-link"]}],STYLE_BOOK_CATEGORIES=[{slug:"text",title:(0,i18n_build_module.__)("Text"),blocks:["core/post-content","core/home-link","core/navigation-link"]},{slug:"colors",title:(0,i18n_build_module.__)("Colors"),blocks:[]},{slug:"theme",title:(0,i18n_build_module.__)("Theme"),subcategories:STYLE_BOOK_THEME_SUBCATEGORIES},{slug:"media",title:(0,i18n_build_module.__)("Media"),blocks:["core/post-featured-image"]},{slug:"widgets",title:(0,i18n_build_module.__)("Widgets"),blocks:[]},{slug:"embed",title:(0,i18n_build_module.__)("Embeds"),include:[]}];function getExamplesByCategory(categoryDefinition,examples){if(!categoryDefinition?.slug||!examples?.length)return;if(categoryDefinition?.subcategories?.length)return categoryDefinition.subcategories.reduce(((acc,subcategoryDefinition)=>{const subcategoryExamples=getExamplesByCategory(subcategoryDefinition,examples);return subcategoryExamples&&(acc.subcategories=[...acc.subcategories,subcategoryExamples]),acc}),{title:categoryDefinition.title,slug:categoryDefinition.slug,subcategories:[]});const blocksToInclude=categoryDefinition?.blocks||[],blocksToExclude=categoryDefinition?.exclude||[],categoryExamples=examples.filter((example=>!blocksToExclude.includes(example.name)&&(example.category===categoryDefinition.slug||blocksToInclude.includes(example.name))));return categoryExamples.length?{title:categoryDefinition.title,slug:categoryDefinition.slug,examples:categoryExamples}:void 0}function getTopLevelStyleBookCategories(){const reservedCategories=[...STYLE_BOOK_THEME_SUBCATEGORIES,...STYLE_BOOK_CATEGORIES].map((({slug})=>slug)),extraCategories=(0,blocks_build_module.bW)().filter((({slug})=>!reservedCategories.includes(slug)));return[...STYLE_BOOK_CATEGORIES,...extraCategories]}var view=__webpack_require__("./packages/primitives/build-module/view/index.js");const ColorExamples=({colors,type})=>colors?(0,jsx_runtime.jsx)(grid_component.A,{columns:2,rowGap:8,columnGap:16,children:colors.map((color=>{const className="gradients"===type?(0,build_module.tA)(color.slug):(0,build_module.tQ)("background-color",color.slug),classes=(0,clsx.A)("edit-site-style-book__color-example",className);return(0,jsx_runtime.jsx)(view.S,{className:classes},color.slug)}))}):null;ColorExamples.displayName="ColorExamples";const color_examples=ColorExamples;try{colorexamples.displayName="colorexamples",colorexamples.__docgenInfo={description:"",displayName:"colorexamples",props:{colors:{defaultValue:null,description:"",name:"colors",required:!0,type:{name:"any"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/edit-site/src/components/style-book/color-examples.tsx#colorexamples"]={docgenInfo:colorexamples.__docgenInfo,name:"colorexamples",path:"packages/edit-site/src/components/style-book/color-examples.tsx#colorexamples"})}catch(__react_docgen_typescript_loader_error){}const DuotoneExamples=({duotones})=>duotones?(0,jsx_runtime.jsx)(grid_component.A,{columns:2,rowGap:16,columnGap:16,children:duotones.map((duotone=>(0,jsx_runtime.jsxs)(grid_component.A,{className:"edit-site-style-book__duotone-example",columns:2,rowGap:8,columnGap:8,children:[(0,jsx_runtime.jsx)(view.S,{children:(0,jsx_runtime.jsx)("img",{alt:`Duotone example: ${duotone.slug}`,src:"https://s.w.org/images/core/5.3/MtBlanc1.jpg",style:{filter:`url(#wp-duotone-${duotone.slug})`}})}),duotone.colors.map((color=>(0,jsx_runtime.jsx)(view.S,{className:"edit-site-style-book__color-example",style:{backgroundColor:color}},color)))]},duotone.slug)))}):null;DuotoneExamples.displayName="DuotoneExamples";const duotone_examples=DuotoneExamples;try{duotoneexamples.displayName="duotoneexamples",duotoneexamples.__docgenInfo={description:"",displayName:"duotoneexamples",props:{duotones:{defaultValue:null,description:"",name:"duotones",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/edit-site/src/components/style-book/duotone-examples.tsx#duotoneexamples"]={docgenInfo:duotoneexamples.__docgenInfo,name:"duotoneexamples",path:"packages/edit-site/src/components/style-book/duotone-examples.tsx#duotoneexamples"})}catch(__react_docgen_typescript_loader_error){}function getExamples(colors){const nonHeadingBlockExamples=(0,blocks_build_module.li)().filter((blockType=>{const{name,example,supports}=blockType;return"core/heading"!==name&&!!example&&!1!==supports?.inserter})).map((blockType=>({name:blockType.name,title:blockType.title,category:blockType.category,blocks:(0,blocks_build_module.KL)(blockType.name,blockType.example)})));if(!!!(0,blocks_build_module.E7)("core/heading"))return nonHeadingBlockExamples;const headingsExample={name:"core/heading",title:(0,i18n_build_module.__)("Headings"),category:"text",blocks:[1,2,3,4,5,6].map((level=>(0,blocks_build_module.Wv)("core/heading",{content:(0,i18n_build_module.nv)((0,i18n_build_module.__)("Heading %d"),level),level})))},colorExamples=function getColorExamples(colors){if(!colors)return[];const examples=[];return STYLE_BOOK_COLOR_GROUPS.forEach((group=>{const palette=colors[group.type].find((origin=>origin.slug===group.origin));if(palette?.[group.type]){const example={name:group.slug,title:group.title,category:"colors"};"duotones"===group.type?(example.content=(0,jsx_runtime.jsx)(duotone_examples,{duotones:palette[group.type]}),examples.push(example)):(example.content=(0,jsx_runtime.jsx)(color_examples,{colors:palette[group.type],type:group.type}),examples.push(example))}})),examples}(colors);return[headingsExample,...colorExamples,...nonHeadingBlockExamples]}try{getExamples.displayName="getExamples",getExamples.__docgenInfo={description:"Returns a list of examples for registered block types.",displayName:"getExamples",props:{disableCustomColors:{defaultValue:null,description:"",name:"disableCustomColors",required:!0,type:{name:"boolean"}},disableCustomGradients:{defaultValue:null,description:"",name:"disableCustomGradients",required:!0,type:{name:"boolean"}},hasColorsOrGradients:{defaultValue:null,description:"",name:"hasColorsOrGradients",required:!0,type:{name:"boolean"}},colors:{defaultValue:null,description:"",name:"colors",required:!0,type:{name:'Omit<ColorOrigin, "gradients" | "duotones">'}},duotones:{defaultValue:null,description:"",name:"duotones",required:!0,type:{name:'Omit<ColorOrigin, "colors" | "gradients">'}},gradients:{defaultValue:null,description:"",name:"gradients",required:!0,type:{name:'Omit<ColorOrigin, "colors" | "duotones">'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/edit-site/src/components/style-book/examples.tsx#getExamples"]={docgenInfo:getExamples.__docgenInfo,name:"getExamples",path:"packages/edit-site/src/components/style-book/examples.tsx#getExamples"})}catch(__react_docgen_typescript_loader_error){}const{ExperimentalBlockEditorProvider:style_book_ExperimentalBlockEditorProvider,useGlobalStyle:style_book_useGlobalStyle,GlobalStylesContext:style_book_GlobalStylesContext,useGlobalStylesOutputWithConfig}=src_lock_unlock_unlock(build_module.jb),{mergeBaseAndUserConfigs:style_book_mergeBaseAndUserConfigs}=src_lock_unlock_unlock(private_apis_privateApis),{Tabs:style_book_Tabs}=src_lock_unlock_unlock(private_apis.j);function isObjectEmpty(object){return!object||0===Object.keys(object).length}function StyleBook({enableResizing=!0,isSelected,onClick,onSelect,showCloseButton=!0,onClose,showTabs=!0,userConfig={}}){const[resizeObserver,sizes]=(0,use_resize_observer.A)(),[textColor]=style_book_useGlobalStyle("color.text"),[backgroundColor]=style_book_useGlobalStyle("color.background"),colors=function useMultiOriginPalettes(){const{colors,gradients}=(0,build_module.wr)(),[shouldDisplayDefaultDuotones,customDuotones,themeDuotones,defaultDuotones]=(0,build_module.t0)("color.defaultDuotone","color.duotone.custom","color.duotone.theme","color.duotone.default");return(0,react.useMemo)((()=>{const result={colors,gradients,duotones:[]};return themeDuotones&&themeDuotones.length&&result.duotones.push({name:(0,i18n_build_module._x)("Theme","Indicates these duotone filters come from the theme."),slug:"theme",duotones:themeDuotones}),shouldDisplayDefaultDuotones&&defaultDuotones&&defaultDuotones.length&&result.duotones.push({name:(0,i18n_build_module._x)("Default","Indicates these duotone filters come from WordPress."),slug:"default",duotones:defaultDuotones}),customDuotones&&customDuotones.length&&result.duotones.push({name:(0,i18n_build_module._x)("Custom","Indicates these doutone filters are created by the user."),slug:"custom",duotones:customDuotones}),result}),[colors,gradients,customDuotones,themeDuotones,defaultDuotones,shouldDisplayDefaultDuotones])}(),[examples,setExamples]=(0,react.useState)((()=>getExamples(colors))),tabs=(0,react.useMemo)((()=>getTopLevelStyleBookCategories().filter((category=>examples.some((example=>example.category===category.slug))))),[examples]);(0,react.useEffect)((()=>{setExamples(getExamples(colors))}),[colors]);const{base:baseConfig}=(0,react.useContext)(style_book_GlobalStylesContext),mergedConfig=(0,react.useMemo)((()=>isObjectEmpty(userConfig)||isObjectEmpty(baseConfig)?{}:style_book_mergeBaseAndUserConfigs(baseConfig,userConfig)),[baseConfig,userConfig]),originalSettings=(0,use_select.A)((select=>select(build_module.M_).getSettings()),[]),settings=(0,react.useMemo)((()=>({...originalSettings,isPreviewMode:!0})),[originalSettings]),[globalStyles]=useGlobalStylesOutputWithConfig(mergedConfig);return settings.styles=isObjectEmpty(globalStyles)||isObjectEmpty(userConfig)?settings.styles:globalStyles,(0,jsx_runtime.jsx)(editor_canvas_container,{onClose,enableResizing,closeButtonLabel:showCloseButton?(0,i18n_build_module.__)("Close"):null,children:(0,jsx_runtime.jsxs)("div",{className:(0,clsx.A)("edit-site-style-book",{"is-wide":sizes.width>600,"is-button":!!onClick}),style:{color:textColor,background:backgroundColor},children:[resizeObserver,showTabs?(0,jsx_runtime.jsxs)(style_book_Tabs,{children:[(0,jsx_runtime.jsx)("div",{className:"edit-site-style-book__tablist-container",children:(0,jsx_runtime.jsx)(style_book_Tabs.TabList,{children:tabs.map((tab=>(0,jsx_runtime.jsx)(style_book_Tabs.Tab,{tabId:tab.slug,children:tab.title},tab.slug)))})}),tabs.map((tab=>(0,jsx_runtime.jsx)(style_book_Tabs.TabPanel,{tabId:tab.slug,focusable:!1,className:"edit-site-style-book__tabpanel",children:(0,jsx_runtime.jsx)(StyleBookBody,{category:tab.slug,examples,isSelected,onSelect,settings,sizes,title:tab.title})},tab.slug)))]}):(0,jsx_runtime.jsx)(StyleBookBody,{examples,isSelected,onClick,onSelect,settings,sizes})]})})}StyleBook.displayName="StyleBook";const StyleBookBody=({category,examples,isSelected,onClick,onSelect,settings,sizes,title})=>{const[isFocused,setIsFocused]=(0,react.useState)(!1),buttonModeProps={role:"button",onFocus:()=>setIsFocused(!0),onBlur:()=>setIsFocused(!1),onKeyDown:event=>{if(event.defaultPrevented)return;const{keyCode}=event;!onClick||keyCode!==keycodes_build_module.Fm&&keyCode!==keycodes_build_module.t6||(event.preventDefault(),onClick(event))},onClick:event=>{event.defaultPrevented||onClick&&(event.preventDefault(),onClick(event))},readonly:!0};return(0,jsx_runtime.jsxs)(build_module.tX,{className:(0,clsx.A)("edit-site-style-book__iframe",{"is-focused":isFocused&&!!onClick,"is-button":!!onClick}),name:"style-book-canvas",tabIndex:0,...onClick?buttonModeProps:{},children:[(0,jsx_runtime.jsx)(build_module.ui,{styles:settings.styles}),(0,jsx_runtime.jsxs)("style",{children:['\n\t// Forming a "block formatting context" to prevent margin collapsing.\n\t// @see https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context\n\t.is-root-container {\n\t\tdisplay: flow-root;\n\t}\n\n\tbody {\n\t\tposition: relative;\n\t\tpadding: 32px !important;\n\t}\n\n\t.edit-site-style-book__examples {\n\t\tmax-width: 1200px;\n\t\tmargin: 0 auto;\n\t}\n\n\t.edit-site-style-book__example {\n\t    max-width: 900px;\n\t\tborder-radius: 2px;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 40px;\n\t\tpadding: 16px;\n\t\twidth: 100%;\n\t\tbox-sizing: border-box;\n\t\tscroll-margin-top: 32px;\n\t\tscroll-margin-bottom: 32px;\n\t\tmargin: 0 auto 40px auto;\n\t}\n\n\t.edit-site-style-book__example.is-selected {\n\t\tbox-shadow: 0 0 0 1px var(--wp-components-color-accent, var(--wp-admin-theme-color, #007cba));\n\t}\n\n\t.edit-site-style-book__example.is-disabled-example {\n\t\tpointer-events: none;\n\t}\n\n\t.edit-site-style-book__example:focus:not(:disabled) {\n\t\tbox-shadow: 0 0 0 var(--wp-admin-border-width-focus) var(--wp-components-color-accent, var(--wp-admin-theme-color, #007cba));\n\t\toutline: 3px solid transparent;\n\t}\n\n\t.edit-site-style-book__duotone-example > div:first-child {\n\t\tdisplay: flex;\n\t\taspect-ratio: 16 / 9;\n\t\tgrid-row: span 1;\n\t\tgrid-column: span 2;\n\t}\n\t.edit-site-style-book__duotone-example img {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tobject-fit: cover;\n\t}\n\t.edit-site-style-book__duotone-example > div:not(:first-child) {\n\t\theight: 20px;\n\t\tborder: 1px solid #ddd;\n\t}\n\n\t.edit-site-style-book__color-example {\n\t\theight: 52px;\n\t\tborder: 1px solid #ddd;\n\t}\n\n\t.edit-site-style-book__examples.is-wide .edit-site-style-book__example {\n\t\tflex-direction: row;\n\t}\n\n\t.edit-site-style-book__subcategory-title,\n\t.edit-site-style-book__example-title {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;\n\t\tfont-size: 11px;\n\t\tfont-weight: 500;\n\t\tline-height: normal;\n\t\tmargin: 0;\n\t\ttext-align: left;\n\t\ttext-transform: uppercase;\n\t}\n\n\t.edit-site-style-book__subcategory-title {\n\t\tfont-size: 16px;\n\t\tmargin-bottom: 40px;\n    \tborder-bottom: 1px solid #ddd;\n    \tpadding-bottom: 8px;\n\t}\n\n\t.edit-site-style-book__examples.is-wide .edit-site-style-book__example-title {\n\t\ttext-align: right;\n\t\twidth: 120px;\n\t}\n\n\t.edit-site-style-book__example-preview {\n\t\twidth: 100%;\n\t}\n\n\t.edit-site-style-book__example-preview .block-editor-block-list__insertion-point,\n\t.edit-site-style-book__example-preview .block-list-appender {\n\t\tdisplay: none;\n\t}\n\n\t.edit-site-style-book__example-preview .is-root-container > .wp-block:first-child {\n\t\tmargin-top: 0;\n\t}\n\t.edit-site-style-book__example-preview .is-root-container > .wp-block:last-child {\n\t\tmargin-bottom: 0;\n\t}\n',!!onClick&&"body { cursor: pointer; } body * { pointer-events: none; }"]}),(0,jsx_runtime.jsx)(Examples,{className:(0,clsx.A)("edit-site-style-book__examples",{"is-wide":sizes.width>600}),examples,category,label:title?(0,i18n_build_module.nv)((0,i18n_build_module.__)("Examples of blocks in the %s category"),title):(0,i18n_build_module.__)("Examples of blocks"),isSelected,onSelect},category)]})};StyleBookBody.displayName="StyleBookBody";const Examples=(0,react.memo)((({className,examples,category,label,isSelected,onSelect})=>{const categoryDefinition=category?getTopLevelStyleBookCategories().find((_category=>_category.slug===category)):null,filteredExamples=categoryDefinition?getExamplesByCategory(categoryDefinition,examples):{examples};return(0,jsx_runtime.jsxs)(composite.e,{orientation:"vertical",className,"aria-label":label,role:"grid",children:[!!filteredExamples?.examples?.length&&filteredExamples.examples.map((example=>(0,jsx_runtime.jsx)(Example,{id:`example-${example.name}`,title:example.title,content:example.content,blocks:example.blocks,isSelected:isSelected(example.name),onClick:()=>{onSelect?.(example.name)}},example.name))),!!filteredExamples?.subcategories?.length&&filteredExamples.subcategories.map((subcategory=>(0,jsx_runtime.jsxs)(composite.e.Group,{className:"edit-site-style-book__subcategory",children:[(0,jsx_runtime.jsx)(composite.e.GroupLabel,{children:(0,jsx_runtime.jsx)("h2",{className:"edit-site-style-book__subcategory-title",children:subcategory.title})}),(0,jsx_runtime.jsx)(Subcategory,{examples:subcategory.examples,isSelected,onSelect})]},`subcategory-${subcategory.slug}`)))]})})),Subcategory=({examples,isSelected,onSelect})=>!!examples?.length&&examples.map((example=>(0,jsx_runtime.jsx)(Example,{id:`example-${example.name}`,title:example.title,content:example.content,blocks:example.blocks,isSelected:isSelected(example.name),onClick:()=>{onSelect?.(example.name)}},example.name))),disabledExamples=["example-duotones"],Example=({id,title,blocks,isSelected,onClick,content})=>{const originalSettings=(0,use_select.A)((select=>select(build_module.M_).getSettings()),[]),settings=(0,react.useMemo)((()=>({...originalSettings,focusMode:!1,isPreviewMode:!0})),[originalSettings]),renderedBlocks=(0,react.useMemo)((()=>Array.isArray(blocks)?blocks:[blocks]),[blocks]),disabledProps=disabledExamples.includes(id)?{disabled:!0,accessibleWhenDisabled:!0}:{};return(0,jsx_runtime.jsx)("div",{role:"row",children:(0,jsx_runtime.jsx)("div",{role:"gridcell",children:(0,jsx_runtime.jsxs)(composite.e.Item,{className:(0,clsx.A)("edit-site-style-book__example",{"is-selected":isSelected,"is-disabled-example":!!disabledProps?.disabled}),id,"aria-label":(0,i18n_build_module.nv)((0,i18n_build_module.__)("Open %s styles in Styles panel"),title),render:(0,jsx_runtime.jsx)("div",{}),role:"button",onClick,...disabledProps,children:[(0,jsx_runtime.jsx)("span",{className:"edit-site-style-book__example-title",children:title}),(0,jsx_runtime.jsx)("div",{className:"edit-site-style-book__example-preview","aria-hidden":!0,children:(0,jsx_runtime.jsx)(disabled.A,{className:"edit-site-style-book__example-preview__content",children:content||(0,jsx_runtime.jsxs)(style_book_ExperimentalBlockEditorProvider,{value:renderedBlocks,settings,children:[(0,jsx_runtime.jsx)(build_module.ui,{}),(0,jsx_runtime.jsx)(build_module.m9,{renderAppender:!1})]})})})]})})})};Example.displayName="Example";const style_book=StyleBook;StyleBook.__docgenInfo={description:"",methods:[],displayName:"StyleBook",props:{enableResizing:{defaultValue:{value:"true",computed:!1},required:!1},showCloseButton:{defaultValue:{value:"true",computed:!1},required:!1},showTabs:{defaultValue:{value:"true",computed:!1},required:!1},userConfig:{defaultValue:{value:"{}",computed:!1},required:!1}}};const{useGlobalStyle:screen_css_useGlobalStyle,AdvancedPanel:screen_css_StylesAdvancedPanel}=src_lock_unlock_unlock(build_module.jb);function ScreenCSS(){const description=(0,i18n_build_module.__)("Add your own CSS to customize the appearance and layout of your site."),[style]=screen_css_useGlobalStyle("",void 0,"user",{shouldDecodeEncode:!1}),[inheritedStyle,setStyle]=screen_css_useGlobalStyle("",void 0,"all",{shouldDecodeEncode:!1});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:(0,i18n_build_module.__)("CSS"),description:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[description,(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(external_link.A,{href:(0,i18n_build_module.__)("https://developer.wordpress.org/advanced-administration/wordpress/css/"),className:"edit-site-global-styles-screen-css-help-link",children:(0,i18n_build_module.__)("Learn more about CSS")})]})}),(0,jsx_runtime.jsx)("div",{className:"edit-site-global-styles-screen-css",children:(0,jsx_runtime.jsx)(screen_css_StylesAdvancedPanel,{value:style,onChange:setStyle,inheritedValue:inheritedStyle})})]})}const screen_css=ScreenCSS;ScreenCSS.__docgenInfo={description:"",methods:[],displayName:"ScreenCSS"};const{ExperimentalBlockEditorProvider:revisions_ExperimentalBlockEditorProvider,GlobalStylesContext:revisions_GlobalStylesContext,useGlobalStylesOutputWithConfig:revisions_useGlobalStylesOutputWithConfig,__unstableBlockStyleVariationOverridesWithConfig}=src_lock_unlock_unlock(build_module.jb),{mergeBaseAndUserConfigs:revisions_mergeBaseAndUserConfigs}=src_lock_unlock_unlock(private_apis_privateApis);function revisions_isObjectEmpty(object){return!object||0===Object.keys(object).length}function Revisions({userConfig,blocks}){const{base:baseConfig}=(0,react.useContext)(revisions_GlobalStylesContext),mergedConfig=(0,react.useMemo)((()=>revisions_isObjectEmpty(userConfig)||revisions_isObjectEmpty(baseConfig)?{}:revisions_mergeBaseAndUserConfigs(baseConfig,userConfig)),[baseConfig,userConfig]),renderedBlocksArray=(0,react.useMemo)((()=>Array.isArray(blocks)?blocks:[blocks]),[blocks]),originalSettings=(0,use_select.A)((select=>select(build_module.M_).getSettings()),[]),settings=(0,react.useMemo)((()=>({...originalSettings,isPreviewMode:!0})),[originalSettings]),[globalStyles]=revisions_useGlobalStylesOutputWithConfig(mergedConfig),editorStyles=revisions_isObjectEmpty(globalStyles)||revisions_isObjectEmpty(userConfig)?settings.styles:globalStyles;return(0,jsx_runtime.jsx)(editor_canvas_container,{title:(0,i18n_build_module.__)("Revisions"),closeButtonLabel:(0,i18n_build_module.__)("Close revisions"),enableResizing:!0,children:(0,jsx_runtime.jsxs)(build_module.tX,{className:"edit-site-revisions__iframe",name:"revisions",tabIndex:0,children:[(0,jsx_runtime.jsx)("style",{children:".is-root-container { display: flow-root; }"}),(0,jsx_runtime.jsx)(disabled.A,{className:"edit-site-revisions__example-preview__content",children:(0,jsx_runtime.jsxs)(revisions_ExperimentalBlockEditorProvider,{value:renderedBlocksArray,settings,children:[(0,jsx_runtime.jsx)(build_module.m9,{renderAppender:!1}),(0,jsx_runtime.jsx)(build_module.ui,{styles:editorStyles}),(0,jsx_runtime.jsx)(__unstableBlockStyleVariationOverridesWithConfig,{config:mergedConfig})]})})]})})}Revisions.displayName="Revisions";const components_revisions=Revisions;Revisions.__docgenInfo={description:"",methods:[],displayName:"Revisions"};const SITE_EDITOR_AUTHORS_QUERY={per_page:-1,_fields:"id,name,avatar_urls",context:"view",capabilities:["edit_theme_options"]},use_global_styles_revisions_DEFAULT_QUERY={per_page:100,page:1},use_global_styles_revisions_EMPTY_ARRAY=[],{GlobalStylesContext:use_global_styles_revisions_GlobalStylesContext}=src_lock_unlock_unlock(build_module.jb);const{getGlobalStylesChanges:revisions_buttons_getGlobalStylesChanges}=src_lock_unlock_unlock(build_module.jb);function ChangesSummary({revision,previousRevision}){const changes=revisions_buttons_getGlobalStylesChanges(revision,previousRevision,{maxResults:7});return changes.length?(0,jsx_runtime.jsx)("ul",{"data-testid":"global-styles-revision-changes",className:"edit-site-global-styles-screen-revisions__changes",children:changes.map((change=>(0,jsx_runtime.jsx)("li",{children:change},change)))}):null}function RevisionsButtons({userRevisions,selectedRevisionId,onChange,canApplyRevision,onApplyRevision}){const{currentThemeName,currentUser}=(0,use_select.A)((select=>{const{getCurrentTheme,getCurrentUser}=select(core_data_build_module.M_),currentTheme=getCurrentTheme();return{currentThemeName:currentTheme?.name?.rendered||currentTheme?.stylesheet,currentUser:getCurrentUser()}}),[]),dateNowInMs=(0,date_build_module.pp)().getTime(),{datetimeAbbreviated}=(0,date_build_module.mt)().formats;return(0,jsx_runtime.jsx)("ol",{className:"edit-site-global-styles-screen-revisions__revisions-list","aria-label":(0,i18n_build_module.__)("Global styles revisions list"),role:"group",children:userRevisions.map(((revision,index)=>{const{id,author,modified}=revision,isUnsaved="unsaved"===id,revisionAuthor=isUnsaved?currentUser:author,authorDisplayName=revisionAuthor?.name||(0,i18n_build_module.__)("User"),authorAvatar=revisionAuthor?.avatar_urls?.[48],isSelected=selectedRevisionId?selectedRevisionId===id:0===index,areStylesEqual=!canApplyRevision&&isSelected,isReset="parent"===id,modifiedDate=(0,date_build_module.pp)(modified),displayDate=modified&&dateNowInMs-modifiedDate.getTime()>864e5?(0,date_build_module.b5)(datetimeAbbreviated,modifiedDate):(0,date_build_module.mk)(modified),revisionLabel=function getRevisionLabel(id,authorDisplayName,formattedModifiedDate,areStylesEqual){return"parent"===id?(0,i18n_build_module.__)("Reset the styles to the theme defaults"):"unsaved"===id?(0,i18n_build_module.nv)((0,i18n_build_module.__)("Unsaved changes by %s"),authorDisplayName):areStylesEqual?(0,i18n_build_module.nv)((0,i18n_build_module.__)("Changes saved by %1$s on %2$s. This revision matches current editor styles."),authorDisplayName,formattedModifiedDate):(0,i18n_build_module.nv)((0,i18n_build_module.__)("Changes saved by %1$s on %2$s"),authorDisplayName,formattedModifiedDate)}(id,authorDisplayName,(0,date_build_module.b5)(datetimeAbbreviated,modifiedDate),areStylesEqual);return(0,jsx_runtime.jsxs)("li",{className:(0,clsx.A)("edit-site-global-styles-screen-revisions__revision-item",{"is-selected":isSelected,"is-active":areStylesEqual,"is-reset":isReset}),"aria-current":isSelected,children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{__next40pxDefaultSize:!0,className:"edit-site-global-styles-screen-revisions__revision-button",accessibleWhenDisabled:!0,disabled:isSelected,onClick:()=>{onChange(revision)},"aria-label":revisionLabel,children:isReset?(0,jsx_runtime.jsxs)("span",{className:"edit-site-global-styles-screen-revisions__description",children:[(0,i18n_build_module.__)("Default styles"),(0,jsx_runtime.jsx)("span",{className:"edit-site-global-styles-screen-revisions__meta",children:currentThemeName})]}):(0,jsx_runtime.jsxs)("span",{className:"edit-site-global-styles-screen-revisions__description",children:[isUnsaved?(0,jsx_runtime.jsx)("span",{className:"edit-site-global-styles-screen-revisions__date",children:(0,i18n_build_module.__)("(Unsaved)")}):(0,jsx_runtime.jsx)("time",{className:"edit-site-global-styles-screen-revisions__date",dateTime:modified,children:displayDate}),(0,jsx_runtime.jsxs)("span",{className:"edit-site-global-styles-screen-revisions__meta",children:[(0,jsx_runtime.jsx)("img",{alt:authorDisplayName,src:authorAvatar}),authorDisplayName]}),isSelected&&(0,jsx_runtime.jsx)(ChangesSummary,{revision,previousRevision:index<userRevisions.length?userRevisions[index+1]:{}})]})}),isSelected&&(areStylesEqual?(0,jsx_runtime.jsx)("p",{className:"edit-site-global-styles-screen-revisions__applied-text",children:(0,i18n_build_module.__)("These styles are already applied to your site.")}):(0,jsx_runtime.jsx)(build_module_button.Ay,{size:"compact",variant:"primary",className:"edit-site-global-styles-screen-revisions__apply-button",onClick:onApplyRevision,children:isReset?(0,i18n_build_module.__)("Reset to defaults"):(0,i18n_build_module.__)("Apply")}))]},id)}))})}ChangesSummary.displayName="ChangesSummary",RevisionsButtons.displayName="RevisionsButtons";const revisions_buttons=RevisionsButtons;function Pagination({currentPage,numPages,changePage,totalItems,className,disabled=!1,buttonVariant="tertiary",label=(0,i18n_build_module.__)("Pagination Navigation")}){return(0,jsx_runtime.jsxs)(h_stack_component.A,{expanded:!1,as:"nav","aria-label":label,spacing:3,justify:"flex-start",className:(0,clsx.A)("edit-site-pagination",className),children:[(0,jsx_runtime.jsx)(text_component.A,{variant:"muted",className:"edit-site-pagination__total",children:(0,i18n_build_module.nv)((0,i18n_build_module._n)("%s item","%s items",totalItems),totalItems)}),(0,jsx_runtime.jsxs)(h_stack_component.A,{expanded:!1,spacing:1,children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:buttonVariant,onClick:()=>changePage(1),accessibleWhenDisabled:!0,disabled:disabled||1===currentPage,label:(0,i18n_build_module.__)("First page"),icon:(0,i18n_build_module.V8)()?next.A:previous.A,size:"compact"}),(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:buttonVariant,onClick:()=>changePage(currentPage-1),accessibleWhenDisabled:!0,disabled:disabled||1===currentPage,label:(0,i18n_build_module.__)("Previous page"),icon:(0,i18n_build_module.V8)()?chevron_right.A:chevron_left.A,size:"compact"})]}),(0,jsx_runtime.jsx)(text_component.A,{variant:"muted",children:(0,i18n_build_module.nv)((0,i18n_build_module._x)("%1$s of %2$s","paging"),currentPage,numPages)}),(0,jsx_runtime.jsxs)(h_stack_component.A,{expanded:!1,spacing:1,children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:buttonVariant,onClick:()=>changePage(currentPage+1),accessibleWhenDisabled:!0,disabled:disabled||currentPage===numPages,label:(0,i18n_build_module.__)("Next page"),icon:(0,i18n_build_module.V8)()?chevron_left.A:chevron_right.A,size:"compact"}),(0,jsx_runtime.jsx)(build_module_button.Ay,{variant:buttonVariant,onClick:()=>changePage(numPages),accessibleWhenDisabled:!0,disabled:disabled||currentPage===numPages,label:(0,i18n_build_module.__)("Last page"),icon:(0,i18n_build_module.V8)()?previous.A:next.A,size:"compact"})]})]})}RevisionsButtons.__docgenInfo={description:"Returns a rendered list of revisions buttons.\n\n@typedef {Object} props\n@property {Array<Object>} userRevisions      A collection of user revisions.\n@property {number}        selectedRevisionId The id of the currently-selected revision.\n@property {Function}      onChange           Callback fired when a revision is selected.\n\n@param    {props}         Component          props.\n@return {JSX.Element} The modal component.",methods:[],displayName:"RevisionsButtons"},Pagination.displayName="Pagination",Pagination.__docgenInfo={description:"",methods:[],displayName:"Pagination",props:{disabled:{defaultValue:{value:"false",computed:!1},required:!1},buttonVariant:{defaultValue:{value:"'tertiary'",computed:!1},required:!1},label:{defaultValue:{value:"__( 'Pagination Navigation' )",computed:!0},required:!1}}};const{GlobalStylesContext:screen_revisions_GlobalStylesContext,areGlobalStyleConfigsEqual:screen_revisions_areGlobalStyleConfigsEqual}=src_lock_unlock_unlock(build_module.jb);function ScreenRevisions(){const{user:currentEditorGlobalStyles,setUserConfig}=(0,react.useContext)(screen_revisions_GlobalStylesContext),{blocks,editorCanvasContainerView}=(0,use_select.A)((select=>({editorCanvasContainerView:src_lock_unlock_unlock(select(src_store_store)).getEditorCanvasContainerView(),blocks:select(build_module.M_).getBlocks()})),[]),[currentPage,setCurrentPage]=(0,react.useState)(1),[currentRevisions,setCurrentRevisions]=(0,react.useState)([]),{revisions,isLoading,hasUnsavedChanges,revisionsCount}=function useGlobalStylesRevisions({query}={}){const{user:userConfig}=(0,react.useContext)(use_global_styles_revisions_GlobalStylesContext),_query={...use_global_styles_revisions_DEFAULT_QUERY,...query},{authors,currentUser,isDirty,revisions,isLoadingGlobalStylesRevisions,revisionsCount}=(0,use_select.A)((select=>{var _globalStyles$_links$;const{__experimentalGetDirtyEntityRecords,getCurrentUser,getUsers,getRevisions,__experimentalGetCurrentGlobalStylesId,getEntityRecord,isResolving}=select(core_data_build_module.M_),dirtyEntityRecords=__experimentalGetDirtyEntityRecords(),_currentUser=getCurrentUser(),_isDirty=dirtyEntityRecords.length>0,globalStylesId=__experimentalGetCurrentGlobalStylesId(),globalStyles=globalStylesId?getEntityRecord("root","globalStyles",globalStylesId):void 0,_revisionsCount=null!==(_globalStyles$_links$=globalStyles?._links?.["version-history"]?.[0]?.count)&&void 0!==_globalStyles$_links$?_globalStyles$_links$:0,globalStylesRevisions=getRevisions("root","globalStyles",globalStylesId,_query)||use_global_styles_revisions_EMPTY_ARRAY;return{authors:getUsers(SITE_EDITOR_AUTHORS_QUERY)||use_global_styles_revisions_EMPTY_ARRAY,currentUser:_currentUser,isDirty:_isDirty,revisions:globalStylesRevisions,isLoadingGlobalStylesRevisions:isResolving("getRevisions",["root","globalStyles",globalStylesId,_query]),revisionsCount:_revisionsCount}}),[query]);return(0,react.useMemo)((()=>{if(!authors.length||isLoadingGlobalStylesRevisions)return{revisions:use_global_styles_revisions_EMPTY_ARRAY,hasUnsavedChanges:isDirty,isLoading:!0,revisionsCount};const _modifiedRevisions=revisions.map((revision=>({...revision,author:authors.find((author=>author.id===revision.author))})));if(revisions.length){if("unsaved"!==_modifiedRevisions[0].id&&1===_query.page&&(_modifiedRevisions[0].isLatest=!0),isDirty&&userConfig&&Object.keys(userConfig).length>0&&currentUser&&1===_query.page){const unsavedRevision={id:"unsaved",styles:userConfig?.styles,settings:userConfig?.settings,_links:userConfig?._links,author:{name:currentUser?.name,avatar_urls:currentUser?.avatar_urls},modified:new Date};_modifiedRevisions.unshift(unsavedRevision)}_query.page===Math.ceil(revisionsCount/_query.per_page)&&_modifiedRevisions.push({id:"parent",styles:{},settings:{}})}return{revisions:_modifiedRevisions,hasUnsavedChanges:isDirty,isLoading:!1,revisionsCount}}),[isDirty,revisions,currentUser,authors,userConfig,isLoadingGlobalStylesRevisions])}({query:{per_page:10,page:currentPage}}),numPages=Math.ceil(revisionsCount/10),[currentlySelectedRevision,setCurrentlySelectedRevision]=(0,react.useState)(currentEditorGlobalStyles),[isLoadingRevisionWithUnsavedChanges,setIsLoadingRevisionWithUnsavedChanges]=(0,react.useState)(!1),{setEditorCanvasContainerView}=src_lock_unlock_unlock((0,use_dispatch.A)(src_store_store)),selectedRevisionMatchesEditorStyles=screen_revisions_areGlobalStyleConfigsEqual(currentlySelectedRevision,currentEditorGlobalStyles),onCloseRevisions=()=>{setEditorCanvasContainerView("global-styles-revisions:style-book"===editorCanvasContainerView?"style-book":void 0)},restoreRevision=revision=>{setUserConfig((()=>revision)),setIsLoadingRevisionWithUnsavedChanges(!1),onCloseRevisions()};(0,react.useEffect)((()=>{!isLoading&&revisions.length&&setCurrentRevisions(revisions)}),[revisions,isLoading]);const firstRevision=revisions[0],currentlySelectedRevisionId=currentlySelectedRevision?.id,shouldSelectFirstItem=!!firstRevision?.id&&!selectedRevisionMatchesEditorStyles&&!currentlySelectedRevisionId;(0,react.useEffect)((()=>{shouldSelectFirstItem&&setCurrentlySelectedRevision(firstRevision)}),[shouldSelectFirstItem,firstRevision]);const isLoadButtonEnabled=!!currentlySelectedRevisionId&&"unsaved"!==currentlySelectedRevisionId&&!selectedRevisionMatchesEditorStyles,hasRevisions=!!currentRevisions.length;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(global_styles_header,{title:revisionsCount&&(0,i18n_build_module.nv)((0,i18n_build_module.__)("Revisions (%s)"),revisionsCount),description:(0,i18n_build_module.__)('Click on previously saved styles to preview them. To restore a selected version to the editor, hit "Apply." When you\'re ready, use the Save button to save your changes.'),onBack:onCloseRevisions}),!hasRevisions&&(0,jsx_runtime.jsx)(spinner.Ay,{className:"edit-site-global-styles-screen-revisions__loading"}),hasRevisions&&("global-styles-revisions:style-book"===editorCanvasContainerView?(0,jsx_runtime.jsx)(style_book,{userConfig:currentlySelectedRevision,isSelected:()=>{},onClose:()=>{setEditorCanvasContainerView("global-styles-revisions")}}):(0,jsx_runtime.jsx)(components_revisions,{blocks,userConfig:currentlySelectedRevision,closeButtonLabel:(0,i18n_build_module.__)("Close revisions")})),(0,jsx_runtime.jsx)(revisions_buttons,{onChange:setCurrentlySelectedRevision,selectedRevisionId:currentlySelectedRevisionId,userRevisions:currentRevisions,canApplyRevision:isLoadButtonEnabled,onApplyRevision:()=>hasUnsavedChanges?setIsLoadingRevisionWithUnsavedChanges(!0):restoreRevision(currentlySelectedRevision)}),numPages>1&&(0,jsx_runtime.jsx)("div",{className:"edit-site-global-styles-screen-revisions__footer",children:(0,jsx_runtime.jsx)(Pagination,{className:"edit-site-global-styles-screen-revisions__pagination",currentPage,numPages,changePage:setCurrentPage,totalItems:revisionsCount,disabled:isLoading,label:(0,i18n_build_module.__)("Global Styles pagination navigation")})}),isLoadingRevisionWithUnsavedChanges&&(0,jsx_runtime.jsx)(confirm_dialog_component.A,{isOpen:isLoadingRevisionWithUnsavedChanges,confirmButtonText:(0,i18n_build_module.__)("Apply"),onConfirm:()=>restoreRevision(currentlySelectedRevision),onCancel:()=>setIsLoadingRevisionWithUnsavedChanges(!1),size:"medium",children:(0,i18n_build_module.__)("Are you sure you want to apply this revision? Any unsaved changes will be lost.")})]})}const screen_revisions=ScreenRevisions;ScreenRevisions.__docgenInfo={description:"",methods:[],displayName:"ScreenRevisions"};const{useGlobalStylesReset}=src_lock_unlock_unlock(build_module.jb),{Slot:GlobalStylesMenuSlot,Fill:GlobalStylesMenuFill}=(0,slot_fill.QJ)("GlobalStylesMenu");function GlobalStylesActionMenu(){const[canReset,onReset]=useGlobalStylesReset(),{toggle}=(0,use_dispatch.A)(store.M),{canEditCSS}=(0,use_select.A)((select=>{const{getEntityRecord,__experimentalGetCurrentGlobalStylesId}=select(core_data_build_module.M_),globalStylesId=__experimentalGetCurrentGlobalStylesId(),globalStyles=globalStylesId?getEntityRecord("root","globalStyles",globalStylesId):void 0;return{canEditCSS:!!globalStyles?._links?.["wp:action-edit-css"]}}),[]),{setEditorCanvasContainerView}=src_lock_unlock_unlock((0,use_dispatch.A)(src_store_store)),loadCustomCSS=()=>{setEditorCanvasContainerView("global-styles-css")};return(0,jsx_runtime.jsx)(GlobalStylesMenuFill,{children:(0,jsx_runtime.jsx)(dropdown_menu.A,{icon:more_vertical.A,label:(0,i18n_build_module.__)("More"),toggleProps:{size:"compact"},children:({onClose})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(menu_group.A,{children:[canEditCSS&&(0,jsx_runtime.jsx)(menu_item.A,{onClick:loadCustomCSS,children:(0,i18n_build_module.__)("Additional CSS")}),(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{toggle("core/edit-site","welcomeGuideStyles"),onClose()},children:(0,i18n_build_module.__)("Welcome Guide")})]}),(0,jsx_runtime.jsx)(menu_group.A,{children:(0,jsx_runtime.jsx)(menu_item.A,{onClick:()=>{onReset(),onClose()},disabled:!canReset,children:(0,i18n_build_module.__)("Reset styles")})})]})})})}function GlobalStylesNavigationScreen({className,...props}){return(0,jsx_runtime.jsx)(build_module_navigator.m.Screen,{className:["edit-site-global-styles-sidebar__navigator-screen",className].filter(Boolean).join(" "),...props})}function BlockStylesNavigationScreens({parentMenu,blockStyles,blockName}){return blockStyles.map(((style,index)=>(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:parentMenu+"/variations/"+style.name,children:(0,jsx_runtime.jsx)(screen_block,{name:blockName,variation:style.name})},index)))}function ContextScreens({name,parentMenu=""}){const blockStyleVariations=(0,use_select.A)((select=>{const{getBlockStyles}=select(blocks_build_module.M_);return getBlockStyles(name)}),[name]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:parentMenu+"/colors/palette",children:(0,jsx_runtime.jsx)(screen_color_palette,{name})}),!!blockStyleVariations?.length&&(0,jsx_runtime.jsx)(BlockStylesNavigationScreens,{parentMenu,blockStyles:blockStyleVariations,blockName:name})]})}function GlobalStylesStyleBook(){const navigator=(0,use_navigator.b)(),{path}=navigator.location;return(0,jsx_runtime.jsx)(style_book,{isSelected:blockName=>path===`/blocks/${encodeURIComponent(blockName)}`||path.startsWith(`/blocks/${encodeURIComponent(blockName)}/`),onSelect:blockName=>{STYLE_BOOK_COLOR_GROUPS.find((group=>group.slug===blockName))?navigator.goTo("/colors/palette"):navigator.goTo("/blocks/"+encodeURIComponent(blockName))}})}function GlobalStylesBlockLink(){const navigator=(0,use_navigator.b)(),{selectedBlockName,selectedBlockClientId}=(0,use_select.A)((select=>{const{getSelectedBlockClientId,getBlockName}=select(build_module.M_),clientId=getSelectedBlockClientId();return{selectedBlockName:getBlockName(clientId),selectedBlockClientId:clientId}}),[]),blockHasGlobalStyles=useBlockHasGlobalStyles(selectedBlockName);(0,react.useEffect)((()=>{if(!selectedBlockClientId||!blockHasGlobalStyles)return;const currentPath=navigator.location.path;if("/blocks"!==currentPath&&!currentPath.startsWith("/blocks/"))return;const newPath="/blocks/"+encodeURIComponent(selectedBlockName);newPath!==currentPath&&navigator.goTo(newPath,{skipFocus:!0})}),[selectedBlockClientId,selectedBlockName,blockHasGlobalStyles])}function GlobalStylesEditorCanvasContainerLink(){const{goTo,location}=(0,use_navigator.b)(),editorCanvasContainerView=(0,use_select.A)((select=>src_lock_unlock_unlock(select(src_store_store)).getEditorCanvasContainerView()),[]),path=location?.path,isRevisionsOpen="/revisions"===path;(0,react.useEffect)((()=>{switch(editorCanvasContainerView){case"global-styles-revisions":case"global-styles-revisions:style-book":isRevisionsOpen||goTo("/revisions");break;case"global-styles-css":goTo("/css");break;default:isRevisionsOpen&&goTo("/",{isBack:!0})}}),[editorCanvasContainerView,isRevisionsOpen,goTo])}function GlobalStylesUI(){const blocks=(0,blocks_build_module.li)(),editorCanvasContainerView=(0,use_select.A)((select=>src_lock_unlock_unlock(select(src_store_store)).getEditorCanvasContainerView()),[]);return(0,jsx_runtime.jsxs)(build_module_navigator.m,{className:"edit-site-global-styles-sidebar__navigator-provider",initialPath:"/",children:[(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/",children:(0,jsx_runtime.jsx)(screen_root,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/variations",children:(0,jsx_runtime.jsx)(screen_style_variations,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/blocks",children:(0,jsx_runtime.jsx)(screen_block_list,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/typography",children:(0,jsx_runtime.jsx)(screen_typography,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/typography/font-sizes",children:(0,jsx_runtime.jsx)(font_sizes,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/typography/font-sizes/:origin/:slug",children:(0,jsx_runtime.jsx)(font_size,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/typography/text",children:(0,jsx_runtime.jsx)(screen_typography_element,{element:"text"})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/typography/link",children:(0,jsx_runtime.jsx)(screen_typography_element,{element:"link"})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/typography/heading",children:(0,jsx_runtime.jsx)(screen_typography_element,{element:"heading"})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/typography/caption",children:(0,jsx_runtime.jsx)(screen_typography_element,{element:"caption"})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/typography/button",children:(0,jsx_runtime.jsx)(screen_typography_element,{element:"button"})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/colors",children:(0,jsx_runtime.jsx)(screen_colors,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/shadows",children:(0,jsx_runtime.jsx)(ScreenShadows,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/shadows/edit/:category/:slug",children:(0,jsx_runtime.jsx)(ScreenShadowsEdit,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/layout",children:(0,jsx_runtime.jsx)(screen_layout,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/css",children:(0,jsx_runtime.jsx)(screen_css,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/revisions",children:(0,jsx_runtime.jsx)(screen_revisions,{})}),(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/background",children:(0,jsx_runtime.jsx)(screen_background,{})}),blocks.map((block=>(0,jsx_runtime.jsx)(GlobalStylesNavigationScreen,{path:"/blocks/"+encodeURIComponent(block.name),children:(0,jsx_runtime.jsx)(screen_block,{name:block.name})},"menu-block-"+block.name))),(0,jsx_runtime.jsx)(ContextScreens,{}),blocks.map((block=>(0,jsx_runtime.jsx)(ContextScreens,{name:block.name,parentMenu:"/blocks/"+encodeURIComponent(block.name)},"screens-block-"+block.name))),"style-book"===editorCanvasContainerView&&(0,jsx_runtime.jsx)(GlobalStylesStyleBook,{}),(0,jsx_runtime.jsx)(GlobalStylesActionMenu,{}),(0,jsx_runtime.jsx)(GlobalStylesBlockLink,{}),(0,jsx_runtime.jsx)(GlobalStylesEditorCanvasContainerLink,{})]})}GlobalStylesActionMenu.displayName="GlobalStylesActionMenu",GlobalStylesNavigationScreen.displayName="GlobalStylesNavigationScreen",GlobalStylesStyleBook.displayName="GlobalStylesStyleBook",GlobalStylesUI.displayName="GlobalStylesUI";const ui=GlobalStylesUI;GlobalStylesUI.__docgenInfo={description:"",methods:[],displayName:"GlobalStylesUI"};const{mergeBaseAndUserConfigs:index_story_mergeBaseAndUserConfigs}=src_lock_unlock_unlock(private_apis_privateApis),{GlobalStylesContext:index_story_GlobalStylesContext,ExperimentalBlockEditorProvider:index_story_ExperimentalBlockEditorProvider}=src_lock_unlock_unlock(build_module.jb),index_story={title:"EditSite/GlobalStylesUI",parameters:{sourceLink:"packages/edit-site/src/components/global-styles",badges:[]}},BASE_SETTINGS={settings:{appearanceTools:!1,useRootPaddingAwareAlignments:!0,border:{color:!0,radius:!0,style:!0,width:!0},color:{background:!0,custom:!0,customDuotone:!0,customGradient:!0,defaultDuotone:!0,defaultGradients:!0,defaultPalette:!0,duotone:{default:[{name:"Dark grayscale",colors:["#000000","#7f7f7f"],slug:"dark-grayscale"},{name:"Grayscale",colors:["#000000","#ffffff"],slug:"grayscale"},{name:"Purple and yellow",colors:["#8c00b7","#fcff41"],slug:"purple-yellow"},{name:"Blue and red",colors:["#000097","#ff4747"],slug:"blue-red"},{name:"Midnight",colors:["#000000","#00a5ff"],slug:"midnight"},{name:"Magenta and yellow",colors:["#c7005a","#fff278"],slug:"magenta-yellow"},{name:"Purple and green",colors:["#a60072","#67ff66"],slug:"purple-green"},{name:"Blue and orange",colors:["#1900d8","#ffa96b"],slug:"blue-orange"}]},gradients:{default:[{name:"Vivid cyan blue to vivid purple",gradient:"linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)",slug:"vivid-cyan-blue-to-vivid-purple"},{name:"Light green cyan to vivid green cyan",gradient:"linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)",slug:"light-green-cyan-to-vivid-green-cyan"},{name:"Luminous vivid amber to luminous vivid orange",gradient:"linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)",slug:"luminous-vivid-amber-to-luminous-vivid-orange"},{name:"Luminous vivid orange to vivid red",gradient:"linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%)",slug:"luminous-vivid-orange-to-vivid-red"},{name:"Very light gray to cyan bluish gray",gradient:"linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%)",slug:"very-light-gray-to-cyan-bluish-gray"},{name:"Cool to warm spectrum",gradient:"linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%)",slug:"cool-to-warm-spectrum"},{name:"Blush light purple",gradient:"linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%)",slug:"blush-light-purple"},{name:"Blush bordeaux",gradient:"linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%)",slug:"blush-bordeaux"},{name:"Luminous dusk",gradient:"linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%)",slug:"luminous-dusk"},{name:"Pale ocean",gradient:"linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%)",slug:"pale-ocean"},{name:"Electric grass",gradient:"linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%)",slug:"electric-grass"},{name:"Midnight",gradient:"linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%)",slug:"midnight"}]},link:!0,palette:{default:[{name:"Black",slug:"black",color:"#000000"},{name:"Cyan bluish gray",slug:"cyan-bluish-gray",color:"#abb8c3"},{name:"White",slug:"white",color:"#ffffff"},{name:"Pale pink",slug:"pale-pink",color:"#f78da7"},{name:"Vivid red",slug:"vivid-red",color:"#cf2e2e"},{name:"Luminous vivid orange",slug:"luminous-vivid-orange",color:"#ff6900"},{name:"Luminous vivid amber",slug:"luminous-vivid-amber",color:"#fcb900"},{name:"Light green cyan",slug:"light-green-cyan",color:"#7bdcb5"},{name:"Vivid green cyan",slug:"vivid-green-cyan",color:"#00d084"},{name:"Pale cyan blue",slug:"pale-cyan-blue",color:"#8ed1fc"},{name:"Vivid cyan blue",slug:"vivid-cyan-blue",color:"#0693e3"},{name:"Vivid purple",slug:"vivid-purple",color:"#9b51e0"}],theme:[{color:"#ffffff",name:"Base",slug:"base"},{color:"#000000",name:"Contrast",slug:"contrast"},{color:"#9DFF20",name:"Primary",slug:"primary"},{color:"#345C00",name:"Secondary",slug:"secondary"},{color:"#F6F6F6",name:"Tertiary",slug:"tertiary"}]},text:!0},shadow:{defaultPresets:!0,presets:{default:[{name:"Natural",slug:"natural",shadow:"6px 6px 9px rgba(0, 0, 0, 0.2)"},{name:"Deep",slug:"deep",shadow:"12px 12px 50px rgba(0, 0, 0, 0.4)"},{name:"Sharp",slug:"sharp",shadow:"6px 6px 0px rgba(0, 0, 0, 0.2)"},{name:"Outlined",slug:"outlined",shadow:"6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1)"},{name:"Crisp",slug:"crisp",shadow:"6px 6px 0px rgba(0, 0, 0, 1)"}]}},layout:{contentSize:"650px",wideSize:"1200px"},spacing:{blockGap:!0,margin:!0,padding:!0,customSpacingSize:!0,units:["%","px","em","rem","vh","vw"],spacingScale:{operator:"*",increment:1.5,steps:0,mediumStep:1.5,unit:"rem"},spacingSizes:{theme:[{size:"clamp(1.5rem, 5vw, 2rem)",slug:"30",name:"1"},{size:"clamp(1.8rem, 1.8rem + ((1vw - 0.48rem) * 2.885), 3rem)",slug:"40",name:"2"},{size:"clamp(2.5rem, 8vw, 4.5rem)",slug:"50",name:"3"},{size:"clamp(3.75rem, 10vw, 7rem)",slug:"60",name:"4"},{size:"clamp(5rem, 5.25rem + ((1vw - 0.48rem) * 9.096), 8rem)",slug:"70",name:"5"},{size:"clamp(7rem, 14vw, 11rem)",slug:"80",name:"6"}]}},typography:{customFontSize:!0,dropCap:!1,fontSizes:{default:[{name:"Small",slug:"small",size:"13px"},{name:"Medium",slug:"medium",size:"20px"},{name:"Large",slug:"large",size:"36px"},{name:"Extra Large",slug:"x-large",size:"42px"}]},fontStyle:!0,fontWeight:!0,letterSpacing:!0,lineHeight:!0,textColumns:!1,textDecoration:!0,textTransform:!0,writingMode:!1,fluid:!0,fontFamilies:{theme:[{fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif',name:"System Font",slug:"system-font"}]}},dimensions:{minHeight:!0},position:{fixed:!0,sticky:!0}},styles:{blocks:{},elements:{}}},index_story_GlobalStylesUI=()=>{const[userGlobalStyles,setUserStyles]=(0,react.useState)({settings:{},styles:{}}),context=(0,react.useMemo)((()=>({isReady:!0,user:userGlobalStyles,base:BASE_SETTINGS,merged:index_story_mergeBaseAndUserConfigs(BASE_SETTINGS,userGlobalStyles),setUserConfig:setUserStyles})),[userGlobalStyles,setUserStyles]);return(0,jsx_runtime.jsx)(index_story_ExperimentalBlockEditorProvider,{children:(0,jsx_runtime.jsx)(index_story_GlobalStylesContext.Provider,{value:context,children:(0,jsx_runtime.jsx)("div",{style:{width:280},children:(0,jsx_runtime.jsx)(ui,{isStyleBookOpened:!1,onCloseStyleBook:()=>{}})})})})};index_story_GlobalStylesUI.displayName="GlobalStylesUI",index_story_GlobalStylesUI.parameters={...index_story_GlobalStylesUI.parameters,docs:{...index_story_GlobalStylesUI.parameters?.docs,source:{originalSource:"() => {\n  const [userGlobalStyles, setUserStyles] = useState({\n    settings: {},\n    styles: {}\n  });\n  const context = useMemo(() => {\n    return {\n      isReady: true,\n      user: userGlobalStyles,\n      base: BASE_SETTINGS,\n      merged: mergeBaseAndUserConfigs(BASE_SETTINGS, userGlobalStyles),\n      setUserConfig: setUserStyles\n    };\n  }, [userGlobalStyles, setUserStyles]);\n  const wrapperStyle = {\n    width: 280\n  };\n  return <ExperimentalBlockEditorProvider>\n            <GlobalStylesContext.Provider value={context}>\n                <div style={wrapperStyle}>\n                    <GlobalStylesUIComponent isStyleBookOpened={false} onCloseStyleBook={() => {}} />\n                </div>\n            </GlobalStylesContext.Provider>\n        </ExperimentalBlockEditorProvider>;\n}",...index_story_GlobalStylesUI.parameters?.docs?.source}}}}}]);